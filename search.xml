<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>C++ä¸­å¤´æ–‡ä»¶<bits/stdc++.h></title>
    <url>/2021/04/06/C-%E4%B8%AD%E5%A4%B4%E6%96%87%E4%BB%B6-bits-stdc-h/</url>
    <content><![CDATA[<p>åœ¨åˆ·é¢˜çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°æœ‰<code>&lt;bits/stdc++.h&gt;</code>è¿™æ ·ä¸€ä¸ªå¤´æ–‡ä»¶ã€‚</p>
<p>å‘ç°å®ƒæ˜¯éƒ¨åˆ†C++ä¸­æ”¯æŒçš„ä¸€ä¸ªå‡ ä¹ä¸‡èƒ½çš„å¤´æ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰çš„å¯ç”¨åˆ°çš„C++åº“å‡½æ•°ï¼Œå¦‚<istream>/<ostream>/<stack>/<queue>.</queue></stack></ostream></istream></p>
<p>è¯¥å¤´æ–‡ä»¶çš„è¯¦ç»†å†…å®¹å¦‚ä¸‹</p>
<a id="more"></a>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// C++ includes used for precompiling -*- C++ -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Copyright (C) 2003-2013 Free Software Foundation, Inc.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// This file is part of the GNU ISO C++ Library.  This library is free</span></span><br><span class="line"><span class="comment">// software; you can redistribute it and/or modify it under the</span></span><br><span class="line"><span class="comment">// terms of the GNU General Public License as published by the</span></span><br><span class="line"><span class="comment">// Free Software Foundation; either version 3, or (at your option)</span></span><br><span class="line"><span class="comment">// any later version.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// This library is distributed in the hope that it will be useful,</span></span><br><span class="line"><span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span></span><br><span class="line"><span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></span><br><span class="line"><span class="comment">// GNU General Public License for more details.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Under Section 7 of GPL version 3, you are granted additional</span></span><br><span class="line"><span class="comment">// permissions described in the GCC Runtime Library Exception, version</span></span><br><span class="line"><span class="comment">// 3.1, as published by the Free Software Foundation.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// You should have received a copy of the GNU General Public License and</span></span><br><span class="line"><span class="comment">// a copy of the GCC Runtime Library Exception along with this program;</span></span><br><span class="line"><span class="comment">// see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see</span></span><br><span class="line"><span class="comment">// &lt;Licenses - GNU Project - Free Software Foundation&gt;.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** @file stdc++.h</span></span><br><span class="line"><span class="comment"> *  This is an implementation file for a precompiled header.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 17.4.1.2 Headers</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// C</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> _GLIBCXX_NO_ASSERT</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cctype&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cerrno&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cfloat&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ciso646&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;clocale&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;csetjmp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;csignal&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdarg&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstddef&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> __cplusplus &gt;= 201103L</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ccomplex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cfenv&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cinttypes&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdalign&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdbool&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdint&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctgmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cwchar&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cwctype&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// C++</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bitset&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;complex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;exception&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ios&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iosfwd&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;istream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;limits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;locale&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;memory&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;new&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;numeric&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdexcept&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;streambuf&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;typeinfo&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;valarray&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> __cplusplus &gt;= 201103L</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;array&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;atomic&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;condition_variable&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;forward_list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;future&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;initializer_list&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;random&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ratio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;regex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;scoped_allocator&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;system_error&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;thread&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;tuple&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;typeindex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;type_traits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<h1 id="bits-stdc-hçš„ç¼ºç‚¹"><a href="#bits-stdc-hçš„ç¼ºç‚¹" class="headerlink" title="bits/stdc++.hçš„ç¼ºç‚¹"></a><code>bits/stdc++.h</code>çš„ç¼ºç‚¹</h1><ul>
<li>bits/stdc++.h ä¸æ˜¯GNU C++åº“çš„æ ‡å‡†å¤´æ–‡ä»¶ï¼Œæ‰€ä»¥å¦‚æœä½ åœ¨ä¸€äº›ç¼–è¯‘å™¨ï¼ˆé™¤äº†GCCï¼‰ä¸Šç¼–è¯‘ä½ çš„ä»£ç ï¼Œå¯èƒ½ä¼šå¤±è´¥ï¼Œæ¯”å¦‚MSVCæ²¡æœ‰è¿™ä¸ªå¤´æ–‡ä»¶ã€‚</li>
<li>ä½¿ç”¨å®ƒä¼šåŒ…å«å¾ˆå¤šä¸å¿…è¦çš„ä¸œè¥¿ï¼Œå¹¶ä¸”ä¼šå¢åŠ ç¼–è¯‘æ—¶é—´</li>
<li>è¿™ä¸ªå¤´æ–‡ä»¶ä¸æ˜¯C++æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥æ˜¯ä¸å¯ç§»æ¤çš„ï¼Œåº”è¯¥å°½é‡é¿å…ã€‚</li>
<li>å°½ç®¡æ ‡å‡†ä¸­æœ‰ä¸€äº›é€šç”¨çš„å¤´æ–‡ä»¶ï¼Œä½†è¿˜æ˜¯åº”è¯¥é¿å…ä½¿ç”¨å®ƒæ¥ä»£æ›¿ç‰¹å®šçš„å¤´æ–‡ä»¶ï¼Œå› ä¸ºç¼–è¯‘å™¨åœ¨æ¯æ¬¡ç¼–è¯‘è½¬æ¢å•å…ƒæ—¶éƒ½å®é™…åœ°è¯»å–å¹¶è§£ææ¯ä¸ªåŒ…å«çš„å¤´æ–‡ä»¶(åŒ…æ‹¬é€’å½’åŒ…å«çš„å¤´æ–‡ä»¶)ã€‚</li>
</ul>
<h1 id="bits-stdc-hçš„ä¼˜ç‚¹"><a href="#bits-stdc-hçš„ä¼˜ç‚¹" class="headerlink" title="bits/stdc++.hçš„ä¼˜ç‚¹"></a><code>bits/stdc++.h</code>çš„ä¼˜ç‚¹</h1><ul>
<li>åœ¨æ¯”èµ›ä¸­,ä½¿ç”¨è¿™ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ªå¥½ä¸»æ„,å½“ä½ æƒ³å‡å°‘æ—¶é—´æµªè´¹åœ¨åšé€‰æ‹©çš„æ—¶å€™;ç‰¹åˆ«æ˜¯å½“ä½ çš„æ’åå¯¹æ—¶é—´å¾ˆæ•æ„Ÿçš„æ—¶å€™ã€‚</li>
<li>è¿™è¿˜å‡å°‘äº†ç¼–å†™æ‰€æœ‰å¿…è¦å¤´æ–‡ä»¶çš„æ‰€æœ‰æ‚åŠ¡ã€‚</li>
<li>ä½ ä¸å¿…ä¸ºä½¿ç”¨çš„æ¯ä¸ªå‡½æ•°éƒ½è®°ä½GNU c++çš„æ‰€æœ‰STLã€‚</li>
</ul>
]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>STL</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¬”è¯•ç»éªŒæ€»ç»“</title>
    <url>/2021/04/04/%E7%AC%94%E8%AF%95%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<p>å·²ç»æœ‰è¿‡å‡ æ¬¡ç¬”è¯•çš„ç»éªŒäº†ï¼Œä¹Ÿç»å†äº†ä¸å°‘çš„å¤±è´¥å’ŒæŒ«æŠ˜ï¼Œåšä¸€ä¸ªæ€»ç»“ï¼š</p>
<ol>
<li>ACMæ ¼å¼æ¯”LeetCodeè¦éš¾ï¼Œå› ä¸ºè¦è‡ªå·±å¤„ç†è¾“å…¥è¾“å‡ºï¼Œéœ€è¦ä¿è¯å¤„ç†çš„æ­£ç¡®è€Œä¸”é€Ÿåº¦å¿«ï¼›å¦å¤–ï¼Œéœ€è¦è‡ªå·±è€ƒè™‘åˆ°æ‰€æœ‰çš„corner caseã€‚<strong>åœ¨LeetCodeä¸Šä¼šæç¤ºæµ‹è¯•é€šä¸è¿‡çš„æ ·ä¾‹ï¼Œä¸è¦çœ‹ï¼</strong>è¿™æ˜¯ä¸€ä¸ªå¾ˆä¸å¥½çš„ä¹ æƒ¯ï¼Œä¼šå½¢æˆä¾èµ–ã€‚è¦åœ¨è„‘æµ·ä¸­è‡ªå·±æŠŠé—®é¢˜è€ƒè™‘å‘¨å…¨ã€‚</li>
<li>è¦å…ˆæŠŠé¢˜ç›®çœ‹ä¸€éï¼Œ<strong>å¦‚æœæŸä¸ªé¢˜çŸ­æ—¶é—´å†…ä¸èƒ½æœ‰ä¸€ä¸ª</strong><font color="orange"><strong>æ¸…æ™°ç›´æ¥</strong></font><strong>çš„æ€è·¯ï¼Œå¤šåŠæ˜¯è‡ªå·±æé”™äº†</strong>ã€‚ä¸è¦æµªè´¹æ—¶é—´ï¼</li>
<li>è¦ç†Ÿç»ƒæŒæ¡C++ä¸­çš„STLå’Œå¸¸ç”¨å‡½æ•°ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>Others</category>
        <category>Interview</category>
      </categories>
      <tags>
        <tag>ACM</tag>
        <tag>OJ</tag>
        <tag>LeetCode</tag>
        <tag>Interview</tag>
        <tag>æ˜¥æ‹›</tag>
        <tag>ç¬”è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>int long å’Œ long long çš„åŒºåˆ«</title>
    <url>/2021/04/03/int-long-%E5%92%8C-long-long-%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    <content><![CDATA[<h2 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h2><h3 id="int"><a href="#int" class="headerlink" title="int"></a>int</h3><p>(4ä¸ªå­—èŠ‚ï¼Œ32ä½)</p>
<p>unsigned int: 0 ~ 4294967295</p>
<p>int: -2147483648 ~ 2147483647</p>
<h3 id="int32"><a href="#int32" class="headerlink" title="_int32"></a>_int32</h3><p>(4ä¸ªå­—èŠ‚ï¼Œ32ä½)<br>unsigned _int32: 0ï½4294967295<br>_int32: -2147483648 ~ 2147483647</p>
<h3 id="long"><a href="#long" class="headerlink" title="long"></a>long</h3><p>(4ä¸ªå­—èŠ‚ï¼Œ32ä½)<br>unsigned long: 0ï½4294967295<br>long: -2147483648ï½2147483647</p>
<h3 id="long-long"><a href="#long-long" class="headerlink" title="long long"></a>long long</h3><p>(8ä¸ªå­—èŠ‚ï¼Œ64ä½)<br>unsigned long longï¼š0~1844674407370955161<br>long longï¼š-9223372036854775808~9223372036854775807</p>
<a id="more"></a>
<h3 id="int64"><a href="#int64" class="headerlink" title="_int64"></a>_int64</h3><p>(8ä¸ªå­—èŠ‚ï¼Œ64ä½)<br>unsigned _int64ï¼š0~18446744073709551615<br>_int64ï¼š-9223372036854775808~9223372036854775807</p>
<h2 id="ä¸ºä»€ä¹ˆæœ‰longå’Œlong-long"><a href="#ä¸ºä»€ä¹ˆæœ‰longå’Œlong-long" class="headerlink" title="ä¸ºä»€ä¹ˆæœ‰longå’Œlong long?"></a>ä¸ºä»€ä¹ˆæœ‰longå’Œlong long?</h2><ul>
<li>æ—©æœŸçš„æ“ä½œç³»ç»Ÿæ˜¯16ä½ç³»ç»Ÿ</li>
</ul>
<p>intç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºï¼ŒèŒƒå›´æ˜¯-32768 ~ 32767</p>
<p>longç”¨å››ä¸ªå­—èŠ‚è¡¨ç¤ºï¼ŒèŒƒå›´æ˜¯-2147483648 ~ 2147483647</p>
<ul>
<li>åæ¥å‘å±•åˆ°32ä½æ“ä½œç³»ç»Ÿ</li>
</ul>
<p>intç”¨å››ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œä¸longç›¸åŒ</p>
<ul>
<li>ç›®å‰æ“ä½œç³»ç»Ÿå·²ç»å‘å±•åˆ°64ä½æ“ä½œç³»ç»Ÿï¼Œ<strong>ä½†å› ç¨‹åºç¼–è¯‘å·¥è‰ºçš„ä¸åŒï¼Œä¸¤è€…è¡¨ç°å‡ºä¸åŒçš„å·®åˆ«</strong>:</li>
</ul>
<p>32ä½ç¼–è¯‘ç³»ç»Ÿï¼šintå å››å­—èŠ‚ï¼Œä¸longç›¸åŒ</p>
<p>64ä½ç¼–è¯‘ç³»ç»Ÿï¼šintå å››å­—èŠ‚ï¼Œlongå å…«å­—èŠ‚ï¼Œlongæ•°æ®èŒƒå›´å˜ä¸ºï¼š$-2^{63} \sim 2^{63}-1$</p>
]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>int</tag>
        <tag>long</tag>
        <tag>long long</tag>
        <tag>æ•´å‹</tag>
        <tag>integer</tag>
      </tags>
  </entry>
  <entry>
    <title>å¿«é€Ÿæ’åº</title>
    <url>/2021/04/01/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/</url>
    <content><![CDATA[<h1 id="ä¸€ã€ç®—æ³•æ€æƒ³"><a href="#ä¸€ã€ç®—æ³•æ€æƒ³" class="headerlink" title="ä¸€ã€ç®—æ³•æ€æƒ³"></a>ä¸€ã€ç®—æ³•æ€æƒ³</h1><p>å¿«é€Ÿæ’åºçš„åŸºæœ¬æ€æƒ³ï¼šé€šè¿‡ä¸€è¶Ÿæ’åºå°†å¾…æ’è®°å½•åˆ†éš”æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†è®°å½•çš„å…³é”®å­—å‡æ¯”å¦ä¸€éƒ¨åˆ†çš„å…³é”®å­—å°ï¼Œåˆ™å¯åˆ†åˆ«å¯¹è¿™ä¸¤éƒ¨åˆ†è®°å½•ç»§ç»­è¿›è¡Œæ’åºï¼Œä»¥è¾¾åˆ°æ•´ä¸ªåºåˆ—æœ‰åºã€‚</p>
<h1 id="äºŒã€å®ç°åŸç†"><a href="#äºŒã€å®ç°åŸç†" class="headerlink" title="äºŒã€å®ç°åŸç†"></a>äºŒã€å®ç°åŸç†</h1><p>2.1ã€è®¾ç½®ä¸¤ä¸ªå˜é‡ lowã€highï¼Œ<strong>æ’åºå¼€å§‹æ—¶ï¼šlow=0ï¼Œhigh=size-1ã€‚</strong><br>2.2ã€æ•´ä¸ªæ•°ç»„æ‰¾åŸºå‡†æ­£ç¡®ä½ç½®ï¼Œæ‰€æœ‰å…ƒç´ æ¯”åŸºå‡†å€¼å°çš„æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰å…ƒç´ æ¯”åŸºå‡†å€¼å¤§çš„æ‘†åœ¨åŸºå‡†çš„åé¢</p>
<ul>
<li>é»˜è®¤æ•°ç»„çš„ç¬¬ä¸€ä¸ªæ•°ä¸ºåŸºå‡†æ•°æ®ï¼Œèµ‹å€¼ç»™keyï¼Œå³key=array[low]ã€‚</li>
<li>å› ä¸ºé»˜è®¤æ•°ç»„çš„ç¬¬ä¸€ä¸ªæ•°ä¸ºåŸºå‡†ï¼Œ<strong>æ‰€ä»¥ä»åé¢å¼€å§‹å‘å‰æœç´¢ï¼ˆhighâ€”ï¼‰</strong>ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ª<strong>å°äº</strong>keyçš„array[high]ï¼Œå°±å°† array[high] èµ‹ç»™ array[low]ï¼Œå³ array[low] = array[high]ã€‚ï¼ˆå¾ªç¯æ¡ä»¶æ˜¯ array[high] &gt;= keyï¼›ç»“æŸæ—¶ array[high] &lt; keyï¼‰</li>
<li>æ­¤æ—¶ä»å‰é¢å¼€å§‹å‘åæœç´¢ï¼ˆlow++ï¼‰ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ª<strong>å¤§äº</strong>keyçš„array[low]ï¼Œå°±å°† array[low] èµ‹ç»™ array[high]ï¼Œå³ array[high] = array[low]ã€‚ï¼ˆå¾ªç¯æ¡ä»¶æ˜¯ array[low] &lt;= keyï¼›ç»“æŸæ—¶ array[low] &gt; keyï¼‰</li>
<li>å¾ªç¯ 2-3 æ­¥éª¤ï¼Œç›´åˆ° low=highï¼Œè¯¥ä½ç½®å°±æ˜¯åŸºå‡†ä½ç½®ã€‚</li>
<li>æŠŠåŸºå‡†æ•°æ®èµ‹ç»™å½“å‰ä½ç½®ã€‚</li>
</ul>
<p>2.3ã€ç¬¬ä¸€è¶Ÿæ‰¾åˆ°çš„åŸºå‡†ä½ç½®ï¼Œä½œä¸ºä¸‹ä¸€è¶Ÿçš„åˆ†ç•Œç‚¹ã€‚<br>2.4ã€é€’å½’è°ƒç”¨ï¼ˆrecursiveï¼‰åˆ†ç•Œç‚¹å‰å’Œåˆ†ç•Œç‚¹åçš„å­æ•°ç»„æ’åºï¼Œé‡å¤2.2ã€2.3ã€2.4çš„æ­¥éª¤ã€‚<br>2.5ã€æœ€ç»ˆå°±ä¼šå¾—åˆ°æ’åºå¥½çš„æ•°ç»„ã€‚</p>
<a id="more"></a>
<h1 id="ä¸‰ã€ç¨³å®šæ€§"><a href="#ä¸‰ã€ç¨³å®šæ€§" class="headerlink" title="ä¸‰ã€ç¨³å®šæ€§"></a>ä¸‰ã€ç¨³å®šæ€§</h1><p>å¿«é€Ÿæ’åºç®—æ³•æ˜¯ä¸ç¨³å®šçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç›¸åŒå¤§å°çš„å…ƒç´ å¯èƒ½åœ¨æ’åºå‰åä½ç½®æœ‰æ‰€è°ƒæ¢ã€‚</p>
<p>å¯ä»¥å°†æ’åºç®—æ³•å®ç°ä¸ºç¨³å®šç®—æ³•ï¼Œä½†æ˜¯å¯èƒ½ä¼šå¸¦æ¥æ€§èƒ½çš„ä¸‹é™ã€‚</p>
<blockquote>
<p>å‚è€ƒCSDNåšå®¢ï¼š</p>
<p><a href="https://blog.csdn.net/gaoxueyi551/article/details/89413936" target="_blank" rel="noopener">https://blog.csdn.net/gaoxueyi551/article/details/89413936</a></p>
</blockquote>
<h1 id="å››ã€C-å®ç°"><a href="#å››ã€C-å®ç°" class="headerlink" title="å››ã€C++å®ç°"></a>å››ã€C++å®ç°</h1><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quicksort</span><span class="params">(<span class="keyword">int</span>* a, <span class="keyword">int</span> s, <span class="keyword">int</span> e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (s &gt;= e)  <span class="comment">// ç»ˆæ­¢æ¡ä»¶ </span></span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	<span class="keyword">int</span> pivot = a[s];</span><br><span class="line">	<span class="keyword">int</span> high = e;</span><br><span class="line">	<span class="keyword">int</span> low = s;</span><br><span class="line">	<span class="keyword">while</span> (low &lt; high) &#123;</span><br><span class="line">		<span class="keyword">while</span> (low &lt; high &amp;&amp; a[high] &gt;= pivot) --high;</span><br><span class="line">		a[low] = a[high];</span><br><span class="line">		<span class="keyword">while</span> (low &lt; high &amp;&amp; a[low] &lt;= pivot) ++low;</span><br><span class="line">		a[high] = a[low];	</span><br><span class="line">	&#125;</span><br><span class="line">	a[low] = pivot;  <span class="comment">// low == high</span></span><br><span class="line">	quicksort(a, s, low - <span class="number">1</span>);</span><br><span class="line">	quicksort(a, low + <span class="number">1</span>, e);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">10</span>] = &#123;<span class="number">0</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">9</span>,<span class="number">4</span>,<span class="number">8</span>&#125;;</span><br><span class="line">	quicksort(a, <span class="number">0</span>, <span class="number">10</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;++i)</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; a[i] &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Others</category>
        <category>Interview</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>sort</tag>
        <tag>quick sort</tag>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>æ–‡ä»¶è·¯å¾„åˆ†å‰²</title>
    <url>/2021/03/30/%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%E5%88%86%E5%89%B2/</url>
    <content><![CDATA[<p>ç›´æ¥å’ä»£ç </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">file_path = <span class="string">"E:/tt/abc.py"</span></span><br><span class="line">filepath,fullflname = os.path.split(file_path)</span><br><span class="line">fname,ext = os.path.splitext(fullflname)</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœ:<br>filepathä¸ºæ–‡ä»¶çš„ç›®å½•,å³E:/tt<br>fullflnameä¸ºæ–‡ä»¶åçš„å…¨åï¼Œå³abc.py<br>fnameä¸ºæ–‡ä»¶çš„åå­—,å³abc<br>extä¸ºæ–‡ä»¶çš„æ‰©å±•å,å³.py</p>
]]></content>
      <categories>
        <category>Others</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>os</tag>
        <tag>split</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonéå†æ–‡ä»¶å¤¹è·å–æ–‡ä»¶</title>
    <url>/2021/03/29/python%E9%81%8D%E5%8E%86%E6%96%87%E4%BB%B6%E5%A4%B9%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<h2 id="1-æ‰‹å†™é€’å½’"><a href="#1-æ‰‹å†™é€’å½’" class="headerlink" title="1. æ‰‹å†™é€’å½’"></a>1. æ‰‹å†™é€’å½’</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getallfile</span><span class="params">(path)</span>:</span></span><br><span class="line">    allfilelist=os.listdir(path)</span><br><span class="line">    <span class="keyword">for</span> file <span class="keyword">in</span> allfilelist:</span><br><span class="line">        filepath=os.path.join(path,file)</span><br><span class="line">        <span class="comment">#åˆ¤æ–­æ˜¯ä¸æ˜¯æ–‡ä»¶å¤¹</span></span><br><span class="line">        <span class="keyword">if</span> os.path.isdir(filepath):</span><br><span class="line">            getallfile(filepath)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">        	allfile.append(filepath)</span><br><span class="line">    <span class="keyword">return</span> allfile</span><br></pre></td></tr></table></figure>
<h2 id="2-os-walk"><a href="#2-os-walk" class="headerlink" title="2. os.walk()"></a>2. os.walk()</h2><p><code>os.walk(top, topdown=True, Î¿nerrÎ¿r=None, followlinks=False)</code><br>è¿”å›ä¸€ä¸ª3ä¸ªå…ƒç´ çš„å…ƒç¥–ï¼Œ(dirpath, dirnames, filenames),<br>dirpathï¼šè¦åˆ—å‡ºæŒ‡å®šç›®å½•çš„è·¯å¾„<br>dirnamesï¼šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤¹<br>filenamesï¼šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</p>
<a id="more"></a>
<p>å‚æ•°ä¸€ï¼štop â€“ æ ¹ç›®å½•ä¸‹çš„æ¯ä¸€ä¸ªæ–‡ä»¶å¤¹(åŒ…å«å®ƒè‡ªå·±), äº§ç”Ÿ3-å…ƒç»„ (dirpath, dirnames, filenames)ã€æ–‡ä»¶å¤¹è·¯å¾„, æ–‡ä»¶å¤¹åå­—, æ–‡ä»¶åã€‘ã€‚</p>
<p>å‚æ•°äºŒï¼štopdown â€“å¯é€‰ï¼Œä¸ºTrueæˆ–è€…æ²¡æœ‰æŒ‡å®š, ä¸€ä¸ªç›®å½•çš„çš„3-å…ƒç»„å°†æ¯”å®ƒçš„ä»»ä½•å­æ–‡ä»¶å¤¹çš„3-å…ƒç»„å…ˆäº§ç”Ÿ (ç›®å½•è‡ªä¸Šè€Œä¸‹)ã€‚å¦‚æœtopdownä¸º False, ä¸€ä¸ªç›®å½•çš„3-å…ƒç»„å°†æ¯”å®ƒçš„ä»»ä½•å­æ–‡ä»¶å¤¹çš„3-å…ƒç»„åäº§ç”Ÿ (ç›®å½•è‡ªä¸‹è€Œä¸Š)ã€‚</p>
<p>å‚æ•°ä¸‰ï¼šonerror â€“ å¯é€‰ï¼Œæ˜¯ä¸€ä¸ªå‡½æ•°; å®ƒè°ƒç”¨æ—¶æœ‰ä¸€ä¸ªå‚æ•°, ä¸€ä¸ªOSErrorå®ä¾‹ã€‚æŠ¥å‘Šè¿™é”™è¯¯åï¼Œç»§ç»­walk,æˆ–è€…æŠ›å‡ºexceptionç»ˆæ­¢walkã€‚</p>
<p>å‚æ•°å››ï¼šfollowlinks â€“ è®¾ç½®ä¸º trueï¼Œåˆ™é€šè¿‡è½¯é“¾æ¥è®¿é—®ç›®å½•ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getallfiles</span><span class="params">(path)</span>:</span></span><br><span class="line">    allfile=[]</span><br><span class="line">    <span class="keyword">for</span> dirpath,dirnames,filenames <span class="keyword">in</span> os.walk(path):</span><br><span class="line">        <span class="keyword">for</span> dir <span class="keyword">in</span> dirnames:</span><br><span class="line">            allfile.append(os.path.join(dirpath,dir))</span><br><span class="line">        <span class="keyword">for</span> name <span class="keyword">in</span> filenames:</span><br><span class="line">            allfile.append(os.path.join(dirpath, name))</span><br><span class="line">    <span class="keyword">return</span> allfile</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Others</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>walk</tag>
        <tag>os</tag>
        <tag>recursive</tag>
      </tags>
  </entry>
  <entry>
    <title>ç›´è§‚ç†è§£çº¿æ€§å˜æ¢</title>
    <url>/2021/03/29/%E7%9B%B4%E8%A7%82%E7%90%86%E8%A7%A3%E7%BA%BF%E6%80%A7%E5%8F%98%E6%8D%A2/</url>
    <content><![CDATA[<p>ç›´è§‚ä¸€ç‚¹ç†è§£ï¼Œçº¿æ€§å˜æ¢æ˜¯ä¸€ç§è¿åŠ¨ï¼Œå³è®©æ¯ä¸€ä¸ªè¾“å…¥å‘é‡éƒ½<strong>ç§»åŠ¨</strong>åˆ°å¯¹åº”è¾“å‡ºå‘é‡çš„ä½ç½®ã€‚</p>
<p>é‚£ä¹ˆè¿™æ ·ï¼Œçº¿æ€§å˜æ¢è¿™ä¸ªå…³äºå‘é‡çš„ç§»åŠ¨ï¼Œå°±å¯ä»¥ç›´è§‚åœ°å˜æˆäº†åæ ‡ç³»ä¸Šç‚¹çš„è¿åŠ¨ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œçº¿æ€§å˜æ¢å¯ä»¥çœ‹ä½œæ˜¯åæ ‡ç³»â€œ<strong>æ•´ä½“ã€å‡åŒ€</strong>â€çš„å˜æ¢ã€‚</p>
<p>æ›´è¯¦ç»†åœ°å‚è§ä»¥ä¸‹è¿™ä¸ªè§†é¢‘ï¼š</p>
<p><a href="https://www.bilibili.com/video/av6043439" target="_blank" rel="noopener">https://www.bilibili.com/video/av6043439</a></p>
<p>è€Œ<strong>ä»¿å°„å˜æ¢ (Affine Transformation)</strong>ä¼šæ”¹å˜åŸç‚¹çš„ä½ç½®ï¼Œè€Œ<strong>çº¿æ€§å˜æ¢ (Linear Transformation)</strong>ä¸æ”¹å˜åŸç‚¹çš„ä½ç½®ã€‚</p>
]]></content>
      <categories>
        <category>Mathmatic</category>
      </categories>
      <tags>
        <tag>Linear Transformation</tag>
        <tag>Affine Transformation</tag>
        <tag>çº¿æ€§å˜æ¢</tag>
      </tags>
  </entry>
  <entry>
    <title>SMOTEä¸Šé‡‡æ ·æ–¹æ³•</title>
    <url>/2021/03/29/SMOTE%E4%B8%8A%E9%87%87%E6%A0%B7%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<p>SMOTE or <strong>Synthetic Minority Oversampling Technique</strong></p>
<p>ç»å…¸çš„ä¸Šé‡‡æ ·æ–¹æ³•æ˜¯ç›´æ¥å°†å°‘æ•°ç±»åˆ«çš„æ ·æœ¬é‡å¤è‹¥å¹²æ¬¡ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•æ²¡æœ‰å¸¦æ¥æ–°çš„ä¿¡æ¯ã€‚</p>
<blockquote>
<p>SMOTE works by utilizing a <strong>k-nearest neighbor</strong> algorithm to create synthetic data. SMOTE first start by choosing random data from the minority class, then k-nearest neighbors from the data are set. Synthetic data would then made between the random data and the randomly selected k-nearest neighbor. Let me show you the example below.</p>
</blockquote>
<h2 id="1-SMOTEä½¿ç”¨"><a href="#1-SMOTEä½¿ç”¨" class="headerlink" title="1. SMOTEä½¿ç”¨"></a>1. SMOTEä½¿ç”¨</h2><p>SMOTEé€‚ç”¨äºç‰¹å¾å€¼ä¸ºè¿ç»­å€¼è€Œä¸æ˜¯ç¦»æ•£å€¼ã€‚è¿™æ ·æ‰å¯ä»¥è¿›è¡Œæ’å€¼ï¼Œäº§ç”Ÿæ–°çš„è®­ç»ƒæ•°æ®ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> seaborns <span class="keyword">as</span> sns</span><br><span class="line"><span class="comment">#I read the csv churn data into variable called df. Here I would only use two continuous features CreditScore and Age with the target Exited</span></span><br><span class="line">df_example = df[[<span class="string">'CreditScore'</span>, <span class="string">'Age'</span>, <span class="string">'Exited'</span>]]</span><br><span class="line">sns.scatterplot(data = df, x =<span class="string">'CreditScore'</span>, y = <span class="string">'Age'</span>, hue = <span class="string">'Exited'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://miro.medium.com/max/487/1*53v1-PbF5uCiSZnLKDJZ5w.png" alt></p>
<p>ç„¶åä½¿ç”¨SMOTEä¸Šé‡‡æ ·ï¼ŒæŸ¥çœ‹é‡‡æ ·ä¹‹åçš„ç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install -U imbalanced-learn</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Importing SMOTE</span></span><br><span class="line"><span class="keyword">from</span> imblearn.over_sampling <span class="keyword">import</span> SMOTE</span><br><span class="line"><span class="comment">#Oversampling the data</span></span><br><span class="line">smote = SMOTE(random_state = <span class="number">101</span>)</span><br><span class="line">X, y = smote.fit_resample(df[[<span class="string">'CreditScore'</span>, <span class="string">'Age'</span>]], df[<span class="string">'Exited'</span>])</span><br><span class="line"><span class="comment">#Creating a new Oversampling Data Frame</span></span><br><span class="line">df_oversampler = pd.DataFrame(X, columns = [<span class="string">'CreditScore'</span>, <span class="string">'Age'</span>])</span><br><span class="line">df_oversampler[<span class="string">'Exited'</span>]</span><br><span class="line">sns.countplot(df_oversampler[<span class="string">'Exited'</span>])</span><br><span class="line">sns.scatterplot(data = df_oversampler, x =<span class="string">'CreditScore'</span>, y = <span class="string">'Age'</span>, hue = <span class="string">'Exited'</span>)</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p><img src="https://miro.medium.com/max/498/1*BVlx5Mo-1L3pbnKCT_N9Nw.png" alt></p>
<h2 id="2-SMOTEåŸç†"><a href="#2-SMOTEåŸç†" class="headerlink" title="2. SMOTEåŸç†"></a>2. SMOTEåŸç†</h2><p>ç®—æ³•æµç¨‹ï¼š</p>
<ol>
<li>å¯¹äºå°‘æ•°ç±»ä¸­æ¯ä¸€ä¸ªæ ·æœ¬$x$ï¼Œä»¥æ¬§æ°è·ç¦»ä¸ºæ ‡å‡†è®¡ç®—å®ƒåˆ°å°‘æ•°ç±»æ ·æœ¬é›†$S_{min}$æ‰€æœ‰æ ·æœ¬çš„è·ç¦»ï¼Œå¾—åˆ°å…¶kè¿‘é‚»ã€‚</li>
<li>æ ¹æ®æ ·æœ¬ä¸å¹³è¡¡æ¯”ä¾‹è®¾ç½®ä¸€ä¸ªé‡‡æ ·æ¯”ä¾‹ä»¥ç¡®å®šé‡‡æ ·å€ç‡Nï¼Œå¯¹äºæ¯ä¸€ä¸ªå°‘æ•°ç±»æ ·æœ¬$x$ï¼Œä»å…¶kè¿‘é‚»ä¸­éšæœºé€‰æ‹©è‹¥å¹²ä¸ªæ ·æœ¬ï¼Œå‡è®¾é€‰æ‹©çš„è¿‘é‚»ä¸º$x_n$</li>
<li>å¯¹äºæ¯ä¸€ä¸ªéšæœºé€‰å‡ºçš„è¿‘é‚»$x_n$ï¼Œåˆ†åˆ«ä¸åŸæ ·æœ¬æŒ‰ç…§å¦‚ä¸‹çš„å…¬å¼æ„å»ºæ–°çš„æ ·æœ¬</li>
</ol>
<script type="math/tex; mode=display">
x_{new} = x + \mathrm{rand}ï¼ˆ0,1ï¼‰*|x - x_n|</script><p>å¾ˆç›´ç™½å¾ˆå®¹æ˜“ç†è§£ï¼Œå°±æ˜¯ç”¨æŸä¸ªæ ·æœ¬ä¸å…¶è¿‘é‚»åšæ’å€¼ã€‚</p>
]]></content>
      <categories>
        <category>Machine Learning</category>
      </categories>
      <tags>
        <tag>SMOTE</tag>
        <tag>oversampling</tag>
      </tags>
  </entry>
  <entry>
    <title>é€šä¿—ç†è§£å›°æƒ‘åº¦(Perplexity)</title>
    <url>/2021/03/29/%E9%80%9A%E4%BF%97%E7%90%86%E8%A7%A3%E5%9B%B0%E6%83%91%E5%BA%A6-Perplexity/</url>
    <content><![CDATA[<h2 id="ä¸€ã€è¯­è¨€æ¨¡å‹"><a href="#ä¸€ã€è¯­è¨€æ¨¡å‹" class="headerlink" title="ä¸€ã€è¯­è¨€æ¨¡å‹"></a><strong>ä¸€ã€è¯­è¨€æ¨¡å‹</strong></h2><p>æœ¬æ–‡å°½é‡é€šä¿—è§£é‡Šä¸€ä¸‹å›°æƒ‘åº¦çš„æ¦‚å¿µã€‚æ—¢ç„¶é¢˜ç›®ä¸­å†™äº†æ˜¯ç”¨æ¥è¯„ä»·è¯­è¨€æ¨¡å‹çš„å¥½åï¼Œé‚£ä¹ˆé¦–å…ˆæ¥çœ‹ä¸€ä¸‹è¯­è¨€æ¨¡å‹ï¼š</p>
<p><strong>ç®€å•åœ°è¯´ï¼Œè¯­è¨€æ¨¡å‹å°±æ˜¯ç”¨æ¥è®¡ç®—ä¸€ä¸ªå¥å­çš„æ¦‚ç‡çš„æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯åˆ¤æ–­ä¸€å¥è¯æ˜¯å¦æ˜¯äººè¯çš„æ¦‚ç‡ï¼Ÿ</strong></p>
<p>é‚£ä¹ˆå¦‚ä½•è®¡ç®—ä¸€ä¸ªå¥å­çš„æ¦‚ç‡å‘¢ï¼Ÿç»™å®šå¥å­ï¼ˆè¯è¯­åºåˆ—ï¼‰</p>
<p>$S= W_1, â€¦, W_k$</p>
<p>å®ƒçš„æ¦‚ç‡å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p>
<p>$\mathrm{P}(x) = \mathrm{P}(W<em>1, â€¦, W_k) = \mathrm{P}(W_1)\mathrm{P}(W_2|W_1)â€¦\mathrm{P}(W_k|W_1,â€¦,W</em>{k-1})$</p>
<p>ä¹Ÿå°±æ˜¯è¯´åœ¨ç»™å®šä¸€å¥è¯çš„å‰kä¸ªè¯ï¼Œæˆ‘ä»¬å¸Œæœ›<strong>è¯­è¨€æ¨¡å‹</strong>å¯ä»¥é¢„æµ‹ç¬¬k+1ä¸ªè¯æ˜¯ä»€ä¹ˆï¼Œå³ç»™å‡ºä¸€ä¸ªç¬¬k+1ä¸ªè¯å¯èƒ½å‡ºç°çš„æ¦‚ç‡çš„åˆ†å¸ƒã€‚</p>
<p>é‚£ä¹ˆå¦‚ä½•å­¦ä¹ åˆ°ä¸€ä¸ªè¯­è¨€æ¨¡å‹å‘¢ï¼Œè¿™é‡Œä¸è¯¦ç»†å™è¿°ã€‚</p>
<h2 id="äºŒã€å¦‚ä½•è¯„ä»·ä¸€ä¸ªè¯­è¨€æ¨¡å‹å¥½å"><a href="#äºŒã€å¦‚ä½•è¯„ä»·ä¸€ä¸ªè¯­è¨€æ¨¡å‹å¥½å" class="headerlink" title="äºŒã€å¦‚ä½•è¯„ä»·ä¸€ä¸ªè¯­è¨€æ¨¡å‹å¥½å"></a><strong>äºŒã€å¦‚ä½•è¯„ä»·ä¸€ä¸ªè¯­è¨€æ¨¡å‹å¥½å</strong></h2><p>åœ¨å¾—åˆ°ä¸åŒçš„è¯­è¨€æ¨¡å‹ï¼ˆä¸€å…ƒè¯­è¨€æ¨¡å‹ã€äºŒå…ƒè¯­è¨€æ¨¡å‹â€¦.ï¼‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªè¯­è¨€æ¨¡å‹æ˜¯å¦å¥½è¿˜æ˜¯åï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p>
<p>1ã€ä¸€ç§æ–¹æ³•å°†å…¶åº”ç”¨åˆ°å…·ä½“çš„é—®é¢˜å½“ä¸­ï¼Œæ¯”å¦‚æœºå™¨ç¿»è¯‘ã€speech recognitionã€spelling correctorç­‰ã€‚ç„¶åçœ‹è¿™ä¸ªè¯­è¨€æ¨¡å‹åœ¨è¿™äº›ä»»åŠ¡ä¸­çš„è¡¨ç°ï¼ˆextrinsic evaluationï¼Œor in-vivo evaluationï¼‰ã€‚ä½†æ˜¯ï¼Œè¿™ç§æ–¹æ³•ä¸€æ–¹é¢éš¾ä»¥æ“ä½œï¼Œå¦ä¸€æ–¹é¢å¯èƒ½éå¸¸è€—æ—¶ï¼Œå¯èƒ½è·‘ä¸€ä¸ªevaluationéœ€è¦å¤§é‡æ—¶é—´ï¼Œè´¹æ—¶éš¾æ“ä½œã€‚</p>
<p>2ã€é’ˆå¯¹ç¬¬ä¸€ç§æ–¹æ³•çš„ç¼ºç‚¹ï¼Œå¤§å®¶æƒ³æ˜¯å¦å¯ä»¥æ ¹æ®ä¸è¯­è¨€æ¨¡å‹è‡ªèº«çš„ä¸€äº›ç‰¹æ€§ï¼Œæ¥è®¾è®¡ä¸€ç§ç®€å•æ˜“è¡Œï¼Œè€Œåˆè¡Œä¹‹æœ‰æ•ˆçš„è¯„æµ‹æŒ‡æ ‡ã€‚äºæ˜¯ï¼Œäººä»¬å°±å‘æ˜äº†perplexityè¿™ä¸ªæŒ‡æ ‡ã€‚</p>
<p>å›°æƒ‘åº¦ï¼ˆperplexityï¼‰çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼š<strong>ç»™æµ‹è¯•é›†çš„å¥å­èµ‹äºˆè¾ƒé«˜æ¦‚ç‡å€¼çš„è¯­è¨€æ¨¡å‹è¾ƒå¥½,å½“è¯­è¨€æ¨¡å‹è®­ç»ƒå®Œä¹‹åï¼Œæµ‹è¯•é›†ä¸­çš„å¥å­éƒ½æ˜¯æ­£å¸¸çš„å¥å­ï¼Œé‚£ä¹ˆè®­ç»ƒå¥½çš„æ¨¡å‹å°±æ˜¯åœ¨æµ‹è¯•é›†ä¸Šçš„æ¦‚ç‡è¶Šé«˜è¶Šå¥½ï¼Œ</strong>å…¬å¼å¦‚ä¸‹ï¼š</p>
<p>$\mathrm{PP}(W) = \mathrm{P}(w_1, â€¦,w_N) ^ {-\frac{1}{N}} = \sqrt[N]{\frac{1}{\mathrm{P}(w_1,â€¦,w_N)}} $</p>
<p>ç”±å…¬å¼å¯çŸ¥ï¼Œ<strong>å¥å­æ¦‚ç‡è¶Šå¤§ï¼Œè¯­è¨€æ¨¡å‹è¶Šå¥½ï¼Œè¿·æƒ‘åº¦è¶Šå°ã€‚</strong></p>
<a id="more"></a>
<p>ä¸‹é¢æ˜¯ä¸€äº› ngraÂ­m æ¨¡å‹ç» è®­ç»ƒæ–‡æœ¬ååœ¨æµ‹è¯•é›†ä¸Šçš„å›°æƒ‘åº¦å€¼ï¼š</p>
<p><img src="https://pic1.zhimg.com/80/v2-da6384d62d15cd61e36d5749ff127670_720w.jpg" alt></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ trigram æ¨¡å‹ç»è®­ç»ƒåï¼Œç›¸æ¯”äº unigram æ¨¡å‹ï¼Œå›°æƒ‘åº¦ç”±955è·Œå‡è‡³74ï¼Œè¿™æ˜¯ååˆ†å¯è§‚çš„ç»“æœã€‚</p>
<p>è¿™èŠ‚çš„æ ¸å¿ƒå°±æ˜¯<strong>å¥å­æ¦‚ç‡è¶Šå¤§ï¼Œè¯­è¨€æ¨¡å‹è¶Šå¥½ï¼Œè¿·æƒ‘åº¦è¶Šå°ã€‚</strong></p>
]]></content>
      <categories>
        <category>Pretrained Language Model</category>
      </categories>
      <tags>
        <tag>PLM</tag>
        <tag>Perplexity</tag>
        <tag>å›°æƒ‘åº¦</tag>
        <tag>Pretrained Language Model</tag>
      </tags>
  </entry>
  <entry>
    <title>ç‚¹äº’ä¿¡æ¯</title>
    <url>/2021/03/29/%E7%82%B9%E4%BA%92%E4%BF%A1%E6%81%AF/</url>
    <content><![CDATA[<p>åœ¨æ•°æ®æŒ–æ˜æˆ–è€…ä¿¡æ¯æ£€ç´¢çš„ç›¸å…³èµ„æ–™é‡Œï¼Œç»å¸¸ä¼šç”¨åˆ°PMIï¼ˆPointwise Mutual Informationï¼‰è¿™ä¸ªæŒ‡æ ‡æ¥è¡¡é‡ä¸¤ä¸ªäº‹ç‰©ä¹‹é—´çš„ç›¸å…³æ€§ã€‚PMIçš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
\mathrm{PMI}(x, y) = \log \frac{\mathrm{p}(x,y)}{\mathrm{p}(x)\mathrm{p}(y)}</script><p>è¿™ä¸ªå®šä¹‰æ‰€ä½“ç°çš„åŸç†å…¶å®æ˜¯ç›¸å½“ç›´ç™½çš„ã€‚<strong>åœ¨æ¦‚ç‡è®ºä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œå¦‚æœxè·Ÿyä¸ç›¸å…³ï¼Œåˆ™ P(x,y) = P(x)P(y)ã€‚äºŒè€…ç›¸å…³æ€§è¶Šå¤§ï¼Œåˆ™ P(x,y) å°±ç›¸æ¯”äº P(x)P(y) è¶Šå¤§ã€‚</strong>æ ¹æ®æ¡ä»¶æ¦‚ç‡å…¬å¼ï¼Œä½ è¿˜å¯ä»¥å†™æˆ</p>
<script type="math/tex; mode=display">
\mathrm{PMI}(x,y) \equiv \log \frac{\mathrm{p}(x,y)}{\mathrm{p}(x)\mathrm{p}(y)} \equiv \log \frac{\mathrm{p}(x|y)}{\mathrm{p}(x)} \equiv \log \frac{\mathrm{p}(y|x)}{\mathrm{p}(y)}</script><p>è¿™é‡Œçš„logæ¥è‡ªäºä¿¡æ¯è®ºçš„ç†è®ºï¼Œè€Œä¸” log 1 = 0 ï¼Œä¹Ÿæ°æ°è¡¨æ˜P(x,y) = P(x)P(y)ï¼Œç›¸å…³æ€§ä¸º0ï¼Œè€Œä¸”logæ˜¯å•è°ƒé€’å¢å‡½æ•°ï¼Œæ‰€ä»¥ â€œP(x,y) å°±ç›¸æ¯”äº P(x)P(y) è¶Šå¤§ï¼Œx å’Œ y ç›¸å…³æ€§è¶Šå¤§â€ è¿™ä¸€æ€§è´¨ä¹Ÿå¾—åˆ°ä¿ç•™ã€‚</p>
<p>ä½†æ˜¯è‹¥$\mathrm{p}(x,y) = 0$ï¼Œé‚£å°±æ˜¯ä½ æœ‰å¯èƒ½ä¼šå»è®¡ç®— log 0 = -infï¼Œå³å¾—åˆ°ä¸€ä¸ªè´Ÿæ— ç©·ã€‚ä¸ºæ­¤äººä»¬é€šå¸¸ä¼šè®¡ç®—ä¸€ä¸ªPPMIï¼ˆPositive PMIï¼‰æ¥é¿å…å‡ºç° -infï¼Œå³</p>
<script type="math/tex; mode=display">
\mathrm{PPMI}(x, y) =\max( \log \frac{\mathrm{p}(x,y)}{\mathrm{p}(x)\mathrm{p}(y)}, 0)</script>]]></content>
      <categories>
        <category>Machine Learning</category>
      </categories>
      <tags>
        <tag>ç‚¹äº’ä¿¡æ¯</tag>
        <tag>Pointwise Mutual Information</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”Ÿæˆæ¨¡å‹vsåˆ¤åˆ«æ¨¡å‹</title>
    <url>/2021/03/29/%E7%94%9F%E6%88%90%E6%A8%A1%E5%9E%8Bvs%E5%88%A4%E5%88%AB%E6%A8%A1%E5%9E%8B/</url>
    <content><![CDATA[<blockquote>
<p>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€ŒCAM-TAYã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚<br>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/u010358304/article/details/79748153" target="_blank" rel="noopener">https://blog.csdn.net/u010358304/article/details/79748153</a></p>
</blockquote>
<p>ä»æ¦‚ç‡åˆ†å¸ƒçš„è§’åº¦è€ƒè™‘ï¼Œå¯¹äºä¸€å †æ ·æœ¬æ•°æ®ï¼Œæ¯ä¸ªå‡æœ‰ç‰¹å¾Xiå¯¹åº”åˆ†ç±»æ ‡è®°yiã€‚</p>
<p>ç”Ÿæˆæ¨¡å‹ï¼šå­¦ä¹ å¾—åˆ°è”åˆæ¦‚ç‡åˆ†å¸ƒP(x,y)ï¼Œå³ç‰¹å¾xå’Œæ ‡è®°yå…±åŒå‡ºç°çš„æ¦‚ç‡ï¼Œç„¶åæ±‚æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒã€‚èƒ½å¤Ÿå­¦ä¹ åˆ°æ•°æ®ç”Ÿæˆçš„æœºåˆ¶ã€‚</p>
<p>åˆ¤åˆ«æ¨¡å‹ï¼šå­¦ä¹ å¾—åˆ°æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒP(y|x)ï¼Œå³åœ¨ç‰¹å¾xå‡ºç°çš„æƒ…å†µä¸‹æ ‡è®°yå‡ºç°çš„æ¦‚ç‡ã€‚</p>
<p>æ•°æ®è¦æ±‚ï¼šç”Ÿæˆæ¨¡å‹éœ€è¦çš„æ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œèƒ½å¤Ÿè¾ƒå¥½åœ°ä¼°è®¡æ¦‚ç‡å¯†åº¦ï¼›è€Œåˆ¤åˆ«æ¨¡å‹å¯¹æ•°æ®æ ·æœ¬é‡çš„è¦æ±‚æ²¡æœ‰é‚£ä¹ˆå¤šã€‚</p>
<p><img src="https://img-blog.csdn.net/20180329224547767?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTAzNTgzMDQ=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt></p>
]]></content>
      <categories>
        <category>Machine Learning</category>
      </categories>
      <tags>
        <tag>ç”Ÿæˆæ¨¡å‹</tag>
        <tag>åˆ¤åˆ«æ¨¡å‹</tag>
        <tag>generative</tag>
        <tag>discriminative</tag>
      </tags>
  </entry>
  <entry>
    <title>nvidia-smiæŠ¥é”™NVIDIA-SMI has failed because it couldn't...</title>
    <url>/2021/03/29/nvidia-smi%E6%8A%A5%E9%94%99NVIDIA-SMI-has-failed-because-it-couldn-t/</url>
    <content><![CDATA[<font color="red">NVIDIA-SMI has failed because it couldn't communicate with the NVIDIA driver. Make sure that the latest NVIDIA driver is installed and running.</font>

<p>åŸå› æ˜¯ç‰ˆæœ¬ä¸åŒ¹é…å¯¼è‡´çš„æ£€æµ‹æ˜¾å¡é©±åŠ¨ç¨‹åºå¼‚å¸¸ã€‚</p>
<h1 id="1-æ£€æµ‹ç‰ˆæœ¬"><a href="#1-æ£€æµ‹ç‰ˆæœ¬" class="headerlink" title="1. æ£€æµ‹ç‰ˆæœ¬"></a>1. æ£€æµ‹ç‰ˆæœ¬</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install dkms</span><br></pre></td></tr></table></figure>
<p>ç„¶åæŸ¥çœ‹å¯¹åº”çš„é©±åŠ¨ç‰ˆæœ¬ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ls /usr/src</span><br></pre></td></tr></table></figure>
<p>å¯¹åº”ç»“æœä¸ºç›®å½•ï¼š<code>nvidia-418.87.01</code></p>
<h1 id="2-é‡æ–°ç”Ÿæˆå¯¹åº”çš„é©±åŠ¨æ¨¡å—"><a href="#2-é‡æ–°ç”Ÿæˆå¯¹åº”çš„é©±åŠ¨æ¨¡å—" class="headerlink" title="2. é‡æ–°ç”Ÿæˆå¯¹åº”çš„é©±åŠ¨æ¨¡å—"></a>2. é‡æ–°ç”Ÿæˆå¯¹åº”çš„é©±åŠ¨æ¨¡å—</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo dkms install -m nvidia -v 418.87.01</span><br></pre></td></tr></table></figure>
<p>ç¥å¤§å®¶ç§‘ç ”é¡ºåˆ©ğŸ¤­</p>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>nvidia</tag>
        <tag>NVIDIA-SMI</tag>
      </tags>
  </entry>
  <entry>
    <title>unordered_mapä½¿ç”¨æ–¹æ³•</title>
    <url>/2021/03/28/unordered-map%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<blockquote>
<p>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€ŒCypress1010ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚<br>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/Cypress1010/article/details/53669409" target="_blank" rel="noopener">https://blog.csdn.net/Cypress1010/article/details/53669409</a></p>
</blockquote>
<h2 id="unordered-map-æ— åºæ˜ å°„"><a href="#unordered-map-æ— åºæ˜ å°„" class="headerlink" title="unordered_map(æ— åºæ˜ å°„)"></a>unordered_map(æ— åºæ˜ å°„)</h2><p>å¯¹äºmapï¼Œå‰é¢å·²ç»æåˆ°è¿‡ï¼Œå…¶å†…éƒ¨æ•°æ®ç»“æ„ä¸ºçº¢é»‘æ ‘ï¼Œå› æ­¤æ‰€æœ‰å…ƒç´ æ’å…¥åˆ°mapé‡Œé¢éƒ½ä¼šæ’å¥½åºï¼Œè€Œä¸”æœç´¢è¿‡ç¨‹ä¸ºå¹³è¡¡äºŒå‰æ ‘æœç´¢ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸ºO(logN)ã€‚æˆ‘ä»¬çŸ¥é“è¿˜æœ‰ä¸€ç§å¿«é€Ÿçš„æœç´¢æ–¹æ³•ï¼Œé‚£è¾¹æ˜¯å“ˆå¸Œ(åˆåæ•£åˆ—)ï¼Œåˆ©ç”¨å“ˆå¸Œå‡½æ•°ï¼Œé€šè¿‡å“ˆå¸Œå€¼èƒ½å¿«é€Ÿçš„æŸ¥æ‰¾åˆ°æ‰€éœ€å…ƒç´ ã€‚unordered_mapä¾¿æ˜¯é‡‡ç”¨è¿™ç§æ•°æ®ç»“æ„å®ç°ï¼Œunordered _mapä¸mapçš„ä½¿ç”¨åŸºæœ¬ä¸€æ ·ï¼Œéƒ½æ˜¯key/valueä¹‹é—´çš„æ˜ å°„ï¼Œåªæ˜¯ä»–ä»¬å†…éƒ¨é‡‡ç”¨çš„æ•°æ®ç»“æ„ä¸ä¸€æ ·ã€‚</p>
<blockquote>
<p>ç”±äºunordered_mapå†…éƒ¨æ˜¯ç”¨æ•£åˆ—è¡¨æ¥å®ç°å¿«é€ŸæŸ¥æ‰¾ï¼Œå› æ­¤å…¶å†…éƒ¨å…ƒç´ å®Œå…¨æ˜¯ä¸€ç§æ— åºçŠ¶æ€ã€‚å“ˆå¸Œè¡¨åˆ©ç”¨å“ˆå¸Œå‡½æ•°ï¼Œå°†å…³é”®å­—çš„å“ˆå¸Œå€¼æ”¾éƒ½ä¸€ä¸ªæ¡¶(bucket)é‡Œé¢ï¼Œå…·æœ‰ç›¸åŒå“ˆå¸Œå€¼çš„æ”¾å…¥åˆ°åŒä¸€ä¸ªæ¡¶ã€‚</p>
</blockquote>
<h2 id="å¤´æ–‡ä»¶ï¼š-include"><a href="#å¤´æ–‡ä»¶ï¼š-include" class="headerlink" title="å¤´æ–‡ä»¶ï¼š#include "></a>å¤´æ–‡ä»¶ï¼š#include <unordered_map></unordered_map></h2><p>æ„é€ å‡½æ•°</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="built_in">unordered_map</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; stringmap;</span><br><span class="line"></span><br><span class="line">stringmap first;  <span class="comment">// empty</span></span><br><span class="line"><span class="function">stringmap <span class="title">second</span><span class="params">(&#123;&#123;<span class="string">"apple"</span>, <span class="string">"red"</span>&#125;,&#123;<span class="string">"lemon"</span>, <span class="string">"yellow"</span>&#125;&#125;)</span></span>;  <span class="comment">// init list</span></span><br><span class="line"><span class="function">stringmap <span class="title">third</span><span class="params">(&#123;&#123;<span class="string">"orange"</span>, <span class="string">"orange"</span>&#125;,&#123;<span class="string">"strawberry"</span>, <span class="string">"red"</span>&#125;&#125;)</span></span>;</span><br><span class="line"><span class="function">stringmap <span class="title">fourth</span><span class="params">(third)</span></span>;  <span class="comment">// copy</span></span><br><span class="line"><span class="function">stringmap <span class="title">fifth</span><span class="params">(fourth.begin(), fourth.end())</span></span>;  <span class="comment">// range</span></span><br></pre></td></tr></table></figure>
<p>å®¹å™¨å¤§å°</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cout</span> &lt;&lt; second.empty() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; second.size() &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>
<p>è·å–å…ƒç´ </p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cout</span> &lt;&lt; second[<span class="number">0</span>] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; second.at(<span class="number">0</span>) &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>
<p>å…ƒç´ æŸ¥æ‰¾</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">unordered_map</span>&lt;<span class="keyword">char</span>, <span class="keyword">int</span>&gt;::iterator it;</span><br><span class="line">it = second.find(<span class="string">"banana"</span>);  <span class="comment">//è¿”å›æŸ¥æ‰¾åˆ°å…ƒç´ çš„iteratorï¼Œå¦‚æœªæŸ¥æ‰¾åˆ°ï¼Œè¿”å›end()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (it != second.end())</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; (*it).first &lt;&lt; <span class="string">" "</span> &lt;&lt; (*it).second &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>
<p>å…ƒç´ ä¿®æ”¹</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">unordered_map</span>&lt;<span class="keyword">char</span>, <span class="keyword">int</span>&gt; second;</span><br><span class="line">second[<span class="string">'a'</span>] = <span class="number">1</span>;</span><br><span class="line">second[<span class="string">'b'</span>] = <span class="number">2</span>;</span><br><span class="line">second[<span class="string">'c'</span>] = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤å…ƒç´ </span></span><br><span class="line">second.erase ( second.begin() );      <span class="comment">// erasing by iterator</span></span><br><span class="line">second.erase (<span class="string">'a'</span>);             <span class="comment">// erasing by key</span></span><br><span class="line">second.erase ( second.find(<span class="string">'c'</span>), second.end() ); <span class="comment">// erasing by range</span></span><br><span class="line"></span><br><span class="line">second.clear();  <span class="comment">//æ¸…ç©º</span></span><br><span class="line">second.swap(first);   <span class="comment">//äº’æ¢</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; second.bucket_count() &lt;&lt; <span class="built_in">endl</span>;  <span class="comment">//è¿”å›æ¡¶çš„æ•°é‡</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; second.bucket_size() &lt;&lt; <span class="built_in">endl</span>;  <span class="comment">//è¿”å›æ¯ä¸ªæ¡¶çš„å¤§å°</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; second.bucket(<span class="string">'a'</span>) &lt;&lt; <span class="built_in">endl</span>; <span class="comment">//è¿”å›å½“å‰å…ƒç´ åœ¨å“ªä¸ªæ¡¶</span></span><br><span class="line">second.rehash(<span class="number">10</span>);   <span class="comment">//è®¾ç½®æ¡¶çš„æ•°é‡</span></span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨ç¤ºä¾‹"><a href="#ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h2><p>unordered_mapå†…éƒ¨ä½¿ç”¨å“ˆå¸Œè¡¨è¿›è¡Œå­˜å‚¨ä¸æœç´¢ã€‚ç”±äºéœ€è¦ä½¿ç”¨hashæ¥è¿›è¡Œæ˜ å°„ï¼Œå› æ­¤éœ€è¦åˆ¤æ–­ä¸¤ä¸ªå…³é”®å­—æ˜¯å¦ç›¸ç­‰ï¼Œå¯¹äºå†…éƒ¨ç±»å‹ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæ˜¯ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹ï¼Œåˆ™éœ€è¦é‡è½½â€==â€è¿ç®—ç¬¦ï¼ŒæŒ‡å®šå¦‚ä½•åˆ¤æ–­ä¸¤ä¸ªå…³é”®å­—æ˜¯å¦ç›¸ç­‰ã€‚ä»¥ä¸‹æ˜¯åœ¨ç½‘ä¸Šæ‘˜å½•çš„ä¸€æ®µä»£ç ï¼Œä¸ªäººè§‰å¾—æ¯”è¾ƒè¯¦ç»†çš„unordered_mapçš„ä½¿ç”¨æ–¹æ³•ï¼Œè¿™é‡Œåªæ˜¯å…¶ä¸­ä¸€ç§ä½¿ç”¨æ–¹æ³•ï¼šåˆ©ç”¨å‡½æ•°å¯¹è±¡ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="built_in">string</span> name;</span><br><span class="line">	<span class="keyword">int</span> age;</span><br><span class="line">	Person(<span class="built_in">string</span> name, <span class="keyword">int</span> age)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;name =  name;</span><br><span class="line">		<span class="keyword">this</span>-&gt;age = age;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* the object of hash function */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">PersonHash</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">size_t</span> <span class="keyword">operator</span>()(<span class="keyword">const</span> Person&amp; per) <span class="keyword">const</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> hash&lt;<span class="built_in">string</span>&gt;()(per.name) ^ hash&lt;<span class="keyword">int</span>&gt;()(per.age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* the object of compare */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">PersonCmp</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">const</span> Person&amp; personA, <span class="keyword">const</span> Person&amp; personB)</span> <span class="keyword">const</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> personA.name == personB.name &amp;&amp; personA.age == personB.age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* define the unordered_map type */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">unordered_map</span>&lt;Person, <span class="keyword">int</span>, PersonHash, PersonCmp&gt; umap;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	umap m;</span><br><span class="line">	<span class="function">Person <span class="title">p1</span><span class="params">(<span class="string">"Tom1"</span>,<span class="number">20</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p2</span><span class="params">(<span class="string">"Tom2"</span>,<span class="number">22</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p3</span><span class="params">(<span class="string">"Tom3"</span>,<span class="number">22</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p4</span><span class="params">(<span class="string">"Tom4"</span>,<span class="number">23</span>)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p5</span><span class="params">(<span class="string">"Tom5"</span>,<span class="number">24</span>)</span></span>;</span><br><span class="line">	m.insert(umap::value_type(p3, <span class="number">100</span>));</span><br><span class="line">	m.insert(umap::value_type(p4, <span class="number">100</span>));</span><br><span class="line">	m.insert(umap::value_type(p5, <span class="number">100</span>));</span><br><span class="line">	m.insert(umap::value_type(p1, <span class="number">100</span>));</span><br><span class="line">	m.insert(umap::value_type(p2, <span class="number">100</span>));		</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/* è¿™é‡Œæ‰“å°å‡ºæ¥çš„é¡ºåºäºæ’å…¥é¡ºåºå¹¶ä¸ç›¸åŒï¼Œç¡®åˆ‡çš„è¯´æ˜¯å®Œå…¨æ— åºçš„ */</span></span><br><span class="line">	<span class="keyword">for</span>(umap::iterator iter = m.begin(); iter != m.end(); iter++)</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; iter-&gt;first.name &lt;&lt; <span class="string">"\t"</span> &lt;&lt; iter-&gt;first.age &lt;&lt; <span class="built_in">endl</span>;		</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Others</category>
        <category>Interview</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>STL</tag>
        <tag>unordered_map</tag>
      </tags>
  </entry>
  <entry>
    <title>cin, cin.getline(), getline()çš„ç”¨æ³•</title>
    <url>/2021/03/28/cin-cin-getline-getline-%E7%9A%84%E7%94%A8%E6%B3%95/</url>
    <content><![CDATA[<h1 id="1-cin"><a href="#1-cin" class="headerlink" title="1. cin"></a>1. cin</h1><p>ç”¨æ³•1ï¼šè¾“å…¥ä¸€ä¸ªæ•°å­—æˆ–å­—ç¬¦</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">     <span class="keyword">int</span> a,b;</span><br><span class="line">     <span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b;</span><br><span class="line">     <span class="built_in">cout</span>&lt;&lt;a+b&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç”¨æ³•2ï¼šæ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé‡â€œç©ºæ ¼â€ã€â€œTABâ€ã€â€œå›è½¦â€å°±ç»“æŸ</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">     <span class="keyword">char</span> a[<span class="number">20</span>];</span><br><span class="line">     <span class="built_in">cin</span>&gt;&gt;a;</span><br><span class="line">     <span class="built_in">cout</span>&lt;&lt;a&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¾“å…¥ï¼šhello<br>è¾“å‡ºï¼šhello</p>
<p>è¾“å…¥ï¼šhello world<br>è¾“å‡ºï¼šhello</p>
</blockquote>
<h1 id="2-cin-getline"><a href="#2-cin-getline" class="headerlink" title="2. cin.getline()"></a>2. cin.getline()</h1><p>ç”¨æ³•:æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥æ¥æ”¶ç©ºæ ¼å¹¶è¾“å‡º</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">     <span class="keyword">char</span> m[<span class="number">20</span>];</span><br><span class="line">     <span class="built_in">cin</span>.getline(m,<span class="number">5</span>);</span><br><span class="line">     <span class="built_in">cout</span>&lt;&lt;m&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<blockquote>
<p>è¾“å…¥ï¼šhello world<br>è¾“å‡ºï¼šhell</p>
</blockquote>
<p><strong>æ¥æ”¶5ä¸ªå­—ç¬¦åˆ°mä¸­ï¼Œå…¶ä¸­æœ€åä¸€ä¸ªä¸ºâ€™\0â€™ï¼Œæ‰€ä»¥åªçœ‹åˆ°4ä¸ªå­—ç¬¦è¾“å‡ºï¼›</strong></p>
<p>å¦‚æœæŠŠ5æ”¹æˆ20ï¼š</p>
<blockquote>
<p>è¾“å…¥ï¼šhello world<br>è¾“å‡ºï¼šhello world</p>
</blockquote>
<p>å»¶ä¼¸ï¼š<br>1ã€cin.getline()å®é™…ä¸Šæœ‰ä¸‰ä¸ªå‚æ•°ï¼Œ<strong>cin.getline(æ¥æ”¶å­—ç¬¦ä¸²çš„å˜é‡,æ¥æ”¶å­—ç¬¦ä¸ªæ•°,ç»“æŸå­—ç¬¦)</strong><br>2ã€å½“ç¬¬ä¸‰ä¸ªå‚æ•°çœç•¥æ—¶ï¼Œç³»ç»Ÿé»˜è®¤ä¸ºâ€™\0â€™<br>3ã€å¦‚æœå°†ä¾‹å­ä¸­<strong>cin.getline()æ”¹ä¸ºcin.getline(m,5,â€™aâ€™)</strong>;å½“è¾“å…¥jlkjkljklæ—¶è¾“å‡ºjkljï¼Œè¾“å…¥jkaljkljklæ—¶ï¼Œè¾“å‡ºjk</p>
<h1 id="3-getline"><a href="#3-getline" class="headerlink" title="3. getline()"></a>3. getline()</h1><p>ç”¨æ³•ï¼šæ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥æ¥æ”¶ç©ºæ ¼å¹¶è¾“å‡ºï¼Œéœ€åŒ…å«<code>#include&lt;string&gt;</code></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">string</span> str;</span><br><span class="line">	getline(<span class="built_in">cin</span>,str);</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;str&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¾“å…¥ï¼šhello world<br>è¾“å‡ºï¼šhello world</p>
</blockquote>
<h1 id="4-æ³¨æ„çš„é—®é¢˜"><a href="#4-æ³¨æ„çš„é—®é¢˜" class="headerlink" title="4. æ³¨æ„çš„é—®é¢˜"></a>4. æ³¨æ„çš„é—®é¢˜</h1><p>1ã€<strong>cin.getline()å±äºistreamæµï¼Œè€Œgetline()å±äºstringæµï¼Œæ˜¯ä¸ä¸€æ ·çš„ä¸¤ä¸ªå‡½æ•°</strong></p>
<p>2ã€å½“åŒæ—¶ä½¿ç”¨ <strong>cin ,  getline()</strong> æ—¶ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨cinè¾“å…¥æµå®Œæˆä¹‹åï¼Œgetline()ä¹‹å‰ï¼Œéœ€è¦é€šè¿‡</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">string</span> str=<span class="string">"\n"</span>;</span><br><span class="line">getline(<span class="built_in">cin</span>,str);</span><br></pre></td></tr></table></figure>
<p>çš„æ–¹å¼å°†<strong>å›è½¦ç¬¦</strong>ä½œä¸ºè¾“å…¥æµcinä»¥æ¸…é™¤ç¼“å­˜ï¼Œå¦‚æœä¸è¿™æ ·åšçš„è¯ï¼Œåœ¨æ§åˆ¶å°ä¸Šå°±ä¸ä¼šå‡ºç°getline()çš„è¾“å…¥æç¤ºï¼Œè€Œç›´æ¥è·³è¿‡ï¼Œå› ä¸ºç¨‹åºé»˜è®¤åœ°å°†ä¹‹å‰çš„å˜é‡ä½œä¸ºè¾“å…¥æµã€‚</p>
<p>çœ‹ä¸‹é¢ä¸€æ®µç¨‹åºï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">    <span class="comment">//standard input(cin)</span></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"Please enter an integer value as your age: "</span>;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;age;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"Your ager is: "</span>&lt;&lt;age&lt;&lt;<span class="string">".\n"</span>;</span><br><span class="line">    <span class="comment">//cin and string</span></span><br><span class="line">    <span class="built_in">string</span> mystr;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"What's your name? "</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">///////////////////////////</span></span><br><span class="line">    mystr=<span class="string">"\n"</span>;</span><br><span class="line">    getline(<span class="built_in">cin</span>,mystr);</span><br><span class="line">    <span class="comment">///////////////////////////</span></span><br><span class="line">    </span><br><span class="line">    getline(<span class="built_in">cin</span>,mystr);</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"Hello,"</span>&lt;&lt;mystr&lt;&lt;<span class="string">".\n"</span>;</span><br><span class="line">    <span class="keyword">char</span> sex;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"Please enter a F or M as your sex: "</span>;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;sex;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"Your sex is: "</span>&lt;&lt;sex&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"What's your favorite team? "</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">///////////////////////////</span></span><br><span class="line">    mystr=<span class="string">"\n"</span>;</span><br><span class="line">    getline(<span class="built_in">cin</span>,mystr);</span><br><span class="line">    <span class="comment">///////////////////////////</span></span><br><span class="line">    </span><br><span class="line">    getline(<span class="built_in">cin</span>,mystr);</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"I like "</span>&lt;&lt;mystr&lt;&lt;<span class="string">".\n"</span>;</span><br><span class="line"></span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœä¸ºï¼š</p>
<blockquote>
<p>Please enter an integer value as your age: 17<br>Your ager is: 17.<br>Whatâ€™s your name?<br>Kevin<br>Hello,Kevin.<br>Please enter a F or M as your sex: M<br>Your sex is: M<br>Whatâ€™s your favorite team? Rocket<br>I like Rocket.<br>è¯·æŒ‰ä»»æ„é”®ç»§ç»­. . .</p>
</blockquote>
<p>å¦‚æœä¸æ·»åŠ <code>///////////////////////////</code>ä¹‹é—´çš„ä»£ç ï¼Œè¿è¡Œç»“æœä¸ºï¼š</p>
<blockquote>
<p>Please enter an integer value as your age: 17<br>Your ager is: 17.<br>Whatâ€™s your name?<br>Hello,.<br>Please enter a F or M as your sex: M<br>Your sex is: M<br>Whatâ€™s your favorite team? I like .<br>è¯·æŒ‰ä»»æ„é”®ç»§ç»­. . .</p>
</blockquote>
<p>å…¶å®<code>mystr = &#39;\n&#39;</code>å¯ä»¥å»æ‰ã€‚</p>
]]></content>
      <categories>
        <category>Others</category>
        <category>Interview</category>
      </categories>
      <tags>
        <tag>ACM</tag>
        <tag>C++</tag>
        <tag>OJ</tag>
        <tag>cin</tag>
        <tag>getline</tag>
        <tag>C</tag>
      </tags>
  </entry>
  <entry>
    <title>scanfè¾“å…¥å­—ç¬¦å‹BUG</title>
    <url>/2021/03/28/scanf%E8%BE%93%E5%85%A5%E5%AD%97%E7%AC%A6%E5%9E%8BBUG/</url>
    <content><![CDATA[<p>é—®é¢˜åŸå› æ˜¯ï¼š<strong>é”®ç›˜ç¼“å†²åŒºæ®‹ä½™ä¿¡æ¯</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;Â </span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>Â </span></span><br><span class="line"><span class="function"></span>&#123;Â </span><br><span class="line">Â Â Â  <span class="keyword">int</span> a;Â </span><br><span class="line">Â Â Â  <span class="keyword">char</span> c;</span><br><span class="line">Â Â Â  <span class="keyword">do</span>Â </span><br><span class="line">Â Â Â  &#123;Â </span><br><span class="line">Â Â Â Â Â Â Â  <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a);Â </span><br><span class="line">Â Â Â Â Â Â Â  <span class="built_in">scanf</span>(<span class="string">"%c"</span>,&amp;c);Â </span><br><span class="line">Â Â Â Â Â Â Â  <span class="built_in">printf</span>(<span class="string">"a=%dÂ Â Â Â  c=%c/n"</span>,a,c);Â </span><br><span class="line">Â Â Â  &#125;<span class="keyword">while</span>(c!=<span class="string">'N'</span>);Â </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>scanf(&quot;%c&quot;, &amp;c);</code>è¿™å¥ä¸èƒ½æ­£å¸¸æ¥æ”¶å­—ç¬¦,ä»€ä¹ˆåŸå› å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬ç”¨<code>printf(&quot;c=%d\n&quot;,c);</code>å°†cç”¨intè¡¨ç¤ºå‡ºæ¥ï¼Œçœ‹çœ‹scanf()å‡½æ•°èµ‹ç»™Cåˆ°åº•æ˜¯ä»€ä¹ˆï¼Œç»“æœæ˜¯ c=10, ASCIIå€¼ä¸º10</p>
<p>æ˜¯ä»€ä¹ˆï¼Ÿæ¢è¡Œå³<code>\n</code>.</p>
<p>å¯¹äº†ï¼Œæˆ‘ä»¬æ¯å‡»æ‰“ä¸€ä¸‹â€Enterâ€é”®ï¼Œå‘é”®ç›˜ç¼“å†²åŒºå‘å»ä¸€ä¸ªâ€œå›è½¦â€(\r),ä¸€ä¸ªâ€œæ¢è¡Œâ€(\n),åœ¨è¿™é‡Œ\rè¢«scanf()å‡½æ•°å¤„ç†æ‰äº†ï¼ˆå§‘ä¸”è¿™ä¹ˆè®¤ä¸ºå§^_^ï¼‰ï¼Œè€Œ\nè¢«scanf()å‡½æ•°â€œé”™è¯¯â€åœ°èµ‹ç»™äº†c.</p>
<p>è§£å†³åŠæ³•ï¼š</p>
<ul>
<li>å¯ä»¥åœ¨ä¸¤ä¸ªscanf()å‡½æ•°ä¹‹ååŠ ä¸ªfflush(stdin);</li>
<li>è¿˜æœ‰åŠ getch(); </li>
<li>getchar();ä¹Ÿå¯ä»¥</li>
</ul>
<p>ä½†æ˜¯è¦è§†å…·ä½“scanf()è¯­å¥åŠ é‚£ä¸ªï¼Œè¿™é‡Œå°±ä¸åˆ†æäº†ã€‚ä½†æ˜¯åŠ fflush(stdin);ä¸ç®¡ä»€ä¹ˆæƒ…å†µéƒ½å¯è¡Œã€‚</p>
<h4 id="scanf-quot-c-quot-æ˜¯ä¼šè¯»å…¥ç©ºæ ¼ä»¥åŠæ¢è¡Œçš„ï¼Œæ‰€ä»¥ä½¿ç”¨æ—¶ä¸€å®šè¦æ…é‡ã€‚"><a href="#scanf-quot-c-quot-æ˜¯ä¼šè¯»å…¥ç©ºæ ¼ä»¥åŠæ¢è¡Œçš„ï¼Œæ‰€ä»¥ä½¿ç”¨æ—¶ä¸€å®šè¦æ…é‡ã€‚" class="headerlink" title="scanf(&quot;%c&quot;)æ˜¯ä¼šè¯»å…¥ç©ºæ ¼ä»¥åŠæ¢è¡Œçš„ï¼Œæ‰€ä»¥ä½¿ç”¨æ—¶ä¸€å®šè¦æ…é‡ã€‚"></a><code>scanf(&quot;%c&quot;)</code>æ˜¯ä¼šè¯»å…¥ç©ºæ ¼ä»¥åŠæ¢è¡Œçš„ï¼Œæ‰€ä»¥ä½¿ç”¨æ—¶ä¸€å®šè¦æ…é‡ã€‚</h4>]]></content>
      <categories>
        <category>Others</category>
        <category>Interview</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>C</tag>
        <tag>scanf</tag>
        <tag>getchar</tag>
      </tags>
  </entry>
  <entry>
    <title>ACMè¾“å…¥è¾“å‡º</title>
    <url>/2021/03/28/ACM%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA/</url>
    <content><![CDATA[<p>åœ¨ä¹‹å‰çš„ç¬”è¯•ä¸­ï¼Œç”±äºä¸ç†Ÿæ‚‰ACMæ¨¡å¼çš„è¾“å…¥è¾“å‡ºï¼Œåƒäº†å¤§äºï¼æ‰€ä»¥åœ¨æ­¤æ€»ç»“å’Œå­¦ä¹ ï¼Œåƒä¸€å ‘é•¿ä¸€æ™ºã€‚</p>
<blockquote>
<p>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œyang1youngã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚<br>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/qiao1245/article/details/53020326" target="_blank" rel="noopener">https://blog.csdn.net/qiao1245/article/details/53020326</a></p>
</blockquote>
<h1 id="1-C-è¾“å…¥"><a href="#1-C-è¾“å…¥" class="headerlink" title="1. C++è¾“å…¥"></a>1. C++è¾“å…¥</h1><h2 id="1-1-åªæœ‰ä¸€ç»„æµ‹è¯•æ•°æ®"><a href="#1-1-åªæœ‰ä¸€ç»„æµ‹è¯•æ•°æ®" class="headerlink" title="1.1. åªæœ‰ä¸€ç»„æµ‹è¯•æ•°æ®"></a>1.1. åªæœ‰ä¸€ç»„æµ‹è¯•æ•°æ®</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt; iostream &gt;   </span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>; </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">     <span class="keyword">int</span> a,b; </span><br><span class="line">     <span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b;</span><br><span class="line">     <span class="built_in">cout</span> &lt;&lt; a+b &lt;&lt; <span class="built_in">endl</span>; </span><br><span class="line">     <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-2-æœ‰å¤šç»„æµ‹è¯•æ•°æ®ï¼Œç›´åˆ°è¯»è‡³è¾“å…¥æ–‡ä»¶ç»“å°¾ä¸ºæ­¢"><a href="#1-2-æœ‰å¤šç»„æµ‹è¯•æ•°æ®ï¼Œç›´åˆ°è¯»è‡³è¾“å…¥æ–‡ä»¶ç»“å°¾ä¸ºæ­¢" class="headerlink" title="1.2. æœ‰å¤šç»„æµ‹è¯•æ•°æ®ï¼Œç›´åˆ°è¯»è‡³è¾“å…¥æ–‡ä»¶ç»“å°¾ä¸ºæ­¢"></a>1.2. æœ‰å¤šç»„æµ‹è¯•æ•°æ®ï¼Œç›´åˆ°è¯»è‡³è¾“å…¥æ–‡ä»¶ç»“å°¾ä¸ºæ­¢</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt; iostream &gt;    </span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">       <span class="keyword">int</span> a,b;</span><br><span class="line">       <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b)</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; a+b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">       <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-3-åœ¨å¼€å§‹çš„æ—¶å€™è¾“å…¥ä¸€ä¸ªNï¼Œæ¥ä¸‹æ¥æ˜¯Nç»„æ•°æ®"><a href="#1-3-åœ¨å¼€å§‹çš„æ—¶å€™è¾“å…¥ä¸€ä¸ªNï¼Œæ¥ä¸‹æ¥æ˜¯Nç»„æ•°æ®" class="headerlink" title="1.3. åœ¨å¼€å§‹çš„æ—¶å€™è¾“å…¥ä¸€ä¸ªNï¼Œæ¥ä¸‹æ¥æ˜¯Nç»„æ•°æ®"></a>1.3. åœ¨å¼€å§‹çš„æ—¶å€™è¾“å…¥ä¸€ä¸ªNï¼Œæ¥ä¸‹æ¥æ˜¯Nç»„æ•°æ®</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a, b, n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">while</span> (n--) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; a + b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-4-è¾“å…¥ä¸è¯´æ˜æœ‰å¤šå°‘ç»„æ•°æ®ï¼Œä½†ä»¥æŸä¸ªç‰¹æ®Šè¾“å…¥ä¸ºç»“æŸæ ‡å¿—"><a href="#1-4-è¾“å…¥ä¸è¯´æ˜æœ‰å¤šå°‘ç»„æ•°æ®ï¼Œä½†ä»¥æŸä¸ªç‰¹æ®Šè¾“å…¥ä¸ºç»“æŸæ ‡å¿—" class="headerlink" title="1.4. è¾“å…¥ä¸è¯´æ˜æœ‰å¤šå°‘ç»„æ•°æ®ï¼Œä½†ä»¥æŸä¸ªç‰¹æ®Šè¾“å…¥ä¸ºç»“æŸæ ‡å¿—"></a>1.4. è¾“å…¥ä¸è¯´æ˜æœ‰å¤šå°‘ç»„æ•°æ®ï¼Œä½†ä»¥æŸä¸ªç‰¹æ®Šè¾“å…¥ä¸ºç»“æŸæ ‡å¿—</h2><p>ä¾‹å¦‚A+Bï¼Œé¢˜ç›®ä¸­è¯´æ˜ä»¥<code>0, 0</code>ç»“æŸè¾“å…¥ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹å†™æ³•ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b &amp;&amp; (a || b)) &#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; a + b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-5-é‡å®šå‘è¾“å…¥ï¼Œä¿å­˜å†å²"><a href="#1-5-é‡å®šå‘è¾“å…¥ï¼Œä¿å­˜å†å²" class="headerlink" title="1.5. é‡å®šå‘è¾“å…¥ï¼Œä¿å­˜å†å²"></a>1.5. é‡å®šå‘è¾“å…¥ï¼Œä¿å­˜å†å²</h2><a id="more"></a>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    freopen(<span class="string">"input.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);  <span class="comment">// è¾“å…¥å°†è¢«é‡å®šå‘åˆ°æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; a &gt;&gt; b;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; a + b &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç ä»æ–‡ä»¶<font color="orange">â€œinput.txtâ€</font>ä¸­è¯»å–è¾“å…¥ï¼Œç„¶åè®¡ç®—åè¾“å…¥åˆ°æ ‡å‡†è¾“å‡ºã€‚</p>
<p>ä¹Ÿå¯ä»¥ç”¨<code>freopen</code>å‡½æ•°å°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  freopen (<span class="string">"output.txt"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</span><br><span class="line">  <span class="built_in">printf</span> (<span class="string">"This sentence is redirected to a file.\n"</span>);</span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">"hello freopen function"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  fclose (<span class="built_in">stdout</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æ–‡ä»¶<font color="orange">â€œoutput.txtâ€</font>ä¸­æ˜¾ç¤ºä¸ºï¼š</p>
<blockquote>
<p>This sentence is redirected to a file.</p>
<p>hello freopen function</p>
</blockquote>
<h2 id="1-6-è¾“å…¥å­—ç¬¦ä¸²"><a href="#1-6-è¾“å…¥å­—ç¬¦ä¸²" class="headerlink" title="1.6. è¾“å…¥å­—ç¬¦ä¸²"></a>1.6. è¾“å…¥å­—ç¬¦ä¸²</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> buf[<span class="number">255</span>];</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">cin</span>.getline(buf, <span class="number">255</span>)) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; buf &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨C++ä¸­è¯»å…¥å­—ç¬¦ä¸²é€šå¸¸ä½¿ç”¨cin.getlineå‡½æ•°ï¼Œå¯ä»¥æ¥å—ç”¨æˆ·çš„è¾“å…¥çš„å­—ç¬¦ï¼Œç›´åˆ°å·²è¾¾æŒ‡å®šä¸ªæ•°ï¼Œæˆ–è€…ç”¨æˆ·è¾“å…¥äº†ç‰¹å®šçš„å­—ç¬¦ã€‚å®ƒçš„å‡½æ•°å£°æ˜å½¢å¼ï¼ˆå‡½æ•°åŸå‹ï¼‰å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>istream&amp; getline(char line[], int size, char endchar= â€˜\nâ€™);<br>char line[]ï¼š å°±æ˜¯ä¸€ä¸ªå­—ç¬¦æ•°ç»„ï¼Œç”¨æˆ·è¾“å…¥çš„å†…å®¹å°†å­˜å…¥åœ¨è¯¥æ•°ç»„å†…ã€‚<br>int size : æœ€å¤šæ¥å—å‡ ä¸ªå­—ç¬¦ï¼Œç”¨æˆ·è¶…è¿‡sizeçš„è¾“å…¥éƒ½å°†ä¸è¢«æ¥å—ã€‚<br>char endchar :å½“ç”¨æˆ·è¾“å…¥endcharæŒ‡å®šçš„å­—ç¬¦æ—¶ï¼Œè‡ªåŠ¨ç»“æŸï¼Œé»˜è®¤æ˜¯å›è½¦ç¬¦ã€‚</p>
</blockquote>
<p><strong>ä½¿ç”¨<code>getline()</code>å‡½æ•°è¯»å–å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ä¸­å¯ä»¥åŒ…å«ç©ºæ ¼</strong></p>
<p>å¦ä¸€ç§è¯»å–å­—ç¬¦ä¸²çš„æ–¹å¼æ˜¯ä½¿ç”¨stringï¼Œä½†æ˜¯è¿™ç§æ–¹å¼æ˜¯æ— æ³•è¯»å…¥ç©ºæ ¼çš„ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">string</span> buf;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; buf) &#123;</span><br><span class="line">    	<span class="built_in">cout</span> &lt;&lt; buf &lt;&lt; <span class="built_in">endl</span>;	</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å…¥ï¼š</p>
<blockquote>
<p>hello world</p>
</blockquote>
<p>è¾“å‡ºï¼š</p>
<blockquote>
<p>hello</p>
<p>world</p>
</blockquote>
<p>é»˜è®¤æŒ‰ç…§ç©ºæ ¼è¿›è¡Œäº†åˆ‡åˆ†ï¼Œè¯»å…¥äº†ä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<h1 id="2-C-è¾“å‡º"><a href="#2-C-è¾“å‡º" class="headerlink" title="2. C++è¾“å‡º"></a>2. C++è¾“å‡º</h1><p>è¾“å‡ºæœ‰ä¸åŒçš„æ ¼å¼è¦æ±‚ï¼Œä¸æ³¨æ„çš„è¯ç»å¸¸ä¼šå‡ºç° <code>Presentation Error</code>ï¼Œè€Œä¸” PC2 å¾ˆå¤šæ—¶å€™è¿˜åˆ¤æ–­ä¸å‡ºæ¥è¾“å‡ºæ ¼å¼é”™è¯¯ï¼Œå°±ç®€å•çš„åˆ¤ä¸º <code>Wrong Answer</code>ï¼Œæ‰€ä»¥è¾“å‡ºæ ¼å¼ä¸€å®šè¦æ³¨æ„ã€‚</p>
<h3 id="1ã€ä¸€ç»„è¾“å‡ºæ¥ç€ä¸€ç»„è¾“å‡ºï¼Œä¸­é—´æ²¡æœ‰ç©ºè¡Œ"><a href="#1ã€ä¸€ç»„è¾“å‡ºæ¥ç€ä¸€ç»„è¾“å‡ºï¼Œä¸­é—´æ²¡æœ‰ç©ºè¡Œ" class="headerlink" title="1ã€ä¸€ç»„è¾“å‡ºæ¥ç€ä¸€ç»„è¾“å‡ºï¼Œä¸­é—´æ²¡æœ‰ç©ºè¡Œ"></a>1ã€ä¸€ç»„è¾“å‡ºæ¥ç€ä¸€ç»„è¾“å‡ºï¼Œä¸­é—´æ²¡æœ‰ç©ºè¡Œ</h3><p>è¿™ä¹Ÿæ˜¯æœ€ç®€å•çš„ï¼Œè¯·çœ‹é¢˜ç›® <a href="http://acm.sdut.edu.cn/onlinejudge2/index.php/Home/Index/problemdetail/pid/1010" target="_blank" rel="noopener">SDUT 1010</a>ã€‚</p>
<p>C ä»£ç ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;a, &amp;b) != EOF) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, a + b);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¯è¾“å‡ºä¸€ç»„ç»“æœæ¢è¡Œå°±å¯ä»¥äº†ã€‚</p>
<h3 id="2ã€ä¸€ç»„æ¥ç€ä¸€ç»„ï¼Œæ¯ä¸€ç»„åé¢æœ‰ä¸€ç©ºè¡Œ"><a href="#2ã€ä¸€ç»„æ¥ç€ä¸€ç»„ï¼Œæ¯ä¸€ç»„åé¢æœ‰ä¸€ç©ºè¡Œ" class="headerlink" title="2ã€ä¸€ç»„æ¥ç€ä¸€ç»„ï¼Œæ¯ä¸€ç»„åé¢æœ‰ä¸€ç©ºè¡Œ"></a>2ã€ä¸€ç»„æ¥ç€ä¸€ç»„ï¼Œæ¯ä¸€ç»„åé¢æœ‰ä¸€ç©ºè¡Œ</h3><p>è¯·çœ‹é¢˜ç›® <a href="http://acm.sdut.edu.cn/onlinejudge2/index.php/Home/Index/problemdetail/pid/1016" target="_blank" rel="noopener">SDUT 1016</a>ã€‚</p>
<p>C ä»£ç ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;a, &amp;b) != EOF) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n\n"</span>, a + b);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¯è¾“å‡ºä¸€ç»„ç»“æœåè¾“å‡ºä¸¤ä¸ªæ¢è¡Œå°±å¯ä»¥äº†ã€‚</p>
<h3 id="3ã€ä¸€ç»„æ¥ç€ä¸€ç»„ï¼Œæ¯ä¸¤ç»„ä¹‹é—´æœ‰ä¸€ä¸ªç©ºè¡Œ"><a href="#3ã€ä¸€ç»„æ¥ç€ä¸€ç»„ï¼Œæ¯ä¸¤ç»„ä¹‹é—´æœ‰ä¸€ä¸ªç©ºè¡Œ" class="headerlink" title="3ã€ä¸€ç»„æ¥ç€ä¸€ç»„ï¼Œæ¯ä¸¤ç»„ä¹‹é—´æœ‰ä¸€ä¸ªç©ºè¡Œ"></a>3ã€ä¸€ç»„æ¥ç€ä¸€ç»„ï¼Œæ¯ä¸¤ç»„ä¹‹é—´æœ‰ä¸€ä¸ªç©ºè¡Œ</h3><p>æ³¨æ„ä¸å‰ä¸€ç§åŒºåˆ†å¼€ï¼Œè¯·çœ‹é¢˜ç›® <a href="http://acm.sdut.edu.cn/onlinejudge2/index.php/Home/Index/problemdetail/pid/1017" target="_blank" rel="noopener">SDUT 1017</a>ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m, sum, a;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;m);</span><br><span class="line">        sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(m--) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a);</span><br><span class="line">            sum += a;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, sum);</span><br><span class="line">        <span class="keyword">if</span> (i != n - <span class="number">1</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ¤æ–­æ˜¯å¦åˆ°è¾¾æœ€åä¸€ç»„æµ‹è¯•æ•°æ®äº†ï¼Œå¦‚æœä¸æ˜¯æœ€åä¸€ç»„æµ‹è¯•æ•°æ®å°±å¤šè¾“å‡ºä¸€ä¸ªæ¢è¡Œã€‚</p>
<p><strong><em>å¾ˆå¤šé¢˜ç›®éƒ½è¦æ±‚åœ¨è¾“å‡ºæ•°æ®çš„æ°å½“ä½ç½®åŠ ç©ºè¡Œã€‚ä¸€ä¸ªç©ºè¡Œå°±æ˜¯ä¸€ä¸ªå•ç‹¬çš„â€\nâ€ã€‚è¿™é‡Œï¼Œæœ‰çš„é¢˜ç›®è¯´ï¼šâ€œAfter each test case, you should output one blank lineâ€ï¼Œè€Œæœ‰çš„é¢˜ç›®è¯´ï¼šâ€œBetween each test case, you should ouput one blank lineâ€ã€‚è¦æ³¨æ„Afterå’ŒBetweençš„åŒºåˆ«ï¼Œå› ä¸ºå¦‚æœå¤šäº†ä¸€æˆ–å°‘äº†ç©ºè¡Œï¼Œå°†å¯¼è‡´Presentation Errorç”šè‡³Wrong Answerã€‚</em></strong></p>
<h1 id="3-Cè¯­è¨€è¾“å…¥è¾“å‡º"><a href="#3-Cè¯­è¨€è¾“å…¥è¾“å‡º" class="headerlink" title="3. Cè¯­è¨€è¾“å…¥è¾“å‡º"></a>3. Cè¯­è¨€è¾“å…¥è¾“å‡º</h1><p>æœ‰æ—¶å€™C++çš„è¾“å…¥è¾“å‡ºå¯èƒ½å¤ªæ…¢ï¼Œä¸å¦¨ä½¿ç”¨Cè¯­è¨€çš„è¾“å…¥è¾“å‡º</p>
<p>ä¸»è¦æ–¹æ³•æœ‰ï¼š</p>
<blockquote>
<p>printf ();//æŠŠé”®ç›˜ä¸­çš„å„ç±»æ•°æ®,åŠ ä»¥æ ¼å¼æ§åˆ¶è¾“å‡ºåˆ°æ˜¾ç¤ºå™¨å±å¹•ä¸Š;<br>scanf ();//ä»é”®ç›˜ä¸Šè¾“å…¥å„ç±»æ•°æ®,å¹¶å­˜æ”¾åˆ°ç¨‹åºå˜é‡ä¸­;<br>puts ()://æŠŠæ•°ç»„å˜é‡ä¸­çš„ä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡è¾“å‡ºåˆ°æ˜¾ç¤ºå™¨å±å¹•ä¸Š;<br>gets ()://ä»é”®ç›˜ä¸Šè¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡å¹¶æ”¾åˆ°ç¨‹åºçš„æ•°ç»„ä¸­;<br>putchar ()://æŠŠå˜é‡ä¸­çš„ä¸€ä¸ªå­—ç¬¦å¸¸é‡è¾“å‡ºåˆ°æ˜¾ç¤ºå™¨å±å¹•ä¸Š;<br>getchar ()://ä»é”®ç›˜ä¸Šè¾“å…¥ä¸€ä¸ªå­—ç¬¦å¸¸é‡,æ­¤å¸¸é‡å°±æ˜¯è¯¥å‡½æ•°çš„å€¼;<br>sscanf()://ä»ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æå–å„ç±»æ•°æ®ã€‚</p>
</blockquote>
<h2 id="3-1-printf"><a href="#3-1-printf" class="headerlink" title="3.1. printf"></a>3.1. printf</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"C Programming\n"</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"Number = %d\n"</span>, <span class="number">5</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"number1 = %f\n"</span>, <span class="number">13.5</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"number2 = %f\n"</span>, <span class="number">12.4</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"character = %c\n"</span>, <span class="string">'c'</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<blockquote>
<p>C Programming<br>Number = 5<br>number1 = 13.500000<br>number2 = 12.400000<br>character = c</p>
</blockquote>
<h2 id="3-2-scanf"><a href="#3-2-scanf" class="headerlink" title="3.2. scanf"></a>3.2. scanf</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> num;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;num);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">float</span> num1;</span><br><span class="line">	<span class="keyword">double</span> num2;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%f"</span>, &amp;num1);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%lf"</span>, &amp;num2);</span><br><span class="line">	</span><br><span class="line">	fflush(<span class="built_in">stdin</span>);  <span class="comment">// æ¸…é™¤ç¼“å†²åŒº </span></span><br><span class="line">	<span class="keyword">char</span> c;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%c"</span>, &amp;c);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">int</span> a;</span><br><span class="line">	<span class="keyword">float</span> b;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%f"</span>, &amp;a, &amp;b);</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"num = %d\n"</span>, num);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"num1 = %f\n"</span>, num1);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"num2 = %lf\n"</span>, num2);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"character = %c\n"</span>, c);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"multiple values = %d, %f"</span>, a, b);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<blockquote>
<p>num = 15<br>num1 = 1.200000<br>num2 = 3.560000<br>character = z<br>multiple values = 7, 7.770000</p>
</blockquote>
<h2 id="3-3-puts-gets"><a href="#3-3-puts-gets" class="headerlink" title="3.3. puts, gets"></a>3.3. puts, gets</h2><p><code>gets()</code>ä¸<code>scanf(&quot;%s&quot;)</code>å‡å¯ç”¨äºè¯»å–å­—ç¬¦ä¸²ã€‚</p>
<p>1.ä¸åŒç‚¹ï¼š</p>
<p>scanfä¸èƒ½æ¥å—ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦Tabã€å›è½¦ç­‰ï¼›</p>
<p><strong>è€Œgetsèƒ½å¤Ÿæ¥å—ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦Tabå’Œå›è½¦ç­‰ï¼›</strong></p>
<p>scanf ï¼šå½“é‡åˆ°å›è½¦ï¼Œç©ºæ ¼å’Œtabé”®ä¼šè‡ªåŠ¨åœ¨å­—ç¬¦ä¸²åé¢æ·»åŠ â€™\0â€™ï¼Œä½†æ˜¯å›è½¦ï¼Œç©ºæ ¼å’Œtabé”®ä»ä¼šç•™åœ¨è¾“å…¥çš„ç¼“å†²åŒºä¸­ã€‚</p>
<p><strong>getsï¼šå¯æ¥å—å›è½¦é”®ä¹‹å‰è¾“å…¥çš„æ‰€æœ‰å­—ç¬¦ï¼Œå¹¶ç”¨â€™\0â€™æ›¿ä»£ â€˜\nâ€™.å›è½¦é”®ä¸ä¼šç•™åœ¨è¾“å…¥ç¼“å†²åŒºä¸­</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> buf[<span class="number">100</span>];</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%s"</span>, buf);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%s\n"</span>, buf);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¾“å…¥: hello world</p>
<p>è¾“å‡º: hello</p>
</blockquote>
<p>ä»é”®ç›˜è¾“å…¥å­—ç¬¦ä¸²<code>hello world</code>æ—¶ï¼Œé‡åˆ°ç©ºæ ¼ï¼Œscanf()å°±è®¤ä¸ºè¾“å…¥ç»“æŸäº†ï¼Œæ‰€ä»¥bufä¸­å­˜æ”¾çš„å­—ç¬¦ä¸²æ˜¯ â€˜hello\0â€™ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> a[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">char</span> c;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s"</span>,a);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"aä¸­ä¿å­˜çš„å­—ç¬¦ä¸²ä¸ºï¼š%s\n"</span>,a);</span><br><span class="line">    c=getchar();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"cä¸­ä¿å­˜çš„å­—ç¬¦ä¸ºï¼š%c "</span>,c);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å…¥asdfå›è½¦ï¼Œ<strong>å› ä¸ºscanfä¼šå°†å›è½¦ä¿ç•™åœ¨ç¼“å†²åŒºä¸­ï¼Œæ‰€ä»¥å›è½¦ä¼šç´§æ¥ç€è¢«cå–å¾—è€Œä¸éœ€è¦å†é¢å¤–è¾“å…¥ï¼Œæ‰€ä»¥aä¸­å­˜å‚¨çš„æ˜¯â€™asdf\0â€™ï¼Œå­—ç¬¦c=â€™\nâ€™</strong>ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> b[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">char</span> d;</span><br><span class="line">    gets(b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"bä¸­ä¿å­˜çš„å­—ç¬¦ä¸²ä¸ºï¼š%s\n"</span>,b);</span><br><span class="line">    d=getchar();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"dä¸­ä¿å­˜çš„å­—ç¬¦ä¸ºï¼š%c"</span>,d);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥ç€è¾“å…¥<code>as df</code>å›è½¦ï¼Œå› ä¸ºgetsä¼šå°†â€™\nâ€™æ›¿æ¢æˆâ€™\0â€™ï¼Œæ‰€ä»¥bå­—ç¬¦ä¸²ä¸­ä¿ç•™çš„æ˜¯<code>â€™as df\0â€™</code>ï¼Œå¹¶ä¸”è¿˜æ˜¯è¦ç»§ç»­è¾“å…¥dçš„å€¼ã€‚</p>
<p><strong><code>printf()</code>ä¸<code>puts()</code>ä¸åŒç‚¹ï¼š</strong><br>putsï¼ˆï¼‰åœ¨è¾“å‡ºå­—ç¬¦ä¸²æ—¶ä¼šå°†â€™\0â€™è‡ªåŠ¨è½¬æ¢æˆâ€™\nâ€™è¿›è¡Œè¾“å‡ºï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œputsæ–¹æ³•è¾“å‡ºå®Œå­—ç¬¦ä¸²åä¼šè‡ªåŠ¨æ¢è¡Œã€‚</p>
<h2 id="3-4-putchar-getchar"><a href="#3-4-putchar-getchar" class="headerlink" title="3.4. putchar, getchar"></a>3.4. putchar, getchar</h2><p><code>putchar()</code>æ˜¯put characterçš„ç¼©å†™ã€‚ä½œç”¨æ˜¯è¾“å‡º<strong>ä¸€ä¸ª</strong>å­—ç¬¦çš„å€¼ã€‚</p>
<p>å‘è®¡ç®—æœºè¾“å…¥ä¸€ä¸ªå­—ç¬¦å¯ä»¥è°ƒç”¨<code>getchar()</code>å‡½æ•°ã€‚</p>
<font color="orange">**å¼ºçƒˆå»ºè®®è¾“å…¥å­—ç¬¦æ—¶å‡ä½¿ç”¨`getchar()`ä»£æ›¿`scanf("%c")`ï¼Œé¿å…å‡ºç°æ„æƒ³ä¸åˆ°çš„BUG**</font>

<h2 id="3-5-sscanf"><a href="#3-5-sscanf" class="headerlink" title="3.5. sscanf"></a>3.5. sscanf</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sscanf</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *str, <span class="keyword">const</span> <span class="keyword">char</span> *format, ...)</span></span></span><br></pre></td></tr></table></figure>
<p>ä»å­—ç¬¦ä¸²è¯»å–æ ¼å¼åŒ–è¾“å…¥ã€‚</p>
<p>sscanfç”¨æ³•è·Ÿscanfå·®ä¸å¤šï¼Œåªä¸è¿‡scanfæ˜¯ä»æ ‡å‡†è¾“å…¥stdinä¸­è¯»å…¥ï¼Œè€Œsscanfå‡½æ•°æ˜¯ä»æŒ‡å®šçš„å­—ç¬¦ä¸²ä¸­è¯»å–ã€‚ç›¸æ¯”scanfå‡½æ•°ï¼Œsscanfå‡½æ•°å¤šäº†ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<p><strong>å–æŒ‡å®šé•¿åº¦çš„å­—ç¬¦ä¸²</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> str[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">sscanf</span>(<span class="string">"123456"</span>,<span class="string">"%3s"</span>,str);</span><br><span class="line">    <span class="built_in">puts</span>(str);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>123</p>
</blockquote>
<p><strong>å°†è¡¨ç¤ºæ•°å­—çš„å­—ç¬¦ä¸²è½¬æ¢æˆæ•´å‹å˜é‡</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> res;</span><br><span class="line">    <span class="built_in">sscanf</span>(<span class="string">"123456"</span>, <span class="string">"%d"</span>, &amp;res);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>123456</p>
</blockquote>
<p><strong>å–éœ€è¦çš„å­—ç¬¦ä¸²</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> year,month,day;</span><br><span class="line">    <span class="built_in">sscanf</span>(<span class="string">"2017.12.5"</span>,<span class="string">"%d.%d.%d"</span>,&amp;year,&amp;month,&amp;day);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"year:%d,month:%d,day:%d\n"</span>,year,month,day);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>year:2017,month:12,day:5</p>
</blockquote>
<h2 id="3-6-å¸¦æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²è¾“å‡º"><a href="#3-6-å¸¦æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²è¾“å‡º" class="headerlink" title="3.6. å¸¦æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²è¾“å‡º"></a>3.6. å¸¦æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²è¾“å‡º</h2><p>æœ‰äº›é¢˜ç›®è¦æ±‚è¾“å‡ºè¿™æ ·çš„å­—ç¬¦ä¸²ï¼š<code>abc*****de****f</code>ï¼Œå…¶ä¸­â€œ*â€ä»£è¡¨ç©ºæ ¼ã€‚<br>è¦æ±‚æ˜¯è¿™æ ·çš„ï¼šstr1åœ¨å‰5ä¸ªå­—ç¬¦ä¸­å·¦å¯¹é½ï¼Œstr2åœ¨ç¬¬6åˆ°ç¬¬10ä¸ªå­—ç¬¦ä¸­å³å¯¹é½ï¼Œstr3åœ¨ç¬¬11åˆ°ç¬¬15ä¸ªå­—ç¬¦ä¸­å³å¯¹é½ã€‚<br>å¯è¡Œçš„åšæ³•æ˜¯ï¼Œå…ˆåˆå§‹åŒ–ä¸€ä¸ªæ•°ç»„ï¼Œç”¨â€™ â€˜ï¼ˆç©ºæ ¼ï¼‰å¡«å……ï¼Œå†åœ¨ç›¸åº”çš„ä½ç½®å¡«ç›¸åº”çš„å†…å®¹ã€‚ç”¨ç¨‹åºæ¥è¡¨è¿°ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">char</span> str[<span class="number">1000</span>];</span><br><span class="line"><span class="keyword">char</span> str1[] = <span class="string">"abc"</span>, str2[] = <span class="string">"de"</span>, str3[] = <span class="string">"f"</span>;</span><br><span class="line"><span class="built_in">memset</span>(str, <span class="string">' '</span>, <span class="number">1000</span> * <span class="keyword">sizeof</span>(<span class="keyword">char</span>));  <span class="comment">// ç”¨ç©ºæ ¼å¡«å……</span></span><br><span class="line"><span class="built_in">sprintf</span>(str, <span class="string">"%s"</span>, str1);</span><br><span class="line">str[<span class="built_in">strlen</span>(str1)] = <span class="string">' '</span>;</span><br><span class="line"><span class="built_in">sprintf</span>(str + <span class="number">5</span>, <span class="string">"%5s"</span>, str2);</span><br><span class="line">str[<span class="number">10</span>] = <span class="string">' '</span>;</span><br><span class="line"><span class="built_in">sprintf</span>(str + <span class="number">10</span>, <span class="string">"%5s"</span>, str3);</span><br><span class="line">str[<span class="number">15</span>] = <span class="string">'\0'</span>;</span><br><span class="line"><span class="built_in">puts</span>(str);</span><br></pre></td></tr></table></figure>
<p>å…³é”®çš„éƒ¨åˆ†ï¼š<br>ï¼ˆ1ï¼‰åœ¨è°ƒç”¨sprintfåï¼Œè¦æ¸…é™¤ä¸æ°å½“å­—ç¬¦ä¸²ç»“æŸç¬¦ï¼ˆç¬¬5,7è¡Œï¼‰ï¼›<br>ï¼ˆ2ï¼‰åœ¨æ°å½“çš„ä½ç½®æ·»åŠ å­—ç¬¦ä¸²ç»“æŸç¬¦ï¼ˆç¬¬9è¡Œï¼‰ã€‚</p>
<h2 id="3-7-äºŒç»´æ•°ç»„çš„è¾“å‡º"><a href="#3-7-äºŒç»´æ•°ç»„çš„è¾“å‡º" class="headerlink" title="3.7. äºŒç»´æ•°ç»„çš„è¾“å‡º"></a>3.7. äºŒç»´æ•°ç»„çš„è¾“å‡º</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> i, j;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; nRow; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; nCol; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (j &gt; <span class="number">0</span>)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">" "</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d"</span>, a[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<font color="blue">**æ³¨æ„æ¯è¡Œæœ€åä¸è¦å¤šè¾“å‡º1ä¸ªç©ºæ ¼**</font>

<h1 id="4-æ ¼å¼åŒ–"><a href="#4-æ ¼å¼åŒ–" class="headerlink" title="4. æ ¼å¼åŒ–"></a>4. æ ¼å¼åŒ–</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">%d  ä»¥åè¿›åˆ¶å½¢å¼è¾“å‡ºå¸¦ç¬¦å·æ•´æ•°(æ­£æ•°ä¸è¾“å‡ºç¬¦å·)   </span><br><span class="line">%o  ä»¥å…«è¿›åˆ¶å½¢å¼è¾“å‡ºæ— ç¬¦å·æ•´æ•°(ä¸è¾“å‡ºå‰ç¼€O)   </span><br><span class="line">%x  ä»¥åå…­è¿›åˆ¶å½¢å¼è¾“å‡ºæ— ç¬¦å·æ•´æ•°(ä¸è¾“å‡ºå‰ç¼€OX)   </span><br><span class="line">%u  ä»¥åè¿›åˆ¶å½¢å¼è¾“å‡ºæ— ç¬¦å·æ•´æ•°   </span><br><span class="line">%f  ä»¥å°æ•°å½¢å¼è¾“å‡ºå•ç²¾åº¦å®æ•°   </span><br><span class="line">%lf ä»¥å°æ•°å½¢å¼è¾“å‡ºåŒç²¾åº¦å®æ•° </span><br><span class="line">%e  ä»¥æŒ‡æ•°å½¢å¼è¾“å‡ºå•ã€åŒç²¾åº¦å®æ•°   </span><br><span class="line">%g  ä»¥%f%eä¸­è¾ƒçŸ­çš„è¾“å‡ºå®½åº¦è¾“å‡ºå•ã€åŒç²¾åº¦å®æ•°   </span><br><span class="line">%c  è¾“å‡ºå•ä¸ªå­—ç¬¦   </span><br><span class="line">%s  è¾“å‡ºå­—ç¬¦ä¸²</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">float</span> a = <span class="number">125.78</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%f\n"</span>, a);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%e\n"</span>, a);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<blockquote>
<p>125.779999<br>1.257800e+002</p>
</blockquote>
<h2 id="4-1-Cè¯­è¨€ç²¾åº¦æ§åˆ¶"><a href="#4-1-Cè¯­è¨€ç²¾åº¦æ§åˆ¶" class="headerlink" title="4.1. Cè¯­è¨€ç²¾åº¦æ§åˆ¶"></a>4.1. Cè¯­è¨€ç²¾åº¦æ§åˆ¶</h2><p>ç²¾åº¦æ ¼å¼ç¬¦ä»¥â€œ.â€å¼€å¤´ï¼Œåè·Ÿåè¿›åˆ¶æ•´æ•°ã€‚æ„ä¹‰æ˜¯ï¼šå¦‚æœè¾“å‡ºæ•°å­—ï¼Œåˆ™è¡¨ç¤ºå°æ•°çš„ä½æ•°ï¼›å¦‚æœè¾“å‡ºçš„æ˜¯å­—ç¬¦ï¼Œ åˆ™è¡¨ç¤ºè¾“å‡ºå­—ç¬¦çš„ä¸ªæ•°ï¼›è‹¥å®é™…ä½æ•°å¤§äºæ‰€å®šä¹‰çš„ç²¾åº¦æ•°ï¼Œåˆ™æˆªå»è¶…è¿‡çš„éƒ¨åˆ†ã€‚<br><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> a = <span class="number">1.1</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%.2f\n"</span>, a);  <span class="comment">// ä¿ç•™ä¸¤ä½å°æ•°ï¼Œè¡¥é½</span></span><br><span class="line">	<span class="keyword">double</span> b = <span class="number">123456789.456</span>;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%.2f\n"</span>, b);  <span class="comment">// ä¿ç•™ä¸¤ä½å°æ•°ï¼Œæˆªæ–­</span></span><br><span class="line">	<span class="keyword">double</span> c=<span class="number">24212345.24232</span>; </span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%020.4f\n"</span>, c);  <span class="comment">// ä¿ç•™å››ä½å°æ•°ï¼Œè¾“å‡ºå 20ä½ï¼Œè‹¥æœ‰ç©ºä½™çš„ä½è¡¥0</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>1.10<br>123456789.46<br>000000024212345.2423</p>
</blockquote>
<h2 id="4-2-C-ç²¾åº¦æ§åˆ¶"><a href="#4-2-C-ç²¾åº¦æ§åˆ¶" class="headerlink" title="4.2. C++ç²¾åº¦æ§åˆ¶"></a>4.2. C++ç²¾åº¦æ§åˆ¶</h2><p>(åªä½œäº†è§£ï¼Œåœ¨ç¬”è¯•å…·ä½“ä½¿ç”¨æ—¶ï¼Œè¿˜æ˜¯è¦ç”¨<code>printf()</code>)</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">float</span> num = <span class="number">1.25</span>;</span><br></pre></td></tr></table></figure>
<p>1 è®¾ç½®å¯¹é½æ–¹å¼</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cout</span>.setf(ios::right); <span class="comment">// è®¾ç½®å¯¹é½æ–¹å¼</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; num &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>1.25</p>
</blockquote>
<p>2 è®¾ç½®è¾“å‡ºå®½åº¦</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cout</span>.setf(ios::right); <span class="comment">// è®¾ç½®å¯¹é½æ–¹å¼</span></span><br><span class="line"><span class="built_in">cout</span>.width(<span class="number">8</span>); <span class="comment">//è®¾ç½®è¾“å‡ºå®½åº¦</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; num &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>â€‹    1.25</p>
</blockquote>
<p>3 å°†å®½åº¦å¤šä½™çš„éƒ¨åˆ†ç”¨æŸä¸ªå­—ç¬¦ï¼ˆå¦‚ï¼šâ€™0â€™ï¼‰å¡«å……</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cout</span>.setf(ios::right); <span class="comment">// è®¾ç½®å¯¹é½æ–¹å¼</span></span><br><span class="line"><span class="built_in">cout</span>.width(<span class="number">8</span>); <span class="comment">//è®¾ç½®è¾“å‡ºå®½åº¦</span></span><br><span class="line"><span class="built_in">cout</span>.fill(<span class="string">'0'</span>); <span class="comment">//å°†å¤šä½™çš„ç©ºæ ¼ç”¨0å¡«å……</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; num &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>00001.25</p>
</blockquote>
<p>4 è®¾ç½®ç²¾åº¦ï¼šä¿ç•™**ä½æœ‰æ•ˆæ•°å­—ï¼Œå¦‚æœå°æ•°ç‚¹æœ€åé¢æœ‰0ï¼Œåˆ™è‡ªåŠ¨å»æ‰</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cout</span>.setf(ios::right); <span class="comment">// è®¾ç½®å¯¹é½æ–¹å¼</span></span><br><span class="line"><span class="built_in">cout</span>.width(<span class="number">8</span>); <span class="comment">//è®¾ç½®è¾“å‡ºå®½åº¦</span></span><br><span class="line"><span class="built_in">cout</span>.fill(<span class="string">'0'</span>); <span class="comment">//å°†å¤šä½™çš„ç©ºæ ¼ç”¨0å¡«å……</span></span><br><span class="line"><span class="built_in">cout</span>.precision(<span class="number">2</span>); <span class="comment">//è®¾ç½®è¾“å‡ºç²¾åº¦ï¼Œä¿ç•™æœ‰æ•ˆæ•°å­—</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; num &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>000001.2</p>
</blockquote>
<p>5 ä¿ç•™å°æ•°ç‚¹å**ä½æ•°</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cout</span>.setf(ios::right); <span class="comment">// è®¾ç½®å¯¹é½æ–¹å¼</span></span><br><span class="line"><span class="built_in">cout</span>.width(<span class="number">8</span>); <span class="comment">//è®¾ç½®è¾“å‡ºå®½åº¦</span></span><br><span class="line"><span class="built_in">cout</span>.fill(<span class="string">'0'</span>); <span class="comment">//å°†å¤šä½™çš„ç©ºæ ¼ç”¨0å¡«å……</span></span><br><span class="line"><span class="built_in">cout</span>.flags(ios::fixed);</span><br><span class="line"><span class="built_in">cout</span>.precision(<span class="number">4</span>); <span class="comment">//è®¾ç½®è¾“å‡ºç²¾åº¦ï¼Œ</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; num &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>001.2500</p>
</blockquote>
<p>6 ä¿ç•™å°æ•°ç‚¹åæœ‰æ•ˆçš„ä½æ•°ã€‚å¦‚ï¼š1.25 ä¿ç•™4ä½æœ‰æ•ˆæ•°å­—åçš„1.250ä¸­0çš„æ˜¾ç¤ºï¼Œè¦ä¾é cout.setf(ios::showpoint)å‡½æ•°ï¼ˆå› ä¸ºä¿ç•™æœ‰æ•ˆæ•°å­—çš„å‡½æ•°ä¸ä¼šä¿ç•™æ²¡ç”¨çš„0æœ‰æ•ˆä½ï¼‰</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cout</span>.setf(ios::right); <span class="comment">// è®¾ç½®å¯¹é½æ–¹å¼</span></span><br><span class="line"><span class="built_in">cout</span>.width(<span class="number">8</span>); <span class="comment">//è®¾ç½®è¾“å‡ºå®½åº¦</span></span><br><span class="line"><span class="built_in">cout</span>.fill(<span class="string">'0'</span>); <span class="comment">//å°†å¤šä½™çš„ç©ºæ ¼ç”¨0å¡«å……</span></span><br><span class="line"><span class="built_in">cout</span>.setf(ios::showpoint); <span class="comment">//å°†å°æ•°ç²¾åº¦åé¢çš„0æ˜¾ç¤ºå‡ºæ¥</span></span><br><span class="line"><span class="built_in">cout</span>.precision(<span class="number">4</span>); <span class="comment">//è®¾ç½®è¾“å‡ºç²¾åº¦ï¼Œä¿ç•™æœ‰æ•ˆæ•°å­—	</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; num &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>0001.250</p>
</blockquote>
]]></content>
      <categories>
        <category>Others</category>
        <category>Interview</category>
      </categories>
      <tags>
        <tag>ACM</tag>
        <tag>C++</tag>
        <tag>OJ</tag>
        <tag>iostream</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•´é™¤3çš„æœ€å¤§å’Œ</title>
    <url>/2021/03/28/%E6%95%B4%E9%99%A43%E7%9A%84%E6%9C%80%E5%A4%A7%E5%92%8C/</url>
    <content><![CDATA[<p>å¯¹åº”äºLeetCode. 1262. Greatest Sum Divisible by Three.</p>
<p>å…³é”®åœ¨äºæƒ³åˆ°<code>æ¨¡ä¸‰å–ä½™</code>çš„æ“ä½œã€‚è¿™é“é¢˜åŠå…¶å˜ç§æ˜¯ç»å¸¸é‡åˆ°çš„é¢˜ç›®ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxSumDivThree</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.size();</span><br><span class="line">        <span class="keyword">int</span> **matrix = <span class="keyword">new</span> <span class="keyword">int</span>* [n];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;++i)</span><br><span class="line">        	matrix[i] = <span class="keyword">new</span> <span class="keyword">int</span> [<span class="number">3</span>];</span><br><span class="line">        	</span><br><span class="line">       	<span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">3</span>;++j)  <span class="comment">// åˆå§‹åŒ– </span></span><br><span class="line">		   	matrix[<span class="number">0</span>][j] = <span class="number">0</span>; 	</span><br><span class="line">		matrix[<span class="number">0</span>][nums[<span class="number">0</span>]%<span class="number">3</span>] = nums[<span class="number">0</span>];</span><br><span class="line">        	</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;++i) &#123;</span><br><span class="line">        	<span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">3</span>;++j) </span><br><span class="line">        		matrix[i][j] = matrix[i<span class="number">-1</span>][j];</span><br><span class="line">        	</span><br><span class="line">        	<span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">3</span>;++j) &#123;</span><br><span class="line">        		<span class="keyword">int</span> sum = nums[i] + matrix[i<span class="number">-1</span>][j];</span><br><span class="line">        		matrix[i][sum%<span class="number">3</span>] = max(sum, matrix[i][sum%<span class="number">3</span>]);	</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span> matrix[n<span class="number">-1</span>][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Others</category>
        <category>Interview</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>DP</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
        <tag>Dynamic Programming</tag>
        <tag>dp</tag>
      </tags>
  </entry>
  <entry>
    <title>Pytorchåˆ†å¸ƒå¼è®­ç»ƒ-DistributedDataParallel</title>
    <url>/2021/03/24/Pytorch%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%AD%E7%BB%83-DistributedDataParallel/</url>
    <content><![CDATA[<p>ä¸ DataParallel çš„å•è¿›ç¨‹æ§åˆ¶å¤š GPU ä¸åŒï¼Œåœ¨ distributed çš„å¸®åŠ©ä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦ç¼–å†™ä¸€ä»½ä»£ç ï¼Œtorch å°±ä¼šè‡ªåŠ¨å°†å…¶åˆ†é…ç»™nä¸ªè¿›ç¨‹ï¼Œåˆ†åˆ«åœ¨nä¸ª GPU ä¸Šè¿è¡Œã€‚</p>
<p>å’Œå•è¿›ç¨‹è®­ç»ƒä¸åŒçš„æ˜¯ï¼Œå¤šè¿›ç¨‹è®­ç»ƒéœ€è¦æ³¨æ„ä»¥ä¸‹äº‹é¡¹ï¼š</p>
<ul>
<li>åœ¨å–‚æ•°æ®çš„æ—¶å€™ï¼Œä¸€ä¸ªbatchè¢«åˆ†åˆ°äº†å¥½å‡ ä¸ªè¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹åœ¨å–æ•°æ®çš„æ—¶å€™è¦ç¡®ä¿æ‹¿åˆ°çš„æ˜¯ä¸åŒçš„æ•°æ®ï¼ˆ<code>DistributedSampler</code>ï¼‰ï¼›</li>
<li>è¦å‘Šè¯‰æ¯ä¸ªè¿›ç¨‹è‡ªå·±æ˜¯è°ï¼Œä½¿ç”¨å“ªå—GPUï¼ˆ<code>args.local_rank</code>ï¼‰ï¼›</li>
<li>åœ¨åšBatchNormalizationçš„æ—¶å€™è¦æ³¨æ„åŒæ­¥æ•°æ®ã€‚</li>
</ul>
<h2 id="1-ä½¿ç”¨æ–¹å¼"><a href="#1-ä½¿ç”¨æ–¹å¼" class="headerlink" title="1. ä½¿ç”¨æ–¹å¼"></a>1. ä½¿ç”¨æ–¹å¼</h2><h3 id="1-1-å¯åŠ¨æ–¹å¼çš„æ”¹å˜"><a href="#1-1-å¯åŠ¨æ–¹å¼çš„æ”¹å˜" class="headerlink" title="1.1. å¯åŠ¨æ–¹å¼çš„æ”¹å˜"></a>1.1. å¯åŠ¨æ–¹å¼çš„æ”¹å˜</h3><p>åœ¨å¤šè¿›ç¨‹çš„å¯åŠ¨æ–¹é¢ï¼Œæˆ‘ä»¬ä¸ç”¨è‡ªå·±æ‰‹å†™ multiprocess è¿›è¡Œä¸€ç³»åˆ—å¤æ‚çš„CPUã€GPUåˆ†é…ä»»åŠ¡ï¼ŒPyTorchä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„å¯åŠ¨å™¨ <code>torch.distributed.launch</code> ç”¨äºå¯åŠ¨æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿è¡Œè®­ç»ƒä»£ç çš„æ–¹å¼å°±å˜æˆäº†è¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CUDA_VISIBLE_DEVICES=0,1,2,3 python -m torch.distributed.launch --nproc_per_node=4 main.py</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­çš„ <code>--nproc_per_node</code> å‚æ•°ç”¨äºæŒ‡å®šä¸ºå½“å‰ä¸»æœºåˆ›å»ºçš„è¿›ç¨‹æ•°ï¼Œç”±äºæˆ‘ä»¬æ˜¯å•æœºå¤šå¡ï¼Œæ‰€ä»¥è¿™é‡Œnodeæ•°é‡ä¸º1ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œè®¾ç½®ä¸ºæ‰€ä½¿ç”¨çš„GPUæ•°é‡å³å¯ã€‚</p>
<h3 id="1-2-åˆå§‹åŒ–"><a href="#1-2-åˆå§‹åŒ–" class="headerlink" title="1.2. åˆå§‹åŒ–"></a>1.2. åˆå§‹åŒ–</h3><p>åœ¨å¯åŠ¨å™¨ä¸ºæˆ‘ä»¬å¯åŠ¨pythonè„šæœ¬åï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯åŠ¨å™¨ä¼šå°†å½“å‰è¿›ç¨‹çš„ï¼ˆå…¶å®å°±æ˜¯ GPUçš„ï¼‰index é€šè¿‡å‚æ•°ä¼ é€’ç»™ pythonï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·è·å¾—å½“å‰è¿›ç¨‹çš„ indexï¼šå³é€šè¿‡å‚æ•° <code>local_rank</code> æ¥å‘Šè¯‰æˆ‘ä»¬<strong>å½“å‰è¿›ç¨‹ä½¿ç”¨çš„æ˜¯å“ªä¸ªGPU</strong>ï¼Œç”¨äºæˆ‘ä»¬åœ¨æ¯ä¸ªè¿›ç¨‹ä¸­æŒ‡å®šä¸åŒçš„deviceï¼š</p>
<a id="more"></a>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">()</span>:</span></span><br><span class="line">    parser = argparse.ArgumentParser()</span><br><span class="line">    parser.add_argument(<span class="string">'--local_rank'</span>, type=int, default=<span class="number">0</span>ï¼Œhelp=<span class="string">'node rank for distributed training'</span>)</span><br><span class="line">    args = parser.parse_args()</span><br><span class="line">    <span class="keyword">return</span> args</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    args = parse()</span><br><span class="line">    torch.cuda.set_device(args.local_rank)</span><br><span class="line">    torch.distributed.init_process_group(</span><br><span class="line">        <span class="string">'nccl'</span>,</span><br><span class="line">        init_method=<span class="string">'env://'</span></span><br><span class="line">    )</span><br><span class="line">    device = torch.device(<span class="string">f'cuda:<span class="subst">&#123;args.local_rank&#125;</span>'</span>)</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ torch.distributed.<strong>init_process_group</strong> ç”¨äº<strong>åˆå§‹åŒ–GPUé€šä¿¡æ–¹å¼ï¼ˆNCCLï¼‰å’Œå‚æ•°çš„è·å–æ–¹å¼ï¼ˆenvä»£è¡¨é€šè¿‡ç¯å¢ƒå˜é‡ï¼‰</strong>ã€‚ä½¿ç”¨ init_process_group è®¾ç½®GPUä¹‹é—´é€šä¿¡ä½¿ç”¨çš„åç«¯å’Œç«¯å£ï¼Œé€šè¿‡ NCCL å®ç° GPU é€šä¿¡ã€‚</p>
<h3 id="1-3-DataLoader"><a href="#1-3-DataLoader" class="headerlink" title="1.3. DataLoader"></a>1.3. DataLoader</h3><p>åœ¨è¯»å–æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦ä¿è¯ä¸€ä¸ªbatché‡Œçš„æ•°æ®<strong>è¢«å‡æ‘Šåˆ°æ¯ä¸ªè¿›ç¨‹ä¸Š</strong>ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½èƒ½è·å–åˆ°ä¸åŒçš„æ•°æ®ï¼Œä½†å¦‚æœæˆ‘ä»¬æ‰‹åŠ¨å»å‘Šè¯‰æ¯ä¸ªè¿›ç¨‹æ‹¿å“ªäº›æ•°æ®çš„è¯å¤ªéº»çƒ¦äº†ï¼ŒPyTorchä¹Ÿä¸ºæˆ‘ä»¬å°è£…å¥½äº†è¿™ä¸€æ–¹æ³•ã€‚ä¹‹åï¼Œä½¿ç”¨ <strong>DistributedSampler å¯¹æ•°æ®é›†è¿›è¡Œåˆ’åˆ†</strong>ã€‚å¦‚æ­¤å‰æˆ‘ä»¬ä»‹ç»çš„é‚£æ ·ï¼Œå®ƒèƒ½å¸®åŠ©æˆ‘ä»¬å°†æ¯ä¸ª batch åˆ’åˆ†æˆå‡ ä¸ª partitionï¼Œåœ¨å½“å‰è¿›ç¨‹ä¸­åªéœ€è¦è·å–å’Œ rank å¯¹åº”çš„é‚£ä¸ª partition è¿›è¡Œè®­ç»ƒã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬åœ¨åˆå§‹åŒ– <code>data loader</code> çš„æ—¶å€™éœ€è¦ä½¿ç”¨åˆ° <code>torch.utils.data.distributed.DistributedSampler</code> è¿™ä¸ªç‰¹æ€§ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">train_sampler = torch.utils.data.distributed.DistributedSampler(train_dataset)</span><br><span class="line"></span><br><span class="line">train_loader = torch.utils.data.DataLoader(train_dataset, batch_size=..., sampler=train_sampler)</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±èƒ½ç»™<strong>æ¯ä¸ªè¿›ç¨‹ä¸€ä¸ªä¸åŒçš„ sampler</strong>ï¼Œå‘Šè¯‰æ¯ä¸ª<strong>è¿›ç¨‹è‡ªå·±åˆ†åˆ«å–å“ªäº›æ•°æ®</strong>ã€‚</p>
<h3 id="1-4-æ¨¡å‹çš„åˆå§‹åŒ–"><a href="#1-4-æ¨¡å‹çš„åˆå§‹åŒ–" class="headerlink" title="1.4. æ¨¡å‹çš„åˆå§‹åŒ–"></a>1.4. æ¨¡å‹çš„åˆå§‹åŒ–</h3><p>å’Œ <code>nn.DataParallel</code> çš„æ–¹å¼ä¸€æ ·ï¼Œæˆ‘ä»¬å¯¹äºæ¨¡å‹çš„åˆå§‹åŒ–ä¹Ÿæ˜¯ç®€å•çš„ä¸€å¥è¯å°±è¡Œäº†</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">model = torch.nn.parallel.DistributedDataParallel(model, device_ids=[args.local_rank])</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ DistributedDataParallel åŒ…è£…æ¨¡å‹ï¼Œå®ƒèƒ½å¸®åŠ©æˆ‘ä»¬ä¸ºä¸åŒ GPU ä¸Šæ±‚å¾—çš„æ¢¯åº¦è¿›è¡Œ all reduceï¼ˆå³æ±‡æ€»ä¸åŒ GPU è®¡ç®—æ‰€å¾—çš„æ¢¯åº¦ï¼Œå¹¶åŒæ­¥è®¡ç®—ç»“æœï¼‰ã€‚all reduce åä¸åŒ GPU ä¸­æ¨¡å‹çš„æ¢¯åº¦å‡ä¸º all reduce ä¹‹å‰å„ GPU æ¢¯åº¦çš„å‡å€¼ã€‚</p>
<h3 id="1-5-åŒæ­¥Batch-Normalization"><a href="#1-5-åŒæ­¥Batch-Normalization" class="headerlink" title="1.5. åŒæ­¥Batch Normalization"></a>1.5. åŒæ­¥Batch Normalization</h3><p><a href="https://zhuanlan.zhihu.com/p/40496177" target="_blank" rel="noopener">ä¸ºä»€ä¹ˆè¦åŒæ­¥BNï¼Ÿ</a></p>
<p>ç°æœ‰çš„æ ‡å‡† Batch Normalization å› ä¸ºä½¿ç”¨æ•°æ®å¹¶è¡Œï¼ˆData Parallelï¼‰ï¼Œæ˜¯å•å¡çš„å®ç°æ¨¡å¼ï¼Œåªå¯¹å•ä¸ªå¡ä¸Šå¯¹æ ·æœ¬è¿›è¡Œå½’ä¸€åŒ–ï¼Œç›¸å½“äºå‡å°äº†æ‰¹é‡å¤§å°ï¼ˆbatch-sizeï¼‰ï¼ˆè¯¦è§BNå·¥ä½œåŸç†éƒ¨åˆ†ï¼‰ã€‚ å¯¹äºæ¯”è¾ƒæ¶ˆè€—æ˜¾å­˜çš„è®­ç»ƒä»»åŠ¡æ—¶ï¼Œå¾€å¾€å•å¡ä¸Šçš„ç›¸å¯¹æ‰¹é‡è¿‡å°ï¼Œå½±å“æ¨¡å‹çš„æ”¶æ•›æ•ˆæœã€‚<strong>ä¹‹å‰åœ¨æˆ‘ä»¬åœ¨å›¾åƒè¯­ä¹‰åˆ†å‰²çš„å®éªŒä¸­ï¼ŒJerryå’Œæˆ‘å°±å‘ç°ä½¿ç”¨å¤§æ¨¡å‹çš„æ•ˆæœåè€Œå˜å·®ï¼Œå®é™…ä¸Šå°±æ˜¯BNåœ¨ä½œæ€ª</strong>ã€‚ è·¨å¡åŒæ­¥ Batch Normalization å¯ä»¥ä½¿ç”¨å…¨å±€çš„æ ·æœ¬è¿›è¡Œå½’ä¸€åŒ–ï¼Œè¿™æ ·ç›¸å½“äºâ€˜å¢å¤§â€˜äº†æ‰¹é‡å¤§å°ï¼Œè¿™æ ·è®­ç»ƒæ•ˆæœä¸å†å—åˆ°ä½¿ç”¨ GPU æ•°é‡çš„å½±å“ã€‚ æœ€è¿‘åœ¨å›¾åƒåˆ†å‰²ã€ç‰©ä½“æ£€æµ‹çš„è®ºæ–‡ä¸­ï¼Œä½¿ç”¨è·¨å¡BNä¹Ÿä¼šæ˜¾è‘—åœ°æé«˜å®éªŒæ•ˆæœï¼Œæ‰€ä»¥è·¨å¡ BN å·²ç„¶æˆä¸ºç«èµ›åˆ·åˆ†ã€å‘è®ºæ–‡çš„å¿…å¤‡ç¥å™¨ã€‚</p>
<p><font color="red">å¯æƒœ PyTorch å¹¶æ²¡æœ‰ä¸ºæˆ‘ä»¬å®ç°è¿™ä¸€åŠŸèƒ½</font>ï¼Œåœ¨æ¥ä¸‹æ¥çš„ä»‹ç»ä¸­æˆ‘ä»¬ä¼šåœ¨ <code>apex</code> ä¸­çœ‹åˆ°è¿™ä¸€åŠŸèƒ½ã€‚</p>
<h2 id="2-æ±‡æ€»"><a href="#2-æ±‡æ€»" class="headerlink" title="2. æ±‡æ€»"></a>2. æ±‡æ€»</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> DataLoader, Dataset</span><br><span class="line"><span class="keyword">from</span> torch.nn <span class="keyword">import</span> DataParallel</span><br><span class="line"><span class="keyword">from</span> torch.nn.parallel <span class="keyword">import</span> DistributedDataParallel</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> torch.distributed <span class="keyword">as</span> distributed</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Model</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(Model, self).__init__()</span><br><span class="line">        self.embedding = nn.Embedding(<span class="number">30000</span>, <span class="number">50</span>, padding_idx=<span class="number">0</span>)</span><br><span class="line">        self.linear = nn.Linear(<span class="number">50</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, ids, bag_labels, E1s)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :param ids: (sents, seq_len) &lt;- (8, 120)</span></span><br><span class="line"><span class="string">        :param bag_labels: (bags, class_num) &lt;- (3, 2)</span></span><br><span class="line"><span class="string">        :param E1s: (bags, variable) &lt;- (3, variable)</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        print(<span class="string">'ids '</span>, ids.shape)</span><br><span class="line">        print(<span class="string">'bag_labels '</span>, bag_labels.shape)</span><br><span class="line">        print(<span class="string">'E1s '</span>, E1s)</span><br><span class="line">        print(<span class="string">'============================='</span>)</span><br><span class="line">        x = self.embedding(ids)</span><br><span class="line">        x = x.mean(dim=<span class="number">1</span>)</span><br><span class="line">        x = self.linear(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Data</span><span class="params">(Dataset)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(Data, self).__init__()</span><br><span class="line">        self.x = torch.randint(<span class="number">0</span>, <span class="number">9999</span>, size=(<span class="number">1000</span>, <span class="number">120</span>))  <span class="comment"># 1000 samples</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, item)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.x[item]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">generate_batch</span><span class="params">(self, data)</span>:</span></span><br><span class="line">        ids = torch.stack(data, dim=<span class="number">0</span>)</span><br><span class="line">        bag_labels = torch.randint(<span class="number">0</span>, <span class="number">2</span>, size=(<span class="number">3</span>, <span class="number">2</span>))</span><br><span class="line">        E1s = [[<span class="number">15</span>, <span class="number">39</span>], [<span class="number">9537</span>], [<span class="number">1</span>, <span class="number">70</span>, <span class="number">5132</span>]]</span><br><span class="line">        <span class="keyword">return</span> ids, bag_labels, E1s</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    parser = argparse.ArgumentParser()</span><br><span class="line">    parser.add_argument(<span class="string">'--local_rank'</span>, default=<span class="number">-1</span>, type=int,  <span class="comment"># ç”¨äºå¯åŠ¨å™¨å‘ŠçŸ¥å½“å‰è¿›ç¨‹GPUå·</span></span><br><span class="line">                        help=<span class="string">'node rank for distributed training'</span>)</span><br><span class="line">    args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">    distributed.init_process_group(<span class="string">"nccl"</span>)</span><br><span class="line">    torch.cuda.set_device(args.local_rank)</span><br><span class="line"></span><br><span class="line">    train_set = Data()</span><br><span class="line">    train_sampler = torch.utils.data.distributed.DistributedSampler(train_set)</span><br><span class="line">    train_loader = DataLoader(train_set, batch_size=<span class="number">8</span>, sampler=train_sampler, drop_last=<span class="literal">True</span>,</span><br><span class="line">                              collate_fn=train_set.generate_batch)</span><br><span class="line"></span><br><span class="line">    device = torch.device(args.local_rank)</span><br><span class="line">    model = Model().to(device)</span><br><span class="line">    model = DistributedDataParallel(model, device_ids=[args.local_rank])</span><br><span class="line"></span><br><span class="line">    optimizer = torch.optim.SGD(model.parameters(), lr=<span class="number">0.1</span>)</span><br><span class="line">    loss_func = nn.CrossEntropyLoss()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        print(<span class="string">"epoch &#123;&#125;"</span>.format(epoch))</span><br><span class="line">        <span class="keyword">for</span> step, data <span class="keyword">in</span> enumerate(train_loader):</span><br><span class="line">            ids = data[<span class="number">0</span>].to(device)</span><br><span class="line">            bag_labels = data[<span class="number">1</span>].to(device)</span><br><span class="line">            E1s = data[<span class="number">2</span>]</span><br><span class="line">            logits = model(ids, bag_labels, E1s)</span><br><span class="line">            labels = torch.randint(<span class="number">0</span>, <span class="number">2</span>, size=(<span class="number">8</span>, )).cuda()</span><br><span class="line">            loss = loss_func(logits, labels)</span><br><span class="line">            optimizer.zero_grad()</span><br><span class="line">            loss.backward()</span><br><span class="line">            optimizer.step()</span><br></pre></td></tr></table></figure>
<p>åœ¨ä½¿ç”¨æ—¶ï¼Œè°ƒç”¨ torch.distributed.launch å¯åŠ¨å™¨å¯åŠ¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">CUDA_VISIBLE_DEVICES=1,2 python -m torch.distributed.launch --nproc_per_node=2 run.py</span><br></pre></td></tr></table></figure>
<h3 id="2-1-æ•°æ®åˆ‡åˆ†"><a href="#2-1-æ•°æ®åˆ‡åˆ†" class="headerlink" title="2.1. æ•°æ®åˆ‡åˆ†"></a>2.1. æ•°æ®åˆ‡åˆ†</h3><p>åœ¨å®éªŒæ—¶å‘ç°ï¼Œä½¿ç”¨<code>DistributedDataParallel</code>ä¸ä¼šå¯¹æ•°æ®è¿›è¡Œåˆ‡åˆ†ï¼Œåº”è¯¥æ˜¯ä¸ä½¿ç”¨äº†å¤šä¸ªè¿›ç¨‹æœ‰å…³ã€‚å› æ­¤å¯ä»¥ç”¨äºå¯¹æ•°æ®è¦æ±‚æ¯”è¾ƒè‹›åˆ»çš„å®éªŒç¯å¢ƒã€‚</p>
]]></content>
      <categories>
        <category>Others</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
        <tag>DistributedDataParallel</tag>
      </tags>
  </entry>
  <entry>
    <title>DataParallelæ•°æ®åˆ‡åˆ†çš„æ–¹å¼</title>
    <url>/2021/03/24/DataParallel%E6%95%B0%E6%8D%AE%E5%88%87%E5%88%86%E7%9A%84%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<p>æœ€è¿‘åœ¨ä½¿ç”¨DataParallelæ—¶ï¼Œéœ€è¦ä»”ç»†æ¢è®¨Pytorché»˜è®¤çš„æ•°æ®åˆ’åˆ†æ–¹å¼ï¼Œäºæ˜¯åšä¸ªå®éªŒè¿›è¡Œå°è¯•ã€‚</p>
<p>å…ˆè¯´ç»“è®ºï¼š</p>
<h2 id="1-ç»“è®º"><a href="#1-ç»“è®º" class="headerlink" title="1. ç»“è®º"></a>1. ç»“è®º</h2><ol>
<li>å¯¹äºtensorå‹æ•°æ®ï¼Œå¹³å‡åˆ’åˆ†ï¼›å¦‚æœä¸èƒ½æ•´é™¤ï¼Œä»å‰åˆ°åè¡¥å……</li>
<li>å¯¹äºétensorå‹æ•°æ®ï¼Œå¤åˆ¶åˆ°æ¯å°è®¾å¤‡</li>
</ol>
<a id="more"></a>
<h2 id="2-å®éªŒ"><a href="#2-å®éªŒ" class="headerlink" title="2. å®éªŒ"></a>2. å®éªŒ</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> DataLoader, Dataset</span><br><span class="line"><span class="keyword">from</span> torch.nn <span class="keyword">import</span> DataParallel</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Model</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(Model, self).__init__()</span><br><span class="line">        self.embedding = nn.Embedding(<span class="number">30000</span>, <span class="number">50</span>, padding_idx=<span class="number">0</span>)</span><br><span class="line">        self.linear = nn.Linear(<span class="number">50</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, ids, bag_labels, E1s)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :param ids: (sents, seq_len) &lt;- (8, 120)</span></span><br><span class="line"><span class="string">        :param bag_labels: (bags, class_num) &lt;- (3, 2)</span></span><br><span class="line"><span class="string">        :param E1s: (bags, variable) &lt;- (3, variable)</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        print(<span class="string">"ids "</span>, ids.shape)</span><br><span class="line">        print(<span class="string">"bag_labels "</span>, bag_labels.shape)</span><br><span class="line">        print(<span class="string">"E1s "</span>, E1s)</span><br><span class="line">        print(<span class="string">'============================='</span>)</span><br><span class="line">        x = self.embedding(ids)</span><br><span class="line">        x = x.mean(dim=<span class="number">1</span>)</span><br><span class="line">        x = self.linear(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Data</span><span class="params">(Dataset)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(Data, self).__init__()</span><br><span class="line">        self.x = torch.randint(<span class="number">0</span>, <span class="number">9999</span>, size=(<span class="number">1000</span>, <span class="number">120</span>))  <span class="comment"># 1000 samples</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, item)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.x[item]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># è®¾ç½®å¯è§æ˜¾å¡ (ç‰©ç†å±‚)</span></span><br><span class="line">    os.environ[<span class="string">"CUDA_DEVICE_ORDER"</span>] = <span class="string">"PCI_BUS_ID"</span></span><br><span class="line">    os.environ[<span class="string">"CUDA_VISIBLE_DEVICES"</span>] = <span class="string">"1, 2"</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¾ç½®å¹¶è¡Œæ˜¾å¡ (é€»è¾‘å±‚)</span></span><br><span class="line">    device = torch.device(<span class="string">"cuda:0"</span>)</span><br><span class="line">    model = Model().to(device)  <span class="comment"># å‘é€åˆ°è®¾å¤‡</span></span><br><span class="line">    model = DataParallel(model, device_ids=[<span class="number">0</span>, <span class="number">1</span>])  <span class="comment"># å¤šå¡è®­ç»ƒ</span></span><br><span class="line">    loader = DataLoader(Data(), batch_size=<span class="number">8</span>, shuffle=<span class="literal">True</span>)</span><br><span class="line">    optimizer = torch.optim.SGD(model.parameters(), lr=<span class="number">0.1</span>)</span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        <span class="keyword">for</span> step, data <span class="keyword">in</span> enumerate(loader):</span><br><span class="line">            data = data.to(device)</span><br><span class="line">            bag_labels = torch.randint(<span class="number">0</span>, <span class="number">2</span>, size=(<span class="number">3</span>, <span class="number">2</span>)).to(device)</span><br><span class="line">            E1s = [[<span class="number">15</span>, <span class="number">39</span>], [<span class="number">9537</span>], [<span class="number">1</span>, <span class="number">70</span>, <span class="number">5132</span>]]</span><br><span class="line">            logits = model(data, bag_labels, E1s)</span><br><span class="line">            print(<span class="string">"step &#123;&#125;"</span>.format(step))</span><br></pre></td></tr></table></figure>
<p>æ‰“å°ç»“æœä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">step 87</span><br><span class="line">ids  torch.Size([4, 120])</span><br><span class="line">bag_labels  torch.Size([2, 2])</span><br><span class="line">E1s  [[15, 39], [9537], [1, 70, 5132]]</span><br><span class="line">=============================</span><br><span class="line">ids  torch.Size([4, 120])</span><br><span class="line">bag_labels  torch.Size([1, 2])</span><br><span class="line">E1s  [[15, 39], [9537], [1, 70, 5132]]</span><br><span class="line">=============================</span><br><span class="line">step 88</span><br><span class="line">ids  torch.Size([4, 120])</span><br><span class="line">bag_labels  torch.Size([2, 2])</span><br><span class="line">E1s  [[15, 39], [9537], [1, 70, 5132]]</span><br><span class="line">=============================</span><br><span class="line">ids  torch.Size([4, 120])</span><br><span class="line">bag_labels  torch.Size([1, 2])</span><br><span class="line">E1s  [[15, 39], [9537], [1, 70, 5132]]</span><br><span class="line">=============================</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Others</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
        <tag>DataParallel</tag>
        <tag>tensor</tag>
      </tags>
  </entry>
  <entry>
    <title>CUDA_DEVICE_ORDER</title>
    <url>/2021/03/24/CUDA-DEVICE-ORDER/</url>
    <content><![CDATA[<p>NVMLå·¥å…·nvidia-smiæŒ‰è®¾å¤‡çš„PCI Bus ID ä¸ºè®¾å¤‡åˆ†é…ç´¢å¼•åºå·ï¼Œç”±äºPCI Bus ID æ˜¯ç¡¬ä»¶ç›¸å…³çš„ï¼Œæˆ‘ä»¬æŠŠè®¾å¤‡çš„ PCI Bus ID æˆ–è€…æŒ‰è¯¥IDåˆ†é…çš„ç´¢å¼•å·ä¸ºç‰©ç†IDã€‚</p>
<p>CUDAåº”ç”¨è¿è¡Œæ—¶è¿›è¡Œè®¾å¤‡æŸ¥è¯¢ï¼ˆæ¯”å¦‚deviceQueryï¼‰è¿”å›çš„è®¾å¤‡IDå¯èƒ½ä¸ç‰©ç†IDä¸ä¸€è‡´ï¼Œè­¬å¦‚ä¸‹é¢è¿™ä½ç½‘å‹é‡åˆ°çš„æƒ…å†µï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">## NVML id æ˜¯ ç‰©ç†IDï¼ŒCUDA indexæ˜¯CUDAåº”ç”¨æŸ¥è¯¢è¿”å›çš„è®¾å¤‡ID</span></span><br><span class="line">NVML id 0 maps to Cuda index 4</span><br><span class="line">NVML id 1 maps to Cuda index 5</span><br><span class="line">NVML id 2 maps to Cuda index 6</span><br><span class="line">NVML id 3 maps to Cuda index 7</span><br><span class="line">NVML id 4 maps to Cuda index 0</span><br><span class="line">NVML id 5 maps to Cuda index 1</span><br><span class="line">NVML id 6 maps to Cuda index 2</span><br><span class="line">NVML id 7 maps to Cuda index 3</span><br><span class="line">NVML id 8 maps to Cuda index 8</span><br><span class="line">NVML id 9 maps to Cuda index 9</span><br><span class="line">NVML id 10 maps to Cuda index 10</span><br><span class="line">NVML id 11 maps to Cuda index 11</span><br><span class="line">NVML id 12 maps to Cuda index 12</span><br><span class="line">NVML id 13 maps to Cuda index 13</span><br><span class="line">NVML id 14 maps to Cuda index 14</span><br><span class="line">NVML id 15 maps to Cuda index 15</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½® CUDA_DEVICE_ORDER = PCI_BUS_ID æ¥è¦æ±‚è¿è¡Œæ—¶è®¾å¤‡æŸ¥è¯¢æŒ‰ç…§ PCI_BUS_ID çš„é¡ºåºç´¢å¼•ï¼Œä»è€Œä½¿å¾—  è®¾å¤‡ID=ç‰©ç†ID  ä¿è¯CUDAåº”ç”¨æŒ‰æœŸæœ›ä½¿ç”¨æŒ‡å®šè®¾å¤‡ã€‚ç›®å‰æœ€ä½³çš„è®¾ç½®æ–¹æ³•æ˜¯åŒæ—¶è®¾ç½® CUDA_DEVICE_ORDER = PCI_BUS_ID å’Œ CUDA_VISIBLE_DEVICES ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">os.environ[<span class="string">"CUDA_DEVICE_ORDER"</span>] = <span class="string">"PCI_BUS_ID"</span></span><br><span class="line">os.environ[<span class="string">"CUDA_VISIBLE_DEVICES"</span>] = <span class="string">"2, 3"</span></span><br></pre></td></tr></table></figure>
<p>å½“ä½ æ·»åŠ è¿™ä¸¤è¡Œä»£ç åï¼Œé‚£ä¹ˆdevice_ids[0]é»˜è®¤çš„å°±æ˜¯ç¬¬2å·å¡ï¼Œä½ çš„æ¨¡å‹ä¹Ÿä¼šåˆå§‹åŒ–åœ¨ç¬¬2å·å¡ä¸Šäº†ï¼Œè€Œä¸ä¼šå ç”¨ç¬¬0å·å¡äº†ã€‚<strong>è¿™é‡Œç®€å•è¯´ä¸€ä¸‹è®¾ç½®ä¸Šé¢ä¸¤è¡Œä»£ç åï¼Œé‚£ä¹ˆå¯¹è¿™ä¸ªç¨‹åºè€Œè¨€å¯è§çš„åªæœ‰2å’Œ3å·å¡ï¼Œå’Œå…¶ä»–çš„å¡æ²¡æœ‰å…³ç³»ï¼Œè¿™æ˜¯ç‰©ç†ä¸Šçš„å·å¡ï¼Œé€»è¾‘ä¸Šæ¥è¯´å…¶å®æ˜¯å¯¹åº”0å’Œ1å·å¡ï¼Œå³device_ids[0]å¯¹åº”çš„å°±æ˜¯ç¬¬2å·å¡ï¼Œdevice_ids[1]å¯¹åº”çš„å°±æ˜¯ç¬¬3å·å¡</strong>ã€‚</p>
]]></content>
      <categories>
        <category>Others</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>CUDA</tag>
        <tag>CUDA_DEVICE_ORDER</tag>
        <tag>CUDA_VISIBLE_DEVICES</tag>
      </tags>
  </entry>
  <entry>
    <title>C++å˜é•¿æ•°ç»„</title>
    <url>/2021/03/23/C-%E5%8F%98%E9%95%BF%E6%95%B0%E7%BB%84/</url>
    <content><![CDATA[<p>ä¹‹å‰åœ¨DEV C++ä¸­ï¼Œå¯¹äºå˜é•¿æ•°ç»„ï¼Œä¹ æƒ¯é‡‡ç”¨ä»¥ä¸‹å†™æ³•ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="built_in">array</span>[m][n];</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ï¼Œåœ¨æŒ‰ç…§è¿™ç§æ–¹å¼ä¹¦å†™ä¸‰ç»´æ•°ç»„æ—¶ï¼Œå‡ºç°äº†å†…å­˜é”™è¯¯ã€‚</p>
<p>æŸ¥é˜…ç½‘ä¸Šçš„åšå®¢ï¼Œæœ‰è¿™ç§è¯´æ³•ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;  </span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;    </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">    <span class="keyword">int</span> len;  </span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; len;  </span><br><span class="line">    <span class="comment">//ç”¨æŒ‡é’ˆpæŒ‡å‘newåŠ¨æ€åˆ†é…çš„é•¿åº¦ä¸ºlen*sizeof(int)çš„å†…å­˜ç©ºé—´  </span></span><br><span class="line">    <span class="keyword">int</span> *p = <span class="keyword">new</span> <span class="keyword">int</span>[len];  </span><br><span class="line">    <span class="comment">/*æ³¨æ„int *p = new int[len];è¿™ä¸€å¥ï¼Œä½ ä¸èƒ½è¿™æ ·åšï¼š  </span></span><br><span class="line"><span class="comment">    int p[len];  </span></span><br><span class="line"><span class="comment">    C++ç¼–è¯‘å™¨ä¼šæŠ¥é”™è¯´lençš„å¤§å°ä¸èƒ½ç¡®å®šï¼Œå› ä¸ºç”¨è¿™ç§å½¢å¼å£°æ˜æ•°ç»„ï¼Œæ•°ç»„çš„å¤§å°éœ€è¦åœ¨ç¼–è¯‘æ—¶ç¡®å®šã€‚</span></span><br><span class="line"><span class="comment">    è€Œä¸”è¿™æ ·ä¹Ÿä¸è¡Œï¼š</span></span><br><span class="line"><span class="comment">    int p[] = new int[len];  </span></span><br><span class="line"><span class="comment">    ç¼–è¯‘å™¨ä¼šè¯´ä¸èƒ½æŠŠint*å‹è½¬åŒ–ä¸ºint[]å‹ï¼Œå› ä¸ºç”¨newå¼€è¾Ÿäº†ä¸€æ®µå†…å­˜ç©ºé—´åä¼šè¿”å›è¿™æ®µå†…å­˜çš„é¦–åœ°å€ï¼Œæ‰€ä»¥è¦æŠŠè¿™ä¸ªåœ°å€èµ‹ç»™ä¸€ä¸ªæŒ‡é’ˆï¼Œæ‰€ä»¥è¦ç”¨ï¼š </span></span><br><span class="line"><span class="comment">    int *p = new int[len]*/</span></span><br><span class="line">    <span class="keyword">delete</span>[] p; <span class="comment">//æ³¨æ„è¦æ³¨é”€æŒ‡é’ˆpï¼Œä½¿ç¨‹åºé‡Šæ”¾ç”¨newå¼€è¾Ÿçš„å†…å­˜ç©ºé—´</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>å¯èƒ½æ˜¯å› ä¸ºç¼–è¯‘å™¨çš„ç‰ˆæœ¬ä¸åŒã€‚ä½†æ˜¯ï¼ŒæŒ‰ç…§<code>new</code>ç”³è¯·å†…å­˜åº”è¯¥æ˜¯ä¸€ç§æœ€ä¸ºè§„èŒƒçš„åšæ³•ï¼Œåœ¨ä»»ä½•ç‰ˆæœ¬éƒ½ä¸ä¼šå‡ºé”™ã€‚</p>
<h2 id="ä½¿ç”¨vector"><a href="#ä½¿ç”¨vector" class="headerlink" title="ä½¿ç”¨vector"></a>ä½¿ç”¨vector</h2><p>ä½¿ç”¨C++æ ‡å‡†æ¨¡ç‰ˆåº“ï¼ˆSTLï¼‰ä¸­çš„vectorï¼ˆå‘é‡ï¼‰ä¹Ÿå¯ä»¥å®ç°å˜é•¿æ•°ç»„ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; len;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="built_in">array</span>(len); <span class="comment">// å£°æ˜å˜é•¿æ•°ç»„</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;++i) &#123;</span><br><span class="line">        <span class="built_in">array</span>[i] = i;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">array</span>[i] &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>dynamic</tag>
        <tag>array</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo error spawn failedè§£å†³åŠæ³•</title>
    <url>/2021/03/20/hexo-error-spawn-failed%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
    <content><![CDATA[<p>å‡ºç°é”™è¯¯ï¼š</p>
<p><code>error: spawn failed...</code></p>
<p>æ€»ç»“ï¼š</p>
<p>é—®é¢˜å¤§å¤šæ˜¯å› ä¸º<code>git</code>è¿›è¡Œ<code>push</code>æˆ–è€…<code>hexo d</code>çš„æ—¶å€™æ”¹å˜äº†ä¸€äº›<code>.deploy_git</code>æ–‡ä»¶ä¸‹çš„å†…å®¹ã€‚</p>
<p>è§£å†³åŠæ³•ï¼š</p>
<ol>
<li>åˆ é™¤<code>.deploy_git</code>æ–‡ä»¶å¤¹;</li>
<li>è¾“å…¥<code>git config --global core.autocrlf false</code></li>
<li>ç„¶åï¼Œä¾æ¬¡æ‰§è¡Œï¼š<br><code>hexo clean</code><br><code>hexo g</code><br><code>hexo d</code></li>
</ol>
<p>é—®é¢˜è§£å†³ã€‚æš´åŠ›ç›´æ¥ï¼Œæœ‰æ•ˆã€‚</p>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>ELECTRAé¢„è®­ç»ƒæ¨¡å‹</title>
    <url>/2021/03/19/ELECTRA%E9%A2%84%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B/</url>
    <content><![CDATA[<blockquote>
<p>ELECTRAè¯¦è§£ï¼š</p>
<p><a href="https://zhuanlan.zhihu.com/p/118135466" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/118135466</a></p>
</blockquote>
<p><img src="https://pic4.zhimg.com/80/v2-93eaff2a96a1b7d2991417ba10aab35f_720w.jpg" alt></p>
<h2 id="1-åˆ›æ–°ç‚¹"><a href="#1-åˆ›æ–°ç‚¹" class="headerlink" title="1. åˆ›æ–°ç‚¹"></a>1. åˆ›æ–°ç‚¹</h2><ul>
<li>æå‡ºäº†æ–°çš„æ¨¡å‹é¢„è®­ç»ƒçš„æ¡†æ¶ï¼Œé‡‡ç”¨generatorå’Œdiscriminatorçš„ç»“åˆæ–¹å¼ï¼Œä½†åˆä¸åŒäºGAN</li>
<li>å°†Masked Language Modelçš„æ–¹å¼æ”¹ä¸ºäº†replaced token detection</li>
<li>å› ä¸ºmasked language model èƒ½æœ‰æ•ˆåœ°å­¦ä¹ åˆ°contextçš„ä¿¡æ¯ï¼Œæ‰€ä»¥èƒ½å¾ˆå¥½åœ°å­¦ä¹ embeddingï¼Œæ‰€ä»¥ä½¿ç”¨äº†weight sharingçš„æ–¹å¼å°†generatorçš„embeddingçš„ä¿¡æ¯å…±äº«ç»™discriminator</li>
<li>dicriminator é¢„æµ‹äº†generatorè¾“å‡ºçš„æ¯ä¸ªtokenæ˜¯ä¸æ˜¯originalçš„ï¼Œä»è€Œé«˜æ•ˆåœ°æ›´æ–°transformerçš„å„ä¸ªå‚æ•°ï¼Œä½¿å¾—æ¨¡å‹çš„ç†Ÿç»ƒé€Ÿåº¦åŠ å¿«</li>
<li>è¯¥æ¨¡å‹é‡‡ç”¨äº†å°çš„generatorä»¥åŠdiscriminatorçš„æ–¹å¼å…±åŒè®­ç»ƒï¼Œå¹¶ä¸”é‡‡ç”¨äº†ä¸¤è€…lossç›¸åŠ ï¼Œä½¿å¾—discriminatorçš„å­¦ä¹ éš¾åº¦é€æ¸åœ°æå‡ï¼Œå­¦ä¹ åˆ°æ›´éš¾çš„tokenï¼ˆplausible tokensï¼‰</li>
<li>æ¨¡å‹åœ¨fine-tuning çš„æ—¶å€™ï¼Œä¸¢å¼ƒgeneratorï¼Œåªä½¿ç”¨discrinator</li>
</ul>
<a id="more"></a>
<h2 id="2-æ¨¡å‹æ¶æ„"><a href="#2-æ¨¡å‹æ¶æ„" class="headerlink" title="2. æ¨¡å‹æ¶æ„"></a>2. æ¨¡å‹æ¶æ„</h2><p>BERTå­˜åœ¨é¢„è®­ç»ƒå’Œfine-tuningçš„mismatchï¼Œå› ä¸ºåœ¨fine-tuningé˜¶æ®µï¼Œå¹¶ä¸ä¼šæœ‰[MASK]çš„tokenã€‚</p>
<p>ELECTRAç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯generatorä»¥åŠdiscriminatorï¼Œä¸¤ä¸ªéƒ½æ˜¯transformerçš„encoderç»“æ„ï¼Œåªæ˜¯ä¸¤è€…çš„sizeä¸åŒï¼š</p>
<ul>
<li><p>generatorï¼šå°±æ˜¯ä¸€ä¸ªå°çš„ masked language modelï¼ˆé€šå¸¸æ˜¯ 1/4 çš„discriminatorçš„sizeï¼‰ï¼Œè¯¥æ¨¡å—çš„å…·ä½“ä½œç”¨æ˜¯ä»–é‡‡ç”¨äº†ç»å…¸çš„bertçš„MLMæ–¹å¼ï¼š</p>
</li>
<li><ul>
<li>é¦–å…ˆéšæœºé€‰å–15%çš„tokensï¼Œæ›¿ä»£ä¸º[MASK]tokenï¼Œï¼ˆå–æ¶ˆäº†bertçš„80%[MASK],10%unchange, 10% random replaced çš„æ“ä½œï¼Œå…·ä½“åŸå› ä¹Ÿæ˜¯å› ä¸ºæ²¡å¿…è¦ï¼Œå› ä¸ºæˆ‘ä»¬finetuningä½¿ç”¨çš„discriminator)</li>
<li>ä½¿ç”¨generatorå»è®­ç»ƒæ¨¡å‹ï¼Œä½¿å¾—æ¨¡å‹é¢„æµ‹masked tokenï¼Œå¾—åˆ°corrupted tokens</li>
<li>generatorçš„ç›®æ ‡å‡½æ•°å’Œbertä¸€æ ·ï¼Œéƒ½æ˜¯å¸Œæœ›è¢«maskedçš„èƒ½å¤Ÿè¢«è¿˜åŸæˆåŸæœ¬çš„original tokens<br>å¦‚ä¸Šå›¾ï¼Œ tokenï¼Œ<code>the</code> å’Œ <code>cooked</code> è¢«éšæœºé€‰ä¸ºè¢«maskedï¼Œç„¶ågeneratoré¢„æµ‹å¾—åˆ°corrupted tokensï¼Œå˜æˆäº†<code>the</code>å’Œ<code>ate</code></li>
</ul>
</li>
</ul>
<ul>
<li><p>discriminatorï¼šdiscriminatorçš„æ¥æ”¶è¢«generator corruptä¹‹åçš„è¾“å…¥ï¼Œdiscriminatorçš„ä½œç”¨æ˜¯åˆ†è¾¨è¾“å…¥çš„æ¯ä¸€ä¸ªtokenæ˜¯originalçš„è¿˜æ˜¯replacedï¼Œæ³¨æ„ï¼šå¦‚æœgeneratorç”Ÿæˆçš„tokenå’ŒåŸå§‹tokenä¸€è‡´ï¼Œé‚£ä¹ˆè¿™ä¸ªtokenä»ç„¶æ˜¯originalçš„</p>
</li>
<li><ul>
<li>æ‰€ä»¥ï¼Œå¯¹äºæ¯ä¸ªtokenï¼Œdiscriminatoréƒ½ä¼šè¿›è¡Œä¸€ä¸ªäºŒåˆ†ç±»ï¼Œæœ€åè·å¾—loss</li>
</ul>
</li>
</ul>
<p>ä»¥ä¸Šçš„æ–¹å¼è¢«ç§°ä¸ºreplaced token detectionã€‚</p>
<ul>
<li>learn from all tokens (instead of 15%)</li>
<li>compute efficient</li>
<li>paramter efficient</li>
<li>improves downstream task performance</li>
</ul>
<h3 id="2-1-ä¸ªäººç†è§£"><a href="#2-1-ä¸ªäººç†è§£" class="headerlink" title="2.1. ä¸ªäººç†è§£"></a>2.1. ä¸ªäººç†è§£</h3><p>å¯ä»¥æŠŠgeneratorçœ‹ä½œä¹‹å‰ä»»æ„ä¸€ç§é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ï¼Œå¦‚BERT, RoBERTaç­‰ï¼Œå€Ÿé‰´äº†GANçš„æ€æƒ³ã€‚ä½†æ˜¯å¦åŒæ ·å­˜åœ¨è®­ç»ƒå›°éš¾çš„é—®é¢˜ï¼Ÿä¾‹å¦‚generatoræ€§èƒ½è¶³å¤Ÿå¥½ï¼Œå¯¼è‡´discriminatorè¾“å‡ºå‡ä¸º<code>original</code>?</p>
<h2 id="3-å¦‚ä½•è®­ç»ƒ"><a href="#3-å¦‚ä½•è®­ç»ƒ" class="headerlink" title="3. å¦‚ä½•è®­ç»ƒ"></a>3. å¦‚ä½•è®­ç»ƒ</h2><p>è¯¥æ¨¡å‹é‡‡ç”¨äº†minimize the combined lossçš„æ–¹å¼è¿›è¡Œè®­ç»ƒï¼š</p>
<script type="math/tex; mode=display">
\min_{\theta_G, \theta_D} \sum_{\vec{x} \in X} L_{MLM}(\vec{x},\theta_{G}) + \lambda L_{Dis}(\vec{x}, \theta_{D})</script><p>å…¶ä¸­</p>
<p>$L<em>{MLM}(\vec{x}, \theta</em>{G})$å¯¹äºè¾“å…¥$\vec{x} = [x_1, â€¦, x_n]$ï¼Œç»è¿‡generatorä¹‹åå¾—åˆ°ç¼–ç äº†ä¸Šä¸‹æ–‡ä¿¡æ¯çš„vector representationï¼Œ$h(\vec{x}) = [h_1,â€¦,h_n]$ï¼Œå¯¹äºä½ç½®tï¼Œå…¶è¢«æ›¿æ¢ä¸º[MASK]ï¼Œé‚£ä¹ˆå®ƒçš„output probabilityï¼ˆç»è¿‡softmaxï¼‰ä¸ºï¼š</p>
<script type="math/tex; mode=display">
p_G(x_t|\vec{x}) = \frac{\exp(\mathrm{e}(x_t)^T \cdot \mathrm{h_g}(\vec{x})_t)}{\sum_{x^{'}} \exp(\mathrm{e}(x^{'})^T \cdot \mathrm{h_g} (\vec{x})_t)}</script><p>å…¶ä¸­$\mathrm{e}(x_t)$ä¸ºå•è¯çš„embeddingè¡¨ç¤ºï¼Œè€Œ$\mathrm{h_g}(\vec{x})_t$ä¸ºç»è¿‡generatorä¹‹åçš„éšè—å±‚è¡¨ç¤ºã€‚</p>
<p>ç„¶åè®¡ç®—äº¤å‰ç†µæŸå¤±ã€‚</p>
<p><br></p>
<p>å¯¹äºdiscriminatorï¼š</p>
<script type="math/tex; mode=display">
D(\vec{x},t) = \mathrm{sigmoid} (w^Th_D(\vec{x})_t)</script><p>ç„¶åè®¡ç®—BCE (binary cross entropy) æŸå¤±ã€‚</p>
<h3 id="3-1-åå‘ä¼ æ’­"><a href="#3-1-åå‘ä¼ æ’­" class="headerlink" title="3.1. åå‘ä¼ æ’­"></a>3.1. åå‘ä¼ æ’­</h3><p><strong><em>åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œdiscriminatorçš„lossä¸ä¼šåå‘ä¼ æ’­åˆ°generator</em></strong>ï¼ˆå› ä¸ºgeneratorçš„samplingçš„æ­¥éª¤å¯¼è‡´ï¼‰</p>
<font color="red">ä½†æ˜¯å¦‚æœé‡‡ç”¨è¿™ç§åšæ³•ï¼Œæ˜¯å¦generatorå­˜åœ¨çš„å¿…è¦æ€§å°±æ²¡æœ‰äº†ï¼Ÿå®Œå…¨å¯ä»¥é‡‡ç”¨æ‰‹åŠ¨æ›¿æ¢çš„æ–¹å¼ï¼Œé¦–å…ˆè¿›è¡Œè¾ƒä¸ºæ˜æ˜¾çš„æ›¿æ¢ï¼Œä¾‹å¦‚ç”¨åŠ¨è¯æ›¿æ¢åè¯ã€‚éšç€è®­ç»ƒçš„è¿›è¡Œï¼Œé€æ¸æ”¹ä¸ºç”¨BERTç­‰é¢„è®­ç»ƒæ¨¡å‹çš„é¢„æµ‹ç»“æœä½œä¸ºæ›¿æ¢ï¼Œå¢å¤§æ£€æµ‹éš¾åº¦ã€‚emmm</font>

<h3 id="3-2-å…¶ä»–è®­ç»ƒæ–¹å¼"><a href="#3-2-å…¶ä»–è®­ç»ƒæ–¹å¼" class="headerlink" title="3.2. å…¶ä»–è®­ç»ƒæ–¹å¼"></a>3.2. å…¶ä»–è®­ç»ƒæ–¹å¼</h3><p>ä½œè€…æ˜¾ç„¶ä¹Ÿè€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œåœ¨è®ºæ–‡ä¸­æå‡ºäº†å…¶ä»–è®­ç»ƒæ–¹å¼ï¼š</p>
<ul>
<li>ä¸€ç§æ˜¯GANï¼šELECTRAä»¥ä¸€ç§å¯¹æŠ—å­¦ä¹ çš„æ€æƒ³æ¥è®­ç»ƒã€‚ä½œè€…å°†ç”Ÿæˆå™¨çš„ç›®æ ‡å‡½æ•°ç”±æœ€å°åŒ–MLM lossæ¢æˆäº†æœ€å¤§åŒ–åˆ¤åˆ«å™¨åœ¨è¢«æ›¿æ¢tokenä¸Šçš„lossã€‚ç”¨å¼ºåŒ–å­¦ä¹ Policy Gradientçš„æ€æƒ³ï¼Œå°†è¢«æ›¿æ¢tokençš„äº¤å‰ç†µä½œä¸ºç”Ÿæˆå™¨çš„rewardï¼Œç„¶åè¿›è¡Œæ¢¯åº¦ä¸‹é™ã€‚å¼ºåŒ–æ–¹æ³•ä¼˜åŒ–ä¸‹æ¥ç”Ÿæˆå™¨åœ¨MLMä»»åŠ¡ä¸Šå¯ä»¥è¾¾åˆ°54%çš„å‡†ç¡®ç‡ï¼Œè€Œä¹‹å‰MLEä¼˜åŒ–ä¸‹å¯ä»¥è¾¾åˆ°65%ã€‚</li>
<li>ä¸€ç§æ˜¯two-stage è®­ç»ƒï¼Œå…ˆè®­ç»ƒ $L_{MLM}$ n stepsï¼Œç„¶åfrozeä½ generatorï¼Œå†è®­ç»ƒ discriminator n steps<br>ä½†æ˜¯æ•ˆæœéƒ½æ²¡æœ‰å…±åŒè®­ç»ƒæ•ˆæœå¥½</li>
</ul>
<h2 id="4-è¶…å‚æ•°"><a href="#4-è¶…å‚æ•°" class="headerlink" title="4. è¶…å‚æ•°"></a>4. è¶…å‚æ•°</h2><p>æ–‡ç« ä¸­æåˆ°äº†ï¼Œå¦‚æœgeneratorè¿‡å¼ºï¼Œé‚£ä¹ˆdiscriminatorå°±æ— æ³•æˆåŠŸè®­ç»ƒï¼Œè¿™å…¶å®ä¹Ÿå¾ˆå¥½ç†è§£ã€‚å› ä¸ºgeneratoréå¸¸å¼ºï¼Œé‚£ä¹ˆé¢„æµ‹å‡ºæ¥çš„tokenéƒ½éå¸¸å¥½ï¼Œå³éƒ½æ˜¯original tokensï¼Œé‚£ä¹ˆdiscrinator å¹¶ä¸éœ€è¦å¦‚ä½•å­¦ä¹ å°±æ”¶æ•›ï¼Œå› ä¸ºå®ƒåªéœ€è¦æŠŠæ‰€æœ‰äºŒåˆ†ç±»éƒ½è®¤ä¸ºæ˜¯1å°±è¡Œï¼ˆå‡è®¾1ä»£è¡¨realï¼‰</p>
<p><img src="https://pic2.zhimg.com/80/v2-4b664f463f5c390806db89e3071fa8c5_720w.jpg" alt></p>
<p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå½“generatorçš„size ä¸ºdiscriminator size çš„ 1/2 åˆ° 1/4 æ—¶ï¼Œæ¨¡å‹æ•ˆæœæœ€å¥½ã€‚</p>
<p>ç”±äºELECTRAæ˜¯åˆ¤åˆ«å¼ä»»åŠ¡ï¼Œä¸ç”¨å¯¹æ¯ä¸ªä½ç½®çš„æ•´ä¸ªæ•°æ®åˆ†å¸ƒå»ºæ¨¡ï¼Œæ‰€ä»¥æ›´parameter-efficientã€‚</p>
<ul>
<li>æ¨¡å‹å¤§å°çš„å› ç´ </li>
</ul>
<p>å¯ä»¥ä»ä¸‹å›¾çš„å®éªŒç»“æœçœ‹å‡ºï¼ŒELECTRA æ¨¡å‹åœ¨å°æ¨¡å‹çš„æ—¶å€™ï¼Œæ•ˆæœæå‡æ˜¾è‘—ï¼Œéšç€æ¨¡å‹å¤§å°çš„å¢åŠ ï¼Œæ•ˆæœé™ä½ã€‚</p>
<p>åŒæ—¶å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ç›¸åŒçš„è®¡ç®—é‡çš„æ—¶å€™ï¼ŒELECTRAçš„æ•ˆæœä¼˜äºBERTã€‚</p>
<p><img src="https://pic4.zhimg.com/80/v2-0187b4b8e3777682833d952f2fe9bfd3_720w.jpg" alt></p>
]]></content>
      <categories>
        <category>NLP</category>
        <category>Pretrained Language Model</category>
      </categories>
      <tags>
        <tag>PLM</tag>
        <tag>ELECTRA</tag>
      </tags>
  </entry>
  <entry>
    <title>RoBERTaé¢„è®­ç»ƒæ¨¡å‹</title>
    <url>/2021/03/19/RoBERTa%E9%A2%84%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B/</url>
    <content><![CDATA[<p>ç›¸æ¯”äºBERTçš„è°ƒæ•´ï¼š</p>
<ol>
<li>è®­ç»ƒæ—¶é—´æ›´é•¿ï¼Œbatch sizeæ›´å¤§ï¼Œè®­ç»ƒæ•°æ®æ›´å¤š</li>
<li>ç§»é™¤next sentence prediction loss</li>
<li>è®­ç»ƒåºåˆ—æ›´é•¿</li>
<li>åŠ¨æ€maskæœºåˆ¶</li>
</ol>
<p>BERTåŸå‹ä½¿ç”¨çš„æ˜¯ character-level BPE vocabulary of size 30K, RoBERTaä½¿ç”¨äº†GPT2çš„ BPE å®ç°ï¼Œä½¿ç”¨çš„æ˜¯byteè€Œä¸æ˜¯unicode charactersä½œä¸ºsubwordçš„å•ä½ã€‚</p>
]]></content>
      <categories>
        <category>NLP</category>
        <category>Pretrained Language Model</category>
      </categories>
      <tags>
        <tag>PLM</tag>
        <tag>RoBERTa</tag>
        <tag>pretrained language models</tag>
      </tags>
  </entry>
  <entry>
    <title>C++æ•°ç»„å¡«å……æ–¹æ³•</title>
    <url>/2021/03/19/C-%E6%95%B0%E7%BB%84%E5%A1%AB%E5%85%85%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<p>åœ¨å¯¹æ•°ç»„åˆå§‹åŒ–æ—¶ï¼Œå¾€å¾€éœ€è¦èµ‹äºˆåŒæ ·çš„å€¼ï¼Œä¾‹å¦‚å¸ƒå°”å‹æ•°ç»„å…¨éƒ¨è®¾ä¸ºfalse</p>
<p>ç°åœ¨è¦æŠŠaé‡Œé¢1000ä¸ªå…¨éƒ¨åˆå§‹åŒ–ä¸º5ï¼›stré‡Œé¢å…¨éƒ¨åˆå§‹åŒ–ä¸ºaï¼›</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> a[<span class="number">1000</span>] = &#123;<span class="number">0</span>&#125;; </span><br><span class="line"><span class="keyword">char</span> str[<span class="number">1000</span>] = &#123;<span class="string">'a'</span>&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>ä½†è¿™æ ·åªæœ‰ç¬¬ä¸€ä¸ªå…ƒç´ è¢«è®¾ç½®ï¼Œå…¶ä½™999ä¸ªè‡ªåŠ¨é»˜è®¤æ˜¯int çš„0</strong>ï¼›</p>
<h1 id="1-memset"><a href="#1-memset" class="headerlink" title="1. memset"></a>1. memset</h1><p>é¦–å…ˆï¼Œ<strong>memsetå‡½æ•°æ˜¯é€å­—èŠ‚è¿›è¡Œå¡«å……</strong>ï¼Œæ‰€ä»¥ä¸é€‚åˆintå‹æ•°ç»„ã€‚</p>
<p>å¯¹äºå­—ç¬¦å‹æ•°ç»„ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="built_in">memset</span>(str,<span class="string">'a'</span>,<span class="keyword">sizeof</span>(str))</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="2-fill"><a href="#2-fill" class="headerlink" title="2. fill"></a>2. fill</h1><p>æŒ‰ç…§å•å…ƒèµ‹å€¼ï¼Œå°†ä¸€ä¸ªåŒºé—´çš„å…ƒç´ éƒ½èµ‹åŒä¸€ä¸ªå€¼ï¼<br>æˆ‘ä»¬è¿˜æ˜¯æ¥çœ‹ä¸‹å®ç°å§ï¼š</p>
<blockquote>
<p>void fill(ForwardIt first, ForwardIt last, const T&amp; value);<br>void fill_n(OutputIt first, size n, const T&amp; value);<br>åŠŸèƒ½ï¼š<br>fillç»™è¿­ä»£å™¨èŒƒå›´[first, last)å†…å…ƒç´ å‡èµ‹å€¼ä¸ºvalueã€‚æ— è¿”å›å€¼ã€‚<br>fill_nå°†firstæŒ‡å‘èŒƒå›´å†…çš„å‰nä¸ªå…ƒç´ èµ‹å€¼ä¸ºvalueã€‚è¿”å›first+n(c++11)</p>
</blockquote>
<p>å¯¹åº”çš„æºä»£ç ä¸ºï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">ForwardIterator</span>, <span class="title">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">void</span> <span class="title">fill</span> (<span class="title">ForwardIterator</span> <span class="title">first</span>, <span class="title">ForwardIterator</span> <span class="title">last</span>, <span class="title">const</span> <span class="title">T</span>&amp; <span class="title">val</span>)</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">while</span> (first != last) &#123;</span><br><span class="line">    *first = val;</span><br><span class="line">    ++first;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®ä¾‹ï¼š</p>
<p>å¯¹äºint a[1000]çš„æ‰¹é‡å¡«å……ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line">fill(a, a + <span class="number">1000</span>, <span class="number">5</span>);</span><br></pre></td></tr></table></figure>
<h1 id="3-fill-n"><a href="#3-fill-n" class="headerlink" title="3. fill_n"></a>3. fill_n</h1><p>å¯¹åº”çš„æºä»£ç ä¸ºï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">OutputIterator</span>, <span class="title">class</span> <span class="title">Size</span>, <span class="title">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">OutputIterator</span> <span class="title">fill_n</span> (<span class="title">OutputIterator</span> <span class="title">first</span>, <span class="title">Size</span> <span class="title">n</span>, <span class="title">const</span> <span class="title">T</span>&amp; <span class="title">val</span>)</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">while</span> (n&gt;<span class="number">0</span>) &#123;</span><br><span class="line">    *first = val;</span><br><span class="line">    ++first; --n;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> first;     <span class="comment">// since C++11</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®ä¾‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line">fill_n(a, <span class="number">1000</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;ã€€myvector (<span class="number">8</span>,<span class="number">10</span>); <span class="comment">// myvector: 10 10 10 10 10 10 10 10</span></span><br><span class="line">fill_n (myvector.begin(),<span class="number">4</span>,<span class="number">20</span>); <span class="comment">// myvector: 20 20 20 20 10 10 10 10</span></span><br><span class="line">fill_n (myvector.begin()+<span class="number">3</span>,<span class="number">3</span>,<span class="number">33</span>); <span class="comment">// myvector: 20 20 20 33 33 33 10 10</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>array</tag>
        <tag>memset</tag>
        <tag>fill</tag>
        <tag>fill_n</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonæ‰§è¡ŒåŸç†</title>
    <url>/2021/03/17/python%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%90%86/</url>
    <content><![CDATA[<blockquote>
<p>è½¬è½½è‡ªï¼š<a href="https://blog.csdn.net/helloxiaozhe/article/details/78104975" target="_blank" rel="noopener">pythonç¼–è¯‘è¿‡ç¨‹å’Œæ‰§è¡ŒåŸç†</a></p>
</blockquote>
<hr>

<h1 id="1-pythonæ‰§è¡ŒåŸç†"><a href="#1-pythonæ‰§è¡ŒåŸç†" class="headerlink" title="1. pythonæ‰§è¡ŒåŸç†"></a>1. pythonæ‰§è¡ŒåŸç†</h1><p>è¿™é‡Œçš„è§£é‡Šæ‰§è¡Œæ˜¯ç›¸å¯¹äºç¼–è¯‘æ‰§è¡Œè€Œè¨€çš„ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œä½¿ç”¨C/C++ä¹‹ç±»çš„ç¼–è¯‘æ€§è¯­è¨€ç¼–å†™çš„ç¨‹åºï¼Œæ˜¯éœ€è¦ä»æºæ–‡ä»¶è½¬æ¢æˆè®¡ç®—æœºä½¿ç”¨çš„æœºå™¨è¯­è¨€ï¼Œç»è¿‡é“¾æ¥å™¨é“¾æ¥ä¹‹åå½¢æˆäº†äºŒè¿›åˆ¶çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚è¿è¡Œè¯¥ç¨‹åºçš„æ—¶å€™ï¼Œå°±å¯ä»¥æŠŠäºŒè¿›åˆ¶ç¨‹åºä»ç¡¬ç›˜è½½å…¥åˆ°å†…å­˜ä¸­å¹¶è¿è¡Œã€‚</p>
<p>ä½†æ˜¯å¯¹äºPythonè€Œè¨€ï¼Œpythonæºç ä¸éœ€è¦ç¼–è¯‘æˆäºŒè¿›åˆ¶ä»£ç ï¼Œå®ƒå¯ä»¥ç›´æ¥ä»æºä»£ç è¿è¡Œç¨‹åºã€‚å½“æˆ‘ä»¬è¿è¡Œpythonæ–‡ä»¶ç¨‹åºçš„æ—¶å€™ï¼Œpythonè§£é‡Šå™¨å°†æºä»£ç è½¬æ¢ä¸ºå­—èŠ‚ç ï¼Œç„¶åå†ç”±pythonè§£é‡Šå™¨æ¥æ‰§è¡Œè¿™äº›å­—èŠ‚ç ã€‚è¿™æ ·ï¼Œpythonå°±ä¸ç”¨æ‹…å¿ƒç¨‹åºçš„ç¼–è¯‘,åº“çš„é“¾æ¥åŠ è½½ç­‰é—®é¢˜äº†ã€‚</p>
<p>å¯¹äºpythonè§£é‡Šè¯­è¨€ï¼Œæœ‰ä»¥ä¸‹3æ–¹é¢çš„ç‰¹æ€§ï¼š</p>
<ol>
<li>æ¯æ¬¡è¿è¡Œéƒ½è¦è¿›è¡Œè½¬æ¢æˆå­—èŠ‚ç ï¼Œç„¶åå†æœ‰è™šæ‹ŸæœºæŠŠå­—èŠ‚ç è½¬æ¢æˆæœºå™¨è¯­è¨€ï¼Œæœ€åæ‰èƒ½åœ¨ç¡¬ä»¶ä¸Šè¿è¡Œã€‚ä¸ç¼–è¯‘æ€§è¯­è¨€ç›¸æ¯”ï¼Œæ¯æ¬¡å¤šå‡ºäº†ç¼–è¯‘å’Œé“¾æ¥çš„è¿‡ç¨‹ï¼Œæ€§èƒ½è‚¯å®šä¼šå—åˆ°å½±å“ï¼›è€Œpythonå¹¶ä¸æ˜¯æ¯æ¬¡éƒ½éœ€è¦è½¬æ¢å­—èŠ‚ç ï¼Œè§£é‡Šå™¨åœ¨è½¬æ¢ä¹‹å‰ä¼šåˆ¤æ–­ä»£ç æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´æ˜¯å¦ä¸ä¸Šä¸€æ¬¡è½¬æ¢åçš„å­—èŠ‚ç pycæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ä¸€è‡´ï¼Œè‹¥ä¸ä¸€è‡´æ‰ä¼šé‡æ–°è½¬æ¢ã€‚</li>
<li>ç”±äºä¸ç”¨å…³å¿ƒç¨‹åºçš„ç¼–è¯‘å’Œåº“çš„é“¾æ¥ç­‰é—®é¢˜ï¼Œå¼€å‘çš„å·¥ä½œä¹Ÿå°±æ›´åŠ è½»æ¾å•¦ã€‚</li>
<li>pythonä»£ç ä¸æœºå™¨åº•å±‚æ›´è¿œäº†ï¼Œpythonç¨‹åºæ›´åŠ æ˜“äºç§»æ¤ï¼ŒåŸºæœ¬ä¸Šæ— éœ€æ”¹åŠ¨å°±èƒ½åœ¨å¤šå¹³å°ä¸Šè¿è¡Œã€‚</li>
</ol>
<p>â€‹      åœ¨å…·ä½“è®¡ç®—æœºä¸Šå®ç°ä¸€ç§è¯­è¨€ï¼Œé¦–å…ˆè¦ç¡®å®šçš„æ˜¯è¡¨ç¤ºè¯¥è¯­è¨€è¯­ä¹‰è§£é‡Šçš„è™šæ‹Ÿè®¡ç®—æœºï¼Œä¸€ä¸ªå…³é”®çš„é—®é¢˜æ˜¯ç¨‹åºæ‰§è¡Œæ—¶çš„åŸºæœ¬è¡¨ç¤ºæ˜¯å®é™…è®¡ç®—æœºä¸Šçš„æœºå™¨è¯­è¨€è¿˜æ˜¯è™šæ‹Ÿæœºçš„æœºå™¨è¯­è¨€ã€‚è¿™ä¸ªé—®é¢˜å†³å®šäº†è¯­è¨€çš„å®ç°ã€‚æ ¹æ®è¿™ä¸ªé—®é¢˜çš„å›ç­”ï¼Œå¯ä»¥å°†ç¨‹åºè®¾è®¡è¯­è¨€åˆ’åˆ†ä¸ºä¸¤å¤§ç±»ï¼šç¼–è¯‘å‹è¯­è¨€å’Œè§£é‡Šå‹è¯­è¨€ã€‚</p>
<ol>
<li>ç¼–è¯‘å®ç°çš„è¯­è¨€ï¼Œå¦‚ï¼šCã€C++ã€Fortranã€Pascalã€Adaã€‚ç”±ç¼–è¯‘å‹è¯­è¨€ç¼–å†™çš„æºç¨‹åºéœ€è¦ç»è¿‡ç¼–è¯‘,æ±‡ç¼–å’Œé“¾æ¥æ‰èƒ½è¾“å‡ºç›®æ ‡ä»£ç ï¼Œç„¶åç”±æœºå™¨æ‰§è¡Œç›®æ ‡ä»£ç ã€‚ç›®æ ‡ä»£ç æ˜¯æœ‰æœºå™¨æŒ‡ä»¤ç»„æˆï¼Œä¸èƒ½ç‹¬ç«‹è¿è¡Œï¼Œå› ä¸ºæºç¨‹åºä¸­å¯èƒ½ä½¿ç”¨äº†ä¸€äº›æ±‡ç¼–ç¨‹åºä¸èƒ½è§£é‡Šå¼•ç”¨çš„åº“å‡½æ•°ï¼Œè€Œåº“å‡½æ•°åˆä¸åœ¨æºç¨‹åºä¸­ï¼Œæ­¤æ—¶è¿˜éœ€è¦é“¾æ¥ç¨‹åºå®Œæˆå¤–éƒ¨å¼•ç”¨å’Œç›®æ ‡æ¨¡æ¿è°ƒç”¨çš„é“¾æ¥ä»»åŠ¡ï¼Œæœ€åæ‰èƒ½è¾“å‡ºå¯æ‰§è¡Œä»£ç ã€‚</li>
<li>è§£é‡Šå‹è¯­è¨€ï¼Œè§£é‡Šå™¨ä¸äº§ç”Ÿç›®æ ‡æœºå™¨ä»£ç ï¼Œè€Œæ˜¯äº§ç”Ÿä¸­é—´ä»£ç ï¼Œè¿™ç§ä¸­é—´ä»£ç ä¸æœºå™¨ä»£ç ä¸åŒï¼Œä¸­é—´ä»£ç çš„è§£é‡Šæ˜¯ç”±è½¯ä»¶æ”¯æŒçš„ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨åœ¨ç¡¬ä»¶ä¸Šã€‚è¯¥è½¯ä»¶è§£é‡Šå™¨é€šå¸¸ä¼šå¯¼è‡´æ‰§è¡Œæ•ˆç‡è¾ƒä½ï¼Œç”¨è§£é‡Šå‹è¯­è¨€ç¼–å†™çš„ç¨‹åºæ˜¯ç”±å¦ä¸€ä¸ªå¯ä»¥ç†è§£ä¸­é—´ä»£ç çš„è§£é‡Šç¨‹åºæ‰§è¡Œçš„ã€‚å’Œç¼–è¯‘çš„ç¨‹åºä¸åŒçš„æ˜¯, è§£é‡Šç¨‹åºçš„ä»»åŠ¡æ˜¯é€ä¸€å°†æºä»£ç çš„è¯­å¥è§£é‡Šæˆå¯æ‰§è¡Œçš„æœºå™¨æŒ‡ä»¤ï¼Œä¸éœ€è¦å°†æºç¨‹åºç¿»è¯‘æˆç›®æ ‡ä»£ç å†æ‰§è¡Œã€‚å¯¹äºè§£é‡Šå‹è¯­è¨€ï¼Œéœ€è¦ä¸€ä¸ªä¸“é—¨çš„è§£é‡Šå™¨æ¥æ‰§è¡Œè¯¥ç¨‹åºï¼Œæ¯æ¡è¯­å¥åªæœ‰åœ¨æ‰§è¡Œæ˜¯æ‰èƒ½è¢«ç¿»è¯‘ï¼Œè¿™ç§è§£é‡Šå‹è¯­è¨€æ¯æ‰§è¡Œä¸€æ¬¡å°±ç¿»è¯‘ä¸€æ¬¡ï¼Œå› è€Œæ•ˆç‡ä½ä¸‹ã€‚</li>
<li>Javaè§£é‡Šå™¨ï¼Œjavaå¾ˆç‰¹æ®Šï¼Œjavaæ˜¯éœ€è¦ç¼–è¯‘çš„ï¼Œä½†æ˜¯æ²¡æœ‰ç›´æ¥ç¼–è¯‘æˆæœºå™¨è¯­è¨€ï¼Œè€Œæ˜¯ç¼–è¯‘æˆå­—èŠ‚ç ï¼Œç„¶ååœ¨Javaè™šæ‹Ÿæœºä¸Šç”¨è§£é‡Šçš„æ–¹å¼æ‰§è¡Œå­—èŠ‚ç ã€‚Pythonä¹Ÿä½¿ç”¨äº†ç±»ä¼¼çš„æ–¹å¼ï¼Œå…ˆå°†pythonç¼–è¯‘æˆpythonå­—èŠ‚ç ï¼Œç„¶åç”±ä¸€ä¸ªä¸“é—¨çš„pythonå­—èŠ‚ç è§£é‡Šå™¨è´Ÿè´£è§£é‡Šæ‰§è¡Œå­—èŠ‚ç ã€‚</li>
<li>pythonæ˜¯ä¸€é—¨è§£é‡Šè¯­è¨€ï¼Œä½†æ˜¯å‡ºäºæ•ˆç‡çš„è€ƒè™‘ï¼Œæä¾›äº†ä¸€ç§ç¼–è¯‘çš„æ–¹æ³•ã€‚ç¼–è¯‘ä¹‹åå°±å¾—åˆ°pycæ–‡ä»¶ï¼Œå­˜å‚¨äº†å­—èŠ‚ç ã€‚pythonè¿™ç‚¹å’Œjavaå¾ˆç±»ä¼¼ï¼Œä½†æ˜¯javaä¸pythonä¸åŒçš„æ˜¯ï¼Œpythonæ˜¯ä¸€ä¸ªè§£é‡Šå‹çš„è¯­è¨€ï¼Œæ‰€ä»¥ç¼–è¯‘å­—èŠ‚ç ä¸æ˜¯ä¸€ä¸ªå¼ºåˆ¶çš„æ“ä½œï¼Œäº‹å®ä¸Šï¼Œç¼–è¯‘æ˜¯ä¸€ä¸ªè‡ªåŠ¨çš„è¿‡ç¨‹ï¼Œä¸€èˆ¬ä¸ä¼šåœ¨æ„å®ƒçš„å­˜åœ¨ã€‚ç¼–è¯‘æˆå­—èŠ‚ç å¯ä»¥èŠ‚çœåŠ è½½æ¨¡å—çš„æ—¶é—´ï¼Œæé«˜æ•ˆç‡ã€‚</li>
<li>é™¤äº†æ•ˆç‡ä¹‹å¤–ï¼Œå­—èŠ‚ç çš„å½¢å¼ä¹Ÿå¢åŠ äº†åå‘å·¥ç¨‹çš„éš¾åº¦ï¼Œå¯ä»¥ä¿æŠ¤æºä»£ç ã€‚è¿™ä¸ªåªæ˜¯ä¸€å®šç¨‹åº¦ä¸Šçš„ä¿æŠ¤ï¼Œåç¼–è¯‘è¿˜æ˜¯å¯ä»¥çš„ã€‚</li>
</ol>
<a id="more"></a>
<h1 id="2-pythonå†…éƒ¨æ‰§è¡Œè¿‡ç¨‹"><a href="#2-pythonå†…éƒ¨æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="2. pythonå†…éƒ¨æ‰§è¡Œè¿‡ç¨‹"></a>2. pythonå†…éƒ¨æ‰§è¡Œè¿‡ç¨‹</h1><h2 id="2-1-ç¼–è¯‘è¿‡ç¨‹æ¦‚è¿°"><a href="#2-1-ç¼–è¯‘è¿‡ç¨‹æ¦‚è¿°" class="headerlink" title="2.1. ç¼–è¯‘è¿‡ç¨‹æ¦‚è¿°"></a>2.1. ç¼–è¯‘è¿‡ç¨‹æ¦‚è¿°</h2><p>ã€€ã€€å½“æˆ‘ä»¬æ‰§è¡ŒPythonä»£ç çš„æ—¶å€™ï¼Œåœ¨Pythonè§£é‡Šå™¨ç”¨å››ä¸ªè¿‡ç¨‹â€œæ‹†è§£â€æˆ‘ä»¬çš„ä»£ç ï¼Œæœ€ç»ˆè¢«CPUæ‰§è¡Œè¿”å›ç»™ç”¨æˆ·ã€‚</p>
<p>ã€€ã€€é¦–å…ˆå½“ç”¨æˆ·é”®å…¥ä»£ç äº¤ç»™Pythonå¤„ç†çš„æ—¶å€™ä¼šå…ˆè¿›è¡Œè¯æ³•åˆ†æï¼Œä¾‹å¦‚ç”¨æˆ·é”®å…¥å…³é”®å­—æˆ–è€…å½“è¾“å…¥å…³é”®å­—æœ‰è¯¯æ—¶ï¼Œéƒ½ä¼šè¢«è¯æ³•åˆ†ææ‰€è§¦å‘ï¼Œä¸æ­£ç¡®çš„ä»£ç å°†ä¸ä¼šè¢«æ‰§è¡Œã€‚</p>
<p>ã€€ã€€ä¸‹ä¸€æ­¥Pythonä¼šè¿›è¡Œè¯­æ³•åˆ†æï¼Œä¾‹å¦‚å½“â€for i in test:â€ä¸­ï¼Œteståé¢çš„å†’å·å¦‚æœè¢«å†™ä¸ºå…¶ä»–ç¬¦å·ï¼Œä»£ç ä¾æ—§ä¸ä¼šè¢«æ‰§è¡Œã€‚</p>
<p>ã€€ã€€ä¸‹é¢è¿›å…¥æœ€å…³é”®çš„è¿‡ç¨‹ï¼Œåœ¨æ‰§è¡ŒPythonå‰ï¼ŒPythonä¼šç”Ÿæˆ.pycæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯å­—èŠ‚ç ï¼Œå¦‚æœæˆ‘ä»¬ä¸å°å¿ƒä¿®æ”¹äº†å­—èŠ‚ç ï¼ŒPythonä¸‹æ¬¡é‡æ–°ç¼–è¯‘è¯¥ç¨‹åºæ—¶ä¼šå’Œå…¶ä¸Šæ¬¡ç”Ÿæˆçš„å­—èŠ‚ç æ–‡ä»¶è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸åŒ¹é…åˆ™ä¼šå°†è¢«ä¿®æ”¹è¿‡çš„å­—èŠ‚ç æ–‡ä»¶è¿›è¡Œè¦†ç›–ï¼Œä»¥ç¡®ä¿æ¯æ¬¡ç¼–è¯‘åå­—èŠ‚ç çš„å‡†ç¡®æ€§ã€‚</p>
<p>ã€€ã€€é‚£ä¹ˆä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿå­—èŠ‚ç åœ¨Pythonè™šæ‹Ÿæœºç¨‹åºé‡Œå¯¹åº”çš„æ˜¯PyCodeObjectå¯¹è±¡ã€‚.pycæ–‡ä»¶æ˜¯å­—èŠ‚ç åœ¨ç£ç›˜ä¸Šçš„è¡¨ç°å½¢å¼ã€‚ç®€å•æ¥è¯´å°±æ˜¯åœ¨ç¼–è¯‘ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆä¼šå°†ä»£ç ä¸­çš„å‡½æ•°ã€ç±»ç­‰å¯¹è±¡åˆ†ç±»å¤„ç†ï¼Œç„¶åç”Ÿæˆå­—èŠ‚ç æ–‡ä»¶ã€‚æœ‰äº†å­—èŠ‚ç æ–‡ä»¶ï¼ŒCPUå¯ä»¥ç›´æ¥è¯†åˆ«å­—èŠ‚ç æ–‡ä»¶è¿›è¡Œå¤„ç†ï¼Œæ¥ç€Pythonå°±å¯æ‰§è¡Œäº†ã€‚</p>
<h2 id="2-2-è¿‡ç¨‹å›¾è§£"><a href="#2-2-è¿‡ç¨‹å›¾è§£" class="headerlink" title="2.2. è¿‡ç¨‹å›¾è§£"></a>2.2. è¿‡ç¨‹å›¾è§£</h2><p><img src="/images/blog/2021/PVM.jpg" alt></p>
<h2 id="2-3-ç¼–è¯‘å­—èŠ‚ç "><a href="#2-3-ç¼–è¯‘å­—èŠ‚ç " class="headerlink" title="2.3. ç¼–è¯‘å­—èŠ‚ç "></a>2.3. ç¼–è¯‘å­—èŠ‚ç </h2><p>ã€€ã€€Pythonä¸­æœ‰ä¸€ä¸ªå†…ç½®å‡½æ•°compile()ï¼Œå¯ä»¥å°†æºæ–‡ä»¶ç¼–è¯‘æˆcodeobjectï¼Œé¦–å…ˆçœ‹è¿™ä¸ªå‡½æ•°çš„è¯´æ˜ï¼š</p>
<p>ã€€ã€€compile(â€¦) compile(source, filename, mode[, flags[, dont_inherit]]) -&gt; code object</p>
<p>ã€€ã€€å‚æ•°1ï¼šæºæ–‡ä»¶çš„å†…å®¹å­—ç¬¦ä¸²</p>
<p>ã€€ã€€å‚æ•°2ï¼šæºæ–‡ä»¶åç§°</p>
<p>ã€€ã€€å‚æ•°3ï¼šexec-ç¼–è¯‘moduleï¼Œsingle-ç¼–è¯‘ä¸€ä¸ªå£°æ˜ï¼Œeval-ç¼–è¯‘ä¸€ä¸ªè¡¨è¾¾å¼ ä¸€èˆ¬ä½¿ç”¨å‰ä¸‰ä¸ªå‚æ•°å°±å¤Ÿäº†</p>
<p>ã€€ã€€ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#src_file.py</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#some function</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(d=<span class="number">0</span>)</span>:</span></span><br><span class="line"></span><br><span class="line">    c=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"hello"</span></span><br><span class="line"></span><br><span class="line">a=<span class="number">9</span></span><br><span class="line"></span><br><span class="line">b=<span class="number">8</span></span><br><span class="line"></span><br><span class="line">f()</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=open(<span class="string">'src_file.py'</span>,<span class="string">'r'</span>).read()    <span class="comment">#å‘½ä»¤è¡Œæ¨¡å¼ä¸­æ‰“å¼€æºæ–‡ä»¶è¿›è¡Œç¼–è¯‘</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>co=compile(a,<span class="string">'src_file'</span>,<span class="string">'exec'</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(co)</span><br><span class="line"></span><br><span class="line">&lt;type <span class="string">'code'</span>&gt;    <span class="comment">#ç¼–è¯‘å‡ºäº†codeobjectå¯¹è±¡</span></span><br></pre></td></tr></table></figure>
<h2 id="2-4-codeobjectå¯¹è±¡çš„å±æ€§"><a href="#2-4-codeobjectå¯¹è±¡çš„å±æ€§" class="headerlink" title="2.4. codeobjectå¯¹è±¡çš„å±æ€§"></a>2.4. codeobjectå¯¹è±¡çš„å±æ€§</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; <span class="built_in">print</span> co.co_names    <span class="comment">#æ‰€æœ‰çš„ç¬¦å·åç§°</span></span><br><span class="line">(<span class="string">'f'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>)</span><br><span class="line"> </span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span> co.co_name    <span class="comment">#æ¨¡å—åã€å‡½æ•°åã€ç±»å</span></span><br><span class="line">&lt;module&gt;</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span> co.co_consts    <span class="comment">#å¸¸é‡é›†åˆã€å‡½æ•°få’Œä¸¤ä¸ªintå¸¸é‡a,bï¼Œd</span></span><br><span class="line">(0, &lt;code object f at 0xb7273b18, file <span class="string">"src_file"</span>, line 2&gt;, 9, 8, None)</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span> co.co_consts[1].co_varnames    <span class="comment">#å¯ä»¥çœ‹åˆ°få‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªcodeobject,æ‰“å°fä¸­çš„å±€éƒ¨å˜é‡</span></span><br><span class="line">(<span class="string">'c'</span>,)</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span> co.co_code    <span class="comment">#å­—èŠ‚ç æŒ‡ä»¤</span></span><br><span class="line">dZdZdZedS</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span> co.co_consts[1].co_firstlineno    <span class="comment">#ä»£ç å—åœ¨æ–‡ä»¶ä¸­çš„èµ·å§‹è¡Œå·</span></span><br><span class="line">2</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span> co.co_stacksize    <span class="comment">#ä»£ç æ ˆå¤§å°</span></span><br><span class="line">2</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span> co.co_filename    <span class="comment">#æ–‡ä»¶å</span></span><br><span class="line">src_file    <span class="comment">#æ¨¡å—åã€å‡½æ•°åã€ç±»å</span></span><br></pre></td></tr></table></figure>
<p>codeobjectçš„co_codeä»£è¡¨äº†å­—èŠ‚ç ï¼Œè¿™ä¸ªå­—èŠ‚ç æœ‰ä»€ä¹ˆå«ä¹‰ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨disæ¨¡å—è¿›è¡Œpythonçš„åç¼–è¯‘ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> dis</span><br><span class="line">dis.dis(co)</span><br></pre></td></tr></table></figure>
<p>ã€€ä»åç¼–è¯‘çš„ç»“æœæ¥çœ‹ï¼Œpythonå­—èŠ‚ç å…¶å®æ˜¯æ¨¡ä»¿çš„x86çš„æ±‡ç¼–ï¼Œå°†ä»£ç ç¼–è¯‘æˆä¸€æ¡ä¸€æ¡çš„æŒ‡ä»¤äº¤ç»™ä¸€ä¸ªè™šæ‹Ÿçš„cpuå»æ‰§è¡Œã€‚</p>
<ul>
<li>ç¬¬ä¸€åˆ—ï¼šè¡Œå·</li>
<li>ç¬¬äºŒåˆ—ï¼šæŒ‡ä»¤åœ¨ä»£ç å—ä¸­çš„åç§»é‡</li>
<li>ç¬¬ä¸‰åˆ—ï¼šæŒ‡ä»¤</li>
<li>ç¬¬å››åˆ—ï¼šæ“ä½œæ•°</li>
<li>ç¬¬äº”åˆ—ï¼šæ“ä½œæ•°è¯´æ˜</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> dis</span><br><span class="line"></span><br><span class="line">dis.dis(co)</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; output</span><br><span class="line"></span><br><span class="line"> <span class="number">2</span>        <span class="number">0</span> LOAD_CONST               <span class="number">0</span> (<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">          <span class="number">3</span> LOAD_CONST               <span class="number">1</span> (&lt;code object f at <span class="number">0xb7273b18</span>, file <span class="string">"src_file"</span>, line <span class="number">2</span>&gt;)</span><br><span class="line"></span><br><span class="line">          <span class="number">6</span> MAKE_FUNCTION            <span class="number">1</span></span><br><span class="line"></span><br><span class="line">          <span class="number">9</span> STORE_NAME               <span class="number">0</span> (f)</span><br><span class="line"></span><br><span class="line"> <span class="number">5</span>        <span class="number">12</span> LOAD_CONST              <span class="number">2</span> (<span class="number">9</span>)</span><br><span class="line"></span><br><span class="line">          <span class="number">15</span> STORE_NAME              <span class="number">1</span> (a)</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> <span class="number">6</span>        <span class="number">18</span> LOAD_CONST              <span class="number">3</span> (<span class="number">8</span>)</span><br><span class="line"></span><br><span class="line">          <span class="number">21</span> STORE_NAME              <span class="number">2</span> (b)</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> <span class="number">7</span>        <span class="number">24</span> LOAD_NAME               <span class="number">0</span> (f)</span><br><span class="line"></span><br><span class="line">          <span class="number">27</span> CALL_FUNCTION           <span class="number">0</span></span><br><span class="line"></span><br><span class="line">          <span class="number">30</span> POP_TOP            </span><br><span class="line"></span><br><span class="line">          <span class="number">31</span> LOAD_CONST              <span class="number">4</span> (None)</span><br><span class="line"></span><br><span class="line">          <span class="number">34</span> RETURN_VALUE</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>PVM</tag>
        <tag>æ‰§è¡ŒåŸç†</tag>
        <tag>ç¼–è¯‘</tag>
        <tag>è§£é‡Š</tag>
      </tags>
  </entry>
  <entry>
    <title>condaæ·»åŠ æº</title>
    <url>/2021/03/15/conda%E6%B7%BB%E5%8A%A0%E6%BA%90/</url>
    <content><![CDATA[<h1 id="1-é€šè¿‡å‘½ä»¤è¡Œ"><a href="#1-é€šè¿‡å‘½ä»¤è¡Œ" class="headerlink" title="1. é€šè¿‡å‘½ä»¤è¡Œ"></a>1. é€šè¿‡å‘½ä»¤è¡Œ</h1><p>æ·»åŠ æ¸…åæºï¼Œå‘½ä»¤è¡Œä¸­ç›´æ¥è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</span><br><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/</span><br><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forgeÂ </span><br><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/msys2/</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æœç´¢æ—¶æ˜¾ç¤ºé€šé“åœ°å€</span></span><br><span class="line">conda config --<span class="built_in">set</span> show_channel_urls yes</span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¿˜éœ€è¦<strong>pytorch</strong>ï¼Œå°±æ·»åŠ pytorché•œåƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/</span><br></pre></td></tr></table></figure>
<p>æ·»åŠ ä¸­ç§‘å¤§æºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/free/</span><br><span class="line">conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/main/</span><br><span class="line">conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/conda-forge/</span><br><span class="line">conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/msys2/</span><br><span class="line">conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/bioconda/</span><br><span class="line">conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/menpo/</span><br><span class="line"> </span><br><span class="line">conda config --<span class="built_in">set</span> show_channel_urls yes</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="2-é€šè¿‡é…ç½®æ–‡ä»¶"><a href="#2-é€šè¿‡é…ç½®æ–‡ä»¶" class="headerlink" title="2. é€šè¿‡é…ç½®æ–‡ä»¶"></a>2. é€šè¿‡é…ç½®æ–‡ä»¶</h1><p>åœ¨Linuxç³»ç»Ÿä¸­ï¼Œå¯ä»¥ç›´æ¥å°†ä»¥ä¸‹é…ç½®å†™å…¥<code>~/.condarc</code>ä¸­ï¼š</p>
<p><strong>ä½¿ç”¨<a href="https://mirrors.bfsu.edu.cn/help/anaconda/" target="_blank" rel="noopener">BFSUçš„é•œåƒï¼š</a></strong></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">channels:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">defaults</span></span><br><span class="line"><span class="attr">show_channel_urls:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">default_channels:</span></span><br><span class="line"><span class="attr">  - https:</span><span class="string">//mirrors.bfsu.edu.cn/anaconda/pkgs/main</span></span><br><span class="line"><span class="attr">  - https:</span><span class="string">//mirrors.bfsu.edu.cn/anaconda/pkgs/r</span></span><br><span class="line"><span class="attr">  - https:</span><span class="string">//mirrors.bfsu.edu.cn/anaconda/pkgs/msys2</span></span><br><span class="line"><span class="attr">custom_channels:</span></span><br><span class="line"><span class="attr">  conda-forge:</span> <span class="attr">https://mirrors.bfsu.edu.cn/anaconda/cloud</span></span><br><span class="line"><span class="attr">  msys2:</span> <span class="attr">https://mirrors.bfsu.edu.cn/anaconda/cloud</span></span><br><span class="line"><span class="attr">  bioconda:</span> <span class="attr">https://mirrors.bfsu.edu.cn/anaconda/cloud</span></span><br><span class="line"><span class="attr">  menpo:</span> <span class="attr">https://mirrors.bfsu.edu.cn/anaconda/cloud</span></span><br><span class="line"><span class="attr">  pytorch:</span> <span class="attr">https://mirrors.bfsu.edu.cn/anaconda/cloud</span></span><br><span class="line"><span class="attr">  simpleitk:</span> <span class="attr">https://mirrors.bfsu.edu.cn/anaconda/cloud</span></span><br></pre></td></tr></table></figure>
<h1 id="3-åˆ æº"><a href="#3-åˆ æº" class="headerlink" title="3. åˆ æº"></a>3. åˆ æº</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda config --remove-key channels</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Others</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>conda</tag>
        <tag>tsinghua</tag>
      </tags>
  </entry>
  <entry>
    <title>C++äºŒç»´æ•°ç»„ä¼ å‚</title>
    <url>/2021/03/14/C-%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84%E4%BC%A0%E5%8F%82/</url>
    <content><![CDATA[<p>åœ¨LeetCodeä¸Šï¼Œæ€»æ˜¯éœ€è¦ç”¨åˆ°å¯¹ä¸å›ºå®šç»´åº¦çš„äºŒç»´æ•°ç»„ä¼ å‚ï¼Œä¼ å‚æœ‰å¤šç§æ–¹å¼ï¼Œè¿™é‡Œè¿›è¡Œä¸€ä¸‹æ¢ç©¶å’Œå¤ä¹ ã€‚</p>
<h1 id="1-ä¸€çº§æŒ‡é’ˆ"><a href="#1-ä¸€çº§æŒ‡é’ˆ" class="headerlink" title="1. ä¸€çº§æŒ‡é’ˆ"></a>1. ä¸€çº§æŒ‡é’ˆ</h1><p>é«˜ç»´æ•°ç»„åœ¨æ ˆä¸­å­˜æ”¾æ—¶å†…å­˜æ˜¯è¿ç»­çš„ï¼Œä¹Ÿå¯ä»¥çœ‹ä½œä¸€ç»´æ•°ç»„ï¼Œå¹¶æ‰‹åŠ¨è®¡ç®—ç´¢å¼•å¯¹åº”çš„åœ°å€ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(<span class="keyword">int</span> *dp, <span class="keyword">int</span> m, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;++i) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;++j) &#123;</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; *(dp + i * n + j) &lt;&lt; <span class="string">' '</span>; </span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> m, n;</span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; m &gt;&gt; n;</span><br><span class="line">	<span class="keyword">int</span> dp[m][n];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;++i) <span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;++j)</span><br><span class="line">			dp[i][j] = i + j;</span><br><span class="line">			 </span><br><span class="line">	func((<span class="keyword">int</span>*)dp, m, n);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">0 1 2 </span><br><span class="line">1 2 3</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="2-äºŒçº§æŒ‡é’ˆ"><a href="#2-äºŒçº§æŒ‡é’ˆ" class="headerlink" title="2. äºŒçº§æŒ‡é’ˆ"></a>2. äºŒçº§æŒ‡é’ˆ</h1><p>ä½¿ç”¨<strong>new</strong>åœ¨å †ä¸­ç”³è¯·ç©ºé—´ï¼Œç„¶åä¼ å‚ã€‚å³æŒ‡é’ˆçš„æŒ‡é’ˆã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(<span class="keyword">int</span> **dp, <span class="keyword">int</span> m, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;++i) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;++j) &#123;</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; dp[i][j] &lt;&lt; <span class="string">' '</span>; </span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> m, n;</span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; m &gt;&gt; n;</span><br><span class="line">	<span class="keyword">int</span> **dp = <span class="keyword">new</span> <span class="keyword">int</span>*[m];  <span class="comment">// åœ¨å †ä¸­ç”³è¯·ç©ºé—´ </span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;++i)</span><br><span class="line">		dp[i] = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">		</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;++i) <span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;++j)</span><br><span class="line">			dp[i][j] = i + j;</span><br><span class="line">			 </span><br><span class="line">	func(dp, m, n);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">0 1 2 </span><br><span class="line">1 2 3 </span><br><span class="line">2 3 4</span><br></pre></td></tr></table></figure>
<p>è¿™ç§æ–¹å¼ç”³è¯·çš„å†…å­˜ä¸åœ¨æ ˆä¸­ï¼Œè€Œæ˜¯åœ¨å †ä¸­ã€‚è€Œä¸”ï¼Œ<strong><em>ç”±äºå¤šæ¬¡ç”³è¯·äº†å†…å­˜ï¼Œä¸åŒçš„è¡Œé—´å†…å­˜ç©ºé—´æ˜¯ä¸è¿ç»­çš„</em></strong>ã€‚</p>
]]></content>
      <categories>
        <category>Algorithms</category>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>C++</tag>
        <tag>LeetCode</tag>
        <tag>Array</tag>
      </tags>
  </entry>
  <entry>
    <title>pandas.merge()å‡½æ•°</title>
    <url>/2021/03/13/pandas-merge-%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<p>åœ¨ä½¿ç”¨pandasæ—¶ï¼Œåˆå¹¶ä¸¤ä¸ªDataFrameï¼Œå¯ä»¥é‡‡ç”¨ä¸åŒçš„è¿æ¥æ–¹æ³•ï¼Œç±»ä¼¼äºæ•°æ®åº“ä¸­è¡¨æ ¼çš„joinæ“ä½œï¼Œå¯¹ä¸åŒçš„æ“ä½œè¿›è¡Œå®éªŒå°è¯•ã€‚</p>
<h1 id="å»ºè¡¨"><a href="#å»ºè¡¨" class="headerlink" title="å»ºè¡¨"></a>å»ºè¡¨</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; import pandas</span><br><span class="line">&gt;&gt;&gt; sheet1 = pandas.DataFrame(&#123;<span class="string">"ID"</span>:[<span class="string">"A01"</span>, <span class="string">"B01"</span>, <span class="string">"A02"</span>], <span class="string">"name"</span>:[<span class="string">"Bob"</span>, <span class="string">"Mary"</span>, <span class="string">"Bob"</span>], <span class="string">"age"</span>: [20, 22, 35]&#125;)</span><br><span class="line">&gt;&gt;&gt; sheet1</span><br><span class="line">    ID  name  age</span><br><span class="line">0  A01   Bob   20</span><br><span class="line">1  B01  Mary   22</span><br><span class="line">2  A02   Bob   35</span><br><span class="line">&gt;&gt;&gt; sheet2 = pandas.DataFrame(&#123;<span class="string">"name"</span>: [<span class="string">"Bob"</span>, <span class="string">"Mary"</span>, <span class="string">"Jack"</span>], <span class="string">"country"</span>: [<span class="string">"US"</span>, <span class="string">"Singapore"</span>, <span class="string">"China"</span>]&#125;)</span><br><span class="line">&gt;&gt;&gt; sheet2</span><br><span class="line">   name    country</span><br><span class="line">0   Bob         US</span><br><span class="line">1  Mary  Singapore</span><br><span class="line">2  Jack      China</span><br></pre></td></tr></table></figure>
<h1 id="1-left"><a href="#1-left" class="headerlink" title="1. left"></a>1. left</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sheet1.merge(sheet2, how=<span class="string">"left"</span>, on=<span class="string">"name"</span>)</span><br></pre></td></tr></table></figure>
<p>ç»“æœä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">    ID  name  age    country</span><br><span class="line">0  A01   Bob   20         US</span><br><span class="line">1  B01  Mary   22  Singapore</span><br><span class="line">2  A02   Bob   35         US</span><br></pre></td></tr></table></figure>
<p>æŒ‰ç…§å·¦è¡¨çš„â€nameâ€å°†ä¸¤ä¸ªsheetçš„å±æ€§åˆå¹¶ã€‚</p>
<a id="more"></a>
<h1 id="2-right"><a href="#2-right" class="headerlink" title="2. right"></a>2. right</h1><p>åŒæ ·æ˜¯æŒ‰ç…§â€nameâ€åˆå¹¶ï¼Œä½†æ˜¯å¦‚æœæŒ‡å®šåˆå¹¶æ–¹å¼ä¸ºâ€rightâ€çš„è¯ï¼Œåˆ™ä¼šä¿ç•™å³ä¾§çš„æ‰€æœ‰â€œnameâ€ï¼Œå¦‚æœä¸€ä¸ªâ€nameâ€å¯ä»¥åŒ¹é…åˆ°å¤šä¸ªå·¦è¡¨ä¸­è®°å½•ï¼Œåˆ™åˆå¹¶åå¯¹åº”åŒæ ·æ•°é‡çš„å¤šä¸ªè®°å½•ã€‚å¯¹äºæ²¡æœ‰åŒ¹é…çš„â€nameâ€å€¼ï¼Œè¡¥â€NaNâ€</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sheet1.merge(sheet2, how=<span class="string">"right"</span>, on=<span class="string">"name"</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">    ID  name   age    country</span><br><span class="line">0  A01   Bob  20.0         US</span><br><span class="line">1  A02   Bob  35.0         US</span><br><span class="line">2  B01  Mary  22.0  Singapore</span><br><span class="line">3  NaN  Jack   NaN      China</span><br></pre></td></tr></table></figure>
<h1 id="3-inner"><a href="#3-inner" class="headerlink" title="3. inner"></a>3. inner</h1><p>ä½¿ç”¨inneråˆå¹¶ï¼Œæ˜¯å–ä¸¤å¼ è¡¨çš„å…¬å…±éƒ¨åˆ†ï¼Œå³å–äº¤é›†ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sheet1.merge(sheet2, how=<span class="string">"inner"</span>, on=<span class="string">"name"</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">    ID  name  age    country</span><br><span class="line">0  A01   Bob   20         US</span><br><span class="line">1  A02   Bob   35         US</span><br><span class="line">2  B01  Mary   22  Singapore</span><br></pre></td></tr></table></figure>
<p>ç”±äºåœ¨ç»™å‡ºçš„ä¾‹å­ä¸­ï¼Œå·¦è¡¨ä¸­çš„nameæœ‰â€Bobâ€ï¼Œâ€œMaryâ€ï¼Œå‡åœ¨å³è¡¨ä¸­ï¼Œæ‰€ä»¥åˆå¹¶ç»“æœä¸leftåˆå¹¶å®Œå…¨ç›¸åŒã€‚</p>
<h1 id="4-outer"><a href="#4-outer" class="headerlink" title="4. outer"></a>4. outer</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sheet1.merge(sheet2, how=<span class="string">"outer"</span>, on=<span class="string">"name"</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">    ID  name   age    country</span><br><span class="line">0  A01   Bob  20.0         US</span><br><span class="line">1  A02   Bob  35.0         US</span><br><span class="line">2  B01  Mary  22.0  Singapore</span><br><span class="line">3  NaN  Jack   NaN      China</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨outeråˆå¹¶ï¼Œæ˜¯å–ä¸¤ä¸ªè¡¨çš„keyçš„å¹¶é›†ï¼Œåœ¨ä¸¾çš„ä¾‹å­é‡Œï¼Œç»“æœä¸rightåˆå¹¶å®Œå…¨ç›¸åŒã€‚</p>
<h1 id="5-cross"><a href="#5-cross" class="headerlink" title="5. cross"></a>5. cross</h1><p>ç¬›å¡å°”ç§¯ï¼Œä¸å¸¸ä½¿ç”¨ã€‚</p>
]]></content>
      <categories>
        <category>Others</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>pandas</tag>
        <tag>merge</tag>
        <tag>DataFrame</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒåˆ†ç±»ä¸­softmaxå¯¹æ¯”sigmoid</title>
    <url>/2021/03/12/%E4%BA%8C%E5%88%86%E7%B1%BB%E4%B8%ADsoftmax%E5%AF%B9%E6%AF%94sigmoid/</url>
    <content><![CDATA[<p>é¢˜å¤–è¯ï¼šåœ¨Pycharmä¸­<code>Ctrl+å·¦é”®</code>å°±å¯ä»¥è·³è½¬åˆ°æºç ï¼ç”¨äº†è¿™ä¹ˆå¤šå¹´ç«Ÿç„¶éƒ½ä¸çŸ¥é“ï¼ğŸ˜“</p>
<blockquote>
<p>æœ¬æ–‡å¼•ç”¨è‡ªï¼š<a href="https://www.aiuai.cn/aifarm679.html" target="_blank" rel="noopener">https://www.aiuai.cn/aifarm679.html</a></p>
</blockquote>
<h1 id="1-ç†è®ºåˆ†æ"><a href="#1-ç†è®ºåˆ†æ" class="headerlink" title="1. ç†è®ºåˆ†æ"></a>1. ç†è®ºåˆ†æ</h1><p>[1] Sigmoid</p>
<script type="math/tex; mode=display">
\begin{equation} \begin{cases} p(y=1|x) = \frac{1}{1 + e ^{-\theta ^ T x}} \\ p(y=0|x) = 1 - p(y=1|x) = \frac{e ^{-\theta ^ T x}}{1 + e ^{-\theta ^ T x}} \end{cases} \end{equation}</script><p>[2] Softmax</p>
<script type="math/tex; mode=display">
\begin{equation} \begin{cases} p(y=0|x) = \frac{e ^{\theta _0^T x} }{e ^{\theta _0^T x} + e ^{\theta _1^T x} } = \frac{e ^{(\theta _0^T - \theta _1^T)x} }{1 + e ^{(\theta _0^T - \theta _1^T) x} } \\ p(y=1|x) = 1 - p(y=0|x) \end{cases} \end{equation}</script><p>ä»¤ $\beta = -(\theta_0^T - \theta _1^T)$ï¼Œåˆ™æœ‰ï¼š</p>
<script type="math/tex; mode=display">\begin{equation} \begin{cases} p(y=1|x) = \frac{1}{1 + e ^{-\beta ^ T x}} \\ p(y=0|x) = \frac{e ^{-\beta ^ T x}}{1 + e ^{-\beta ^ T x}} \end{cases} \end{equation}</script><p>å¯è§ï¼Œæ­¤æ—¶ï¼ŒSoftmax ä¸ Sigmoid äºŒè€…ç†è®ºå…¬å¼çš„ç­‰ä»·æ€§.</p>
<h1 id="2-åŸºäºKerasçš„å®éªŒå¯¹æ¯”"><a href="#2-åŸºäºKerasçš„å®éªŒå¯¹æ¯”" class="headerlink" title="2. åŸºäºKerasçš„å®éªŒå¯¹æ¯”"></a>2. åŸºäºKerasçš„å®éªŒå¯¹æ¯”</h1><a id="more"></a>
<p>ä»¥çŒ«ç‹—åˆ†ç±»çš„æ•°æ®é›†ä¸ºä¾‹ï¼Œé‡‡ç”¨åœ¨ ImageNet ä¸Šé¢„è®­ç»ƒçš„ Xception æ¨¡å‹å¯¼å‡ºçš„ç‰¹å¾.( <strong>å¤åˆ¶äº</strong> <a href="https://gist.github.com/ypwhs/6905ebbda99d04621f9fc00417657ae2" target="_blank" rel="noopener">ypwhs/sigmoid_and_softmax.ipynb</a> ä¸­çš„ä»£ç . )</p>
<blockquote>
<p><a href="https://github.com/ypwhs/dogs_vs_cats/releases/download/gap/gap_Xception.h5" target="_blank" rel="noopener">gap_Xception.h5</a></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> h5py</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> keras.optimizers <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> keras.utils <span class="keyword">import</span> to_categorical</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">20180520</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#---------------------------------</span></span><br><span class="line"><span class="comment">#      åŠ è½½çŒ«ç‹—åˆ†ç±»çš„ç‰¹å¾æ•°æ®</span></span><br><span class="line"><span class="comment">#---------------------------------</span></span><br><span class="line"><span class="keyword">with</span> h5py.File(<span class="string">"gap_Xception.h5"</span>, <span class="string">'r'</span>) <span class="keyword">as</span> h:</span><br><span class="line">    X = np.array(h[<span class="string">'train'</span>])</span><br><span class="line">    y = np.array(h[<span class="string">'label'</span>])</span><br><span class="line"></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="number">0.2</span>)</span><br><span class="line"></span><br><span class="line">y_train_softmax = to_categorical(y_train) <span class="comment"># ont-hot</span></span><br><span class="line">y_test_softmax = to_categorical(y_test)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#---------------------------------</span></span><br><span class="line"><span class="comment">#           Softmax</span></span><br><span class="line"><span class="comment">#---------------------------------</span></span><br><span class="line"><span class="comment"># loss: Softmax Cross Entropy Loss</span></span><br><span class="line">input_tensor = Input(X.shape[<span class="number">1</span>:])</span><br><span class="line">x = input_tensor</span><br><span class="line">x = Dropout(<span class="number">0.5</span>)(x)</span><br><span class="line">softmax = Dense(<span class="number">2</span>, activation=<span class="string">'softmax'</span>)</span><br><span class="line">x = softmax(x)</span><br><span class="line">model = Model(input_tensor, x)</span><br><span class="line">model.compile(optimizer=SGD(<span class="number">1e-3</span>),  <span class="comment"># lr = 1e-3</span></span><br><span class="line">              loss=<span class="string">'categorical_crossentropy'</span>,</span><br><span class="line">              metrics=[<span class="string">'accuracy'</span>])</span><br><span class="line"></span><br><span class="line">softmax_weights, softmax_bias = softmax.get_weights()</span><br><span class="line"></span><br><span class="line">history_softmax = model.fit(X_train, y_train_softmax, batch_size=<span class="number">128</span>, epochs=<span class="number">5</span>,</span><br><span class="line">                            validation_data=(X_test, y_test_softmax))</span><br><span class="line"></span><br><span class="line"><span class="comment">#---------------------------------</span></span><br><span class="line"><span class="comment">#           Sigmoid</span></span><br><span class="line"><span class="comment">#---------------------------------</span></span><br><span class="line"><span class="comment"># loss: Binary(Sigmoid) Cross Entropy Loss</span></span><br><span class="line">np.random.seed(<span class="number">20180520</span>)</span><br><span class="line">input_tensor = Input(X.shape[<span class="number">1</span>:])</span><br><span class="line">x = input_tensor</span><br><span class="line">x = Dropout(<span class="number">0.5</span>)(x)</span><br><span class="line">sigmoid = Dense(<span class="number">1</span>, activation=<span class="string">'sigmoid'</span>)</span><br><span class="line">x = sigmoid(x)</span><br><span class="line">model = Model(input_tensor, x)</span><br><span class="line">model.compile(optimizer=SGD(<span class="number">2e-3</span>),  <span class="comment"># lr = 2e-3</span></span><br><span class="line">              loss=<span class="string">'binary_crossentropy'</span>,</span><br><span class="line">              metrics=[<span class="string">'accuracy'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Sigmoid æƒé‡åˆå§‹åŒ–ä¸º Softmax çš„æƒé‡è®¡ç®—å·®å€¼</span></span><br><span class="line"><span class="comment"># beta = sigmoid weights</span></span><br><span class="line">beta = -(softmax_weights[:,<span class="number">0</span>] - softmax_weights[:,<span class="number">1</span>]).reshape((<span class="number">-1</span>, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">sigmoid.set_weights([beta, np.zeros(<span class="number">1</span>)]) <span class="comment"># set beta to sigmoid weights</span></span><br><span class="line"></span><br><span class="line">history_sigmoid = model.fit(X_train, y_train, batch_size=<span class="number">128</span>, epochs=<span class="number">5</span>, validation_data=(X_test, y_test))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#---------------------------------</span></span><br><span class="line"><span class="comment">#           Sigmoid</span></span><br><span class="line"><span class="comment">#---------------------------------</span></span><br><span class="line">input_tensor = Input(X.shape[<span class="number">1</span>:])</span><br><span class="line">x = input_tensor</span><br><span class="line">x = Dropout(<span class="number">0.5</span>)(x)</span><br><span class="line">sigmoid = Dense(<span class="number">1</span>, activation=<span class="string">'sigmoid'</span>)</span><br><span class="line">x = sigmoid(x)</span><br><span class="line">model = Model(input_tensor, x)</span><br><span class="line">model.compile(optimizer=SGD(<span class="number">2e-3</span>),  <span class="comment"># lr = 2e-3</span></span><br><span class="line">              loss=<span class="string">'binary_crossentropy'</span>,</span><br><span class="line">              metrics=[<span class="string">'accuracy'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># random init Sigmoid weights</span></span><br><span class="line"><span class="comment"># éšæœºåˆå§‹åŒ– Sigmoid æƒé‡</span></span><br><span class="line">history_sigmoid_2 = model.fit(X_train, y_train, batch_size=<span class="number">128</span>, epochs=<span class="number">5</span>, validation_data=(X_test, y_test))</span><br></pre></td></tr></table></figure>
<p>è®­ç»ƒè¿‡ç¨‹è¾“å‡ºï¼š</p>
<p><strong>Softmax</strong>:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Train on 20000 samples, validate on 5000 samples</span><br><span class="line">Epoch 1/5</span><br><span class="line">20000/20000 [==============================] - 1s 68us/step - loss: 0.4711 - acc: 0.8535 - val_loss: 0.3765 - val_acc: 0.9642</span><br><span class="line">Epoch 2/5</span><br><span class="line">20000/20000 [==============================] - 0s 13us/step - loss: 0.3338 - acc: 0.9486 - val_loss: 0.2825 - val_acc: 0.9816</span><br><span class="line">Epoch 3/5</span><br><span class="line">20000/20000 [==============================] - 0s 11us/step - loss: 0.2594 - acc: 0.9726 - val_loss: 0.2279 - val_acc: 0.9858</span><br><span class="line">Epoch 4/5</span><br><span class="line">20000/20000 [==============================] - 0s 11us/step - loss: 0.2160 - acc: 0.9799 - val_loss: 0.1923 - val_acc: 0.9866</span><br><span class="line">Epoch 5/5</span><br><span class="line">20000/20000 [==============================] - 0s 13us/step - loss: 0.1860 - acc: 0.9825 - val_loss: 0.1677 - val_acc: 0.9868</span><br></pre></td></tr></table></figure>
<p><strong>Sigmoid With Softmax Weights</strong>:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Train on 20000 samples, validate on 5000 samples</span><br><span class="line">Epoch 1/5</span><br><span class="line">20000/20000 [==============================] - 0s 18us/step - loss: 0.4706 - acc: 0.8544 - val_loss: 0.3766 - val_acc: 0.9644</span><br><span class="line">Epoch 2/5</span><br><span class="line">20000/20000 [==============================] - 0s 12us/step - loss: 0.3346 - acc: 0.9476 - val_loss: 0.2824 - val_acc: 0.9816</span><br><span class="line">Epoch 3/5</span><br><span class="line">20000/20000 [==============================] - 0s 14us/step - loss: 0.2613 - acc: 0.9709 - val_loss: 0.2275 - val_acc: 0.9860</span><br><span class="line">Epoch 4/5</span><br><span class="line">20000/20000 [==============================] - 0s 14us/step - loss: 0.2151 - acc: 0.9789 - val_loss: 0.1923 - val_acc: 0.9868</span><br><span class="line">Epoch 5/5</span><br><span class="line">20000/20000 [==============================] - 0s 11us/step - loss: 0.1857 - acc: 0.9825 - val_loss: 0.1676 - val_acc: 0.9872</span><br></pre></td></tr></table></figure>
<p><strong>Sigmoid With Random Init Weight</strong>:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Train on 20000 samples, validate on 5000 samples</span><br><span class="line">Epoch 1/5</span><br><span class="line">20000/20000 [==============================] - 0s 18us/step - loss: 0.5690 - acc: 0.7607 - val_loss: 0.4415 - val_acc: 0.9718</span><br><span class="line">Epoch 2/5</span><br><span class="line">20000/20000 [==============================] - 0s 11us/step - loss: 0.3753 - acc: 0.9576 - val_loss: 0.3151 - val_acc: 0.9852</span><br><span class="line">Epoch 3/5</span><br><span class="line">20000/20000 [==============================] - 0s 12us/step - loss: 0.2819 - acc: 0.9814 - val_loss: 0.2464 - val_acc: 0.9878</span><br><span class="line">Epoch 4/5</span><br><span class="line">20000/20000 [==============================] - 0s 12us/step - loss: 0.2267 - acc: 0.9858 - val_loss: 0.2042 - val_acc: 0.9882</span><br><span class="line">Epoch 5/5</span><br><span class="line">20000/20000 [==============================] - 0s 11us/step - loss: 0.1921 - acc: 0.9872 - val_loss: 0.1759 - val_acc: 0.9882</span><br></pre></td></tr></table></figure>
<h3 id="2-1-è®­ç»ƒ-loss-æ›²çº¿å˜åŒ–æƒ…å†µå¯¹æ¯”"><a href="#2-1-è®­ç»ƒ-loss-æ›²çº¿å˜åŒ–æƒ…å†µå¯¹æ¯”" class="headerlink" title="2.1 è®­ç»ƒ loss æ›²çº¿å˜åŒ–æƒ…å†µå¯¹æ¯”"></a>2.1 è®­ç»ƒ loss æ›²çº¿å˜åŒ–æƒ…å†µå¯¹æ¯”</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.plot(history_sigmoid.history[<span class="string">'loss'</span>])</span><br><span class="line">plt.plot(history_softmax.history[<span class="string">'loss'</span>])</span><br><span class="line"></span><br><span class="line">plt.plot(history_sigmoid.history[<span class="string">'val_loss'</span>])</span><br><span class="line">plt.plot(history_softmax.history[<span class="string">'val_loss'</span>])</span><br><span class="line"></span><br><span class="line">plt.ylabel(<span class="string">'loss'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'epoch'</span>)</span><br><span class="line"></span><br><span class="line">plt.legend([<span class="string">'sigmoid_loss'</span>, <span class="string">'softmax_loss'</span>, </span><br><span class="line">            <span class="string">'sigmoid_val_loss'</span>, <span class="string">'softmax_val_loss'</span>], loc=<span class="string">'upper right'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src="/images/blog/2021/sigmoid_softmax_loss.jpg" alt></p>
<p>ä»å›¾ä¸­å¯çŸ¥ï¼ŒSigmoid å’Œ Softmax çš„è®­ç»ƒæ›²çº¿å‡ ä¹å®Œå…¨é‡åˆ.</p>
<h3 id="2-2-Loss-å·®å€¼å¯è§†åŒ–å¯¹æ¯”"><a href="#2-2-Loss-å·®å€¼å¯è§†åŒ–å¯¹æ¯”" class="headerlink" title="2.2 Loss å·®å€¼å¯è§†åŒ–å¯¹æ¯”"></a>2.2 Loss å·®å€¼å¯è§†åŒ–å¯¹æ¯”</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.plot(np.array(history_sigmoid.history[<span class="string">'val_loss'</span>]) - np.array(history_softmax.history[<span class="string">'val_loss'</span>]))</span><br><span class="line">plt.plot(np.array(history_sigmoid.history[<span class="string">'val_loss'</span>]) - np.array(history_sigmoid_2.history[<span class="string">'val_loss'</span>]))</span><br><span class="line"></span><br><span class="line">plt.ylabel(<span class="string">'loss'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'epoch'</span>)</span><br><span class="line"></span><br><span class="line">plt.legend([<span class="string">'sigmoid_softmax_beta_gap'</span>, <span class="string">'sigmoid_random_weight_gap'</span>], loc=<span class="string">'upper right'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src="/images/blog/2021/loss_difference.jpg" alt></p>
<p>å›¾ä¸­<strong>è“è‰²æ›²çº¿</strong>å‡ ä¹ä¸€ç›´æ˜¯ 0ï¼Œå…¶è¡¨ç¤º Sigmoid å’Œ Softmax è®­ç»ƒçš„æ¨¡å‹çš„ loss å·®å¼‚æ€§å¾ˆå°. ä½†<strong>é»„è‰²æ›²çº¿</strong> çš„å·®å€¼ç›¸å¯¹å°±è¾ƒå¤§ï¼Œå…¶é‡‡ç”¨çš„éšæœºåˆå§‹åŒ– Sigmoid æƒé‡å€¼ï¼Œå½±å“äº†è®­ç»ƒè¿‡ç¨‹ä¸­çš„ loss æ›²çº¿çš„å˜åŒ–.</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœè®¾ç½®äº†æ­£ç¡®çš„ beta å€¼ï¼ŒSigmoid ä¸ Softmax çš„æ•ˆæœå¯è®¤ä¸ºæ˜¯ç­‰ä»·çš„.</p>
<h1 id="3-æ€»ç»“"><a href="#3-æ€»ç»“" class="headerlink" title="3. æ€»ç»“"></a>3. æ€»ç»“</h1><p>å¯¹äºäºŒåˆ†ç±»é—®é¢˜ï¼Œ</p>
<p>[1] - Sigmoid ä¸ Softmax å®Œå…¨ç­‰ä»·.</p>
<p>[2] - Sigmoid ä¸ Softmax åˆ†ç±»å™¨çš„æƒå€¼å¯ä»¥ç›¸äº’è½¬æ¢.</p>
<p>[3] - Softmax çš„å­¦ä¹ ç‡æ˜¯ Sigmoid å­¦ä¹ ç‡çš„2å€. (å¦‚ï¼š1e-3ä¸2e-3)</p>
<p>[4] - Softmax ä¼šæ¯” Sigmoid æµªè´¹ 2 å€çš„æƒå€¼ç©ºé—´(æƒé‡å‚æ•°æ˜¯ä¸¤å€).</p>
<hr color="blue">

<p><strong>PS: æ ¹æ®ä»»åŠ¡éœ€è¦ï¼Œæ‰‹åŠ¨ä¿®æ”¹æŸå¤±å‡½æ•°ï¼Œæ˜¯ä¸€é¡¹å¿…è¦çš„æŠ€èƒ½ã€‚</strong></p>
]]></content>
      <categories>
        <category>Neural Networks</category>
      </categories>
      <tags>
        <tag>pytorch</tag>
        <tag>softmax</tag>
        <tag>sigmoid</tag>
        <tag>binary classification</tag>
      </tags>
  </entry>
  <entry>
    <title>The log-sum-exp trick</title>
    <url>/2021/03/12/The-log-sum-exp-trick/</url>
    <content><![CDATA[<p>åœ¨æœºå™¨å­¦ä¹ å’Œç¥ç»ç½‘ç»œä¸­ï¼Œ$\log()$æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„æŠ€å·§ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¯¹äºå‡½æ•°æ±‚å¯¼æ—¶ï¼Œä½¿ç”¨$\log()$å¯ä»¥ç®€åŒ–è®¡ç®—ï¼Œé¿å…ä¹˜æ³•æ³•åˆ™ã€‚</p>
<script type="math/tex; mode=display">
\frac{\partial}{\partial x} \log[f(x)g(x)] = \frac{\partial}{\partial x}f(x) + \frac{\partial}{\partial x} g(x).</script><h2 id="åœ¨softmax-å‡½æ•°ä¸­çš„è¿ç”¨"><a href="#åœ¨softmax-å‡½æ•°ä¸­çš„è¿ç”¨" class="headerlink" title="åœ¨softmax()å‡½æ•°ä¸­çš„è¿ç”¨"></a>åœ¨softmax()å‡½æ•°ä¸­çš„è¿ç”¨</h2><p>åœ¨softmax()å‡½æ•°ä¸­ï¼ŒæŒ‰ç…§ä»¥ä¸‹å…¬å¼ï¼Œå°†å¾—åˆ†è½¬åŒ–ä¸ºå¯¹åº”çš„æ¦‚ç‡ï¼š</p>
<script type="math/tex; mode=display">
\frac{\exp(x_m)}{\sum_{i=1}^N \exp(x_n)}</script><p>å¦‚æœåˆ†æ¯è¿‡å¤§ï¼Œåˆ™å¾ˆå®¹æ˜“æº¢å‡ºï¼ŒæŒ‰ç…§ä»¥ä¸‹æ–¹å¼è¿›è¡Œè½¬åŒ–ï¼š</p>
<script type="math/tex; mode=display">
y = \log \sum_{i=1}^n \exp(x_n) \\
e^y = \sum_{i=1}^n\exp(x_n) \\
e^y = e^c\sum_{i=1}^n\exp(x_n-c) \\
y = c + \log \sum_{i=1}^n \exp(x_n-c)</script><p>å¦‚æœè®¾ç½®$c = \max{x_1,â€¦,x_n}$ï¼Œåˆ™æœ€å¤§ä¸è¶…è¿‡1</p>
]]></content>
      <categories>
        <category>Algorithms</category>
      </categories>
      <tags>
        <tag>pytorch</tag>
        <tag>log-sum-exp</tag>
      </tags>
  </entry>
  <entry>
    <title>Leetcode 84 é€’å¢æ ˆ</title>
    <url>/2021/03/12/Leetcode-84-%E9%80%92%E5%A2%9E%E6%A0%88/</url>
    <content><![CDATA[<h1 id="è¦ç‚¹"><a href="#è¦ç‚¹" class="headerlink" title="è¦ç‚¹"></a>è¦ç‚¹</h1><ol>
<li>æœ€ç»ˆçŸ©å½¢å¿…ç„¶æˆªæ–­åˆ°æŸä¸€é«˜åº¦</li>
<li>é’ˆå¯¹æ¯ä¸€ä¸ªé«˜åº¦ï¼Œåªéœ€æ‰¾åˆ°å·¦å³ä¸¤ä¾§çš„æ›´é«˜é«˜åº¦</li>
<li>é€’å¢æ ˆçš„æ•°æ®ç»“æ„</li>
</ol>
<h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">largestRectangleArea</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; heights)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; slope &#123;<span class="number">-1</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=heights.size(); ++i) &#123;</span><br><span class="line">      <span class="keyword">while</span> (slope.back() &gt;= <span class="number">0</span> &amp;&amp; (i == heights.size() || heights[slope.back()] &gt;= heights[i])) &#123;</span><br><span class="line">        <span class="keyword">int</span> height = heights[slope.back()];</span><br><span class="line">        slope.pop_back();</span><br><span class="line">        ret = <span class="built_in">std</span>::max(ret, (i-slope.back()<span class="number">-1</span>)*height);</span><br><span class="line">      &#125;</span><br><span class="line">      slope.push_back(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>å¼‚å¸¸å·§å¦™ğŸ˜²</p>
]]></content>
      <categories>
        <category>Algorithms</category>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>stack</tag>
        <tag>é€’å¢æ ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>é˜¿é‡Œé¢è¯•è¦ç‚¹</title>
    <url>/2021/03/04/%E9%98%BF%E9%87%8C%E9%9D%A2%E8%AF%95%E8%A6%81%E7%82%B9/</url>
    <content><![CDATA[<ol>
<li>éœ€è¦æœ‰è‡ªå·±çš„èŒä¸šè§„åˆ’ï¼Œç®€å•ä¸€äº›ä¹Ÿå¯ä»¥ï¼Ÿ</li>
</ol>
<p>ç­”ï¼šé¦–å…ˆï¼Œç†Ÿæ‚‰ä¸šåŠ¡ï¼Œå°†ç®—æ³•èƒ½åŠ›ç”¨åˆ°çœŸæ­£çš„ä¸šåŠ¡ä¸­ï¼›å…¶æ¬¡ï¼Œä¸»è¦ä¸“æ³¨äºè¿ç§»å­¦ä¹ å’Œå¤šæ¨¡æ€NLPä¸¤ä¸ªæ–¹å‘ï¼Œäº§ç”Ÿæ›´å¤šçš„ç ”ç©¶æˆæœï¼›æœ€åï¼Œç†è§£äº§ä¸šï¼Œèƒ½å¤Ÿä¸»åŠ¨å‘æ˜æ–¹å‘å’Œç€åŠ›ç‚¹ã€‚</p>
<ol>
<li>é¢è¯•ä¸€èˆ¬ç»è¿‡ï¼šåˆé¢ã€ç»ˆé¢ã€äº¤å‰é¢ã€HRé¢ã€‚</li>
<li>ä¸ºäº†å¯¹è‡ªå·±æ±‚èŒçš„å²—ä½æœ‰æ›´æ·±çš„ç†è§£ï¼Œå¯ä»¥å»æŸ¥çœ‹åŒæ ·å²—ä½çš„ç¤¾æ‹›è¦æ±‚ã€‚é¢ç»å¯é€‚åº¦å‚è€ƒã€‚</li>
<li>ç¬”è¯•é‡‡ç”¨ç‰›å®¢ç½‘ï¼Œå¯ä»¥è‡ªåŠ¨è¡¥å…¨ï¼Œéœ€æ‰‹åŠ¨å¤„ç†IOã€‚</li>
<li>é¢è¯•ç»ƒä¹ å¯ä»¥é‡‡ç”¨æ¨¡æ‹Ÿé¢è¯•çš„æ–¹æ³•ï¼Œäº‰å–åšåˆ°æ¸¸åˆƒæœ‰ä½™ã€è½è½å¤§æ–¹ã€‚STARæ³•åˆ™ (situation, target, action, result) å¯ä»¥è®©å™è¿°æ›´æ¸…æ™°ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>Others</category>
        <category>Interview</category>
      </categories>
      <tags>
        <tag>Interview</tag>
        <tag>æ˜¥æ‹›</tag>
        <tag>é˜¿é‡Œå·´å·´</tag>
        <tag>Alibaba</tag>
      </tags>
  </entry>
  <entry>
    <title>å†ç”Ÿæ ¸å¸Œå°”ä¼¯ç‰¹ç©ºé—´ (RKHS)</title>
    <url>/2021/01/16/%E5%86%8D%E7%94%9F%E6%A0%B8%E5%B8%8C%E5%B0%94%E4%BC%AF%E7%89%B9%E7%A9%BA%E9%97%B4-RKHS/</url>
    <content><![CDATA[<h1 id="å¸Œå°”ä¼¯ç‰¹ç©ºé—´"><a href="#å¸Œå°”ä¼¯ç‰¹ç©ºé—´" class="headerlink" title="å¸Œå°”ä¼¯ç‰¹ç©ºé—´"></a>å¸Œå°”ä¼¯ç‰¹ç©ºé—´</h1><p>å…ˆæ¥è¯´ä¸€ä¸‹ä»€ä¹ˆæ˜¯<strong>å¸Œå°”ä¼¯ç‰¹ç©ºé—´</strong>ã€‚<br>è¿™ä¸ªæ¦‚å¿µå¬èµ·æ¥é«˜å¤§ä¸Šï¼Œå…¶å®æ˜¯ä¸ªéå¸¸ç®€å•çš„æ¦‚å¿µã€‚<br>å…ˆè¯´ä»€ä¹ˆæ˜¯<strong>çº¿æ€§ç©ºé—´</strong></p>
<h2 id="çº¿æ€§ç©ºé—´"><a href="#çº¿æ€§ç©ºé—´" class="headerlink" title="çº¿æ€§ç©ºé—´"></a>çº¿æ€§ç©ºé—´</h2><p>çº¿æ€§ç©ºé—´å³å®šä¹‰äº†æ•°ä¹˜å’ŒåŠ æ³•çš„ç©ºé—´ã€‚è¿™ä¸ªå°±æ˜¯å…·æœ‰çº¿æ€§ç»“æ„çš„ç©ºé—´ã€‚<br>æœ‰äº†çº¿æ€§ç©ºé—´çš„æ¦‚å¿µä¹‹åï¼Œå› ä¸ºæœ‰æ•°ä¹˜å’ŒåŠ æ³•ï¼Œæ‰€ä»¥ç©ºé—´ä¸­å¯ä»¥æ‰¾åˆ°ä¸€ç»„åŸºåº•ï¼ˆBasisï¼‰èƒ½å¤Ÿé€šè¿‡çº¿æ€§ç»„åˆå¾—åˆ°ç©ºé—´ä¸­æ‰€æœ‰çš„ç‚¹ã€‚</p>
<h2 id="åº¦é‡ç©ºé—´å’Œèµ‹èŒƒç©ºé—´"><a href="#åº¦é‡ç©ºé—´å’Œèµ‹èŒƒç©ºé—´" class="headerlink" title="åº¦é‡ç©ºé—´å’Œèµ‹èŒƒç©ºé—´"></a>åº¦é‡ç©ºé—´å’Œèµ‹èŒƒç©ºé—´</h2><p>è·ç¦»çš„å®šä¹‰å¿…é¡»æ»¡è¶³å¦‚ä¸‹ä¸‰ä¸ªæ¡ä»¶ï¼š</p>
<ol>
<li><p>d(x,y)â‰¥0;d(x,y)=0 çš„å……è¦æ¡ä»¶æ˜¯x=yå³éè´Ÿæ€§</p>
</li>
<li><p>d(x,y)=d(y,x);å¯¹ç§°æ€§</p>
</li>
<li><p>d(x,z)+d(z,y)â‰¥d(x,y)æ»¡è¶³ä¸‰è§’ä¸ç­‰å¼ã€‚</p>
</li>
</ol>
<p>å®šä¹‰äº†è·ç¦»çš„ç©ºé—´å«<strong>åº¦é‡ç©ºé—´</strong>ã€‚<br>å®šä¹‰äº†è·ç¦»çš„çº¿æ€§ç©ºé—´å«<strong>çº¿æ€§åº¦é‡ç©ºé—´</strong></p>
<p>æ¥ä¸‹æ¥å†å®šä¹‰èŒƒæ•°||x||ï¼ŒèŒƒæ•°çš„å®šä¹‰å¿…é¡»æ»¡è¶³ï¼š</p>
<ol>
<li>||x||â‰¥0å³éè´Ÿæ€§</li>
<li>||Î±x||=|Î±|||x||</li>
<li>||x||+||y||â‰¥||x+y||æ»¡è¶³ä¸‰è§’ä¸ç­‰å¼</li>
</ol>
<p><font color="orange">æ‰€ä»¥èŒƒæ•°è¿™ä¸ªæ¦‚å¿µï¼Œå¯ä»¥çœ‹æˆä»é›¶ç‚¹åˆ°xçš„è·ç¦»</font>ï¼ŒåŒæ—¶æ¯”ä»·ç¬¬äºŒæ¡ï¼ˆ2ï¼‰ï¼Œå³æ•°ä¹˜å¯ä»¥æå–å‡ºæ¥ã€‚<br>æ‰€ä»¥ï¼š<strong>ç”±èŒƒæ•°å¯ä»¥å®šä¹‰è·ç¦»ï¼Œå³d(x,y)=||xâˆ’y||ï¼Œä½†æ˜¯è·ç¦»ä¸å¯ä»¥å®šä¹‰èŒƒæ•°å› ä¸ºè·ç¦»çš„å®šä¹‰ï¼Œä¸æ»¡è¶³èŒƒæ•°çš„ç¬¬äºŒæ¡æ¡ä»¶</strong></p>
<p><strong>å› ä¸º</strong>ï¼Œ$||x|| = d(0,x)$</p>
<p><strong>ä½†</strong> $||\alpha x|| = d(0,\alpha x) \neq |\alpha||x||$</p>
<p><strong>ä¸¾ä¸ªæ —å­</strong>ï¼Œ$d(x,y) = \frac{\sqrt{\sum(x_i-y_i)^2}}{1 + \sqrt{\sum(x_i-y_i)^2}}$</p>
<p><strong>è¿™ä¸ªæ»¡è¶³è·ç¦»å®šä¹‰ï¼Œä½†æ˜¯ä¸æ»¡è¶³èŒƒæ•°å®šä¹‰ã€‚æ‰€ä»¥èŒƒæ•°æ˜¯æ¯”è·ç¦»æ›´å…·ä½“çš„ä¸€ä¸ªä¸œè¥¿</strong></p>
<p><strong>è€Œå®šä¹‰äº†èŒƒæ•°çš„ç©ºé—´ï¼Œå«èµ‹èŒƒç©ºé—´å’Œåº¦é‡ç©ºé—´ã€‚å¦å¤–å®Œå¤‡çš„èµ‹èŒƒç©ºé—´å«å·´æ‹¿èµ«ç©ºé—´ã€‚è€Œå®šä¹‰äº†èŒƒæ•°çš„çº¿æ€§ç©ºé—´ï¼Œå«èµ‹èŒƒçº¿æ€§ç©ºé—´</strong></p>
<h2 id="å¸Œå°”ä¼¯ç‰¹ç©ºé—´-1"><a href="#å¸Œå°”ä¼¯ç‰¹ç©ºé—´-1" class="headerlink" title="å¸Œå°”ä¼¯ç‰¹ç©ºé—´"></a><strong>å¸Œå°”ä¼¯ç‰¹ç©ºé—´</strong></h2><p><strong>å®šä¹‰äº†èŒƒæ•°ä¹‹åï¼Œè¿˜æ²¡æœ‰å®šä¹‰è§’åº¦ã€‚é‚£å°±å†æ¥å®šä¹‰è§’åº¦ï¼Œæ‰€ä»¥å¯ä»¥å®šä¹‰å†…ç§¯å¦‚ä¸‹ï¼š</strong></p>
<p><strong>1. å¯¹ç§°æ€§</strong></p>
<p><strong>2. å¯¹ç¬¬ä¸€å˜å…ƒçš„çº¿æ€§æ€§è´¨ï¼Œå³$&lt;\alpha x,y&gt; = \alpha&lt; x,y&gt;$</strong></p>
<p><strong>3. æ­£å®šæ€§</strong></p>
<p><strong>å¦å¤–è¿˜è¦å†è¯´ä¸€ä¸‹å‡½æ•°ç©ºé—´çš„å†…ç§¯ã€‚ä¸€ä¸ªå‡½æ•°å¯ä»¥çœ‹æˆä¸€ä¸ªæ— ç©·ç»´çš„å‘é‡ã€‚</strong></p>
<p><strong>å°†ä¸€ä¸ªå‡½æ•°æŒ‰ç…§xè¿›è¡Œé‡‡æ ·ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªå‡½æ•°çš„è¡¨ç¤ºä¸ºä¸€ä¸ªå‘é‡çš„å½¢å¼</strong></p>
<p>$(f(x_0),f(x_1),f(x_2),â€¦,f(x_n))$</p>
<p><strong>å¦‚æœé‡‡æ ·çš„é—´éš”å˜å¾—æ— ç©·çš„å°ï¼Œåˆ™è¿™ä¸ªå‡½æ•°å°±å¯ä»¥è¡¨ç¤ºä¸ºä¸€ä¸ªæ— ç©·ç»´çš„å‘é‡ã€‚æ‰€ä»¥ä¸€ä¸ªå‡½æ•°ç©ºé—´çš„å†…ç§¯å¯ä»¥å®šä¹‰ä¸ºï¼š</strong></p>
<p>$\int f(x)g(x)dx$ï¼Œç”±å†…ç§¯å¯ä»¥å¯¼å‡ºèŒƒæ•°ï¼Œä½†æ˜¯èŒƒæ•°ä¸å¯ä»¥å¯¼å‡ºå†…ç§¯ã€‚å› ä¸ºå¯ä»¥å®šä¹‰ $||x||^2=<x,x>$</x,x></p>
<p>å¦å¤–å‡½æ•°ç©ºé—´çš„æ¦‚å¿µï¼Œè¿˜å¯ä»¥ä»å¦å¤–ä¸€ä¸ªè§’åº¦æ¥æ€è€ƒï¼Œä¾‹å¦‚ï¼š</p>
<ol>
<li>æ³°å‹’çº§æ•°å±•å¼€ï¼Œå¯ä»¥çœ‹æˆå°†ä¸€ä¸ªå‡½æ•°ç”¨${x^i}_0^âˆ$ä½œä¸ºåŸºåº•è¡¨ç¤ºçš„ä¸€ä¸ªç©ºé—´</li>
<li>å‚…ç«‹å¶çº§æ•°å±•å¼€ï¼Œå³å°†ä¸€ä¸ªå‡½æ•°ç”¨ä¸‰è§’å‡½æ•°çš„å½¢å¼è¿›è¡Œæ— ç©·ç»´çš„å±•å¼€</li>
</ol>
<p>ä¸€ä¸ªnç»´çš„çš„ç©ºé—´ï¼Œä¸”å®šä¹‰äº†å†…ç§¯ï¼Œå°±å«æ¬§å‡ é‡Œå¾·ç©ºé—´ï¼ˆå³æœ‰çº¿æ€§ç»“æ„å’Œå¤¹è§’ï¼Œå‚ç›´ï¼ŒæŠ•å½±è¿™äº›ï¼‰ã€‚</p>
<p><strong>å¼•å…¥æ— ç©·ç»´çš„ç©ºé—´ï¼ˆä¸€èˆ¬æŒ‡å‡½æ•°ç©ºé—´ï¼‰ï¼Œå…·æœ‰çº¿æ€§ç»“æ„åŒæ—¶å®šä¹‰äº†å†…ç§¯ï¼ŒåŒæ—¶è¿˜å…·æœ‰å®Œå¤‡æ€§çš„ç©ºé—´å°±å«å¸Œå°”ä¼¯ç‰¹ç©ºé—´</strong></p>
<p>æ¯”å¦‚ä¸Šé¢è®²çš„å‚…ç«‹å¶å˜æ¢å°±æ˜¯ä¸€ä¸ªå¸Œå°”ä¼¯ç‰¹ç©ºé—´ã€‚</p>
<h1 id="æ ¸å‡½æ•°"><a href="#æ ¸å‡½æ•°" class="headerlink" title="æ ¸å‡½æ•°"></a>æ ¸å‡½æ•°</h1>]]></content>
      <categories>
        <category>Machine Learning</category>
        <category>Transfer Learning</category>
      </categories>
      <tags>
        <tag>RKHS</tag>
        <tag>Kernel</tag>
        <tag>æ ¸æ–¹æ³•</tag>
        <tag>Hilbert Spaces</tag>
      </tags>
  </entry>
  <entry>
    <title>æœ€å¤§å¹³å‡å·®å¼‚MMD</title>
    <url>/2021/01/16/%E6%9C%80%E5%A4%A7%E5%B9%B3%E5%9D%87%E5%B7%AE%E5%BC%82MMD/</url>
    <content><![CDATA[<h1 id="MMDç†è§£"><a href="#MMDç†è§£" class="headerlink" title="MMDç†è§£"></a>MMDç†è§£</h1><h2 id="1-å®šä¹‰"><a href="#1-å®šä¹‰" class="headerlink" title="1.å®šä¹‰"></a>1.å®šä¹‰</h2><p>MMDï¼šmaximum mean discrepancyã€‚æœ€å¤§å¹³å‡å·®å¼‚ã€‚æœ€å…ˆæå‡ºçš„æ—¶å€™ç”¨äºåŒæ ·æœ¬çš„æ£€æµ‹ï¼ˆtwo-sample testï¼‰é—®é¢˜<a href="https://www.jmlr.org/papers/volume13/gretton12a/gretton12a.pdf" target="_blank" rel="noopener">A kernel two sample test</a>ï¼Œç”¨äºåˆ¤æ–­ä¸¤ä¸ªåˆ†å¸ƒpå’Œqæ˜¯å¦ç›¸åŒã€‚å®ƒçš„åŸºæœ¬å‡è®¾æ˜¯ï¼šå¦‚æœå¯¹äºæ‰€æœ‰ä»¥åˆ†å¸ƒç”Ÿæˆçš„æ ·æœ¬ç©ºé—´ä¸ºè¾“å…¥çš„å‡½æ•°fï¼Œå¦‚æœä¸¤ä¸ªåˆ†å¸ƒç”Ÿæˆçš„è¶³å¤Ÿå¤šçš„æ ·æœ¬åœ¨fä¸Šçš„å¯¹åº”çš„åƒçš„å‡å€¼éƒ½ç›¸ç­‰ï¼Œé‚£ä¹ˆé‚£ä¹ˆå¯ä»¥è®¤ä¸ºè¿™ä¸¤ä¸ªåˆ†å¸ƒæ˜¯åŒä¸€ä¸ªåˆ†å¸ƒã€‚å¦‚æœè¿™ä¸ªå€¼è¶³å¤Ÿå°ï¼Œå°±è®¤ä¸ºä¸¤ä¸ªåˆ†å¸ƒç›¸åŒï¼Œå¦åˆ™å°±è®¤ä¸ºå®ƒä»¬ä¸ç›¸åŒã€‚åŒæ—¶è¿™ä¸ªå€¼ä¹Ÿç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªåˆ†å¸ƒä¹‹é—´çš„ç›¸ä¼¼ç¨‹åº¦ã€‚</p>
<h2 id="2-æ•°å­¦æ­¥éª¤"><a href="#2-æ•°å­¦æ­¥éª¤" class="headerlink" title="2.æ•°å­¦æ­¥éª¤"></a>2.æ•°å­¦æ­¥éª¤</h2><p>å¦‚æœç”¨Fè¡¨ç¤ºä¸€ä¸ªåœ¨æ ·æœ¬ç©ºé—´ä¸Šçš„è¿ç»­å‡½æ•°é›†ï¼Œé‚£ä¹ˆMMDå¯ä»¥ç”¨ä¸‹é¢çš„å¼å­è¡¨ç¤ºï¼š</p>
<script type="math/tex; mode=display">\mathrm{MMD}[\mathcal{F},p,q] := \sup_{f\in\mathcal{F}}(\mathbf{E}_{x\sim p}[f(x)] -\mathbf{E}_{y\sim q}[f(y)])</script><p>$\sup$è¡¨ç¤ºä¸Šç•Œã€‚</p>
<p>å‡è®¾Xå’ŒYåˆ†åˆ«æ˜¯ä»åˆ†å¸ƒpå’Œqé€šè¿‡ç‹¬ç«‹åŒåˆ†å¸ƒ(i.i.d.)é‡‡æ ·å¾—åˆ°çš„ä¸¤ä¸ªæ•°æ®é›†ï¼Œæ•°æ®é›†çš„å¤§å°åˆ†åˆ«ä¸ºmå’Œnã€‚åŸºäºXå’ŒYå¯ä»¥å¾—åˆ°MMDçš„ç»éªŒä¼°è®¡(empirical estimate)ä¸ºï¼š</p>
<p>$\mathrm{MMD}[\mathcal{F},X,Y] := \sup<em>{f\in\mathcal{F}}(\frac{1}{m}\sum</em>{i=1}^mf(x<em>i) -\frac{1}{n}\sum</em>{i=1}^nf(y_i))$</p>
<p>åœ¨ç»™å®šä¸¤ä¸ªåˆ†å¸ƒçš„è§‚æµ‹é›†X,Yçš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªç»“æœä¼šä¸¥é‡ä¾èµ–äºç»™å®šçš„å‡½æ•°é›†Fã€‚ä¸ºäº†èƒ½è¡¨ç¤ºMMDçš„æ€§è´¨ï¼šå½“ä¸”ä»…å½“på’Œqæ˜¯ç›¸åŒåˆ†å¸ƒçš„æ—¶å€™MMDä¸º0ï¼Œé‚£ä¹ˆè¦æ±‚Fè¶³å¤Ÿrichï¼›å¦ä¸€æ–¹é¢ä¸ºäº†ä½¿æ£€éªŒå…·æœ‰è¶³å¤Ÿçš„è¿ç»­æ€§ï¼ˆbe consistent in powerï¼‰ï¼Œä»è€Œä½¿å¾—MMDçš„ç»éªŒä¼°è®¡å¯ä»¥éšç€è§‚æµ‹é›†è§„æ¨¡å¢å¤§è¿…é€Ÿæ”¶æ•›åˆ°å®ƒçš„æœŸæœ›ï¼ŒFå¿…é¡»è¶³å¤Ÿrestrictiveã€‚æ–‡ä¸­è¯æ˜äº†å½“Fæ˜¯universal RKHSä¸Šçš„ï¼ˆunit ballï¼‰å•ä½çƒæ—¶ï¼Œå¯ä»¥æ»¡è¶³ä¸Šé¢ä¸¤ä¸ªæ€§è´¨ã€‚</p>
<a id="more"></a>
<h3 id="2-1å†ç”Ÿæ ¸å¸Œå°”ä¼¯ç‰¹ç©ºé—´"><a href="#2-1å†ç”Ÿæ ¸å¸Œå°”ä¼¯ç‰¹ç©ºé—´" class="headerlink" title="2.1å†ç”Ÿæ ¸å¸Œå°”ä¼¯ç‰¹ç©ºé—´"></a>2.1å†ç”Ÿæ ¸å¸Œå°”ä¼¯ç‰¹ç©ºé—´</h3><p>è¿™éƒ¨åˆ†è®²è¿°äº†åœ¨RHKS (Reproducing Kernel Hilbert Spaces) ä¸Šå•ä½çƒï¼ˆunit ballï¼‰ä½œä¸ºFæ—¶ï¼Œé€šè¿‡æœ‰é™çš„è§‚æµ‹æ¥å¯¹MMDè¿›è¡Œä¼°è®¡ï¼Œå¹¶ä¸”è®¾ç«‹ä¸€äº›MMDå¯ä»¥ç”¨æ¥åŒºåˆ†æ¦‚ç‡åº¦é‡çš„æ¡ä»¶ã€‚<br>åœ¨RKHSä¸Šï¼Œæ¯ä¸ªfå¯¹åº”ä¸€ä¸ªfeature mapã€‚åœ¨feature mapçš„åŸºç¡€ä¸Šï¼Œé¦–å…ˆå¯¹äºæŸä¸ªåˆ†å¸ƒpå®šä¹‰ä¸€ä¸ªmean embedding of pï¼Œå®ƒæ»¡è¶³å¦‚ä¸‹çš„æ€§è´¨ï¼š</p>
<p>$\mu_p \in \mathcal{H}$ such that $\mathbf{E}_xf = \langle f, \mu_p \rangle$ for all $f \in \mathcal{H}$</p>
<p>mean embeddingå­˜åœ¨æ˜¯æœ‰çº¦æŸæ¡ä»¶çš„[1]ã€‚åœ¨på’Œqçš„mean embeddingå­˜åœ¨çš„æ¡ä»¶ä¸‹ï¼ŒMMDçš„å¹³æ–¹å¯ä»¥è¡¨ç¤ºå¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
\begin{align}
\mathrm{MMD}^2[\mathcal{F},p,q] & = [\sup_{||f||_\mathcal{H} \leq1}(\mathbf{E}_x[f(x)]-\mathbf{E}_y[f(y)])]^2\\
& = [\sup_{||f||_\mathcal{H} \leq 1}\langle \mu_p-\mu_q,f\rangle_\mathcal{H}]^2\\
& = ||\mu_p - \mu_q||_{\mathcal{H}}^2
\end{align}</script><font color="orange">è¿™é‡Œæœ‰ä¸€äº›åœ°æ–¹æ²¡æœ‰çœ‹æ‡‚ï¼Œ$\langle \rangle$æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ$\mathrm{MMD}$æœ€åä¸€æ­¥åˆæ˜¯å¦‚ä½•æ¨å¯¼çš„ï¼Ÿ</font>

<p>ä¸‹é¢æ˜¯å…³äºMMDä½œä¸ºä¸€ä¸ªBorel probability measuresæ—¶ï¼Œå¯¹Fçš„ä¸€ä¸ªçº¦æŸåŠå…¶è¯æ˜ï¼Œè¦æ±‚Fï¼šbe a unit ball in a universal RKHSã€‚æ¯”å¦‚Gaussianå’ŒLaplace RKHSsã€‚è¿›ä¸€æ­¥åœ¨ç»™å®šäº†RKHSå¯¹åº”æ ¸å‡½æ•°ï¼Œè¿™ä¸ªMMDçš„å¹³æ–¹å¯ä»¥è¡¨ç¤ºï¼š</p>
<p>$\mathrm{MMD}^2[\mathcal{F},p,q] = \mathbf{E}<em>{x,xâ€™} [k(x,xâ€™)] - 2\mathbf{E}</em>{x,y} [k(x,y)] + \mathbf{E}_{y,yâ€™}[k(y,yâ€™)]$</p>
<p>xå’Œxâ€™åˆ†åˆ«è¡¨ç¤ºä¸¤ä¸ªæœä»äºpçš„éšæœºå˜é‡ï¼Œyå’Œyâ€˜åˆ†åˆ«è¡¨ç¤ºæœä»qçš„éšæœºå˜é‡ã€‚å¯¹äºä¸Šé¢çš„ä¸€ä¸ªç»Ÿè®¡ä¼°è®¡å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p>
<p>$\mathrm{MMD}[\mathcal{F},X,Y] = [\frac{1}{m^2}\sum<em>{i,j=1}^m k(x_i,x_j) - \frac{2}{mn} \sum </em>{i,j=1}^{m,n} k(x<em>i,y_j) + \frac{1}{n^2} \sum</em>{i,j=1}^{n}k(y_i,y_j)]^{\frac{1}{2}}$</p>
<p>å¯¹äºä¸€ä¸ªtwo-sample test, ç»™å®šçš„null hypothesis: på’Œqæ˜¯ç›¸åŒï¼Œä»¥åŠthe alternative hypothesis: på’Œqä¸ç­‰ã€‚è¿™ä¸ªé€šè¿‡å°†test statisticå’Œä¸€ä¸ªç»™å®šçš„é˜ˆå€¼ç›¸æ¯”è¾ƒå¾—åˆ°ï¼Œå¦‚æœMMDå¤§äºé˜ˆå€¼ï¼Œé‚£ä¹ˆå°±reject null hypothesisï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªåˆ†å¸ƒä¸åŒã€‚å¦‚æœMMDå°äºæŸä¸ªé˜ˆå€¼ï¼Œå°±æ¥å—null hypothesisã€‚ç”±äºMMDçš„è®¡ç®—æ—¶ä½¿ç”¨çš„æ˜¯æœ‰é™çš„æ ·æœ¬æ•°ï¼Œè¿™é‡Œä¼šå‡ºç°ä¸¤ç§ç±»å‹çš„é”™è¯¯ï¼šç¬¬ä¸€ç§é”™è¯¯å‡ºç°åœ¨null hypothesisè¢«é”™è¯¯çš„æ‹’ç»äº†ï¼›ä¹Ÿå°±æ˜¯æœ¬æ¥ä¸¤ä¸ªåˆ†å¸ƒç›¸åŒï¼Œä½†æ˜¯å´è¢«åˆ¤å®šä¸ºä¸åŒã€‚åä¹‹ï¼Œç¬¬äºŒç§é”™è¯¯å‡ºç°åœ¨null hypothesisè¢«é”™è¯¯çš„æ¥å—äº†ã€‚æ–‡ç« [1]ä¸­æä¾›äº†è®¸å¤šå…³äºhypothesis testçš„æ–¹æ³•ï¼Œè¿™é‡Œä¸è®¨è®ºã€‚<br>åœ¨domain adaptationä¸­ï¼Œç»å¸¸ç”¨åˆ°MMDæ¥åœ¨ç‰¹å¾å­¦ä¹ çš„æ—¶å€™æ„é€ æ­£åˆ™é¡¹æ¥çº¦æŸå­¦åˆ°çš„è¡¨ç¤ºï¼Œä½¿å¾—ä¸¤ä¸ªåŸŸä¸Šçš„ç‰¹å¾å°½å¯èƒ½ç›¸åŒã€‚ä»ä¸Šé¢çš„å®šä¹‰çœ‹ï¼Œæˆ‘ä»¬åœ¨åˆ¤æ–­ä¸¤ä¸ªåˆ†å¸ƒpå’Œqçš„æ—¶å€™ï¼Œéœ€è¦å°†è§‚æµ‹æ ·æœ¬é¦–å…ˆæ˜ å°„åˆ°RKHSç©ºé—´ä¸Šï¼Œç„¶åå†åˆ¤æ–­ã€‚<em>ä½†å®é™…ä¸Šå¾ˆå¤šæ–‡ç« ç›´æ¥å°†è§‚æµ‹æ ·æœ¬ç”¨äºè®¡ç®—ï¼Œçœäº†æ˜ å°„çš„é‚£ä¸ªæ­¥éª¤ã€‚</em></p>
]]></content>
      <categories>
        <category>Machine Learning</category>
        <category>Transfer Learning</category>
      </categories>
      <tags>
        <tag>Domain Adaptation</tag>
        <tag>MMD</tag>
        <tag>Maximum Mean Discrepancy</tag>
        <tag>Transfer Learning</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±åº¦å­åŸŸé€‚åº”ç½‘ç»œ</title>
    <url>/2021/01/15/%E6%B7%B1%E5%BA%A6%E5%AD%90%E5%9F%9F%E9%80%82%E5%BA%94%E7%BD%91%E7%BB%9C/</url>
    <content><![CDATA[<h1 id="1ã€ç®€ä»‹"><a href="#1ã€ç®€ä»‹" class="headerlink" title="1ã€ç®€ä»‹"></a>1ã€ç®€ä»‹</h1><p>æ·±åº¦å­¦ä¹ éœ€è¦å¤§é‡çš„æ ‡ç­¾æ ·æœ¬ï¼Œä¸ºè§£å†³æ ‡ç­¾é—®é¢˜æå‡ºäº†è¿ç§»å­¦ä¹ ï¼Œå³ä»ç›¸å…³çš„source domain å»å­¦ä¹ æ ‡ç­¾å¥½çš„æ•°æ®ã€‚ä½†ç”±äºä¸åŒåŸŸé—´çš„æ•°æ®åˆ†å¸ƒä¹Ÿä¸åŒï¼Œæ‰€ä»¥å­¦ä¹ å¾—åˆ°çš„æ¨¡å‹æ³›åŒ–èƒ½åŠ›ä¸é«˜ã€‚<br>åœ¨è®­ç»ƒã€æµ‹è¯•æ•°æ®çš„åˆ†å¸ƒæœ‰å˜åŠ¨çš„æƒ…å†µä¸‹å»å­¦ä¹ ä¸€ä¸ªåˆ¤åˆ«æ¨¡å‹å«åšdomain adaptation æˆ–transfer distributionsã€‚<br>åœ¨æ·±åº¦ç‰¹å¾å­¦ä¹ ä¸­åµŒå…¥domain adaptationæ¨¡å—å»æå–å›ºå®šç‰¹å¾ å·²ç»è¯æ˜èƒ½å¸¦æ¥æ–°çš„ä¼˜åŠ¿ã€‚ä¹‹å‰çš„domain adaptationéƒ½æ˜¯åœ¨å…¨å±€åŸŸä¸Šåšè¿ç§»ï¼Œå¯¼è‡´ä¸€ä¸ªåŸŸå†…ä¸åŒç±»åˆ«çš„æ•°æ®ä¼šè¢«æ··æ·†ï¼Œå› æ­¤ä¸èƒ½å­¦ä¹ åˆ°å¥½çš„ç‰¹å¾ç»“æ„ã€‚</p>
<h1 id="2ã€æ–¹æ³•"><a href="#2ã€æ–¹æ³•" class="headerlink" title="2ã€æ–¹æ³•"></a>2ã€æ–¹æ³•</h1><h2 id="2-1æ–°æ–¹æ³•çš„æ¦‚å¿µ"><a href="#2-1æ–°æ–¹æ³•çš„æ¦‚å¿µ" class="headerlink" title="2.1æ–°æ–¹æ³•çš„æ¦‚å¿µ"></a>2.1æ–°æ–¹æ³•çš„æ¦‚å¿µ</h2><p>æå‡ºDSANç½‘ç»œï¼šåœ¨DANsç½‘ç»œçš„åŸºç¡€ä¸Šå¯¹å…¶å­åŸŸæ¥å¢å¼ºç‰¹å¾çš„è¡¨ç°èƒ½åŠ›ã€‚<br>ä¸ºäº†å®ç°æ­£ç¡®çš„å¯¹é½ï¼Œæ—©æœŸä½¿ç”¨çš„æ–¹æ³•æ˜¯MMDï¼šæŠŠsourceå’Œtargetç”¨ä¸€ä¸ªç›¸åŒçš„æ˜ å°„æ˜ å°„åœ¨ä¸€ä¸ªå†ç”Ÿæ ¸å¸Œå°”ä¼¯ç‰¹ç©ºé—´ï¼ˆRKHSï¼‰ä¸­ï¼Œç„¶åæ±‚æ˜ å°„åä¸¤éƒ¨åˆ†æ•°æ®çš„å‡å€¼å·®å¼‚ã€‚ç°è®¾è®¡äº†ä¸€ä¸ªå±€éƒ¨æœ€å¤§å¹³å‡å·®ï¼ˆLMMDï¼‰ï¼ˆå®ƒåœ¨è€ƒè™‘ä¸åŒæ ·æœ¬æƒé‡çš„æƒ…å†µä¸‹ï¼Œæµ‹é‡æºåŸŸå’Œç›®æ ‡åŸŸä¸­ç›¸å…³å­åŸŸçš„ç»éªŒåˆ†å¸ƒçš„æ ¸å¹³å‡åµŒå…¥ä¹‹é—´çš„Hilbert-SchmidtèŒƒæ•°ï¼‰LMMDæ–¹æ³•å¯ä»¥åœ¨å¤§å¤šæ•°å‰é¦ˆç½‘ç»œæ¨¡å‹ä¸­å®ç°ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨æ ‡å‡†åå‘ä¼ æ’­è¿›è¡Œæœ‰æ•ˆçš„è®­ç»ƒã€‚</p>
<h2 id="2-2æ–¹æ³•çš„å®ç°"><a href="#2-2æ–¹æ³•çš„å®ç°" class="headerlink" title="2.2æ–¹æ³•çš„å®ç°"></a>2.2æ–¹æ³•çš„å®ç°</h2><h3 id="2-2-1ç½‘ç»œçš„ç»“æ„"><a href="#2-2-1ç½‘ç»œçš„ç»“æ„" class="headerlink" title="2.2.1ç½‘ç»œçš„ç»“æ„"></a>2.2.1ç½‘ç»œçš„ç»“æ„</h3><p><img src="/images/blog/2021/DSAN.png" alt></p>
<p>åœ¨ResNetçš„åŸºç¡€ä¸Šæ·»åŠ LMMDæ¨¡å—æ¥ä½¿å¾—ç›¸å…³å­åŸŸæ›´ç›¸è¿‘ã€‚LMMDè®¡ç®—å…¬å¼å¦‚ä¸‹:</p>
<script type="math/tex; mode=display">
\hat{d}_\mathcal{H}(p,q) = \frac{1}{C} \sum_{c=1}^C||\sum_{\mathbf{x}_i^s \in \mathcal{D}_s} w_i^{sc}\phi(\mathbf{x}_i^s) - \sum_{\mathbf{x}_j^t \in \mathcal{D}_t} w_j^{tc}\phi(\mathbf{x}_j^t)||_\mathcal{H}^2</script><script type="math/tex; mode=display">
w_i^c = \frac{y_{ic}}{\sum_{(\mathbf{x}_j,\mathbf{y}_j)\in\mathcal{D}}y_{jc}}</script><a id="more"></a>
<p>æœ€ç»ˆDASNç½‘ç»œçš„æŸå¤±å‡½æ•°å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
\min_f \frac{1}{n_s} \sum_{i=1}^{n_s}J(f(\mathbf{x}_i^s),\mathbf{y}_i^s) + \lambda\sum_{l\in L}\hat{d}_l(p,q)</script><h2 id="2-3èƒŒæ™¯"><a href="#2-3èƒŒæ™¯" class="headerlink" title="2.3èƒŒæ™¯"></a>2.3èƒŒæ™¯</h2><p>DANæ˜¯åœ¨DDCï¼ˆdeep domain Confusionï¼‰çš„åŸºç¡€ä¸Šå‘å±•æ¥çš„ï¼š<br>DANè§£å†³äº†DDCçš„ä¸¤ä¸ªé—®é¢˜ï¼š<br>DDCåªé€‚é…äº†ä¸€å±‚ç½‘ç»œï¼Œå¯èƒ½è¿˜æ˜¯ä¸å¤Ÿï¼Œå› ä¸ºJasonçš„å·¥ä½œä¸­å·²ç»æ˜ç¡®æŒ‡å‡ºä¸åŒå±‚éƒ½æ˜¯å¯ä»¥è¿ç§»çš„ã€‚æ‰€ä»¥DANå°±å¤šé€‚é…å‡ å±‚ï¼›<br>DDCæ˜¯ç”¨äº†å•ä¸€æ ¸çš„MMDï¼Œå•ä¸€å›ºå®šçš„æ ¸å¯èƒ½ä¸æ˜¯æœ€ä¼˜çš„æ ¸ã€‚DANç”¨äº†å¤šæ ¸çš„MMDï¼ˆMK-MMDï¼‰ï¼Œæ•ˆæœæ¯”DDCæ›´å¥½ã€‚<br>æ€»ç»“ï¼šDANsæ˜¯å¤šå±‚é€‚é…å’Œå¤šæ ¸MMDã€‚</p>
<p>è¿ç§»å­¦ä¹ ç›®å‰çš„æ½®æµæœ‰ä¸¤ç§ï¼š<br>ç¬¬ä¸€ç§æ˜¯åŸºäºç»Ÿè®¡çŸ©åŒ¹é…çš„æ–¹æ³•ï¼Œå³æœ€å¤§å‡å€¼åå·®ï¼ˆMMDï¼‰ã€ä¸­å¿ƒçŸ©å·®å¼‚ï¼ˆCMDï¼‰<br>ç¬¬äºŒç§å¸¸ç”¨çš„æ–¹æ³•æ˜¯åŸºäºå¯¹æŠ—æ€§æŸå¤±ï¼Œå®ƒé¼“åŠ±æ¥è‡ªä¸åŒé¢†åŸŸçš„æ ·æœ¬å¯¹äºé¢†åŸŸæ ‡ç­¾æ˜¯éæ­§è§†æ€§çš„ï¼Œå³å€Ÿç”¨äº†GANçš„æ€æƒ³<br>ä¸€èˆ¬æ¥è¯´ï¼Œé‡‡å–adversarial lossçš„æ•ˆæœæ¯”statistic moment matching-based æ•ˆæœå¥½ã€‚<br>ä½†è¿™ç¯‡è®ºæ–‡ç”¨çš„DSANè¯æ˜èƒ½å–å¾—æ›´å¥½çš„æ•ˆæœã€‚</p>
<h1 id="3ã€å®éªŒç»“æœåˆ†æï¼š"><a href="#3ã€å®éªŒç»“æœåˆ†æï¼š" class="headerlink" title="3ã€å®éªŒç»“æœåˆ†æï¼š"></a>3ã€å®éªŒç»“æœåˆ†æï¼š</h1><p>åœ¨OFFICE31ã€CLEF-Dç­‰æ•°æ®é›†ä¸Šæµ‹è¯•å¾—å‡ºï¼š<br>DASNä¸MMDçš„æ¨¡å‹ï¼šèƒ½æé«˜10-20%ä¸ªç™¾åˆ†ç‚¹çš„ç²¾ç¡®ç‡ã€‚<br>DASNä¸ä¸»æµçš„ï¼ˆå¸¦å¯¹æŠ—æŸå¤±ï¼‰æ¨¡å‹æ¯”è¾ƒ ï¼šèƒ½æé«˜5ä¸ªç™¾åˆ†ç‚¹çš„ç²¾ç¡®ç‡ã€‚</p>
<h1 id="4ã€ç»“è®º"><a href="#4ã€ç»“è®º" class="headerlink" title="4ã€ç»“è®º"></a>4ã€ç»“è®º</h1><p>DSANé¢„æµ‹èƒ½åŠ›ä¸ä»…é«˜äºä¸»æµçš„å¯¹æŠ—æŸå¤±æ¨¡å‹ã€é€Ÿåº¦ä¹Ÿæ›´å¿«ã€è€Œä¸”æ˜“äºå®ç°ã€‚</p>
<p><img src="/images/blog/2021/DSAN-result.png" alt></p>
<p><img src="/images/blog/2021/DSAN-result1.png" alt></p>
]]></content>
      <categories>
        <category>Machine Learning</category>
        <category>Transfer Learning</category>
      </categories>
      <tags>
        <tag>Domain Adaptation</tag>
        <tag>transfer learning</tag>
        <tag>é¢†åŸŸé€‚åº”</tag>
        <tag>è¿ç§»å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>ä»€ä¹ˆæ˜¯KLæ•£åº¦ï¼Ÿ</title>
    <url>/2021/01/15/%E4%BB%80%E4%B9%88%E6%98%AFKL%E6%95%A3%E5%BA%A6%EF%BC%9F/</url>
    <content><![CDATA[<p><code>Kullback-Leibler Divergence</code>ï¼Œå³<code>K-Læ•£åº¦</code>ï¼Œæ˜¯ä¸€ç§<strong>é‡åŒ–ä¸¤ç§æ¦‚ç‡åˆ†å¸ƒPå’ŒQä¹‹é—´å·®å¼‚</strong>çš„æ–¹å¼ï¼Œåˆå«<code>ç›¸å¯¹ç†µ</code>ã€‚åœ¨æ¦‚ç‡å­¦å’Œç»Ÿè®¡å­¦ä¸Šï¼Œæˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨ä¸€ç§<code>æ›´ç®€å•çš„ã€è¿‘ä¼¼çš„åˆ†å¸ƒ</code>æ¥æ›¿ä»£<code>è§‚å¯Ÿæ•°æ®</code>æˆ–<code>å¤ªå¤æ‚çš„åˆ†å¸ƒ</code>ã€‚K-Læ•£åº¦èƒ½å¸®åŠ©æˆ‘ä»¬åº¦é‡ä½¿ç”¨ä¸€ä¸ªåˆ†å¸ƒæ¥è¿‘ä¼¼å¦ä¸€ä¸ªåˆ†å¸ƒæ—¶æ‰€æŸå¤±çš„ä¿¡æ¯é‡ã€‚</p>
<blockquote>
<p>å‡è®¾æˆ‘ä»¬æ˜¯ä¸€ç¾¤å¤ªç©ºç§‘å­¦å®¶ï¼Œç»è¿‡é¥è¿œçš„æ—…è¡Œï¼Œæ¥åˆ°äº†ä¸€é¢—æ–°å‘ç°çš„æ˜Ÿçƒã€‚åœ¨è¿™ä¸ªæ˜Ÿçƒä¸Šï¼Œç”Ÿå­˜ç€ä¸€ç§é•¿æœ‰ç‰™é½¿çš„è •è™«ï¼Œå¼•èµ·äº†æˆ‘ä»¬çš„ç ”ç©¶å…´è¶£ã€‚æˆ‘ä»¬å‘ç°è¿™ç§è •è™«ç”Ÿæœ‰10é¢—ç‰™é½¿ï¼Œä½†æ˜¯å› ä¸ºä¸æ³¨æ„å£è…”å«ç”Ÿï¼Œåˆå–œæ¬¢åš¼ä¸œè¥¿ï¼Œè®¸å¤šè •è™«ä¼šæ‰ç‰™ã€‚æ”¶é›†å¤§é‡æ ·æœ¬ä¹‹åï¼Œæˆ‘ä»¬å¾—åˆ°å…³äºè •è™«ç‰™é½¿æ•°é‡çš„ç»éªŒåˆ†å¸ƒï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p>
</blockquote>
<p><img src="/images/blog/2021/teeth-distribution.webp" alt></p>
<p>æ˜¾ç„¶æˆ‘ä»¬çš„åŸå§‹æ•°æ®å¹¶éå‡åˆ†å¸ƒçš„ï¼Œä½†ä¹Ÿä¸æ˜¯æˆ‘ä»¬å·²çŸ¥çš„åˆ†å¸ƒï¼Œè‡³å°‘ä¸æ˜¯å¸¸è§çš„åˆ†å¸ƒã€‚ä½œä¸ºå¤‡é€‰ï¼Œæˆ‘ä»¬æƒ³åˆ°çš„å¦ä¸€ç§ç®€å•æ¨¡å‹æ˜¯<code>äºŒé¡¹å¼åˆ†å¸ƒbinomial distribution</code>ã€‚è •è™«å˜´é‡Œé¢å…±æœ‰<code>n=10</code>ä¸ªç‰™æ§½ï¼Œæ¯ä¸ªç‰™æ§½å‡ºç°ç‰™é½¿ä¸å¦ä¸ºç‹¬ç«‹äº‹ä»¶ï¼Œä¸”æ¦‚ç‡å‡ä¸º<code>p</code>ã€‚åˆ™è •è™«ç‰™é½¿æ•°é‡å³ä¸ºæœŸæœ›å€¼<code>E[x]=n*p</code>ï¼ŒçœŸå®æœŸæœ›å€¼å³ä¸ºè§‚å¯Ÿæ•°æ®çš„å¹³å‡å€¼ï¼Œæ¯”å¦‚è¯´<code>5.7</code>ï¼Œåˆ™<code>p=0.57</code>ï¼Œå¾—åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„äºŒé¡¹å¼åˆ†å¸ƒï¼š<br><a id="more"></a></p>
<p><img src="/images/blog/2021/binomial.webp" alt></p>
<p>å¯¹æ¯”ä¸€ä¸‹åŸå§‹æ•°æ®ï¼Œå¯ä»¥çœ‹å‡ºå‡åˆ†å¸ƒå’ŒäºŒé¡¹åˆ†å¸ƒéƒ½ä¸èƒ½å®Œå…¨æè¿°åŸå§‹åˆ†å¸ƒã€‚</p>
<p><img src="/images/blog/2021/comparison.webp" alt></p>
<p>å¯æ˜¯ï¼Œæˆ‘ä»¬ä¸ç¦è¦é—®ï¼Œå“ªä¸€ç§åˆ†å¸ƒæ›´åŠ æ¥è¿‘åŸå§‹åˆ†å¸ƒå‘¢ï¼Ÿ<br>å·²ç»æœ‰è®¸å¤šåº¦é‡è¯¯å·®çš„æ–¹å¼å­˜åœ¨ï¼Œä½†æ˜¯æˆ‘ä»¬æ‰€è¦è€ƒè™‘çš„æ˜¯å‡å°å‘é€çš„ä¿¡æ¯é‡ã€‚ä¸Šé¢è®¨è®ºçš„å‡åˆ†å¸ƒå’ŒäºŒé¡¹å¼åˆ†å¸ƒéƒ½æŠŠé—®é¢˜è§„çº¦åˆ°åªéœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œç‰™é½¿æ•°é‡å’Œæ¦‚ç‡å€¼ï¼ˆå‡åˆ†å¸ƒåªéœ€è¦ç‰™é½¿æ•°é‡å³å¯ï¼‰ã€‚é‚£ä¹ˆå“ªä¸ªåˆ†å¸ƒä¿ç•™äº†æ›´å¤šçš„åŸå§‹æ•°æ®åˆ†å¸ƒçš„ä¿¡æ¯å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™å°±éœ€è¦K-Læ•£åº¦ç™»åœºäº†ã€‚</p>
<h2 id="æ•°æ®çš„ç†µ"><a href="#æ•°æ®çš„ç†µ" class="headerlink" title="æ•°æ®çš„ç†µ"></a>æ•°æ®çš„ç†µ</h2><p>K-Læ•£åº¦æºäºä¿¡æ¯è®ºã€‚ä¿¡æ¯è®ºä¸»è¦ç ”ç©¶å¦‚ä½•é‡åŒ–æ•°æ®ä¸­çš„ä¿¡æ¯ã€‚æœ€é‡è¦çš„ä¿¡æ¯åº¦é‡å•ä½æ˜¯<code>ç†µ</code>Entropyï¼Œä¸€èˆ¬ç”¨<code>H</code>è¡¨ç¤ºã€‚åˆ†å¸ƒçš„ç†µçš„å…¬å¼å¦‚ä¸‹ï¼š</p>
<p>$H=-\sum_{i=1}^N p(x_i) \cdot \log p(x_i)$</p>
<p>ä¸Šé¢å¯¹æ•°æ²¡æœ‰ç¡®å®šåº•æ•°ï¼Œå¯ä»¥æ˜¯<code>2</code>ã€<code>e</code>æˆ–<code>10</code>ï¼Œç­‰ç­‰ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨ä»¥<code>2</code>ä¸ºåº•çš„å¯¹æ•°è®¡ç®—Hå€¼çš„è¯ï¼Œå¯ä»¥æŠŠè¿™ä¸ªå€¼çœ‹ä½œæ˜¯ç¼–ç ä¿¡æ¯æ‰€éœ€è¦çš„æœ€å°‘äºŒè¿›åˆ¶ä½ä¸ªæ•°bitsã€‚ä¸Šé¢ç©ºé—´è •è™«çš„ä¾‹å­ä¸­ï¼Œä¿¡æ¯æŒ‡çš„æ˜¯æ ¹æ®è§‚å¯Ÿæ‰€å¾—çš„ç»éªŒåˆ†å¸ƒç»™å‡ºçš„è •è™«ç‰™é½¿æ•°é‡ã€‚è®¡ç®—å¯ä»¥å¾—åˆ°åŸå§‹æ•°æ®æ¦‚ç‡åˆ†å¸ƒçš„ç†µå€¼ä¸º<code>3.12 bits</code>ã€‚è¿™ä¸ªå€¼åªæ˜¯å‘Šè¯‰æˆ‘ä»¬ç¼–ç è •è™«ç‰™é½¿æ•°é‡æ¦‚ç‡çš„ä¿¡æ¯éœ€è¦çš„äºŒè¿›åˆ¶ä½<code>bit</code>çš„ä½æ•°ã€‚<br>å¯æ˜¯ç†µå€¼å¹¶æ²¡æœ‰ç»™å‡ºå‹ç¼©æ•°æ®åˆ°æœ€å°ç†µå€¼çš„æ–¹æ³•ï¼Œå³å¦‚ä½•ç¼–ç æ•°æ®æ‰èƒ½è¾¾åˆ°æœ€ä¼˜ï¼ˆå­˜å‚¨ç©ºé—´æœ€ä¼˜ï¼‰ã€‚ä¼˜åŒ–ä¿¡æ¯ç¼–ç æ˜¯ä¸€ä¸ªéå¸¸æœ‰æ„æ€çš„ä¸»é¢˜ï¼Œä½†å¹¶ä¸æ˜¯ç†è§£K-Læ•£åº¦æ‰€å¿…é¡»çš„ã€‚ç†µçš„ä¸»è¦ä½œç”¨æ˜¯å‘Šè¯‰æˆ‘ä»¬æœ€ä¼˜ç¼–ç ä¿¡æ¯æ–¹æ¡ˆçš„ç†è®ºä¸‹ç•Œï¼ˆå­˜å‚¨ç©ºé—´ï¼‰ï¼Œä»¥åŠåº¦é‡æ•°æ®çš„ä¿¡æ¯é‡çš„ä¸€ç§æ–¹å¼ã€‚ç†è§£äº†ç†µï¼Œæˆ‘ä»¬å°±çŸ¥é“æœ‰å¤šå°‘ä¿¡æ¯è•´å«åœ¨æ•°æ®ä¹‹ä¸­ï¼Œç°åœ¨æˆ‘ä»¬å°±å¯ä»¥è®¡ç®—å½“æˆ‘ä»¬ç”¨ä¸€ä¸ªå¸¦å‚æ•°çš„æ¦‚ç‡åˆ†å¸ƒæ¥è¿‘ä¼¼æ›¿ä»£åŸå§‹æ•°æ®åˆ†å¸ƒçš„æ—¶å€™ï¼Œåˆ°åº•æŸå¤±äº†å¤šå°‘ä¿¡æ¯ã€‚è¯·ç»§ç»­çœ‹ä¸‹èŠ‚å†…å®¹ã€‚</p>
<h2 id="K-Læ•£åº¦åº¦é‡ä¿¡æ¯æŸå¤±"><a href="#K-Læ•£åº¦åº¦é‡ä¿¡æ¯æŸå¤±" class="headerlink" title="K-Læ•£åº¦åº¦é‡ä¿¡æ¯æŸå¤±"></a>K-Læ•£åº¦åº¦é‡ä¿¡æ¯æŸå¤±</h2><p>åªéœ€è¦ç¨åŠ ä¿®æ”¹<code>ç†µH</code>çš„è®¡ç®—å…¬å¼å°±èƒ½å¾—åˆ°<code>K-Læ•£åº¦</code>çš„è®¡ç®—å…¬å¼ã€‚è®¾<code>p</code>ä¸ºè§‚å¯Ÿå¾—åˆ°çš„æ¦‚ç‡åˆ†å¸ƒï¼Œ<code>q</code>ä¸ºå¦ä¸€åˆ†å¸ƒæ¥è¿‘ä¼¼<code>p</code>ï¼Œåˆ™<code>p</code>ã€<code>q</code>çš„<code>K-Læ•£åº¦</code>ä¸ºï¼š</p>
<p>$D<em>{KL}(p||q) = \sum</em>{i=1}^N p(x_i) \cdot(\log p(x_i) - \log q(x_i))$</p>
<p>æ˜¾ç„¶ï¼Œæ ¹æ®ä¸Šé¢çš„å…¬å¼ï¼ŒK-Læ•£åº¦å…¶å®æ˜¯æ•°æ®çš„åŸå§‹åˆ†å¸ƒpå’Œè¿‘ä¼¼åˆ†å¸ƒqä¹‹é—´çš„å¯¹æ•°å·®å€¼çš„æœŸæœ›ã€‚å¦‚æœç»§ç»­ç”¨<code>2</code>ä¸ºåº•çš„å¯¹æ•°è®¡ç®—ï¼Œåˆ™<strong>K-Læ•£åº¦å€¼è¡¨ç¤ºä¿¡æ¯æŸå¤±çš„äºŒè¿›åˆ¶ä½æ•°</strong>ã€‚ä¸‹é¢å…¬å¼ä»¥æœŸæœ›è¡¨è¾¾K-Læ•£åº¦ï¼š</p>
<font color="orange">å¯ä»¥ç†è§£ä¸ºåœ¨çœŸå®åˆ†å¸ƒä¸‹ï¼Œé¢„æµ‹åˆ†å¸ƒä¸çœŸå®åˆ†å¸ƒçš„èƒ½é‡ï¼ˆç†µï¼‰å·®å¼‚ã€‚</font>

<p>ä¸€èˆ¬ï¼ŒK-Læ•£åº¦ä»¥ä¸‹é¢çš„ä¹¦å†™æ–¹å¼æ›´å¸¸è§ï¼š</p>
<p>$D<em>{KL}(p||q) = \sum</em>{i=1}^N p(x_i) \cdot \log \frac{p(x_i)}{q(x_i)}$</p>
<p>OKï¼Œç°åœ¨æˆ‘ä»¬çŸ¥é“å½“ç”¨ä¸€ä¸ªåˆ†å¸ƒæ¥è¿‘ä¼¼å¦ä¸€ä¸ªåˆ†å¸ƒæ—¶å¦‚ä½•è®¡ç®—ä¿¡æ¯æŸå¤±é‡äº†ã€‚æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬é‡æ–°å›åˆ°æœ€å¼€å§‹çš„è •è™«ç‰™é½¿æ•°é‡æ¦‚ç‡åˆ†å¸ƒçš„é—®é¢˜ã€‚é¦–å…ˆæ˜¯ç”¨å‡åˆ†å¸ƒæ¥è¿‘ä¼¼åŸå§‹åˆ†å¸ƒçš„K-Læ•£åº¦ï¼š</p>
<p>$D_{kl}(Observed||Uniform) = 0.338$</p>
<p>æ¥ä¸‹æ¥è®¡ç®—ç”¨äºŒé¡¹å¼åˆ†å¸ƒè¿‘ä¼¼åŸå§‹åˆ†å¸ƒçš„K-Læ•£åº¦ï¼š$0.477$</p>
<p>é€šè¿‡ä¸Šé¢çš„è®¡ç®—å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨å‡åˆ†å¸ƒè¿‘ä¼¼åŸå§‹åˆ†å¸ƒçš„ä¿¡æ¯æŸå¤±è¦æ¯”ç”¨äºŒé¡¹å¼åˆ†å¸ƒè¿‘ä¼¼å°ã€‚æ‰€ä»¥ï¼Œå¦‚æœè¦ä»å‡åˆ†å¸ƒå’ŒäºŒé¡¹å¼åˆ†å¸ƒä¸­é€‰æ‹©ä¸€ä¸ªçš„è¯ï¼Œå‡åˆ†å¸ƒæ›´å¥½äº›ã€‚</p>
<h2 id="æ•£åº¦å¹¶éè·ç¦»"><a href="#æ•£åº¦å¹¶éè·ç¦»" class="headerlink" title="æ•£åº¦å¹¶éè·ç¦»"></a>æ•£åº¦å¹¶éè·ç¦»</h2><p>å¾ˆè‡ªç„¶åœ°ï¼Œä¸€äº›åŒå­¦æŠŠK-Læ•£åº¦çœ‹ä½œæ˜¯ä¸åŒåˆ†å¸ƒä¹‹é—´è·ç¦»çš„åº¦é‡ã€‚è¿™æ˜¯ä¸å¯¹çš„ï¼Œå› ä¸ºä»K-Læ•£åº¦çš„è®¡ç®—å…¬å¼å°±å¯ä»¥çœ‹å‡ºå®ƒä¸ç¬¦åˆå¯¹ç§°æ€§ï¼ˆè·ç¦»åº¦é‡åº”è¯¥æ»¡è¶³å¯¹ç§°æ€§ï¼‰ã€‚<code>Dkl (Observed || Binomial) != Dkl (Binomial || Observed)</code>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨<code>p</code>è¿‘ä¼¼<code>q</code>å’Œç”¨<code>q</code>è¿‘ä¼¼<code>p</code>ï¼ŒäºŒè€…æ‰€æŸå¤±çš„ä¿¡æ¯å¹¶ä¸æ˜¯ä¸€æ ·çš„ã€‚</p>
<h2 id="ä½¿ç”¨K-Læ•£åº¦ä¼˜åŒ–æ¨¡å‹"><a href="#ä½¿ç”¨K-Læ•£åº¦ä¼˜åŒ–æ¨¡å‹" class="headerlink" title="ä½¿ç”¨K-Læ•£åº¦ä¼˜åŒ–æ¨¡å‹"></a>ä½¿ç”¨K-Læ•£åº¦ä¼˜åŒ–æ¨¡å‹</h2><p>å‰é¢ä½¿ç”¨çš„äºŒé¡¹å¼åˆ†å¸ƒçš„å‚æ•°æ˜¯æ¦‚ç‡ <code>p=0.57</code>ï¼Œæ˜¯åŸå§‹æ•°æ®çš„å‡å€¼ã€‚<code>p</code>çš„å€¼åŸŸåœ¨ [0, 1] ä¹‹é—´ï¼Œæˆ‘ä»¬è¦é€‰æ‹©ä¸€ä¸ª<code>p</code>å€¼ï¼Œå»ºç«‹äºŒé¡¹å¼åˆ†å¸ƒï¼Œç›®çš„æ˜¯æœ€å°åŒ–è¿‘ä¼¼è¯¯å·®ï¼Œå³K-Læ•£åº¦ã€‚é‚£ä¹ˆ<code>0.57</code>æ˜¯æœ€ä¼˜çš„å—ï¼Ÿ<br> ä¸‹å›¾æ˜¯åŸå§‹æ•°æ®åˆ†å¸ƒå’ŒäºŒé¡¹å¼åˆ†å¸ƒçš„K-Læ•£åº¦å˜åŒ–éšäºŒé¡¹å¼åˆ†å¸ƒå‚æ•°<code>p</code>å˜åŒ–æƒ…å†µï¼š</p>
<p><img src="/images/blog/2021/divergence.webp" alt></p>
<p>é€šè¿‡ä¸Šé¢çš„æ›²çº¿å›¾å¯ä»¥çœ‹å‡ºï¼ŒK-Læ•£åº¦å€¼åœ¨åœ†ç‚¹å¤„æœ€å°ï¼Œå³<code>p=0.57</code>ã€‚æ‰€ä»¥æˆ‘ä»¬ä¹‹å‰çš„äºŒé¡¹å¼åˆ†å¸ƒæ¨¡å‹å·²ç»æ˜¯æœ€ä¼˜çš„äºŒé¡¹å¼æ¨¡å‹äº†ã€‚æ³¨æ„ï¼Œæˆ‘å·²ç»è¯´äº†ï¼Œæ˜¯è€Œåƒæ˜¯æ¨¡å‹ï¼Œè¿™é‡Œåªé™å®šåœ¨äºŒé¡¹å¼æ¨¡å‹èŒƒå›´å†…ã€‚</p>
<p>å‰é¢åªè€ƒè™‘äº†å‡åˆ†å¸ƒæ¨¡å‹å’ŒäºŒé¡¹å¼åˆ†å¸ƒæ¨¡å‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è€ƒè™‘å¦å¤–ä¸€ç§æ¨¡å‹æ¥è¿‘ä¼¼åŸå§‹æ•°æ®ã€‚é¦–å…ˆæŠŠåŸå§‹æ•°æ®åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œ1ï¼‰0-5é¢—ç‰™é½¿çš„æ¦‚ç‡å’Œ 2ï¼‰6-10é¢—ç‰™é½¿çš„æ¦‚ç‡ã€‚ä¸€åªè •è™«çš„ç‰™é½¿æ•°é‡<code>x=i</code>çš„æ¦‚ç‡ä¸º<code>p/5</code>; <code>x=j</code>çš„æ¦‚ç‡ä¸º<code>(1-p) / 6</code>ï¼Œ<code>i=0,1,2,3,4,5</code>; <code>j=6,7,8,9,10</code>ã€‚<br>Ahaï¼Œæˆ‘ä»¬è‡ªå·±å»ºç«‹äº†ä¸€ä¸ªæ–°çš„ï¼ˆå¥‡æ€ªçš„ï¼‰æ¨¡å‹æ¥è¿‘ä¼¼åŸå§‹çš„åˆ†å¸ƒï¼Œæ¨¡å‹åªæœ‰ä¸€ä¸ªå‚æ•°<code>p</code>ï¼Œåƒå‰é¢é‚£æ ·ä¼˜åŒ–äºŒé¡¹å¼åˆ†å¸ƒçš„æ—¶å€™æ‰€åšçš„ä¸€æ ·ï¼Œè®©æˆ‘ä»¬ç”»å‡ºK-Læ•£åº¦å€¼éš<code>p</code>å˜åŒ–çš„æƒ…å†µï¼š<br><img src="/images/blog/2021/divergence1.webp" alt></p>
<p>å½“<code>p=0.47</code>æ—¶ï¼ŒK-Lå€¼å–æœ€å°å€¼<code>0.338</code>ã€‚ä¼¼æ›¾ç›¸è¯†å—ï¼Ÿå¯¹ï¼Œè¿™ä¸ªå€¼å’Œä½¿ç”¨å‡åˆ†å¸ƒçš„K-Læ•£åº¦å€¼æ˜¯ä¸€æ ·çš„ï¼ˆè¿™å¹¶ä¸èƒ½è¯´æ˜ä»€ä¹ˆï¼‰ï¼æˆ‘ä»¬è‡ªå·±éƒ½è¯´äº†ï¼Œè¿™æ˜¯ä¸ªå¥‡æ€ªçš„æ¨¡å‹ï¼Œåœ¨K-Lå€¼ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œæ›´å€¾å‘äºä½¿ç”¨æ›´å¸¸è§çš„ã€æ›´ç®€å•çš„å‡åˆ†å¸ƒæ¨¡å‹ã€‚å›å¤´çœ‹ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸€å°èŠ‚ä¸­ä½¿ç”¨K-Læ•£åº¦ä½œä¸ºç›®æ ‡æ–¹ç¨‹ï¼Œåˆ†åˆ«æ‰¾åˆ°äº†äºŒé¡¹å¼åˆ†å¸ƒæ¨¡å‹çš„å‚æ•°<code>p=0.57</code>å’Œä¸Šé¢è¿™ä¸ªéšæ‰‹å»ºç«‹çš„æ¨¡å‹çš„å‚æ•°<code>p=0.47</code>ã€‚æ˜¯çš„ï¼Œè¿™å°±æ˜¯æœ¬èŠ‚çš„é‡ç‚¹ï¼š<strong>ä½¿ç”¨K-Læ•£åº¦ä½œä¸ºç›®æ ‡æ–¹ç¨‹æ¥ä¼˜åŒ–æ¨¡å‹</strong>ã€‚å½“ç„¶ï¼Œæœ¬èŠ‚ä¸­çš„æ¨¡å‹éƒ½åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œä¹Ÿå¯ä»¥æ‹“å±•åˆ°æœ‰æ›´å¤šå‚æ•°çš„é«˜ç»´æ¨¡å‹ä¸­ã€‚</p>
<h2 id="å˜åˆ†è‡ªç¼–ç å™¨VAEså’Œå˜åˆ†è´å¶æ–¯æ³•"><a href="#å˜åˆ†è‡ªç¼–ç å™¨VAEså’Œå˜åˆ†è´å¶æ–¯æ³•" class="headerlink" title="å˜åˆ†è‡ªç¼–ç å™¨VAEså’Œå˜åˆ†è´å¶æ–¯æ³•"></a>å˜åˆ†è‡ªç¼–ç å™¨VAEså’Œå˜åˆ†è´å¶æ–¯æ³•</h2><p>å¦‚æœä½ ç†Ÿæ‚‰ç¥ç»ç½‘ç»œï¼Œä½ è‚¯èƒ½å·²ç»çŒœåˆ°æˆ‘ä»¬æ¥ä¸‹æ¥è¦å­¦ä¹ çš„å†…å®¹ã€‚é™¤å»ç¥ç»ç½‘ç»œç»“æ„çš„ç»†èŠ‚ä¿¡æ¯ä¸è°ˆï¼Œæ•´ä¸ªç¥ç»ç½‘ç»œæ¨¡å‹å…¶å®æ˜¯åœ¨æ„é€ ä¸€ä¸ªå‚æ•°æ•°é‡å·¨å¤§çš„å‡½æ•°ï¼ˆç™¾ä¸‡çº§ï¼Œç”šè‡³æ›´å¤šï¼‰ï¼Œä¸å¦¨è®°ä¸º<code>f(x)</code>ï¼Œé€šè¿‡è®¾å®šç›®æ ‡å‡½æ•°ï¼Œå¯ä»¥è®­ç»ƒç¥ç»ç½‘ç»œé€¼è¿‘éå¸¸å¤æ‚çš„çœŸå®å‡½æ•°<code>g(x)</code>ã€‚è®­ç»ƒçš„å…³é”®æ˜¯è¦è®¾å®šç›®æ ‡å‡½æ•°ï¼Œåé¦ˆç»™ç¥ç»ç½‘ç»œå½“å‰çš„è¡¨ç°å¦‚ä½•ã€‚è®­ç»ƒè¿‡ç¨‹å°±æ˜¯ä¸æ–­å‡å°ç›®æ ‡å‡½æ•°å€¼çš„è¿‡ç¨‹ã€‚</p>
<p>æˆ‘ä»¬å·²ç»çŸ¥é“K-Læ•£åº¦ç”¨æ¥åº¦é‡åœ¨é€¼è¿‘ä¸€ä¸ªåˆ†å¸ƒæ—¶çš„ä¿¡æ¯æŸå¤±é‡ã€‚K-Læ•£åº¦èƒ½å¤Ÿèµ‹äºˆç¥ç»ç½‘ç»œè¿‘ä¼¼è¡¨è¾¾éå¸¸å¤æ‚æ•°æ®åˆ†å¸ƒçš„èƒ½åŠ›ã€‚å˜åˆ†è‡ªç¼–ç å™¨ï¼ˆVariational Autoencodersï¼ŒVAEsï¼‰æ˜¯ä¸€ç§èƒ½å¤Ÿå­¦ä¹ æœ€ä½³è¿‘ä¼¼æ•°æ®é›†ä¸­ä¿¡æ¯çš„å¸¸ç”¨æ–¹æ³•ï¼Œ<a href="https://links.jianshu.com/go?to=https%3A%2F%2Farxiv.org%2Fabs%2F1606.05908" target="_blank" rel="noopener">Tutorial on Variational Autoencoders 2016</a>æ˜¯ä¸€ç¯‡å…³äºVAEsçš„éå¸¸ä¸é”™çš„æ•™ç¨‹ï¼Œé‡Œé¢è®²è¿°äº†å¦‚ä½•æ„å»ºVAEçš„ç»†èŠ‚ã€‚ <a href="https://links.jianshu.com/go?to=https%3A%2F%2Fmedium.com%2F%40dmonn%2Fwhat-are-variational-autoencoders-a-simple-explanation-ea7dccafb0e3" target="_blank" rel="noopener">What are Variational Autoencoders? A simple explanation</a>ç®€å•ä»‹ç»äº†VAEsï¼Œ<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fblog.keras.io%2Fbuilding-autoencoders-in-keras.html" target="_blank" rel="noopener">Building Autoencoders in Keras</a>ä»‹ç»äº†å¦‚ä½•åˆ©ç”¨Kerasåº“å®ç°å‡ ç§è‡ªç¼–ç å™¨ã€‚</p>
<p>å˜åˆ†è´å¶æ–¯æ–¹æ³•ï¼ˆVariational Bayesian Methodsï¼‰æ˜¯ä¸€ç§æ›´å¸¸è§çš„æ–¹æ³•ã€‚<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fwww.countbayesie.com%2Fblog%2F2015%2F3%2F3%2F6-amazing-trick-with-monte-carlo-simulations" target="_blank" rel="noopener">è¿™ç¯‡æ–‡ç« </a>ä»‹ç»äº†å¼ºå¤§çš„è’™ç‰¹å¡æ´›æ¨¡æ‹Ÿæ–¹æ³•èƒ½å¤Ÿè§£å†³å¾ˆå¤šæ¦‚ç‡é—®é¢˜ã€‚è’™ç‰¹å¡æ´›æ¨¡æ‹Ÿèƒ½å¤Ÿå¸®åŠ©è§£å†³è®¸å¤šè´å¶æ–¯æ¨ç†é—®é¢˜ä¸­çš„æ£˜æ‰‹ç§¯åˆ†é—®é¢˜ï¼Œå°½ç®¡è®¡ç®—å¼€é”€å¾ˆå¤§ã€‚åŒ…æ‹¬VAEåœ¨å†…çš„å˜åˆ†è´å¶æ–¯æ–¹æ³•ï¼Œéƒ½èƒ½ç”¨K-Læ•£åº¦ç”Ÿæˆä¼˜åŒ–çš„è¿‘ä¼¼åˆ†å¸ƒï¼Œè¿™ç§æ–¹æ³•å¯¹æ£˜æ‰‹ç§¯åˆ†é—®é¢˜èƒ½è¿›è¡Œæ›´é«˜æ•ˆçš„æ¨ç†ã€‚æ›´å¤šå˜åˆ†æ¨ç†ï¼ˆVariational Inferenceï¼‰çš„çŸ¥è¯†å¯ä»¥è®¿é—®<a href="https://links.jianshu.com/go?to=http%3A%2F%2Fedwardlib.org%2F" target="_blank" rel="noopener">Edward library for python</a>ã€‚</p>
<h2 id="è®¡ç®—KLæ•£åº¦çš„æ³¨æ„äº‹é¡¹"><a href="#è®¡ç®—KLæ•£åº¦çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="è®¡ç®—KLæ•£åº¦çš„æ³¨æ„äº‹é¡¹"></a>è®¡ç®—KLæ•£åº¦çš„æ³¨æ„äº‹é¡¹</h2><p><img src="/images/blog/2021/KL-notice.webp" alt></p>
<p><img src="/images/blog/2021/KL-notice1.webp" alt></p>
<ol>
<li>ä¿¡æ¯ç†µã€äº¤å‰ç†µã€ç›¸å¯¹ç†µ</li>
</ol>
<ul>
<li><p>ä¿¡æ¯ç†µï¼Œå³ç†µï¼Œé¦™æµ“ç†µã€‚ç¼–ç æ–¹æ¡ˆå®Œç¾æ—¶ï¼Œæœ€çŸ­å¹³å‡ç¼–ç é•¿åº¦ã€‚</p>
</li>
<li><p>äº¤å‰ç†µï¼Œcross-entropyã€‚ç¼–ç æ–¹æ¡ˆä¸ä¸€å®šå®Œç¾æ—¶ï¼ˆç”±äºå¯¹æ¦‚ç‡åˆ†å¸ƒçš„ä¼°è®¡ä¸ä¸€å®šæ­£ç¡®ï¼‰ï¼Œå¹³å‡ç¼–ç é•¿åº¦ã€‚æ˜¯ç¥ç»ç½‘ç»œå¸¸ç”¨çš„æŸå¤±å‡½æ•°ã€‚</p>
</li>
<li><p>ç›¸å¯¹ç†µï¼Œå³K-Læ•£åº¦ï¼Œrelative entropyã€‚ç¼–ç æ–¹æ¡ˆä¸ä¸€å®šå®Œç¾æ—¶ï¼Œå¹³å‡ç¼–ç é•¿åº¦ç›¸å¯¹äºæœ€å°å€¼çš„å¢åŠ å€¼ã€‚<br> æ›´è¯¦ç»†å¯¹æ¯”ï¼Œè§çŸ¥ä¹<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fwww.zhihu.com%2Fquestion%2F41252833" target="_blank" rel="noopener">å¦‚ä½•é€šä¿—çš„è§£é‡Šäº¤å‰ç†µä¸ç›¸å¯¹ç†µ?</a></p>
</li>
</ul>
<ol>
<li>ä¸ºä»€ä¹ˆåœ¨ç¥ç»ç½‘ç»œä¸­ä½¿ç”¨äº¤å‰ç†µæŸå¤±å‡½æ•°ï¼Œè€Œä¸æ˜¯K-Læ•£åº¦ï¼Ÿ<br>K-Læ•£åº¦=äº¤å‰ç†µ-ç†µï¼Œå³ <code>DKL( p||q )=H(p,q)âˆ’H(p)</code>ã€‚<br>åœ¨ç¥ç»ç½‘ç»œæ‰€æ¶‰åŠåˆ°çš„èŒƒå›´å†…ï¼Œ<code>H(p)</code>ä¸å˜ï¼Œåˆ™<code>DKL( p||q )</code>ç­‰ä»·<code>H(p,q)</code>ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>Algorithms</category>
      </categories>
      <tags>
        <tag>K-L divergence</tag>
        <tag>KLæ•£åº¦</tag>
        <tag>ç›¸å¯¹ç†µ</tag>
      </tags>
  </entry>
  <entry>
    <title>sklearn.metrics.precision_recall_curve()æºç é˜…è¯»</title>
    <url>/2021/01/12/sklearn-metrics-precision-recall-curve-%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/</url>
    <content><![CDATA[<h1 id="ä¸»å‡½æ•°"><a href="#ä¸»å‡½æ•°" class="headerlink" title="ä¸»å‡½æ•°"></a>ä¸»å‡½æ•°</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@_deprecate_positional_args</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">precision_recall_curve</span><span class="params">(y_true, probas_pred, *, pos_label=None,</span></span></span><br><span class="line"><span class="function"><span class="params">                           sample_weight=None)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    ----------</span></span><br><span class="line"><span class="string">    y_true : ndarray of shape (n_samples,)</span></span><br><span class="line"><span class="string">        True binary labels. If labels are not either &#123;-1, 1&#125; or &#123;0, 1&#125;, then</span></span><br><span class="line"><span class="string">        pos_label should be explicitly given.</span></span><br><span class="line"><span class="string">    probas_pred : ndarray of shape (n_samples,)</span></span><br><span class="line"><span class="string">        Estimated probabilities or output of a decision function.</span></span><br><span class="line"><span class="string">    pos_label : int or str, default=None</span></span><br><span class="line"><span class="string">        The label of the positive class.</span></span><br><span class="line"><span class="string">        When ``pos_label=None``, if y_true is in &#123;-1, 1&#125; or &#123;0, 1&#125;,</span></span><br><span class="line"><span class="string">        ``pos_label`` is set to 1, otherwise an error will be raised.</span></span><br><span class="line"><span class="string">    sample_weight : array-like of shape (n_samples,), default=None</span></span><br><span class="line"><span class="string">        Sample weights.</span></span><br><span class="line"><span class="string">    Returns</span></span><br><span class="line"><span class="string">    -------</span></span><br><span class="line"><span class="string">    precision : ndarray of shape (n_thresholds + 1,)</span></span><br><span class="line"><span class="string">        Precision values such that element i is the precision of</span></span><br><span class="line"><span class="string">        predictions with score &gt;= thresholds[i] and the last element is 1.</span></span><br><span class="line"><span class="string">    recall : ndarray of shape (n_thresholds + 1,)</span></span><br><span class="line"><span class="string">        Decreasing recall values such that element i is the recall of</span></span><br><span class="line"><span class="string">        predictions with score &gt;= thresholds[i] and the last element is 0.</span></span><br><span class="line"><span class="string">    thresholds : ndarray of shape (n_thresholds,)</span></span><br><span class="line"><span class="string">        Increasing thresholds on the decision function used to compute</span></span><br><span class="line"><span class="string">        precision and recall. n_thresholds &lt;= len(np.unique(probas_pred)).</span></span><br><span class="line"><span class="string">    See Also</span></span><br><span class="line"><span class="string">    --------</span></span><br><span class="line"><span class="string">    plot_precision_recall_curve : Plot Precision Recall Curve for binary</span></span><br><span class="line"><span class="string">        classifiers.</span></span><br><span class="line"><span class="string">    PrecisionRecallDisplay : Precision Recall visualization.</span></span><br><span class="line"><span class="string">    average_precision_score : Compute average precision from prediction scores.</span></span><br><span class="line"><span class="string">    det_curve: Compute error rates for different probability thresholds.</span></span><br><span class="line"><span class="string">    roc_curve : Compute Receiver operating characteristic (ROC) curve.</span></span><br><span class="line"><span class="string">    Examples</span></span><br><span class="line"><span class="string">    --------</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; import numpy as np</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; from sklearn.metrics import precision_recall_curve</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; y_true = np.array([0, 0, 1, 1])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; y_scores = np.array([0.1, 0.4, 0.35, 0.8])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; precision, recall, thresholds = precision_recall_curve(</span></span><br><span class="line"><span class="string">    ...     y_true, y_scores)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; precision</span></span><br><span class="line"><span class="string">    array([0.66666667, 0.5       , 1.        , 1.        ])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; recall</span></span><br><span class="line"><span class="string">    array([1. , 0.5, 0.5, 0. ])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; thresholds</span></span><br><span class="line"><span class="string">    array([0.35, 0.4 , 0.8 ])</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    fps, tps, thresholds = _binary_clf_curve(y_true, probas_pred,</span><br><span class="line">                                             pos_label=pos_label,</span><br><span class="line">                                             sample_weight=sample_weight)</span><br><span class="line"></span><br><span class="line">    precision = tps / (tps + fps)</span><br><span class="line">    precision[np.isnan(precision)] = <span class="number">0</span></span><br><span class="line">    recall = tps / tps[<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># stop when full recall attained</span></span><br><span class="line">    <span class="comment"># and reverse the outputs so recall is decreasing</span></span><br><span class="line">    last_ind = tps.searchsorted(tps[<span class="number">-1</span>])</span><br><span class="line">    sl = slice(last_ind, <span class="literal">None</span>, <span class="number">-1</span>)</span><br><span class="line">    <span class="keyword">return</span> np.r_[precision[sl], <span class="number">1</span>], np.r_[recall[sl], <span class="number">0</span>], thresholds[sl]</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>ç„¶åç”¨åˆ°<code>_binary_clf_curve</code>ï¼Œå»çœ‹ä¸€çœ¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_binary_clf_curve</span><span class="params">(y_true, y_score, pos_label=None, sample_weight=None)</span>:</span></span><br><span class="line">    <span class="string">"""Calculate true and false positives per binary classification threshold.</span></span><br><span class="line"><span class="string">    Parameters</span></span><br><span class="line"><span class="string">    ----------</span></span><br><span class="line"><span class="string">    y_true : ndarray of shape (n_samples,)</span></span><br><span class="line"><span class="string">        True targets of binary classification.</span></span><br><span class="line"><span class="string">    y_score : ndarray of shape (n_samples,)</span></span><br><span class="line"><span class="string">        Estimated probabilities or output of a decision function.</span></span><br><span class="line"><span class="string">    pos_label : int or str, default=None</span></span><br><span class="line"><span class="string">        The label of the positive class.</span></span><br><span class="line"><span class="string">    sample_weight : array-like of shape (n_samples,), default=None</span></span><br><span class="line"><span class="string">        Sample weights.</span></span><br><span class="line"><span class="string">    Returns</span></span><br><span class="line"><span class="string">    -------</span></span><br><span class="line"><span class="string">    fps : ndarray of shape (n_thresholds,)</span></span><br><span class="line"><span class="string">        A count of false positives, at index i being the number of negative</span></span><br><span class="line"><span class="string">        samples assigned a score &gt;= thresholds[i]. The total number of</span></span><br><span class="line"><span class="string">        negative samples is equal to fps[-1] (thus true negatives are given by</span></span><br><span class="line"><span class="string">        fps[-1] - fps).</span></span><br><span class="line"><span class="string">    tps : ndarray of shape (n_thresholds,)</span></span><br><span class="line"><span class="string">        An increasing count of true positives, at index i being the number</span></span><br><span class="line"><span class="string">        of positive samples assigned a score &gt;= thresholds[i]. The total</span></span><br><span class="line"><span class="string">        number of positive samples is equal to tps[-1] (thus false negatives</span></span><br><span class="line"><span class="string">        are given by tps[-1] - tps).</span></span><br><span class="line"><span class="string">    thresholds : ndarray of shape (n_thresholds,)</span></span><br><span class="line"><span class="string">        Decreasing score values.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="comment"># Check to make sure y_true is valid</span></span><br><span class="line">    y_type = type_of_target(y_true)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> (y_type == <span class="string">"binary"</span> <span class="keyword">or</span></span><br><span class="line">            (y_type == <span class="string">"multiclass"</span> <span class="keyword">and</span> pos_label <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>)):</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">"&#123;0&#125; format is not supported"</span>.format(y_type))</span><br><span class="line"></span><br><span class="line">    check_consistent_length(y_true, y_score, sample_weight)</span><br><span class="line">    y_true = column_or_1d(y_true)</span><br><span class="line">    y_score = column_or_1d(y_score)</span><br><span class="line">    assert_all_finite(y_true)</span><br><span class="line">    assert_all_finite(y_score)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> sample_weight <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        sample_weight = column_or_1d(sample_weight)</span><br><span class="line"></span><br><span class="line">    pos_label = _check_pos_label_consistency(pos_label, y_true)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># make y_true a boolean vector</span></span><br><span class="line">    y_true = (y_true == pos_label)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># sort scores and corresponding truth values</span></span><br><span class="line">    desc_score_indices = np.argsort(y_score, kind=<span class="string">"mergesort"</span>)[::<span class="number">-1</span>]</span><br><span class="line">    y_score = y_score[desc_score_indices]</span><br><span class="line">    y_true = y_true[desc_score_indices]</span><br><span class="line">    <span class="keyword">if</span> sample_weight <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        weight = sample_weight[desc_score_indices]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        weight = <span class="number">1.</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># y_score typically has many tied values. Here we extract</span></span><br><span class="line">    <span class="comment"># the indices associated with the distinct values. We also</span></span><br><span class="line">    <span class="comment"># concatenate a value for the end of the curve.</span></span><br><span class="line">    distinct_value_indices = np.where(np.diff(y_score))[<span class="number">0</span>]</span><br><span class="line">    threshold_idxs = np.r_[distinct_value_indices, y_true.size - <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># accumulate the true positives with decreasing threshold</span></span><br><span class="line">    tps = stable_cumsum(y_true * weight)[threshold_idxs]</span><br><span class="line">    <span class="keyword">if</span> sample_weight <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="comment"># express fps as a cumsum to ensure fps is increasing even in</span></span><br><span class="line">        <span class="comment"># the presence of floating point errors</span></span><br><span class="line">        fps = stable_cumsum((<span class="number">1</span> - y_true) * weight)[threshold_idxs]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        fps = <span class="number">1</span> + threshold_idxs - tps</span><br><span class="line">    <span class="keyword">return</span> fps, tps, y_score[threshold_idxs]</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨åˆ°numpyè¿›è¡Œå½’å¹¶æ’åºï¼Œè¿˜ç”¨åˆ°äº†<code>::</code>å†™æ³•ï¼Œå³seq[startâ€‹ : end : sâ€‹tep]ï¼Œ</p>
]]></content>
      <categories>
        <category>Algorithms</category>
      </categories>
      <tags>
        <tag>source code</tag>
        <tag>PR-Curve</tag>
        <tag>sklearn</tag>
        <tag>scikit-learn</tag>
        <tag>precision_recall_curve</tag>
      </tags>
  </entry>
  <entry>
    <title>ç®±çº¿å›¾</title>
    <url>/2021/01/11/%E7%AE%B1%E7%BA%BF%E5%9B%BE/</url>
    <content><![CDATA[<p>æ€»æ˜¯å¯ä»¥çœ‹åˆ°ç®±çº¿å›¾ï¼Œä½†æ˜¯å´ä¸çŸ¥é“æ€ä¹ˆè¯»ï¼Ÿä»Šå¤©åˆçœ‹åˆ°äº†ï¼Œå°±åšä¸€ä¸ªäº†è§£ã€‚</p>
<h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><p>ç®±å½¢å›¾ï¼ˆBox-plotï¼‰åˆç§°ä¸ºç›’é¡»å›¾ã€ç›’å¼å›¾æˆ–ç®±çº¿å›¾ï¼Œæ˜¯ä¸€ç§ç”¨ä½œæ˜¾ç¤ºä¸€ç»„æ•°æ®åˆ†æ•£æƒ…å†µèµ„æ–™çš„ç»Ÿè®¡å›¾ã€‚å› å½¢çŠ¶å¦‚ç®±å­è€Œå¾—åã€‚åœ¨å„ç§é¢†åŸŸä¹Ÿç»å¸¸è¢«ä½¿ç”¨ï¼Œå¸¸è§äº<a href="https://baike.baidu.com/item/å“è´¨ç®¡ç†/9207881" target="_blank" rel="noopener">å“è´¨ç®¡ç†</a>ã€‚å®ƒä¸»è¦ç”¨äºåæ˜ åŸå§‹æ•°æ®åˆ†å¸ƒçš„ç‰¹å¾ï¼Œè¿˜å¯ä»¥è¿›è¡Œå¤šç»„æ•°æ®åˆ†å¸ƒç‰¹å¾çš„æ¯” è¾ƒã€‚ç®±çº¿å›¾çš„ç»˜åˆ¶æ–¹æ³•æ˜¯ï¼šå…ˆæ‰¾å‡ºä¸€ç»„æ•°æ®çš„ä¸Šè¾¹ç¼˜ã€ä¸‹è¾¹ç¼˜ã€ä¸­ä½æ•°å’Œä¸¤ä¸ªå››åˆ†ä½æ•°ï¼›ç„¶åï¼Œ è¿æ¥ä¸¤ä¸ªå››åˆ†ä½æ•°ç”»å‡ºç®±ä½“ï¼›å†å°†ä¸Šè¾¹ç¼˜å’Œä¸‹è¾¹ç¼˜ä¸ç®±ä½“ç›¸è¿æ¥ï¼Œä¸­ä½æ•°åœ¨ç®±ä½“ä¸­é—´ã€‚</p>
<p><img src="/images/blog/2021/box-plot.jpg" alt></p>
<p>â€œç›’å¼å›¾â€æˆ–å«â€<a href="https://baike.baidu.com/item/ç›’é¡»å›¾" target="_blank" rel="noopener">ç›’é¡»å›¾</a>â€œâ€ç®±å½¢å›¾â€boxplotï¼ˆä¹Ÿç§°ç®±é¡»å›¾(Box-whiskerPlotï¼‰é¡»å›¾åˆç§°ä¸ºç®±å½¢å›¾ï¼Œå…¶ç»˜åˆ¶é¡»ä½¿ç”¨å¸¸ç”¨çš„<a href="https://baike.baidu.com/item/ç»Ÿè®¡é‡" target="_blank" rel="noopener">ç»Ÿè®¡é‡</a>ï¼Œèƒ½æä¾›æœ‰å…³æ•°æ®ä½ç½®å’Œåˆ†æ•£æƒ…å†µçš„å…³é”®ä¿¡æ¯ï¼Œå°¤å…¶åœ¨æ¯”è¾ƒä¸åŒçš„æ¯ä½“æ•°æ®æ—¶æ›´å¯è¡¨ç°å…¶å·®å¼‚ã€‚</p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ ‡ç¤ºäº†å›¾ä¸­æ¯æ¡çº¿è¡¨ç¤ºçš„å«ä¹‰ï¼Œå…¶ä¸­åº”ç”¨åˆ°äº†åˆ†ä½å€¼ï¼ˆæ•°ï¼‰çš„æ¦‚å¿µã€‚</p>
<p>ä¸»è¦åŒ…å«å…­ä¸ªæ•°æ®èŠ‚ç‚¹ï¼Œå°†ä¸€ç»„æ•°æ®ä»å¤§åˆ°å°æ’åˆ—ï¼Œåˆ†åˆ«è®¡ç®—å‡ºä»–çš„ä¸Šè¾¹ç¼˜ï¼Œä¸Š<a href="https://baike.baidu.com/item/å››åˆ†ä½æ•°" target="_blank" rel="noopener">å››åˆ†ä½æ•°</a>Q3ï¼Œ<a href="https://baike.baidu.com/item/ä¸­ä½æ•°" target="_blank" rel="noopener">ä¸­ä½æ•°</a>ï¼Œä¸‹å››åˆ†ä½æ•°Q1ï¼Œä¸‹è¾¹ç¼˜ï¼Œè¿˜æœ‰ä¸€ä¸ª<a href="https://baike.baidu.com/item/å¼‚å¸¸å€¼" target="_blank" rel="noopener">å¼‚å¸¸å€¼</a>ã€‚</p>
]]></content>
      <categories>
        <category>Others</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>ç®±çº¿å›¾</tag>
        <tag>box-plot</tag>
      </tags>
  </entry>
  <entry>
    <title>å¼‚å¸¸æ£€æµ‹</title>
    <url>/2021/01/11/%E6%B7%B1%E5%BA%A6%E5%BC%82%E5%B8%B8%E6%A3%80%E6%B5%8B/</url>
    <content><![CDATA[<h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><p>æ ¹æ®ç»´åŸºç™¾ç§‘ï¼š</p>
<blockquote>
<p>åœ¨<a href="https://zh.wikipedia.org/wiki/æ•°æ®æŒ–æ˜" target="_blank" rel="noopener">æ•°æ®æŒ–æ˜</a>ä¸­ï¼Œ<strong>å¼‚å¸¸æ£€æµ‹</strong>ï¼ˆè‹±è¯­ï¼š<strong>anomaly detection</strong>ï¼‰å¯¹ä¸ç¬¦åˆé¢„æœŸæ¨¡å¼æˆ–<a href="https://zh.wikipedia.org/w/index.php?title=æ•°æ®é›†&amp;action=edit&amp;redlink=1" target="_blank" rel="noopener">æ•°æ®é›†</a>ä¸­å…¶ä»–é¡¹ç›®çš„é¡¹ç›®ã€äº‹ä»¶æˆ–è§‚æµ‹å€¼çš„è¯†åˆ«ã€‚<a href="https://zh.wikipedia.org/wiki/å¼‚å¸¸æ£€æµ‹#cite_note-ChandolaSurvey-1" target="_blank" rel="noopener">[1]</a> é€šå¸¸å¼‚å¸¸é¡¹ç›®ä¼šè½¬å˜æˆ<a href="https://zh.wikipedia.org/w/index.php?title=é“¶è¡Œæ¬ºè¯ˆ&amp;action=edit&amp;redlink=1" target="_blank" rel="noopener">é“¶è¡Œæ¬ºè¯ˆ</a>ã€ç»“æ„ç¼ºé™·ã€åŒ»ç–—é—®é¢˜ã€æ–‡æœ¬é”™è¯¯ç­‰ç±»å‹çš„é—®é¢˜ã€‚å¼‚å¸¸ä¹Ÿè¢«ç§°ä¸ºç¦»ç¾¤å€¼ã€æ–°å¥‡ã€å™ªå£°ã€åå·®å’Œä¾‹å¤–ã€‚</p>
</blockquote>
<p>æœ‰ä¸‰å¤§ç±»å¼‚å¸¸æ£€æµ‹æ–¹æ³•ã€‚<a href="https://zh.wikipedia.org/wiki/å¼‚å¸¸æ£€æµ‹#cite_note-ChandolaSurvey-1" target="_blank" rel="noopener">[1]</a> åœ¨å‡è®¾æ•°æ®é›†ä¸­å¤§å¤šæ•°å®ä¾‹éƒ½æ˜¯æ­£å¸¸çš„å‰æä¸‹ï¼Œ<strong>æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹</strong>æ–¹æ³•èƒ½é€šè¿‡å¯»æ‰¾ä¸å…¶ä»–æ•°æ®æœ€ä¸åŒ¹é…çš„å®ä¾‹æ¥æ£€æµ‹å‡ºæœªæ ‡è®°æµ‹è¯•æ•°æ®çš„å¼‚å¸¸ã€‚<strong>ç›‘ç£å¼å¼‚å¸¸æ£€æµ‹</strong>æ–¹æ³•éœ€è¦ä¸€ä¸ªå·²ç»è¢«æ ‡è®°â€œæ­£å¸¸â€ä¸â€œå¼‚å¸¸â€çš„æ•°æ®é›†ï¼Œå¹¶æ¶‰åŠåˆ°è®­ç»ƒåˆ†ç±»å™¨ï¼ˆä¸è®¸å¤šå…¶ä»–çš„<a href="https://zh.wikipedia.org/wiki/åˆ†ç±»é—®é¢˜" target="_blank" rel="noopener">ç»Ÿè®¡åˆ†ç±»é—®é¢˜</a>çš„å…³é”®åŒºåˆ«æ˜¯å¼‚å¸¸æ£€æµ‹çš„å†…åœ¨ä¸å‡è¡¡æ€§ï¼‰ã€‚<strong>åŠç›‘ç£å¼å¼‚å¸¸æ£€æµ‹</strong>æ–¹æ³•æ ¹æ®ä¸€ä¸ªç»™å®šçš„<em>æ­£å¸¸</em>è®­ç»ƒæ•°æ®é›†åˆ›å»ºä¸€ä¸ªè¡¨ç¤ºæ­£å¸¸è¡Œä¸ºçš„æ¨¡å‹ï¼Œç„¶åæ£€æµ‹ç”±å­¦ä¹ æ¨¡å‹ç”Ÿæˆçš„æµ‹è¯•å®ä¾‹çš„å¯èƒ½æ€§ã€‚</p>
<a id="more"></a>
<h1 id="æ£€æµ‹æ–¹æ³•"><a href="#æ£€æµ‹æ–¹æ³•" class="headerlink" title="æ£€æµ‹æ–¹æ³•"></a>æ£€æµ‹æ–¹æ³•</h1><p>ã€1ã€‘åŸºäºç»Ÿè®¡æ¨¡å‹çš„æ–¹æ³•ï¼šé¦–å…ˆå»ºç«‹ä¸€ä¸ªæ•°æ®æ¨¡å‹ï¼Œ<font color="orange">å¼‚å¸¸æ˜¯é‚£äº›åŒæ¨¡å‹ä¸èƒ½å®Œç¾æ‹Ÿåˆçš„å¯¹è±¡</font>ï¼›å¦‚æœæ¨¡å‹æ˜¯<strong>ç°‡çš„é›†åˆ</strong>ï¼Œåˆ™å¼‚å¸¸æ˜¯ä¸æ˜¾è‘—å±äºä»»ä½•ç°‡çš„å¯¹è±¡ï¼›åœ¨ä½¿ç”¨<strong>å›å½’æ¨¡å‹</strong>æ—¶ï¼Œå¼‚å¸¸æ˜¯ç›¸å¯¹è¿œç¦»é¢„æµ‹å€¼çš„å¯¹è±¡ã€‚</p>
<p>ã€2ã€‘åŸºäºé‚»è¿‘åº¦çš„æ–¹æ³•ï¼šé€šå¸¸å¯ä»¥åœ¨å¯¹è±¡ä¹‹é—´å®šä¹‰é‚»è¿‘æ€§åº¦é‡ï¼Œå¼‚å¸¸å¯¹è±¡æ˜¯é‚£äº›è¿œç¦»å…¶ä»–å¯¹è±¡çš„å¯¹è±¡ã€‚</p>
<p>ã€3ã€‘åŸºäºå¯†åº¦çš„æ–¹æ³•ï¼šä»…å½“ä¸€ä¸ªç‚¹çš„å±€éƒ¨å¯†åº¦æ˜¾è‘—ä½äºå®ƒçš„å¤§éƒ¨åˆ†è¿‘é‚»æ—¶æ‰å°†å…¶åˆ†ç±»ä¸ºç¦»ç¾¤ç‚¹ã€‚</p>
<p>ã€4ã€‘åŸºäºèšç±»çš„æ–¹æ³•ï¼šèšç±»åˆ†æç”¨äºå‘ç°å±€éƒ¨å¼ºç›¸å…³çš„å¯¹è±¡ç»„ï¼Œè€Œå¼‚å¸¸æ£€æµ‹ç”¨æ¥å‘ç°ä¸ä¸å…¶ä»–å¯¹è±¡å¼ºç›¸å…³çš„å¯¹è±¡ã€‚å› æ­¤ï¼Œèšç±»åˆ†æéå¸¸è‡ªç„¶çš„å¯ä»¥ç”¨äºç¦»ç¾¤ç‚¹æ£€æµ‹ã€‚</p>
]]></content>
      <categories>
        <category>Algorithms</category>
      </categories>
      <tags>
        <tag>å¼‚å¸¸æ£€æµ‹</tag>
        <tag>anomaly detection</tag>
        <tag>deep</tag>
      </tags>
  </entry>
  <entry>
    <title>DSREæµ‹è¯•æ—¶çš„batch_size</title>
    <url>/2021/01/10/DSRE%E6%B5%8B%E8%AF%95%E6%97%B6%E7%9A%84batch-size/</url>
    <content><![CDATA[<p>åœ¨è¿›è¡Œè¿œç¨‹ç›‘ç£å…³ç³»æŠ½å–æµ‹è¯•é˜¶æ®µï¼Œç”±äºæ¯ä¸ªåŒ…ä¸­å«æœ‰çš„å¥å­æ•°ä¸åŒï¼Œå°‘çš„åªå«æœ‰1ä¸ªå¥å­çš„åŒ…æœ‰1149ä¸ªï¼Œä½†æ˜¯æœ€å¤šçš„1ä¸ªåŒ…å«æœ‰138ä¸ªå¥å­ã€‚æ‹…å¿ƒä½¿ç”¨BERTæµ‹è¯•æ—¶ï¼Œä¼šå‡ºç°çˆ†æ˜¾å­˜çš„é—®é¢˜ã€‚</p>
<h1 id="æ˜¾å­˜å ç”¨"><a href="#æ˜¾å­˜å ç”¨" class="headerlink" title="æ˜¾å­˜å ç”¨"></a>æ˜¾å­˜å ç”¨</h1><p>åœ¨è¯„ä¼°æ—¶batch_sizeè®¾ä¸º8ä¹Ÿå®Œå…¨ä¸ä¼šè¶…æ˜¾å­˜ï¼Œæ‰å ç”¨9875MBå·¦å³ã€‚<br>å°†batch_sizeè®¾ä¸º64å ç”¨16547MBå·¦å³æ˜¾å­˜ï¼Œ<strong>å³°å€¼28539MB</strong>ï¼Œå†å¤šå¯èƒ½å°±è¶…äº†ã€‚</p>
<h1 id="æ˜¯å¦æˆªæ–­ï¼Ÿ"><a href="#æ˜¯å¦æˆªæ–­ï¼Ÿ" class="headerlink" title="æ˜¯å¦æˆªæ–­ï¼Ÿ"></a>æ˜¯å¦æˆªæ–­ï¼Ÿ</h1><p>æµ‹è¯•é›†ä¸­å«æœ‰1758ä¸ªåŒ…ï¼Œæ¯ä¸ªåŒ…53ä¸ªç±»åˆ«ï¼Œæ€»ç±»åˆ«æ•°ä¸ºï¼š</p>
<p>$1758 * 53 = 93174$</p>
<p>æ˜¯å¦éœ€è¦å¯¹å…¶æˆªæ–­å‘¢ï¼Ÿ</p>
<p>æŒ‰ç…§DISTREçš„æ–¹å¼ï¼Œæˆªå–å‰50000ä¸ªï¼Œå¾—åˆ°çš„<code>auc</code>å€¼ä¸ºï¼š0.0290428</p>
<p>è‹¥ä¸æˆªæ–­ï¼Œå¾—åˆ°çš„<code>auc</code>å€¼ä¸ºï¼š0.0290428</p>
<p>å¯ä»¥çœ‹åˆ°æ˜¯å¦æˆªæ–­å¯¹<code>auc</code>å€¼çš„è®¡ç®—è¿˜æ˜¯æœ‰å½±å“çš„ï¼Œä¿ç•™çš„è¶Šå¤šï¼Œç†æ‰€åº”å½“å¯¹åº”çš„é¢ç§¯å°±è¶Šå¤§ï¼Œæ‰€ä»¥<code>auc</code>å€¼å°±è¶Šé«˜ã€‚<strong><em>ä½†æ˜¯ï¼Œç”±äºåé¢æ•°å€¼è¿‡å°ï¼Œæ‰€ä»¥å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œä¹Ÿå¯èƒ½å¯¹ç»“æœæ²¡æœ‰å½±å“ã€‚</em></strong></p>
<a id="more"></a>
<h1 id="ä¸åŒbatch-sizeå¯¹aucå½±å“"><a href="#ä¸åŒbatch-sizeå¯¹aucå½±å“" class="headerlink" title="ä¸åŒbatch_sizeå¯¹aucå½±å“"></a>ä¸åŒbatch_sizeå¯¹aucå½±å“</h1><p>å½“batch_sizeè®¾ä¸º64ï¼Œ<code>auc</code>å€¼ä¸ºï¼š0.0290429</p>
<p>å½“batch_sizeè®¾ä¸º8ï¼Œ  <code>auc</code>å€¼ä¸ºï¼š0.0292178</p>
<p>å½“batch_sizeè®¾ä¸º1ï¼Œ  <code>auc</code>å€¼ä¸ºï¼š0.0290395</p>
<font color="orange">ä¸ºä»€ä¹ˆä¸åŒçš„batch_sizeè®¾ç½®ä¼šå¯¼è‡´è®¡ç®—çš„`auc`ç»“æœä¸åŒå‘¢ï¼Ÿä»ç†è®ºä¸Šè®²è¿™ä¸ªæ˜¯ä¸åˆç†çš„ã€‚</font>æ‰“å°logitså’ŒlabelsæŸ¥çœ‹ï¼Œå‘ç°**ç¡®å®ä¸åŒ**ï¼š

å½“batch_size=1:

<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">[[<span class="number">0.00892705</span> <span class="number">0.00151212</span> <span class="number">0.00814364</span> <span class="number">0.00080609</span> <span class="number">0.00226246</span> <span class="number">0.00350421</span></span><br><span class="line">  <span class="number">0.0011088</span>  <span class="number">0.01335552</span> <span class="number">0.00449597</span> <span class="number">0.00577065</span>]</span><br><span class="line"> [<span class="number">0.00675167</span> <span class="number">0.00236401</span> <span class="number">0.00788459</span> <span class="number">0.0009495</span>  <span class="number">0.00175571</span> <span class="number">0.00618613</span></span><br><span class="line">  <span class="number">0.00157026</span> <span class="number">0.03045319</span> <span class="number">0.00293169</span> <span class="number">0.01477546</span>]</span><br><span class="line"> [<span class="number">0.00760224</span> <span class="number">0.00332207</span> <span class="number">0.00867613</span> <span class="number">0.00068079</span> <span class="number">0.00131133</span> <span class="number">0.00436077</span></span><br><span class="line">  <span class="number">0.00407064</span> <span class="number">0.03283269</span> <span class="number">0.00417252</span> <span class="number">0.00687293</span>]]</span><br></pre></td></tr></table></figure>

å½“batch_size=8:

<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">[[<span class="number">0.00892705</span> <span class="number">0.00151212</span> <span class="number">0.00814363</span> <span class="number">0.00080609</span> <span class="number">0.00226246</span> <span class="number">0.00350421</span></span><br><span class="line">  <span class="number">0.0011088</span>  <span class="number">0.01335552</span> <span class="number">0.00449597</span> <span class="number">0.00577066</span>]</span><br><span class="line"> [<span class="number">0.00675167</span> <span class="number">0.00236401</span> <span class="number">0.00788459</span> <span class="number">0.0009495</span>  <span class="number">0.00175571</span> <span class="number">0.00618613</span></span><br><span class="line">  <span class="number">0.00157026</span> <span class="number">0.03045319</span> <span class="number">0.00293169</span> <span class="number">0.01477545</span>]</span><br><span class="line"> [<span class="number">0.00675167</span> <span class="number">0.00236401</span> <span class="number">0.00788459</span> <span class="number">0.0009495</span>  <span class="number">0.00175571</span> <span class="number">0.00618613</span></span><br><span class="line">  <span class="number">0.00157026</span> <span class="number">0.03045319</span> <span class="number">0.00293169</span> <span class="number">0.01477545</span>]]</span><br></pre></td></tr></table></figure>

ä½†æ˜¯è¾“å…¥æ•°æ®æ˜¯æ²¡æœ‰shuffleçš„ï¼Œæ‰“å°æŸ¥çœ‹ï¼Œç¡®å®è¾“å…¥é¡ºåºä¿æŒä¸€è‡´ã€‚

<font color="red">***ä¼°è®¡æ˜¯BERTä¸­çš„normalizationå±‚å¯¹äºä¸åŒçš„batch_sizeä¼šæœ‰ä¸åŒçš„å°çš„åç½®ï¼Œå¯¼è‡´ç»“æœçš„è½»å¾®æ³¢åŠ¨ï¼***</font>

]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
        <category>Distant Supervision</category>
      </categories>
      <tags>
        <tag>relation extraction</tag>
        <tag>distant supervision</tag>
        <tag>batch_size</tag>
        <tag>batch</tag>
        <tag>auc</tag>
      </tags>
  </entry>
  <entry>
    <title>è®ºæ–‡é¢˜ç›®æ€ä¹ˆèµ·ï¼Ÿ</title>
    <url>/2021/01/09/%E8%AE%BA%E6%96%87%E9%A2%98%E7%9B%AE%E6%80%8E%E4%B9%88%E8%B5%B7%EF%BC%9F/</url>
    <content><![CDATA[<p>æœ€è¿‘åœ¨å†™è®ºæ–‡å‡†å¤‡æŠ•ç¨¿ï¼Œä½†æ˜¯è®ºæ–‡é¢˜ç›®è¿˜æ²¡æœ‰æƒ³å¥½ï¼Œè¯¥æ€ä¹ˆç»™è®ºæ–‡èµ·ä¸€ä¸ªå¥½åå­—å‘¢ï¼Ÿå»çœ‹äº†ä¸€äº›ç›¸å…³å·¥ä½œçš„è®ºæ–‡é¢˜ç›®ï¼Œæ€»ç»“ä¸€äº›ç»éªŒã€‚</p>
<h1 id="è®ºæ–‡é¢˜ç›®"><a href="#è®ºæ–‡é¢˜ç›®" class="headerlink" title="è®ºæ–‡é¢˜ç›®"></a>è®ºæ–‡é¢˜ç›®</h1><h2 id="é—®å¥å¼"><a href="#é—®å¥å¼" class="headerlink" title="é—®å¥å¼"></a>é—®å¥å¼</h2><p>Are Noisy Sentences Useless for Distant Supervised Relation Extraction?</p>
<p>è¿™ç§å¯ä»¥ç»™äººç•™ä¸‹è¾ƒæ·±çš„å°è±¡ï¼Œåœ¨ä¼—å¤šçš„è®ºæ–‡ä¸­è„±é¢–è€Œå‡ºã€‚è€Œä¸”å¾ˆæ¸…æ™°åœ°è¡¨è¾¾äº†è®ºæ–‡çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚ç±»ä¼¼çš„è¿˜æœ‰å¤§åé¼é¼çš„ï¼š</p>
<p>Attention is All You Need</p>
<h2 id="å†’å·å¼"><a href="#å†’å·å¼" class="headerlink" title="å†’å·å¼"></a>å†’å·å¼</h2><p>ä»¥å†’å·å°†é¢˜ç›®åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå‰é¢ä¸€éƒ¨åˆ†æ˜¯æ–¹æ³•æˆ–æ¨¡å‹åï¼›åä¸€éƒ¨åˆ†æ˜¯é’ˆå¯¹çš„ä»»åŠ¡ã€‚æ¯”å¦‚ï¼š</p>
<p>Uncover the Ground Truth Relations in Distant Supervision: A Neural Expectation-Maximization Framework</p>
<p>From Bag of Sentences to Document: Distantly Supervised Relation Extraction via Machine Reading Comprehension</p>
<p>Towards Accurate and Consistent Evaluation: A Dataset for Distantly-Supervised Relation Extraction</p>
<h2 id="åŠ¨åè¯"><a href="#åŠ¨åè¯" class="headerlink" title="åŠ¨åè¯"></a>åŠ¨åè¯</h2><p>ä½¿ç”¨åŠ¨è¯çš„åŠ¨åè¯å½¢å¼è¡¨è¾¾ä½¿ç”¨çš„ä¸»è¦æŠ€æœ¯ï¼š</p>
<p>Reducing Wrong Labels in Distant Supervision for Relation Extraction</p>
<h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><ol>
<li>ç”¨Method, Approachè¿˜æ˜¯Framework?</li>
<li>è¦ä¸è¦åœ¨æ ‡é¢˜ä¸­åŠ ä¸ŠFalse Negative Problems?</li>
<li>è¦ä¸è¦å¼ºè°ƒSemi-Supervised?</li>
</ol>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>paper</tag>
        <tag>title</tag>
      </tags>
  </entry>
  <entry>
    <title>PR-Curve AUCå€¼çš„ä¸¤ç§å®ç°æ–¹æ³•</title>
    <url>/2021/01/08/PR-Curve-AUC%E5%80%BC%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<h1 id="DISTRE"><a href="#DISTRE" class="headerlink" title="DISTRE"></a>DISTRE</h1><p>DISTREæ˜¯ä¸€ç§æ‰‹åŠ¨è®¡ç®—çš„æ–¹å¼ï¼Œä»£ç <strong>åœ¨ä¸ä¿®æ”¹æºä»£ç åŸæ„çš„åŸºç¡€ä¸Šè¿›è¡Œäº†ç®€åŒ–</strong>ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> auc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">logits = [[<span class="number">0.3</span>, <span class="number">0.8</span>, <span class="number">0.7</span>, <span class="number">0.9</span>],</span><br><span class="line">          [<span class="number">0.5</span>, <span class="number">0.3</span>, <span class="number">0.9</span>, <span class="number">0.2</span>],</span><br><span class="line">          [<span class="number">0.2</span>, <span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.6</span>]]</span><br><span class="line">labels = [[<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">          [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">          [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">compute_pr_curve_and_predictions</span><span class="params">()</span>:</span></span><br><span class="line">    num_relation_facts = <span class="number">0</span></span><br><span class="line">    predictions = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(logits)):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, len(logits[i])):  <span class="comment"># å»é™¤NA</span></span><br><span class="line">            predictions.append(&#123;<span class="string">'score'</span>: logits[i][j], <span class="string">'is_correct'</span>: labels[i][j]&#125;)</span><br><span class="line">            num_relation_facts += labels[i][j]</span><br><span class="line">    predictions = sorted(predictions, key=<span class="keyword">lambda</span> x: x[<span class="string">'score'</span>], reverse=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    correct = <span class="number">0</span></span><br><span class="line">    precision_values = []</span><br><span class="line">    recall_values = []</span><br><span class="line">    <span class="keyword">for</span> idx, prediction <span class="keyword">in</span> enumerate(predictions):</span><br><span class="line">        <span class="keyword">if</span> prediction[<span class="string">'is_correct'</span>]:</span><br><span class="line">            correct += <span class="number">1</span></span><br><span class="line">        precision_values.append(correct / (idx + <span class="number">1</span>))</span><br><span class="line">        recall_values.append(correct / num_relation_facts)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">precision_at</span><span class="params">(n)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> (sum([prediction[<span class="string">'is_correct'</span>] <span class="keyword">for</span> prediction <span class="keyword">in</span> predictions[:n]]) / n) * <span class="number">100</span></span><br><span class="line"></span><br><span class="line">    pr_metrics = &#123;</span><br><span class="line">        <span class="string">'P/R AUC'</span>: auc(x=recall_values, y=precision_values),</span><br><span class="line">        <span class="string">'Precision@100'</span>: precision_at(<span class="number">5</span>),</span><br><span class="line">        <span class="string">'Precision@200'</span>: precision_at(<span class="number">10</span>),</span><br><span class="line">        <span class="string">'Mean'</span>: np.mean([precision_at(i) <span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">5</span>, <span class="number">10</span>]])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> precision_values, recall_values, pr_metrics</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    precision_values, recall_values, pr_metrics = compute_pr_curve_and_predictions()</span><br><span class="line">    print(precision_values)</span><br><span class="line">    print(recall_values)</span><br><span class="line">    print(pr_metrics)</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.75</span>, <span class="number">0.8</span>, <span class="number">0.6666666666666666</span>, <span class="number">0.7142857142857143</span>, <span class="number">0.625</span>, <span class="number">0.5555555555555556</span>]</span><br><span class="line">[<span class="number">0.2</span>, <span class="number">0.4</span>, <span class="number">0.6</span>, <span class="number">0.6</span>, <span class="number">0.8</span>, <span class="number">0.8</span>, <span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>]</span><br><span class="line">&#123;<span class="string">'P/R AUC'</span>: <span class="number">0.6930952380952381</span>, <span class="string">'Precision@100'</span>: <span class="number">80.0</span>, <span class="string">'Precision@200'</span>: <span class="number">50.0</span>, <span class="string">'Mean'</span>: <span class="number">65.0</span>&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="RESIDE"><a href="#RESIDE" class="headerlink" title="RESIDE"></a>RESIDE</h1><p>RESIDEä»£ç è°ƒç”¨äº†<a href="https://scikit-learn.org/stable/index.html" target="_blank" rel="noopener">sklearn</a>å·¥å…·ï¼Œä»£ç <strong>åœ¨ä¸ä¿®æ”¹æºä»£ç åŸæ„çš„åŸºç¡€ä¸Šè¿›è¡Œäº†ç®€åŒ–</strong>ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> auc, average_precision_score, precision_recall_curve</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">logits = [[<span class="number">0.3</span>, <span class="number">0.8</span>, <span class="number">0.7</span>, <span class="number">0.9</span>],</span><br><span class="line">          [<span class="number">0.5</span>, <span class="number">0.3</span>, <span class="number">0.9</span>, <span class="number">0.2</span>],</span><br><span class="line">          [<span class="number">0.2</span>, <span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.6</span>]]</span><br><span class="line">labels = [[<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">          [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">          [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">compute_pr_curve_and_predictions</span><span class="params">()</span>:</span></span><br><span class="line">    y_true = np.array([e[<span class="number">1</span>:] <span class="keyword">for</span> e <span class="keyword">in</span> labels]).reshape((<span class="number">-1</span>))</span><br><span class="line">    y_scores = np.array([e[<span class="number">1</span>:] <span class="keyword">for</span> e <span class="keyword">in</span> logits]).reshape((<span class="number">-1</span>))</span><br><span class="line">    precision, recall, threshold = precision_recall_curve(y_true, y_scores)</span><br><span class="line">    area = average_precision_score(y_true, y_scores)</span><br><span class="line">    <span class="comment"># area = auc(recall, precision)</span></span><br><span class="line">    <span class="keyword">return</span> precision, recall, area</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    precision, recall, area = compute_pr_curve_and_predictions()</span><br><span class="line">    print(precision)</span><br><span class="line">    print(recall)</span><br><span class="line">    print(area)</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="number">0.71428571</span> <span class="number">0.8</span>        <span class="number">0.75</span>       <span class="number">1.</span>         <span class="number">1.</span>         <span class="number">1.</span>        ]</span><br><span class="line">[<span class="number">1.</span>  <span class="number">0.8</span> <span class="number">0.6</span> <span class="number">0.6</span> <span class="number">0.4</span> <span class="number">0.</span> ]</span><br><span class="line"><span class="number">0.9028571428571429</span></span><br></pre></td></tr></table></figure>
<p>è‹¥å°†<code>average_precision_score</code>æ›¿æ¢ä¸º<code>auc</code>ï¼Œåˆ™areaå˜ä¸º$0.9064285714285717$</p>
<p>ç”±äº<code>average_precision_score</code>é‡‡ç”¨çŸ©å½¢è®¡ç®—é¢ç§¯ï¼Œ<code>auc</code>é‡‡ç”¨æ¢¯å½¢è®¡ç®—é¢ç§¯ï¼Œæ‰€ä»¥åè€…è®¡ç®—ç»“æœåé«˜ã€‚</p>
<h1 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h1><p><strong><em>DISTREçš„å®ç°æ–¹å¼æ˜¯å­˜åœ¨é—®é¢˜çš„</em></strong>ï¼Œåº”è¯¥é‡‡ç”¨scikit-learnçš„æ ‡å‡†å®ç°ã€‚</p>
]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
        <category>Distant Supervision</category>
      </categories>
      <tags>
        <tag>Relation Extraction</tag>
        <tag>PR-Curve</tag>
        <tag>Distant Supervision</tag>
        <tag>AUC</tag>
      </tags>
  </entry>
  <entry>
    <title>LaTeXè®ºæ–‡æ’ç‰ˆåˆå°</title>
    <url>/2021/01/07/LaTeX%E8%AE%BA%E6%96%87%E6%8E%92%E7%89%88%E5%88%9D%E5%B0%9D/</url>
    <content><![CDATA[<h1 id="1-typeout-msg"><a href="#1-typeout-msg" class="headerlink" title="1. \typeout{msg}"></a>1. \typeout{msg}</h1><p>Prints <code>msg</code> on the terminal and in the log file.</p>
<h1 id="2-usepackage-amsthm"><a href="#2-usepackage-amsthm" class="headerlink" title="2. \usepackage{amsthm}"></a>2. \usepackage{amsthm}</h1><p>The amsthm package provides an enhanced version of LATEXâ€™s \newtheorem command for defining theorem-like environments.  ä¸€ä¸ªç”¨äºå®šç†ã€è¯æ˜çš„ç¯å¢ƒã€‚</p>
<p>The enhanced \newtheorem recognizes a \theoremstyle specification (as in Mittelbachâ€™s theorem package) and has a * form for defining unnumbered environments. The amsthm package also defines a proof environment that automatically adds a QED symbol at the end. AMS document classes incorporate the amsthm package, so everything described here applies to them as well.</p>
<h1 id="3-newtheorem-example-Example"><a href="#3-newtheorem-example-Example" class="headerlink" title="3. \newtheorem{example}{Example}"></a>3. \newtheorem{example}{Example}</h1><p>ç”¨äºæŒ‡å®šå…¬å¼ã€å®šç†ç¯å¢ƒã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">\documentclass&#123;article&#125;</span><br><span class="line">\usepackage[utf8]&#123;inputenc&#125;</span><br><span class="line">\usepackage[english]&#123;babel&#125;</span><br><span class="line"></span><br><span class="line">\newtheorem&#123;theorem&#125;&#123;Theorem&#125;</span><br><span class="line"></span><br><span class="line">\begin&#123;document&#125;</span><br><span class="line">\section&#123;Introduction&#125;</span><br><span class="line">Theorems can easily be defined</span><br><span class="line"></span><br><span class="line">\begin&#123;theorem&#125;</span><br><span class="line">Let $f$ be a function whose derivative exists in every point, then $f$ </span><br><span class="line">is a continuous function.</span><br><span class="line">\end&#123;theorem&#125;</span><br><span class="line">\end&#123;document&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/images/blog/2021/theorem.png" alt></p>
<p>The command <code>\newtheorem{theorem}{Theorem}</code> has two parameters, the first one is the name of the environment that is defined, the second one is the word that will be printed, in boldface font, at the beginning of the environment. Once this new environment is defined it can be used normally within the document, delimited it with the marks <code>\begin{theorem}</code> and <code>\end{theorem}</code>.</p>
<p>æ›´è¯¦ç»†çš„ï¼š<a href="https://www.overleaf.com/learn/latex/theorems_and_proofs" target="_blank" rel="noopener">https://www.overleaf.com/learn/latex/theorems_and_proofs</a></p>
]]></content>
      <categories>
        <category>Others</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>IJCAI</tag>
        <tag>LaTeX</tag>
      </tags>
  </entry>
  <entry>
    <title>NYTæ•°æ®é›†PR-Curveè¯„ä¼°æŒ‡æ ‡å¤§è°ƒç ”</title>
    <url>/2021/01/07/NYT%E6%95%B0%E6%8D%AE%E9%9B%86PR-Curve%E8%AF%84%E4%BC%B0%E6%8C%87%E6%A0%87%E5%A4%A7%E8%B0%83%E7%A0%94/</url>
    <content><![CDATA[<p>å¯¹äºè¿œç¨‹ç›‘ç£çš„è¯„ä¼°æŒ‡æ ‡ï¼Œæœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„æ˜¯PR-Curveï¼Œä½†æ˜¯ï¼Œå¯¹äºPR-Curveï¼Œä¹Ÿæœ‰ä¸å¤ªç»Ÿä¸€çš„ç»˜åˆ¶æ–¹å¼ï¼Œæ‰€ä»¥ï¼Œå¯¹ä¸¤ä¸ªSOTAæ¨¡å‹è¿›è¡Œè°ƒç ”è®°å½•ã€‚ä¸€ä¸ªæ˜¯<a href="https://www.aclweb.org/anthology/D18-1157/" target="_blank" rel="noopener">RESIDE</a>ï¼Œå‘è¡¨äº2018å¹´çš„EMNLPï¼›å¦ä¸€ä¸ªæ˜¯<a href="https://www.aclweb.org/anthology/P19-1134/" target="_blank" rel="noopener">DISTRE</a>ï¼Œå‘è¡¨äº2019å¹´çš„ACLã€‚</p>
<h1 id="1-RESIDE"><a href="#1-RESIDE" class="headerlink" title="1. RESIDE"></a>1. RESIDE</h1><h2 id="1-1-æ•°æ®å»ºæ¨¡æ–¹å¼"><a href="#1-1-æ•°æ®å»ºæ¨¡æ–¹å¼" class="headerlink" title="1.1 æ•°æ®å»ºæ¨¡æ–¹å¼"></a>1.1 æ•°æ®å»ºæ¨¡æ–¹å¼</h2><p>ä½¿ç”¨<code>load_data(self)</code>æˆå‘˜å‡½æ•°åŠ è½½æ•°æ®ï¼Œç¼–å†™è„šæœ¬å¯¹RESIDEçš„<code>.pkl</code>æ•°æ®æŸ¥çœ‹åŒ…çš„ç»„ç»‡å½¢å¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = pickle.load(open(<span class="string">'F:/Dataset/NYT/RESIDE/riedel_processed.pkl'</span>, <span class="string">'rb'</span>))</span><br><span class="line">TRAIN = data[<span class="string">'train'</span>]</span><br><span class="line"><span class="keyword">for</span> bag <span class="keyword">in</span> TRAIN:</span><br><span class="line">    X = bag[<span class="string">'X'</span>]</span><br><span class="line">    Y = bag[<span class="string">'Y'</span>]</span><br><span class="line">    <span class="keyword">if</span> len(X) &gt; <span class="number">1</span>:</span><br><span class="line">        print(<span class="string">'multiple sentences'</span>)</span><br><span class="line">    <span class="keyword">if</span> len(Y) &gt; <span class="number">1</span>:</span><br><span class="line">        print(<span class="string">'multiple label'</span>)</span><br><span class="line">print(<span class="string">'finish'</span>)</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä¸Šè¿°ä»£ç ï¼Œmultiple sentencesæœ‰å¾ˆå¤šï¼Œ<strong>ä½†æ˜¯æ²¡æœ‰multiple labelçš„åŒ…ã€‚è¯´æ˜RESIDEæ˜¯å°†ä»»åŠ¡å»ºæ¨¡ä¸ºsingle-label classificationé—®é¢˜ã€‚</strong></p>
<a id="more"></a>
<h2 id="1-2-è®­ç»ƒæ—¶"><a href="#1-2-è®­ç»ƒæ—¶" class="headerlink" title="1.2 è®­ç»ƒæ—¶"></a>1.2 è®­ç»ƒæ—¶</h2><p>è®­ç»ƒè¿‡ç¨‹ä¸»ä½“åœ¨<code>fit()</code>å‡½æ•°ã€‚è°ƒç”¨<code>run_epoch()</code>å‡½æ•°å®Œæˆä¸€è½®è®­ç»ƒã€‚è°ƒç”¨<code>getBatches()</code>è·å–mini-batchã€‚</p>
<p>å‡½æ•°æºç ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getBatches</span><span class="params">(self, data, shuffle = True)</span>:</span></span><br><span class="line">	<span class="string">""" </span></span><br><span class="line"><span class="string">	ä»¥åŒ…ä¸ºå•ä½ï¼Œè‹¥batch_size=16ï¼Œåˆ™æ¯ä¸ªmini-batchå«16ä¸ªåŒ…ï¼Œå¥å­ä¸ªæ•°ä¸å®šã€‚</span></span><br><span class="line"><span class="string">        Generates batches of multiple bags</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Parameters</span></span><br><span class="line"><span class="string">        ----------</span></span><br><span class="line"><span class="string">        data:		Data to be used for creating batches. Dataset as list of bags where each bag is a dictionary</span></span><br><span class="line"><span class="string">        shuffle:	Decides whether to shuffle the data or not.</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        Returns</span></span><br><span class="line"><span class="string">        -------</span></span><br><span class="line"><span class="string">        Generator for creating batches. </span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">	<span class="keyword">if</span> shuffle: random.shuffle(data)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> chunk <span class="keyword">in</span> getChunks(data, self.p.batch_size):			<span class="comment"># chunk = batch</span></span><br><span class="line">		batch = defaultdict(list)</span><br><span class="line"></span><br><span class="line">		num = <span class="number">0</span></span><br><span class="line">		<span class="keyword">for</span> i, bag <span class="keyword">in</span> enumerate(chunk):</span><br><span class="line">			batch[<span class="string">'X'</span>]    	   += bag[<span class="string">'X'</span>]</span><br><span class="line">			batch[<span class="string">'Pos1'</span>] 	   += bag[<span class="string">'Pos1'</span>]</span><br><span class="line">			batch[<span class="string">'Pos2'</span>] 	   += bag[<span class="string">'Pos2'</span>]</span><br><span class="line">			batch[<span class="string">'DepEdges'</span>]  += bag[<span class="string">'DepEdges'</span>]</span><br><span class="line">			batch[<span class="string">'ProbY'</span>]	   += bag[<span class="string">'ProbY'</span>]</span><br><span class="line"></span><br><span class="line">			batch[<span class="string">'SubType'</span>].append(bag[<span class="string">'SubType'</span>])</span><br><span class="line">			batch[<span class="string">'ObjType'</span>].append(bag[<span class="string">'ObjType'</span>])</span><br><span class="line"></span><br><span class="line">			batch[<span class="string">'Y'</span>].append(bag[<span class="string">'Y'</span>])</span><br><span class="line">			old_num  = num</span><br><span class="line">			num 	+= len(bag[<span class="string">'X'</span>])</span><br><span class="line"></span><br><span class="line">			batch[<span class="string">'sent_num'</span>].append([old_num, num, i])			<span class="comment"># åŒ…çš„èµ·æ­¢ä½ç½®</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">yield</span> batch</span><br></pre></td></tr></table></figure>
<p><strong><em>ä»¥åŒ…ä¸ºå•ä½ï¼Œè‹¥batch_size=16ï¼Œåˆ™æ¯ä¸ªmini-batchå«16ä¸ªåŒ…ï¼Œå¥å­ä¸ªæ•°ä¸å®šã€‚</em></strong></p>
<p>è·å–mini-batchåï¼Œé€šè¿‡é¢„å…ˆæ„å»ºçš„è®¡ç®—å›¾å¾—åˆ°<em>loss</em>å’Œ<em>accuracy</em>ï¼Œè®¡ç®—accuracyçš„ä»£ç ä¸ºï¼š</p>
<h3 id="accuracy"><a href="#accuracy" class="headerlink" title="accuracy"></a>accuracy</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.name_scope(<span class="string">'Accuracy'</span>) <span class="keyword">as</span> scope:</span><br><span class="line">	prob     = tf.nn.softmax(nn_out)</span><br><span class="line">	y_pred   = tf.argmax(prob, 	   axis=<span class="number">1</span>)</span><br><span class="line">	y_actual = tf.argmax(self.input_y, axis=<span class="number">1</span>)  </span><br><span class="line">	accuracy = tf.reduce_mean(tf.cast(tf.equal(y_pred, y_actual), tf.float32))</span><br></pre></td></tr></table></figure>
<p>è€Œinput_yæ˜¯é€šè¿‡ä»¥ä¸‹å½¢å¼è·å¾—ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">X, Y, pos1, pos2, sent_num, sub_type, obj_type, rel_alias = batch[<span class="string">'X'</span>], batch[<span class="string">'Y'</span>], batch[<span class="string">'Pos1'</span>], batch[<span class="string">'Pos2'</span>], batch[<span class="string">'sent_num'</span>], batch[<span class="string">'SubType'</span>], batch[<span class="string">'ObjType'</span>], batch[<span class="string">'ProbY'</span>]</span><br><span class="line"></span><br><span class="line">y_hot = self.getOneHot(Y, 		self.num_class)  <span class="comment"># one-hotå‘é‡</span></span><br><span class="line"><span class="keyword">if</span> wLabels: feed_dict[self.input_y] 	= y_hot</span><br></pre></td></tr></table></figure>
<p>æ€»ç»“ä¸€ä¸‹ï¼Œè®¡ç®—accuracyæ˜¯single-labelçš„ï¼Œ<strong>é¢„æµ‹å€¼å’ŒçœŸå®æ ‡ç­¾å‡åªæœ‰ä¸€ä¸ª</strong>ã€‚</p>
<h3 id="loss"><a href="#loss" class="headerlink" title="loss"></a>loss</h3><p>è®¡ç®—<em>loss</em>æ˜¯é€šè¿‡ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_loss</span><span class="params">(self, nn_out)</span>:</span></span><br><span class="line">	<span class="string">"""</span></span><br><span class="line"><span class="string">	Computes loss based on logits and actual labels</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	Parameters</span></span><br><span class="line"><span class="string">	----------</span></span><br><span class="line"><span class="string">	nn_out:		Logits for each bag in the batch</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	Returns</span></span><br><span class="line"><span class="string">	-------</span></span><br><span class="line"><span class="string">	loss:		Computes loss based on prediction and actual labels of the bags</span></span><br><span class="line"><span class="string">	"""</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">with</span> tf.name_scope(<span class="string">'Loss_op'</span>):</span><br><span class="line">		loss  = tf.reduce_mean(tf.nn.softmax_cross_entropy_with_logits_v2(logits=nn_out, labels=self.input_y))  <span class="comment"># é‡‡ç”¨äº¤å‰ç†µæŸå¤±</span></span><br><span class="line">		<span class="comment"># æ·»åŠ æ­£åˆ™åŒ–æŸå¤±é¡¹</span></span><br><span class="line">		<span class="keyword">if</span> self.regularizer != <span class="literal">None</span>: loss += tf.contrib.layers.apply_regularization(self.regularizer, tf.get_collection(tf.GraphKeys.REGULARIZATION_LOSSES))</span><br><span class="line">	<span class="keyword">return</span> loss</span><br></pre></td></tr></table></figure>
<p>æ€»ç»“ä¸€ä¸‹ï¼ŒæŸå¤±æ˜¯é€šè¿‡nn_outä¸input_y (one_hot) æ ‡ç­¾è®¡ç®—çš„ï¼ŒåŒæ ·æ˜¯single-labelçš„ã€‚</p>
<h2 id="1-3-æµ‹è¯•æ—¶"><a href="#1-3-æµ‹è¯•æ—¶" class="headerlink" title="1.3 æµ‹è¯•æ—¶"></a>1.3 æµ‹è¯•æ—¶</h2><p>æµ‹è¯•æ—¶ç”¨åˆ°çš„å‡½æ•°ä¸»è¦æ˜¯<code>predict()</code>ï¼Œå‡½æ•°ä¸»ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">predict</span><span class="params">(self, sess, data, wLabels=True, shuffle=False, label=<span class="string">'Evaluating on Test'</span>)</span>:</span></span><br><span class="line">	<span class="string">"""</span></span><br><span class="line"><span class="string">	Evaluate model on valid/test data</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	Parameters</span></span><br><span class="line"><span class="string">	----------</span></span><br><span class="line"><span class="string">	sess:		Session of tensorflow</span></span><br><span class="line"><span class="string">	data:		Data to evaluate on</span></span><br><span class="line"><span class="string">	wLabels:	Does data include labels or not</span></span><br><span class="line"><span class="string">	shuffle:	Shuffle data while before creates batches</span></span><br><span class="line"><span class="string">	label:		Log label to be used while logging</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	Returns</span></span><br><span class="line"><span class="string">	-------</span></span><br><span class="line"><span class="string">	losses:		Loss over the entire data</span></span><br><span class="line"><span class="string">	accuracies:	Overall Accuracy</span></span><br><span class="line"><span class="string">	y: 		Actual label</span></span><br><span class="line"><span class="string">	y_pred:		Predicted labels</span></span><br><span class="line"><span class="string">	logit_list:	Logit list for each bag in the data</span></span><br><span class="line"><span class="string">	y_actual_hot:	One hot represetnation of actual label for each bag in the data</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	"""</span></span><br><span class="line">	losses, accuracies, y_pred, y, logit_list, y_actual_hot = [], [], [], [], [], []</span><br><span class="line">	bag_cnt = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> step, batch <span class="keyword">in</span> enumerate(self.getBatches(data, shuffle)):</span><br><span class="line">		loss, logits, accuracy = sess.run([self.loss, self.logits, self.accuracy], feed_dict = self.create_feed_dict(batch, split=<span class="string">'test'</span>))</span><br><span class="line">		losses.    append(loss)</span><br><span class="line">		accuracies.append(accuracy)</span><br><span class="line"></span><br><span class="line">		pred_ind      = logits.argmax(axis=<span class="number">1</span>)</span><br><span class="line">		logit_list   += logits.tolist()</span><br><span class="line">		y_actual_hot += self.getOneHot(batch[<span class="string">'Y'</span>], self.num_class).tolist()</span><br><span class="line">		y_pred       += pred_ind.tolist()</span><br><span class="line">		y 	     += np.argmax(self.getOneHot(batch[<span class="string">'Y'</span>], self.num_class), <span class="number">1</span>).tolist()</span><br><span class="line">		bag_cnt      += len(batch[<span class="string">'sent_num'</span>])</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> step % <span class="number">100</span> == <span class="number">0</span>:</span><br><span class="line">			self.logger.info(<span class="string">'&#123;&#125; (&#123;&#125;/&#123;&#125;):\t&#123;:.5&#125;\t&#123;:.5&#125;\t&#123;&#125;'</span>.format(label, bag_cnt, len(self.data[<span class="string">'test'</span>]), np.mean(accuracies)*<span class="number">100</span>, np.mean(losses), self.p.name))</span><br><span class="line"></span><br><span class="line">	self.logger.info(<span class="string">'Test Accuracy: &#123;&#125;'</span>.format(accuracy))</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> np.mean(losses), np.mean(accuracies)*<span class="number">100</span>, y, y_pred, logit_list, y_actual_hot</span><br></pre></td></tr></table></figure>
<p>å¯¹æµ‹è¯•é›†ç»Ÿè®¡æ•°æ®ï¼Œå‘ç°redundant=36156, multi_label_bag=167ï¼Œ<strong><em>è¿™ä¸€ç‚¹ä¸è®­ç»ƒé›†ä¸åŒï¼Œè®­ç»ƒé›†ä¸­ä¸å«å¤šä¸ªæ ‡ç­¾çš„åŒ…ã€‚</em></strong>åœ¨å°†å¤šæ ‡ç­¾çš„åŒ…çš„æ ‡ç­¾è½¬åŒ–ä¸ºå‘é‡æ—¶ï¼Œä½¿ç”¨<code>getOneHot()</code>å‡½æ•°ï¼Œä¼šå°†æ ‡ç­¾å¯¹åº”ä½ç½®çš„å€¼ç½®ä¸º1ï¼Œ<font color="orange">æ‰€ä»¥å…¶å®æ˜¯multi-hotå‘é‡å•¦~</font>æ›´ä¸ºç»†èŠ‚çš„å†…å®¹è¯·çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">y_hot = self.getOneHot(Y, 		self.num_class)</span><br><span class="line">proby = self.getOneHot(rel_alias, 	self.num_class<span class="number">-1</span>, isprob=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getOneHot</span><span class="params">(self, data, num_class, isprob=False)</span>:</span></span><br><span class="line">	temp = np.zeros((len(data), num_class), np.int32)</span><br><span class="line">	<span class="keyword">for</span> i, ele <span class="keyword">in</span> enumerate(data):</span><br><span class="line">		<span class="keyword">for</span> rel <span class="keyword">in</span> ele:  <span class="comment"># multi-label å¤šåˆ†ç±»</span></span><br><span class="line">			<span class="keyword">if</span> isprob:	temp[i, rel<span class="number">-1</span>] = <span class="number">1</span></span><br><span class="line">			<span class="keyword">else</span>:		temp[i, rel]   = <span class="number">1</span></span><br><span class="line">	<span class="keyword">return</span> temp</span><br></pre></td></tr></table></figure>
<p>ä¸è®­ç»ƒæ—¶ä¸€æ ·ï¼Œè¿è¡Œè®¡ç®—å›¾ï¼Œå¾—åˆ°<em>loss</em>, <em>logits</em>, <em>accuracy</em></p>
<p>éœ€è¦ç‰¹åˆ«ç•™æ„ä¸­é—´å‡ è¡Œä»£ç ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">logits: (bags, class_num)</span><br><span class="line">pred_ind: (bags, )  <span class="comment"># é¢„æµ‹1ä¸ªæ ‡ç­¾</span></span><br><span class="line">logits_list: (all, class_num)</span><br><span class="line">y_actual_hot: (bags, class_num)</span><br><span class="line">y_pred: (bags, )</span><br><span class="line">y: (bags, )  <span class="comment"># ä½¿ç”¨np.argmax()ï¼Œå¦‚æœæœ‰å¤šä¸ªæ ‡ç­¾ï¼Œåˆ™å–ç¬¬ä¸€ä¸ªï¼Œé¡ºåºæ¥è‡ªrel2id.jsonæ–‡ä»¶</span></span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œsingle-labelå’Œmulti-labelç”¨äºä¸åŒçš„æŒ‡æ ‡è®¡ç®—ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""ç”¨single-labelçš„é¢„æµ‹å€¼å’Œé»„é‡‘å€¼è®¡ç®—ç²¾åº¦ã€å¬å›ã€F1"""</span></span><br><span class="line">test_prec, test_rec, test_f1 			  = self.calc_prec_recall_f1(y, y_pred, <span class="number">0</span>)  <span class="comment"># 0: ID for 'NA' relation</span></span><br><span class="line"><span class="string">"""ç”¨multi-labelçš„logitså’Œé»„é‡‘å€¼è®¡ç®—PR-Curve"""</span></span><br><span class="line"><span class="comment"># ç»˜åˆ¶ PR-curve çš„æ•°æ®å¤„ç† #</span></span><br><span class="line">y_true   = np.array([e[<span class="number">1</span>:] <span class="keyword">for</span> e <span class="keyword">in</span> y_hot]).  	 reshape((<span class="number">-1</span>))</span><br><span class="line">y_scores = np.array([e[<span class="number">1</span>:] <span class="keyword">for</span> e <span class="keyword">in</span> logit_list]).reshape((<span class="number">-1</span>))</span><br><span class="line">area_pr  = average_precision_score(y_true, y_scores)</span><br></pre></td></tr></table></figure>
<h2 id="1-4-PR-Curveç»˜åˆ¶"><a href="#1-4-PR-Curveç»˜åˆ¶" class="headerlink" title="1.4 PR-Curveç»˜åˆ¶"></a>1.4 PR-Curveç»˜åˆ¶</h2><p>å¦‚ä½•å°†ä¸Šè¿°ç»“æœç”¨äºæœ€ç»ˆç»˜åˆ¶PR-Curveå‘¢ï¼Ÿé¦–å…ˆï¼Œä¿å­˜æ•°æ®ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pickle.dump(&#123;<span class="string">'logit_list'</span>: logit_list, <span class="string">'y_hot'</span>: y_hot&#125;, open(<span class="string">"results/&#123;&#125;/precision_recall.pkl"</span>.format(self.p.name), <span class="string">'wb'</span>))</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œåˆ©ç”¨pickleåŠ è½½ä¿å­˜çš„æ•°æ®ï¼Œå¹¶ç»˜åˆ¶æœ€ç»ˆç»“æœï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">loadData</span><span class="params">(path)</span>:</span></span><br><span class="line">	preds 	   	= pickle.load(open(path, <span class="string">'rb'</span>))</span><br><span class="line">	y_hot 	   	= np.array(preds[<span class="string">'y_hot'</span>])</span><br><span class="line">	logit_list 	= np.array(preds[<span class="string">'logit_list'</span>])</span><br><span class="line">	y_hot_new       = np.reshape(np.array([x[<span class="number">1</span>:] <span class="keyword">for</span> x <span class="keyword">in</span> y_hot]),      (<span class="number">-1</span>))  <span class="comment"># å»é™¤NA</span></span><br><span class="line">	logit_list_new  = np.reshape(np.array([x[<span class="number">1</span>:] <span class="keyword">for</span> x <span class="keyword">in</span> logit_list]), (<span class="number">-1</span>))</span><br><span class="line">	<span class="keyword">return</span> y_hot_new, logit_list_new</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">plotPR</span><span class="params">(dataset)</span>:</span></span><br><span class="line">	y_true, y_scores 	   = loadData(<span class="string">'./results/&#123;&#125;/precision_recall.pkl'</span>.format(args.name))</span><br><span class="line">	precision,recall,threshold = precision_recall_curve(y_true,y_scores)</span><br><span class="line">	<span class="comment"># ä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨auc()å‡½æ•°</span></span><br><span class="line">    area_under 	   	   = average_precision_score(y_true, y_scores)</span><br><span class="line">	print(<span class="string">'Area under the curve: &#123;:.3&#125;'</span>.format(area_under))</span><br><span class="line"></span><br><span class="line">	plt.plot(recall[:], precision[:], label=<span class="string">'RESIDE'</span>, color =<span class="string">'red'</span>, lw=<span class="number">1</span>, marker = <span class="string">'o'</span>, markevery = <span class="number">0.1</span>, ms = <span class="number">6</span>)</span><br></pre></td></tr></table></figure>
<p>æœ€ç»ˆç»˜åˆ¶å¾—åˆ°çš„ç»“æœä¸ºï¼š</p>
<p><img src="/images/blog/2021/RESIDE.png" alt></p>
<h1 id="2-DISTRE"><a href="#2-DISTRE" class="headerlink" title="2. DISTRE"></a>2. DISTRE</h1><p>DISTREä¸RESIDEå¤§åŒå°å¼‚ï¼Œä¸å†åƒä¸Šé¢é‚£æ ·è¯¦ç»†çš„å±•å¼€ã€‚</p>
<p>è®­ç»ƒæ—¶ï¼ŒDISTREæ˜¯å°†<code>head###tail###relation</code>ç›¸åŒçš„recordä½œä¸ºåŒ…ï¼Œ<strong>bath_sizeä¸ºmini-batchå«æœ‰çš„å¥å­æ•°ï¼Œå«æœ‰çš„åŒ…çš„ä¸ªæ•°ä¸å®š</strong>ï¼ˆ<em>è¿™ä¸€ç‚¹ä¸RESIDEä¸åŒ</em>ï¼‰ï¼Œä»¥äº¤å‰ç†µä½œä¸ºæŸå¤±å‡½æ•°ã€‚</p>
<p>æµ‹è¯•æ—¶ï¼Œå°†å¤´å°¾å®ä½“è½¬åŒ–ä¸ºå°å†™ï¼Œå¹¶<strong>å°†å¤´å°¾å®ä½“å¯¹ç›¸åŒçš„æ„æˆä¸€ä¸ªåŒ…</strong>ï¼Œå› æ­¤<font color="orange">æ¨æµ‹åº”è¯¥æ˜¯multi-labelçš„</font>ã€‚</p>
<p>ç”¨åˆ°äº†<code>predict_batch_json()</code>å‡½æ•°ï¼ŒæŸ¥çœ‹æºç äº†è§£å…¶åŸç†ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">predict_batch_json</span><span class="params">(self, inputs: List[JsonDict])</span> -&gt; List[JsonDict]:</span></span><br><span class="line">        instances = self._batch_json_to_instances(inputs)</span><br><span class="line">        <span class="keyword">return</span> self.predict_batch_instance(instances)</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆå°†JSONè½¬åŒ–ä¸ºInstanceï¼Œè°ƒç”¨å‡½æ•°é“¾ä¸ºï¼š<code>predict_batch_json</code> $\to$ <code>_batch_json_to_instances</code> $\to$ <code>_json_to_instance</code> $\to$ <code>data_reader.text_to_instance</code>ï¼Œç„¶åå‡½æ•°å°†å¥å­å­—ç¬¦åŒ–ã€ç´¢å¼•åŒ–å¹¶ç»„ç»‡æˆGPTå…³ç³»åˆ†ç±»çš„æ ¼å¼ã€‚</p>
<p> è€Œ<code>predict_batch_instances</code>å‡½æ•°å†…å®¹ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@overrides</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">predict_batch_instance</span><span class="params">(self, instances: List[Instance])</span> -&gt; List[JsonDict]:</span></span><br><span class="line">    model = self._model</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> torch.no_grad():</span><br><span class="line">        cuda_device = model._get_prediction_device()</span><br><span class="line">        dataset = Batch(instances)</span><br><span class="line">        dataset.index_instances(model.vocab)</span><br><span class="line">        model_input = util.move_to_device(dataset.as_tensor_dict(), cuda_device)</span><br><span class="line">        outputs = model.decode(model(**model_input))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> sanitize(outputs)  <span class="comment"># Sanitize turns PyTorch and Numpy types into basic Python types</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä¸æ˜ç™½model.decodeçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œæ‰€ä»¥æ‰“å°æ¨¡å‹è¾“å‡ºï¼Œè§‚å¯Ÿè¾“å‡ºæ•°æ®çš„å½¢çŠ¶å’Œå€¼ã€‚è¾“å‡ºçš„<em>logits</em>å½¢çŠ¶ä¸º(1, 56)ï¼Œè¾“å‡ºçš„<em>clf_h</em>å½¢çŠ¶ä¸º(1, 768)ï¼Œæˆªå–åç»“æœä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># before decode:</span></span><br><span class="line">&#123;<span class="string">'instances'</span>: [&#123;<span class="string">'instance_id'</span>: <span class="string">'abbott#frank sinatra'</span>&#125;], <span class="string">'logits'</span>: tensor([[<span class="number">9.9998e-01</span>, <span class="number">1.9205e-06</span>, <span class="number">1.3319e-07</span>, <span class="number">9.8069e-07</span>, <span class="number">5.1156e-07</span>, <span class="number">5.5111e-08</span>,</span><br><span class="line">]], device=<span class="string">'cuda:0'</span>), <span class="string">'clf_h'</span>: tensor([[<span class="number">-0.2411</span>,  <span class="number">0.1988</span>, <span class="number">-0.3914</span>, <span class="number">-0.2383</span>,  <span class="number">1.5797</span>,  <span class="number">0.0826</span>, <span class="number">-0.3336</span>, <span class="number">-0.5499</span>]], device=<span class="string">'cuda:0'</span>)&#125;</span><br><span class="line"><span class="comment"># after decode:</span></span><br><span class="line">&#123;<span class="string">'instances'</span>: [&#123;<span class="string">'instance_id'</span>: <span class="string">'abbott#frank sinatra'</span>&#125;], <span class="string">'logits'</span>: tensor([[<span class="number">9.9998e-01</span>, <span class="number">1.9205e-06</span>, <span class="number">1.3319e-07</span>, <span class="number">9.8069e-07</span>, <span class="number">5.1156e-07</span>, <span class="number">5.5111e-08</span></span><br><span class="line">]], device=<span class="string">'cuda:0'</span>), <span class="string">'clf_h'</span>: tensor([[<span class="number">-0.2411</span>,  <span class="number">0.1988</span>, <span class="number">-0.3914</span>, <span class="number">-0.2383</span>,  <span class="number">1.5797</span>,  <span class="number">0.0826</span>, <span class="number">-0.3336</span>, <span class="number">-0.5499</span>]], device=<span class="string">'cuda:0'</span>)&#125;</span><br></pre></td></tr></table></figure>
<p>è§‚å¯Ÿåˆ°decodeä¹‹å‰å’Œä¹‹åæ²¡æœ‰ä»»ä½•å˜åŒ–ã€‚å¯èƒ½æ˜¯å› ä¸ºæ²¡æœ‰ç»§æ‰¿decodeå‡½æ•°è‡ªè¡Œå®ç°å§ã€‚</p>
<h1 id="3-é™„å½•"><a href="#3-é™„å½•" class="headerlink" title="3. é™„å½•"></a>3. é™„å½•</h1><h2 id="3-1-RESIDEé‡å¤åŒ…æ£€æµ‹ä»£ç "><a href="#3-1-RESIDEé‡å¤åŒ…æ£€æµ‹ä»£ç " class="headerlink" title="3.1 RESIDEé‡å¤åŒ…æ£€æµ‹ä»£ç "></a>3.1 RESIDEé‡å¤åŒ…æ£€æµ‹ä»£ç </h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data = pickle.load(open(<span class="string">'F:/Dataset/NYT/RESIDE/riedel_processed.pkl'</span>, <span class="string">'rb'</span>))</span><br><span class="line">TRAIN = data[<span class="string">'train'</span>]</span><br><span class="line">results = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> bag <span class="keyword">in</span> TRAIN:</span><br><span class="line">    X = str(bag[<span class="string">'X'</span>])  <span class="comment"># hashable</span></span><br><span class="line">    Y = bag[<span class="string">'Y'</span>]</span><br><span class="line">    <span class="keyword">if</span> X <span class="keyword">not</span> <span class="keyword">in</span> results:</span><br><span class="line">        results[X] = [Y]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        results[X].append(Y)</span><br><span class="line">redundant = <span class="number">0</span>  <span class="comment"># é‡å¤åŒ…</span></span><br><span class="line"><span class="keyword">for</span> X <span class="keyword">in</span> results:</span><br><span class="line">    <span class="keyword">if</span> len(results[X]) &gt; <span class="number">1</span>:</span><br><span class="line">        print(<span class="string">'^^^^^^^^^^^^^^^^'</span>)</span><br><span class="line">        print(<span class="string">'X '</span>, X)</span><br><span class="line">        print(<span class="string">'Y '</span>, results[X])</span><br><span class="line">        print(<span class="string">'================'</span>)</span><br><span class="line">        redundant += <span class="number">1</span></span><br><span class="line">print(<span class="string">'redundant '</span>, redundant)</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">^^^^^^^^^^^^^^^^</span><br><span class="line">X  [[7326, 18, 94, 969, 11769, 14, 367, 18, 3323, 3614, 14, 2547, 18, 94, 614, 8965, 14, 4704, 18, 2295, 43415, 14, 4466, 18, 70582, 14, 1111, 184, 3, 1541, 18, 110, 1225, 45923, 14, 415, 1006, 428, 1, 194, 36728, 14, 131, 4, 2812, 782, 1, 9584, 9966, 14, 415, 428, 1, 1059, 10674, 14, 131, 4, 592, 1, 1649, 3580, 2748, 14, 180, 428, 1, 31765, 46302, 14, 131, 4, 2812, 592, 1, 5798, 3091, 14, 131, 4, 2812, 415, 1, 35144, 6]]</span><br><span class="line">Y  [[0], [0]]</span><br><span class="line">================</span><br><span class="line">^^^^^^^^^^^^^^^^</span><br><span class="line">X  [[58, 82, 2, 3341, 131402, 373, 6483, 85, 3, 580, 1237, 4543, 4, 2, 62, 77, 2995, 5560, 26, 54, 1443, 3, 836, 1120, 104, 5, 23, 115, 89, 4, 1172, 6]]</span><br><span class="line">Y  [[8], [36]]</span><br><span class="line">================</span><br><span class="line">^^^^^^^^^^^^^^^^</span><br><span class="line">X  [[252, 147, 4, 794, 15, 5114, 16, 1, 8999, 91687, 15, 1952, 16, 1, 713, 3, 1940, 148860, 15, 7950, 16, 6]]</span><br><span class="line">Y  [[0], [0]]</span><br><span class="line">================</span><br><span class="line">redundant  28905</span><br></pre></td></tr></table></figure>
<p>å¯¹æµ‹è¯•é›†ä¹Ÿè¿›è¡Œä¸€ä¸ªæ·±å…¥è°ƒæŸ¥ï¼Œå‘ç°ï¼Œ<strong>åœ¨æµ‹è¯•é›†ä¸­å­˜åœ¨167ä¸ªå¤šæ ‡ç­¾çš„åŒ…</strong>ï¼Œå­˜åœ¨redundant=36156ï¼Œä¸è®­ç»ƒé›†ç•¥æœ‰å·®å¼‚ã€‚æ‰“å°å¤šæ ‡ç­¾åŒ…çš„æ ‡ç­¾æŸ¥çœ‹ï¼Œéšæœºæˆªå–éƒ¨åˆ†ï¼Œç»“æœä¸ºï¼š</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">@@@[48, 12]@@@</span><br><span class="line">@@@[48, 49]@@@</span><br><span class="line">@@@[48, 49, 47]@@@</span><br><span class="line">@@@[48, 13]@@@</span><br><span class="line">@@@[48, 13]@@@</span><br><span class="line">@@@[8, 36]@@@</span><br><span class="line">@@@[8, 36]@@@</span><br><span class="line">@@@[48, 49]@@@</span><br><span class="line">@@@[8, 36]@@@</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
        <category>Distant Supervision</category>
      </categories>
      <tags>
        <tag>DISTRE</tag>
        <tag>Relation Extraction</tag>
        <tag>NYT</tag>
        <tag>PR-Curve</tag>
        <tag>RESIDE</tag>
        <tag>Distant Supervision</tag>
      </tags>
  </entry>
  <entry>
    <title>How to Fine-Tune BERT for Text Classification</title>
    <url>/2021/01/06/How-to-Fine-Tune-BERT-for-Text-Classification/</url>
    <content><![CDATA[<h3 id="èƒŒæ™¯ä»‹ç»"><a href="#èƒŒæ™¯ä»‹ç»" class="headerlink" title="èƒŒæ™¯ä»‹ç»"></a>èƒŒæ™¯ä»‹ç»</h3><p>æ–‡æœ¬åˆ†ç±»æ˜¯NLPä¸­çš„ä¸€ä¸ªç»å…¸ä»»åŠ¡ï¼Œ é€šå¸¸åœ¨å¤§å‹çš„æ•°æ®é›†è¿›è¡Œä¸€äº›é¢„è®­ç»ƒçš„æ¨¡å‹åœ¨æ–‡æœ¬åˆ†ç±»ä¸Šå¯ä»¥å–å¾—å¾ˆä¸é”™çš„æˆç»©ã€‚ä¾‹å¦‚word2vecï¼Œ CoVe(contextualized<br>word embeddings)å’ŒELMoéƒ½å–å¾—äº†ä¸é”™çš„æˆç»©ã€‚Bertæ˜¯åŸºäºåŒå‘transformerä½¿ç”¨masked word predictionå’ŒNSP(next sentence prediction)çš„ä»»åŠ¡è¿›è¡Œé¢„è®­ç»ƒï¼Œç„¶ååœ¨ä¸‹æ¸¸ä»»åŠ¡ä¸Šè¿›è¡Œå¾®è°ƒã€‚Bertçš„å‡ºä¸–ï¼Œæ¨ªæ‰«äº†å„å¤§æ¦œå•ã€‚ä½†æ˜¯ä»–çš„æ½œèƒ½å·²ç»è¢«å®Œå…¨å¼€å‘äº†å—ï¼Ÿæœ¬æ–‡é’ˆå¯¹æ–‡æœ¬åˆ†ç±»åŸºäºBertæ¢ç´¢äº†å‡ ç§å¯ä»¥ä¼˜åŒ–æ•ˆæœçš„æ–¹æ³•ã€‚</p>
<p>è¿™å‡ ç§æ–¹æ³•åˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li>Fine-tuneç­–ç•¥</li>
<li>æ·±åº¦é¢„è®­ç»ƒ</li>
<li>å¤šä»»åŠ¡Fine-tune</li>
</ul>
<h3 id="ç­–ç•¥ä»‹ç»"><a href="#ç­–ç•¥ä»‹ç»" class="headerlink" title="ç­–ç•¥ä»‹ç»"></a>ç­–ç•¥ä»‹ç»</h3><h4 id="Fine-tuneç­–ç•¥"><a href="#Fine-tuneç­–ç•¥" class="headerlink" title="Fine-tuneç­–ç•¥"></a>Fine-tuneç­–ç•¥</h4><p>ç¥ç»ç½‘ç»œçš„ä¸åŒå±‚å¯ä»¥æ•è·ä¸åŒçš„è¯­æ³•å’Œè¯­ä¹‰ä¿¡æ¯ã€‚ä½¿ç”¨Bertå»è®­ç»ƒä¸‹æ¸¸ä»»åŠ¡éœ€è¦è€ƒè™‘å‡ ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>é¢„è®­ç»ƒçš„é•¿æœ¬æ–‡ï¼ŒBertçš„æœ€é•¿æ–‡æœ¬åºåˆ—æ˜¯512</li>
<li>å±‚æ•°é€‰æ‹©ï¼Œæ­£å¦‚ä¸Šæ–‡æ‰€è¿°å“¦ï¼Œæ¯ä¸€å±‚éƒ½ä¼šæ•è·ä¸åŒçš„ä¿¡æ¯ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é€‰æ‹©æœ€é€‚åˆçš„å±‚æ•°</li>
<li>è¿‡æ‹Ÿåˆé—®é¢˜ï¼Œå› æ­¤éœ€è¦è€ƒè™‘åˆé€‚çš„å­¦ä¹ ç‡ã€‚<br>Bertçš„åº•å±‚ä¼šå­¦ä¹ åˆ°æ›´å¤šçš„é€šç”¨çš„ä¿¡æ¯ï¼Œæ–‡ä¸­å¯¹Bertçš„ä¸åŒå±‚ä½¿ç”¨äº†ä¸åŒçš„å­¦ä¹ ç‡ã€‚ æ¯ä¸€å±‚çš„å‚æ•°è¿­ä»£å¯ä»¥å¦‚ä¸‹æ‰€ç¤ºï¼š</li>
</ol>
<a id="more"></a>
<p>$\theta <em>t^l = \theta </em>{t-1}^l - \eta ^l \cdot \nabla _{\theta ^l} J(\theta)$</p>
<ol>
<li>å…¶ä¸­</li>
</ol>
<ul>
<li>Î¸_t^lè¡¨ç¤ºç¬¬lå±‚ç¬¬tæ­¥è¿­ä»£çš„å‚æ•°</li>
<li>Î·^lè¡¨ç¤ºç¬¬lå±‚çš„å­¦ä¹ ç‡ï¼Œè®¡ç®—æ–¹å¼å¦‚ä¸‹ï¼ŒÎ¾è¡¨ç¤ºè¡°è´¥ç³»æ•°ï¼Œå½“Î¾&gt;1è¡¨ç¤ºå­¦ä¹ ç‡é€å±‚è¡°å‡ï¼Œå¦åˆ™è¡¨ç¤ºé€å±‚æ‰©å¤§ã€‚å½“Î¾=1æ—¶å’Œä¼ ç»Ÿçš„Bertç›¸åŒã€‚</li>
</ul>
<p>$\eta ^{k-1} = \xi \cdot \eta ^k$</p>
<p>å³ä»¥æœ€åä¸€å±‚å­¦ä¹ ç‡ä¸º1ï¼Œå¾€å‰é€å±‚é€’ä¹˜$\xi$</p>
<h4 id="æ·±åº¦é¢„è®­ç»ƒ"><a href="#æ·±åº¦é¢„è®­ç»ƒ" class="headerlink" title="æ·±åº¦é¢„è®­ç»ƒ"></a>æ·±åº¦é¢„è®­ç»ƒ</h4><p>Bertæ˜¯åœ¨é€šç”¨çš„è¯­æ–™ä¸Šè¿›è¡Œé¢„è®­ç»ƒçš„ï¼Œå¦‚æœè¦åœ¨ç‰¹å®šé¢†åŸŸåº”ç”¨æ–‡æœ¬åˆ†ç±»ï¼Œæ•°æ®åˆ†å¸ƒä¸€å®šæ˜¯æœ‰ä¸€äº›å·®è·çš„ã€‚è¿™æ—¶å€™å¯ä»¥è€ƒè™‘è¿›è¡Œæ·±åº¦é¢„è®­ç»ƒã€‚</p>
<ul>
<li><strong>Within-task pre-training</strong>ï¼šBertåœ¨è®­ç»ƒè¯­æ–™ä¸Šè¿›è¡Œé¢„è®­ç»ƒ</li>
<li><strong>In-domain pre-training</strong>ï¼šåœ¨åŒä¸€é¢†åŸŸä¸Šçš„è¯­æ–™è¿›è¡Œé¢„è®­ç»ƒ</li>
<li><strong>Cross-domain pre-training</strong>ï¼šåœ¨ä¸åŒé¢†åŸŸä¸Šçš„è¯­æ–™è¿›è¡Œé¢„è®­ç»ƒ</li>
</ul>
<h4 id="å¤šä»»åŠ¡Fine-tune"><a href="#å¤šä»»åŠ¡Fine-tune" class="headerlink" title="å¤šä»»åŠ¡Fine-tune"></a>å¤šä»»åŠ¡Fine-tune</h4><p>å¤šä»»åŠ¡å¾®è°ƒå°±æ˜¯ä½¿ç”¨Bertå»è®­ç»ƒä¸åŒçš„ä¸‹æ¸¸ä»»åŠ¡ä½†æ˜¯é™¤äº†æœ€åä¸€å±‚ï¼Œåœ¨å…¶ä»–å±‚å…±äº«å‚æ•°ã€‚<br>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸åŒç­–ç•¥çš„å®éªŒç»“æœ</p>
<h3 id="å®éªŒç»“æœ"><a href="#å®éªŒç»“æœ" class="headerlink" title="å®éªŒç»“æœ"></a>å®éªŒç»“æœ</h3><h4 id="æ•°æ®é›†"><a href="#æ•°æ®é›†" class="headerlink" title="æ•°æ®é›†"></a>æ•°æ®é›†</h4><p>æœ¬æ–‡ä½¿ç”¨äº†IMDB, Yelpè¯„è®ºæ•°æ®é›†ç”¨äºåšæƒ…æ„Ÿåˆ†æï¼ŒTREC(å…¬å¼€é¢†åŸŸçš„é—®ç­”æ•°æ®é›†)ï¼Œyahooé—®ç­”ç”¨äºé—®é¢˜åˆ†ç±»ï¼ŒAGæ–°é—»ï¼ŒDBPediaå’ŒSougouæ–°é—»åšä¸»é¢˜åˆ†ç±»ã€‚æ–‡ä¸­ä½¿ç”¨WordPiece embeddingsä»¥##åˆ‡åˆ†å¥å­ã€‚å¯¹Sougouæ–°é—»é‡‡ç”¨â€ã€‚â€, â€œ?â€, â€œï¼â€æ¥åˆ†éš”å¥å­ã€‚</p>
<p><img src="/images/blog/2021/fine-tune1.png" alt></p>
<h4 id="Fine-tuneç­–ç•¥-1"><a href="#Fine-tuneç­–ç•¥-1" class="headerlink" title="Fine-tuneç­–ç•¥"></a>Fine-tuneç­–ç•¥</h4><p><strong>1. é•¿æ–‡æœ¬å¤„ç†</strong><br>å¯¹äºé•¿æ–‡æœ¬æ–‡ä¸­åšäº†ä¸¤ç§å¤„ç†æ–¹å¼ï¼Œæˆªæ–­å’Œåˆ‡åˆ†ã€‚</p>
<ul>
<li>æˆªæ–­ï¼šä¸€èˆ¬æ¥è¯´æ–‡æœ¬ä¸­æœ€é‡è¦çš„ä¿¡æ¯æ˜¯å¼€å§‹å’Œç»“å°¾ï¼Œå› æ­¤æ–‡ä¸­å¯¹äºé•¿æ–‡æœ¬åšäº†æˆªæ–­å¤„ç†ã€‚<ul>
<li>head-onlyï¼šä¿ç•™å‰510ä¸ªå­—ç¬¦</li>
<li>tail-onlyï¼šä¿ç•™å510ä¸ªå­—ç¬¦</li>
<li>head+tailï¼šä¿ç•™å‰128ä¸ªå’Œå382ä¸ªå­—ç¬¦</li>
</ul>
</li>
<li>åˆ‡åˆ†: å°†æ–‡æœ¬åˆ†æˆkæ®µï¼Œæ¯æ®µçš„è¾“å…¥å’ŒBertå¸¸è§„è¾“å…¥ç›¸åŒï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯[CLS]è¡¨ç¤ºè¿™æ®µçš„åŠ æƒä¿¡æ¯ã€‚æ–‡ä¸­ä½¿ç”¨äº†Max-pooling, Average poolingå’Œself-attentionç»“åˆè¿™äº›ç‰‡æ®µçš„è¡¨ç¤ºã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯å®éªŒçš„ç»“æœï¼Œhead+tailçš„è¡¨ç¤ºåœ¨ä¸¤ä¸ªæ•°æ®é›†ä¸Šçš„æ•ˆæœéƒ½æ¯”è¾ƒå¥½ã€‚åº”è¯¥æ˜¯é•¿æ–‡æœ¬ç»“åˆäº†å¥é¦–å’Œå¥å°¾çš„ä¿¡æ¯ï¼Œè·å–çš„ä¿¡æ¯æ¯”è¾ƒå‡è¡¡ã€‚ä¸è¿‡å¥‡æ€ªçš„æ˜¯æ‹¼æ¥çš„æ–¹å¼æ•´ä½“å±…ç„¶ä¸å¦‚æˆªæ–­ï¼Œä¸ªäººçŒœæµ‹å¯èƒ½æ˜¯å°†å¥å­åˆ‡æˆå‡ æ®µä¹‹åå¢åŠ äº†æ¨¡å‹çš„ä¸ç¨³å®šæ€§ï¼Œè€Œé”™è¯¯å åŠ èµ·æ¥å¯èƒ½å°±ä¼šè¢«æ”¾å¤§ã€‚è€Œmax-poolingå’Œself-attentionä¹Ÿæ›´åŠ å¼ºè°ƒäº†æ–‡æœ¬ä¸­æ¯”è¾ƒæœ‰ç”¨çš„ä¿¡æ¯ï¼Œæ‰€ä»¥æ•´ä½“æ•ˆæœä¼˜äºaverage.</p>
<p><img src="/images/blog/2021/fine-tune2.png" alt></p>
<p><strong>å¯ä»¥æ€»ç»“å‡ºï¼Œä¸€èˆ¬ç›´æ¥å–meanæ•ˆæœéƒ½æ˜¯æœ€å·®çš„ï¼Œè€Œmaxpooling, attention, concatåˆ™å¤§åŒå°å¼‚ï¼Œä¸åŒçš„ä»»åŠ¡ä¸Šè¡¨ç°ä¸åŒã€‚</strong></p>
<p><strong>2. å±‚æ•°é€‰æ‹©</strong><br>æ–‡ä¸­å¯¹æ¯å±‚çš„æ•ˆæœå’Œå‰å››å±‚çš„ç»“æœè¿›è¡Œæ‹¼æ¥ï¼Œåå››å±‚çš„ç»“æœæ‹¼æ¥ä»¥åŠ12å±‚çš„ç»“æœæ‹¼æ¥è¿›è¡Œäº†å®éªŒï¼Œå‘ç°åå››å±‚æ‹¼æ¥å’Œç¬¬11å±‚çš„æ•ˆæœç›¸åŒã€‚</p>
<p><img src="/images/blog/2021/fine-tune3.png" alt></p>
<p><strong>å¯ä»¥å¾—å‡ºç»“è®ºï¼Œç›´æ¥å–æœ€åä¸€å±‚çš„è¾“å‡ºå‘é‡è¡¨ç¤ºå³å¯ã€‚</strong></p>
<p><strong>3. Catastrophic Forgetting</strong><br>Catastrophic forgettingæ˜¯æŒ‡åœ¨å­¦ä¹ æ–°çŸ¥è¯†æ—¶é¢„è®­ç»ƒçš„çŸ¥è¯†è¢«é—å¿˜äº†ã€‚æ–‡ä¸­å¯¹Bertçš„Catastrophic Forgettingé—®é¢˜è¿›è¡Œäº†æ¢ç´¢ã€‚ä¸‹å›¾æ˜¯IMDBæ•°æ®é›†ä¸Šä¸åŒå­¦ä¹ ç‡å’Œerror-rateçš„æ›²çº¿ï¼Œå¯ä»¥çœ‹åˆ°æ¯”è¾ƒå°çš„å­¦ä¹ ç‡è·å¾—æ•ˆæœæ¯”è¾ƒå¥½ã€‚</p>
<p><img src="/images/blog/2021/fine-tune4.png" alt></p>
<p><strong>å¯ä»¥å¾—å‡ºç»“è®ºï¼Œä¸€èˆ¬å¯¹BERTè¿›è¡Œå¾®è°ƒæ—¶ï¼Œå­¦ä¹ ç‡é€‰æ‹©ä¸º1e-5çº§åˆ«ï¼Œè€Œä¸”å­¦ä¹ ç‡è¶Šå°å¯èƒ½æ•ˆæœè¶Šå¥½ã€‚ä½†æ˜¯ï¼Œè¿‡å°çš„å­¦ä¹ ç‡ä¼šå¯¼è‡´è®­ç»ƒæ—¶é—´å˜é•¿ï¼ŒåŒæ—¶ä¸çŸ¥é“æ˜¯å¦ä¼šå¼•èµ·æ•ˆæœçš„ä¸‹é™ï¼Ÿ</strong></p>
<p><strong>4. å±‚é—´å­¦ä¹ ç‡</strong><br>å±‚é—´å­¦ä¹ ç‡å¯¹æ¨¡å‹çš„å½±å“ï¼Œå¯ä»¥çœ‹åˆ°åˆå§‹å­¦ä¹ ç‡è¾ƒé«˜çš„æ—¶å€™ï¼Œè¡°é€€ç‡åº”è¯¥ç›¸å¯¹è¾ƒä½ã€‚å› ä¸ºæ·±å±‚çš„æ¨¡å‹å¯ä»¥å­¦åˆ°çš„å†…å®¹è¾ƒå°‘ï¼Œéœ€è¦æ¯”è¾ƒä½çš„å­¦ä¹ ç‡è¿›è¡Œæ‹Ÿåˆã€‚è¿™æ˜¯ä¸æ˜¯ä¹Ÿæ„å‘³ç€åœ¨æŸä¸€å±‚æœ‰ä¸€ä¸ªæ¯”è¾ƒå›ºå®šçš„å­¦ä¹ å¯ä»¥ä½¿æ¨¡å‹è¾¾åˆ°æœ€ä¼˜å‘¢ï¼Ÿ</p>
<p><img src="/images/blog/2021/fine-tune5.png" alt></p>
<h4 id="æ·±åº¦é¢„è®­ç»ƒ-1"><a href="#æ·±åº¦é¢„è®­ç»ƒ-1" class="headerlink" title="æ·±åº¦é¢„è®­ç»ƒ"></a>æ·±åº¦é¢„è®­ç»ƒ</h4><p><strong>1. Within-Task Further Pre-Training</strong><br>ä½¿ç”¨è®­ç»ƒæ•°æ®è¿›è¡Œé¢„è®­ç»ƒï¼Œä¸‹å›¾æ˜¯é¢„è®­ç»ƒçš„stepå’Œæµ‹è¯•çš„é”™è¯¯ç‡çš„æ›²çº¿ï¼Œå¯ä»¥çœ‹åˆ°é¢„è®­ç»ƒ100Kè½®ä¹‹åé”™è¯¯ç‡æœ‰æ‰€å›å‡ã€‚</p>
<p><img src="/images/blog/2021/fine-tune6.png" alt></p>
<font color="orange">æ‰€ä»¥withIn Task pre-trainingå¯èƒ½å¹¶ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œéœ€è¦æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„å€¼ï¼ï¼ï¼</font>

<p><strong>2. In-Domain and Cross-Domain Further Pre-Training</strong><br>æ–‡ä¸­å°†è¯­æ–™åˆ†ä¸ºæƒ…æ„Ÿåˆ†æï¼Œé—®é¢˜åˆ†ç±»å’Œä¸»é¢˜åˆ†ç±»ä¸‰ä¸ªé¢†åŸŸï¼Œåœ¨è¿™äº›è¯­æ–™ä¸ŠæŒ‰ç…§é¢†åŸŸå†…å’Œè·¨é¢†åŸŸçš„é¢„è®­ç»ƒã€‚ä¸‹å›¾æ˜¯é¢„è®­ç»ƒçš„ç»“æœï¼Œallæ˜¯ä½¿ç”¨äº†æ‰€æœ‰é¢†åŸŸå†…çš„è¯­æ–™è¿›è¡Œäº†é¢„è®­ç»ƒï¼Œw/oæ˜¯åŸå§‹çš„bertã€‚å¯ä»¥çœ‹åˆ°ä¸ç®¡æ˜¯é¢†åŸŸå†…è¿˜æ˜¯è·¨é¢†åŸŸç»è¿‡é¢„è®­ç»ƒçš„æ•ˆæœéƒ½æ¯”åŸå§‹çš„Bertæœ‰æ‰€æé«˜ã€‚<strong><em>ä¸è¿‡éœ€è¦æ³¨æ„ï¼Œå°è§„æ¨¡è¯­æ–™çš„TRECç»è¿‡é¢†åŸŸå†…è®­ç»ƒçš„æ•ˆæœå˜å·®äº†ã€‚</em></strong></p>
<p><img src="/images/blog/2021/fine-tune7.png" alt></p>
<p>æ–‡ä¸­åŒæ—¶ä¹Ÿæ˜¯ç”¨Bertçš„ç‰¹å¾è¾“å…¥Bilstm+self-attentionä¸­è¿›è¡Œè¯„æµ‹ï¼Œæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼Œå…¶ä¸­ï¼š</p>
<ul>
<li>BERT-Feat: BERT as features</li>
<li>BERT-FiT: BERT + Fine-Tuning</li>
<li>BERT-ITPT-FiT: BERT + withIn-Task Pre-Training + Fine-Tuning</li>
<li>BERT-IDPT-FiT: BERT + In-Domain Pre-Training + Fine-Tuning</li>
<li>BERT-CDPT-FiT: BERT + Cross-Domain Pre-Training + Fine-Tuning</li>
</ul>
<p><img src="/images/blog/2021/fine-tune8.png" alt></p>
<p><strong><em>å¯ä»¥çœ‹åˆ°ï¼Œæ·»åŠ ä¸ŠwithIn Task Pre-Trainingæ™®éæœ‰æ•ˆæœä¸Šçš„æå‡ï¼</em></strong></p>
<h4 id="å¤šä»»åŠ¡Fine-tune-1"><a href="#å¤šä»»åŠ¡Fine-tune-1" class="headerlink" title="å¤šä»»åŠ¡Fine-tune"></a>å¤šä»»åŠ¡Fine-tune</h4><p>è®ºæ–‡ä¸­ä½¿ç”¨äº†4ä¸ªè‹±æ–‡åˆ†ç±»çš„æ•°æ®é›†(IMDB, Yelp.P, AGï¼Œ DBP)è¿›è¡Œå¤šä»»åŠ¡è®­ç»ƒï¼ŒåŒæ—¶ä½¿ç”¨äº†è·¨é¢†åŸŸé¢„è®­ç»ƒçš„Bertæ¨¡å‹è¿›è¡Œå¯¹æ¯”ï¼Œæ•ˆæœå¦‚ä¸‹ã€‚å¯ä»¥çœ‹åˆ°å¤šä»»åŠ¡å­¦ä¹ å¯ä»¥æé«˜Bertçš„æ•ˆæœï¼Œä¸æ­¤åŒæ—¶åœ¨è·¨é¢†åŸŸé¢„è®­ç»ƒBertæ¨¡å‹ä¸Šè¿›è¡Œå¤šä»»åŠ¡Fine tuneçš„æ•ˆæœæ˜¯æœ€å¥½çš„ã€‚</p>
<p><img src="/images/blog/2021/fine-tune9.png" alt></p>
<p><em>è¿™ä¸ªå®éªŒä¸»è¦è¯´æ˜cross-domain BERTæ¯”è¾ƒå‰å®³ï¼Œå¾—ä¸å‡ºå…¶ä»–ç»“è®ºã€‚</em></p>
<h4 id="è®­ç»ƒé›†çš„è§„æ¨¡"><a href="#è®­ç»ƒé›†çš„è§„æ¨¡" class="headerlink" title="è®­ç»ƒé›†çš„è§„æ¨¡"></a>è®­ç»ƒé›†çš„è§„æ¨¡</h4><p>æ–‡ä¸­å¯¹Fine-tuneæ—¶çš„è®­ç»ƒé›†çš„è§„æ¨¡å¯¹æ¨¡å‹çš„æ•ˆæœçš„å½±å“è¿›è¡Œæ¢ç´¢ã€‚å¯ä»¥çœ‹åˆ°å½“è®­ç»ƒæ•°æ®é›†æ¯”è¾ƒå°‘çš„æ—¶å€™ï¼Œæ¨¡å‹çš„é”™è¯¯ç‡æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œéšç€è®­ç»ƒé›†çš„å¢å¤§ï¼Œæ¨¡å‹çš„é”™è¯¯ç‡ä¸‹é™ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆæ¨ªåæ ‡ä»20åˆ°äº†100è¿™é‡Œæœ‰ä¸€ç‚¹è¿·æƒ‘ã€‚<br>å…¶ä¸­Bert-Fitè¡¨ç¤ºBert Fine-tune, BERT-ITPT-Fitè¡¨ç¤ºBERT + withIn-Task Pre-Training + Fine-Tuning.</p>
<p><img src="/images/blog/2021/fine-tune10.png" alt></p>
<h4 id="Bert-Largeé¢„è®­ç»ƒ"><a href="#Bert-Largeé¢„è®­ç»ƒ" class="headerlink" title="Bert Largeé¢„è®­ç»ƒ"></a>Bert Largeé¢„è®­ç»ƒ</h4><p>æ–‡ä¸­å¯¹Bert Largeä¹Ÿè¿›è¡Œäº†With taské¢„è®­ç»ƒï¼Œå¤§åŠ›å‡ºå¥‡è¿¹ï¼Œæœç„¶Bert largeçš„æ•ˆæœæ›´å¥½</p>
<p><img src="/images/blog/2021/fine-tune11.png" alt></p>
<font color="orange">**ä½¿ç”¨bert-largeå¾€å¾€å¯ä»¥å–å¾—æ›´å¥½çš„æ•ˆæœï¼Œä½†æ˜¯ï¼Œå–å¾—çš„æ•ˆæœæå‡å¾ˆå¤šæ—¶å€™ç›¸æ¯”äºè®­ç»ƒæ—¶é—´å’Œå‚æ•°æ•°é‡çš„æå‡ï¼Œæ˜¯å¾®ä¸è¶³é“çš„ã€‚å› æ­¤ï¼Œéœ€è¦å¹³è¡¡å¥½å®éªŒç»“æœå’Œå®éªŒæ•ˆç‡ã€‚**</font>

<h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>æ„Ÿè§‰è¿™æ˜¯ä¸€ç¯‡éå¸¸æ‰å®ï¼Œè€ƒè™‘æ¯”è¾ƒå…¨é¢çš„å®éªŒæŠ¥å‘Šï¼Œä½†æ˜¯å¯¹äºå®éªŒç»“æœçš„æ€è€ƒå’Œè§£é‡Šä¸å¤šã€‚æ€»ä¹‹ä½¿ç”¨Bertå¾®è°ƒçš„æ—¶å€™å¯ä»¥è€ƒè™‘åœ¨é¢†åŸŸå†…é‡æ–°é¢„è®­ç»ƒï¼Œè®©æ¨¡å‹å¤šå­¦ä¹ ç‚¹çŸ¥è¯†ï¼Œä»¥åŠæ·±åº¦å­¦ä¹ è¿˜æ˜¯ä¸€å¦‚æ—¢å¾€åœ°å¤§åŠ›å‡ºå¥‡è¿¹ã€‚</p>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ol>
<li><p><a href="https://arxiv.org/pdf/1905.05583.pdf" target="_blank" rel="noopener">How to Fine-Tune BERT for Text Classification</a></p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/148720604" target="_blank" rel="noopener">å¦‚ä½•è®©BERTåœ¨fine-tuneå°æ•°æ®é›†æ—¶æ›´â€œç¨³â€ä¸€ç‚¹</a></p>
</li>
</ol>
]]></content>
      <categories>
        <category>NLP</category>
        <category>Pretrained Language Model</category>
      </categories>
      <tags>
        <tag>BERT</tag>
        <tag>fine-tune</tag>
        <tag>MLM</tag>
      </tags>
  </entry>
  <entry>
    <title>GPT1å’ŒGPT2</title>
    <url>/2021/01/06/GPT1%E5%92%8CGPT2/</url>
    <content><![CDATA[<blockquote>
<p>æœ¬ç‰‡æ–‡ç« è½¬è½½äºï¼šæ€»ç»“GPT1å’ŒGPT2</p>
<p><a href="https://blog.csdn.net/beilizhang/article/details/109282032" target="_blank" rel="noopener">https://blog.csdn.net/beilizhang/article/details/109282032</a></p>
</blockquote>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<ol>
<li><a href="https://blog.csdn.net/hyzhyzhyz12345/article/details/104181606" target="_blank" rel="noopener">https://blog.csdn.net/hyzhyzhyz12345/article/details/104181606</a></li>
<li><a href="https://www.jianshu.com/p/a68288613a0f" target="_blank" rel="noopener">https://www.jianshu.com/p/a68288613a0f</a></li>
<li><a href="https://blog.csdn.net/u012526436/article/details/87882985" target="_blank" rel="noopener">https://blog.csdn.net/u012526436/article/details/87882985</a></li>
<li><a href="https://www.jianshu.com/p/6c2bfa1848f2" target="_blank" rel="noopener">https://www.jianshu.com/p/6c2bfa1848f2</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/57251615" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/57251615</a></li>
<li><a href="https://www.jiqizhixin.com/articles/2019-08-26-12" target="_blank" rel="noopener">https://www.jiqizhixin.com/articles/2019-08-26-12</a></li>
</ol>
<h2 id="GPT1"><a href="#GPT1" class="headerlink" title="GPT1"></a>GPT1</h2><p>å…¨ç§°ï¼šGenerative Pre-Training 1.0<br>è®ºæ–‡ï¼š<a href="https://s3-us-west-2.amazonaws.com/openai-assets/research-covers/language-unsupervised/language_understanding_paper.pdf" target="_blank" rel="noopener">ã€ŠImproving Language Understanding by Generative Pre-Trainingã€‹</a></p>
<h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>GPT1é‡‡ç”¨äº†NLPä¸­å¸¸ç”¨çš„â€œé¢„è®­ç»ƒ+å¾®è°ƒï¼ˆgenerative pre-training + discriminative fine-tuningï¼‰â€çš„æ¨¡å¼ã€‚</p>
<p>ç”±äºLSTMç­‰ç»“æ„åœ¨æ•è·é•¿æœŸä¾èµ–çš„å±€é™æ€§ï¼Œ<strong>GPT1çš„æ¨¡å‹æ˜¯Transformerçš„Decoderéƒ¨åˆ†</strong>ï¼Œå…¶é‡‡ç”¨çš„self-attentionæœºåˆ¶è¾ƒå¥½åœ°å¼¥è¡¥äº†LSTMçš„å¼Šç«¯ã€‚</p>
<a id="more"></a>
<h3 id="æ¡†æ¶"><a href="#æ¡†æ¶" class="headerlink" title="æ¡†æ¶"></a>æ¡†æ¶</h3><h4 id="1-æ— ç›‘ç£çš„é¢„è®­ç»ƒé˜¶æ®µï¼ˆUnsupervised-pre-trainingï¼‰"><a href="#1-æ— ç›‘ç£çš„é¢„è®­ç»ƒé˜¶æ®µï¼ˆUnsupervised-pre-trainingï¼‰" class="headerlink" title="1.æ— ç›‘ç£çš„é¢„è®­ç»ƒé˜¶æ®µï¼ˆUnsupervised pre-trainingï¼‰"></a>1.æ— ç›‘ç£çš„é¢„è®­ç»ƒé˜¶æ®µï¼ˆUnsupervised pre-trainingï¼‰</h4><p>ç»™å®šä¸€ä¸ªæ— ç›‘ç£çš„ï¼ˆæ— æ ‡ç­¾ï¼‰tokensè¯­æ–™åº“$U = { u 1 , â‹… â‹… â‹… , u n }$ ï¼Œé€‰æ‹©æ ‡å‡†çš„è¯­è¨€æ¨¡å‹ç›®æ ‡å‡½æ•°ï¼ˆå³æ ¹æ®å‰kä¸ªè¯é¢„æµ‹ä¸‹ä¸€ä¸ªè¯ï¼‰ï¼Œéœ€æœ€å¤§åŒ–ï¼š</p>
<p>$ L<em>1(U) = \sum_i\log P (u_i|u</em>{i-k}, â€¦, u_{i-1};\Theta)$</p>
<p>å…¶ä¸­ï¼Œkä¸ºtokençš„ä¸Šä¸‹æ–‡çª—å£å¤§å°ï¼Œæ¡ä»¶æ¦‚ç‡Pä½¿ç”¨å‚æ•°ä¸ºÎ˜çš„ç¥ç»ç½‘ç»œå»ºæ¨¡ã€‚GPT1çš„ç»“æ„ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="/images/blog/2021/gpt.png" alt></p>
<p>1) è¾“å…¥ä¸ºå‰kä¸ªè¯å’Œä½ç½®çš„embedding</p>
<p>$h_0 = UW_e + W_p$</p>
<p>å…¶ä¸­ï¼Œ$U=(u<em>{-k},â€¦,u</em>{-1})$ä¸ºtokenä¸Šä¸‹æ–‡çš„one-hotå‘é‡ï¼Œåˆ™$UW_e$ä¸ºä¸Šä¸‹æ–‡å¯¹åº”çš„embeddingã€‚</p>
<p>2) ç»è¿‡nå±‚transformer-decoderå±‚ (12å±‚)</p>
<p>$h<em>l = transformerBlock(h</em>{l-1}) \forall l \in [1, n]$</p>
<p>3) ä¹˜ä¸Šä¸€ä¸ªtoken embeddingçŸ©é˜µï¼Œé€šè¿‡softmaxå¾—åˆ°æ¦‚ç‡</p>
<p>$P(u) = softmax(h_nW_e^T)$</p>
<h4 id="2-æœ‰ç›‘ç£çš„å¾®è°ƒé˜¶æ®µï¼ˆSupervised-fine-tuningï¼‰"><a href="#2-æœ‰ç›‘ç£çš„å¾®è°ƒé˜¶æ®µï¼ˆSupervised-fine-tuningï¼‰" class="headerlink" title="2.æœ‰ç›‘ç£çš„å¾®è°ƒé˜¶æ®µï¼ˆSupervised fine-tuningï¼‰"></a>2.æœ‰ç›‘ç£çš„å¾®è°ƒé˜¶æ®µï¼ˆSupervised fine-tuningï¼‰</h4><p><img src="/images/blog/2021/gpt_finetune.png" alt></p>
<p>å¯¹æ¯”é¢„è®­ç»ƒé˜¶æ®µï¼Œå¯ä»¥çœ‹å‡ºï¼Œåªæ˜¯å¤šå¢åŠ äº†â€œTask Classifierâ€æ¨¡å—ã€‚</p>
<p>å¯¹äºæœ‰ç›‘ç£çš„è®­ç»ƒï¼Œæ•°æ®é›†Cæ¯ä¸ªæ ·æœ¬è‡ªç„¶åŒ…æ‹¬ä¸€ä¸ªè¾“å…¥tokensåºåˆ—$x^1,â€¦,x^m$å’Œå¯¹åº”çš„æ ‡ç­¾yï¼Œå…·ä½“ä»»åŠ¡ç›¸åº”çš„ç›®æ ‡å‡½æ•°ä¸ºï¼š</p>
<p>$L<em>2(C) = \sum</em>{(x,y)}\log P(y|x^1,â€¦,x^m)$</p>
<p>å…¶ä¸­ï¼Œ$ P(y|x^1,â€¦,x^m)$ = $softmax (h_l^mW_y)$ï¼Œ$h_l^m$ä¸ºæœ€åä¸€ä¸ªtoken$x^m$å¯¹åº”çš„æœ€åä¸€å±‚transformer decoderçš„è¾“å‡ºã€‚æ‰€ä»¥éœ€è¦é¢å¤–è°ƒæ•´çš„å‚æ•°åªæœ‰$W_y$</p>
<p>æœ€ç»ˆï¼Œå¾®è°ƒé˜¶æ®µçš„ç›®æ ‡å‡½æ•°ä¸ºï¼š</p>
<p>$L_3(C) = L_2(C) + \lambda * L_1(C)$</p>
<p>ä¸Šå›¾è¿˜å±•ç¤ºäº†ä¸€ä¸ªç»†èŠ‚ï¼Œå°±æ˜¯é’ˆå¯¹ä¸åŒçš„ä»»åŠ¡ï¼Œæ¨¡å‹çš„è¾“å…¥tokenåºåˆ—æ˜¯æœ‰åŒºåˆ«çš„ï¼š</p>
<ol>
<li>å¯¹äºæ–‡æœ¬åˆ†ç±»ä»»åŠ¡ï¼Œè¾“å…¥æ ¼å¼ä¸é¢„è®­ç»ƒæ—¶ä¸€æ ·ï¼Œ[start;text;extract]ï¼›</li>
<li><strong>å¯¹äºæ–‡æœ¬è•´å«ä»»åŠ¡ï¼Œåœ¨å‰æï¼ˆpremiseï¼‰å’Œå‡è®¾ï¼ˆhypothesisï¼‰é—´åŠ ä¸Šäº†ä¸€ä¸ªåˆ†éš”ç¬¦ï¼ˆdelimiterï¼‰</strong>ï¼Œ[start;premise;delimiter;hypothesis;extract]ï¼›<br><em>æ³¨ï¼šæ–‡æœ¬è•´å«ä»»åŠ¡(text entailment)ï¼Œå®ƒçš„ä»»åŠ¡å½¢å¼æ˜¯ï¼šç»™å®šä¸€ä¸ªå‰ææ–‡æœ¬ï¼ˆpremiseï¼‰ï¼Œæ ¹æ®è¿™ä¸ªå‰æå»æ¨æ–­å‡è®¾æ–‡æœ¬ï¼ˆhypothesisï¼‰ä¸å‰ææ–‡æœ¬çš„å…³ç³»ï¼Œä¸€èˆ¬åˆ†ä¸ºè•´å«å…³ç³»ï¼ˆentailmentï¼‰å’ŒçŸ›ç›¾å…³ç³»ï¼ˆcontradictionï¼‰ï¼Œè•´å«å…³ç³»ï¼ˆentailmentï¼‰è¡¨ç¤ºä»å‰ææ–‡æœ¬ä¸­å¯ä»¥æ¨æ–­å‡ºå‡è®¾æ–‡æœ¬ï¼›çŸ›ç›¾å…³ç³»ï¼ˆcontradictionï¼‰å³å‡è®¾æ–‡æœ¬ä¸å‰ææ–‡æœ¬çŸ›ç›¾ã€‚æ–‡æœ¬è•´å«çš„ç»“æœå°±æ˜¯è¿™å‡ ä¸ªæ¦‚ç‡å€¼ã€‚</em></li>
<li>å¯¹äºæ–‡æœ¬ç›¸ä¼¼æ€§åº¦é‡ä»»åŠ¡ï¼Œç”±äºä¸¤ä¸ªæ–‡æœ¬é—´æ²¡æœ‰ç›¸å¯¹é¡ºåºï¼Œæ‰€ä»¥æŠŠä¸¤ç§æƒ…å†µï¼ˆ[start;text1;delimiter;text2;extract]å’Œ[start;text2;delimiter;text1;extract]ï¼‰åˆ†åˆ«å¤„ç†åå¾—åˆ°ä¸¤ä¸ªh l m h_{l}^{m}<em>h<strong>l</strong>m</em>åï¼Œå†æŒ‰ä½ç›¸åŠ ç»è¿‡å…¨è¿æ¥å±‚ï¼›</li>
<li>å¯¹äºé—®ç­”å’Œå¸¸è¯†æ¨ç†ä»»åŠ¡ï¼Œå°†ä¸Šä¸‹æ–‡æ–‡æ¡£ï¼ˆcontext documentï¼‰å’Œé—®é¢˜ï¼ˆquestionï¼‰ä¸ä¸åŒçš„ç­”æ¡ˆï¼ˆanswerï¼‰åˆ†åˆ«æ‹¼æ¥èµ·æ¥ï¼ˆ[start;context;question;delimiter;answer1];[start;context;question;delimiter;answer2]â€¦ï¼‰ï¼Œç»è¿‡æ¨¡å‹åï¼Œå†ç»è¿‡softmaxå±‚ã€‚</li>
</ol>
<h2 id="GPT2"><a href="#GPT2" class="headerlink" title="GPT2"></a>GPT2</h2><p>å…¨ç§°ï¼šGenerative Pre-Training 2.0<br>è®ºæ–‡ï¼š<a href="https://d4mucfpksywv.cloudfront.net/better-language-models/language-models.pdf" target="_blank" rel="noopener">ã€ŠLanguage Models are Unsupervised Multitask Learnersã€‹</a></p>
<h3 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>GPT2æœ‰4ä¸ªä¸åŒçš„ç‰ˆæœ¬ï¼Œåˆ†åˆ«å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒåŒºåˆ«åœ¨äºembeddingçš„ç»´åº¦å’Œtransformer-decoderçš„å±‚æ•°ã€‚æ‰€æœ‰çš„æ¨¡å‹ç›®å‰åœ¨WebTextä¸Šéƒ½è¿˜å­˜åœ¨æ¬ æ‹Ÿåˆçš„æƒ…å†µï¼Œå¦‚æœç»™æ›´å¤šçš„æ—¶é—´å»è®­ç»ƒçš„è¯æ•ˆæœè¿˜èƒ½è¿›ä¸€æ­¥çš„æå‡ã€‚</p>
<p><img src="/images/blog/2021/gpt2.png" alt></p>
<h2 id="GPT2ä¸GPT1"><a href="#GPT2ä¸GPT1" class="headerlink" title="GPT2ä¸GPT1"></a>GPT2ä¸GPT1</h2><p>æœ€ä¸»è¦çš„åŒºåˆ«è¿˜æ˜¯GPT2å®Œå…¨å˜æˆæ— ç›‘ç£è®­ç»ƒï¼Œç›´æ¥ç”¨äºä¸‹æ¸¸ä»»åŠ¡ï¼Œå±äºé›¶æ ·æœ¬å­¦ä¹ ï¼ˆZero-shot learningï¼‰ã€‚ä¸‹é¢å…·ä½“ä»‹ç»ä¸€äº›åŒºåˆ«ã€‚</p>
<h3 id="è¾“å…¥è¡¨å¾ï¼ˆInput-Representationï¼‰"><a href="#è¾“å…¥è¡¨å¾ï¼ˆInput-Representationï¼‰" class="headerlink" title="è¾“å…¥è¡¨å¾ï¼ˆInput Representationï¼‰"></a>è¾“å…¥è¡¨å¾ï¼ˆInput Representationï¼‰</h3><p>ä¸ºäº†è§£å†³wordçº§åˆ«çš„embeddingå¸¸å­˜åœ¨çš„OOVé—®é¢˜ï¼ˆout-of-vocabularyï¼Œå³è¯å…¸ä»¥å¤–çš„è¯æ±‡ï¼‰ï¼Œè€Œå­—ç¬¦çº§çš„embeddingæ•ˆæœåˆä¸å¤ªå¥½ã€‚</p>
<p>æœ¬æ–‡é‡‡ç”¨äº†å­—èŠ‚å¯¹ç¼–ç ï¼ˆBPEï¼ŒByte Pair Encodingï¼‰ï¼Œå³å°†é¢‘ç‡é«˜çš„å­—èŠ‚å¯¹ä¸€èµ·ç¼–ç ã€‚<br>ï¼ˆä»¥ä¸‹éƒ¨åˆ†å†…å®¹ä¸ºæœ¬äººçš„æ¨æµ‹ï¼‰<br>GPT2å¯èƒ½ä½¿ç”¨çš„æ˜¯UTF-8çš„ç¼–ç æ–¹å¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒUTF-8ä¼šå°†å­—ç¬¦ä»¥8ä½ä¸ºä¸€ä¸ªç¼–ç å•å…ƒè¿›è¡Œç¼–ç ï¼Œæ‰€ä»¥åªéœ€è¦æœ‰0~255å¯¹åº”çš„embeddingå°±å¯ä»¥å¾—åˆ°æ¯ä¸ªå­—ç¬¦embeddingï¼ˆä¸åŸæ–‡â€œa byte-level version of BPE only requires a base vocabulary of size 256.â€å¯¹åº”ï¼‰ï¼Œå¦‚å°†266ã€128ã€188å¯¹åº”çš„embeddingåŠ èµ·æ¥å°±å¾—åˆ°äº†â€œ!!â€çš„embeddingã€‚</p>
<p><img src="/images/blog/2021/255.png" alt></p>
<p>ä½†è¿™ç§æ•ˆæœè‚¯å®šä¸å¥½ï¼Œæ‰€ä»¥å¯¹é«˜é¢‘çš„å­—ç¬¦ä¸²åº”è¯¥è¿›è¡Œé¢å¤–å­¦ä¹ embeddingï¼Œå¦‚â€œdogâ€æœ‰å¾ˆé«˜çš„é¢‘ç‡ä¸€èµ·å‡ºç°ï¼Œæ‰€ä»¥å•ç‹¬ç»™å®ƒä¸€ä¸ªembeddingã€‚ä½†â€œdog?â€ã€â€œdog.â€ã€â€œdog!â€ç­‰ä¹Ÿæœ‰å¾ˆé«˜çš„é¢‘ç‡ä¸€èµ·å‡ºç°ï¼Œå¦‚æœä¹Ÿå•ç‹¬ç»™å®ƒä»¬ä¸€ä¸ªembeddingæœ‰äº›æµªè´¹èµ„æºï¼Œæ‰€ä»¥è®¾ç½®ä¸€ä¸ªè§„åˆ™ï¼šå¯¹äºåŒ…å«å¤šç±»å­—ç¬¦çš„å­—ç¬¦ä¸²ä¸é¢å¤–å­¦ä¹ embeddingã€‚</p>
<p><strong><em>å¦‚æ­¤ï¼ŒGPT2ä¸éœ€è¦ä»»ä½•é¢„å¤„ç†å³å¯ç”¨äºä»»æ„æ•°æ®é›†ã€‚</em></strong></p>
<h3 id="æ¨¡å‹ï¼ˆModelï¼‰"><a href="#æ¨¡å‹ï¼ˆModelï¼‰" class="headerlink" title="æ¨¡å‹ï¼ˆModelï¼‰"></a>æ¨¡å‹ï¼ˆModelï¼‰</h3><ol>
<li>Layer normalizationå±‚è¢«ç§»åŠ¨åˆ°äº†æ¯ä¸ªå­å—çš„è¾“å…¥ï¼›</li>
<li>åœ¨æ¯ä¸ªself-attention blockååŠ normaliztionï¼›</li>
<li>ä¿®æ”¹residual layersçš„æƒé‡ï¼ˆ$1/\sqrt{N}$ï¼Œå…¶ä¸­Nä¸ºæ®‹å·®å±‚çš„æ•°é‡ï¼‰ï¼Œå³æ®‹å·®å±‚çš„å‚æ•°åˆå§‹åŒ–æ ¹æ®ç½‘ç»œæ·±åº¦è¿›è¡Œè°ƒèŠ‚ï¼›</li>
<li>è¯æ±‡é‡å¢åŠ åˆ°50257ï¼›</li>
<li>ä¸Šä¸‹æ–‡å¤§å°ä»512å¢åŠ åˆ°1024;</li>
<li>batchsizeå¢åŠ åˆ°512</li>
</ol>
<p>GPT2çš„æ¨¡å‹å¤§æ¦‚å…«æˆå¯èƒ½ä¹Ÿå°±åƒä¸‹å›¾å³ä¸€ï¼š</p>
<p><img src="/images/blog/2021/gpt2_model.png" alt></p>
<h3 id="å‚æ•°ä¸ªæ•°ç»Ÿè®¡"><a href="#å‚æ•°ä¸ªæ•°ç»Ÿè®¡" class="headerlink" title="å‚æ•°ä¸ªæ•°ç»Ÿè®¡"></a>å‚æ•°ä¸ªæ•°ç»Ÿè®¡</h3><p>GPT2-smallçš„å‚æ•°ç»Ÿè®¡è¡¨å¦‚ä¸‹ï¼š</p>
<p><img src="/images/blog/2021/gpt2_size.png" alt></p>
<p>å…¶ä¸­ï¼Œattn/c_attnå’Œattn/c_projåˆ†åˆ«ä¸ºSelf-Attentionæ¨¡å—ä¸­çš„attentionçŸ©é˜µå’Œæ˜ å°„çŸ©é˜µï¼›attn/c_projå’Œattn/fcåˆ†åˆ«ä¸ºFeed-Forwardæ¨¡å—ä¸­çš„å…¨è¿æ¥å±‚å’Œæ˜ å°„å±‚ï¼›ln_1å’Œln_2ä¸ºä¸¤ä¸ªLayer Normalizationå±‚ã€‚</p>
<h3 id="å¦‚ä½•ä½¿ç”¨"><a href="#å¦‚ä½•ä½¿ç”¨" class="headerlink" title="å¦‚ä½•ä½¿ç”¨"></a>å¦‚ä½•ä½¿ç”¨</h3><p>è¿™é‡Œç›´æ¥å€Ÿç”¨äº†æå®æ¯…è€å¸ˆçš„pptï¼š</p>
<p><img src="/images/blog/2021/gpt2_li.png" alt></p>
<p>å¯ä»¥çœ‹å‡ºï¼Œåœ¨ä½¿ç”¨æ¨¡å‹æ—¶ï¼Œåªéœ€è¦ç»™GPTå°‘é‡çš„æ–‡æœ¬å’Œæç¤ºè¯ï¼ŒGPTå°±å¯ä»¥è‡ªåŠ¨å®Œæˆé˜…è¯»ç†è§£ã€æ–‡æœ¬æ‘˜è¦å’Œç¿»è¯‘ç­‰ä»»åŠ¡ã€‚</p>
]]></content>
      <categories>
        <category>NLP</category>
        <category>Pretrained Language Model</category>
      </categories>
      <tags>
        <tag>GPT</tag>
        <tag>OpenAI</tag>
        <tag>GPT2</tag>
      </tags>
  </entry>
  <entry>
    <title>fine-tuning GPT2</title>
    <url>/2021/01/05/fine-tuning-GPT2/</url>
    <content><![CDATA[<h1 id="GPT2"><a href="#GPT2" class="headerlink" title="GPT2"></a>GPT2</h1><h2 id="abstract"><a href="#abstract" class="headerlink" title="abstract"></a>abstract</h2><p><em>GPT-2 is a large transformer-based language model with 1.5 billion parameters, trained on a dataset[1] of 8 million web pages. GPT-2 is trained with a simple objective: predict the next word, given all of the previous words within some text. The diversity of the dataset causes this simple goal to contain naturally occurring demonstrations of many tasks across diverse domains. GPT-2 is a direct scale-up of GPT, with more than 10X the parameters and trained on more than 10X the amount of data.</em></p>
<h1 id="fine-tuning"><a href="#fine-tuning" class="headerlink" title="fine-tuning"></a>fine-tuning</h1><p>å‚è€ƒ<a href="https://github.com/huggingface/transformers/tree/master/examples/language-modeling" target="_blank" rel="noopener">transformerså®˜æ–¹ä»£ç </a></p>
<p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">CUDA_VISIBLE_DEVICES=0 python run_clm.py --model_name_or_path ../gpt2 --train_file nyt_corpus.txt --do_train --output_dir output --num_train_epochs 5 --save_steps 10000 --save_total_limit 2 --seed 666 --block_size 512</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>ç»“æœä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">'loss'</span>: 2.385447265625, <span class="string">'learning_rate'</span>: 6.140350877192982e-06, <span class="string">'epoch'</span>: 4.385964912280702&#125;                                                                                                 </span><br><span class="line">&#123;<span class="string">'loss'</span>: 2.379493408203125, <span class="string">'learning_rate'</span>: 4.954954954954955e-06, <span class="string">'epoch'</span>: 4.504504504504505&#125;                                                                                              </span><br><span class="line">&#123;<span class="string">'loss'</span>: 2.36677001953125, <span class="string">'learning_rate'</span>: 3.7695590327169273e-06, <span class="string">'epoch'</span>: 4.623044096728307&#125;                                                                                              </span><br><span class="line">&#123;<span class="string">'loss'</span>: 2.3599794921875, <span class="string">'learning_rate'</span>: 2.5841631104789e-06, <span class="string">'epoch'</span>: 4.74158368895211&#125;                                                                                                   </span><br><span class="line"> 95%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–Œ       | 20000/21090 [2:38:31&lt;08:34,  2.12it/s][INFO|trainer.py:1256] 2021-01-05 20:18:25,155 &gt;&gt; Saving model checkpoint to output/checkpoint-20000</span><br><span class="line">[INFO|configuration_utils.py:289] 2021-01-05 20:18:25,156 &gt;&gt; Configuration saved <span class="keyword">in</span> output/checkpoint-20000/config.json</span><br><span class="line">[INFO|modeling_utils.py:817] 2021-01-05 20:18:26,300 &gt;&gt; Model weights saved <span class="keyword">in</span> output/checkpoint-20000/pytorch_model.bin</span><br><span class="line">/root/venv/gpt2-fine/lib/python3.6/site-packages/torch/nn/parallel/_functions.py:64: UserWarning: Was asked to gather along dimension 0, but all input tensors were scalars; will instead unsqueeze and <span class="built_in">return</span> a vector.</span><br><span class="line">  warnings.warn(<span class="string">'Was asked to gather along dimension 0, but all '</span></span><br><span class="line">&#123;<span class="string">'loss'</span>: 2.38309765625, <span class="string">'learning_rate'</span>: 1.3987671882408725e-06, <span class="string">'epoch'</span>: 4.8601232811759125&#125;                                                                                                </span><br><span class="line">&#123;<span class="string">'loss'</span>: 2.37827490234375, <span class="string">'learning_rate'</span>: 2.1337126600284497e-07, <span class="string">'epoch'</span>: 4.978662873399715&#125;                                                                                              </span><br><span class="line">100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 21090/21090 [2:47:13&lt;00:00,  2.41it/s][INFO|trainer.py:886] 2021-01-05 20:27:07,410 &gt;&gt; </span><br><span class="line"></span><br><span class="line">Training completed. Do not forget to share your model on huggingface.co/models =)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;<span class="string">'train_runtime'</span>: 10033.7466, <span class="string">'train_samples_per_second'</span>: 2.102, <span class="string">'epoch'</span>: 5.0&#125;                                                                                                               </span><br><span class="line">100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 21090/21090 [2:47:13&lt;00:00,  2.10it/s]</span><br><span class="line">[INFO|trainer.py:1256] 2021-01-05 20:27:07,411 &gt;&gt; Saving model checkpoint to output</span><br><span class="line">[INFO|configuration_utils.py:289] 2021-01-05 20:27:07,412 &gt;&gt; Configuration saved <span class="keyword">in</span> output/config.json</span><br><span class="line">[INFO|modeling_utils.py:817] 2021-01-05 20:27:08,907 &gt;&gt; Model weights saved <span class="keyword">in</span> output/pytorch_model.bin</span><br><span class="line">01/05/2021 20:27:08 - INFO - __main__ -   ***** Train results *****</span><br><span class="line">01/05/2021 20:27:08 - INFO - __main__ -     epoch = 5.0</span><br><span class="line">01/05/2021 20:27:08 - INFO - __main__ -     train_runtime = 10033.7466</span><br><span class="line">01/05/2021 20:27:08 - INFO - __main__ -     train_samples_per_second = 2.102</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>NLP</category>
        <category>Pretrained Language Model</category>
      </categories>
      <tags>
        <tag>GPT</tag>
        <tag>OpenAI</tag>
        <tag>GPT2</tag>
        <tag>fine-tuning</tag>
      </tags>
  </entry>
  <entry>
    <title>BERTéœ€è¦é‚£ä¹ˆå¤šmulti-headå—ï¼Ÿ</title>
    <url>/2021/01/05/BERT%E9%9C%80%E8%A6%81%E9%82%A3%E4%B9%88%E5%A4%9Amulti-head%E5%90%97%EF%BC%9F/</url>
    <content><![CDATA[<p><a href="https://arxiv.org/pdf/1905.10650.pdf" target="_blank" rel="noopener">Are Sixteen Heads Really Better than One?</a></p>
<p>æœ¬æ–‡çš„æ ¸å¿ƒæ€æƒ³æ˜¯æ¢ç´¢transformerç»“æ„ä¸­çš„multi-headæœºåˆ¶æ˜¯å¦çœŸçš„éœ€è¦è¿™ä¹ˆå¤šä¸ªhead.</p>
<p>æ›´å¤šå…·ä½“çš„å†…å®¹å¯ä»¥å‚è€ƒï¼š</p>
<blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/75036286" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/75036286</a></p>
</blockquote>
<h1 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h1><p>æ€»ç»“ï¼šæœ¬æ–‡å®éªŒè¿˜æ˜¯åšå¾—éå¸¸å……åˆ†çš„ï¼Œæ€»çš„æ¥è¯´æœ‰å¦‚ä¸‹å‡ ä¸ªç»“è®º</p>
<ul>
<li>å¤§éƒ¨åˆ†headéƒ½æ˜¯å¯ä»¥å•ç‹¬å»æ‰çš„</li>
<li>å‡ ä¹æ‰€æœ‰layeréƒ½å¯ä»¥åªä¿ç•™ä¸€ä¸ªheadï¼ˆå…¶ä»–layerä¿æŒæ­£å¸¸ï¼‰</li>
<li>ä¸€äº›æ¯”è¾ƒé‡è¦çš„headæ¯”è¾ƒå…·æœ‰æ™®é€‚æ€§ï¼Œåœ¨ä¸åŒåœºæ™¯ä¸­éƒ½åŒæ ·é‡è¦</li>
<li>æ–‡ä¸­æå‡ºçš„headæ•æ„Ÿåº¦æŒ‡æ ‡åœ¨å¯å‘å¼ä¸åŒå±‚é—´çš„å‰ªææ—¶å€™æ¯”è¾ƒæœ‰æ•ˆ</li>
<li>headå±‚é¢çš„å‰ªæå¯¹transformeræé€Ÿæ¯”è¾ƒæœ‰é™</li>
<li>ç”Ÿæˆé—®é¢˜ä¸­encoder-decoderçš„multi-headç›¸å¯¹æ›´é‡è¦</li>
<li>å‰ªæåéœ€è¦è®­ç»ƒçš„æ—¶é•¿ä¼šæ›´é•¿ï¼Œå¹¶ä¸”ä¸å®œå‰ªæè¿‡å¤šï¼Œå¦åˆ™è¦ä¹ˆæ— æ³•æ”¶æ•›ï¼Œè¦ä¹ˆæ”¶æ•›åˆ°ä¸€ä¸ªéå¸¸å·®çš„å€¼</li>
</ul>
<a id="more"></a>
<h1 id="å®éªŒ"><a href="#å®éªŒ" class="headerlink" title="å®éªŒ"></a>å®éªŒ</h1><p>åœ¨å…³ç³»æŠ½å–ä¸­ï¼Œæ¢ç´¢å¯¹headéšæœºmaskæ˜¯å¦ä¼šå¸¦æ¥æ•ˆæœçš„æå‡ï¼Ÿ</p>
]]></content>
      <categories>
        <category>NLP</category>
        <category>Pretrained Language Model</category>
      </categories>
      <tags>
        <tag>BERT</tag>
        <tag>multi-head</tag>
      </tags>
  </entry>
  <entry>
    <title>allennlp jsonnet error</title>
    <url>/2021/01/05/allennlp-jsonnet-error/</url>
    <content><![CDATA[<p>åœ¨å®‰è£…allennlpæ—¶ï¼Œå‡ºç°ç¼–è¯‘é”™è¯¯ï¼Œä»”ç»†é˜…è¯»æŠ¥é”™ï¼Œå‘ç°ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">make: g++ <span class="built_in">command</span> not found</span><br></pre></td></tr></table></figure>
<p>åŸå› æ˜¯å‡ºåœ¨g++è¿™é‡Œï¼Œä»ç½‘ä¸ŠæŸ¥é˜…äº†å‚è€ƒèµ„æ–™ï¼Œ<strong>é€‚åˆæˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯</strong>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt-get install aptitude</span><br><span class="line">apt-get update</span><br><span class="line">apt-get build-essential</span><br></pre></td></tr></table></figure>
<p>åŸå› æ˜¯allennlpè¦æ±‚çš„g++ç‰ˆæœ¬ä¸ç°æœ‰ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œæƒ³åŠæ³•å‡çº§å³å¯ã€‚</p>
<p>ç„¶åå®‰è£…<code>build-essential</code>ï¼Œä»¥åŠå…¶ä»–å¿…è¦çš„ç¼–è¯‘ç¯å¢ƒï¼Œå‚è€ƒ<a href="https://github.com/scrapy/scrapy/issues/2115" target="_blank" rel="noopener">issue</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install python3 python-dev python3-dev \</span><br><span class="line">     build-essential libssl-dev libffi-dev \</span><br><span class="line">     libxml2-dev libxslt1-dev zlib1g-dev \</span><br><span class="line">     python-pip</span><br></pre></td></tr></table></figure>
<p>â”­â”®ï¹â”­â”®ï¼Œå¤ªä¸å®¹æ˜“äº†</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Successfully built jsonnet</span><br><span class="line">Installing collected packages: jsonnet, h5py, boto3, allennlp</span><br><span class="line">Successfully installed allennlp-1.3.0 boto3-1.16.48 h5py-3.1.0 jsonnet-0.17.0</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>allennlp</tag>
        <tag>jsonnet</tag>
        <tag>g++</tag>
        <tag>aptitude</tag>
        <tag>apt-get</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨BibTeXç”Ÿæˆå‚è€ƒæ–‡çŒ®åˆ—è¡¨</title>
    <url>/2021/01/05/%E4%BD%BF%E7%94%A8BibTeX%E7%94%9F%E6%88%90%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE%E5%88%97%E8%A1%A8/</url>
    <content><![CDATA[<blockquote>
<p>æœ¬ç¯‡æ–‡ç« è½¬è½½è‡ªï¼š</p>
<p><a href="https://liam.page/2016/01/23/using-bibtex-to-generate-reference/" target="_blank" rel="noopener">https://liam.page/2016/01/23/using-bibtex-to-generate-reference/</a></p>
</blockquote>
<p>LaTeX æ˜¯ä¸€äº›ç†å·¥ä¸“ä¸šè®ºæ–‡æ’ç‰ˆçš„äº‹å®æ ‡å‡†ã€‚æ—¢ç„¶æ˜¯è®ºæ–‡æ’ç‰ˆï¼Œå°±ä¸å¯é¿å…ä¼šæ¶‰åŠåˆ°å‚è€ƒæ–‡çŒ®çš„å¤„ç†ã€‚Oren Patashnik å’Œ Leslie Lamport åœ¨ 1985 å¹´å¼€å‘çš„ BibTeX æ˜¯åœ¨ LaTeX ç¤¾åŒºç›¸å½“æµè¡Œçš„å‚è€ƒæ–‡çŒ®æ ¼å¼åŒ–å·¥å…·ã€‚</p>
<p>å…¶å®ç½‘ç»œä¸Šæµä¼ çš„ BibTeX æ•™ç¨‹å¾ˆå¤šï¼Œæœ¬ä¸ç”¨æˆ‘å†æ¥æ’ä¸€å¥å˜´ã€‚ä¸è¿‡è¿™ä¹ˆå¤šå¹´æ¥ï¼Œå§‹ç»ˆæœ‰å¾ˆå¤šæœ‹å‹ä¼šå¯¹å‡ ä¸ªé—®é¢˜åå¤æé—®ã€‚è¿™è®©æˆ‘æ„Ÿåˆ°ï¼Œç°æœ‰çš„æ•™ç¨‹ææ€•æ˜¯ä¸å¤Ÿçš„ã€‚è¿™ç¯‡æ–‡ç« å°è¯•å°† BibTeX çš„åŸºæœ¬ç”¨æ³•è®²è§£æ¸…æ¥šï¼ŒåŒæ—¶é€‚å½“åœ°æåŠä¸€äº›å¤„ç†æµç¨‹ï¼Œäº‰å–åœ¨æœ‰é™çš„ç¯‡å¹…é‡Œï¼Œè®²æ¸…æ¥š BibTeX çš„æ¥é¾™å»è„‰ã€‚</p>
<h1 id="bst-å’Œ-bib-æ ¼å¼ç®€ä»‹"><a href="#bst-å’Œ-bib-æ ¼å¼ç®€ä»‹" class="headerlink" title="bst å’Œ bib æ ¼å¼ç®€ä»‹"></a>bst å’Œ bib æ ¼å¼ç®€ä»‹</h1><p>BibTeX æ¶‰åŠåˆ°ä¸¤ç§ç‰¹æœ‰çš„è¾…åŠ©çš„æ–‡ä»¶æ ¼å¼ï¼š<code>bst</code> å’Œ <code>bib</code>ã€‚</p>
<p><code>bst</code> æ˜¯ (B)ibliography (ST)yle çš„ç¼©å†™ã€‚é¡¾åæ€ä¹‰ï¼Œå’Œ <code>sty</code> æ–‡ä»¶æ˜¯ style çš„ç¼©å†™ä¸€æ ·ï¼Œ<code>bst</code> æ–‡ä»¶æ§åˆ¶ç€å‚è€ƒæ–‡çŒ®åˆ—è¡¨çš„æ ¼å¼ã€‚åœ¨è¿™é‡Œè¯´çš„ã€Œæ ¼å¼ã€ï¼Œä¸»è¦æŒ‡å‚è€ƒæ–‡çŒ®åˆ—è¡¨ä¸­çš„ç¼–å·ã€æ’åºè§„åˆ™ã€å¯¹äººåçš„å¤„ç†ï¼ˆæ˜¯å¦ç¼©å†™ï¼‰ã€æœˆä»½çš„å¤„ç†ï¼ˆæ˜¯å¦ç¼©å†™ï¼‰ã€æœŸåˆŠåç§°çš„ç¼©å†™ç­‰ã€‚</p>
<p><code>bib</code> æ˜¯ BibTeX å®šä¹‰çš„ã€Œå‚è€ƒæ–‡çŒ®æ•°æ®åº“ã€ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä¼šæŒ‰ç…§ BibTeX è§„å®šçš„æ ¼å¼ï¼Œå‘ <code>bib</code> æ–‡ä»¶å†™å…¥å¤šæ¡æ–‡çŒ®ä¿¡æ¯ã€‚åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ® <code>bib</code> æ–‡ä»¶ä¸­å®šä¹‰çš„æ–‡çŒ®æ ‡è®°ï¼ˆlabelï¼‰ï¼Œä»æ•°æ®åº“ä¸­è°ƒå–æ–‡çŒ®ä¿¡æ¯ï¼Œç»§è€Œæ’ç‰ˆæˆå‚è€ƒæ–‡çŒ®åˆ—è¡¨ã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<code>bib</code> æ˜¯ä¸€ä¸ªæ•°æ®åº“ï¼Œå…¶ä¸­çš„å†…å®¹å¹¶ä¸ä¸€å®šç­‰äº LaTeX æ’ç‰ˆå‚è€ƒæ–‡çŒ®åˆ—è¡¨æ—¶çš„å†…å®¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœ <code>bib</code> æ•°æ®åº“ä¸­æœ‰ 10 æ¡æ–‡çŒ®ä¿¡æ¯ï¼Œå¹¶ä¸ä¸€å®šè¯´ LaTeX æ’ç‰ˆå‡ºæ¥çš„ PDF æ–‡ä»¶ä¸­ï¼Œå‚è€ƒæ–‡çŒ®åˆ—è¡¨é‡Œä¹Ÿä¸€å®šæœ‰ 10 æ¡ã€‚å®é™…æ’ç‰ˆå‡ºæ¥çš„å‚è€ƒæ–‡çŒ®åˆ—è¡¨ä¸­æœ‰å¤šå°‘æ¡æ–‡çŒ®ï¼Œå®é™…æ˜¯å“ªå‡ æ¡ï¼Œå…·ä½“ç”±æ–‡ä¸­ä½¿ç”¨çš„ <code>\cite</code> å‘½ä»¤ï¼ˆä»¥åŠ <code>\nocite</code> å‘½ä»¤ï¼‰æŒ‡å®šã€‚å¦‚æœæ²¡æœ‰ä½¿ç”¨ <code>\cite</code> å‘½ä»¤è°ƒå–æ–‡çŒ®ä¿¡æ¯ï¼Œé‚£ä¹ˆå³ä½¿åœ¨ <code>bib</code> æ–‡ä»¶ä¸­å®šä¹‰äº†æ–‡çŒ®ä¿¡æ¯ï¼Œä¹Ÿä¸ä¼šå±•ç°åœ¨å‚è€ƒæ–‡çŒ®åˆ—è¡¨ä¸­ã€‚å¾ˆå¤šäººå¯¹æ­¤è¯¯è§£ç”šæ·±ï¼Œäºæ˜¯ç»å¸¸æœ‰äººé—®é“ã€Œä¸ºä»€ä¹ˆæˆ‘åœ¨ <code>bib</code> æ–‡ä»¶é‡Œå†™çš„æ–‡çŒ®ï¼Œä¸å‡ºç°åœ¨å‚è€ƒæ–‡çŒ®ä¸­ã€ä¹‹ç±»çš„é—®é¢˜ã€‚</p>
<h1 id="BibTeX-å·¥ä½œæµç¨‹"><a href="#BibTeX-å·¥ä½œæµç¨‹" class="headerlink" title="BibTeX å·¥ä½œæµç¨‹"></a>BibTeX å·¥ä½œæµç¨‹</h1><p>ä»‹ç»ä¸­æåˆ°ï¼ŒBibTeX æ˜¯ä¸€ä¸ªå‚è€ƒæ–‡çŒ®æ ¼å¼åŒ–å·¥å…·ã€‚è¿™ä¸ªå®šä¹‰ï¼Œç»™ BibTeX çš„ç”¨å¤„åšäº†è‰¯å¥½çš„ç•Œå®šï¼šBibTeX ä¸æ˜¯ç”¨æ¥æ’ç‰ˆå‚è€ƒæ–‡çŒ®çš„ï¼Œæ›´ä¸æ˜¯ä¸ªæ’ç‰ˆå·¥å…·ï¼Œ<strong>å®ƒåªæ˜¯æ ¹æ®éœ€è¦ï¼ŒæŒ‰ç…§ï¼ˆbst æ–‡ä»¶è§„å®šçš„ï¼‰æŸç§æ ¼å¼ï¼Œå°†ï¼ˆbib æ–‡ä»¶ä¸­åŒ…å«çš„ï¼‰å‚è€ƒæ–‡çŒ®ä¿¡æ¯ï¼Œæ ¼å¼åŒ– ä¸º LaTeX èƒ½å¤Ÿä½¿ç”¨çš„åˆ—è¡¨ä¿¡æ¯</strong>ã€‚</p>
<p>æ¸…æ¥šäº† BibTeX éœ€è¦åšçš„äº‹æƒ…ï¼ˆç”¨è½¯ä»¶å·¥ç¨‹çš„è¯è¯´ï¼Œå°±æ˜¯æ¸…æ¥šäº† BibTeX çš„ APIï¼‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç†æ¸… BibTeX çš„å·¥ä½œæµç¨‹ã€‚</p>
<h3 id="çŸ¥é“éœ€è¦å“ªäº›å‚è€ƒæ–‡çŒ®ä¿¡æ¯"><a href="#çŸ¥é“éœ€è¦å“ªäº›å‚è€ƒæ–‡çŒ®ä¿¡æ¯" class="headerlink" title="çŸ¥é“éœ€è¦å“ªäº›å‚è€ƒæ–‡çŒ®ä¿¡æ¯"></a>çŸ¥é“éœ€è¦å“ªäº›å‚è€ƒæ–‡çŒ®ä¿¡æ¯</h3><p>æ—¢ç„¶ BibTeX ä¼š<em>æ ¹æ®éœ€è¦</em> æ ¼å¼åŒ–æ•°æ®ï¼Œé‚£ä¹ˆé¦–å…ˆè¦è§£å†³çš„é—®é¢˜å°±æ˜¯ï¼šBibTeX å¦‚ä½•äº†è§£æ­¤å¤„çš„ã€Œéœ€æ±‚ã€ã€‚</p>
<p>å¯¹ BibTeX ç¨æœ‰äº†è§£çš„è¯»è€…å¯èƒ½çŸ¥é“ï¼Œè¿è¡Œ BibTeX çš„å‘½ä»¤è¡Œå‘½ä»¤æ˜¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bibtex foo.aux # å…¶ä¸­åç¼€å .aux å¯ä»¥çœç•¥</span><br></pre></td></tr></table></figure>
<p>å®é™…ä¸Šï¼ŒBibTeX æ­£æ˜¯é€šè¿‡è¯»å– <code>aux</code> æ–‡ä»¶ä¸­çš„ <code>\citation{}</code> æ ‡è®°ï¼Œæ¥ç¡®å®šç”¨æˆ·éœ€è¦å“ªäº›å‚è€ƒæ–‡çŒ®çš„ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ç”¨æˆ·ç”¨ LaTeX ç¼–è¯‘äº†ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">foo.tex\documentclass&#123;article&#125;\begin&#123;document&#125;bar\cite&#123;baz&#125;\end&#123;document&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¯¥æ–‡ä»¶åä¸º <code>foo.tex</code>ï¼Œé‚£ä¹ˆå°±ä¼šç”Ÿæˆ <code>foo.aux</code>ã€‚å…¶å†…å®¹å¤§çº¦æ˜¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">foo.aux\relax\citation&#123;baz&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œï¼Œ<code>\relax</code> è¡¨ç¤ºä¼‘æ¯ä¸€ä¼šå„¿ï¼Œä»€ä¹ˆä¹Ÿä¸åšï¼›<code>\citation</code> åˆ™æ˜¯ç”± <code>tex</code> æ–‡ä»¶ä¸­çš„ <code>\cite</code> å‘½ä»¤å†™å…¥ <code>aux</code> æ–‡ä»¶çš„æ ‡è®°ã€‚å®ƒè¯´æ˜äº†ï¼šç”¨æˆ·éœ€è¦æ ‡è®°ä¸º <code>baz</code> çš„å‚è€ƒæ–‡çŒ®ä¿¡æ¯ã€‚</p>
<p>å½“ BibTeX è¯»å…¥ <code>aux</code> æ–‡ä»¶çš„æ—¶å€™ï¼Œå®ƒå°±ä¼šè®°å½•ä¸‹æ‰€æœ‰ <code>\citation</code> å‘½ä»¤ä¸­çš„å†…å®¹ï¼ˆå³æ–‡çŒ®æ ‡è®°â€”â€”labelï¼‰ï¼Œè¿™æ ·å°±çŸ¥é“äº†ç”¨æˆ·éœ€è¦å“ªäº›å‚è€ƒæ–‡çŒ®ä¿¡æ¯ã€‚</p>
<h3 id="äº†è§£æ–‡çŒ®åˆ—è¡¨æ ¼å¼ä»¥åŠè¯»å–æ–‡çŒ®æ•°æ®åº“"><a href="#äº†è§£æ–‡çŒ®åˆ—è¡¨æ ¼å¼ä»¥åŠè¯»å–æ–‡çŒ®æ•°æ®åº“" class="headerlink" title="äº†è§£æ–‡çŒ®åˆ—è¡¨æ ¼å¼ä»¥åŠè¯»å–æ–‡çŒ®æ•°æ®åº“"></a>äº†è§£æ–‡çŒ®åˆ—è¡¨æ ¼å¼ä»¥åŠè¯»å–æ–‡çŒ®æ•°æ®åº“</h3><p>å½“ BibTeX æ¸…æ¥šäº†ç”¨æˆ·éœ€è¦å“ªäº›æ–‡çŒ®ä¿¡æ¯ï¼Œæ¥ä¸‹æ¥è‡ªç„¶åº”è¯¥ææ¸…æ¥šç”¨æˆ·æƒ³è¦ä»€ä¹ˆæ ·çš„æ ¼å¼ã€‚è€ŒçŸ¥é“äº†æ ¼å¼ä¹‹åï¼Œå°±å¯ä»¥ä»æ•°æ®åº“ä¸­æŠ½å–æ‰€éœ€çš„æ–‡çŒ®ä¿¡æ¯ï¼ŒæŒ‰ç…§æ ¼å¼å‡†å¤‡æ•°æ®ã€‚</p>
<p>ä¸ºäº†è®²æ¸…æ¥šè¿™ä¸ªæ­¥éª¤ï¼Œæˆ‘ä»¬å¯¹ä¸Šè¿° LaTeX ä»£ç åšäº›è®¸çš„ä¿®æ”¹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">foo.tex</span><br><span class="line">\documentclass&#123;article&#125;</span><br><span class="line">\begin&#123;document&#125;</span><br><span class="line">\bibliographystyle&#123;unsrt&#125;</span><br><span class="line">bar\cite&#123;baz&#125;</span><br><span class="line">\bibliography&#123;foobar&#125;</span><br><span class="line">\end&#123;document&#125;</span><br></pre></td></tr></table></figure>
<p>åŒæ ·ï¼Œæˆ‘ä»¬å°†å®ƒä¿å­˜ä¸º <code>foo.tex</code>ï¼Œç»ç”± LaTeX ç¼–è¯‘ä¹‹åå¾—åˆ°ä¸€ä¸ª <code>foo.aux</code> æ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">foo.aux</span><br><span class="line">\relax</span><br><span class="line">\bibstyle&#123;unsrt&#125;</span><br><span class="line">\citation&#123;baz&#125;</span><br><span class="line">\bibdata&#123;foobar&#125;</span><br></pre></td></tr></table></figure>
<p>ç®€å•çš„å¯¹æ¯”ï¼Œä¸éš¾å‘ç°ï¼š</p>
<ol>
<li><code>foo.tex</code> ä¸­æ–°å¢çš„ <code>\bibliographystyle{unsrt}</code> ä¸ <code>aux</code> æ–‡ä»¶ä¸­çš„ <code>\bibstyle{unsrt}</code> ç›¸å¯¹åº”ã€‚</li>
<li><code>foo.tex</code> ä¸­æ–°å¢çš„ <code>\bibliography{foobar}</code> ä¸ <code>aux</code> æ–‡ä»¶ä¸­çš„ <code>\bibdata{foobar}</code> ç›¸å¯¹åº”ã€‚</li>
</ol>
<p>æ ¹æ®å‘½ä»¤çš„åå­—ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“çŒœæµ‹å„ä¸ªå‘½ä»¤çš„ä½œç”¨ã€‚<code>tex</code> æ–‡ä»¶ä¸­çš„ <code>\bibliographystyle</code> æŒ‡å®šäº†ç”¨æˆ·æœŸå¾…çš„å‚è€ƒæ–‡çŒ®åˆ—è¡¨æ ¼å¼æ–‡ä»¶ï¼Œå¹¶å°†å…¶å†™å…¥ <code>aux</code> æ–‡ä»¶å¤‡ç”¨ï¼Œé€šè¿‡ <code>\bibstyle</code> æ ‡è®°ã€‚ä¸æ­¤åŒæ—¶ï¼Œ<code>\bibliography</code> å‘½ä»¤åˆ™ç”¨ <code>\bibdata</code> åœ¨ <code>aux</code> æ–‡ä»¶ä¸­è®°å½•äº†å‚è€ƒæ–‡çŒ®æ•°æ®åº“çš„åå­—ï¼ˆä¸å«æ‰©å±•åï¼‰ã€‚</p>
<p>åœ¨è¿™é‡Œï¼Œ<code>unsrt</code> æ˜¯ unsort çš„ç¼©å†™ï¼Œå®ƒå¯¹åº”ç€ <code>unsrt.bst</code> æ–‡ä»¶ï¼Œæ˜¯å¤§å¤šæ•° TeX å‘è¡Œç‰ˆè‡ªå¸¦çš„æ ‡å‡†æ ¼å¼æ–‡ä»¶ä¹‹ä¸€ï¼›<code>foobar</code> åˆ™å¯¹åº”ç€ <code>foobar.bib</code> æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æ˜¯ç”¨æˆ·è‡ªå·±ç¼–å†™æˆ–ç”Ÿæˆçš„å‚è€ƒæ–‡çŒ®æ•°æ®åº“ã€‚</p>
<h3 id="å®é™…æ“ä½œçœ‹çœ‹"><a href="#å®é™…æ“ä½œçœ‹çœ‹" class="headerlink" title="å®é™…æ“ä½œçœ‹çœ‹"></a>å®é™…æ“ä½œçœ‹çœ‹</h3><p>æˆ‘ä»¬å‡è®¾ä¸Šè¿° <code>foobar.bib</code> æ–‡ä»¶æœ‰å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@BOOK&#123;baz,    </span><br><span class="line">title = &#123;Dummy Book&#125;,    </span><br><span class="line">publisher = &#123;Egypt&#125;,    </span><br><span class="line">year = &#123;321&#125;,    </span><br><span class="line">author = &#123;The King&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">latex foo.tex   # .tex å¯ä»¥çœç•¥</span><br><span class="line">bibtex foo.aux  # .aux å¯ä»¥çœç•¥</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä¼šå‘ç°ï¼ŒBibTeX ç”Ÿæˆäº†ä¸¤ä¸ªæ–‡ä»¶ï¼š<code>foo.bbl</code> å’Œ <code>foo.blg</code>ã€‚å…¶ä¸­ <code>foo.bbl</code> çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">\begin&#123;thebibliography&#125;&#123;1&#125;</span><br><span class="line">\bibitem&#123;baz&#125;The King.</span><br><span class="line">\newblock &#123;\em Dummy Book&#125;.</span><br><span class="line">\newblock Egypt, 321.</span><br><span class="line">\end&#123;thebibliography&#125;</span><br></pre></td></tr></table></figure>
<p>æ˜¾ç„¶ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ LaTeX ç¯å¢ƒã€‚å¯¹ LaTeX å‚è€ƒæ–‡çŒ®æ’ç‰ˆç¨æœ‰äº†è§£çš„è¯»è€…å¯èƒ½çŸ¥é“ <code>thebibliography</code> ç¯å¢ƒæ­£æ˜¯ LaTeX ä¸­æ‰‹å·¥ç¼–æ’å‚è€ƒæ–‡çŒ®æ—¶ä½¿ç”¨çš„ç¯å¢ƒã€‚å› æ­¤ï¼Œ<strong>foo.bbl å°±æ˜¯ BibTeX æ ¼å¼åŒ–è¾“å‡ºçš„ç»“æœ</strong>ï¼ŒLaTeX åªéœ€è¦å°†è¯¥æ–‡ä»¶çš„å†…å®¹è¯»å…¥ï¼Œå°±èƒ½åœ¨ç›¸åº”çš„ä½ç½®è¾“å‡ºæ ¼å¼åŒ–ä¹‹åçš„å‚è€ƒæ–‡çŒ®åˆ—è¡¨äº†ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹çœ‹ <code>foo.blg</code> çš„å†…å®¹ã€‚<code>blg</code> å®é™…æ˜¯ BibTeX Log çš„ç¼©å†™ï¼Œäº¦å³è¿™æ˜¯ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">foo.blgThis is BibTeX, Version 0.99d (TeX Live 2015)</span><br><span class="line">Capacity: max_strings=35307, hash_size=35307, hash_prime=30011</span><br><span class="line">The top-level auxiliary file: foo.aux</span><br><span class="line">The style file: unsrt.bst</span><br><span class="line">Database file #1: foobar.bib</span><br><span class="line">You&apos;ve used 1 entry,</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬çœ‹åˆ°ï¼ŒBibTeX æ‰“å‡ºçš„æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œè®°å½•äº†è¯»å…¥ <code>aux</code>/<code>bst</code>/<code>bib</code> æ–‡ä»¶çš„æƒ…å†µã€‚ç‰¹åˆ«åœ°ï¼Œè®°å½•äº†æ‰€éœ€çš„å‚è€ƒæ–‡çŒ®æ¡ç›®ï¼ˆentryï¼‰çš„æ•°é‡ï¼ˆæ­¤å¤„ä¸º 1ï¼‰ã€‚</p>
<p>æ—¥å¿—ä¸­å€¼å¾—æ³¨æ„çš„åœ°æ–¹æ˜¯åœ¨æåˆ° <code>bib</code> æ–‡ä»¶æ—¶ï¼Œä½¿ç”¨äº† <code>#1</code> çš„æ ‡è®°ã€‚æ—¢ç„¶å­˜åœ¨ <code>#1</code>ï¼Œé‚£ä¹ˆåˆç†æ¨æµ‹ä¹Ÿå¯ä»¥å­˜åœ¨ <code>#2</code>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒBibTeX å¯èƒ½æ”¯æŒä¸¤ä¸ªæˆ–æ›´å¤šçš„ <code>bib</code> æ•°æ®åº“å…±åŒå·¥ä½œã€‚å…·ä½“å¦‚ä½•å®ç°ï¼Œè¯·è¯»è€…è‡ªå·±é˜…è¯»ç›¸å…³èµ„æ–™ï¼ˆæ‰‹å†Œæˆ– Google æ£€ç´¢ï¼‰åå®éªŒã€‚</p>
<p>ç´§æ¥ç€ï¼Œæˆ‘ä»¬å†æ‰§è¡Œä¸€æ¬¡ LaTeXï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">latex foo.tex</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆï¼Œæ¥çœ‹çœ‹ <code>aux</code> æ–‡ä»¶ä¼šå‘ç”Ÿä»€ä¹ˆå˜åŒ–ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">\relax</span><br><span class="line">\bibstyle&#123;unsrt&#125;</span><br><span class="line">\citation&#123;baz&#125;</span><br><span class="line">\bibdata&#123;foobar&#125;</span><br><span class="line">\bibcite&#123;baz&#125;&#123;1&#125;</span><br></pre></td></tr></table></figure>
<p>ç›¸æ¯”ä¸Šä¸€æ¬¡çš„ <code>foo.aux</code>ï¼Œåœ¨è¯»å…¥ BibTeX ä¹‹åï¼ŒLaTeX å‘ <code>aux</code> æ–‡ä»¶å†™å…¥äº†æ›´å¤šçš„ä¿¡æ¯ã€‚è¿™é‡Œ <code>\bibcite{baz}{1}</code> å°† <code>baz</code> è¿™ä¸€å‚è€ƒæ–‡çŒ®æ ‡è®°ï¼ˆlabelï¼‰ä¸å‚è€ƒæ–‡çŒ®ç¼–å·ï¼ˆæ•°å­— 1ï¼‰ç»‘å®šèµ·æ¥äº†ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹çœ‹ <code>dvi</code> æ–‡ä»¶çš„å†…å®¹ï¼š</p>
<p><img src="/images/blog/2021/latex.png" alt></p>
<p>ä¸éš¾å‘ç°ï¼Œç”±äºè¯»å…¥äº† <code>foo.bbl</code> æ–‡ä»¶ï¼Œå‚è€ƒæ–‡çŒ®åˆ—è¡¨å·²ç»æ­£ç¡®å±•ç°å‡ºæ¥äº†ã€‚ç„¶è€Œï¼Œæ­£æ–‡ä¸­ä¾ç„¶æœ‰ä¸€ä¸ªé—®å·ã€‚</p>
<p>å®é™…ä¸Šï¼ŒLaTeX éœ€è¦ <code>aux</code> æ–‡ä»¶ä¸­çš„ <code>\bibcite</code> å‘½ä»¤ï¼Œå°†å‚è€ƒæ–‡çŒ®æ ‡è®°ä¸å‚è€ƒæ–‡çŒ®ç¼–å·å…³è”èµ·æ¥ï¼Œä»è€Œåœ¨ <code>tex</code> æ–‡ä»¶ä¸­çš„ <code>\cite</code> å‘½ä»¤ä½ç½®å¡«ä¸Šæ­£ç¡®çš„å‚è€ƒæ–‡çŒ®ç¼–å·ã€‚æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œåœ¨æˆ‘ä»¬ç¬¬äºŒæ¬¡æ‰§è¡Œ LaTeX å‘½ä»¤ç¼–è¯‘ä¹‹å‰ï¼Œ<code>foo.aux</code> æ–‡ä»¶ä¸­æ˜¯æ²¡æœ‰è¿™äº›ä¿¡æ¯çš„ï¼Œç›´åˆ°ç¼–è¯‘å®Œæˆï¼Œè¿™äº›ä¿¡æ¯æ‰è¢«æ­£ç¡®å†™å…¥ã€‚å› æ­¤ï¼Œç¬¬äºŒæ¬¡æ‰§è¡Œ LaTeX å‘½ä»¤æ—¶ï¼ŒLaTeX è¿˜ä¸èƒ½å¡«å…¥æ­£ç¡®çš„æ–‡çŒ®ç¼–å·ï¼Œäºæ˜¯å°±å†™å…¥äº†ä¸€ä¸ªé—®å·ä½œä¸ºå ä½ç¬¦ã€‚</p>
<p>è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•ä¹Ÿå¾ˆç®€å•â€”â€”æ­¤æ—¶ <code>aux</code> æ–‡ä»¶ä¸­å·²ç»æœ‰äº†éœ€è¦çš„ä¿¡æ¯ï¼Œå†ç¼–è¯‘ä¸€éå°±å¥½äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">latex foo.tex</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ²¡æœ‰æ„å¤–ï¼Œæ­¤æ—¶çš„ <code>foo.dvi</code> æ–‡ä»¶åº”è¯¥çœ‹èµ·æ¥ä¸€åˆ‡æ­£å¸¸äº†ã€‚</p>
<h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><ul>
<li>BibTeX æ˜¯ä¸€ä¸ªå‚è€ƒæ–‡çŒ®æ ¼å¼åŒ–å·¥å…·ï¼Œå®ƒä¼šæ ¹æ®éœ€è¦ï¼ŒæŒ‰ç…§ï¼ˆ<code>bst</code> æ–‡ä»¶è§„å®šçš„ï¼‰æŸç§æ ¼å¼ï¼Œå°†ï¼ˆ<code>bib</code> æ–‡ä»¶ä¸­åŒ…å«çš„ï¼‰å‚è€ƒæ–‡çŒ®ä¿¡æ¯ï¼Œ<em>æ ¼å¼åŒ–</em> ä¸º LaTeX èƒ½å¤Ÿä½¿ç”¨çš„åˆ—è¡¨ä¿¡æ¯ã€‚</li>
<li>æ­£ç¡®ä½¿ç”¨ BibTeX å¤„ç†å‚è€ƒæ–‡çŒ®ï¼Œéœ€è¦å…ˆç”¨ (Xe/PDF)LaTeX ç¼–è¯‘ <code>tex</code> æ–‡ä»¶ï¼Œç”Ÿæˆ <code>aux</code> è¾…åŠ©æ–‡ä»¶ã€‚</li>
<li>æ‰§è¡Œ BibTeX å°†è¯»å…¥ <code>aux</code> æ–‡ä»¶ï¼Œææ¸…æ¥šç”¨æˆ·éœ€è¦å“ªäº›æ–‡çŒ®ã€‚</li>
<li>ç´§æ¥ç€ï¼ŒBibTeX æ ¹æ® <code>aux</code> æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œæ‰¾åˆ°æ­£ç¡®çš„ <code>bst</code> å’Œ <code>bib</code> æ–‡ä»¶ï¼Œå¹¶å°†å‚è€ƒæ–‡çŒ®ä¿¡æ¯æ ¼å¼åŒ–ä¸º LaTeX çš„ <code>thebibliography</code> ç¯å¢ƒï¼Œä½œä¸º <code>bbl</code> æ–‡ä»¶è¾“å‡ºã€‚</li>
<li>ç¬¬äºŒæ¬¡æ‰§è¡Œ (Xe/PDF)LaTeX å°†ä¼šè¯»å…¥æ–°ç”Ÿæˆçš„ <code>bbl</code> æ–‡ä»¶ï¼ŒåŒæ—¶æ›´æ–° <code>aux</code> æ–‡ä»¶ã€‚</li>
<li>æ­¤æ—¶ï¼Œå‚è€ƒæ–‡çŒ®åˆ—è¡¨å°†ä¼šæ­£å¸¸å±•ç¤ºï¼Œä½†æ˜¯æ­£æ–‡ä¸­çš„å¼•ç”¨æ ‡è®°æ˜¾ç¤ºä¸ºé—®å·ã€‚</li>
<li>ç¬¬ä¸‰æ¬¡æ‰§è¡Œ (Xe/PDF)LaTeX å°†ä¼šè¯»å…¥ <code>bbl</code> æ–‡ä»¶å’Œæ›´æ–°è¿‡åçš„ <code>aux</code> æ–‡ä»¶ã€‚æ­¤æ—¶ï¼Œå‚è€ƒæ–‡çŒ®ç›¸å…³å†…å®¹éƒ½æ­£å¸¸æ˜¾ç¤ºã€‚</li>
</ul>
<p>å› æ­¤ï¼Œæ€»çš„æ¥è¯´ï¼Œæƒ³è¦æ­£ç¡®ä½¿ç”¨ BibTeX ååŒ LaTeX å¤„ç†å‚è€ƒæ–‡çŒ®ï¼Œéœ€è¦ç¼–è¯‘å››æ¬¡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(xe/pdf)latex foo.tex   <span class="comment"># è¡¨ç¤ºä½¿ç”¨ latex, pdflatex æˆ– xelatex ç¼–è¯‘ï¼Œä¸‹åŒ</span></span><br><span class="line">bibtex foo.aux</span><br><span class="line">(xe/pdf)latex foo.tex</span><br><span class="line">(xe/pdf)latex foo.tex</span><br></pre></td></tr></table></figure>
<h1 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h1><blockquote>
<p>æˆ‘å¸Œæœ›å°†ä¸€æ¡æ–‡çŒ®å±•ç¤ºåœ¨å‚è€ƒæ–‡çŒ®åˆ—è¡¨ä¸­ï¼Œä½†ä¸æƒ³åœ¨æ­£æ–‡ä¸­ç”¨ <code>\cite</code> å‘½ä»¤å¼•ç”¨ï¼Œæ€ä¹ˆåŠï¼Ÿ</p>
</blockquote>
<p>é¦–å…ˆï¼Œç¡®ä¿è¿™æ¡æ–‡çŒ®å·²ç»å†™å…¥äº† <code>bib</code> æ–‡ä»¶ã€‚å…¶æ¬¡ï¼Œå¯ä»¥åœ¨ <code>\bibliography</code> å‘½ä»¤ä¹‹å‰ï¼Œç”¨ <code>\nocite{label}</code> æç¤º BibTeX è°ƒå–è¿™æ¡æ–‡çŒ®ã€‚</p>
<blockquote>
<p>æˆ‘æœ‰å¾ˆå¤šæ¡æ–‡çŒ®ï¼Œéƒ½å­˜åœ¨è¿™æ ·çš„æƒ…å†µã€‚æ¯æ¡æ–‡çŒ®é€ä¸€ <code>\nocite</code> å¤ªç¹çäº†ï¼Œæœ‰æ²¡æœ‰æ‡’äººé€‚ç”¨çš„åŠæ³•ï¼Ÿ</p>
</blockquote>
<p>æœ‰çš„ã€‚<code>\nocite{*}</code>ã€‚</p>
<blockquote>
<p>æ¯æ¬¡éƒ½è¦ç¼–è¯‘å››æ¬¡ï¼Œæˆ‘æ„Ÿè§‰æ‡’ç™Œåˆè¦å‘ä½œäº†ï¼Œæœ‰æ²¡æœ‰åŠæ³•æ²»ç–—ï¼Ÿ</p>
</blockquote>
<p>æœ‰çš„ã€‚å¯ä»¥å°è¯• LaTeXmk, TeXify ä¹‹ç±»çš„è‡ªåŠ¨åŒ–å·¥å…·ã€‚</p>
<blockquote>
<p>æˆ‘å¯¹é»˜è®¤æä¾›çš„ <code>bst</code> æ–‡ä»¶çš„æ ¼å¼æ•ˆæœä¸æ»¡æ„ï¼Œå“ªé‡Œèƒ½æ‰¾åˆ°æ›´å¤šçš„ <code>bst</code>ï¼Ÿ</p>
</blockquote>
<p>ç°ä»£ TeX å‘è¡Œç‰ˆéƒ½æä¾›äº†å¤šç§ <code>bst</code> å¯ä¾›é€‰æ‹©ï¼Œæ¯ä¸ª <code>bst</code> æ–‡ä»¶çš„æ ¼å¼ã€é€‚ç”¨èŒƒå›´ã€ä½¿ç”¨æ¡ä»¶éƒ½ä¸ä¸€æ ·ï¼Œéœ€è¦ä»”ç»†ç”„åˆ«ã€‚å…·ä½“å¯ä»¥å»å®‰è£…ç›®å½•ä¸‹æœç´¢è¯•è¯•ã€‚</p>
<blockquote>
<p>æœ‰æ²¡æœ‰éµå¾ªå›½å®¶æ ‡å‡†çš„ <code>bst</code>ï¼Ÿ</p>
</blockquote>
<p>æœ‰çš„ï¼Œ<a href="https://liam.page/2014/05/09/gbt7714-2005-bibtex-style/" target="_blank" rel="noopener">è¿™é‡Œ</a>ã€‚</p>
<blockquote>
<p>æˆ‘æ‰¾åˆ°çš„ <code>bst</code>ï¼Œæ•ˆæœéƒ½ä¸æ»¡æ„ï¼Œæ€ä¹ˆåŠï¼Ÿ</p>
</blockquote>
<p>ä½ å¯ä»¥åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ <code>latex makebst</code>ï¼Œåˆ¶ä½œä¸€ä¸ªç¬¦åˆè‡ªå·±è¦æ±‚çš„ <code>bst</code> æ–‡ä»¶ã€‚ä½ éœ€è¦å›ç­”å¤§çº¦ 100 ä¸ªå…³äºå‚è€ƒæ–‡çŒ®åˆ—è¡¨æ•ˆæœçš„é—®é¢˜ã€‚</p>
<blockquote>
<p><code>bib</code> æ–‡ä»¶æ€ä¹ˆç”Ÿæˆï¼Ÿ</p>
</blockquote>
<p>ä½ å¯ä»¥æ‰‹å†™ï¼Œæˆ–è€…ç”¨ JabRef ä¹‹ç±»çš„æ–‡çŒ®å·¥å…·ç”Ÿæˆã€‚å…·ä½“è¯·è‡ªè¡Œ Google æ£€ç´¢ï¼Œç¯‡å¹…æ‰€é™å°±ä¸å±•å¼€äº†ã€‚</p>
]]></content>
      <categories>
        <category>Others</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>Latex</tag>
        <tag>BibTeX</tag>
        <tag>cite</tag>
        <tag>nocite</tag>
      </tags>
  </entry>
  <entry>
    <title>condaå®‰è£…ç¯å¢ƒæŠ¥é”™ Solving environment failed with initial frozen solve</title>
    <url>/2021/01/04/conda%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83%E6%8A%A5%E9%94%99-Solving-environment-failed-with-initial-frozen-solve/</url>
    <content><![CDATA[<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥è¯¢ç‰ˆæœ¬</span></span><br><span class="line">$ conda -V</span><br><span class="line"><span class="comment"># å‡çº§</span></span><br><span class="line">$ conda update -n base conda</span><br><span class="line">Collecting package metadata (current_repodata.json): <span class="keyword">done</span></span><br><span class="line">Solving environment: \ </span><br><span class="line">The environment is inconsistent, please check the package plan carefully</span><br><span class="line">The following packages are causing the inconsistency:</span><br><span class="line"></span><br><span class="line">  - https://repo.anaconda.com/pkgs/main/linux-64::anaconda==2019.07=py37_0</span><br><span class="line">  - https://repo.anaconda.com/pkgs/main/linux-64::numba==0.44.1=py37h962f231_0</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Package Plan ##</span></span><br><span class="line"></span><br><span class="line">  environment location: /home/lab305/anaconda3</span><br><span class="line"></span><br><span class="line">  added / updated specs:</span><br><span class="line">    - conda</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">The following packages will be downloaded:</span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>å‡çº§<code>conda</code>åˆ°æœ€æ–°ç‰ˆæœ¬åå†æ›´æ–°å…¨éƒ¨åº”ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ conda update --all</span><br><span class="line">Collecting package metadata (current_repodata.json): <span class="keyword">done</span></span><br><span class="line">Solving environment: <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Package Plan ##</span></span><br><span class="line"></span><br><span class="line">  environment location: /home/lab305/anaconda3/envs/pytorch1.3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">The following packages will be downloaded:</span><br></pre></td></tr></table></figure>
<p>å°±å¯ä»¥ç»§ç»­ä½¿ç”¨<code>conda</code>å®‰è£…åº”ç”¨ã€‚</p>
<p>ä½†æ˜¯æˆ‘æŒ‰ç…§ä»¥ä¸Šæ­¥éª¤åä¾ç„¶æŠ¥é”™ï¼Œåæ¥ç­‰å¾…soft-solvingåæç¤ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">allennlp requires python&gt;=3.6 &lt;3.7</span><br></pre></td></tr></table></figure>
<p>è€Œæˆ‘åˆ›å»ºcondaç¯å¢ƒæ—¶ä½¿ç”¨çš„python3.7ç‰ˆæœ¬â€¦</p>
<p>fixè¿™ä¸ªbugä¹‹åï¼Œå°±æ²¡æœ‰é—®é¢˜äº†ï¼ğŸ‰</p>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>conda</tag>
        <tag>bug</tag>
      </tags>
  </entry>
  <entry>
    <title>DISTREæºç é˜…è¯»</title>
    <url>/2021/01/04/DISTRE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/</url>
    <content><![CDATA[<h1 id="Instanceæ¨¡å‹éƒ¨åˆ†"><a href="#Instanceæ¨¡å‹éƒ¨åˆ†" class="headerlink" title="Instanceæ¨¡å‹éƒ¨åˆ†"></a>Instanceæ¨¡å‹éƒ¨åˆ†</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self,</span></span></span><br><span class="line"><span class="function"><span class="params">            sentence: Dict[str, torch.Tensor],</span></span></span><br><span class="line"><span class="function"><span class="params">            label: torch.Tensor = None)</span> -&gt; torch.Tensor:</span></span><br><span class="line">    </span><br><span class="line">    sentence_encoded = self.embedder(sentence[<span class="string">'byte_pairs'</span>])</span><br><span class="line"></span><br><span class="line">    output = &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> label <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        output[<span class="string">"loss"</span>] = self._loss(sentence, sentence_encoded, label)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> self.clf_head <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        byte_pairs = sentence[<span class="string">'byte_pairs'</span>][:, :sentence_encoded.size(<span class="number">1</span>)]</span><br><span class="line">        clf_logits = self.clf_head(sentence_encoded, byte_pairs)</span><br><span class="line">        output[<span class="string">'logits'</span>] = clf_logits</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> output</span><br></pre></td></tr></table></figure>
<p>æ¨¡å‹å¾ˆç®€å•ï¼Œä¸»è¦åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªç¼–ç å™¨ï¼Œä¸€ä¸ªåˆ†ç±»å™¨ã€‚ä¸‹é¢å»çœ‹<code>_loss()</code>å’Œ<code>clf_head()</code>å‡½æ•°ã€‚</p>
<a id="more"></a>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_loss</span><span class="params">(self, sentence: Dict[str, torch.Tensor], sentence_encoded: torch.Tensor, label: torch.Tensor)</span>:</span></span><br><span class="line">    lm_losses = <span class="number">0.</span></span><br><span class="line">    clf_losses = <span class="number">0.</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># [n_batch, seq_len]</span></span><br><span class="line">    byte_pairs = sentence[<span class="string">'byte_pairs'</span>][:, :sentence_encoded.size(<span class="number">1</span>)]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> self.lm_head <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="comment"># [n_batch, seq_len]</span></span><br><span class="line">        mask = (byte_pairs != <span class="number">0</span>).float()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># (n_batch, seq_len - 1)</span></span><br><span class="line">        lm_logits = self.lm_head(sentence_encoded)</span><br><span class="line">        <span class="comment">#print('lm_logits:', lm_logits.shape)</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># [n_batch * (seq_len - 1)]</span></span><br><span class="line">        byte_pairs_shifted = byte_pairs[:, <span class="number">1</span>:].contiguous().view(<span class="number">-1</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># [n_batch * (seq_len - 1)]</span></span><br><span class="line">        lm_losses = nn.CrossEntropyLoss(reduce=<span class="literal">False</span>)(lm_logits, byte_pairs_shifted)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># [n_batch, seq_len - 1]</span></span><br><span class="line">        lm_losses = lm_losses.view(byte_pairs.size(<span class="number">0</span>), byte_pairs.size(<span class="number">1</span>) - <span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># [n_batch, seq_len - 1]</span></span><br><span class="line">        lm_losses = lm_losses * mask[:, <span class="number">1</span>:]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># [n_batch * (seq_len - 1)]</span></span><br><span class="line">        lm_losses = lm_losses.sum(dim=<span class="number">1</span>) / torch.sum(mask[:, <span class="number">1</span>:], dim=<span class="number">1</span>)</span><br><span class="line">        lm_losses = lm_losses.mean()</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">if</span> self.clf_head <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        clf_logits = self.clf_head(sentence_encoded, byte_pairs)</span><br><span class="line">        <span class="keyword">if</span> clf_logits.size(<span class="number">0</span>) != label.size(<span class="number">0</span>):</span><br><span class="line">            torch.save(sentence, <span class="string">'./sentence.pt'</span>)</span><br><span class="line">        clf_losses = nn.CrossEntropyLoss(reduce=<span class="literal">False</span>)(clf_logits, label)</span><br><span class="line">        clf_losses = clf_losses.mean()</span><br><span class="line">        </span><br><span class="line">    loss = clf_losses + self.language_model_weight * lm_losses</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">return</span> loss</span><br></pre></td></tr></table></figure>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨è¿›è¡Œæ¨¡å‹çš„è®­ç»ƒæ—¶ï¼Œé™¤äº†å…³ç³»åˆ†ç±»çš„æŸå¤±ï¼Œè¿˜æ·»åŠ äº†é¢„è®­ç»ƒæ¨¡å‹çš„æŸå¤±ï¼Œå¯¹äºGPTæ˜¯é¢„æµ‹ä¸‹ä¸€ä¸ªå•è¯ï¼Œå¯¹äºBERTæ˜¯MLMã€‚<strong>å¹¶ä¸”ç»™language_model_weightèµ‹äºˆ0.5çš„æƒé‡</strong>ã€‚</p>
<p>å¯¹äºç¼–ç å™¨å’Œåˆ†ç±»å™¨ï¼Œåˆ†åˆ«æŒ‰ç…§ä»¥ä¸‹ä»£ç å®ç°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LanguageModelHead</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="string">""" Language Model Head for the transformer """</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, model)</span>:</span></span><br><span class="line">        super(LanguageModelHead, self).__init__()</span><br><span class="line">        self.n_embd = model.embed.embedding_dim</span><br><span class="line">        self.decoder = model.decoder</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, h)</span>:</span></span><br><span class="line">        <span class="comment"># Truncated Language modeling logits (we remove the last token)</span></span><br><span class="line">        h_trunc = h[:, :<span class="number">-1</span>].contiguous().view(<span class="number">-1</span>, self.n_embd)</span><br><span class="line">        lm_logits = self.decoder(h_trunc)</span><br><span class="line">        <span class="keyword">return</span> lm_logits</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„decoder()å¯èƒ½æ˜¯GPTç‹¬æœ‰çš„ï¼Œåœ¨transformeræä¾›çš„ä»£ç é‡Œå¯¹åº”åˆ°BERTæ¨¡å‹æ²¡æœ‰ç›¸åº”çš„æ¨¡å—ã€‚</p>
<h2 id="BERTæ¨¡å‹"><a href="#BERTæ¨¡å‹" class="headerlink" title="BERTæ¨¡å‹"></a>BERTæ¨¡å‹</h2><figure class="highlight"><table><tr><td class="code"><pre><span class="line">  (11): BertLayer(</span><br><span class="line">    (attention): BertAttention(</span><br><span class="line">      (self): BertSelfAttention(</span><br><span class="line">        (query): Linear(in_features=768, out_features=768, bias=True)</span><br><span class="line">        (key): Linear(in_features=768, out_features=768, bias=True)</span><br><span class="line">        (value): Linear(in_features=768, out_features=768, bias=True)</span><br><span class="line">        (dropout): Dropout(p=0.1, inplace=False)</span><br><span class="line">      )</span><br><span class="line">      (output): BertSelfOutput(</span><br><span class="line">        (dense): Linear(in_features=768, out_features=768, bias=True)</span><br><span class="line">        (LayerNorm): LayerNorm((768,), eps=1e-12, elementwise_affine=True)</span><br><span class="line">        (dropout): Dropout(p=0.1, inplace=False)</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">    (intermediate): BertIntermediate(</span><br><span class="line">      (dense): Linear(in_features=768, out_features=3072, bias=True)</span><br><span class="line">    )</span><br><span class="line">    (output): BertOutput(</span><br><span class="line">      (dense): Linear(in_features=3072, out_features=768, bias=True)</span><br><span class="line">      (LayerNorm): LayerNorm((768,), eps=1e-12, elementwise_affine=True)</span><br><span class="line">      (dropout): Dropout(p=0.1, inplace=False)</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>BERTä¸­çš„ä¸€å±‚ä¸»è¦ç”±<code>BertAttention</code> <code>BertIntermediate</code> <code>BertOutput</code>æ„æˆï¼Œ<font color="orange">BertIntermediateå°†768ç»´çš„å‘é‡è½¬åŒ–ä¸º3072ç»´ï¼Œæ˜¯ä¸€ç§å‡ç»´çš„æ“ä½œï¼</font></p>
<p>è€ŒBERTPooleræ˜¯æœ€ç»ˆ<code>[CLS]</code>çš„è¡¨ç¤ºï¼Œé€šè¿‡ä»¥ä¸‹æ–¹å¼ï¼š</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">(pooler): BertPooler(</span><br><span class="line">      (dense): Linear(in_features=768, out_features=768, bias=True)</span><br><span class="line">      (activation): Tanh()</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<p>ç”±ä¸Šé¢çš„è®²è§£å¯çŸ¥ï¼Œpoolerå±‚çš„è¾“å…¥æ˜¯transformeræœ€åä¸€å±‚çš„è¾“å‡ºï¼Œ[batch_size, seq_length, hidden_size]</p>
<p><strong>å–å‡ºæ¯ä¸€å¥çš„ç¬¬ä¸€ä¸ªå•è¯ï¼Œåšå…¨è¿æ¥å’Œæ¿€æ´»ã€‚</strong>å¾—åˆ°çš„è¾“å‡ºå¯ä»¥ç”¨æ¥åˆ†ç±»ç­‰ä¸‹æ¸¸ä»»åŠ¡ï¼ˆå³å°†æ¯ä¸ªå¥å­çš„ç¬¬ä¸€ä¸ªå•è¯çš„è¡¨ç¤ºä½œä¸ºæ•´ä¸ªå¥å­çš„è¡¨ç¤ºï¼‰  </p>
<font color="red">å¹¶æ²¡æœ‰è¿›è¡ŒMaxPoolingç­‰æ“ä½œï¼Œè¿™ä¸ªå«æ³•ç¡®å®æœ‰ç‚¹è¿·æƒ‘ã€‚ã€‚ã€‚</font>

<p>å†å»çœ‹åˆ†ç±»æ¨¡å‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClassificationHead</span><span class="params">(TaskHead)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, model, n_class, clf_token, dropout=<span class="number">0.</span>)</span>:</span></span><br><span class="line">        super(ClassificationHead, self).__init__()</span><br><span class="line">        self.n_embd = model.embed.embedding_dim</span><br><span class="line">        self.clf_token = clf_token</span><br><span class="line">        self.dropout = nn.Dropout(dropout)</span><br><span class="line">        self.linear = nn.Linear(self.n_embd, n_class)</span><br><span class="line"></span><br><span class="line">        nn.init.normal_(self.linear.weight, std = <span class="number">0.02</span>)</span><br><span class="line">        nn.init.normal_(self.linear.bias, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, h, x)</span>:</span></span><br><span class="line">        clf_h = h.contiguous().view(<span class="number">-1</span>, self.n_embd)</span><br><span class="line">        flat = x.contiguous().view(<span class="number">-1</span>)</span><br><span class="line">        clf_h = clf_h[flat == self.clf_token, :]</span><br><span class="line">        clf_h = self.dropout(clf_h)</span><br><span class="line">        clf_logits = self.linear(clf_h)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> clf_logits</span><br></pre></td></tr></table></figure>
<p>å°±æ˜¯åœ¨å¥å­è¡¨ç¤º<code>__clf__</code>åé¢åŠ äº†ä¸€å±‚å…¨è¿æ¥å±‚ï¼Œ<strong>æ²¡æœ‰æ¿€æ´»ï¼Œæ²¡æœ‰å¤šå±‚</strong>ã€‚</p>
<h2 id="è¯­æ³•ç³–"><a href="#è¯­æ³•ç³–" class="headerlink" title="è¯­æ³•ç³–"></a>è¯­æ³•ç³–</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> operator <span class="keyword">import</span> itemgetter</span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> groupby</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_scopes</span><span class="params">(x)</span>:</span></span><br><span class="line">    scopes = []</span><br><span class="line">    <span class="keyword">for</span> k, g <span class="keyword">in</span> groupby(enumerate(x), <span class="keyword">lambda</span> i_x: i_x[<span class="number">1</span>]):</span><br><span class="line">        group = list(map(itemgetter(<span class="number">0</span>), g))</span><br><span class="line">        scopes.append((group[<span class="number">0</span>], group[<span class="number">-1</span>]+<span class="number">1</span>))</span><br><span class="line">    <span class="keyword">return</span> scopes</span><br></pre></td></tr></table></figure>
<h1 id="Bagæ¨¡å‹éƒ¨åˆ†"><a href="#Bagæ¨¡å‹éƒ¨åˆ†" class="headerlink" title="Bagæ¨¡å‹éƒ¨åˆ†"></a>Bagæ¨¡å‹éƒ¨åˆ†</h1><p>ä¾ç„¶æ˜¯ä»<code>forward()</code>å‡½æ•°å…¥æ‰‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self,</span></span></span><br><span class="line"><span class="function"><span class="params">            sentence: Dict[str, torch.Tensor],</span></span></span><br><span class="line"><span class="function"><span class="params">            metadata: List[Dict[str, Any]],</span></span></span><br><span class="line"><span class="function"><span class="params">            label: torch.Tensor = None)</span> -&gt; torch.Tensor:</span></span><br><span class="line">    </span><br><span class="line">    byte_pairs = sentence[<span class="string">'byte_pairs'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> self.training <span class="keyword">and</span> self.entity_dropout &gt; <span class="number">0.</span>:</span><br><span class="line">        dropout_mask = get_entity_dropout_mask(byte_pairs, self.encoder_vocab[self.del1_token], self.encoder_vocab[self.del2_token], self.entity_dropout)</span><br><span class="line">        byte_pairs = byte_pairs.masked_fill(dropout_mask, self.encoder_vocab[self.mask_token])</span><br><span class="line"></span><br><span class="line">    sentence_encoded = self.embedder(byte_pairs)</span><br><span class="line">    </span><br><span class="line">    output = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    instance_ids = [md[<span class="string">'instance_id'</span>] <span class="keyword">for</span> md <span class="keyword">in</span> metadata]</span><br><span class="line">    scopes = get_scopes(instance_ids)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> label <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        output[<span class="string">"loss"</span>] = self._loss(sentence, sentence_encoded, scopes, label)</span><br><span class="line">    </span><br><span class="line">    clf_logits, clf_h = self.clf_head(sentence, sentence_encoded, scopes, label)</span><br><span class="line">    output[<span class="string">'instances'</span>] = [metadata[idx] <span class="keyword">for</span> idx, _ <span class="keyword">in</span> scopes]</span><br><span class="line">    output[<span class="string">'logits'</span>] = clf_logits</span><br><span class="line">    output[<span class="string">'clf_h'</span>] = clf_h</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> output</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆæ³¨æ„åˆ°<code>get_entity_dropout_mask()</code>å‡½æ•°ï¼Œå‡½æ•°ä½“ä¸ºä¸‹æ–‡æ‰€ç¤ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_entity_mask</span><span class="params">(x, del1, del2)</span>:</span></span><br><span class="line">    a = torch.arange(x.size(<span class="number">1</span>)).expand_as(x).type_as(x)</span><br><span class="line">    pos_del1 = a[x == del1].unsqueeze(<span class="number">1</span>)</span><br><span class="line">    pos_del2 = a[x == del2].unsqueeze(<span class="number">1</span>)</span><br><span class="line">    mask_ent1 = (<span class="number">0</span> &lt; a) &amp; (a &lt; pos_del1)</span><br><span class="line">    mask_ent2 = (pos_del1 &lt; a) &amp; (a &lt; pos_del2)</span><br><span class="line">    <span class="keyword">return</span> mask_ent1, mask_ent2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_entity_dropout_mask</span><span class="params">(x, del1, del2, dropout_probability=<span class="number">.1</span>)</span>:</span></span><br><span class="line">    mask_ent1, mask_ent2 = get_entity_mask(x, del1, del2)</span><br><span class="line">    binary_mask_ent1 = x.new(x.size(<span class="number">0</span>), <span class="number">1</span>).bernoulli_(<span class="number">1</span> - dropout_probability)</span><br><span class="line">    binary_mask_ent2 = x.new(x.size(<span class="number">0</span>), <span class="number">1</span>).bernoulli_(<span class="number">1</span> - dropout_probability)</span><br><span class="line">    <span class="keyword">return</span> (binary_mask_ent1 * mask_ent1.long() + binary_mask_ent2 * mask_ent2.long()).byte()</span><br></pre></td></tr></table></figure>
<p>ä¸åŒäºç›´æ¥è¿›è¡Œmaskæ“ä½œï¼Œ<strong>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨DISTREä¸­å¼•å…¥äº†DROPOUTæ“ä½œ</strong>ï¼Œè¿™æ˜¯æˆ‘ä¹‹å‰æ²¡æœ‰å°è¯•è¿‡çš„ã€‚</p>
<p>å›åˆ°<code>forward()</code>å‡½æ•°ï¼Œé‡Œé¢ç”¨<code>get_scopes()</code>å‡½æ•°è·å–ä¸€ä¸ªåŒ…çš„å¥å­èŒƒå›´ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢æåˆ°çš„è¯­æ³•ç³–éƒ¨åˆ†ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_loss</span><span class="params">(self, sentence: Dict[str, torch.Tensor], sentence_encoded: torch.Tensor, scopes: List[Tuple[int, int]], label: torch.Tensor)</span>:</span></span><br><span class="line">    lm_losses = <span class="number">0.</span></span><br><span class="line">    clf_losses = <span class="number">0.</span></span><br><span class="line"></span><br><span class="line">    bag_label_indices = [start <span class="keyword">for</span> start, _ <span class="keyword">in</span> scopes]</span><br><span class="line">    bag_label = label[bag_label_indices]  <span class="comment"># å¯¹ç»´åº¦è¿›è¡Œäº†ä¸€ä¸ªç¼©å‡</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># [n_batch, seq_len]</span></span><br><span class="line">    byte_pairs = sentence[<span class="string">'byte_pairs'</span>][:, :sentence_encoded.size(<span class="number">1</span>)]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> self.lm_head <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="comment"># [n_batch, seq_len]</span></span><br><span class="line">        mask = (byte_pairs != <span class="number">0</span>).float()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># (n_batch, seq_len - 1)</span></span><br><span class="line">        lm_logits = self.lm_head(sentence_encoded)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># [n_batch * (seq_len - 1)]</span></span><br><span class="line">        byte_pairs_shifted = byte_pairs[:, <span class="number">1</span>:].contiguous().view(<span class="number">-1</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># [n_batch * (seq_len - 1)]</span></span><br><span class="line">        lm_losses = nn.CrossEntropyLoss(reduce=<span class="literal">False</span>)(lm_logits, byte_pairs_shifted)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># [n_batch, seq_len - 1]</span></span><br><span class="line">        lm_losses = lm_losses.view(byte_pairs.size(<span class="number">0</span>), byte_pairs.size(<span class="number">1</span>) - <span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># [n_batch, seq_len - 1]</span></span><br><span class="line">        lm_losses = lm_losses * mask[:, <span class="number">1</span>:]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># [n_batch * (seq_len - 1)]</span></span><br><span class="line">        lm_losses = lm_losses.sum(dim=<span class="number">1</span>) / torch.sum(mask[:, <span class="number">1</span>:], dim=<span class="number">1</span>)</span><br><span class="line">        lm_losses = lm_losses.mean()</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">if</span> self.clf_head <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        clf_logits, _ = self.clf_head(sentence, sentence_encoded, scopes, label=label)</span><br><span class="line">        clf_losses = nn.CrossEntropyLoss(reduce=<span class="literal">False</span>)(clf_logits, bag_label)</span><br><span class="line">        clf_losses = clf_losses.mean()</span><br><span class="line">        </span><br><span class="line">    loss = clf_losses + self.language_model_weight * lm_losses</span><br><span class="line"></span><br><span class="line">    self.metrics[<span class="string">'accuracy'</span>](clf_logits, bag_label)</span><br><span class="line">    self.metrics[<span class="string">'not_na_accuracy'</span>](clf_logits, bag_label, mask=torch.ne(bag_label, self.na_idx))</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">return</span> loss</span><br></pre></td></tr></table></figure>
<p>å¯¹äºè¯­è¨€æ¨¡å‹æŸå¤±ï¼ŒBagç›¸å¯¹äºInstanceçº§åˆ«æ²¡æœ‰ä»€ä¹ˆæ”¹å˜ã€‚ä½†æ˜¯å¯¹äºåˆ†ç±»æŸå¤±ï¼Œæœ‰æ·»åŠ æ³¨æ„åŠ›æœºåˆ¶ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BagClassificationHead</span><span class="params">(TaskHead)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, model, n_class, encoder_vocab, clf_token, selector, dropout=<span class="number">0.</span>)</span>:</span></span><br><span class="line">        super(BagClassificationHead, self).__init__()</span><br><span class="line">        self.n_embd = model.embed.embedding_dim</span><br><span class="line">        self.encoder_vocab = encoder_vocab</span><br><span class="line">        self.clf_token = clf_token</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> selector == <span class="string">'average'</span>:</span><br><span class="line">            self.selector = Average(model, n_class, dropout)</span><br><span class="line">        <span class="keyword">elif</span> selector == <span class="string">'attention'</span>:</span><br><span class="line">            self.selector = Attention(model, n_class, dropout)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">f"Selector '<span class="subst">&#123;selector&#125;</span>' not supported."</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, sentence: Dict[str, torch.Tensor], sentence_encoded: torch.Tensor, scopes: List[Tuple[int, int]], label: torch.Tensor)</span>:</span></span><br><span class="line">        x = sentence[<span class="string">'byte_pairs'</span>][:, :sentence_encoded.size(<span class="number">1</span>)]</span><br><span class="line">        h = sentence_encoded</span><br><span class="line"></span><br><span class="line">        clf_token_idx = self.encoder_vocab[self.clf_token]</span><br><span class="line"></span><br><span class="line">        clf_h = h.contiguous().view(<span class="number">-1</span>, self.n_embd)</span><br><span class="line">        flat = x.contiguous().view(<span class="number">-1</span>)</span><br><span class="line">        clf_h = clf_h[flat == clf_token_idx, :]</span><br><span class="line">        clf_logits = self.selector(clf_h, scopes, label)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> clf_logits, clf_h</span><br></pre></td></tr></table></figure>
<p>æŒ‰ç…§ä¸åŒçš„Bagå‘é‡è·å–æ–¹å¼ï¼Œè¿™é‡Œæœ‰ä¸¤ç§selectorï¼Œä¸€ç§æ˜¯<code>Average</code>ï¼Œä¸€ç§æ˜¯<code>Attention</code>ï¼Œå»çœ‹è¿™ä¸¤ä¸ªå‡½æ•°ï¼š</p>
<h2 id="Average-Selector"><a href="#Average-Selector" class="headerlink" title="Average Selector"></a>Average Selector</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Selector</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, model, n_class, dropout)</span>:</span></span><br><span class="line">        super(Selector, self).__init__()</span><br><span class="line">        relation_dim = model.embed.embedding_dim</span><br><span class="line"></span><br><span class="line">        self.relation_matrix = nn.Embedding(n_class, relation_dim)</span><br><span class="line">        self.bias = nn.Parameter(torch.Tensor(n_class))</span><br><span class="line">        <span class="comment">#self.attention_matrix = nn.Embedding(n_class, relation_dim)</span></span><br><span class="line">        self.init_weights()</span><br><span class="line">        self.dropout = nn.Dropout(dropout)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">init_weights</span><span class="params">(self)</span>:</span></span><br><span class="line">        nn.init.xavier_uniform(self.relation_matrix.weight.data)</span><br><span class="line">        nn.init.normal(self.bias)  <span class="comment"># biasåˆå§‹åŒ–æ²¡æœ‰ç½®ä¸º0</span></span><br><span class="line">        <span class="comment">#nn.init.xavier_uniform(self.attention_matrix.weight.data)</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_logits</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        logits = torch.matmul(x, torch.transpose(</span><br><span class="line">            self.relation_matrix.weight, <span class="number">0</span>, <span class="number">1</span>),) + self.bias</span><br><span class="line">        <span class="keyword">return</span> logits</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x, scopes=None, label=None)</span>:</span></span><br><span class="line">        <span class="keyword">raise</span> NotImplementedError</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="keyword">raise</span> NotImplementedError</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Average</span><span class="params">(Selector)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x, scopes=None, label=None)</span>:</span></span><br><span class="line">        scopes = scopes <span class="keyword">or</span> [(<span class="number">0</span>, x.size(<span class="number">0</span>))]</span><br><span class="line"></span><br><span class="line">        tower_repre = []</span><br><span class="line">        <span class="keyword">for</span> start, end <span class="keyword">in</span> scopes:</span><br><span class="line">            sen_matrix = x[start: end]</span><br><span class="line">            final_repre = torch.mean(sen_matrix, <span class="number">0</span>)  <span class="comment"># å–å¹³å‡</span></span><br><span class="line">            tower_repre.append(final_repre)</span><br><span class="line">        stack_repre = torch.stack(tower_repre)</span><br><span class="line">        stack_repre = self.dropout(stack_repre)</span><br><span class="line">        logits = self.get_logits(stack_repre)</span><br><span class="line">        <span class="keyword">return</span> logits</span><br></pre></td></tr></table></figure>
<p>åœ¨åšAttentionçš„æ—¶å€™ï¼Œ<strong>æ˜¯æ‹¿æ‰€æœ‰å…³ç³»ä¸å½“å‰è¡¨ç¤ºç›¸ä¹˜</strong>ã€‚</p>
<h2 id="Attention-Selector"><a href="#Attention-Selector" class="headerlink" title="Attention Selector"></a>Attention Selector</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Attention</span><span class="params">(Selector)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_attention_train_logit</span><span class="params">(self, x, query)</span>:</span></span><br><span class="line">        relation_query = self.relation_matrix(query)</span><br><span class="line">        attention_logit = torch.sum(x * relation_query, <span class="number">1</span>, <span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">return</span> attention_logit</span><br><span class="line">	</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_attention_test_logit</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        attention_logit = torch.matmul(x, torch.transpose(self.relation_matrix.weight, <span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">        <span class="keyword">return</span> attention_logit</span><br><span class="line">	</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x, scopes=None, label=None)</span>:</span></span><br><span class="line">        scopes = scopes <span class="keyword">or</span> [(<span class="number">0</span>, x.size(<span class="number">0</span>))]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> self.training:</span><br><span class="line">            attention_logit = self._attention_train_logit(x, label)</span><br><span class="line"></span><br><span class="line">            tower_repre = []</span><br><span class="line">            <span class="keyword">for</span> start, end <span class="keyword">in</span> scopes:</span><br><span class="line">                sen_matrix = x[start: end]</span><br><span class="line">                attention_score = F.softmax(torch.transpose(attention_logit[start: end], <span class="number">0</span>, <span class="number">1</span>), <span class="number">1</span>)</span><br><span class="line">                final_repre = torch.squeeze(torch.matmul(attention_score, sen_matrix))</span><br><span class="line">                tower_repre.append(final_repre)</span><br><span class="line">            stack_repre = torch.stack(tower_repre)</span><br><span class="line">            stack_repre = self.dropout(stack_repre)</span><br><span class="line">            logits = self.get_logits(stack_repre)</span><br><span class="line">            <span class="keyword">return</span> logits</span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            attention_logit = self._attention_test_logit(x)</span><br><span class="line"></span><br><span class="line">            tower_output = []</span><br><span class="line">            <span class="keyword">for</span> start, end <span class="keyword">in</span> scopes:</span><br><span class="line">                sen_matrix = x[start: end]</span><br><span class="line">                attention_score = F.softmax(torch.transpose(attention_logit[start: end], <span class="number">0</span>, <span class="number">1</span>), <span class="number">1</span>)</span><br><span class="line">                final_repre = torch.matmul(attention_score, sen_matrix)</span><br><span class="line">                logits = self.get_logits(final_repre)</span><br><span class="line">                tower_output.append(torch.diag(F.softmax(logits, <span class="number">1</span>)))</span><br><span class="line">            stack_output = torch.stack(tower_output)</span><br><span class="line">            <span class="keyword">return</span> stack_output</span><br></pre></td></tr></table></figure>
<p>åœ¨è®­ç»ƒå’Œæµ‹è¯•é˜¶æ®µæœ‰äº›ä¸åŒï¼Œè®­ç»ƒæ—¶ä½¿ç”¨<code>_attention_train_logit()</code>ï¼Œåªå–1ä¸ªå…³ç³»ï¼›æµ‹è¯•æ—¶ä½¿ç”¨<code>_attention_test_logit()</code>ï¼Œä½¿ç”¨æ‰€æœ‰çš„å…³ç³»ã€‚</p>
<h1 id="æ•°æ®åŠ è½½éƒ¨åˆ†"><a href="#æ•°æ®åŠ è½½éƒ¨åˆ†" class="headerlink" title="æ•°æ®åŠ è½½éƒ¨åˆ†"></a>æ•°æ®åŠ è½½éƒ¨åˆ†</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@DataIterator.register("bag")</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BagIterator</span><span class="params">(DataIterator)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,</span></span></span><br><span class="line"><span class="function"><span class="params">                 sorting_keys: List[Tuple[str, str]],</span></span></span><br><span class="line"><span class="function"><span class="params">                 padding_noise: float = <span class="number">0.1</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">                 biggest_batch_first: bool = False,</span></span></span><br><span class="line"><span class="function"><span class="params">                 batch_size: int = <span class="number">32</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">                 instances_per_epoch: int = None,</span></span></span><br><span class="line"><span class="function"><span class="params">                 max_instances_in_memory: int = None,</span></span></span><br><span class="line"><span class="function"><span class="params">                 cache_instances: bool = False,</span></span></span><br><span class="line"><span class="function"><span class="params">                 track_epoch: bool = False,</span></span></span><br><span class="line"><span class="function"><span class="params">                 maximum_samples_per_batch: Tuple[str, int] = None)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> sorting_keys:</span><br><span class="line">            <span class="keyword">raise</span> ConfigurationError(<span class="string">"BucketIterator requires sorting_keys to be specified"</span>)</span><br><span class="line"></span><br><span class="line">        super().__init__(cache_instances=cache_instances,</span><br><span class="line">                         track_epoch=track_epoch,</span><br><span class="line">                         batch_size=batch_size,</span><br><span class="line">                         instances_per_epoch=instances_per_epoch,</span><br><span class="line">                         max_instances_in_memory=max_instances_in_memory,</span><br><span class="line">                         maximum_samples_per_batch=maximum_samples_per_batch)</span><br><span class="line">        self._sorting_keys = sorting_keys</span><br><span class="line">        self._padding_noise = padding_noise</span><br><span class="line">        self._biggest_batch_first = biggest_batch_first</span><br><span class="line"></span><br><span class="line"><span class="meta">    @overrides</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_create_batches</span><span class="params">(self, instances: Iterable[Instance], shuffle: bool)</span> -&gt; Iterable[Batch]:</span></span><br><span class="line">        <span class="keyword">for</span> instance_list <span class="keyword">in</span> self._memory_sized_lists(instances):</span><br><span class="line"></span><br><span class="line">            bags = &#123;&#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> instance_id, mentions <span class="keyword">in</span> groupby(</span><br><span class="line">                sorted(instance_list, key=<span class="keyword">lambda</span> instance: instance[<span class="string">'metadata'</span>][<span class="string">'instance_id'</span>]),</span><br><span class="line">                key=<span class="keyword">lambda</span> instance: instance[<span class="string">'metadata'</span>][<span class="string">'instance_id'</span>]):</span><br><span class="line"></span><br><span class="line">                bags[instance_id] = list(mentions)</span><br><span class="line"></span><br><span class="line">            shuffled_instance_ids = list(bags.keys())</span><br><span class="line">            random.shuffle(shuffled_instance_ids)</span><br><span class="line"></span><br><span class="line">            print(<span class="string">'creating new instances'</span>)</span><br><span class="line"></span><br><span class="line">            new_instances = []</span><br><span class="line">            <span class="keyword">for</span> instance_id <span class="keyword">in</span> shuffled_instance_ids:</span><br><span class="line">                mentions = bags[instance_id]</span><br><span class="line">                <span class="keyword">if</span> shuffle:</span><br><span class="line">                    random.shuffle(mentions)</span><br><span class="line">                new_instances.extend(mentions)</span><br><span class="line"></span><br><span class="line">            print(<span class="string">'creating batches'</span>)</span><br><span class="line"></span><br><span class="line">            batches = []</span><br><span class="line">            <span class="keyword">for</span> batch_instances <span class="keyword">in</span> lazy_groups_of(iter(new_instances), self._batch_size):</span><br><span class="line">                <span class="keyword">for</span> possibly_smaller_batches <span class="keyword">in</span> self._ensure_batch_is_sufficiently_small(batch_instances):</span><br><span class="line">                    batches.append(Batch(possibly_smaller_batches))</span><br><span class="line">            </span><br><span class="line">            print(<span class="string">'num batches:'</span>, len(batches))</span><br><span class="line"></span><br><span class="line">            move_to_front = self._biggest_batch_first <span class="keyword">and</span> len(batches) &gt; <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> move_to_front:</span><br><span class="line">                <span class="comment"># We'll actually pop the last _two_ batches, because the last one might not be full.</span></span><br><span class="line">                last_batch = batches.pop()</span><br><span class="line">                penultimate_batch = batches.pop()</span><br><span class="line">            <span class="keyword">if</span> move_to_front:</span><br><span class="line">                batches.insert(<span class="number">0</span>, penultimate_batch)</span><br><span class="line">                batches.insert(<span class="number">0</span>, last_batch)</span><br><span class="line"></span><br><span class="line">            print(<span class="string">'yielding from batches'</span>)</span><br><span class="line">            <span class="keyword">yield</span> <span class="keyword">from</span> batches</span><br></pre></td></tr></table></figure>
<h2 id="group-by"><a href="#group-by" class="headerlink" title="group_by"></a>group_by</h2><p>é¦–å…ˆæ ¹æ®instance_idè¿›è¡Œ<code>group_by</code>æ“ä½œï¼Œè€Œinstance_idæ˜¯ä»¥ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">instance_id = <span class="string">f'<span class="subst">&#123;head&#125;</span>#<span class="subst">&#123;tail&#125;</span>'</span></span><br><span class="line"><span class="keyword">if</span> label:</span><br><span class="line">    instance_id = <span class="string">f'<span class="subst">&#123;instance_id&#125;</span>#<span class="subst">&#123;label&#125;</span>'</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å®éªŒä¸­ï¼Œä½œè€…åˆ¶å®šäº†labelï¼Œä¸ºä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">yield</span> self.text_to_instance(sentence=sentence, head=head, tail=tail, label=relation,</span><br><span class="line">                                            head_type=head_type, tail_type=tail_type)</span><br></pre></td></tr></table></figure>
<p>å› æ­¤ï¼Œ<strong>instance_idå³ä¸ºå¤´å°¾å®ä½“åŠ å…³ç³»æ„æˆ</strong>ï¼Œè¿™æ ·ï¼Œå¯¹äºçŸ¥è¯†åº“ä¸­æœ‰å¤šä¸ªå…³ç³»çš„å¤´å°¾å®ä½“ï¼Œä¼šåˆ†åˆ«æ‰“æˆå¤šä¸ªåŒ…ã€‚<em>æ¯”å¦‚ï¼ŒSteve Jobs -&gt; Appleï¼Œæœ‰å…³ç³»CEOå’Œfounderï¼Œåˆ™ä¼šæ‰“æˆä¸¤ä¸ªåŒ…ï¼ŒåŒ…ä¸­å¥å­å®Œå…¨ç›¸åŒ</em>ã€‚</p>
<h2 id="creating-batches"><a href="#creating-batches" class="headerlink" title="creating batches"></a>creating batches</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(<span class="string">'creating new instances'</span>)</span><br><span class="line"></span><br><span class="line">new_instances = []</span><br><span class="line"><span class="keyword">for</span> instance_id <span class="keyword">in</span> shuffled_instance_ids:</span><br><span class="line">    mentions = bags[instance_id]</span><br><span class="line">    <span class="keyword">if</span> shuffle:</span><br><span class="line">        random.shuffle(mentions)</span><br><span class="line">    new_instances.extend(mentions)</span><br></pre></td></tr></table></figure>
<p><strong><em>é€šè¿‡è¿™ä¸€æ­¥ï¼Œå°†åŒä¸€ä¸ªåŒ…ä¸­çš„å¥å­æŒ¨åœ¨äº†ä¸€èµ·</em></strong>ã€‚</p>
<font color="red">é—®é¢˜æ˜¯`for instance_list in self._memory_sized_lists(instances)`è¦çœ‹ä¸€ä¸‹instance_listçš„å€¼å’Œå¤§å°ã€‚</font>

<p>åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># éœ€è¦å¯¼å…¥æ¨¡å—: from allennlp.common import util [as åˆ«å]</span></span><br><span class="line"><span class="comment"># æˆ–è€…: from allennlp.common.util import lazy_groups_of [as åˆ«å]</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_create_batches</span><span class="params">(self, instances                    , shuffle      )</span>:</span></span><br><span class="line">        <span class="comment"># First break the dataset into memory-sized lists:</span></span><br><span class="line">        <span class="keyword">for</span> instance_list <span class="keyword">in</span> self._memory_sized_lists(instances):</span><br><span class="line">            <span class="keyword">if</span> shuffle:</span><br><span class="line">                random.shuffle(instance_list)</span><br><span class="line">            iterator = iter(instance_list)</span><br><span class="line">            <span class="comment"># Then break each memory-sized list into batches.</span></span><br><span class="line">            <span class="keyword">for</span> batch_instances <span class="keyword">in</span> lazy_groups_of(iterator, self._batch_size):</span><br><span class="line">                <span class="keyword">for</span> possibly_smaller_batches <span class="keyword">in</span> self._ensure_batch_is_sufficiently_small(batch_instances):</span><br><span class="line">                    batch = Batch(possibly_smaller_batches)</span><br><span class="line">                    <span class="keyword">yield</span> batch</span><br></pre></td></tr></table></figure>
<p>æ·»åŠ ä»¥ä¸‹ä»£ç æŸ¥çœ‹instance_listçš„å¤§å°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(<span class="string">'============================================================'</span>)</span><br><span class="line">print(<span class="string">"'instance_list' type "</span>, type(instance_list))</span><br><span class="line">print(<span class="string">"'instance_list' length "</span>, len(instance_list))</span><br><span class="line">print(<span class="string">'============================================================'</span>)</span><br></pre></td></tr></table></figure>
<p>ç»“æœä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">============================================================</span><br><span class="line"><span class="string">'instance_list'</span> <span class="built_in">type</span>  &lt;class <span class="string">'list'</span>&gt;</span><br><span class="line"><span class="string">'instance_list'</span> length  522611</span><br><span class="line">============================================================</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ˜¯å°†æ‰€æœ‰æ•°æ®åŠ è½½åˆ°äº†å†…å­˜ä¸­ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><font color="orange">**æ€»ç»“ä¸€ä¸‹ï¼Œ1.å¯¹å¥å­æŒ‰ç…§(head, tail, relation)æ’åº 2.æŒ‰ç…§batch_sizeæ¥æˆªå–**</font>

<p>åœ¨è®ºæ–‡ä¸­batch_sizeè®¾ç½®ä¸º8ï¼Œåœ¨æºä»£ç ä¸­é»˜è®¤è®¾ç½®ä¸º16ã€‚</p>
<h1 id="é¢„æµ‹éƒ¨åˆ†"><a href="#é¢„æµ‹éƒ¨åˆ†" class="headerlink" title="é¢„æµ‹éƒ¨åˆ†"></a>é¢„æµ‹éƒ¨åˆ†</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Predictor.register('tre-classifier')</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TREClassifierPredictor</span><span class="params">(Predictor)</span>:</span></span><br><span class="line">    <span class="string">"""Predictor wrapper for the TREClassifier"""</span></span><br><span class="line"><span class="meta">    @overrides</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_json_to_instance</span><span class="params">(self, json_dict: JsonDict)</span> -&gt; Instance:</span></span><br><span class="line">        sentence = json_dict[<span class="string">'sentence'</span>]</span><br><span class="line">        head = json_dict[<span class="string">'head'</span>]</span><br><span class="line">        tail = json_dict[<span class="string">'tail'</span>]</span><br><span class="line">        instance = self._dataset_reader.text_to_instance(sentence=sentence, head=head, tail=tail)</span><br><span class="line">        <span class="keyword">return</span> instance</span><br><span class="line"></span><br><span class="line"><span class="meta">    @overrides</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">predict_batch_instance</span><span class="params">(self, instances: List[Instance])</span> -&gt; List[JsonDict]:</span></span><br><span class="line">        model = self._model</span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> torch.no_grad():</span><br><span class="line">            cuda_device = model._get_prediction_device()</span><br><span class="line">            dataset = Batch(instances)</span><br><span class="line">            dataset.index_instances(model.vocab)</span><br><span class="line">            model_input = util.move_to_device(dataset.as_tensor_dict(), cuda_device)</span><br><span class="line">            outputs = model.decode(model(**model_input))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sanitize(outputs)</span><br></pre></td></tr></table></figure>
<p>æ ¹æ®è®­ç»ƒæ—¶çš„æ¨¡å‹é€‰æ‹©ï¼Œåˆ†åˆ«å¯¹åº”Bag2Bagæˆ–Sent2Senté¢„æµ‹æ¨¡å¼ã€‚</p>
<h2 id="predict-batch-json"><a href="#predict-batch-json" class="headerlink" title="predict_batch_json()"></a>predict_batch_json()</h2><p>ä»å®˜ç½‘çš„æ–‡æ¡£æ¥çœ‹ï¼Œæ˜¯è¿™æ ·ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SemanticRoleLabelerPredictor</span><span class="params">(Predictor)</span>:</span></span><br><span class="line"> | ...</span><br><span class="line"> | @overrides</span><br><span class="line"> | <span class="function"><span class="keyword">def</span> <span class="title">predict_batch_json</span><span class="params">(self, inputs: List[JsonDict])</span> -&gt; List[JsonDict]</span></span><br></pre></td></tr></table></figure>
<p>Expects JSON that looks like <code>[{&quot;sentence&quot;: &quot;...&quot;}, {&quot;sentence&quot;: &quot;...&quot;}, ...]</code> and returns JSON that looks like</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;<span class="attr">"words"</span>: [...],</span><br><span class="line">     <span class="attr">"verbs"</span>: [</span><br><span class="line">        &#123;<span class="attr">"verb"</span>: <span class="string">"..."</span>, <span class="attr">"description"</span>: <span class="string">"..."</span>, <span class="attr">"tags"</span>: [...]&#125;,</span><br><span class="line">        ...</span><br><span class="line">        &#123;<span class="attr">"verb"</span>: <span class="string">"..."</span>, <span class="attr">"description"</span>: <span class="string">"..."</span>, <span class="attr">"tags"</span>: [...]&#125;,</span><br><span class="line">    ]&#125;,</span><br><span class="line">    &#123;<span class="attr">"words"</span>: [...],</span><br><span class="line">     <span class="attr">"verbs"</span>: [</span><br><span class="line">        &#123;<span class="attr">"verb"</span>: <span class="string">"..."</span>, <span class="attr">"description"</span>: <span class="string">"..."</span>, <span class="attr">"tags"</span>: [...]&#125;,</span><br><span class="line">        ...</span><br><span class="line">        &#123;<span class="attr">"verb"</span>: <span class="string">"..."</span>, <span class="attr">"description"</span>: <span class="string">"..."</span>, <span class="attr">"tags"</span>: [...]&#125;,</span><br><span class="line">    ]&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
        <category>Distant Supervision</category>
      </categories>
      <tags>
        <tag>DISTRE</tag>
        <tag>source code</tag>
        <tag>relation extraction</tag>
      </tags>
  </entry>
  <entry>
    <title>PRæ›²çº¿æ¨ªçºµåæ ‡è½´çš„æ•°æ®æ¥æº</title>
    <url>/2021/01/03/PR%E6%9B%B2%E7%BA%BF%E6%A8%AA%E7%BA%B5%E5%9D%90%E6%A0%87%E8%BD%B4%E7%9A%84%E6%95%B0%E6%8D%AE%E6%9D%A5%E6%BA%90/</url>
    <content><![CDATA[<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">test_loss, test_acc, y, y_pred, logit_list, y_hot = self.predict(sess, self.data[<span class="string">'test'</span>])</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹predict()å‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">predict</span><span class="params">(self, sess, data, wLabels=True, shuffle=False, label=<span class="string">'Evaluating on Test'</span>)</span>:</span></span><br><span class="line">	<span class="string">"""</span></span><br><span class="line"><span class="string">	Evaluate model on valid/test data</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	Parameters</span></span><br><span class="line"><span class="string">	----------</span></span><br><span class="line"><span class="string">	sess:		Session of tensorflow</span></span><br><span class="line"><span class="string">	data:		Data to evaluate on</span></span><br><span class="line"><span class="string">	wLabels:	Does data include labels or not</span></span><br><span class="line"><span class="string">	shuffle:	Shuffle data while before creates batches</span></span><br><span class="line"><span class="string">	label:		Log label to be used while logging</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	Returns</span></span><br><span class="line"><span class="string">	-------</span></span><br><span class="line"><span class="string">	losses:		Loss over the entire data</span></span><br><span class="line"><span class="string">	accuracies:	Overall Accuracy</span></span><br><span class="line"><span class="string">	y: 		Actual label</span></span><br><span class="line"><span class="string">	y_pred:		Predicted labels</span></span><br><span class="line"><span class="string">	logit_list:	Logit list for each bag in the data</span></span><br><span class="line"><span class="string">	y_actual_hot:	One hot represetnation of actual label for each bag in the data</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	"""</span></span><br><span class="line">	losses, accuracies, y_pred, y, logit_list, y_actual_hot = [], [], [], [], [], []</span><br><span class="line">	bag_cnt = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> step, batch <span class="keyword">in</span> enumerate(self.getBatches(data, shuffle)):</span><br><span class="line">		<span class="comment"># nn_out =&gt; logits &#125; =&gt; loss</span></span><br><span class="line">		<span class="comment">#           y</span></span><br><span class="line">		<span class="comment"># nn_out =&gt; y_pred   &#125; =&gt; accuracy</span></span><br><span class="line">		<span class="comment">#           y_actual</span></span><br><span class="line">		loss, logits, accuracy = sess.run([self.loss, self.logits, self.accuracy], feed_dict = self.create_feed_dict(batch, split=<span class="string">'test'</span>))</span><br><span class="line">		losses.    append(loss)</span><br><span class="line">		accuracies.append(accuracy)</span><br><span class="line"></span><br><span class="line">		<span class="comment"># <span class="doctag">TODO:</span> åªé¢„æµ‹ä¸€ä¸ªæ ‡ç­¾, å¯¹çœŸå®æ ‡ç­¾ä¹Ÿæ˜¯åªå–ç¬¬ä¸€ä¸ª</span></span><br><span class="line">		pred_ind      = logits.argmax(axis=<span class="number">1</span>)  <span class="comment"># (batch, )</span></span><br><span class="line">		y_pred += pred_ind.tolist()  <span class="comment"># (batch, )</span></span><br><span class="line"></span><br><span class="line">		y_actual_hot += self.getOneHot(batch[<span class="string">'Y'</span>], self.num_class).tolist()  <span class="comment"># ä¿ç•™æ‰€æœ‰ gold label</span></span><br><span class="line">		y 	     += np.argmax(self.getOneHot(batch[<span class="string">'Y'</span>], self.num_class), <span class="number">1</span>).tolist()  <span class="comment"># åªå–ç¬¬ä¸€ä¸ª gold label</span></span><br><span class="line"></span><br><span class="line">		logit_list += logits.tolist()</span><br><span class="line">		bag_cnt      += len(batch[<span class="string">'sent_num'</span>])</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> step % <span class="number">100</span> == <span class="number">0</span>:</span><br><span class="line">			self.logger.info(<span class="string">'&#123;&#125; (&#123;&#125;/&#123;&#125;):\t&#123;:.5&#125;\t&#123;:.5&#125;\t&#123;&#125;'</span>.format(label, bag_cnt, len(self.data[<span class="string">'test'</span>]), np.mean(accuracies)*<span class="number">100</span>, np.mean(losses), self.p.name))</span><br><span class="line"></span><br><span class="line">	self.logger.info(<span class="string">'Test Accuracy: &#123;&#125;'</span>.format(accuracy))</span><br><span class="line">	<span class="keyword">return</span> np.mean(losses), np.mean(accuracies)*<span class="number">100</span>, y, y_pred, logit_list, y_actual_hot</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<font color="red">**ä½†æ˜¯è¿™é‡Œå–yçš„æ—¶å€™ï¼Œä¹Ÿæ˜¯å¯¹0-1æ•°ç»„å–ç¬¬ä¸€ä¸ªä¸º1çš„ç´¢å¼•ï¼Œå¯èƒ½ä¼šæœ‰é¡ºåºçš„å½±å“ï¼ä¸ºäº†é¿å…å¹²æ‰°ï¼Œåœ¨å®éªŒä¸­ç¡®ä¿rel2id.jsonä¸RESIDEè®¾ç½®ä¸€è‡´ã€‚**</font>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å»é™¤NAå¹¶å…¨éƒ¨æ‹‰æˆ1ç»´å‘é‡ #</span></span><br><span class="line">y_true   = np.array([e[<span class="number">1</span>:] <span class="keyword">for</span> e <span class="keyword">in</span> y_hot]).  	 reshape((<span class="number">-1</span>))</span><br><span class="line">y_scores = np.array([e[<span class="number">1</span>:] <span class="keyword">for</span> e <span class="keyword">in</span> logit_list]).reshape((<span class="number">-1</span>))</span><br><span class="line">area_pr  = average_precision_score(y_true, y_scores)</span><br><span class="line"></span><br><span class="line">self.logger.info(<span class="string">'Final results: Prec:&#123;&#125; | Rec:&#123;&#125; | F1:&#123;&#125; | Area:&#123;&#125;'</span>.format(test_prec, test_rec, test_f1, area_pr))</span><br><span class="line"><span class="comment"># Store predictions</span></span><br><span class="line">pickle.dump(&#123;<span class="string">'logit_list'</span>: logit_list, <span class="string">'y_hot'</span>: y_hot&#125;, open(<span class="string">"results/&#123;&#125;/precision_recall.pkl"</span>.format(self.p.name), <span class="string">'wb'</span>))</span><br></pre></td></tr></table></figure>
<p><font color="orange">å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ</font>åœ¨ç»˜åˆ¶PRæ›²çº¿æ—¶ï¼Œä¸è®¡ç®—F1ä¸åŒï¼Œæ˜¯å–äº†æ‰€æœ‰çš„gold_label (one-hotå‘é‡)ï¼Œå¹¶å–äº†é™¤NAä»¥å¤–çš„æ‰€æœ‰logitså€¼ã€‚</p>
<p>ä½†æ˜¯åœ¨ä¿å­˜çš„æ—¶å€™ï¼Œåˆç›´æ¥ä¿å­˜äº†logits_listå’Œy_hotï¼Œç»§ç»­é˜…è¯»plot_pr.pyä»£ç ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">loadData</span><span class="params">(path)</span>:</span></span><br><span class="line">	preds 	   	= pickle.load(open(path, <span class="string">'rb'</span>))</span><br><span class="line">	y_hot 	   	= np.array(preds[<span class="string">'y_hot'</span>])</span><br><span class="line">	logit_list 	= np.array(preds[<span class="string">'logit_list'</span>])</span><br><span class="line">	y_hot_new       = np.reshape(np.array([x[<span class="number">1</span>:] <span class="keyword">for</span> x <span class="keyword">in</span> y_hot]),      (<span class="number">-1</span>))</span><br><span class="line">	logit_list_new  = np.reshape(np.array([x[<span class="number">1</span>:] <span class="keyword">for</span> x <span class="keyword">in</span> logit_list]), (<span class="number">-1</span>))</span><br><span class="line">	<span class="keyword">return</span> y_hot_new, logit_list_new</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">plotPR</span><span class="params">(dataset, args)</span>:</span></span><br><span class="line">	y_true, y_scores 	   = loadData(<span class="string">'./results/&#123;&#125;/precision_recall.pkl'</span>.format(args.name))</span><br><span class="line">	precision,recall,threshold = precision_recall_curve(y_true,y_scores)</span><br><span class="line">	area_under 	   	   = average_precision_score(y_true, y_scores)</span><br><span class="line">	baselines_path 		   = <span class="string">'./baselines_pr/&#123;&#125;/'</span>.format(dataset)</span><br><span class="line">	print(<span class="string">'Area under the curve: &#123;:.3&#125;'</span>.format(area_under))</span><br><span class="line"></span><br><span class="line">	plt.plot(recall[:], precision[:], label=<span class="string">'RESIDE'</span>, color =<span class="string">'red'</span>, lw=<span class="number">1</span>, marker = <span class="string">'o'</span>, markevery = <span class="number">0.1</span>, ms = <span class="number">6</span>)</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<strong>ä¸ä¸Šæ–‡ä¸€è‡´ï¼Œä¹Ÿæ˜¯é™¤å»NAåå–æ‰€æœ‰æ•°æ®</strong>ï¼Œç„¶åè°ƒç”¨<code>precision_recall_curve()</code>ï¼Œä¸ºäº†é¿å…è¿‡å¤šçš„æ•°æ®ï¼Œ<em>å¯èƒ½è¿˜æœ‰æˆªæ–­æ“ä½œ</em>ï¼Œå¯¹äºRESIDEï¼Œä½œè€…ä¿ç•™äº†precision, recallæ•°ç»„çš„å‰50000ä¸ªæ•°å­—ã€‚</p>
]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
        <category>Distant Supervision</category>
      </categories>
      <tags>
        <tag>Distant Supervision</tag>
        <tag>PR-curve</tag>
      </tags>
  </entry>
  <entry>
    <title>matplotlib.plot()</title>
    <url>/2021/01/03/matplotlib-plot/</url>
    <content><![CDATA[<div class="table-container">
<table>
<thead>
<tr>
<th>Property</th>
<th>Value Type</th>
</tr>
</thead>
<tbody>
<tr>
<td>alpha</td>
<td>float</td>
</tr>
<tr>
<td>animated</td>
<td>[True \</td>
<td>False]</td>
</tr>
<tr>
<td>antialiased or aa</td>
<td>[True \</td>
<td>False]</td>
</tr>
<tr>
<td>clip_box</td>
<td>a matplotlib.transform.Bbox instance</td>
</tr>
<tr>
<td>clip_on</td>
<td>[True \</td>
<td>False]</td>
</tr>
<tr>
<td>clip_path</td>
<td>a Path instance and a Transform instance, a Patch</td>
</tr>
<tr>
<td>color or c</td>
<td>any matplotlib color</td>
</tr>
<tr>
<td>contains</td>
<td>the hit testing function</td>
</tr>
<tr>
<td>dash_capstyle</td>
<td>[<code>&#39;butt&#39;</code></td>
<td><code>&#39;round&#39;</code></td>
<td><code>&#39;projecting&#39;</code>]</td>
</tr>
<tr>
<td>dash_joinstyle</td>
<td>[<code>&#39;miter&#39;</code></td>
<td><code>&#39;round&#39;</code></td>
<td><code>&#39;bevel&#39;</code>]</td>
</tr>
<tr>
<td>dashes</td>
<td>sequence of on/off ink in points</td>
</tr>
<tr>
<td>data</td>
<td>(np.array xdata, np.array ydata)</td>
</tr>
<tr>
<td>figure</td>
<td>a matplotlib.figure.Figure instance</td>
</tr>
<tr>
<td>label</td>
<td>any string</td>
</tr>
<tr>
<td>linestyle or ls</td>
<td>[ <code>&#39;-&#39;</code></td>
<td><code>&#39;--&#39;</code></td>
<td><code>&#39;-.&#39;</code></td>
<td><code>&#39;:&#39;</code></td>
<td><code>&#39;steps&#39;</code> \</td>
<td>â€¦]</td>
</tr>
<tr>
<td>linewidth or lw</td>
<td>float value in points</td>
</tr>
<tr>
<td>marker</td>
<td>[ <code>&#39;+&#39;</code></td>
<td><code>&#39;,&#39;</code></td>
<td><code>&#39;.&#39;</code></td>
<td><code>&#39;1&#39;</code></td>
<td><code>&#39;2&#39;</code></td>
<td><code>&#39;3&#39;</code></td>
<td><code>&#39;4&#39;</code> ]</td>
</tr>
<tr>
<td>markeredgecolor or mec</td>
<td>any matplotlib color</td>
</tr>
<tr>
<td>markeredgewidth or mew</td>
<td>float value in points</td>
</tr>
<tr>
<td>markerfacecolor or mfc</td>
<td>any matplotlib color</td>
</tr>
<tr>
<td>markersize or ms</td>
<td>float</td>
</tr>
<tr>
<td>markevery</td>
<td>[ None \</td>
<td>integer \</td>
<td>(startind, stride) ]</td>
</tr>
<tr>
<td>picker</td>
<td>used in interactive line selection</td>
</tr>
<tr>
<td>pickradius</td>
<td>the line pick selection radius</td>
</tr>
<tr>
<td>solid_capstyle</td>
<td>[<code>&#39;butt&#39;</code></td>
<td><code>&#39;round&#39;</code></td>
<td><code>&#39;projecting&#39;</code>]</td>
</tr>
<tr>
<td>solid_joinstyle</td>
<td>[<code>&#39;miter&#39;</code></td>
<td><code>&#39;round&#39;</code></td>
<td><code>&#39;bevel&#39;</code>]</td>
</tr>
<tr>
<td>transform</td>
<td>a matplotlib.transforms.Transform instance</td>
</tr>
<tr>
<td>visible</td>
<td>[True \</td>
<td>False]</td>
</tr>
<tr>
<td>xdata</td>
<td>np.array</td>
</tr>
<tr>
<td>ydata</td>
<td>np.array</td>
</tr>
<tr>
<td>zorder</td>
<td>any number</td>
</tr>
</tbody>
</table>
</div>
]]></content>
      <categories>
        <category>Others</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>matplotlib</tag>
        <tag>plot</tag>
        <tag>ç»˜å›¾</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸¤ä¸ªå¥å­ä¹‹é—´çš„æ³¨æ„åŠ›æœºåˆ¶</title>
    <url>/2020/12/31/%E4%B8%A4%E4%B8%AA%E5%8F%A5%E5%AD%90%E4%B9%8B%E9%97%B4%E7%9A%84%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/</url>
    <content><![CDATA[<h1 id="æ¥æº"><a href="#æ¥æº" class="headerlink" title="æ¥æº"></a>æ¥æº</h1><p>é¦–å…ˆéœ€è¦æ¸…æ¥šï¼Œæ³¨æ„åŠ›æœºåˆ¶çš„æ¥æºæ˜¯Encoder-Decoderæ¨¡å‹ï¼Œå³Seq2Seqæ¨¡å‹ï¼Œä»ä¸€ä¸ªå¥å­åˆ°å¦ä¸€ä¸ªå¥å­ï¼Œä»ä¸€ä¸ªåºåˆ—åˆ°å¦ä¸€ä¸ªåºåˆ—ã€‚</p>
<h1 id="ç†è§£"><a href="#ç†è§£" class="headerlink" title="ç†è§£"></a>ç†è§£</h1><p>æ€ä¹ˆç†è§£Attentionæ¨¡å‹çš„ç‰©ç†å«ä¹‰å‘¢ï¼Ÿä¸€èˆ¬åœ¨è‡ªç„¶è¯­è¨€å¤„ç†åº”ç”¨é‡Œ<strong>ä¼šæŠŠAttentionæ¨¡å‹çœ‹ä½œæ˜¯è¾“å‡ºTargetå¥å­ä¸­æŸä¸ªå•è¯å’Œè¾“å…¥Sourceå¥å­æ¯ä¸ªå•è¯çš„å¯¹é½æ¨¡å‹</strong>ï¼Œè¿™æ˜¯éå¸¸æœ‰é“ç†çš„ã€‚</p>
<p>å¦‚æœæŠŠAttentionæœºåˆ¶ä»ä¸Šæ–‡è®²è¿°ä¾‹å­ä¸­çš„Encoder-Decoderæ¡†æ¶ä¸­å‰¥ç¦»ï¼Œå¹¶è¿›ä¸€æ­¥åšæŠ½è±¡ï¼Œå¯ä»¥æ›´å®¹æ˜“çœ‹æ‡‚Attentionæœºåˆ¶çš„æœ¬è´¨æ€æƒ³ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥çœ‹å¾…Attentionæœºåˆ¶ï¼šå°†Sourceä¸­çš„æ„æˆå…ƒç´ æƒ³è±¡æˆæ˜¯ç”±ä¸€ç³»åˆ—çš„æ•°æ®å¯¹æ„æˆï¼Œæ­¤æ—¶ç»™å®šTargetä¸­çš„<strong>æŸä¸ªå…ƒç´ Query</strong>ï¼Œé€šè¿‡è®¡ç®—Queryå’Œå„ä¸ªKeyçš„ç›¸ä¼¼æ€§æˆ–è€…ç›¸å…³æ€§ï¼Œå¾—åˆ°æ¯ä¸ªKeyå¯¹åº”Valueçš„æƒé‡ç³»æ•°ï¼Œç„¶åå¯¹Valueè¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œå³å¾—åˆ°äº†æœ€ç»ˆçš„Attentionæ•°å€¼ã€‚æ‰€ä»¥æœ¬è´¨ä¸ŠAttentionæœºåˆ¶æ˜¯å¯¹Sourceä¸­å…ƒç´ çš„Valueå€¼è¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œè€ŒQueryå’ŒKeyç”¨æ¥è®¡ç®—å¯¹åº”Valueçš„æƒé‡ç³»æ•°ã€‚</p>
<font color="purple">å¯ä»¥å¼•å‡ºå¦å¤–ä¸€ç§ç†è§£ï¼Œä¹Ÿå¯ä»¥å°†Attentionæœºåˆ¶çœ‹ä½œä¸€ç§è½¯å¯»å€ï¼ˆSoft Addressingï¼‰:Sourceå¯ä»¥çœ‹ä½œå­˜å‚¨å™¨å†…å­˜å‚¨çš„å†…å®¹ï¼Œå…ƒç´ ç”±åœ°å€Keyå’Œå€¼Valueç»„æˆï¼Œå½“å‰æœ‰ä¸ªKey=Queryçš„æŸ¥è¯¢ï¼Œç›®çš„æ˜¯å–å‡ºå­˜å‚¨å™¨ä¸­å¯¹åº”çš„Valueå€¼ï¼Œå³Attentionæ•°å€¼ã€‚é€šè¿‡Queryå’Œå­˜å‚¨å™¨å†…å…ƒç´ Keyçš„åœ°å€è¿›è¡Œç›¸ä¼¼æ€§æ¯”è¾ƒæ¥å¯»å€ï¼Œä¹‹æ‰€ä»¥è¯´æ˜¯è½¯å¯»å€ï¼ŒæŒ‡çš„ä¸åƒä¸€èˆ¬å¯»å€åªä»å­˜å‚¨å†…å®¹é‡Œé¢æ‰¾å‡ºä¸€æ¡å†…å®¹ï¼Œè€Œæ˜¯å¯èƒ½ä»æ¯ä¸ªKeyåœ°å€éƒ½ä¼šå–å‡ºå†…å®¹ï¼Œå–å‡ºå†…å®¹çš„é‡è¦æ€§æ ¹æ®Queryå’ŒKeyçš„ç›¸ä¼¼æ€§æ¥å†³å®šï¼Œä¹‹åå¯¹Valueè¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œè¿™æ ·å°±å¯ä»¥å–å‡ºæœ€ç»ˆçš„Valueå€¼ï¼Œä¹Ÿå³Attentionå€¼ã€‚æ‰€ä»¥ä¸å°‘ç ”ç©¶äººå‘˜å°†Attentionæœºåˆ¶çœ‹ä½œè½¯å¯»å€çš„ä¸€ç§ç‰¹ä¾‹ï¼Œè¿™ä¹Ÿæ˜¯éå¸¸æœ‰é“ç†çš„ã€‚</font>

<a id="more"></a>
<h1 id="è®¡ç®—æ–¹å¼"><a href="#è®¡ç®—æ–¹å¼" class="headerlink" title="è®¡ç®—æ–¹å¼"></a>è®¡ç®—æ–¹å¼</h1><p><img src="/images/blog/2020/attention.jpg" alt></p>
<h1 id="Self-Attention"><a href="#Self-Attention" class="headerlink" title="Self-Attention"></a>Self-Attention</h1><p>é€šè¿‡ä¸Šè¿°å¯¹Attentionæœ¬è´¨æ€æƒ³çš„æ¢³ç†ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å®¹æ˜“ç†è§£æœ¬èŠ‚ä»‹ç»çš„Self Attentionæ¨¡å‹ã€‚Self Attentionä¹Ÿç»å¸¸è¢«ç§°ä¸ºintra Attentionï¼ˆå†…éƒ¨Attentionï¼‰ï¼Œæœ€è¿‘ä¸€å¹´ä¹Ÿè·å¾—äº†æ¯”è¾ƒå¹¿æ³›çš„ä½¿ç”¨ï¼Œæ¯”å¦‚Googleæœ€æ–°çš„æœºå™¨ç¿»è¯‘æ¨¡å‹å†…éƒ¨å¤§é‡é‡‡ç”¨äº†Self Attentionæ¨¡å‹ã€‚</p>
<p>åœ¨ä¸€èˆ¬ä»»åŠ¡çš„Encoder-Decoderæ¡†æ¶ä¸­ï¼Œè¾“å…¥Sourceå’Œè¾“å‡ºTargetå†…å®¹æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ¯”å¦‚å¯¹äºè‹±-ä¸­æœºå™¨ç¿»è¯‘æ¥è¯´ï¼ŒSourceæ˜¯è‹±æ–‡å¥å­ï¼ŒTargetæ˜¯å¯¹åº”çš„ç¿»è¯‘å‡ºçš„ä¸­æ–‡å¥å­ï¼ŒAttentionæœºåˆ¶å‘ç”Ÿåœ¨Targetçš„å…ƒç´ Queryå’ŒSourceä¸­çš„æ‰€æœ‰å…ƒç´ ä¹‹é—´ã€‚è€ŒSelf Attentioné¡¾åæ€ä¹‰ï¼ŒæŒ‡çš„ä¸æ˜¯Targetå’ŒSourceä¹‹é—´çš„Attentionæœºåˆ¶ï¼Œè€Œæ˜¯Sourceå†…éƒ¨å…ƒç´ ä¹‹é—´æˆ–è€…Targetå†…éƒ¨å…ƒç´ ä¹‹é—´å‘ç”Ÿçš„Attentionæœºåˆ¶ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºTarget=Sourceè¿™ç§ç‰¹æ®Šæƒ…å†µä¸‹çš„æ³¨æ„åŠ›è®¡ç®—æœºåˆ¶ã€‚å…¶å…·ä½“è®¡ç®—è¿‡ç¨‹æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯è®¡ç®—å¯¹è±¡å‘ç”Ÿäº†å˜åŒ–è€Œå·²ï¼Œæ‰€ä»¥æ­¤å¤„ä¸å†èµ˜è¿°å…¶è®¡ç®—è¿‡ç¨‹ç»†èŠ‚ã€‚</p>
<p>å¦‚æœæ˜¯Self Attentionæœºåˆ¶ï¼Œä¸€ä¸ªå¾ˆè‡ªç„¶çš„é—®é¢˜æ˜¯ï¼šé€šè¿‡Self Attentionåˆ°åº•å­¦åˆ°äº†å“ªäº›è§„å¾‹æˆ–è€…æŠ½å–å‡ºäº†å“ªäº›ç‰¹å¾å‘¢ï¼Ÿæˆ–è€…è¯´å¼•å…¥Self Attentionæœ‰ä»€ä¹ˆå¢ç›Šæˆ–è€…å¥½å¤„å‘¢ï¼Ÿæˆ‘ä»¬ä»ç„¶ä»¥æœºå™¨ç¿»è¯‘ä¸­çš„Self Attentionæ¥è¯´æ˜ï¼Œå›¾11å’Œå›¾12æ˜¯å¯è§†åŒ–åœ°è¡¨ç¤ºSelf Attentionåœ¨åŒä¸€ä¸ªè‹±è¯­å¥å­å†…å•è¯é—´äº§ç”Ÿçš„è”ç³»ã€‚</p>
<p><img src="/images/blog/2020/attention_example.jpg" alt></p>
<p>ä»ä¸¤å¼ å›¾ï¼ˆå›¾11ã€å›¾12ï¼‰å¯ä»¥çœ‹å‡ºï¼Œ<strong>Self Attentionå¯ä»¥æ•è·åŒä¸€ä¸ªå¥å­ä¸­å•è¯ä¹‹é—´çš„ä¸€äº›å¥æ³•ç‰¹å¾ï¼ˆæ¯”å¦‚å›¾11å±•ç¤ºçš„æœ‰ä¸€å®šè·ç¦»çš„çŸ­è¯­ç»“æ„ï¼‰æˆ–è€…è¯­ä¹‰ç‰¹å¾ï¼ˆæ¯”å¦‚å›¾12å±•ç¤ºçš„itsçš„æŒ‡ä»£å¯¹è±¡Lawï¼‰</strong>ã€‚</p>
<p>å¾ˆæ˜æ˜¾ï¼Œ<font color="orange">å¼•å…¥Self Attentionåä¼šæ›´å®¹æ˜“æ•è·å¥å­ä¸­é•¿è·ç¦»çš„ç›¸äº’ä¾èµ–çš„ç‰¹å¾</font>ï¼Œå› ä¸ºå¦‚æœæ˜¯RNNæˆ–è€…LSTMï¼Œéœ€è¦ä¾æ¬¡åºåºåˆ—è®¡ç®—ï¼Œå¯¹äºè¿œè·ç¦»çš„ç›¸äº’ä¾èµ–çš„ç‰¹å¾ï¼Œè¦ç»è¿‡è‹¥å¹²æ—¶é—´æ­¥æ­¥éª¤çš„ä¿¡æ¯ç´¯ç§¯æ‰èƒ½å°†ä¸¤è€…è”ç³»èµ·æ¥ï¼Œè€Œè·ç¦»è¶Šè¿œï¼Œæœ‰æ•ˆæ•è·çš„å¯èƒ½æ€§è¶Šå°ã€‚</p>
<p>ä½†æ˜¯Self Attentionåœ¨è®¡ç®—è¿‡ç¨‹ä¸­ä¼šç›´æ¥å°†å¥å­ä¸­ä»»æ„ä¸¤ä¸ªå•è¯çš„è”ç³»é€šè¿‡ä¸€ä¸ªè®¡ç®—æ­¥éª¤ç›´æ¥è”ç³»èµ·æ¥ï¼Œæ‰€ä»¥è¿œè·ç¦»ä¾èµ–ç‰¹å¾ä¹‹é—´çš„è·ç¦»è¢«æå¤§ç¼©çŸ­ï¼Œæœ‰åˆ©äºæœ‰æ•ˆåœ°åˆ©ç”¨è¿™äº›ç‰¹å¾ã€‚é™¤æ­¤å¤–ï¼Œ<em>Self Attentionå¯¹äºå¢åŠ è®¡ç®—çš„å¹¶è¡Œæ€§ä¹Ÿæœ‰ç›´æ¥å¸®åŠ©ä½œç”¨</em>ã€‚è¿™æ˜¯ä¸ºä½•Self Attentioné€æ¸è¢«å¹¿æ³›ä½¿ç”¨çš„ä¸»è¦åŸå› ã€‚</p>
<h2 id="Self-Attentionéœ€è¦MASKå—ï¼Ÿ"><a href="#Self-Attentionéœ€è¦MASKå—ï¼Ÿ" class="headerlink" title="Self-Attentionéœ€è¦MASKå—ï¼Ÿ"></a>Self-Attentionéœ€è¦MASKå—ï¼Ÿ</h2><p><strong>self-attentionçš„å‡ºç°æ˜¯ä¸ºäº†æ‘†è„±å¾ªç¯ç¥ç»ç½‘ç»œä¸èƒ½å¹¶è¡Œè®¡ç®—çš„ç¼ºç‚¹è€Œæå‡ºçš„</strong>ï¼Œå®ƒçš„è®¾è®¡æ¨¡å¼å¯ä»¥é€šè¿‡å½“å‰å•è¯å»æŸ¥çœ‹å…¶è¾“å…¥åºåˆ—ä¸­çš„å…¶ä»–å•è¯ï¼Œä»¥æ­¤æ¥å¯»æ‰¾ç¼–ç è¿™ä¸ªå•è¯æ›´å¥½çš„çº¿ç´¢ã€‚</p>
<p><strong>è€ŒTransformerä½¿ç”¨çš„Self-attentionã€‚é¡¾åæ€ä¹‰å³å¥å­ä¸­çš„æ¯ä¸€ä¸ªè¯éƒ½è¦å’Œè¯¥å¥å­å½“ä¸­çš„æ‰€æœ‰è¯è¿›è¡Œä¸€ä¸ªattentionè®¡ç®—ï¼Œç›®çš„æ˜¯å­¦ä¹ å¥å­å†…éƒ¨çš„è¯ä¾èµ–å…³ç³»ï¼Œè·å–è¯çš„å†…éƒ¨ç»“æ„ã€‚å› æ­¤ï¼Œä»è¿™ä¸ªç‰¹ç‚¹å½“ä¸­æˆ‘ä»¬å¯ä»¥å…¶å®ä¹Ÿèƒ½æ¨æµ‹å‡ºSelf-attentionè®¡ç®—çš„ä¿¡æ¯æ¥æºéƒ½æ˜¯æ¥æºäºå…¶å¥å­æœ¬èº«ã€‚</strong></p>
<p>æ•…åœ¨ä¸Šè¿°attentionçš„è®¡ç®—å…¬å¼å½“ä¸­ï¼Œå¯ä»¥çœ‹å‡ºself-attentionå³Q=K=Vã€‚ä¸‹é¢ç”¨Transformerçš„éƒ¨åˆ†ä»£ç ï¼ˆTensorflowï¼‰æ¥è¿›ä¸€æ­¥çš„äº†è§£Qï¼ŒKï¼ŒVåœ¨self-attentionä¸­çš„æ„æˆï¼ˆä»¥Encoderç«¯ä¸ºä¾‹ï¼‰</p>
<p>ä»¥ä¸‹æ˜¯<code>train.py</code>ä¸­çš„éƒ¨åˆ†ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> <span class="keyword">with</span> tf.variable_scope(<span class="string">"num_blocks_&#123;&#125;"</span>.format(i)):</span><br><span class="line"><span class="number">2</span>     self.enc = multihead_attention(queries=self.enc,</span><br><span class="line"><span class="number">3</span>                                    keys=self.enc,</span><br><span class="line"><span class="number">4</span>                                    num_units=hp.hidden_units,</span><br><span class="line"><span class="number">5</span>                                    num_heads=hp.num_heads,</span><br><span class="line"><span class="number">6</span>                                    dropout_rate=hp.dropout_rate,</span><br><span class="line"><span class="number">7</span>                                    is_traing=is_traing,</span><br><span class="line"><span class="number">8</span>                                    causality=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<p>train.pyä¸­çš„ self.encä»£è¡¨çš„å°±æ˜¯ encoderç«¯ç»è¿‡word_embeddingä»¥åŠposition_embeddingä¹‹åçš„å¥å­ä¿¡æ¯,<strong>ä¹‹åç”¨Xæ¥ä»£æ›¿</strong>ã€‚<br>æ ¹æ®å…¶ä¼ å…¥ multihead_attention å‡½æ•°ä¸­çš„å‚æ•°æ¥çœ‹ï¼Œåœ¨æœºå™¨ç¿»è¯‘é¢†åŸŸå½“ä¸­ï¼ŒTransformerå½“ä¸­çš„queriesä»¥åŠKeyséƒ½æ˜¯å…¶è¾“å…¥ä¿¡æ¯xã€‚</p>
<p>ä»¥ä¸‹æ˜¯<code>module.py</code>ä¸­çš„éƒ¨åˆ†ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> <span class="function"><span class="keyword">def</span> <span class="title">multihead_attention</span><span class="params">(queries,</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="number">2</span>                         keys,</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="number">3</span>                         num_units=None,</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="number">4</span>                         num_heads=<span class="number">8</span>,</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="number">5</span>                         dropout_rate=<span class="number">0</span>,</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="number">6</span>                         is_training=True,</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="number">7</span>                         causality=False,</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="number">8</span>                         scope=<span class="string">'multihead_attention'</span>,</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="number">9</span>                         reuse=None)</span>:</span></span><br><span class="line"><span class="number">10</span>                        </span><br><span class="line"><span class="number">11</span>    <span class="keyword">with</span> tf.variable_scope(scope,reuse=reuse):</span><br><span class="line"><span class="number">12</span>        <span class="keyword">if</span> num_units <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line"><span class="number">13</span>            num_units = queries.get_shape().as_list[<span class="number">-1</span>]</span><br><span class="line"><span class="number">14</span></span><br><span class="line"><span class="number">15</span>        Q = tf.layers.dense(queries,num_units,activation=tf.nn.relu)</span><br><span class="line"><span class="number">16</span>        K = tf.layers.dense(keys,num_units,activation=tf.nn.relu)</span><br><span class="line"><span class="number">17</span>        V = tf.layers.dense(keys,num_units,activation=tf.nn.relu)</span><br></pre></td></tr></table></figure>
<p>è€Œåœ¨module.pyæ–‡ä»¶å½“ä¸­ï¼Œæˆ‘ä»¬ä»çŸ©é˜µQï¼ŒKï¼ŒVçš„è®¡ç®—å…¬å¼ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°ï¼š<br>Qæ˜¯å°†queriesè¾“å…¥è¿›ä¸€ä¸ªèŠ‚ç‚¹æ•°ä¸ºnum_unitsçš„å‰é¦ˆç¥ç»ç½‘ç»œä¹‹åå¾—åˆ°çš„çŸ©é˜µ<br>è€ŒKï¼ŒVåˆ™æ˜¯å°†keysè¾“å…¥è¿›ä¸€ä¸ªèŠ‚ç‚¹æ•°ä¸ºnum_unitsçš„å‰é¦ˆç¥ç»ç½‘ç»œä¹‹åå¾—åˆ°çš„çŸ©é˜µã€‚<br>ç»“åˆæ‰€æœ‰çš„ä¿¡æ¯ï¼Œåœ¨æœºå™¨ç¿»è¯‘é¢†åŸŸå½“ä¸­ï¼ŒQ,K,Vçš„æ‰€æœ‰æ¥æºå°±æ˜¯encoderç«¯çš„è¾“å…¥Xã€‚å³å¯ä»¥çœ‹æˆQ=K=V<br>å…·ä½“è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º:</p>
<p><img src="/images/blog/2020/attention.png" alt></p>
<font color="orange">å³å°†å¥å­çš„embeddingåºåˆ—æŠ•å…¥ä¸‰ä¸ªå…¨è¿æ¥å±‚ï¼Œåˆ†åˆ«å¾—åˆ°Qï¼ŒKï¼ŒV</font>
åœ¨è¿™é‡Œä¹Ÿé¡ºä¾¿æä¸€ä¸‹muilti_headçš„æ¦‚å¿µï¼ŒMulti_head self_attentionçš„æ„æ€å°±æ˜¯é‡å¤ä»¥ä¸Šè¿‡ç¨‹å¤šæ¬¡ï¼Œè®ºæ–‡å½“ä¸­æ˜¯é‡å¤8æ¬¡ï¼Œå³8ä¸ªHeadï¼Œä½¿ç”¨å¤šå¥—ï¼ˆWQï¼ŒWKï¼ŒWVï¼‰çŸ©é˜µ(åªè¦åœ¨åˆå§‹åŒ–çš„æ—¶å€™å¤šç¨å¾®å˜ä¸€ä¸‹ï¼Œå¾ˆå®¹æ˜“è·å¾—å¤šå¥—æƒé‡çŸ©é˜µ)ã€‚è·å¾—å¤šå¥—ï¼ˆQï¼ŒKï¼ŒVï¼‰çŸ©é˜µï¼Œç„¶åè¿›è¡Œattentionè®¡ç®—æ—¶ä¾¿èƒ½è·å¾—å¤šä¸ªself_attentionçŸ©é˜µã€‚
self-attentionä¹‹åç´§æ¥ç€çš„æ­¥éª¤æ˜¯å‰é¦ˆç¥ç»ç½‘ç»œï¼Œè€Œå‰é¦ˆç¥ç»ç½‘ç»œæ¥å—çš„æ˜¯å•ä¸ªçš„çŸ©é˜µå‘é‡ï¼Œè€Œä¸æ˜¯å¤šä¸ªçŸ©é˜µï¼Œå› æ­¤éœ€è¦æŠŠè®¡ç®—å¾—åˆ°çš„å¤šä¸ªself-attentionçŸ©é˜µé‡‡ç”¨æŸç§æ–¹å¼è¿›è¡Œåˆå¹¶ã€‚å› æ­¤æ–‡ç« ä¸­ç»™å‡ºçš„æ€è·¯æ˜¯å°†è¿™å¤šä¸ªè¿æ¥åœ¨ä¸€èµ·ï¼ˆå¯èƒ½æ˜¯ç®€å•å°±æ˜¯å¥½ï¼Œå¥¥å¡å§†å‰ƒåˆ€åŸåˆ™ï¼‰å†å’Œä¸€ä¸ªçŸ©é˜µW0ç›¸ä¹˜ã€‚æ­¥éª¤å¦‚ä¸‹å›¾ï¼š

![](/images/blog/2020/multi-head.png)

ç»¼åˆä¸Šè¿°è¯´æ³•ï¼Œmulti_layer_self-attentionçš„æ•´ä½“è®¡ç®—æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º:

![](/images/blog/2020/attention-procedure.png)

self-attentionåœ¨ç¥ç»æœºå™¨ç¿»è¯‘å®é™…çš„æ“ä½œè®¾è®¡å½“ä¸­ï¼Œ***ä¸ä»…ä»…æ˜¯ç”±ä¸Šé¢self-attentionè®¡ç®—å…¬å¼é‚£èˆ¬è®¾è®¡ï¼Œå…¶ä¸­è¿˜è¦åŠ å…¥Maskæ“ä½œã€‚***
å…¶ä¸­åœ¨Encoderç«¯å’ŒDecoderç«¯éƒ½éœ€è¦ä½¿ç”¨çš„Maskæ“ä½œï¼Œç§°ä¹‹ä¸ºPADDING MASKã€‚
è€Œä»…ä»…åœ¨Decoderæ®µä½¿ç”¨çš„Maskæ“ä½œï¼Œåˆ™è¢«ç§°ä¹‹ä¸ºSequence MASKã€‚ä¸‹é¢å°†ç»“åˆä»£ç åˆ†åˆ«å¯¹å…¶è¿›è¡Œä»‹ç»ã€‚

## PADDING MASK

æˆ‘ä»¬åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼Œè‡ªç„¶è¯­è¨€æ•°æ®å¾€å¾€éƒ½æ˜¯ä»¥Batchçš„å½¢å¼è¾“å…¥è¿›çš„æ¨¡å‹ï¼Œè€Œä¸€ä¸ªbatchä¸­çš„æ¯ä¸€å¥è¯ä¸èƒ½ä¿è¯é•¿åº¦éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨PADDINGçš„æ–¹å¼å°†æ‰€æœ‰çš„å¥å­éƒ½è¡¥å…¨åˆ°æœ€é•¿çš„é•¿åº¦ï¼Œæ¯”å¦‚æ‹¿0è¿›è¡Œå¡«å……ï¼Œä½†æ˜¯æˆ‘ä»¬çŸ¥é“è¿™ç§ç”¨0å¡«å……çš„ä½ç½®çš„ä¿¡æ¯æ˜¯å®Œå…¨æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› æ­¤æˆ‘ä»¬å¸Œæœ›è¿™ä¸ªä½ç½®ä¸å‚ä¸åæœŸçš„åå‘ä¼ æ’­è¿‡ç¨‹ã€‚ä»¥æ­¤é¿å…æœ€åå½±å“æ¨¡å‹è‡ªèº«çš„æ•ˆæœï¼Œå› æ­¤æå‡ºäº†åœ¨è®­ç»ƒæ—¶å°†è¡¥å…¨çš„ä½ç½®ç»™Maskæ‰çš„åšæ³•ã€‚è€Œåœ¨Self-attentionçš„è®¡ç®—å½“ä¸­ï¼Œæˆ‘ä»¬è‡ªç„¶ä¹Ÿä¸å¸Œæœ›æœ‰æ•ˆè¯çš„æ³¨æ„åŠ›é›†ä¸­åœ¨è¿™äº›æ²¡æœ‰æ„ä¹‰çš„ä½ç½®ä¸Šï¼Œå› æ­¤ä½¿ç”¨äº†PADDING MASKçš„æ–¹å¼.
PADDING MASKåœ¨attentionçš„è®¡ç®—è¿‡ç¨‹ä¸­å¤„äºsoftmaxä¹‹å‰(å›¾1ä¸­çš„optè¡¨ç¤ºoptionalå³è¯¥å±‚å¯åŠ å¯ä¸åŠ ,è‹¥æ˜¯ä¸æƒ³ä½¿ç”¨PADDING MASKæ“ä½œ,åˆ™ç›´æ¥Softmaxå°±å®Œäº‹äº†)ï¼Œ**é€šè¿‡PADDING MASKçš„æ“ä½œï¼Œä½¿å¾—è¡¥å…¨ä½ç½®ä¸Šçš„å€¼æˆä¸ºä¸€ä¸ªéå¸¸å¤§çš„è´Ÿæ•°ï¼ˆå¯ä»¥æ˜¯è´Ÿæ— ç©·ï¼‰ï¼Œè¿™æ ·çš„è¯ï¼Œç»è¿‡Softmaxå±‚çš„æ—¶å€™ï¼Œè¿™äº›ä½ç½®ä¸Šçš„æ¦‚ç‡å°±æ˜¯0**ã€‚ä»¥æ­¤æ“ä½œå°±ç›¸å½“äºæŠŠè¡¥å…¨ä½ç½®çš„æ— ç”¨ä¿¡æ¯ç»™é®è”½æ‰äº†ï¼ˆMaskæ‰äº†ï¼‰ã€‚å…·ä½“æ“ä½œè§å¦‚ä¸‹ä»£ç ï¼ˆè¯·å’Œæ³¨é‡Šä¸€èµ·é£Ÿç”¨ï¼‰:

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">multihead_attention</span><span class="params">(queries,</span></span></span><br><span class="line"><span class="function"><span class="params">                        keys,</span></span></span><br><span class="line"><span class="function"><span class="params">                        num_units=None,</span></span></span><br><span class="line"><span class="function"><span class="params">                        num_heads=<span class="number">8</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">                        dropout_rate=<span class="number">0</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">                        is_traing=True,</span></span></span><br><span class="line"><span class="function"><span class="params">                        causality=False,</span></span></span><br><span class="line"><span class="function"><span class="params">                        scope=<span class="string">'multihead_attention'</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">                        reuse=None)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> tf.variable_scope(scope,reuse=reuse):</span><br><span class="line">        <span class="keyword">if</span> num_units <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            num_units = queries.get_shape().as_list[<span class="number">-1</span>]</span><br><span class="line">        <span class="comment"># Qï¼ŒKï¼ŒVçš„shapeå‡ä¸ºï¼ˆbatch_size, max_length, hidden_sizeï¼‰</span></span><br><span class="line">        Q = tf.layers.dense(queries,num_units,activation=tf.nn.relu)</span><br><span class="line">        K = tf.layers.dense(keys,num_units,activation=tf.nn.relu)</span><br><span class="line">        V = tf.layers.dense(keys,num_units,activation=tf.nn.relu)</span><br><span class="line">		</span><br><span class="line">		<span class="comment"># é€šè¿‡tf.splitå°†Qï¼ŒKï¼ŒæŒ‰ç…§æœ€åä¸€ç»´åˆ‡åˆ†æˆnum_headsä»½ï¼Œç„¶åæŒ‰ç¬¬ä¸€ç»´åº¦è¿›è¡Œæ‹¼æ¥ï¼Œ</span></span><br><span class="line">		<span class="comment"># ä»¥æ­¤è¾¾åˆ°â€œå¤šå¤´çš„æ•ˆæœâ€ï¼Œæ­¤æ—¶çš„Q_å°±ç›¸å½“äºnum_headsä¸ªQçš„æ‹¼æ¥ï¼Œå…¶ä½™åŒç†ã€‚</span></span><br><span class="line">        Q_ = tf.concat(tf.split(Q,num_heads,axis=<span class="number">2</span>),axis=<span class="number">0</span>)</span><br><span class="line">        K_ = tf.concat(tf.split(K,num_heads,axis=<span class="number">2</span>),axis=<span class="number">0</span>)</span><br><span class="line">        V_ = tf.concat(tf.split(V,num_heads,axis=<span class="number">2</span>),axis=<span class="number">0</span>)</span><br><span class="line">    	<span class="comment"># è¿™ä¾¿æ˜¯å›¾2å…¬å¼ä¸­SoftMaxéƒ¨åˆ†çš„å†…å®¹</span></span><br><span class="line">        A = tf.transpose(K_,[<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>])</span><br><span class="line">        outputs = tf.matmul(Q_,tf.transpose(K_,[<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>]))</span><br><span class="line">        outputs = outputs / (K_.get_shape().as_list()[<span class="number">-1</span>]**<span class="number">0.5</span>)</span><br><span class="line">		</span><br><span class="line">		<span class="comment"># ä»¥ä¸‹æ˜¯PADDING MASKçš„è¿‡ç¨‹ ä¸ç®¡æ˜¯åœ¨Encoderçš„è®¡ç®—ä¸­è¿˜æ˜¯Decoderçš„è®¡ç®—å½“ä¸­éƒ½ä¼šä½¿ç”¨ã€‚</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment"># è¿™ä¸ªæ˜¯æ•´ä¸ªPADDING MASKçš„æ ¸å¿ƒçŸ¥è¯†ç‚¹,å½“è¾“å…¥çš„è‡ªç„¶è¯­è¨€å¥å­è½¬æ¢æˆembeddingå‘é‡çš„æ—¶å€™.</span></span><br><span class="line">		<span class="comment"># å°†ç”¨0å¡«å……çš„ä½ç½®(PADDING)è¿›è¡Œembeddingçš„æ—¶å€™å…¨éƒ¨ä½¿ç”¨0æ¥ä»£æ›¿:</span></span><br><span class="line">		<span class="comment"># ä¸¾ä¸ªä¾‹å­:è‹¥ä¸€å¥è‡ªç„¶è¯­è¨€ç”¨0å¡«å……ä¹‹åçš„è¡¨ç¤ºæ–¹å¼ä¸º[1,2,0,0],è‹¥embedding_sizeé€‰æ‹©ä¸º2</span></span><br><span class="line">		<span class="comment"># vocab_sizeä¸º3.æˆ‘ä»¬çš„lookup_tableåˆ™åˆå§‹åŒ–ä¸ºå¦‚ä¸‹çš„ä¸€ä¸ª3*3çš„çŸ©é˜µ(ç¬¬ä¸€è¡Œå¿…é¡»å…¨éƒ¨ä¸º0):</span></span><br><span class="line">		<span class="comment"># [[0,0,0],</span></span><br><span class="line">		<span class="comment"># [-0.12,0.21,0.32],</span></span><br><span class="line">		<span class="comment"># [0.14,0.24,-0.32]]</span></span><br><span class="line">		<span class="comment"># é‚£ä¹ˆç»è¿‡tf.nn.embedding_lookup()ä¹‹å åŸè‡ªç„¶è¯­è¨€å¥å­å°±è¢«embeddingå˜æˆäº†å¦‚ä¸‹å½¢å¼	</span></span><br><span class="line">		<span class="comment"># [1,2,0,0]-&gt;[[-0.12,0.21,0.32],</span></span><br><span class="line">		<span class="comment"># [0.14,0.24,-0.32],</span></span><br><span class="line">		<span class="comment"># [0,0,0],</span></span><br><span class="line">		<span class="comment"># [0,0,0]]</span></span><br><span class="line">		<span class="comment"># è¿™æ ·çš„è¯,é€šè¿‡å¦‚ä¸‹çš„è¿™å‡ æ­¥çš„æ“ä½œ,ä¾¿èƒ½å°†ä¸key_masksä¸º0çš„ä½ç½®(å³å¡«å……çš„ä½ç½®)ä¸€æ ·çš„outputçš„ä½ç½®å˜æˆä¸€ä¸ªç‰¹åˆ«å°çš„ä¸€ä¸ªè´Ÿæ•°.</span></span><br><span class="line">		<span class="comment"># è¿™æ ·,ç»è¿‡åæœŸçš„Softmaxçš„æ—¶å€™,ä¾¿èƒ½å°†è¯¥å¡«å……ä½ç½®çš„è¾“å‡ºå˜æˆ0,ä»¥æ­¤æ¥é˜²æ­¢å› ä¸ºå¡«å……ä½ç½®çš„æ— ç”¨ä¿¡æ¯å½±å“æ¨¡å‹çš„æ•ˆæœ</span></span><br><span class="line">		<span class="comment"># å¦‚æœåœ¨æœ€å¼€å§‹çš„embeddingçš„åŒæ—¶æ²¡æœ‰ä½¿ç”¨0å…ƒç´ è¿›è¡Œé®ç›–(å³lookup_tableçŸ©é˜µç¬¬ä¸€è¡Œä¸ä¸º0,è€Œæ˜¯ä¸€äº›åˆ«çš„éšæœºæ•°),é‚£ä¹ˆPADDING_MASKå°†ä¸èµ·ä½œç”¨.</span></span><br><span class="line">        key_masks = tf.sign(tf.abs(tf.reduce_sum(keys, axis=<span class="number">-1</span>)))</span><br><span class="line">      	</span><br><span class="line">      	<span class="comment"># æ¥ä¸‹æ¥çš„ä¸¤æ­¥æ“ä½œåªæ˜¯ä¸ºäº†èƒ½å¤Ÿè®©key_masksçš„ç»´åº¦èƒ½å¤Ÿå’ŒoutputsåŒ¹é…</span></span><br><span class="line">        key_masks = tf.tile(key_masks, [num_heads, <span class="number">1</span>])</span><br><span class="line">        key_masks = tf.tile(tf.expand_dims(key_masks, <span class="number">1</span>), [<span class="number">1</span>, tf.shape(queries)[<span class="number">1</span>], <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">		<span class="comment"># paddingsé‡Œé¢çš„å€¼éƒ½æ˜¯éå¸¸å°çš„è´Ÿæ•°ï¼Œå½“key_masksçŸ©é˜µçš„æŸä¸ªå˜é‡å’Œ0ç›¸ç­‰çš„æ—¶å€™ï¼Œå°†åŒæ ·ä½ç½®ä¸Šçš„outputsçš„å€¼å˜æˆä¸€ä¸ªç‰¹åˆ«å°çš„æ•°.</span></span><br><span class="line">        paddings = tf.ones_like(outputs)*(<span class="number">-2</span>**<span class="number">32</span>+<span class="number">1</span>)</span><br><span class="line">        outputs = tf.where(tf.equal(key_masks, <span class="number">0</span>), paddings, outputs)</span><br><span class="line">        </span><br><span class="line">        outputs = tf.nn.softmax(outputs)</span><br><span class="line">        query_masks = tf.sign(tf.abs(tf.reduce_sum(queries,axis=<span class="number">-1</span>)))</span><br><span class="line">        query_masks = tf.tile(query_masks,[num_heads,<span class="number">1</span>])</span><br><span class="line">        query_masks = tf.tile(tf.expand_dims(query_masks,<span class="number">-1</span>),[<span class="number">1</span>,<span class="number">1</span>,tf.shape(keys)[<span class="number">1</span>]])</span><br><span class="line">        outputs *= query_masks</span><br></pre></td></tr></table></figure>

åœ¨è¿›è¡Œsoftmaxä¹‹å,æºç å½“ä¸­åˆåŠ å…¥äº†ä¸€ä¸ªquery_mask.*åŸå› åœ¨äºè‹¥ä¸æ˜¯self-attentionçš„æƒ…å†µä¸‹,queryå’Œkeyçš„ç¬¬äºŒç»´å¯èƒ½ä¸åŒ(ä¸¤è€…å¥å­é•¿åº¦ä¸åŒ)å¯èƒ½ä¼šå‡ºç°ä¸€ä¸ªå¡«å……,ä¸€ä¸ªæ²¡æœ‰å¡«å……çš„çŠ¶å†µå‡ºç°,å› æ­¤éœ€è¦åˆ†æƒ…å†µè®¨è®º.*ä½†æ˜¯keys_maskå’Œquery_maskéƒ½æ˜¯ä¸€æ ·çš„ç›®çš„.

## Sequence MASK

**Sequence Maskåªåœ¨Decoderç«¯è¿›è¡Œ**,ç›®çš„æ˜¯ä¸ºäº†ä½¿å¾—decoderä¸èƒ½çœ‹è§æœªæ¥çš„ä¿¡æ¯.ä¹Ÿå°±æ˜¯å¯¹äºä¸€ä¸ªåºåˆ—ä¸­çš„ç¬¬iä¸ªtoken,è§£ç çš„æ—¶å€™åªèƒ½å¤Ÿä¾é iæ—¶åˆ»ä¹‹å‰(åŒ…æ‹¬i)çš„è¾“å‡º,è€Œä¸èƒ½ä¾èµ–äºiæ—¶åˆ»ä¹‹åçš„è¾“å‡º.å› æ­¤æˆ‘ä»¬è¦é‡‡å–ä¸€ä¸ªé®ç›–çš„æ–¹æ³•(Mask)ä½¿å¾—å…¶åœ¨è®¡ç®—self-attentionçš„æ—¶å€™åªç”¨iä¸ªæ—¶åˆ»ä¹‹å‰çš„tokenè¿›è¡Œè®¡ç®—,å› ä¸ºDecoderæ˜¯ç”¨æ¥åšé¢„æµ‹çš„,è€Œåœ¨è®­ç»ƒé¢„æµ‹èƒ½åŠ›çš„æ—¶å€™,æˆ‘ä»¬ä¸èƒ½å¤Ÿ"æå‰çœ‹ç­”æ¡ˆ",å› æ­¤è¦å°†æœªæ¥çš„ä¿¡æ¯ç»™é®ç›–ä½.æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤º:

![](/images/blog/2020/æˆ‘çˆ±ä¸­å›½.png)

å›¾ä¸­ç°è‰²éƒ¨åˆ†å³ä¸ºmaskçš„éƒ¨åˆ†.<font color="orange">**å†æ¬¡å¼ºè°ƒ,sequence mask æ“ä½œåªå‘ç”Ÿåœ¨decoderé˜¶æ®µã€‚**</font>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">         <span class="comment"># é®ç›–çš„æ–¹æ³•å’Œä¹‹å‰çš„PADDING_MASKçš„æ“ä½œæ–¹æ³•åŸºæœ¬ä¸€è‡´,ä¸ä¸€æ ·çš„åªæ˜¯masksçŸ©é˜µä¸­çš„å…ƒç´ ä¸ä¸€æ ·,masksçŸ©é˜µæ˜¯ä¸€ä¸ª</span></span><br><span class="line"><span class="comment"># ä¸‹ä¸‰è§’çŸ©é˜µ,å³å¯¹è§’çº¿ä»¥åŠå¯¹è§’çº¿ä¸€ä¸‹æ˜¯1,å¯¹è§’çº¿ä»¥ä¸Šå…¨ä¸º0.ä¹‹ååŒæ ·å°†outputsä½ç½®å¯¹äºMasksçŸ©é˜µä¸º0çš„ä½ç½®ä¸Šçš„å…ƒç´ ç»Ÿç»Ÿ</span></span><br><span class="line"><span class="comment"># æ›¿æ¢æˆä¸€ä¸ªå¾ˆå°çš„è´Ÿæ•°,è¿™æ ·ä¹‹ååœ¨ç»è¿‡softmaxçš„æ—¶å€™å°±èƒ½å¤Ÿå°†maskéƒ¨åˆ†çš„self-attentionçš„è®¡ç®—å€¼å˜æˆ0.ä»¥æ­¤æ¥è¾¾åˆ°é®ç›–æœªæ¥ä¿¡æ¯çš„ç›®çš„</span></span><br><span class="line">         diag_vals = tf.ones_like(outputs[<span class="number">0</span>, :, :])</span><br><span class="line">         tril = tf.linalg.LinearOperatorLowerTriangular(diag_vals).to_dense()</span><br><span class="line">         masks = tf.tile(tf.expand_dims(tril, <span class="number">0</span>), [tf.shape(outputs)[<span class="number">0</span>], <span class="number">1</span>, <span class="number">1</span>])</span><br><span class="line">         paddings = tf.ones_like(masks)*(<span class="number">-2</span>**<span class="number">32</span>+<span class="number">1</span>)</span><br><span class="line">         outputs = tf.where(tf.equal(masks, <span class="number">0</span>), paddings, outputs)</span><br></pre></td></tr></table></figure>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><blockquote>
<p><a href="https://www.codenong.com/cs106541686/" target="_blank" rel="noopener">æ³¨æ„åŠ›æœºåˆ¶çš„åŸºæœ¬æ€æƒ³å’Œå®ç°åŸç†</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Algorithms</category>
      </categories>
      <tags>
        <tag>Attention</tag>
        <tag>æ³¨æ„åŠ›</tag>
        <tag>Self-Attention</tag>
      </tags>
  </entry>
  <entry>
    <title>ridge regression å²­å›å½’</title>
    <url>/2020/12/30/ridge-regression-%E5%B2%AD%E5%9B%9E%E5%BD%92/</url>
    <content><![CDATA[<p>å·²ç»æœ‰å¤šæ¬¡çœ‹åˆ°å²­å›å½’ (ridge regression) è¿™ä¸ªåè¯äº†ï¼Œå› æ­¤ï¼Œåœ¨è¿™é‡Œå¯¹è¿™ä¸ªæ¦‚å¿µè¿›è¡Œä¸€ä¸ªæ›´æ·±å…¥çš„å­¦ä¹ ã€‚</p>
<h1 id="ä¸€ã€ä¸€èˆ¬çº¿æ€§å›å½’é‡åˆ°çš„é—®é¢˜"><a href="#ä¸€ã€ä¸€èˆ¬çº¿æ€§å›å½’é‡åˆ°çš„é—®é¢˜" class="headerlink" title="ä¸€ã€ä¸€èˆ¬çº¿æ€§å›å½’é‡åˆ°çš„é—®é¢˜"></a>ä¸€ã€ä¸€èˆ¬çº¿æ€§å›å½’é‡åˆ°çš„é—®é¢˜</h1><p> åœ¨å¤„ç†å¤æ‚çš„æ•°æ®çš„å›å½’é—®é¢˜æ—¶ï¼Œæ™®é€šçš„çº¿æ€§å›å½’ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œä¸»è¦è¡¨ç°åœ¨ï¼š</p>
<ul>
<li>é¢„æµ‹ç²¾åº¦ï¼šè¿™é‡Œè¦å¤„ç†å¥½è¿™æ ·ä¸€å¯¹ä¸ºé¢˜ï¼Œå³æ ·æœ¬çš„æ•°é‡<img src="http://latex.codecogs.com/gif.latex?n" alt="n">å’Œç‰¹å¾çš„æ•°é‡<img src="http://latex.codecogs.com/gif.latex?p" alt="p"><ul>
<li><img src="http://latex.codecogs.com/gif.latex?n\gg&space;p" alt="n\gg p">æ—¶ï¼Œæœ€å°äºŒä¹˜å›å½’ä¼šæœ‰è¾ƒå°çš„æ–¹å·®</li>
<li><img src="http://latex.codecogs.com/gif.latex?n\approx&space;p" alt="n\approx p">æ—¶ï¼Œå®¹æ˜“äº§ç”Ÿè¿‡æ‹Ÿåˆ</li>
<li><img src="http://latex.codecogs.com/gif.latex?n%3C&space;p" alt="n&lt; p">æ—¶ï¼Œæœ€å°äºŒä¹˜å›å½’å¾—ä¸åˆ°æœ‰æ„ä¹‰çš„ç»“æœ</li>
</ul>
</li>
<li>æ¨¡å‹çš„è§£é‡Šèƒ½åŠ›ï¼šå¦‚æœæ¨¡å‹ä¸­çš„ç‰¹å¾ä¹‹é—´æœ‰ç›¸äº’å…³ç³»ï¼Œè¿™æ ·ä¼šå¢åŠ æ¨¡å‹çš„å¤æ‚ç¨‹åº¦ï¼Œå¹¶ä¸”å¯¹æ•´ä¸ªæ¨¡å‹çš„è§£é‡Šèƒ½åŠ›å¹¶æ²¡æœ‰æé«˜ï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬å°±è¦è¿›è¡Œç‰¹å¾é€‰æ‹©ã€‚</li>
</ul>
<p>ä»¥ä¸Šçš„è¿™äº›é—®é¢˜ï¼Œä¸»è¦å°±æ˜¯è¡¨ç°åœ¨æ¨¡å‹çš„æ–¹å·®å’Œåå·®é—®é¢˜ä¸Šï¼Œè¿™æ ·çš„å…³ç³»å¯ä»¥é€šè¿‡ä¸‹å›¾è¯´æ˜ï¼š</p>
<p><img src="/images/blog/2020/regression.jpg" alt></p>
<p>æ–¹å·®æŒ‡çš„æ˜¯æ¨¡å‹ä¹‹é—´çš„å·®å¼‚ï¼Œè€Œåå·®æŒ‡çš„æ˜¯æ¨¡å‹é¢„æµ‹å€¼å’Œæ•°æ®ä¹‹é—´çš„å·®å¼‚ã€‚æˆ‘ä»¬éœ€è¦æ‰¾åˆ°æ–¹å·®å’Œåå·®çš„æŠ˜ä¸­ã€‚</p>
<a id="more"></a>
<h1 id="äºŒã€å²­å›å½’çš„æ¦‚å¿µ"><a href="#äºŒã€å²­å›å½’çš„æ¦‚å¿µ" class="headerlink" title="äºŒã€å²­å›å½’çš„æ¦‚å¿µ"></a>äºŒã€å²­å›å½’çš„æ¦‚å¿µ</h1><p>â€‹    åœ¨è¿›è¡Œç‰¹å¾é€‰æ‹©æ—¶ï¼Œä¸€èˆ¬æœ‰ä¸‰ç§æ–¹å¼ï¼š</p>
<ul>
<li>å­é›†é€‰æ‹©</li>
<li>æ”¶ç¼©æ–¹å¼(Shrinkage method)ï¼Œåˆç§°ä¸ºæ­£åˆ™åŒ–(Regularization)ã€‚ä¸»è¦åŒ…æ‹¬å²­å›å½’ä¸ªlassoå›å½’ã€‚</li>
<li>ç»´æ•°ç¼©å‡</li>
</ul>
<p>â€‹    <font color="orange">å²­å›å½’(Ridge Regression)æ˜¯åœ¨å¹³æ–¹è¯¯å·®çš„åŸºç¡€ä¸Šå¢åŠ æ­£åˆ™é¡¹</font></p>
<script type="math/tex; mode=display">
\sum_{i=1}^n (y_i - \sum_{j=0}^p w_jx_{ij})^2 + \lambda \sum_{j=0}^p w_j^2  \quad \lambda  > 0</script><p>é€šè¿‡ç¡®å®š<img src="http://latex.codecogs.com/gif.latex?\lambda" alt="\lambda">çš„å€¼å¯ä»¥ä½¿å¾—åœ¨æ–¹å·®å’Œåå·®ä¹‹é—´è¾¾åˆ°å¹³è¡¡ï¼šéšç€<img src="http://latex.codecogs.com/gif.latex?\lambda" alt="\lambda">çš„å¢å¤§ï¼Œæ¨¡å‹æ–¹å·®å‡å°è€Œåå·®å¢å¤§ã€‚</p>
<p>å¯¹$w$æ±‚å¯¼ï¼Œç»“æœä¸ºï¼š</p>
<script type="math/tex; mode=display">
2X^T(Y-XW) - 2\lambda W</script><p>ä»¤å…¶ä¸º0ï¼Œå¯æ±‚å¾—$w$çš„å€¼ï¼š</p>
<script type="math/tex; mode=display">
\hat w = (X^TX + \lambda I)^{-1}X^TY</script>]]></content>
      <categories>
        <category>Algorithms</category>
      </categories>
      <tags>
        <tag>regression</tag>
        <tag>å›å½’</tag>
        <tag>ridge regression</tag>
      </tags>
  </entry>
  <entry>
    <title>OpenIEåˆæ¢</title>
    <url>/2020/12/29/OpenIE%E5%88%9D%E6%8E%A2/</url>
    <content><![CDATA[<p>å¼€æ”¾å…³ç³»æŠ½å–ï¼ŒæŒ‡æ²¡æœ‰ç»™å®šé¢„å®šä¹‰çš„å…³ç³»æœ¬ä½“ (ontology)ï¼Œä»æ–‡æœ¬æˆ–ç½‘é¡µä¸Šç›´æ¥æŠ½å–phrasesï¼Œæ˜¯ä¸€ç±»æ— ç›‘ç£çš„ä»»åŠ¡ã€‚è¿™ç¯‡åšå®¢å¯¹å¼€æ”¾å…³ç³»æŠ½å–è¿›è¡Œäº†ä¸€ä¸ªåˆæ­¥çš„äº†è§£ã€‚</p>
<h1 id="OpenIE"><a href="#OpenIE" class="headerlink" title="OpenIE"></a>OpenIE</h1><h2 id="ReVerb"><a href="#ReVerb" class="headerlink" title="ReVerb"></a><a href="http://reverb.cs.washington.edu/" target="_blank" rel="noopener">ReVerb</a></h2><p>æ˜¯OpenIEçš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œéƒ½æ˜¯ä¸»è¦ç”±åç››é¡¿å¤§å­¦å¼€å‘ç ”åˆ¶çš„ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>OpenIEä¸»è¦èƒ½å¤ŸæŠ½å–ä¸€äº›å¤´å°¾å®ä½“ä¹‹é—´è·ç¦»è¾ƒçŸ­çš„å…³ç³»çŸ­è¯­ï¼Œä¸»è¦æ˜¯åˆ©ç”¨è¯­æ³•ä¿¡æ¯å’Œä¾èµ–ä¿¡æ¯ã€‚</p>
<p><img src="/images/blog/2020/openie.png" alt></p>
<p><strong>å¯ä»¥å€Ÿé‰´å…¶æ–¹æ³•ï¼Œå¹¶ä½œä¸ºèµ„æºåŠ ä»¥åˆ©ç”¨</strong>ã€‚</p>
<a id="more"></a>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><blockquote>
<p>æ–¯å¦ç¦OpenIEï¼š</p>
<p><a href="https://stanfordnlp.github.io/CoreNLP/openie.html" target="_blank" rel="noopener">https://stanfordnlp.github.io/CoreNLP/openie.html</a></p>
<p><a href="https://nlp.stanford.edu/software/openie.html" target="_blank" rel="noopener">https://nlp.stanford.edu/software/openie.html</a></p>
<p>åç››é¡¿å¤§å­¦OpenIE:</p>
<p><a href="https://github.com/allenai/openie-standalone" target="_blank" rel="noopener">https://github.com/allenai/openie-standalone</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
      </categories>
      <tags>
        <tag>NLP</tag>
        <tag>Relation Extraction</tag>
        <tag>OpenIE</tag>
        <tag>Information Extraction</tag>
        <tag>RE</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonè°ƒç”¨.shè„šæœ¬</title>
    <url>/2020/12/28/python%E8%B0%83%E7%94%A8-sh%E8%84%9A%E6%9C%AC/</url>
    <content><![CDATA[<p>åœ¨ä½¿ç”¨æœåŠ¡å™¨è·‘ç¨‹åºæ—¶ï¼Œä¸ºäº†å……åˆ†åˆ©ç”¨æœåŠ¡å™¨æ˜¾å¡çš„æ—¶é—´ï¼Œå¸Œæœ›æœºå™¨å¯ä»¥24å°æ—¶è¿è¡Œï¼Œå› æ­¤éœ€è¦ç”¨pythonè‡ªåŠ¨çš„æ‰§è¡Œä¸€äº›è¿›ç¨‹ï¼Œæ¥è°ƒå‚~</p>
<h1 id="os-system"><a href="#os-system" class="headerlink" title="os.system"></a>os.system</h1><p>å¯ä»¥ä½¿ç”¨os.system()æ‰§è¡Œbashå‘½ä»¤ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">print(os.system(<span class="string">"touch a.txt"</span>))</span><br></pre></td></tr></table></figure>
<p>ä¼šè¿”å›ä¸€ä¸ª0ï¼Œè¡¨ç¤ºæ‰§è¡ŒæˆåŠŸäº†ï¼Œåœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„a.txtæ–‡ä»¶</p>
<h1 id="pythonè„šæœ¬"><a href="#pythonè„šæœ¬" class="headerlink" title="pythonè„šæœ¬"></a>pythonè„šæœ¬</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">r1 = os.system(</span><br><span class="line">    <span class="string">"python -u run.py --description='NYT-H training with bert on sentence-level' --task_name='sent' "</span></span><br><span class="line">    <span class="string">"--model_name='sent_bert' --data_dir='./data/NYT-H/' --eval_model='best' --embedding_path='../Glove/glove.6B.50d.txt' "</span></span><br><span class="line">    <span class="string">"--overwrite_output_dir --output_dir='outputs/sent_bert_200' --seed=77 --embedding_dim=50 --main_device='cuda:0' "</span></span><br><span class="line">    <span class="string">"--device_ids='[0]' --epoch=1 --batch_size=16 --dropout_rate=0.5 --lr=5e-5 --max_len=200 --pos_dis=75 --pos_dim=5 "</span></span><br><span class="line">    <span class="string">"--save_best_model --do_eval --do_train --select_score='non_na_macro_f1' --tb_logging_step=1000 --encoder=bert "</span></span><br><span class="line">    <span class="string">"--pretrain=../BERT/bert-base-cased-nyt --split --threshold=0.9"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">r2 = os.system(</span><br><span class="line">    <span class="string">"python -u run.py --description='NYT-H training with bert on sentence-level' --task_name='sent' "</span></span><br><span class="line">    <span class="string">"--model_name='sent_bert' --data_dir='./data/NYT-H/' --eval_model='best' --embedding_path='../Glove/glove.6B.50d.txt' "</span></span><br><span class="line">    <span class="string">"--overwrite_output_dir --output_dir='outputs/sent_bert_200_sh_try' --seed=77 --embedding_dim=50 --main_device='cuda:0' "</span></span><br><span class="line">    <span class="string">"--device_ids='[0]' --epoch=10 --batch_size=16 --dropout_rate=0.5 --lr=5e-5 --max_len=200 --pos_dis=75 --pos_dim=5 "</span></span><br><span class="line">    <span class="string">"--save_best_model --do_eval --do_train --select_score='non_na_macro_f1' --tb_logging_step=1000 --encoder=bert "</span></span><br><span class="line">    <span class="string">"--pretrain=../BERT/bert-base-cased-nyt"</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªç¨‹åºæ‰§è¡Œå®Œä¹‹åï¼Œä¼šç´§æ¥ç€æ‰§è¡Œç¬¬äºŒä¸ªç¨‹åºã€‚<strong>å¦‚æœç¬¬ä¸€ä¸ªç¨‹åºå› ä¸ºå¼‚å¸¸é€€å‡ºäº†ï¼Œä¹Ÿä¸ä¼šå½±å“ç¬¬äºŒä¸ªç¨‹åºçš„æ‰§è¡Œ~</strong>ï¼Œå®Œç¾ğŸ‰ğŸ‰ğŸ‰</p>
]]></content>
      <categories>
        <category>Others</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>bash</tag>
        <tag>python</tag>
        <tag>Linux</tag>
        <tag>.sh</tag>
      </tags>
  </entry>
  <entry>
    <title>å¯¹NYTæ•°æ®é›†äºŒåˆ†ç±»</title>
    <url>/2020/12/27/%E5%AF%B9NYT%E6%95%B0%E6%8D%AE%E9%9B%86%E4%BA%8C%E5%88%86%E7%B1%BB/</url>
    <content><![CDATA[<p>åœ¨æœ€è¿‘çš„å®éªŒä¸­ï¼Œè€ƒè™‘åˆ°è¿œç¨‹ç›‘ç£æ•°æ®é›†NYTçš„å»å™ªé—®é¢˜ï¼Œè®¾æƒ³èƒ½å¦åˆ©ç”¨é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹çš„å¼ºå¤§èƒ½åŠ›ï¼Œå¯¹æ•°æ®é›†çš„å™ªéŸ³è¿›è¡Œä¸€ä¸ªé¢„å…ˆçš„åˆ’åˆ†ï¼Œè¿›è¡ŒäºŒåˆ†ç±»çš„å°è¯•ã€‚</p>
<h1 id="å®éªŒè®¾ç½®"><a href="#å®éªŒè®¾ç½®" class="headerlink" title="å®éªŒè®¾ç½®"></a>å®éªŒè®¾ç½®</h1><p>ä»¥56ç§å…³ç³»ä½œä¸ºPOSï¼Œä»¥NAå…³ç³»ä½œä¸ºNEGï¼Œè¿›è¡Œ0-1çš„äºŒåˆ†ç±»å­¦ä¹ ï¼Œç¼–ç å™¨é‡‡ç”¨BERTï¼Œç”±äºç±»åˆ«ä¸å¹³è¡¡ï¼Œå¯¹è´Ÿæ ·æœ¬è¿›è¡Œé‡‡æ ·ï¼Œä¸è¶…è¿‡æ­£æ ·æœ¬çš„ç±»åˆ«æ•°ã€‚ç”±äºè®­ç»ƒæ•°æ®è¿‡å¤šï¼Œè®­ç»ƒæ—¶é•¿å¤ªä¹…ï¼Œäºæ˜¯ï¼Œå¯¹æ­£è´Ÿæ ·æœ¬å„å–10000ä¸ªï¼Œç„¶åè¿›è¡Œå®éªŒã€‚</p>
<h1 id="å®éªŒç»“æœ"><a href="#å®éªŒç»“æœ" class="headerlink" title="å®éªŒç»“æœ"></a>å®éªŒç»“æœ</h1><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">TRAINING: <span class="number">625</span>it [<span class="number">02</span>:<span class="number">56</span>,  <span class="number">3.54</span>it/s]</span><br><span class="line">TESTING: <span class="number">403</span>it [<span class="number">00</span>:<span class="number">37</span>, <span class="number">10.72</span>it/s]</span><br><span class="line">epoch <span class="number">0</span>, loss <span class="number">0.3108509671562363</span>, accuracy <span class="number">0.8750775915580384</span></span><br><span class="line">TRAINING: <span class="number">625</span>it [<span class="number">02</span>:<span class="number">58</span>,  <span class="number">3.50</span>it/s]</span><br><span class="line">TESTING: <span class="number">403</span>it [<span class="number">00</span>:<span class="number">37</span>, <span class="number">10.69</span>it/s]</span><br><span class="line">epoch <span class="number">1</span>, loss <span class="number">0.2790242659515024</span>, accuracy <span class="number">0.8945530726256983</span></span><br><span class="line">TRAINING: <span class="number">573</span>it [<span class="number">02</span>:<span class="number">44</span>,  <span class="number">3.53</span>it/s]</span><br><span class="line">TRAINING: <span class="number">625</span>it [<span class="number">02</span>:<span class="number">59</span>,  <span class="number">3.49</span>it/s]</span><br><span class="line">TESTING: <span class="number">403</span>it [<span class="number">00</span>:<span class="number">37</span>, <span class="number">10.69</span>it/s]</span><br><span class="line">epoch <span class="number">2</span>, loss <span class="number">0.27044483414959747</span>, accuracy <span class="number">0.9058038485412787</span></span><br><span class="line">TRAINING: <span class="number">625</span>it [<span class="number">02</span>:<span class="number">58</span>,  <span class="number">3.50</span>it/s]</span><br><span class="line">TESTING: <span class="number">403</span>it [<span class="number">00</span>:<span class="number">37</span>, <span class="number">10.72</span>it/s]</span><br><span class="line">epoch <span class="number">3</span>, loss <span class="number">0.3372199231719427</span>, accuracy <span class="number">0.8947082557417753</span></span><br><span class="line">TRAINING: <span class="number">625</span>it [<span class="number">02</span>:<span class="number">58</span>,  <span class="number">3.50</span>it/s]</span><br><span class="line">TESTING: <span class="number">403</span>it [<span class="number">00</span>:<span class="number">37</span>, <span class="number">10.67</span>it/s]</span><br><span class="line">epoch <span class="number">4</span>, loss <span class="number">0.35960243281818205</span>, accuracy <span class="number">0.8975791433891993</span></span><br><span class="line">TRAINING: <span class="number">625</span>it [<span class="number">02</span>:<span class="number">58</span>,  <span class="number">3.50</span>it/s]</span><br><span class="line">TESTING: <span class="number">403</span>it [<span class="number">00</span>:<span class="number">37</span>, <span class="number">10.68</span>it/s]</span><br><span class="line">epoch <span class="number">5</span>, loss <span class="number">0.3635644751425287</span>, accuracy <span class="number">0.8998292985723153</span></span><br><span class="line">TRAINING: <span class="number">625</span>it [<span class="number">02</span>:<span class="number">58</span>,  <span class="number">3.51</span>it/s]</span><br><span class="line">TESTING: <span class="number">403</span>it [<span class="number">00</span>:<span class="number">37</span>, <span class="number">10.68</span>it/s]</span><br><span class="line">epoch <span class="number">6</span>, loss <span class="number">0.43025128015637093</span>, accuracy <span class="number">0.9021570453134699</span></span><br><span class="line">TRAINING: <span class="number">625</span>it [<span class="number">02</span>:<span class="number">58</span>,  <span class="number">3.50</span>it/s]</span><br><span class="line">TESTING: <span class="number">403</span>it [<span class="number">00</span>:<span class="number">37</span>, <span class="number">10.68</span>it/s]</span><br><span class="line">epoch <span class="number">7</span>, loss <span class="number">0.5122146993227276</span>, accuracy <span class="number">0.8918373680943513</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåˆ†ç±»å‡†ç¡®ç‡ï¼ˆaccuracyï¼‰åœ¨90%å·¦å³ï¼Œå…·ä½“åº”ç”¨åˆ°å®éªŒä¸­æ•ˆæœä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿè¿˜æœ‰å¾…å®éªŒ~</p>
<h2 id="å…¨é‡æ•°æ®"><a href="#å…¨é‡æ•°æ®" class="headerlink" title="å…¨é‡æ•°æ®"></a>å…¨é‡æ•°æ®</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">epoch <span class="number">0</span>, loss <span class="number">0.19445358777635965</span>, accuracy <span class="number">0.9276846679081316</span></span><br><span class="line">BIMODEL.pkl saved, best accuracy <span class="number">0.9276846679081316</span></span><br><span class="line">TRAINING: <span class="number">8560</span>it [<span class="number">40</span>:<span class="number">00</span>,  <span class="number">3.57</span>it/s]</span><br><span class="line">TESTING: <span class="number">403</span>it [<span class="number">00</span>:<span class="number">36</span>, <span class="number">11.01</span>it/s]</span><br><span class="line">epoch <span class="number">1</span>, loss <span class="number">0.2355663737937318</span>, accuracy <span class="number">0.9197703289882061</span></span><br><span class="line">TRAINING: <span class="number">8560</span>it [<span class="number">39</span>:<span class="number">57</span>,  <span class="number">3.57</span>it/s]</span><br><span class="line">TESTING: <span class="number">403</span>it [<span class="number">00</span>:<span class="number">36</span>, <span class="number">11.00</span>it/s]</span><br><span class="line">epoch <span class="number">2</span>, loss <span class="number">0.29970387574681023</span>, accuracy <span class="number">0.914804469273743</span></span><br><span class="line">TRAINING: <span class="number">8560</span>it [<span class="number">40</span>:<span class="number">02</span>,  <span class="number">3.56</span>it/s]</span><br><span class="line">TESTING: <span class="number">403</span>it [<span class="number">00</span>:<span class="number">36</span>, <span class="number">11.00</span>it/s]</span><br><span class="line">epoch <span class="number">3</span>, loss <span class="number">0.2967500277536646</span>, accuracy <span class="number">0.9183736809435133</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå‡†ç¡®ç‡å¯ä»¥æ¥è¿‘93%ï¼ŒæŒºä¸é”™çš„~</p>
]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
        <category>Distant Supervision</category>
      </categories>
      <tags>
        <tag>pytorch</tag>
        <tag>Relation Extraction</tag>
        <tag>NYT</tag>
        <tag>Distant Supervision</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒåˆ†ç±»æŸå¤±</title>
    <url>/2020/12/27/%E4%BA%8C%E5%88%86%E7%B1%BB%E6%8D%9F%E5%A4%B1/</url>
    <content><![CDATA[<p>åœ¨ç”¨pytorchè¿›è¡ŒäºŒåˆ†ç±»æ—¶ï¼Œæœ€åç½‘ç»œçš„è¾“å‡ºç»è¿‡sigmoid()å‡½æ•°ï¼Œå¾—åˆ°å½¢å¦‚(batch, )çš„tensorï¼Œè¯¥ä½¿ç”¨ä»€ä¹ˆæŸå¤±å‡½æ•°å‘¢ï¼Ÿ</p>
<h1 id="BCELoss"><a href="#BCELoss" class="headerlink" title="BCELoss"></a>BCELoss</h1><p>Creates a criterion that measures the Binary Cross Entropy between the target and the output:</p>
<blockquote>
<p>Input: (N, *)</p>
<p>Output: (N, *)</p>
</blockquote>
<p>å¯ä»¥ç”¨äºæŒ‡å¯¼äºŒåˆ†ç±»</p>
<h1 id="L1Loss"><a href="#L1Loss" class="headerlink" title="L1Loss"></a>L1Loss</h1><p>Creates a criterion that measures the mean absolute error (MAE) between each element in the input x<em>x</em> and target y<em>y</em>.</p>
<blockquote>
<p>Input: (N, *)</p>
<p>Output: (N, *)</p>
</blockquote>
<p>çœ‹èµ·æ¥ä¹Ÿå¯ä»¥</p>
<h1 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h1><p>ä¸ªäººç†è§£æ˜¯ï¼Œä¸€ä¸ªæ˜¯å»ºæ¨¡ä¸ºåˆ†ç±»é—®é¢˜ï¼Œä¸€ä¸ªæ˜¯å»ºæ¨¡ä¸ºå›å½’é—®é¢˜ã€‚çœ‹ä»»åŠ¡æ›´é€‚åˆå“ªä¸€ä¸ªï¼Œå°±é‡‡ç”¨å“ªä¸€ä¸ªå°±å¯ä»¥ã€‚</p>
]]></content>
      <categories>
        <category>Neural Networks</category>
      </categories>
      <tags>
        <tag>pytorch</tag>
        <tag>BCELoss</tag>
        <tag>L1Loss</tag>
      </tags>
  </entry>
  <entry>
    <title>pytorchå¸¸ç”¨ä»£ç æ¡†æ¶</title>
    <url>/2020/12/27/pytorch%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E6%A1%86%E6%9E%B6/</url>
    <content><![CDATA[<p>åœ¨ç”¨pytorchåšè®­ç»ƒçš„æ—¶å€™ï¼Œæ€»æ˜¯ä¼šé‡å¤å†™ä¸€äº›ä»£ç ï¼Œæ¯”å¦‚æ•°æ®åŠ è½½ã€è®­ç»ƒè¿‡ç¨‹ç­‰ï¼Œä¸ºäº†é¿å…é‡å¤é€ è½®å­ï¼ŒæŠŠä¹‹å‰ä¸€ä¸ªäºŒåˆ†ç±»çš„é¡¹ç›®æ”¾åœ¨è¿™é‡Œï¼Œå°†æ¥æƒ³è¦ç”¨çš„æ—¶å€™ç›´æ¥å–ï¼Œé¿å…é‡å¤åŠ³åŠ¨ğŸ‡ğŸ¨ğŸƒ</p>
<h1 id="helper-py"><a href="#helper-py" class="headerlink" title="helper.py"></a>helper.py</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> Dataset, DataLoader</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> BertTokenizer</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BISET</span><span class="params">(Dataset)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, file, config)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.data = self._get_data_(file)</span><br><span class="line">        self.tokenizer = BertTokenizer.from_pretrained(config.pretrain)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, item)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.data[item]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> len(self.data)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_get_data_</span><span class="params">(file)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> json.load(open(file, encoding=<span class="string">'utf-8'</span>))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_generate_batch_</span><span class="params">(self, data)</span>:</span></span><br><span class="line">        token2ids, masks, labels = [], [], []</span><br><span class="line">        <span class="keyword">for</span> record <span class="keyword">in</span> data:</span><br><span class="line">            id = self.tokenizer.convert_tokens_to_ids(self.tokenizer.tokenize(record[<span class="string">'text'</span>]))</span><br><span class="line">            h_id = self.tokenizer.convert_tokens_to_ids(self.tokenizer.tokenize(record[<span class="string">'h'</span>][<span class="string">'name'</span>]))</span><br><span class="line">            t_id = self.tokenizer.convert_tokens_to_ids(self.tokenizer.tokenize(record[<span class="string">'t'</span>][<span class="string">'name'</span>]))</span><br><span class="line">            <span class="comment"># [CLS] + head + [unused6] + tail + [unused7] + sentence + [SEP]</span></span><br><span class="line">            representation = [<span class="number">101</span>] + h_id + [<span class="number">7</span>] + t_id + [<span class="number">8</span>] + id + [<span class="number">102</span>]</span><br><span class="line">            token2ids.append(representation)</span><br><span class="line">        max_len= min(max([len(id) <span class="keyword">for</span> id <span class="keyword">in</span> token2ids]), <span class="number">150</span>)</span><br><span class="line">        <span class="keyword">for</span> i, id <span class="keyword">in</span> enumerate(token2ids):</span><br><span class="line">            mask = ([<span class="number">1</span>] * len(id) + [<span class="number">0</span>] * max_len)[:max_len]</span><br><span class="line">            masks.append(mask)</span><br><span class="line">            token2ids[i] = (id + [<span class="number">0</span>] * max_len)[:max_len]</span><br><span class="line">            <span class="keyword">if</span> data[i][<span class="string">'relation'</span>] == <span class="string">'NA'</span>:</span><br><span class="line">                labels.append(<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                labels.append(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> torch.tensor(token2ids).cuda(), torch.tensor(masks).cuda(), torch.tensor(labels).cuda()</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="model-py"><a href="#model-py" class="headerlink" title="model.py"></a>model.py</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> BertTokenizer, BertModel</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> nn</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BI</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, config)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.bert = BertModel.from_pretrained(config.pretrain)</span><br><span class="line">        self.dense = nn.Linear(</span><br><span class="line">            in_features=<span class="number">768</span>,</span><br><span class="line">            out_features=<span class="number">1</span></span><br><span class="line">        )</span><br><span class="line">        self.non_linear = nn.Sigmoid()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, token2ids, masks)</span>:</span></span><br><span class="line">        x = self.bert(token2ids, masks)</span><br><span class="line">        x = x[<span class="number">1</span>]</span><br><span class="line">        x = self.dense(x).squeeze()</span><br><span class="line">        x = self.non_linear(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<h1 id="config-py"><a href="#config-py" class="headerlink" title="config.py"></a>config.py</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">config</span>:</span></span><br><span class="line">    train_data = <span class="string">'train.json'</span></span><br><span class="line">    test_data = <span class="string">'test.json'</span></span><br><span class="line">    pretrain = <span class="string">'../BERT/bert-base-cased-nyt'</span></span><br><span class="line">    epoch = <span class="number">5</span></span><br><span class="line">    lr = <span class="number">0.00001</span></span><br><span class="line">    threshold = <span class="number">0.5</span></span><br><span class="line">    batch_size = <span class="number">32</span></span><br></pre></td></tr></table></figure>
<h1 id="run-py"><a href="#run-py" class="headerlink" title="run.py"></a>run.py</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> config <span class="keyword">import</span> config</span><br><span class="line"><span class="keyword">from</span> helper <span class="keyword">import</span> BISET</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> DataLoader</span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"><span class="keyword">from</span> model <span class="keyword">import</span> BI</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(config)</span>:</span></span><br><span class="line">    train_set = BISET(config.train_data, config)</span><br><span class="line">    train_loader = DataLoader(train_set, shuffle=<span class="literal">True</span>, batch_size=config.batch_size, collate_fn=train_set._generate_batch_)</span><br><span class="line">    test_set = BISET(config.test_data, config)</span><br><span class="line">    test_loader = DataLoader(test_set, shuffle=<span class="literal">False</span>, batch_size=config.batch_size, collate_fn=test_set._generate_batch_)</span><br><span class="line">    model = BI(config).cuda()</span><br><span class="line">    optimizer = torch.optim.AdamW(model.parameters(), lr=config.lr, weight_decay=<span class="number">0.01</span>)</span><br><span class="line">    loss_func = nn.BCELoss()  <span class="comment"># äºŒåˆ†ç±»äº¤å‰ç†µæŸå¤±</span></span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> range(config.epoch):</span><br><span class="line">        model.train()</span><br><span class="line">        <span class="keyword">for</span> i, data <span class="keyword">in</span> tqdm(enumerate(train_loader), desc=<span class="string">'TRAINING'</span>, ncols=<span class="number">60</span>):</span><br><span class="line">            token2ids, masks, labels = data</span><br><span class="line">            logits = model(token2ids, masks)</span><br><span class="line">            loss = loss_func(logits, labels.type(dtype=torch.float))</span><br><span class="line">            loss.backward()</span><br><span class="line">            optimizer.step()</span><br><span class="line">            optimizer.zero_grad()</span><br><span class="line"></span><br><span class="line">        model.eval()</span><br><span class="line">        loss_array, preds_array, labels_array = [], [], []</span><br><span class="line">        <span class="keyword">for</span> i, data <span class="keyword">in</span> tqdm(enumerate(test_loader), desc=<span class="string">'TESTING'</span>, ncols=<span class="number">60</span>):</span><br><span class="line">            token2ids, masks, labels = data</span><br><span class="line">            logits = model(token2ids, masks)</span><br><span class="line">            loss = loss_func(logits, labels.type(dtype=torch.float))</span><br><span class="line">            preds = (logits &gt; config.threshold).type(dtype=torch.int)</span><br><span class="line">            loss_array.append(loss.item())</span><br><span class="line">            preds_array += preds.tolist()</span><br><span class="line">            labels_array += labels.tolist()</span><br><span class="line">        accuracy = np.sum(np.asarray(preds_array) == np.asarray(labels_array)) / len(labels_array)</span><br><span class="line">        print(<span class="string">f'epoch <span class="subst">&#123;epoch&#125;</span>, loss <span class="subst">&#123;np.mean(loss_array)&#125;</span>, accuracy <span class="subst">&#123;accuracy&#125;</span>'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    run(config)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Others</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>pytorch</tag>
        <tag>æ¡†æ¶</tag>
        <tag>äºŒåˆ†ç±»</tag>
        <tag>sigmoid</tag>
      </tags>
  </entry>
  <entry>
    <title>å°†GANç”¨äºDomain Adaptation</title>
    <url>/2020/12/26/%E5%B0%86GAN%E7%94%A8%E4%BA%8EDomain-Adaption/</url>
    <content><![CDATA[<h1 id="SimGAN"><a href="#SimGAN" class="headerlink" title="SimGAN"></a>SimGAN</h1><p><img src="/images/blog/2020/DCGAN/simgan.png" alt></p>
<p>ç†è§£ï¼šå°†è¾“å…¥çš„åˆæˆå›¾ç‰‡æŠ•å…¥ç”Ÿæˆå™¨ä¸­ï¼Œé¦–å…ˆç¼–ç å‹ç¼©ä¸ºå‘é‡ï¼Œç„¶åè½¬ç½®å·ç§¯ï¼Œå†å¤åŸä¸ºå›¾ç‰‡ã€‚ç„¶åç”¨åˆ¤åˆ«å™¨åŒºåˆ†å›¾åƒæ˜¯çœŸå®å›¾ç‰‡è¿˜æ˜¯åˆæˆå›¾ç‰‡ã€‚æœ€ç»ˆç›®çš„æ˜¯ä½¿åˆ¤åˆ«å™¨æ— æ³•åŒºåˆ†çœŸå®å›¾ç‰‡å’Œåˆæˆå›¾ç‰‡ã€‚</p>
<h2 id="å…³é”®ç‚¹ï¼š"><a href="#å…³é”®ç‚¹ï¼š" class="headerlink" title="å…³é”®ç‚¹ï¼š"></a>å…³é”®ç‚¹ï¼š</h2><ol>
<li>è¾“å…¥ç”Ÿæˆå™¨çš„æ˜¯åˆæˆå›¾ç‰‡ï¼Œä¸å†æ˜¯éšæœºå™ªéŸ³ï¼ˆéšå˜é‡ï¼‰</li>
<li>æ·»åŠ æŸå¤±$l_{reg} = || \phi(\widetilde{\mathrm{x}}) - \mathrm{x}||_1$ï¼Œé€åƒç´ è¯¯å·®ã€‚ä½¿ç”Ÿæˆçš„å›¾åƒä¿ç•™æ ‡æ³¨ä¿¡æ¯ã€‚</li>
</ol>
<h2 id="ç”Ÿæˆå™¨ç»“æ„"><a href="#ç”Ÿæˆå™¨ç»“æ„" class="headerlink" title="ç”Ÿæˆå™¨ç»“æ„"></a>ç”Ÿæˆå™¨ç»“æ„</h2><p>ä»¥gazeçš„å®éªŒä¸ºä¾‹ï¼Œrefinerç½‘ç»œ<img src="https://private.codecogs.com/gif.latex?R_%5Ctheta" alt="R_\theta">ä¸»ä½“æ˜¯æ®‹å·®ç»“æ„ï¼Œ4ä¸ªæ®‹å·®å—(residual block)å åŠ ï¼Œæ¯ä¸ªæ®‹å·®å—ä¸­åŒ…å«ä¸¤ä¸ªå·ç§¯å±‚ï¼Œå·ç§¯æ ¸å¤§å°3<em>3ï¼Œè¾“å‡º64ä¸ªç‰¹å¾å›¾ã€‚æœ€åçš„æ®‹å·®å—æ¥ä¸€ä¸ªå·ç§¯æ ¸å¤§å°1</em>1çš„å·ç§¯å±‚ï¼Œè¾“å‡ºä¸€å¼ ç‰¹å¾å›¾ä½œä¸ºrefined synthetic imageï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå·¦ä¾§ä¸ºè‡ªå·±ç”»çš„å…·ä½“ç»“æ„å›¾ï¼Œå³ä¾§ä¸ºè®ºæ–‡ä¸­æ®‹å·®æ¨¡å—çš„ç¤ºæ„å›¾ã€‚</p>
<p>æ³¨æ„ï¼šçœ‹äº†ä¸€ä¸‹ä»£ç ï¼Œæ®‹å·®åº”è¯¥æ˜¯å’Œæ®‹å·®å—è¾“å…¥è¿›è¡Œäº†element-wiseç›¸åŠ ï¼Œå› æ­¤æœ‰ç›¸åŒçš„é€šé“æ•°ã€‚æ‰€ä»¥åœ¨æ®‹å·®æ¨¡å—å‰å¿…é¡»å°†è¾“å…¥å›¾åƒbatchå˜æ¢åˆ°64ä¸ªchannelsã€‚ä»£ç é‡Œæ˜¯é€šè¿‡å·ç§¯æ ¸ä¸º3*3ï¼Œæ— æ­¥å¹…(å› æ­¤å°ºåº¦ä¸å˜)çš„å·ç§¯å®ç°çš„ï¼Œå…±64ä¸ªå·ç§¯æ ¸ï¼Œå› æ­¤å¾—åˆ°çš„ç‰¹å¾å›¾æ˜¯64ä¸ªã€‚ç„¶åæ‰è¾“å…¥åˆ°å››ä¸ªè¿ç»­çš„æ®‹å·®å—ä¸­ã€‚å› æ­¤ä¸‹å›¾inputååº”æ›´æ”¹ä¸ºåŠ å…¥ä¸€ä¸ªå·ç§¯å±‚ï¼Œç„¶åå†è¿›å…¥ResNet Blockã€‚</p>
<p><img src="/images/blog/2020/DCGAN/simganrefiner.png" alt></p>
<a id="more"></a>
<h1 id="DANN"><a href="#DANN" class="headerlink" title="DANN"></a>DANN</h1><p>Domain-Adversarial Training of Neural Networksï¼ˆDANNï¼‰[1]ã€‚è¿™ç¯‡æ–‡ç« å¯ä»¥è¯´æ˜¯æœ€æ—©å°†å¯¹æŠ—ç½‘ç»œçš„æ€æƒ³å¼•å…¥åˆ°è¿ç§»å­¦ä¹ é¢†åŸŸä¸­çš„ï¼Œå¹¶ä¸”å¼•å‘äº†å¾ˆå¤§çš„åå“ã€‚åç»­æœ‰å¾ˆå¤šçŸ¥åçš„ç ”ç©¶è€…éƒ½è·Ÿè¿›ï¼Œåœ¨è¿™ç¯‡æ–‡ç« çš„åŸºç¡€ä¸Šè¿›è¡Œäº†ä¸€äº›åˆ—æ”¹è¿›å’Œæ‹“å±•ã€‚</p>
<p><strong>ä¸€ã€ç®€ä»‹</strong></p>
<p>ä¸ä¸Šä¸€æ¬¡ä»‹ç»çš„æ–‡ç« ä¸åŒï¼Œåœ¨è¿™ç¯‡è®ºæ–‡ä¸­ï¼Œä½œè€…çš„å·¥ä½œé‡å¿ƒæ”¾åœ¨äº†ä¹‹å‰æåˆ°çš„è¿ç§»å­¦ä¹ ä¸‰ä¸ªæ ¸å¿ƒé—®é¢˜ä¹‹ä¸€ï¼šHow to transferã€‚å…¶å®ä½œè€…åœ¨è¿™ç¯‡æ–‡ç« ä¸­åšçš„æ˜¯åŸŸé€‚é…çš„å·¥ä½œï¼ˆDomain adaptationï¼‰ï¼Œä¸‹é¢æˆ‘ä»¬å…ˆç®€å•ä»‹ç»ä¸€ä¸‹Domain adaptation çš„ä¸»è¦ç›®çš„æ˜¯ä»€ä¹ˆã€‚</p>
<p>æƒ³è±¡ä¸€ä¸ªåˆ†ç±»ä»»åŠ¡ï¼Œå‡è®¾ç°åœ¨æˆ‘ä»¬æ‰‹é‡Œæœ‰æºåŸŸæ•°æ®å’Œç›®æ ‡åŸŸæ•°æ®ï¼Œå…¶ä¸­æºåŸŸæ•°æ®æ˜¯ä¸°å¯Œå¹¶ä¸”æœ‰æ ‡è®°çš„ï¼Œè€Œç›®æ ‡åŸŸæ•°æ®æ˜¯å……è¶³ä½†æ˜¯æ²¡æœ‰æ ‡è®°çš„ï¼Œä½†æ˜¯æºåŸŸå’Œç›®æ ‡åŸŸçš„ç‰¹å¾ç©ºé—´å’Œæ ‡è®°ç©ºé—´ç›¸åŒã€‚å¾ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾çš„åˆ©ç”¨æºåŸŸæ•°æ®ä¸ºæºåŸŸå»ºç«‹ä¸€ä¸ªåˆ†ç±»å™¨ï¼Œä½†æ˜¯ç”±äºç›®æ ‡åŸŸæ•°æ®æœ¬èº«æ²¡æœ‰æ ‡è®°ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ— æ³•é€šè¿‡å¸¸è§„æ–¹æ³•ä¸ºç›®æ ‡åŸŸæ„å»ºåˆ†ç±»å™¨ï¼Œè¿™æ—¶å€™Domain adaptation å°±å¯ä»¥å‘æŒ¥ä½œç”¨äº†ï¼Œå…·ä½“è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆæ‰‹ç»˜å›¾ï¼Œå¸Œæœ›å¤§å®¶èƒ½çœ‹æ‡‚ï¼‰ï¼š</p>
<p><img src="/images/blog/2020/DCGAN/DANN.jpg" alt></p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒæºåŸŸå’Œç›®æ ‡åŸŸçš„ç‰¹å¾éƒ½æ˜¯{ <img src="https://www.zhihu.com/equation?tex=x_1%2Cx_2" alt="[å…¬å¼]"> }ï¼Œå¹¶ä¸”æœ‰ç›¸åŒçš„æ ‡è®°{-1ï¼Œ+1}ï¼Œä½†æ˜¯åœ¨ç›®æ ‡åŸŸæ•°æ®çš„æ ‡è®°æ˜¯ä¸å¯è·å¾—çš„ã€‚æ­¤å¤–ï¼Œè™½ç„¶æºåŸŸå’Œç›®æ ‡åŸŸçš„ç‰¹å¾ç©ºé—´ç›¸åŒï¼Œä½†æ˜¯ä¸¤è€…çš„ç‰¹å¾åˆ†å¸ƒå´ä¸åŒï¼ˆä¸¤è€…çš„æ ·æœ¬å¹¶ä¸åœ¨ç‰¹å¾ç©ºé—´çš„ç›¸åŒä½ç½®ï¼‰ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•åšåˆ°åˆ©ç”¨æºåŸŸæ•°æ®æ¥å¸®åŠ©ç›®æ ‡åŸŸè¿›è¡Œåˆ†ç±»å‘¢ï¼Ÿ</p>
<p>è¿™é‡Œæœ€å…³é”®çš„ä¸€ç‚¹å°±æ˜¯åœ¨åŒä¸€ä¸ªç‰¹å¾ç©ºé—´ä¸­æºåŸŸå’Œç›®æ ‡åŸŸçš„åˆ†å¸ƒä¸åŒï¼Œå‡è®¾ä¸¤è€…åˆ†å¸ƒç›¸åŒï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åˆ©ç”¨æºåŸŸåˆ†ç±»å™¨å¯¹ç›®æ ‡åŸŸæ•°æ®è¿›è¡Œåˆ†ç±»äº†ã€‚å› æ­¤ï¼ŒDomain adaptationçš„æ€æƒ³å°±æ˜¯é€šè¿‡æ¶ˆé™¤æºåŸŸå’Œç›®æ ‡åŸŸçš„åˆ†å¸ƒå·®å¼‚ï¼Œä½¿å¾—æºåŸŸæ•°æ®å’Œç›®æ ‡åŸŸæ•°æ®èƒ½åŒæ—¶è¢«åˆ†å¼€ã€‚åœ¨å›¾ä¸€ä¸­ï¼Œé€šè¿‡æ˜ å°„å‡½æ•° <img src="https://www.zhihu.com/equation?tex=%5Cphi" alt="[å…¬å¼]"> å°†æºåŸŸæ•°æ®å’Œç›®æ ‡åŸŸæ•°æ®æ˜ å°„åˆ°æŸä¸ªç©ºé—´ä¸­ï¼Œå¹¶ä¸”å°†å±äº+1 çš„æ ·æœ¬æ··åˆåœ¨ä¸€èµ·ï¼Œå±äº-1 çš„æ ·æœ¬æ··åˆåœ¨ä¸€èµ·ã€‚ç”±äºæºåŸŸæ•°æ®æœ‰æ ‡è®°ï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨æºåŸŸæ•°æ®å»ºç«‹åˆ†ç±»å™¨ã€‚åˆå› ä¸ºæºåŸŸæ•°æ®å’Œç›®æ ‡åŸŸæ•°æ®æ··åˆåœ¨ä¸€èµ·äº†ï¼Œæ‰€ä»¥åœ¨åˆ†å¼€æºåŸŸæ ·æœ¬çš„åŒæ—¶ç›®æ ‡åŸŸæ ·æœ¬ä¹Ÿè¢«åˆ†å¼€äº†ï¼Œè¿™æ ·ä»»åŠ¡å°±å®Œæˆäº†ã€‚</p>
<h2 id="äºŒã€Domain-Adversarial-Training-of-Neural-Networks-DANN"><a href="#äºŒã€Domain-Adversarial-Training-of-Neural-Networks-DANN" class="headerlink" title="äºŒã€Domain-Adversarial Training of Neural Networks(DANN)"></a><strong>äºŒã€Domain-Adversarial Training of Neural Networks(DANN)</strong></h2><p>åœ¨ä¸Šé¢çš„ Domain adaptation è¿‡ç¨‹ä¸­æœ€å…³é”®çš„ä¸€ç‚¹å°±æ˜¯å¦‚ä½•åšåˆ°å°†æºåŸŸæ ·æœ¬å’Œç›®æ ‡åŸŸæ ·æœ¬æ··åˆåœ¨ä¸€èµ·ï¼Œå¹¶ä¸”è¿˜èƒ½ä¿è¯è¢«åŒæ—¶åˆ†å¼€ï¼ŒDANNçš„ä¸»è¦ä»»åŠ¡ä¹Ÿæ˜¯åšåˆ°è¿™ä¸€ç‚¹ã€‚</p>
<p>é¦–å…ˆä»‹ç»ä¸€ä¸‹DANNçš„åº”ç”¨èƒŒæ™¯ï¼šæºåŸŸæ•°æ®å……è¶³å¹¶ä¸”æœ‰æ ‡è®°ï¼Œç›®æ ‡åŸŸæ•°æ®å……è¶³ä½†æ˜¯æ— æ ‡è®°ï¼ŒæºåŸŸå’Œç›®æ ‡åŸŸçš„ç‰¹å¾ç©ºé—´å’Œæ ‡è®°ç©ºé—´ç›¸åŒï¼Œä»»åŠ¡æ˜¯å€ŸåŠ©æºåŸŸæ•°æ®å¯¹ç›®æ ‡åŸŸæ•°æ®è¿›è¡Œåˆ†ç±»ã€‚</p>
<p>DANNçš„ç»“æ„å¦‚ä¸‹ï¼š</p>
<p><img src="/images/blog/2020/DCGAN/DANNNET.jpg" alt></p>
<p>ç½‘ç»œåˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š</p>
<ul>
<li>Feature extractor(ç‰¹å¾æå–å™¨)</li>
</ul>
<p>ç‰¹å¾æå–å™¨çš„åŠŸèƒ½åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼šï¼ˆ1ï¼‰æå–åç»­ç½‘ç»œå®Œæˆä»»åŠ¡æ‰€éœ€è¦çš„ç‰¹å¾ã€‚ï¼ˆ2ï¼‰å°†æºåŸŸæ ·æœ¬å’Œç›®æ ‡åŸŸæ ·æœ¬è¿›è¡Œæ˜ å°„å’Œæ··åˆã€‚</p>
<ul>
<li>Label predictor (ç±»åˆ«é¢„æµ‹å™¨)</li>
</ul>
<p>åˆ©ç”¨Feature extractoræå–çš„ä¿¡æ¯å¯¹æ ·æœ¬è¿›è¡Œåˆ†ç±»ã€‚</p>
<ul>
<li>Domain classifier(åŸŸåˆ†ç±»å™¨)</li>
</ul>
<p>åˆ¤æ–­Feature extractoræå–çš„ä¿¡æ¯æ¥è‡ªæºåŸŸè¿˜æ˜¯ç›®æ ‡åŸŸ</p>
<p>å¯è§ï¼ŒDANNä¸­çš„å¯¹æŠ—æ€æƒ³è•´å«åœ¨ç‰¹å¾æå–å™¨å’ŒåŸŸåˆ†ç±»å™¨ä¸­ã€‚å…¶ä¸­ç‰¹å¾æå–å™¨çš„ä½œç”¨å°±åƒæ˜¯å›¾1 ä¸­çš„æ˜ å°„å‡½æ•° <img src="https://www.zhihu.com/equation?tex=%5Cphi" alt="[å…¬å¼]"> ã€‚ä½†æ˜¯æˆ‘ä»¬å¹¶ä¸çŸ¥é“ <img src="https://www.zhihu.com/equation?tex=%5Cphi" alt="[å…¬å¼]"> çš„å…·ä½“å½¢å¼ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¸çŸ¥é“ç‰¹å¾æå–å™¨çš„è®­ç»ƒç›®æ ‡æ˜¯ä»€ä¹ˆï¼Œæ— æ³•ç”¨ä¸€ä¸ªç½‘ç»œæ¥æ‹Ÿåˆå‡½æ•° <img src="https://www.zhihu.com/equation?tex=%5Cphi" alt="[å…¬å¼]"> ã€‚å› æ­¤åé¢æ·»åŠ äº†åŸŸåˆ†ç±»å™¨ï¼Œç”¨æ¥å’Œç‰¹å¾æå–å™¨è¿›è¡Œå¯¹æŠ—è®­ç»ƒã€‚</p>
<p>ç‰¹å¾æå–å™¨æå–çš„ä¿¡æ¯ä¼šä¼ å…¥åŸŸåˆ†ç±»å™¨ï¼Œä¹‹ååŸŸåˆ†ç±»å™¨ä¼šåˆ¤æ–­ä¼ å…¥çš„ä¿¡æ¯åˆ°åº•æ˜¯æ¥è‡ªæºåŸŸè¿˜æ˜¯ç›®æ ‡åŸŸï¼Œå¹¶è®¡ç®—æŸå¤±ã€‚åœ¨åå‘ä¼ æ’­æ›´æ–°å‚æ•°çš„è¿‡ç¨‹ä¸­ï¼ŒåŸŸåˆ†ç±»å™¨å’Œç‰¹å¾æå–å™¨ä¸­é—´æœ‰ä¸€ä¸ªæ¢¯åº¦åè½¬å±‚ï¼ˆGradient reversal layerï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´åŸŸåˆ†ç±»å™¨çš„è®­ç»ƒç›®æ ‡æ˜¯å°½é‡å°†è¾“å…¥çš„ä¿¡æ¯åˆ†åˆ°æ­£ç¡®çš„åŸŸç±»åˆ«ï¼ˆæºåŸŸè¿˜æ˜¯ç›®æ ‡åŸŸï¼‰ï¼Œè€Œç‰¹å¾æå–å™¨çš„è®­ç»ƒç›®æ ‡å´æ°æ°ç›¸åï¼ˆç”±äºæ¢¯åº¦åè½¬å±‚çš„å­˜åœ¨ï¼‰ï¼Œç‰¹å¾æå–å™¨æ‰€æå–çš„ç‰¹å¾ï¼ˆæˆ–è€…è¯´æ˜ å°„çš„ç»“æœï¼‰ç›®çš„æ˜¯æ˜¯åŸŸåˆ¤åˆ«å™¨ä¸èƒ½æ­£ç¡®çš„åˆ¤æ–­å‡ºä¿¡æ¯æ¥è‡ªå“ªä¸€ä¸ªåŸŸï¼Œå› æ­¤å½¢æˆä¸€ç§å¯¹æŠ—å…³ç³»ã€‚å¯è§ï¼Œå½“åŸŸåˆ†ç±»å™¨ä¸èƒ½å°†æ¥æ”¶çš„ä¿¡æ¯æ­£ç¡®åˆ†ä¸ºæºåŸŸæ ·æœ¬è¿˜æ˜¯ç›®æ ‡åŸŸæ ·æœ¬æ—¶ï¼Œç‰¹å¾æå–å™¨çš„ä»»åŠ¡å°±åœ†æ»¡å®Œæˆäº†ï¼Œå› ä¸ºæ­¤æ—¶æºåŸŸæ ·æœ¬å’Œç›®æ ‡åŸŸæ ·æœ¬åœ¨æŸä¸ªç©ºé—´ä¸­å·²ç»è¢«æ··åˆåœ¨ä¸€èµ·ä¸èƒ½åˆ†å¼€äº†ã€‚</p>
<p><strong>ç„¶è€Œä¸Šè¿°è¿‡ç¨‹å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æœ€ç»ˆçš„ç›®çš„æ˜¯å¯¹ç›®æ ‡åŸŸæ ·æœ¬è¿›è¡Œåˆ†ç±»ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ä¿è¯ç‰¹å¾æå–å™¨æå–çš„ä¿¡æ¯æ˜¯èƒ½å¤Ÿç”¨æ¥åˆ†ç±»çš„å‘¢ï¼Ÿå‡å¦‚æ— è®ºè¾“å…¥ä»€ä¹ˆæ ·æœ¬ç»™ç‰¹å¾æå–å™¨ï¼Œå®ƒéƒ½è¾“å‡ºä¸€ä¸ªå•ä½å‘é‡ï¼Œè¿™æ ·ä¾æ—§å¯ä»¥â€œéª—è¿‡â€åŸŸåˆ†ç±»å™¨ï¼Œä½†æ˜¯å´æ— æ³•å®Œæˆåç»­çš„åˆ†ç±»å·¥ä½œã€‚</strong></p>
<p>è¿™æ—¶å°±è¦é Label predictor (ç±»åˆ«é¢„æµ‹å™¨)äº†ï¼Œå› ä¸ºæºåŸŸæ ·æœ¬æ˜¯æœ‰æ ‡è®°çš„ï¼Œæ‰€ä»¥åœ¨æå–ç‰¹å¾æ—¶ä¸ä»…ä»…è¦è€ƒè™‘åé¢çš„åŸŸåˆ¤åˆ«å™¨çš„æƒ…å†µï¼Œè¿˜è¦åˆ©ç”¨æºåŸŸçš„å¸¦æ ‡è®°æ ·æœ¬è¿›è¡Œæœ‰ç›‘ç£è®­ç»ƒä»è€Œå…¼é¡¾åˆ†ç±»çš„å‡†ç¡®æ€§ã€‚</p>
<h2 id="æ„Ÿå—ï¼šè®­ç»ƒç¥ç»ç½‘ç»œä¸€ä¸ªå¾ˆé‡è¦çš„åœ°æ–¹å°±æ˜¯ç»™ç½‘ç»œè¶³å¤Ÿçš„æœ‰æ•ˆåç½®"><a href="#æ„Ÿå—ï¼šè®­ç»ƒç¥ç»ç½‘ç»œä¸€ä¸ªå¾ˆé‡è¦çš„åœ°æ–¹å°±æ˜¯ç»™ç½‘ç»œè¶³å¤Ÿçš„æœ‰æ•ˆåç½®" class="headerlink" title="æ„Ÿå—ï¼šè®­ç»ƒç¥ç»ç½‘ç»œä¸€ä¸ªå¾ˆé‡è¦çš„åœ°æ–¹å°±æ˜¯ç»™ç½‘ç»œè¶³å¤Ÿçš„æœ‰æ•ˆåç½®"></a>æ„Ÿå—ï¼šè®­ç»ƒç¥ç»ç½‘ç»œä¸€ä¸ªå¾ˆé‡è¦çš„åœ°æ–¹å°±æ˜¯ç»™ç½‘ç»œè¶³å¤Ÿçš„æœ‰æ•ˆåç½®</h2><p>ç»¼ä¸Šï¼Œå½“æŠŠç‰¹å¾æå–å™¨ã€åŸŸåˆ†ç±»å™¨å’Œç±»åˆ«é¢„æµ‹å™¨éƒ½è®­ç»ƒå®Œæˆåï¼Œå°±å¯ä»¥åšåˆ°æŠŠæºåŸŸå’Œç›®æ ‡åŸŸæ··åˆåœ¨ä¸€èµ·å¹¶ä¸”è¿›è¡Œåˆ†ç±»äº†ã€‚</p>
<h1 id="æ˜¯å¦å¯ä»¥å€Ÿé‰´DANNçš„æ€æƒ³ï¼Œå°†ç¼–ç å™¨ï¼ˆBERTï¼‰ç›´æ¥è¾“å‡ºèåˆçš„å‘é‡ï¼Œä¸å†ä½¿ç”¨å¼±å°çš„å¤šå±‚æ„ŸçŸ¥æœºï¼åŒæ—¶æƒ³åŠæ³•å°†åˆ¤åˆ«å™¨æ”¹ä¸ºBERTã€‚å¼ºå¼ºç¢°æ’ï¼"><a href="#æ˜¯å¦å¯ä»¥å€Ÿé‰´DANNçš„æ€æƒ³ï¼Œå°†ç¼–ç å™¨ï¼ˆBERTï¼‰ç›´æ¥è¾“å‡ºèåˆçš„å‘é‡ï¼Œä¸å†ä½¿ç”¨å¼±å°çš„å¤šå±‚æ„ŸçŸ¥æœºï¼åŒæ—¶æƒ³åŠæ³•å°†åˆ¤åˆ«å™¨æ”¹ä¸ºBERTã€‚å¼ºå¼ºç¢°æ’ï¼" class="headerlink" title="æ˜¯å¦å¯ä»¥å€Ÿé‰´DANNçš„æ€æƒ³ï¼Œå°†ç¼–ç å™¨ï¼ˆBERTï¼‰ç›´æ¥è¾“å‡ºèåˆçš„å‘é‡ï¼Œä¸å†ä½¿ç”¨å¼±å°çš„å¤šå±‚æ„ŸçŸ¥æœºï¼åŒæ—¶æƒ³åŠæ³•å°†åˆ¤åˆ«å™¨æ”¹ä¸ºBERTã€‚å¼ºå¼ºç¢°æ’ï¼"></a>æ˜¯å¦å¯ä»¥å€Ÿé‰´DANNçš„æ€æƒ³ï¼Œå°†ç¼–ç å™¨ï¼ˆBERTï¼‰ç›´æ¥è¾“å‡ºèåˆçš„å‘é‡ï¼Œä¸å†ä½¿ç”¨å¼±å°çš„å¤šå±‚æ„ŸçŸ¥æœºï¼åŒæ—¶æƒ³åŠæ³•å°†åˆ¤åˆ«å™¨æ”¹ä¸ºBERTã€‚å¼ºå¼ºç¢°æ’ï¼</h1><h1 id="MADA"><a href="#MADA" class="headerlink" title="MADA"></a>MADA</h1><p>åŠ¨æœºï¼šç°åœ¨çš„åŸºäºå•ä¸ªåˆ¤åˆ«å™¨å¯¹æŠ—åŸŸè‡ªé€‚åº”æ–¹æ³•åœ¨è¿›è¡ŒæºåŸŸå’Œç›®æ ‡åŸŸæ•°æ®åˆ†å¸ƒå¯¹é½æ—¶æ²¡æœ‰åˆ©ç”¨æ•°æ®åˆ†å¸ƒåº•å±‚çš„å¤šæ¨¡å¼ç»“æ„ã€‚ç»“æœï¼ŒæºåŸŸå’Œç›®æ ‡åŸŸçš„æ•°æ®æ··æ·†ï¼Œåˆ¤åˆ«ç»“æ„ä¹Ÿä¼šæ··æ·†ï¼Œè¿™å°±å¯èƒ½å¯¼è‡´ä¸åŒåˆ†å¸ƒç›¸åº”çš„åŒºåˆ†ç»“æ„é”™è¯¯å¯¹é½ã€‚æ¯”å¦‚æ–‡ä¸­çš„ä¾‹å­ï¼ŒæºåŸŸä¸­çŒ«è¿™ä¸€ç±»å¯èƒ½é”™è¯¯åœ°å’Œç›®æ ‡åŸŸä¸­ç‹—è¿™ä¸€ç±»å¯¹é½ï¼š</p>
<p>è¿™é‡Œæˆ‘ä¸€ç›´æ²¡æœ‰åŠæ³•å¾ˆå¥½åœ°ç†è§£æ–‡ä¸­multimode sructuresæ˜¯æŒ‡ä»€ä¹ˆï¼Œæˆ‘ç›®å‰çš„ç†è§£æ˜¯æºåŸŸå’Œç›®æ ‡åŸŸä¸­æ¯ä¸€ç±»å¯¹åº”ä¹‹é—´ï¼ˆæ¯”å¦‚ç‹—å’Œç‹—ï¼‰çš„åˆ†å¸ƒã€‚</p>
<p>è´¡çŒ®ï¼šæå‡ºäº†ä¸€ç§æ–°çš„æ–¹æ³•â€”â€”MADAï¼ŒåŸºäºå¤šä¸ªåŸŸåˆ¤åˆ«å™¨æ•è·å¤šæ¨¡å¼ç»“æ„ä»è€Œå¯ä»¥å¯¹ä¸åŒçš„æ•°æ®åˆ†å¸ƒè¿›è¡Œç»†ç²’åº¦çš„å¯¹é½ã€‚</p>
<p>åœ¨è¿›è¡Œé¢†åŸŸè‡ªé€‚åº”æ—¶ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªæŒ‘æˆ˜ï¼š</p>
<ol>
<li>æ€ä¹ˆé€šè¿‡æœ€å¤§é™åº¦åœ°åŒ¹é…ä¸åŒæ•°æ®åˆ†å¸ƒåº•å±‚çš„å¤šæ¨¡å¼ç»“æ„å¢å¼ºæ­£è¿ç§»ï¼ˆæºåŸŸå’Œç›®æ ‡åŸŸç›¸åŒç±»ä¹‹é—´å°½å¯èƒ½å¯¹é½ï¼‰ã€‚</li>
<li>æ€ä¹ˆé€šè¿‡é˜²æ­¢è·¨åŸŸä¸åŒåˆ†å¸ƒä¹‹é—´çš„é”™è¯¯å¯¹é½å‡è½»è´Ÿè¿ç§»ã€‚</li>
</ol>
<blockquote>
<p>çŸ¥ä¹ï¼š</p>
<p><a href="https://zhuanlan.zhihu.com/p/272738019" target="_blank" rel="noopener">Multi-Adversarial Domain Adaptationé˜…è¯»æ€»ç»“</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Neural Networks</category>
        <category>GAN</category>
      </categories>
      <tags>
        <tag>GAN</tag>
        <tag>Adversarial Training</tag>
        <tag>SimGAN</tag>
        <tag>Domain Adaptation</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”¨BERTè®¡ç®—è¯­ä¹‰ç›¸ä¼¼åº¦</title>
    <url>/2020/12/24/%E7%94%A8BERT%E8%AE%A1%E7%AE%97%E8%AF%AD%E4%B9%89%E7%9B%B8%E4%BC%BC%E5%BA%A6/</url>
    <content><![CDATA[<p>æœ€è¿‘åœ¨å®éªŒä¸­éœ€è¦è®¡ç®—å¥å­ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œå¶ç„¶çœ‹åˆ°äº†ä¸€ç¯‡æ–‡ç« ï¼Œæœ‰ä»¥ä¸‹è¯´æ³•ï¼š</p>
<blockquote>
<p>è‡ª2018å¹´BERTæƒŠè‰³ä¼—äººä¹‹åï¼ŒåŸºäºé¢„è®­ç»ƒæ¨¡å‹å¯¹ä¸‹æ¸¸ä»»åŠ¡è¿›è¡Œå¾®è°ƒå·²æˆä¸ºç‚¼ä¸¹çš„æ ‡é…ã€‚ç„¶è€Œè¿‘ä¸¤å¹´çš„ç ”ç©¶å´å‘ç°ï¼Œæ²¡æœ‰ç»è¿‡å¾®è°ƒï¼Œç›´æ¥ç”±BERTå¾—åˆ°çš„å¥å­è¡¨ç¤ºåœ¨è¯­ä¹‰æ–‡æœ¬ç›¸ä¼¼æ€§æ–¹é¢æ˜æ˜¾è–„å¼±ï¼Œç”šè‡³ä¼šå¼±äºGloVeå¾—åˆ°çš„è¡¨ç¤ºã€‚æ­¤ç¯‡è®ºæ–‡ä¸­é¦–å…ˆä»ç†è®ºä¸Šæ¢ç´¢äº†masked language model è·Ÿè¯­ä¹‰ç›¸ä¼¼æ€§ä»»åŠ¡ä¸Šçš„è”ç³»ï¼Œå¹¶é€šè¿‡å®éªŒåˆ†æäº†BERTçš„å¥å­è¡¨ç¤ºï¼Œæœ€åæå‡ºäº†BERT-Flowæ¥è§£å†³ä¸Šè¿°é—®é¢˜ã€‚</p>
</blockquote>
<h1 id="ä¸ºä»€ä¹ˆBERTçš„å¥å­Embeddingsè¡¨ç°å¼±ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆBERTçš„å¥å­Embeddingsè¡¨ç°å¼±ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆBERTçš„å¥å­Embeddingsè¡¨ç°å¼±ï¼Ÿ"></a>ä¸ºä»€ä¹ˆBERTçš„å¥å­Embeddingsè¡¨ç°å¼±ï¼Ÿ</h1><font color="orange">ç”±äºReimersç­‰äººä¹‹å‰å·²å®éªŒè¯æ˜ context embeddings å–å¹³å‡è¦ä¼˜äº[CLS] tokençš„embeddingã€‚å› è€Œåœ¨æ–‡ç« ä¸­ï¼Œ**ä½œè€…éƒ½ä»¥æœ€åå‡ å±‚æ–‡æœ¬åµŒå…¥å‘é‡çš„å¹³å‡å€¼æ¥ä½œä¸ºBERTå¥å­çš„è¡¨ç¤ºå‘é‡**ã€‚</font>

<p><a href="*https://arxiv.org/pdf/2011.05864.pdf*"><strong><em>On the Sentence Embeddings from Pre-trained Language Models</em></strong></a></p>
<a id="more"></a>
<h1 id="å¥å­è¡¨ç¤º"><a href="#å¥å­è¡¨ç¤º" class="headerlink" title="å¥å­è¡¨ç¤º"></a>å¥å­è¡¨ç¤º</h1><p>åœ¨å…³ç³»æŠ½å–ä»»åŠ¡ä¸­ï¼Œå¯¹ä¸åŒå¥å­è¡¨ç¤ºçš„æœ€ç»ˆç»“æœè¿›è¡Œå®éªŒï¼Œå®éªŒç»“æœä¸ºï¼š</p>
<h2 id="å–-CLS"><a href="#å–-CLS" class="headerlink" title="å–[CLS]"></a>å–[CLS]</h2><p>æ­¤å¤„é‡‡ç”¨äº†<code>[CLS]head[unused6]tail[unused6]sentence</code>çš„å¥å­ç»„ç»‡å½¢å¼æŠ•å…¥BERTï¼Œç„¶åå–<code>[CLS]</code>å¯¹åº”çš„å‘é‡ä½œä¸ºå¥å­çš„è¡¨ç¤ºï¼Œç»“æœä¸ºï¼š</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">precision: 0.7702</span><br><span class="line">recall: 0.8052</span><br><span class="line">F1: 0.7729</span><br></pre></td></tr></table></figure>
<h2 id="å–å¹³å‡"><a href="#å–å¹³å‡" class="headerlink" title="å–å¹³å‡"></a>å–å¹³å‡</h2><p>å¥å­ç»„ç»‡å½¢å¼ç›¸åŒï¼Œå–æ•´ä¸ªå¥å­å‘é‡çš„å¹³å‡ä½œä¸ºæœ€ç»ˆå‘é‡è¡¨ç¤ºï¼Œç»“æœä¸ºï¼š</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">precision: 0.7585</span><br><span class="line">recall: 0.7693</span><br><span class="line">F1: 0.7367</span><br></pre></td></tr></table></figure>
<p>å’Œä¸Šé¢çš„è®ºè¿°ä¸åŒï¼Œæˆ‘çš„ä¸ªäººå®éªŒä¸­ï¼Œå–[CLS]å¯ä»¥å–å¾—æ›´å¥½çš„æ•ˆæœã€‚</p>
<h2 id="å–å¤§å¤´"><a href="#å–å¤§å¤´" class="headerlink" title="å–å¤§å¤´"></a>å–å¤§å¤´</h2><p>å¥å­çš„ç»„ç»‡å½¢å¼ä¾ç„¶ä¸ä¸Šé¢ä¸€è‡´ï¼Œä½†æ˜¯ï¼Œå–<code>[CLS]head[unused6]tail[unused6]</code>çš„å¹³å‡ä½œä¸ºå¥å­çš„è¡¨ç¤ºï¼Œæœ€ç»ˆç»“æœä¸ºï¼š</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">precision: 0.5396</span><br><span class="line">recall: 0.6381</span><br><span class="line">F1: 0.5670</span><br></pre></td></tr></table></figure>
<p>å–å¤§å¤´çš„å½¢å¼æ˜¾ç„¶æ²¡æœ‰å–å¾—å¾ˆå¥½çš„æ•ˆæœã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p>
<h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><h2 id="å¦‚ä½•å˜é•¿çš„æˆªæ–­åºåˆ—ï¼Ÿ"><a href="#å¦‚ä½•å˜é•¿çš„æˆªæ–­åºåˆ—ï¼Ÿ" class="headerlink" title="å¦‚ä½•å˜é•¿çš„æˆªæ–­åºåˆ—ï¼Ÿ"></a>å¦‚ä½•å˜é•¿çš„æˆªæ–­åºåˆ—ï¼Ÿ</h2><p>åœ¨åšå®éªŒçš„æ—¶å€™ï¼Œéœ€è¦å¯¹åºåˆ—å˜é•¿æˆªæ–­ï¼Œåºåˆ—çš„shapeä¸º(3, 150)ï¼Œæƒ³è¦å¯¹åºåˆ—åˆ†åˆ«å–å‰5ï¼Œ6ï¼Œ9ç»´ï¼Œæ„Ÿè§‰è‡ªå·±ç”¨forå¾ªç¯å–å‘é‡ä¸€æ˜¯ä¸å¤Ÿä¼˜é›…ï¼Œä»£ç ä¸å’Œè°ï¼›äºŒæ˜¯æ²¡æœ‰ç»è¿‡ä¼˜åŒ–ï¼Œæ‹…å¿ƒé€Ÿåº¦ä¼šæ¯”è¾ƒæ…¢ã€‚</p>
<p>åœ¨è¯¢é—®äº†å­¦é•¿åï¼Œå­¦åˆ°äº†ä¸€ç§æ–°æ–¹æ³•ï¼šo(<em>ï¿£â–½ï¿£</em>)ãƒ–</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">result = torch.ones(<span class="number">3</span>, <span class="number">150</span>)</span><br><span class="line">c = torch.arange(<span class="number">150</span>).unsqueeze(<span class="number">0</span>).repeat(<span class="number">3</span>, <span class="number">1</span>)</span><br><span class="line">mask = (c &lt; torch.tensor([<span class="number">5</span>, <span class="number">6</span>, <span class="number">9</span>]).unsqueeze(<span class="number">1</span>))</span><br><span class="line"><span class="comment"># gaga = result[mask]  # å’Œä¸‹é¢é‚£ä¸ªä¸¤ç§æ–¹æ³•å‡å¯</span></span><br><span class="line">gaga = result.masked_select(mask)</span><br><span class="line">print(gaga)</span><br><span class="line">print(gaga.shape)</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tensor([1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1., 1.,</span><br><span class="line">        1., 1.])</span><br><span class="line">torch.Size([20])</span><br></pre></td></tr></table></figure>
<h2 id="å¦‚ä½•å–å¤šä¸ªç›¸åŒå€¼çš„æœ€åä¸€ä¸ªï¼Ÿ"><a href="#å¦‚ä½•å–å¤šä¸ªç›¸åŒå€¼çš„æœ€åä¸€ä¸ªï¼Ÿ" class="headerlink" title="å¦‚ä½•å–å¤šä¸ªç›¸åŒå€¼çš„æœ€åä¸€ä¸ªï¼Ÿ"></a>å¦‚ä½•å–å¤šä¸ªç›¸åŒå€¼çš„æœ€åä¸€ä¸ªï¼Ÿ</h2><p>å¯¹äºä¸€ä¸ªåºåˆ—ä¸­çš„å¤šä¸ªå€¼ï¼Œæˆ‘ä»¬æƒ³å–å€¼ä¸º7çš„æœ€åä¸€ä¸ªçš„ä¸‹æ ‡ï¼Ÿæ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<p>ä½¿ç”¨torch.max()åªä¼šè¿”å›ç¬¬ä¸€ä¸ªå€¼çš„ä¸‹æ ‡â€¦â€¦</p>
<p>æˆ‘çœŸæ˜¯æƒ³äº†åŠå¤©æ²¡æƒ³å‡ºæ¥ï¼Œå¤ªç¬¨äº†ï¼Œè‡ªæ€äº†ğŸ¤¡ï¼Œåæ¥è¯·æ•™äº†ä¸€ä¸‹åˆ«äººï¼Œå…¶å®å¾ˆç®€å•ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">tmp = torch.tensor([<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">9</span>])</span><br><span class="line">tmp = tmp == <span class="number">7</span></span><br><span class="line">tmp = tmp + torch.arange(<span class="number">0</span>, tmp.size(<span class="number">0</span>)) * tmp <span class="comment"># å…³é”®ç‚¹ï¼ŒåŠ ä¸Šä¸‹æ ‡ï¼</span></span><br><span class="line">_, index = torch.max(tmp)</span><br><span class="line">print(index)</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><br><span class="line">tensor(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<p>âœ¨ğŸ‰ğŸ‰ğŸ‰ğŸ‰</p>
<h2 id="BUG"><a href="#BUG" class="headerlink" title="BUG!"></a>BUG!</h2><p>åœ¨ä½¿ç”¨torch.max()çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°äº†å®˜æ–¹æ–‡æ¡£çš„ä¸€ä¸ªbugï¼Œåœ¨å®˜æ–¹æ–‡æ¡£ä¸­ï¼Œè¿™æ ·å†™é“ï¼š</p>
<p><a href="https://pytorch.org/docs/stable/generated/torch.max.html?highlight=torch%20max#torch.max" target="_blank" rel="noopener">https://pytorch.org/docs/stable/generated/torch.max.html?highlight=torch%20max#torch.max</a></p>
<blockquote>
<p>If there are multiple maximal values in a reduced row then the indices of the first maximal value are returned.</p>
</blockquote>
<p>å³ï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªæœ€å¤§å€¼ï¼Œè¿”å›ç¬¬ä¸€ä¸ªæœ€å¤§å€¼å¯¹åº”çš„ä¸‹æ ‡ã€‚</p>
<p>ä½†æ˜¯åœ¨å®éªŒè¿‡ç¨‹ä¸­ï¼Œå‘ç°è¿”å›çš„æ˜¯æœ€åä¸€ä¸ªæœ€å¤§å€¼å¯¹åº”çš„ä¸‹æ ‡ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = torch.tensor([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">3</span>], dtype=torch.int)</span><br><span class="line">_, tmp = torch.max(x, dim=<span class="number">0</span>)</span><br><span class="line">print(tmp)</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><br><span class="line">tensor(<span class="number">6</span>)</span><br></pre></td></tr></table></figure>
<p>æˆ‘æŠŠè¿™ä¸ªé—®é¢˜æåˆ°äº†pytorchå®˜æ–¹çš„githubä¸Šï¼Œå…·ä½“çš„ç»†èŠ‚å¯ä»¥å»çœ‹issue #49845</p>
<p><a href="https://github.com/pytorch/pytorch/issues/49845" target="_blank" rel="noopener">https://github.com/pytorch/pytorch/issues/49845</a></p>
]]></content>
      <categories>
        <category>NLP</category>
        <category>Pretrained Language Model</category>
      </categories>
      <tags>
        <tag>BERT</tag>
        <tag>semantic similarity</tag>
        <tag>CLS</tag>
      </tags>
  </entry>
  <entry>
    <title>pipè™šæ‹Ÿç¯å¢ƒ-ä½¿ç”¨virtualenv</title>
    <url>/2020/12/23/pip%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83-%E4%BD%BF%E7%94%A8virtualenv/</url>
    <content><![CDATA[<p>åœ¨å¼€å‘Pythonåº”ç”¨ç¨‹åºçš„æ—¶å€™ï¼Œç³»ç»Ÿå®‰è£…çš„Python3åªæœ‰ä¸€ä¸ªç‰ˆæœ¬ï¼š3.4ã€‚æ‰€æœ‰ç¬¬ä¸‰æ–¹çš„åŒ…éƒ½ä¼šè¢«<code>pip</code>å®‰è£…åˆ°Python3çš„<code>site-packages</code>ç›®å½•ä¸‹ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬è¦åŒæ—¶å¼€å‘å¤šä¸ªåº”ç”¨ç¨‹åºï¼Œé‚£è¿™äº›åº”ç”¨ç¨‹åºéƒ½ä¼šå…±ç”¨ä¸€ä¸ªPythonï¼Œå°±æ˜¯å®‰è£…åœ¨ç³»ç»Ÿçš„Python 3ã€‚å¦‚æœåº”ç”¨Aéœ€è¦jinja 2.7ï¼Œè€Œåº”ç”¨Béœ€è¦jinja 2.6æ€ä¹ˆåŠï¼Ÿ</p>
<p>è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯ä¸ªåº”ç”¨å¯èƒ½éœ€è¦å„è‡ªæ‹¥æœ‰ä¸€å¥—â€œç‹¬ç«‹â€çš„Pythonè¿è¡Œç¯å¢ƒã€‚virtualenvå°±æ˜¯ç”¨æ¥ä¸ºä¸€ä¸ªåº”ç”¨åˆ›å»ºä¸€å¥—â€œéš”ç¦»â€çš„Pythonè¿è¡Œç¯å¢ƒã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬ç”¨<code>pip</code>å®‰è£…virtualenvï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ pip3 install virtualenv</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œå‡å®šæˆ‘ä»¬è¦å¼€å‘ä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Œéœ€è¦ä¸€å¥—ç‹¬ç«‹çš„Pythonè¿è¡Œç¯å¢ƒï¼Œå¯ä»¥è¿™ä¹ˆåšï¼š<a id="more"></a></p>
<h1 id="ç¬¬ä¸€æ­¥ï¼Œåˆ›å»ºç›®å½•ï¼š"><a href="#ç¬¬ä¸€æ­¥ï¼Œåˆ›å»ºç›®å½•ï¼š" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼Œåˆ›å»ºç›®å½•ï¼š"></a>ç¬¬ä¸€æ­¥ï¼Œåˆ›å»ºç›®å½•ï¼š</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Mac:~ michael$ mkdir myproject</span><br><span class="line">Mac:~ michael$ <span class="built_in">cd</span> myproject/</span><br><span class="line">Mac:myproject michael$</span><br></pre></td></tr></table></figure>
<h1 id="ç¬¬äºŒæ­¥ï¼Œåˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„Pythonè¿è¡Œç¯å¢ƒï¼Œå¹¶æŒ‡å®špythonç‰ˆæœ¬ä¸º3-6ï¼Œå‘½åä¸ºpytorchï¼š"><a href="#ç¬¬äºŒæ­¥ï¼Œåˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„Pythonè¿è¡Œç¯å¢ƒï¼Œå¹¶æŒ‡å®špythonç‰ˆæœ¬ä¸º3-6ï¼Œå‘½åä¸ºpytorchï¼š" class="headerlink" title="ç¬¬äºŒæ­¥ï¼Œåˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„Pythonè¿è¡Œç¯å¢ƒï¼Œå¹¶æŒ‡å®špythonç‰ˆæœ¬ä¸º3.6ï¼Œå‘½åä¸ºpytorchï¼š"></a>ç¬¬äºŒæ­¥ï¼Œåˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„Pythonè¿è¡Œç¯å¢ƒï¼Œå¹¶æŒ‡å®špythonç‰ˆæœ¬ä¸º3.6ï¼Œå‘½åä¸º<code>pytorch</code>ï¼š</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Mac:myproject michael$ virtualenv -p /usr/bin/python3.6 pytorch</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><br><span class="line">created virtual environment CPython3.6.8.final.0-64 <span class="keyword">in</span> 7874ms</span><br><span class="line">  creator CPython3Posix(dest=/root/venv/pytorch, clear=False, no_vcs_ignore=False, global=False)</span><br><span class="line">  seeder FromAppData(download=False, pip=bundle, wheel=bundle, setuptools=bundle, via=copy, app_data_dir=/root/.<span class="built_in">local</span>/share/virtualenv)</span><br><span class="line">    added seed packages: pip==20.3.1, setuptools==51.0.0, wheel==0.36.1</span><br><span class="line">  activators PythonActivator,FishActivator,XonshActivator,CShellActivator,PowerShellActivator,BashActivator</span><br></pre></td></tr></table></figure>
<p>æ–°å»ºçš„Pythonç¯å¢ƒè¢«æ”¾åˆ°å½“å‰ç›®å½•ä¸‹çš„<code>pytorch</code>ç›®å½•ã€‚æœ‰äº†<code>pytorch</code>è¿™ä¸ªPythonç¯å¢ƒï¼Œå¯ä»¥ç”¨<code>source</code>è¿›å…¥è¯¥ç¯å¢ƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Mac:myproject michael$ <span class="built_in">source</span> pytorch/bin/activate</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><br><span class="line">(pytorch) root@ubuntu:$</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„åˆ°å‘½ä»¤æç¤ºç¬¦å˜äº†ï¼Œæœ‰ä¸ª<code>(pytorch)</code>å‰ç¼€ï¼Œè¡¨ç¤ºå½“å‰ç¯å¢ƒæ˜¯ä¸€ä¸ªåä¸º<code>pytorch</code>çš„Pythonç¯å¢ƒã€‚</p>
<p>ä¸‹é¢æ­£å¸¸å®‰è£…å„ç§ç¬¬ä¸‰æ–¹åŒ…ï¼Œå¹¶è¿è¡Œ<code>python</code>å‘½ä»¤ï¼š</p>
<h1 id="é€€å‡ºå½“å‰çš„pytorchç¯å¢ƒï¼Œä½¿ç”¨deactivateå‘½ä»¤ï¼š"><a href="#é€€å‡ºå½“å‰çš„pytorchç¯å¢ƒï¼Œä½¿ç”¨deactivateå‘½ä»¤ï¼š" class="headerlink" title="é€€å‡ºå½“å‰çš„pytorchç¯å¢ƒï¼Œä½¿ç”¨deactivateå‘½ä»¤ï¼š"></a>é€€å‡ºå½“å‰çš„<code>pytorch</code>ç¯å¢ƒï¼Œä½¿ç”¨<code>deactivate</code>å‘½ä»¤ï¼š</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(pytorch) root@ubuntu:$ deactivate</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶å°±å›åˆ°äº†æ­£å¸¸çš„ç¯å¢ƒï¼Œç°åœ¨<code>pip</code>æˆ–<code>python</code>å‡æ˜¯åœ¨ç³»ç»ŸPythonç¯å¢ƒä¸‹æ‰§è¡Œã€‚</p>
<p>å®Œå…¨å¯ä»¥é’ˆå¯¹æ¯ä¸ªåº”ç”¨åˆ›å»ºç‹¬ç«‹çš„Pythonè¿è¡Œç¯å¢ƒï¼Œè¿™æ ·å°±å¯ä»¥å¯¹æ¯ä¸ªåº”ç”¨çš„Pythonç¯å¢ƒè¿›è¡Œéš”ç¦»ã€‚</p>
<p>virtualenvæ˜¯å¦‚ä½•åˆ›å»ºâ€œç‹¬ç«‹â€çš„Pythonè¿è¡Œç¯å¢ƒçš„å‘¢ï¼ŸåŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯æŠŠç³»ç»ŸPythonå¤åˆ¶ä¸€ä»½åˆ°virtualenvçš„ç¯å¢ƒï¼Œç”¨å‘½ä»¤<code>source venv/bin/activate</code>è¿›å…¥ä¸€ä¸ªvirtualenvç¯å¢ƒæ—¶ï¼Œvirtualenvä¼šä¿®æ”¹ç›¸å…³ç¯å¢ƒå˜é‡ï¼Œè®©å‘½ä»¤<code>python</code>å’Œ<code>pip</code>å‡æŒ‡å‘å½“å‰çš„virtualenvç¯å¢ƒã€‚</p>
<h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>virtualenvä¸ºåº”ç”¨æä¾›äº†éš”ç¦»çš„Pythonè¿è¡Œç¯å¢ƒï¼Œè§£å†³äº†ä¸åŒåº”ç”¨é—´å¤šç‰ˆæœ¬çš„å†²çªé—®é¢˜ã€‚</p>
]]></content>
      <categories>
        <category>Others</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>conda</tag>
        <tag>pip</tag>
        <tag>virtualenv</tag>
      </tags>
  </entry>
  <entry>
    <title>å¯¹GANå†æ¬¡å­¦ä¹ </title>
    <url>/2020/12/23/%E5%AF%B9GAN%E5%86%8D%E6%AC%A1%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<ol>
<li>Zæ˜¯å™ªå£°ï¼Œä¹Ÿå°±æ˜¯Gçš„è¾“å…¥ï¼Œå¯ä»¥æ˜¯é«˜æ–¯å™ªå£°ï¼Œä¸€èˆ¬ä¸ºå‡åŒ€å™ªå£°ï¼›</li>
<li>ä»è´å¶æ–¯çš„è§’åº¦ä¸Šåšï¼Œç”Ÿæˆæ¨¡å‹å¯ä»¥è®¤ä¸ºæ˜¯éƒ½æ˜¯å±äºML(æœ€å¤§åŒ–ä¼¼ç„¶ï¼‰çš„è¿‡ç¨‹ï¼Œå› ä¸ºï¼ŒMLå°±æ˜¯æ‰¾åˆ°èƒ½ä½¿æ ·æœ¬æ•°æ®çš„ç±»æ¡ä»¶æ¦‚ç‡æœ€å¤§åŒ–çš„åˆ†å¸ƒå‚æ•°ã€‚é‚£å¦‚æœç»è¿‡è®­ç»ƒé›†è®­ç»ƒï¼Œæˆ‘ä»¬æ‰¾åˆ°è¯¥å‚æ•°,æ­¤æ—¶æˆ‘ä»¬çš„æ¨¡å‹æ˜¯æœ‰æœ€å¤§å¯èƒ½ç”Ÿæˆå’Œæ ·æœ¬è®­ç»ƒæ•°æ®å…·æœ‰åŒæ ·åˆ†å¸ƒçš„æ•°æ®ï¼Œè¿™ä¸ªä¹Ÿæ˜¯ç”Ÿæˆæ¨¡å‹çš„ä¸€ä¸ªç›®æ ‡ã€‚å½“ç„¶è¿™ä¸ªæ–¹æ³•çš„å‰æå°±æ˜¯å¯¹æ•°æ®çš„åˆ†å¸ƒè¿›è¡Œä¸€ä¸ªå‡è®¾ï¼Œç„¶åæ‰èƒ½æ±‚å‚æ•°ã€‚æ¯”å¦‚å‡è®¾æ•°æ®åˆ†å¸ƒæ˜¯ç¬¦åˆé«˜æ–¯åˆ†å¸ƒçš„ã€‚</li>
</ol>
<p><img src="/images/blog/2020/generative_model.webp" alt></p>
<ol>
<li>GoodFellowçš„è®ºæ–‡è¯æ˜äº†Gans å…¨å±€æœ€å°ç‚¹çš„å……åˆ†å¿…è¦æ¡ä»¶æ˜¯:</li>
</ol>
<script type="math/tex; mode=display">
p_g = p_{real}</script><p>pgè¡¨ç¤ºgenerate ç”Ÿæˆæ•°æ®çš„åˆ†å¸ƒå‡½æ•°</p>
<p>pdataè¡¨ç¤ºçœŸå®dataçš„åˆ†å¸ƒå‡½æ•°</p>
<ol>
<li>æˆ‘ä»¬çŸ¥é“ï¼ŒGå’ŒDæ˜¯ä¸€ä¸ªå¯¹æŠ—çš„è¿‡ç¨‹ï¼Œè€Œè¿™ä¸ªå¯¹æŠ—æ˜¯ï¼ŒGä¸æ–­çš„å­¦ä¹ ï¼ŒDä¹Ÿä¸æ–­çš„å­¦ä¹ ï¼Œè€Œä¸”éœ€è¦ä¿è¯ä¸¤è€…å­¦ä¹ é€Ÿç‡åŸºæœ¬ä¸€è‡´ï¼Œä¹Ÿå°±æ˜¯éƒ½èƒ½ä¸æ–­çš„ä»å¯¹æ–¹é‚£é‡Œå­¦ä¹ åˆ°â€œçŸ¥è¯†â€æ¥æå‡è‡ªå·±ã€‚å¦åˆ™ï¼Œå°±æ˜¯è¿™ä¸¤è€…å“ªä¸€ä¸ªå­¦ä¹ çš„è¿‡å¿«ï¼Œæˆ–è¿‡æ…¢ï¼Œä»¥è‡³äºåŒæ–¹çš„å®åŠ›ä¸å†å‡è¡¡ï¼Œå°±ä¼šå¯¼è‡´å®åŠ›å·®çš„é‚£ä¸€æ–¹çš„â€œlossâ€ä¸å†èƒ½â€œä¸‹é™â€ï¼Œä¹Ÿå°±ä¸åœ¨å­¦åˆ°â€œçŸ¥è¯†â€ã€‚ä¸€èˆ¬çš„å¯¹æŠ—æ¨¡å‹ä¸­çš„Gå’ŒDçš„ç½‘ç»œæ¡†æ¶å¤§å°åŸºæœ¬ä¸Šæ˜¯ç›¸ä¼¼(å¯èƒ½å­˜åœ¨è¾ƒå°çš„å·®å¼‚)ï¼Œè€Œä¸”ï¼Œè®­ç»ƒçš„è¿‡ç¨‹å°±æ˜¯å…ˆè®­ç»ƒGä¸€æ¬¡ï¼Œå†è®­ç»ƒDä¸€æ¬¡ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºäº†ç¨³å®šè®­ç»ƒçš„ä¸€ä¸ªä¿è¯ã€‚å½“ç„¶è¿™å¹¶ä¸èƒ½å®Œå…¨ç¨³å®šè®­ç»ƒï¼Œæ‰€ä»¥ï¼Œå¯¹æŠ—ç½‘ç»œçš„ç¨³å®šè®­ç»ƒï¼Œä¾ç„¶æ˜¯ä¸€ä¸ªç ”ç©¶çš„çƒ­ç‚¹å’Œæ–¹å‘ã€‚</li>
<li>è¿™æ˜¯DCGANçš„ç”Ÿæˆç½‘ç»œæ¨¡å‹çš„æ¶æ„ (5å±‚åå·ç§¯)ï¼Œå¯¹äºLSUNï¼ŒImagenet-1kå¤§å°çš„æ•°æ®é›†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ¶æ„ï¼Œä½†å¹¶ä¸æ˜¯è¯´å¯¹äºä»»ä½•æ•°æ®é›†ï¼Œéƒ½å¯ä»¥ï¼Œæ¯”å¦‚ï¼Œæ›´å¤§ï¼Œæˆ–è€…æ›´å°çš„ï¼Œé‚£å¯¹åº”çš„å·ç§¯æ¶æ„å°±éœ€è¦è¿›è¡Œæ”¹å˜ã€‚<strong>æ¯”å¦‚ï¼Œå¯¹äºmnistæ•°æ®é›†ï¼ŒGå’ŒDçš„ç½‘ç»œæ¶æ„éƒ½ç›¸åº”åœ°å‡å°äº†ï¼Œå¦åˆ™ä¸èƒ½æ‹Ÿåˆ</strong>ï¼Œäº§ç”Ÿä¸äº†å¥½çš„ç»“æœ(äº²æµ‹)ã€‚</li>
<li>å› ä¸ºâ€œåå·ç§¯â€å­˜åœ¨äºå·ç§¯çš„åå‘ä¼ æ’­ä¸­ã€‚<font color="red">å…¶ä¸­åå‘ä¼ æ’­çš„æ»¤æ³¢å™¨çŸ©é˜µï¼Œæ˜¯å‰å‘ä¼ æ’­(å·ç§¯)çš„è½¬ç½®</font> (<strong>å¦‚ä½•ç†è§£ï¼Ÿ</strong>)ï¼Œæ‰€ä»¥ï¼Œè¿™å°±æ˜¯å®ƒçš„åå­—çš„ç”±æ¥ã€‚åªä¸è¿‡æˆ‘ä»¬æŠŠåå‘ä¼ æ’­çš„æ“ä½œæ‹¿åˆ°äº†å‰å‘ä¼ æ’­æ¥åšï¼Œå°±äº§ç”Ÿäº†æ‰€è°“çš„åå·ç§¯ä¸€è¯´ã€‚ä½†æ˜¯transport-convolutionåªèƒ½è¿˜åŸä¿¡å·çš„å¤§å°ï¼Œä¸èƒ½è¿˜åŸå…¶valueï¼Œæ‰€ä»¥ï¼Œä¸èƒ½å«åšåå·ç§¯ï¼Œä¸æ˜¯çœŸæ­£çš„é€†æ“ä½œã€‚</li>
</ol>
<a id="more"></a>
<hr>
<p>DCGANä¹‹æˆ‘çš„æµ‹è¯•</p>
<p>æˆ‘å¯¹è‡ªå·±ç¼–å†™çš„ä»£ç ä¹Ÿè¿›è¡Œäº†ä¸€äº›æµ‹è¯•ï¼Œä¿®æ”¹äº†ä¸€äº›å‚æ•°ã€‚å¾—åˆ°çš„å¯å‘å¦‚ä¸‹ã€‚</p>
<p>(1)å¦‚æœæ¨¡å‹å¤ªå¤§ï¼Œåˆ™ä¼šå‡ºç°è®­ç»ƒä¸ç¨³å®šã€‚</p>
<p>ä»€ä¹ˆæ˜¯æ¨¡å‹è¿‡å¤§ï¼Œæ¨¡å‹è¿‡å¤§æ˜¯åŒæ ·å¤§å°çš„æ•°æ®é›†çš„åˆ†ç±»ä»»åŠ¡æƒ…å†µä¸‹ï¼Œæ¯”ç›‘ç£è®­ç»ƒçš„æ¨¡å‹è¾ƒå¤§ï¼Œå¦‚æœè¾ƒå¤§çš„è¯ï¼Œä¼šå‡ºç°ï¼Œç”Ÿæˆå›¾ç‰‡çš„ä¸ç¨³å®šã€‚ä¸»è¦ä½“ç°å°±æ˜¯ç”Ÿæˆçš„å›¾ç‰‡ï¼Œåœ¨å¼€å§‹çš„æ—¶å€™æœ‰è¶‹äºå˜ä¼˜çš„è¿‡ç¨‹ï¼Œæœ€åå´å˜å¾—è¶Šæ¥è¶Šæ¨¡ç³Šã€‚</p>
<p>(2)é‡‡æ ·çš„å™ªå£°å¦‚æœä¸º10æ—¶ï¼Œå’Œ100æœ‰ä½•åŒºåˆ«ã€‚</p>
<p>å‘ç°ï¼Œé‡‡æ ·å™ªå£°ç»´åº¦è¶Šå°ï¼Œäº§ç”Ÿçš„å›¾ç‰‡çš„å…±æ€§è¶Šå¤§ã€‚</p>
<p>(3)å°†æµ‹è¯•é‡‡æ ·è¿›è¡Œå˜åŠ¨ï¼Œå‘ç°é«˜æ–¯å’Œå‡åŒ€åˆ†å¸ƒé‡‡æ ·åŸºæœ¬å…¼å®¹ï¼Œå…¶ä»–æ˜¯ä¹±çš„ã€‚</p>
<p>(4)è®­ç»ƒGå’ŒDçš„é¡ºåºä¼¼ä¹æ²¡æœ‰ä»€ä¹ˆå…³ç³»ã€‚(å€¼å¾—æ€è€ƒ)</p>
<hr>
<p><img src="/images/blog/2020/CGAN/conditionalGAN.webp" alt></p>
<p>å¯è§†åŒ–çš„ä»‹ç»</p>
<p>æ·±åº¦å­¦ä¹ çš„å‚æ•°å¯è§†åŒ–æ˜¯äº†è§£æ·±åº¦å­¦ä¹ çš„å­¦ä¹ è¿‡ç¨‹æˆ–è€…ç»“æœçš„æ–¹æ³•æˆ–è€…å·¥å…·ã€‚é‚£ä¸€èˆ¬åˆ†ä¸ºä¸‰ç§æ–¹æ³•ã€‚</p>
<p>1.æƒé‡å¯è§†åŒ–</p>
<p>è¿™ä¸ªæ¯”è¾ƒç›´è§‚ï¼Œä¸€èˆ¬éƒ½æ˜¯å¯¹å·ç§¯æƒé‡è¿›è¡Œå¯è§†åŒ–ã€‚</p>
<p>æ“ä½œæµç¨‹:ç›´æ¥å–å‚æ•°ï¼Œç„¶åè¿›è¡Œä¸€å®šçš„å½’ä¸€åŒ–ï¼Œç„¶åè½¬åŒ–ä¸ºRGBå›¾ç‰‡ã€‚</p>
<p>2.æ¿€æ´»å€¼å¯è§†åŒ–</p>
<p>è¿™ä¸ªæ˜¯å¯¹æ¿€æ´»å‡½æ•°çš„è¾“å‡ºè¿›è¡Œå¯è§†åŒ–ï¼Œé‚£ä¹ˆå°±éœ€è¦è¿›è¡ŒNNçš„å‰å‘ä¼ æ’­ã€‚</p>
<p>æ“ä½œæµç¨‹:å…ˆè¿›è¡Œå‰å‘ä¼ æ’­ï¼Œå–æŸä¸€å±‚çš„æ¿€æ´»å€¼ï¼Œç„¶åè¿›è¡Œå½’ä¸€åŒ–ï¼Œæœ€åè½¬åŒ–ä¸ºRGBå›¾ç‰‡ã€‚</p>
<p>3.åå·ç§¯çš„å¯è§†åŒ–</p>
<p>è¿™ç¯‡è®ºæ–‡ä»‹ç»çš„å¯è§†åŒ–ï¼Œæ˜¯éœ€è¦ç»è¿‡è®­ç»ƒï¼Œç„¶åç»è¿‡åå·ç§¯ (åå·ç§¯å±‚+åpoolingå±‚) çš„è¾“å‡ºå€¼çš„å¯è§†åŒ–ã€‚è¯¦ç»†çš„è¯·çœ‹è®ºæ–‡ã€‚</p>
<h1 id="å¯¹äºDCGANçš„å®ç°ç»†èŠ‚ä»¥åŠä¸€äº›tricksï¼Œå¯ä»¥æŸ¥çœ‹ï¼š"><a href="#å¯¹äºDCGANçš„å®ç°ç»†èŠ‚ä»¥åŠä¸€äº›tricksï¼Œå¯ä»¥æŸ¥çœ‹ï¼š" class="headerlink" title="å¯¹äºDCGANçš„å®ç°ç»†èŠ‚ä»¥åŠä¸€äº›tricksï¼Œå¯ä»¥æŸ¥çœ‹ï¼š"></a>å¯¹äºDCGANçš„å®ç°ç»†èŠ‚ä»¥åŠä¸€äº›tricksï¼Œå¯ä»¥æŸ¥çœ‹ï¼š</h1><p><a href="https://blog.csdn.net/c2a2o2/article/details/78535795" target="_blank" rel="noopener">https://blog.csdn.net/c2a2o2/article/details/78535795</a></p>
<h1 id="InfoGAN"><a href="#InfoGAN" class="headerlink" title="InfoGAN"></a>InfoGAN</h1><p>æ—¢ç„¶åŸå§‹çš„å™ªå£°æ˜¯æ‚ä¹±æ— ç« çš„ï¼Œé‚£å°±äººä¸ºåœ°åŠ ä¸Šä¸€äº›é™åˆ¶ï¼Œäºæ˜¯ä½œè€…æŠŠåŸæ¥çš„å™ªå£°è¾“å…¥åˆ†è§£æˆä¸¤éƒ¨åˆ†ï¼šä¸€æ˜¯åŸæ¥çš„<strong>z</strong>ï¼›äºŒæ˜¯ç”±è‹¥å¹²ä¸ªlatent variablesæ‹¼æ¥è€Œæˆçš„latent code <strong>c</strong>ï¼Œè¿™äº›latent variablesä¼šæœ‰ä¸€ä¸ªå…ˆéªŒçš„æ¦‚ç‡åˆ†å¸ƒï¼Œä¸”å¯ä»¥æ˜¯ç¦»æ•£çš„æˆ–è¿ç»­çš„ï¼Œç”¨äºä»£è¡¨ç”Ÿæˆæ•°æ®çš„ä¸åŒç‰¹å¾ç»´åº¦ï¼Œæ¯”å¦‚MNISTå®éªŒçš„latent variableså°±å¯ä»¥ç”±ä¸€ä¸ªå–å€¼èŒƒå›´ä¸º0-9çš„ç¦»æ•£éšæœºå˜é‡ï¼ˆç”¨äºè¡¨ç¤ºæ•°å­—ï¼‰å’Œä¸¤ä¸ªè¿ç»­çš„éšæœºå˜é‡ï¼ˆåˆ†åˆ«ç”¨äºè¡¨ç¤ºå€¾æ–œåº¦å’Œç²—ç»†åº¦ï¼‰æ„æˆã€‚</p>
<p><font color="orange">ä½†ä»…æœ‰è¿™ä¸ªè®¾å®šè¿˜ä¸å¤Ÿï¼Œå› ä¸ºGANä¸­Generatorçš„å­¦ä¹ å…·æœ‰å¾ˆé«˜çš„è‡ªç”±åº¦ï¼Œ</font>å®ƒå¾ˆå®¹æ˜“æ‰¾åˆ°ä¸€ä¸ªè§£ï¼Œä½¿å¾—:</p>
<script type="math/tex; mode=display">
p_G(x|c) = p_G(x)</script><p>å¯¼è‡´<strong>c</strong>å®Œå…¨ä¸èµ·ä½œç”¨ã€‚</p>
<p><strong>mutual information</strong></p>
<p>ä½œè€…ä»ä¿¡æ¯è®ºä¸­å¾—åˆ°å¯å‘ï¼Œæå‡ºäº†åŸºäºäº’ä¿¡æ¯ï¼ˆ<strong>mutual information</strong>ï¼‰çš„æ­£åˆ™åŒ–é¡¹ã€‚<strong>c</strong>çš„ä½œç”¨æ˜¯å¯¹ç”Ÿæˆæ•°æ®çš„åˆ†å¸ƒæ–½åŠ å½±å“ï¼Œäºæ˜¯éœ€è¦å¯¹è¿™ä¸¤è€…çš„å…³ç³»å»ºæ¨¡ï¼Œåœ¨ä¿¡æ¯è®ºä¸­ï¼Œäº’ä¿¡æ¯<em>I(X;Y)</em>ç”¨æ¥è¡¡é‡â€œå·²çŸ¥<em>Y</em>çš„æƒ…å†µä¸‹å¯è·å–å¤šå°‘æœ‰å…³<em>X</em>çš„ä¿¡æ¯â€ï¼Œè®¡ç®—å…¬å¼ä¸ºï¼š</p>
<script type="math/tex; mode=display">
I(X;Y) = H(X) - H(X|Y) = H(Y) - H(Y|X)</script><p>å…¶ä¸­<em>H</em>è¡¨ç¤ºè®¡ç®—entropyï¼Œ<em>H(X|Y)</em>è¡¡é‡çš„æ˜¯â€œç»™å®š<em>Y</em>çš„æƒ…å†µä¸‹ï¼Œ<em>X</em>çš„ä¸ç¡®å®šæ€§â€ã€‚ä»å…¬å¼å¯ä»¥å¾—çŸ¥ï¼Œå½“<em>X</em>å’Œ<em>Y</em>æ¯«æ— å…³è”æ—¶ï¼Œ<em>H(X|Y)</em> = <em>H(X)</em>ï¼Œ<em>I(X;Y)</em> = 0ï¼Œå–å¾—æœ€å°å€¼ï¼›å½“<em>X</em>å’Œ<em>Y</em>æœ‰æ˜ç¡®çš„å…³è”æ—¶ï¼Œå·²çŸ¥<em>Y</em>æ—¶ï¼Œ<em>X</em>æ²¡æœ‰ä¸ç¡®å®šæ€§ï¼Œå› è€Œ<em>H(X|Y)</em> = 0ï¼Œæ­¤æ—¶<em>I(X;Y)</em>å–å¾—æœ€å¤§å€¼ã€‚</p>
<p>æ‰€ä»¥ï¼Œç°åœ¨ä¼˜åŒ–ç›®æ ‡å°±å¾ˆæ˜ç¡®äº†ï¼šè¦è®©<strong>c</strong>å’ŒGeneratoråˆ†å¸ƒ<strong>G(z, c)</strong>çš„äº’ä¿¡æ¯è¾¾åˆ°æœ€å¤§å€¼ã€‚ç°åœ¨ç›®æ ‡å‡½æ•°å¯æ”¹å†™ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\min _G \max_D  V_I(D,G) = V(D,G) - \lambda I(c;G(z,c))</script><p><strong>Variational Mutual Information Maximization</strong></p>
<p>ä¸Šè¿°çš„æ¨å¯¼çœ‹ä¼¼å·²ç»å¾ˆå……è¶³äº†ï¼Œç„¶è€Œä¸Šé¢äº’ä¿¡æ¯çš„è®¡ç®—æ¶‰åŠåéªŒæ¦‚ç‡åˆ†å¸ƒ<strong>P(c|x)</strong>ï¼Œè€Œåè€…åœ¨å®é™…ä¸­æ˜¯å¾ˆéš¾è·å–çš„ï¼Œæ‰€ä»¥éœ€è¦å®šä¹‰ä¸€ä¸ªè¾…åŠ©æ€§çš„æ¦‚ç‡åˆ†å¸ƒ<strong>Q(c|x)</strong>ï¼Œé‡‡ç”¨ä¸€ç§å«ä½œVariational Information Maximizationçš„æŠ€å·§å¯¹äº’ä¿¡æ¯è¿›è¡Œä¸‹ç•Œæ‹Ÿåˆï¼š</p>
<p><img src="/images/blog/2020/DCGAN/infoGAN1.png" alt></p>
<p>å†<strong>åˆ©ç”¨æ¦‚ç‡ç§¯åˆ†å…¬å¼</strong>ï¼Œå¯æŠŠè¿™ä¸ªä¸‹ç•Œè½¬åŒ–æˆå¦‚ä¸‹çš„å½¢å¼ï¼š</p>
<script type="math/tex; mode=display">
L_I(G,Q) = E_{c \sim P(c), x \sim G(z,c)} [\log  Q(c|x)] + H(c)</script><p>å¾ˆå®¹æ˜“åœ¨ç°æœ‰çš„æ¡†æ¶ä¸­è¿›è¡Œä¼˜åŒ–ï¼Œå½“å®ƒå–å¾—æœ€å¤§å€¼<em>H(c)</em>æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿè·å¾—äº†äº’ä¿¡æ¯çš„æœ€å¤§å€¼ï¼Œè¾¾åˆ°æœ€ä¼˜ç»“æœã€‚</p>
<p>ç°åœ¨ç›®æ ‡å‡½æ•°æ”¹ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\min_{G,Q}\max_{D} V_{\mathrm{InfoGAN}}(D,G,Q) = V(D,G) -  \lambda L_I(G,Q)</script><p><strong>ç½‘ç»œæ¨¡å‹æ¦‚è§ˆ</strong></p>
<p>æœ€ç»ˆçš„ç½‘ç»œæ¨¡å‹ç¤ºæ„å›¾ä¸ºï¼š</p>
<p><img src="/images/blog/2020/DCGAN/infoGAN2.png" alt></p>
<p>ç½‘ç»œæ˜¯åŸºäºDC-GANï¼ˆDeep Convolutional GANï¼‰çš„ï¼ŒGå’ŒDéƒ½ç”±CNNæ„æˆã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼ŒQå’ŒDå…±äº«å·ç§¯ç½‘ç»œï¼Œç„¶ååˆ†åˆ«é€šè¿‡å„è‡ªçš„å…¨è¿æ¥å±‚è¾“å‡ºä¸åŒçš„å†…å®¹ï¼šQè¾“å‡ºå¯¹åº”äºfake dataçš„<strong>c</strong>çš„æ¦‚ç‡åˆ†å¸ƒï¼ŒDåˆ™ä»ç„¶åˆ¤åˆ«çœŸä¼ªã€‚</p>
<h1 id="AC-GAN"><a href="#AC-GAN" class="headerlink" title="AC-GAN"></a>AC-GAN</h1><p><img src="/images/blog/2020/CGAN/AC-GAN.png" alt></p>
<h1 id="CycleGAN"><a href="#CycleGAN" class="headerlink" title="CycleGAN"></a>CycleGAN</h1><p>æ€ä¹ˆå®ç°ä¸¤ä¸ªdomainçš„æ•°æ®è¿ç§»å‘¢ï¼Ÿä¸‹é¢ä»¥å›¾åƒä¸ºä¾‹æ¥é˜è¿°å§ã€‚</p>
<p>å®ç°å›¾åƒé—´çš„ç¿»è¯‘ï¼Œå€ŸåŠ©GANï¼Œåº”è¯¥æœ‰ä¸¤ä¸ªdomainçš„discriminatorï¼Œæ¯ä¸ªdiscriminatorå•ç‹¬åˆ¤æ–­å„è‡ªdomainçš„æ•°æ®æ˜¯å¦æ˜¯çœŸå®æ•°æ®ã€‚è‡³äºgeneratorï¼Œå›¾åƒçš„ç¿»è¯‘éœ€è¦å°†domain Açš„å›¾åƒç¿»æˆdomain Bçš„å›¾åƒï¼Œæ‰€ä»¥generatoræœ‰ç‚¹åƒautoencoderç»“æ„ï¼Œåªæ˜¯decoderçš„è¾“å‡ºä¸æ˜¯domain Açš„å›¾åƒï¼Œè€Œæ˜¯domain Bçš„å›¾åƒã€‚ä¸ºäº†å……åˆ†åˆ©ç”¨ä¸¤ä¸ªdiscriminatorï¼Œè¿˜åº”è¯¥æœ‰ä¸€ä¸ªç¿»è¯‘å›å»çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿˜æœ‰ä¸€ä¸ªgeneratorï¼Œå®ƒå°†domain Bçš„æ•°æ®ç¿»è¯‘åˆ°domain Aã€‚å¦‚æœä½ çœ‹è¿‡å¯¹å¶å­¦ä¹ ï¼ˆdual learningï¼‰é‚£ç¯‡æ–‡ç« ï¼Œä½ åº”è¯¥å¯¹æ­¤å¾ˆç†Ÿæ‚‰ã€‚æ„Ÿè§‰æœ‰ç‚¹ç»•ï¼Ÿè¿˜æ˜¯çœ‹å›¾å§ã€‚</p>
<p><img src="/images/blog/2020/DCGAN/CycleGAN.png" alt></p>
<p>å›¾ä¸­çš„è™šçº¿ç®­å¤´è¡¨ç¤ºã€å°†ç®­å¤´èµ·å§‹çš„å›¾åƒå½“åšç®­å¤´ç»“æŸçš„å›¾åƒï¼ŒæŒ‰ç…§æµç¨‹å›¾ç»§ç»­èµ° ã€ï¼Œä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå¯¹äºReal Aï¼Œå®ƒçš„å®Œæ•´æµç¨‹æ˜¯è¿™æ ·çš„ï¼š$A<em>{real} \to B</em>{fake} \to A<em>{fake}$ï¼Œå¯¹äºReal Bï¼Œå®ƒçš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼š$B</em>{real} \to A<em>{fake} \to B</em>{fake}$ã€‚å¯ä»¥çœ‹åˆ°ï¼Œæ— è®ºæ˜¯domain Aè¿˜æ˜¯domain Bçš„å›¾åƒï¼Œæ•´ä¸ªæµç¨‹å°±æ˜¯ä¸€ä¸ªcycleå•Šï¼æ‰€ä»¥å«CycleGANã€‚æ•´ä¸ªcycleå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªautoencoderï¼Œä¸¤ä¸ªgeneratorçœ‹æˆæ˜¯encoderå’Œdecoderã€‚è€Œä¸¤ä¸ªdiscriminatoråˆ™æ˜¯å‡†åˆ™ã€‚(<font color="orange">PSï¼šè¿™é‡Œçš„è™šçº¿çœŸçš„ç»™äººè¯¯å¯¼ï¼Œæƒ³äº†åŠå¤©â€¦</font>)</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œä¸¤ä¸ªgeneratorçš„è®¾è®¡æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="/images/blog/2020/DCGAN/cg.png" alt></p>
<p>zåœ¨Gä¸­æ§åˆ¶ä¸€äº›å±æ€§ï¼Œä½¿å¾—ç”Ÿæˆçš„ç»“æœä¸æ˜¯å”¯ä¸€çš„ï¼Œå¯ä»¥æ˜¯å¤šç§å¤šæ ·çš„ã€‚</p>
<p>æ˜ç¡®äº†CycleGANçš„æµç¨‹ï¼Œæˆ‘ä»¬å°±èƒ½å†™å‡ºå®ƒçš„ç›®æ ‡å‡½æ•°äº†ï¼š</p>
<p><a href="https://zhuanlan.zhihu.com/p/26995910" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/26995910</a></p>
<p>ç›¸æ¯”äºæ™®é€šçš„GANç½‘ç»œï¼Œä¸»è¦æ˜¯å¢åŠ äº†ä¸€ä¸ªé‡æ„è¯¯å·®ï¼Œç”¨äºé™åˆ¶å›¾åƒçš„è¯­ä¹‰åç§»ä¸è¦å¤ªå¤§ã€‚<strong>ä¸¾ä¸ªæ —å­ï¼šå°†ä¸€å¼ è‹¹æœçš„å›¾ç‰‡ â†’ ä¸€å¼ æ©˜å­çš„æ¼«ç”» â†’ ä¸€å¼ é¦™è•‰çš„ç…§ç‰‡</strong>ï¼Œæ•´ä¸ªè¿‡ç¨‹éƒ½ç¬¦åˆæŸå¤±å‡½æ•°çš„é™åˆ¶ï¼Œä½†æ˜¯é€ æˆäº†è¯­ä¹‰åç§»ã€‚</p>
<p>é‡æ„è¯¯å·®é‡‡ç”¨ä»¥ä¸‹å†™æ³•ï¼š</p>
<script type="math/tex; mode=display">
\mathbb{E}_{x \in \mathbb{P}} ||x - G_{AB}(G_{BA}(x))||</script><p>å¯¹äºgeneratoræ·»åŠ é‡æ„è¯¯å·®é¡¹ï¼Œè·Ÿå¯¹å¶å­¦ä¹ ä¸€æ ·ï¼Œèƒ½å¤Ÿå¼•å¯¼ä¸¤ä¸ªgeneratoræ›´å¥½åœ°å®Œæˆencodeå’Œdecodeçš„ä»»åŠ¡ã€‚è€Œä¸¤ä¸ªDåˆ™èµ·åˆ°çº æ­£ç¼–ç ç»“æœç¬¦åˆæŸä¸ªdomainçš„é£æ ¼çš„ä½œç”¨ã€‚ç»“æ„å¾ˆç®€ç­”ï¼Œä½†æ˜¯å¾ˆæœ‰æ•ˆã€‚å¹¶ä¸”ï¼Œä½ <strong>å¹¶ä¸éœ€è¦pairçš„æ•°æ®</strong>ã€‚</p>
<h2 id="1-å»æ‰é‡æ„è¯¯å·®ï¼Œæ¨¡å‹æ˜¯å¦è¿˜æœ‰æ•ˆï¼Ÿ"><a href="#1-å»æ‰é‡æ„è¯¯å·®ï¼Œæ¨¡å‹æ˜¯å¦è¿˜æœ‰æ•ˆï¼Ÿ" class="headerlink" title="1. å»æ‰é‡æ„è¯¯å·®ï¼Œæ¨¡å‹æ˜¯å¦è¿˜æœ‰æ•ˆï¼Ÿ"></a>1. å»æ‰é‡æ„è¯¯å·®ï¼Œæ¨¡å‹æ˜¯å¦è¿˜æœ‰æ•ˆï¼Ÿ</h2><p>æ¨¡å‹ä»ç„¶æœ‰æ•ˆï¼Œåªæ˜¯æ”¶æ•›æ¯”è¾ƒæ…¢ï¼Œæ¯•ç«Ÿç¼ºå°‘äº†é‡æ„è¯¯å·®è¿™æ ·çš„å¼ºå¼•å¯¼ä¿¡æ¯ã€‚ä»¥åŠï¼Œè™½ç„¶å®ç°äº†é£æ ¼è¿ç§»ï¼Œä½†æ˜¯äººç‰©çš„ä¸€äº›å±æ€§æ”¹å˜äº†ï¼Œæ¯”å¦‚å¯èƒ½å‡ºç°ã€å˜æ€§ã€ã€ã€å˜è„¸ã€ï¼Œè€Œå§¿æ€åœ¨è½¬æ¢çš„æ—¶å€™ä¸€èˆ¬ä¸å‡ºç°é”™è¯¯ã€‚<strong>è¿™è¡¨æ˜ï¼Œå¯¹å¶é‡æ„è¯¯å·®èƒ½å¤Ÿå¼•å¯¼æ¨¡å‹åœ¨è¿ç§»çš„æ—¶å€™ä¿ç•™å›¾åƒå›ºæœ‰çš„å±æ€§ï¼›è€Œå¯¹æŠ—lossåˆ™è´Ÿè´£ç¡®å®šæ¨¡å‹è¯¥å­¦ä»€ä¹ˆï¼Œè¯¥æ€ä¹ˆè¿ç§»</strong>ã€‚</p>
<h2 id="2-èƒ½ä¸èƒ½ä¸è¦å®Œæ•´çš„cycleï¼Œåªåšä¸€åŠï¼Ÿ"><a href="#2-èƒ½ä¸èƒ½ä¸è¦å®Œæ•´çš„cycleï¼Œåªåšä¸€åŠï¼Ÿ" class="headerlink" title="2. èƒ½ä¸èƒ½ä¸è¦å®Œæ•´çš„cycleï¼Œåªåšä¸€åŠï¼Ÿ"></a>2. èƒ½ä¸èƒ½ä¸è¦å®Œæ•´çš„cycleï¼Œåªåšä¸€åŠï¼Ÿ</h2><p>ç»“è®ºæ˜¯ä¸è¡Œï¼Œç¼ºå°‘äº†å¯¹å¶çš„éƒ¨åˆ†ï¼Œå°±å°‘äº†é‡æ„è¯¯å·®ï¼Œä»…ä»…ä¾é $D<em>B$æ¥çº æ­£$G</em>{AB}$æ˜¯ä¸å¤Ÿçš„ã€‚ä»è®¨è®º1æ¥çœ‹ï¼Œå¯¹å¶çš„ä½œç”¨è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œå³ä½¿ç¼ºå°‘äº†é‡æ„è¯¯å·®ã€‚ä»¥ä¸Šé¢CelebAçš„cartoonizeä¸ºä¾‹ï¼Œè¿ç§»çš„å›¾åƒå…¨æ˜¯éšæœºå™ªå£°ã€‚è¿™é‡Œå°±ä¸æ”¾ç»“æœäº†ã€‚</p>
<h1 id="cedGAN"><a href="#cedGAN" class="headerlink" title="cedGAN"></a>cedGAN</h1><p><a href="http://www.360doc.com/content/19/0417/21/32196507_829507680.shtml" target="_blank" rel="noopener">http://www.360doc.com/content/19/0417/21/32196507_829507680.shtml</a></p>
<h1 id="ProGAN"><a href="#ProGAN" class="headerlink" title="ProGAN"></a>ProGAN</h1><p>ä¸»è¦è´¡çŒ®æ˜¯æå‡ºäº†ä¸€ç§å¾ªåºæ¸è¿›çš„ç”Ÿæˆé«˜è´¨é‡å›¾ç‰‡çš„æ–¹æ³•ï¼Œ</p>
<h2 id="StyleGAN"><a href="#StyleGAN" class="headerlink" title="StyleGAN"></a>StyleGAN</h2><p>è€ŒStyleGANåˆ™æ˜¯åœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ äº†å¯¹å„ä¸ªå±æ€§çš„æ§åˆ¶ï¼Œä¾‹å¦‚æ€§åˆ«ã€å‘è‰²ã€æ˜¯å¦æˆ´çœ¼é•œç­‰ã€‚</p>
<blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/93748098" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/93748098</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/63230738" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/63230738</a></p>
</blockquote>
<p>æ„Ÿè§‰StyleGANçš„å®ç°éå¸¸å¤æ‚ï¼Œæœ‰æ—¶é—´çš„æ—¶å€™å»ä»”ç»†çš„ç²¾è¯»ã€‚</p>
<h1 id="BigGAN"><a href="#BigGAN" class="headerlink" title="BigGAN"></a>BigGAN</h1><p><strong>æŒ‰ç…§åŸæ–‡ï¼Œæ€»ç»“ä¸€ä¸‹ BigGAN çš„è´¡çŒ®ï¼š</strong></p>
<ul>
<li>é€šè¿‡å¤§è§„æ¨¡ GAN çš„åº”ç”¨ï¼ŒBigGAN å®ç°äº†ç”Ÿæˆä¸Šçš„å·¨å¤§çªç ´ï¼›</li>
<li>é‡‡ç”¨å…ˆéªŒåˆ†å¸ƒ z çš„â€œæˆªæ–­æŠ€å·§â€ï¼Œå…è®¸å¯¹æ ·æœ¬å¤šæ ·æ€§å’Œä¿çœŸåº¦è¿›è¡Œç²¾ç»†æ§åˆ¶ï¼›</li>
<li>åœ¨å¤§è§„æ¨¡ GAN çš„å®ç°ä¸Šä¸æ–­å…‹æœæ¨¡å‹è®­ç»ƒé—®é¢˜ï¼Œé‡‡ç”¨æŠ€å·§å‡å°è®­ç»ƒçš„ä¸ç¨³å®šã€‚</li>
</ul>
<p>å…¶ä¸­ä¸€ä¸ªå¾ˆå¤§çš„åŸå› å°±æ˜¯ BigGAN å¦‚å®ƒé¢˜ç›® <strong><em>Large Scale GAN Training for High Fidelity Natural Image Synthesis</em></strong> æè¿°çš„ <strong>Large Scale</strong>ï¼Œåœ¨è®­ç»ƒä¸­ Batch é‡‡ç”¨äº†å¾ˆå¤§çš„ Batchï¼Œå·²ç»è¾¾åˆ°äº† 2048ï¼ˆæˆ‘ä»¬å¹³å¸¸è®­ç»ƒ Batch æ­£å¸¸éƒ½æ˜¯ 64 å±…å¤šï¼‰ï¼Œåœ¨å·ç§¯çš„é€šé“ä¸Šä¹Ÿæ˜¯å˜å¤§äº†ï¼Œè¿˜æœ‰å°±æ˜¯ç½‘ç»œçš„å‚æ•°å˜å¤šäº†ï¼Œåœ¨ 2048 çš„ Batch ä¸‹æ•´ä¸ªç½‘ç»œçš„å‚æ•°è¾¾åˆ°äº†æ¥è¿‘ 16 äº¿ï¼ˆçœ‹äº†ä¸€ä¸‹è‡ªå·±è¿˜åœ¨ç”¨çš„ GTX 1080 çªç„¶æ²‰é»˜äº†ï¼‰ã€‚</p>
<p>BigGAN åœ¨å…ˆéªŒåˆ†å¸ƒ z çš„åµŒå…¥ä¸Šåšäº†æ”¹è¿›ï¼Œæ™®éçš„ GAN éƒ½æ˜¯å°† z ä½œä¸ºè¾“å…¥ç›´æ¥åµŒå…¥ç”Ÿæˆç½‘ç»œï¼Œè€Œ BigGAN å°†å™ªå£°å‘é‡ z é€åˆ° G çš„å¤šä¸ªå±‚è€Œä¸ä»…ä»…æ˜¯åˆå§‹å±‚ã€‚<strong>æ–‡ç« è®¤ä¸ºæ½œåœ¨ç©ºé—´ z å¯ä»¥ç›´æ¥å½±å“ä¸åŒåˆ†è¾¨ç‡å’Œå±‚æ¬¡ç»“æ„çº§åˆ«çš„ç‰¹å¾</strong>ï¼Œå¯¹äº BigGAN çš„æ¡ä»¶ç”Ÿæˆä¸Šé€šè¿‡å°† z åˆ†æˆæ¯ä¸ªåˆ†è¾¨ç‡çš„ä¸€ä¸ªå—ï¼Œå¹¶å°†æ¯ä¸ªå—è¿æ¥åˆ°æ¡ä»¶å‘é‡ c æ¥å®ç°ï¼Œè¿™æ ·æä¾›çº¦ 4ï¼… çš„é€‚åº¦æ€§èƒ½æå‡ï¼Œå¹¶å°†è®­ç»ƒé€Ÿåº¦æé«˜ 18ï¼…ã€‚</p>
<p><img src="/images/blog/2020/DCGAN/BigGAN.jpg" alt></p>
<p>å¦‚å·¦å›¾æ‰€ç¤ºå°†å™ªå£°å‘é‡ z é€šè¿‡ split ç­‰åˆ†æˆå¤šå—ï¼Œç„¶åå’Œæ¡ä»¶æ ‡ç­¾ c è¿æ¥åä¸€èµ·é€å…¥åˆ°ç”Ÿæˆç½‘ç»œçš„å„ä¸ªå±‚ä¸­ï¼Œå¯¹äºç”Ÿæˆç½‘ç»œçš„æ¯ä¸€ä¸ªæ®‹å·®å—åˆå¯ä»¥è¿›ä¸€æ­¥å±•å¼€ä¸ºå³å›¾çš„ç»“æ„ã€‚å¯ä»¥çœ‹åˆ°å™ªå£°å‘é‡ z çš„å—å’Œæ¡ä»¶æ ‡ç­¾ c åœ¨æ®‹å·®å—ä¸‹æ˜¯é€šè¿‡ concat æ“ä½œåé€å…¥ BatchNorm å±‚ï¼Œå…¶ä¸­è¿™ç§åµŒå…¥æ˜¯å…±äº«åµŒå…¥ï¼Œçº¿æ€§æŠ•å½±åˆ°æ¯ä¸ªå±‚çš„ bias å’Œ weightã€‚</p>
<p><strong>â€œæˆªæ–­æŠ€å·§â€</strong></p>
<p><strong>å¯¹äºå…ˆéªŒåˆ†å¸ƒzï¼Œä¸€èˆ¬æƒ…å†µä¸‹éƒ½æ˜¯é€‰ç”¨æ ‡å‡†æ­£æ€åˆ†å¸ƒ N(0,I) æˆ–è€…å‡åŒ€åˆ†å¸ƒ U[âˆ’1,1]ï¼Œæ–‡ç« å¯¹æ­¤å­˜åœ¨ç–‘æƒ‘ï¼Œéš¾é“åˆ«çš„åˆ†å¸ƒä¸è¡Œå—ï¼Ÿé€šè¿‡å®éªŒï¼Œä¸ºäº†é€‚åˆåç»­çš„â€œæˆªæ–­â€è¦æ±‚ï¼Œæ–‡ç« æœ€ç»ˆé€‰æ‹©äº† zâˆ¼N(0,I)ã€‚</strong></p>
<p>æ‰€è°“çš„â€œæˆªæ–­æŠ€å·§â€å°±æ˜¯é€šè¿‡å¯¹ä»å…ˆéªŒåˆ†å¸ƒ z é‡‡æ ·ï¼Œé€šè¿‡è®¾ç½®é˜ˆå€¼çš„æ–¹å¼æ¥æˆªæ–­ z çš„é‡‡æ ·ï¼Œå…¶ä¸­è¶…å‡ºèŒƒå›´çš„å€¼è¢«é‡æ–°é‡‡æ ·ä»¥è½å…¥è¯¥èŒƒå›´å†…ã€‚è¿™ä¸ªé˜ˆå€¼å¯ä»¥æ ¹æ®ç”Ÿæˆè´¨é‡æŒ‡æ ‡ IS å’Œ FID å†³å®šã€‚</p>
<p>é€šè¿‡å®éªŒå¯ä»¥çŸ¥é“é€šè¿‡å¯¹é˜ˆå€¼çš„è®¾å®šï¼Œéšç€é˜ˆå€¼çš„ä¸‹é™ç”Ÿæˆçš„è´¨é‡ä¼šè¶Šæ¥è¶Šå¥½ï¼Œä½†æ˜¯<strong>ç”±äºé˜ˆå€¼çš„ä¸‹é™ã€é‡‡æ ·çš„èŒƒå›´å˜çª„ï¼Œå°±ä¼šé€ æˆç”Ÿæˆä¸Šå–å‘å•ä¸€åŒ–ï¼Œé€ æˆç”Ÿæˆçš„å¤šæ ·æ€§ä¸è¶³çš„é—®é¢˜ã€‚</strong></p>
<p>éšç€æˆªæ–­çš„é˜ˆå€¼ä¸‹é™ï¼Œç”Ÿæˆçš„è´¨é‡åœ¨æé«˜ï¼Œä½†æ˜¯ç”Ÿæˆä¹Ÿè¶‹è¿‘äºå•ä¸€åŒ–ã€‚æ‰€ä»¥æ ¹æ®å®éªŒçš„ç”Ÿæˆè¦æ±‚ï¼Œæƒè¡¡ç”Ÿæˆè´¨é‡å’Œç”Ÿæˆå¤šæ ·æ€§æ˜¯ä¸€ä¸ªæŠ‰æ‹©ï¼Œå¾€å¾€é˜ˆå€¼çš„ä¸‹é™ä¼šå¸¦æ¥ IS çš„ä¸€è·¯ä¸Šæ¶¨ï¼Œä½†æ˜¯ FID ä¼šå…ˆå˜å¥½åä¸€è·¯å˜å·®ã€‚</p>
<h2 id="æ’å€¼"><a href="#æ’å€¼" class="headerlink" title="æ’å€¼"></a>æ’å€¼</h2><p>ä¸ºäº†è¿›ä¸€æ­¥è¯´æ˜ G ç½‘ç»œå¹¶éæ˜¯è®°ä½è®­ç»ƒé›†ï¼Œåœ¨å›ºå®š z ä¸‹é€šè¿‡è°ƒèŠ‚æ¡ä»¶æ ‡ç­¾ c åšæ’å€¼ç”Ÿæˆï¼Œé€šè¿‡ä¸‹å›¾çš„å®éªŒç»“æœå¯ä»¥å‘ç°ï¼Œæ•´ä¸ªæ’å€¼è¿‡ç¨‹æ˜¯æµç•…çš„ï¼Œä¹Ÿèƒ½è¯´æ˜ G å¹¶éæ˜¯è®°ä½è®­ç»ƒé›†ï¼Œè€Œæ˜¯çœŸæ­£åšåˆ°äº†å›¾åƒç”Ÿæˆã€‚</p>
<p><img src="/images/blog/2020/DCGAN/BigGANR.jpg" alt></p>
<h3 id="å¦‚ä½•å¯¹Cè¿›è¡Œæ’å€¼å‘¢ï¼Ÿ"><a href="#å¦‚ä½•å¯¹Cè¿›è¡Œæ’å€¼å‘¢ï¼Ÿ" class="headerlink" title="å¦‚ä½•å¯¹Cè¿›è¡Œæ’å€¼å‘¢ï¼Ÿ"></a>å¦‚ä½•å¯¹Cè¿›è¡Œæ’å€¼å‘¢ï¼Ÿ</h3><p>Cæ˜¯ä»¥è¿ç»­çš„å½¢å¼å®ç°çš„å—ï¼Ÿå¦‚ä½•å®ç°çš„ï¼Ÿæ˜¯ä»¥ç¦»æ•£çš„å½¢å¼å®ç°çš„å—ï¼Ÿé‚£å¦‚ä½•è¿›è¡Œæ’å€¼å‘¢ï¼Ÿ</p>
<blockquote>
<p>class embeddings c used for the conditional BatchNorm layers in G contain a large number of weights. Instead of having a separate layer for each embedding (Miyato et al., 2018; Zhang et al., 2018), we opt to use a shared embedding, which is linearly projected to each layerâ€™s gains and biases</p>
</blockquote>
<p>æ˜¯é‡‡ç”¨embeddingçš„å½¢å¼å®ç°çš„ã€‚</p>
<h2 id="è¸©å‘"><a href="#è¸©å‘" class="headerlink" title="è¸©å‘"></a>è¸©å‘</h2><p>æ–‡ç« çš„å¦ä¸€å¤§äº®ç‚¹æ˜¯æŠŠå®éªŒçš„ NG ç»“æœåšäº†åˆ†æï¼ŒæŠŠè‡ªå·±è¶Ÿçš„å‘å’Œå¤§å®¶åˆ†äº«äº†ï¼Œè¿™ä¸ªçœŸæ˜¯å¾ˆè‰¯å¿ƒæœ‰æ²¡æœ‰ï¼Œæˆ‘ä»¬æˆªå–å…¶ä¸­ä¸€äº›å‘åˆ†äº«ä¸€ä¸‹ï¼š</p>
<ul>
<li>ä¸€å‘³åŠ æ·±ç½‘ç»œå¯èƒ½ä¼šå¦¨ç¢ç”Ÿæˆçš„æ€§èƒ½ï¼›</li>
<li>å…±äº«ç±»çš„æ€æƒ³åœ¨æ§åˆ¶è¶…å‚æ•°ä¸Šæ˜¯å¾ˆéº»çƒ¦çš„ï¼Œè™½ç„¶å¯èƒ½ä¼šæé«˜è®­ç»ƒé€Ÿåº¦ï¼›</li>
<li>WeightNorm æ›¿æ¢ G ä¸­çš„ BatchNorm å¹¶æ²¡æœ‰è¾¾åˆ°å¥½çš„æ•ˆæœï¼›</li>
<li>é™¤äº†é¢‘è°±è§„èŒƒåŒ–ä¹‹å¤–ï¼Œå°è¯•å°† BatchNorm æ·»åŠ åˆ° Dï¼ˆåŒ…æ‹¬ç±»æ¡ä»¶å’Œæ— æ¡ä»¶ï¼‰ï¼Œä½†å¹¶æœªå–çš„å¥½çš„æ•ˆæœï¼›</li>
<li>åœ¨ G æˆ– D æˆ–ä¸¤è€…ä¸­ä½¿ç”¨ 5 æˆ– 7 è€Œä¸æ˜¯ 3 çš„æ»¤æ³¢å™¨å¤§å°ï¼Œ5 çš„æ»¤æ³¢å™¨å¯èƒ½ä¼šæœ‰äº›è®¸æå‡ï¼Œä½†æ˜¯è®¡ç®—æˆæœ¬ä¹Ÿä¸Šå»äº†ï¼›</li>
<li>å°è¯•åœ¨ 128Ã—128 çš„ G å’Œ D ä¸­æ”¹å˜å·ç§¯æ»¤æ³¢å™¨çš„æ‰©å¼ ï¼Œä½†å‘ç°åœ¨ä»»ä¸€ç½‘ç»œä¸­å³ä½¿å°‘é‡çš„æ‰©å¼ ä¹Ÿä¼šé™ä½æ€§èƒ½ï¼›</li>
<li>å°è¯•ç”¨ G ä¸­çš„åŒçº¿æ€§ä¸Šé‡‡æ ·ä»£æ›¿æœ€è¿‘é¢†è¿‘çš„ä¸Šé‡‡æ ·ï¼Œä½†è¿™é™ä½äº†æ€§èƒ½ã€‚</li>
</ul>
]]></content>
      <tags>
        <tag>GAN</tag>
        <tag>ç”Ÿæˆæ¨¡å‹</tag>
        <tag>Adversarial Training</tag>
      </tags>
  </entry>
  <entry>
    <title>RESIDE å®ä½“ç±»å‹ (Entity Type) è´¨é‡è€ƒå¯Ÿ</title>
    <url>/2020/12/21/RESIDE-%E5%AE%9E%E4%BD%93%E7%B1%BB%E5%9E%8B-Entity-Type-%E8%B4%A8%E9%87%8F%E8%80%83%E5%AF%9F/</url>
    <content><![CDATA[<h1 id="Entity-Type"><a href="#Entity-Type" class="headerlink" title="Entity Type"></a>Entity Type</h1><h2 id="å‘ç°1-RESIDEæ›´è¯¦ç»†"><a href="#å‘ç°1-RESIDEæ›´è¯¦ç»†" class="headerlink" title="å‘ç°1. RESIDEæ›´è¯¦ç»†"></a>å‘ç°1. RESIDEæ›´è¯¦ç»†</h2><p>ä¾‹å¦‚å¯¹äºm.01wgcvnï¼Œæˆ‘è¯†åˆ«å‡ºç±»å‹ä¸ºpeople.personï¼Œè€ŒRESIDEæ›´å…¨é¢ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">[<span class="string">"/person/actor"</span>, <span class="string">"/person"</span>, <span class="string">"/person/artist"</span>]</span><br></pre></td></tr></table></figure>
<h2 id="å‘ç°2-RESIDEå‡†ç¡®ç‡å¾ˆé«˜"><a href="#å‘ç°2-RESIDEå‡†ç¡®ç‡å¾ˆé«˜" class="headerlink" title="å‘ç°2. RESIDEå‡†ç¡®ç‡å¾ˆé«˜"></a>å‘ç°2. RESIDEå‡†ç¡®ç‡å¾ˆé«˜</h2><p>éšæœºé‡‡æ ·æˆ‘ä¸ªäººç”Ÿæˆçš„å®ä½“ç±»åˆ«ï¼Œåœ¨people, location, organization, sports_team, religion, languageä¸­éšæœºé‡‡æ ·è‹¥å¹²æ ·æœ¬ï¼Œä¸RESIDEæ¯”è¾ƒï¼Œå‘ç°ä¸€è‡´ç‡åœ¨95%ä»¥ä¸Šã€‚</p>
<h2 id="å‘ç°3-å¯ä»¥è¡¥å……RESIDE"><a href="#å‘ç°3-å¯ä»¥è¡¥å……RESIDE" class="headerlink" title="å‘ç°3. å¯ä»¥è¡¥å……RESIDE"></a>å‘ç°3. å¯ä»¥è¡¥å……RESIDE</h2><p>å¯¹äºm.05qv655ï¼ŒRESIDEä¸ºç©ºï¼Œè€Œæˆ‘ä»¬å¯ä»¥æ­£ç¡®è¯†åˆ«å‡ºreligion.religion</p>
<h2 id="åˆå¹¶"><a href="#åˆå¹¶" class="headerlink" title="åˆå¹¶"></a>åˆå¹¶</h2><font color="orange">å¦‚æœRESIDEå¯¹åº”midçš„Typeä¸ºç©ºï¼Œåˆ™å¯¹å…¶è¿›è¡Œè¡¥å……ï¼›å¦åˆ™ç»´æŒåŸçŠ¶ã€‚</font>

<p>åœ¨å¯¹RESIDEè¿›è¡Œè¡¥å……çš„æ—¶å€™ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ–¹å¼æ˜ å°„ï¼š</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    '': '', </span><br><span class="line">    'film.film_festival': '/art/film', </span><br><span class="line">    'people.family': ['/people/family', '/person'], </span><br><span class="line">    'organization.organization': '/organization',</span><br><span class="line">    'people.person': '/person', </span><br><span class="line">    'people.ethnicity': '/people/ethnicity', </span><br><span class="line">    'location.location': '/location', </span><br><span class="line">    'religion.religion': '/religion/religion', </span><br><span class="line">    'sports.sports_team': '/organization/sports_team', </span><br><span class="line">    'film.film': '/art/film', </span><br><span class="line">    'language.human_language': '/language', </span><br><span class="line">    'people.profession': '/title'</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€ç»ˆå¾—åˆ°çš„å®ä½“ç±»å‹type2idä¸ºï¼š<a id="more"></a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> <span class="attr">"NA"</span>: <span class="number">0</span>,</span><br><span class="line"> <span class="attr">"/art"</span>: <span class="number">1</span>,</span><br><span class="line"> <span class="attr">"/art/film"</span>: <span class="number">2</span>,</span><br><span class="line"> <span class="attr">"/astral_body"</span>: <span class="number">3</span>,</span><br><span class="line"> <span class="attr">"/award"</span>: <span class="number">4</span>,</span><br><span class="line"> <span class="attr">"/broadcast/tv_channel"</span>: <span class="number">5</span>,</span><br><span class="line"> <span class="attr">"/broadcast_network"</span>: <span class="number">6</span>,</span><br><span class="line"> <span class="attr">"/broadcast_program"</span>: <span class="number">7</span>,</span><br><span class="line"> <span class="attr">"/building"</span>: <span class="number">8</span>,</span><br><span class="line"> <span class="attr">"/building/airport"</span>: <span class="number">9</span>,</span><br><span class="line"> <span class="attr">"/building/dam"</span>: <span class="number">10</span>,</span><br><span class="line"> <span class="attr">"/building/hospital"</span>: <span class="number">11</span>,</span><br><span class="line"> <span class="attr">"/building/hotel"</span>: <span class="number">12</span>,</span><br><span class="line"> <span class="attr">"/building/library"</span>: <span class="number">13</span>,</span><br><span class="line"> <span class="attr">"/building/restaurant"</span>: <span class="number">14</span>,</span><br><span class="line"> <span class="attr">"/building/sports_facility"</span>: <span class="number">15</span>,</span><br><span class="line"> <span class="attr">"/building/theater"</span>: <span class="number">16</span>,</span><br><span class="line"> <span class="attr">"/chemistry"</span>: <span class="number">17</span>,</span><br><span class="line"> <span class="attr">"/education/department"</span>: <span class="number">18</span>,</span><br><span class="line"> <span class="attr">"/education/educational_degree"</span>: <span class="number">19</span>,</span><br><span class="line"> <span class="attr">"/event"</span>: <span class="number">20</span>,</span><br><span class="line"> <span class="attr">"/event/attack"</span>: <span class="number">21</span>,</span><br><span class="line"> <span class="attr">"/event/election"</span>: <span class="number">22</span>,</span><br><span class="line"> <span class="attr">"/event/military_conflict"</span>: <span class="number">23</span>,</span><br><span class="line"> <span class="attr">"/event/natural_disaster"</span>: <span class="number">24</span>,</span><br><span class="line"> <span class="attr">"/finance/stock_exchange"</span>: <span class="number">25</span>,</span><br><span class="line"> <span class="attr">"/food"</span>: <span class="number">26</span>,</span><br><span class="line"> <span class="attr">"/game"</span>: <span class="number">27</span>,</span><br><span class="line"> <span class="attr">"/geography/glacier"</span>: <span class="number">28</span>,</span><br><span class="line"> <span class="attr">"/geography/island"</span>: <span class="number">29</span>,</span><br><span class="line"> <span class="attr">"/geography/mountain"</span>: <span class="number">30</span>,</span><br><span class="line"> <span class="attr">"/god"</span>: <span class="number">31</span>,</span><br><span class="line"> <span class="attr">"/government/government"</span>: <span class="number">32</span>,</span><br><span class="line"> <span class="attr">"/government/political_party"</span>: <span class="number">33</span>,</span><br><span class="line"> <span class="attr">"/government_agency"</span>: <span class="number">34</span>,</span><br><span class="line"> <span class="attr">"/internet/website"</span>: <span class="number">35</span>,</span><br><span class="line"> <span class="attr">"/language"</span>: <span class="number">36</span>,</span><br><span class="line"> <span class="attr">"/living_thing"</span>: <span class="number">37</span>,</span><br><span class="line"> <span class="attr">"/location"</span>: <span class="number">38</span>,</span><br><span class="line"> <span class="attr">"/location/body_of_water"</span>: <span class="number">39</span>,</span><br><span class="line"> <span class="attr">"/location/bridge"</span>: <span class="number">40</span>,</span><br><span class="line"> <span class="attr">"/location/cemetery"</span>: <span class="number">41</span>,</span><br><span class="line"> <span class="attr">"/location/city"</span>: <span class="number">42</span>,</span><br><span class="line"> <span class="attr">"/location/country"</span>: <span class="number">43</span>,</span><br><span class="line"> <span class="attr">"/location/county"</span>: <span class="number">44</span>,</span><br><span class="line"> <span class="attr">"/location/province"</span>: <span class="number">45</span>,</span><br><span class="line"> <span class="attr">"/military"</span>: <span class="number">46</span>,</span><br><span class="line"> <span class="attr">"/music"</span>: <span class="number">47</span>,</span><br><span class="line"> <span class="attr">"/news_agency"</span>: <span class="number">48</span>,</span><br><span class="line"> <span class="attr">"/newspaper"</span>: <span class="number">49</span>,</span><br><span class="line"> <span class="attr">"/organization"</span>: <span class="number">50</span>,</span><br><span class="line"> <span class="attr">"/organization/airline"</span>: <span class="number">51</span>,</span><br><span class="line"> <span class="attr">"/organization/company"</span>: <span class="number">52</span>,</span><br><span class="line"> <span class="attr">"/organization/educational_institution"</span>: <span class="number">53</span>,</span><br><span class="line"> <span class="attr">"/organization/fraternity_sorority"</span>: <span class="number">54</span>,</span><br><span class="line"> <span class="attr">"/organization/sports_league"</span>: <span class="number">55</span>,</span><br><span class="line"> <span class="attr">"/organization/sports_team"</span>: <span class="number">56</span>,</span><br><span class="line"> <span class="attr">"/organization/terrorist_organization"</span>: <span class="number">57</span>,</span><br><span class="line"> <span class="attr">"/park"</span>: <span class="number">58</span>,</span><br><span class="line"> <span class="attr">"/people/ethnicity"</span>: <span class="number">59</span>,</span><br><span class="line"> <span class="attr">"/people/family"</span>: <span class="number">60</span>,</span><br><span class="line"> <span class="attr">"/person"</span>: <span class="number">61</span>,</span><br><span class="line"> <span class="attr">"/person/actor"</span>: <span class="number">62</span>,</span><br><span class="line"> <span class="attr">"/person/architect"</span>: <span class="number">63</span>,</span><br><span class="line"> <span class="attr">"/person/artist"</span>: <span class="number">64</span>,</span><br><span class="line"> <span class="attr">"/person/athlete"</span>: <span class="number">65</span>,</span><br><span class="line"> <span class="attr">"/person/author"</span>: <span class="number">66</span>,</span><br><span class="line"> <span class="attr">"/person/coach"</span>: <span class="number">67</span>,</span><br><span class="line"> <span class="attr">"/person/director"</span>: <span class="number">68</span>,</span><br><span class="line"> <span class="attr">"/person/doctor"</span>: <span class="number">69</span>,</span><br><span class="line"> <span class="attr">"/person/engineer"</span>: <span class="number">70</span>,</span><br><span class="line"> <span class="attr">"/person/monarch"</span>: <span class="number">71</span>,</span><br><span class="line"> <span class="attr">"/person/musician"</span>: <span class="number">72</span>,</span><br><span class="line"> <span class="attr">"/person/politician"</span>: <span class="number">73</span>,</span><br><span class="line"> <span class="attr">"/person/religious_leader"</span>: <span class="number">74</span>,</span><br><span class="line"> <span class="attr">"/person/soldier"</span>: <span class="number">75</span>,</span><br><span class="line"> <span class="attr">"/person/terrorist"</span>: <span class="number">76</span>,</span><br><span class="line"> <span class="attr">"/play"</span>: <span class="number">77</span>,</span><br><span class="line"> <span class="attr">"/product"</span>: <span class="number">78</span>,</span><br><span class="line"> <span class="attr">"/product/computer"</span>: <span class="number">79</span>,</span><br><span class="line"> <span class="attr">"/product/ship"</span>: <span class="number">80</span>,</span><br><span class="line"> <span class="attr">"/product/weapon"</span>: <span class="number">81</span>,</span><br><span class="line"> <span class="attr">"/rail/railway"</span>: <span class="number">82</span>,</span><br><span class="line"> <span class="attr">"/religion/religion"</span>: <span class="number">83</span>,</span><br><span class="line"> <span class="attr">"/software"</span>: <span class="number">84</span>,</span><br><span class="line"> <span class="attr">"/title"</span>: <span class="number">85</span>,</span><br><span class="line"> <span class="attr">"/transit"</span>: <span class="number">86</span>,</span><br><span class="line"> <span class="attr">"/transportation/road"</span>: <span class="number">87</span>,</span><br><span class="line"> <span class="attr">"/written_work"</span>: <span class="number">88</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Relation-Alias"><a href="#Relation-Alias" class="headerlink" title="Relation Alias"></a>Relation Alias</h1><p>ç»è¿‡è§‚å¯Ÿï¼Œrelation_alias_from_wikidata_ppdb_extended.jsonæœ‰ä¸é”™çš„è´¨é‡ï¼Œä½œè€…åº”è¯¥åœ¨åˆ©ç”¨PPDBå¯¹å…³ç³»çŸ­è¯­æ‰©å±•åï¼Œ<strong>æœ‰ä¸€ä¸ªæ‰‹åŠ¨ç­›é€‰çš„è¿‡ç¨‹</strong>ï¼Œå› æ­¤ï¼Œå¯ä»¥ç›´æ¥æ‹¿æ¥åŠ ä»¥åˆ©ç”¨ã€‚</p>
]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
        <category>Distant Supervision</category>
      </categories>
      <tags>
        <tag>Freebase</tag>
        <tag>Relation Extraction</tag>
        <tag>Distant Supervision</tag>
        <tag>RE</tag>
        <tag>Entity Type</tag>
        <tag>NER</tag>
        <tag>Relation Aliases</tag>
        <tag>Wikidata</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ©ç”¨é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹è®¡ç®—å¥å­ç›¸ä¼¼åº¦</title>
    <url>/2020/12/21/%E5%88%A9%E7%94%A8%E9%A2%84%E8%AE%AD%E7%BB%83%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E8%AE%A1%E7%AE%97%E5%8F%A5%E5%AD%90%E7%9B%B8%E4%BC%BC%E5%BA%A6/</url>
    <content><![CDATA[<p>ä½¿ç”¨huggingfaceçš„BertForMaskedLMåšé¢„è®­ç»ƒåçš„äºŒæ¬¡é¢„è®­ç»ƒï¼Œå³fine-tuningï¼Œåœ¨NYTæ•°æ®é›†ä¸Šã€‚</p>
<p>å…·ä½“çš„ä»£ç å®ç°å¯ä»¥å‚è€ƒå®˜æ–¹çš„<a href="https://github.com/huggingface/transformers/tree/master/examples" target="_blank" rel="noopener">github</a>, æœ‰å¾ˆå¤šçš„ä¾‹å­å¯ä»¥å­¦ä¹ ï¼Œéå¸¸ä¸é”™~</p>
<h1 id="æ’æ›²"><a href="#æ’æ›²" class="headerlink" title="æ’æ›²"></a>æ’æ›²</h1><p>åœ¨è¯¢é—®å­¦é•¿åå¾—çŸ¥ï¼Œä½¿ç”¨wwmï¼Œå³whole-word-maskingï¼Œå¯ä»¥æ¯”è¾ƒæ˜¾è‘—çš„æé«˜æ•ˆæœã€‚ä½†æ˜¯ï¼Œåœ¨<a href="https://huggingface.co/transformers/pretrained_models.html" target="_blank" rel="noopener">huggingfaceçš„ç½‘ç«™</a>ä¸Šï¼Œç›®å‰åªæœ‰bert-large-cased-whole-word-maskingï¼Œè€ƒè™‘åˆ°å¯¹æ¯”çš„æ–¹æ³•ç›®å‰ç”¨åˆ°çš„æ˜¯bert-baseå’Œgptï¼Œè€Œä¸”é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ä¸æ˜¯æˆ‘ä»¬çš„åˆ›æ–°ç‚¹ï¼Œ<strong>æ‰€ä»¥æœ€ç»ˆé‡‡ç”¨bert-base-casedï¼Œæš‚æ—¶ä¸ç”¨wwm</strong></p>
<p>å¦å¤–ï¼Œåœ¨è®­ç»ƒçš„æ—¶å€™æ•´ä¸ªè¿›åº¦æ¡æ˜¾ç¤ºçš„æ˜¯å…¨éƒ¨è®­ç»ƒéœ€è¦èŠ±è´¹çš„æ—¶é—´ï¼Œä¸¾ä¸ªæ —å­ï¼Œå¦‚æœè®­ç»ƒepochæ•°ä¸º3ï¼Œåˆ™æ˜¾ç¤ºçš„ä¸º3ä¸ªepochå¯¹åº”çš„æ‰€æœ‰æ­¥æ•°ã€‚</p>
<p><img src="/images/blog/2020/run_mlm.png" alt></p>
<p>åœ¨150MBçš„æ–‡æœ¬è¯­æ–™ä¸Šè®­ç»ƒï¼Œåˆ©ç”¨ä¸¤ä¸ªRTX 24GBæ˜¾å¡ï¼Œbatch_sizeè®¾ä¸º16ï¼Œepochä¸º3ï¼Œæ¯å¼ å¡æ˜¾å­˜å ç”¨ä¸º11GBå·¦å³ï¼Œæ•´ä¸ªè®­ç»ƒè¿‡ç¨‹è€—æ—¶9ä¸ªå°æ—¶ã€‚</p>
<h1 id="run-mlm-py"><a href="#run-mlm-py" class="headerlink" title="run_mlm.py"></a>run_mlm.py</h1><p>æˆ‘ä»¬é‡‡ç”¨<a href="https://github.com/huggingface/transformers/tree/master/examples/language-modeling" target="_blank" rel="noopener">run_mlm.py</a>æ¥è¿›è¡Œbertçš„fine-tuningè¿‡ç¨‹ã€‚</p>
<h2 id="æ•°æ®é¢„å¤„ç†"><a href="#æ•°æ®é¢„å¤„ç†" class="headerlink" title="æ•°æ®é¢„å¤„ç†"></a>æ•°æ®é¢„å¤„ç†</h2><p>åœ¨è¿›è¡ŒMLMä»»åŠ¡ä¹‹å‰ï¼Œæ˜¯å¦éœ€è¦å¯¹æ–‡æœ¬è¿›è¡Œé¢„å¤„ç†å‘¢ï¼Ÿå¸¸è§çš„é¢„å¤„ç†æŠ€æœ¯æœ‰è½¬æ¢ä¸ºå°å†™ã€å»é™¤æ ‡ç‚¹ã€å»é™¤åœç”¨è¯ã€æå–è¯å¹²ç­‰ç­‰ï¼Œ<font color="orange">ä½†æ˜¯ï¼Œè€ƒè™‘åˆ°é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹è¯è¡¨è¶³å¤Ÿå¤§ï¼Œè§è¿‡çš„è¯­æ–™è¶³å¤Ÿå¤šï¼Œèƒ½åŠ›è¶³å¤Ÿå¼º</font>ï¼Œæ‰€ä»¥ï¼Œ<strong>ä¸è¿›è¡Œä»»ä½•çš„æ–‡æœ¬é¢„å¤„ç†å·¥ä½œ</strong>ï¼Œç›´æ¥ä¸¢ç»™BERTã€‚</p>
<h2 id="sh"><a href="#sh" class="headerlink" title=".sh"></a>.sh</h2><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œç¨‹åºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python run_mlm.py \</span><br><span class="line">  --model_name_or_path /data/klhao/BERT/bert-base-cased \</span><br><span class="line">  --train_file nyt_corpus_train.txt \</span><br><span class="line">  --validation_file nyt_corpus_valid.txt \</span><br><span class="line">  --do_train \</span><br><span class="line">  --do_eval \</span><br><span class="line">  --output_dir output \</span><br><span class="line">  --line_by_line \</span><br><span class="line">  --max_seq_length 500</span><br></pre></td></tr></table></figure>
<p>ç¨‹åºå¼€å§‹æ„‰å¿«çš„è¿è¡Œäº†ï¼~</p>
<a id="more"></a>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[INFO|trainer.py:677] 2020-12-21 19:27:58,439 &gt;&gt; ***** Running training *****</span><br><span class="line">[INFO|trainer.py:678] 2020-12-21 19:27:58,439 &gt;&gt;   Num examples = 660306</span><br><span class="line">[INFO|trainer.py:679] 2020-12-21 19:27:58,440 &gt;&gt;   Num Epochs = 3</span><br><span class="line">[INFO|trainer.py:680] 2020-12-21 19:27:58,440 &gt;&gt;   Instantaneous batch size per device = 8</span><br><span class="line">[INFO|trainer.py:681] 2020-12-21 19:27:58,440 &gt;&gt;   Total train batch size (w. parallel, distributed &amp; accumulation) = 16</span><br><span class="line">[INFO|trainer.py:682] 2020-12-21 19:27:58,440 &gt;&gt;   Gradient Accumulation steps = 1</span><br><span class="line">[INFO|trainer.py:683] 2020-12-21 19:27:58,440 &gt;&gt;   Total optimization steps = 123810</span><br></pre></td></tr></table></figure>
<p><strong>è®­ç»ƒäº†3ä¸ªepochï¼Œæœ€ç»ˆåœ¨lossä¸º1.40å·¦å³çš„æ—¶å€™å°±é™ä¸ä¸‹å»äº†ï¼Œçº¿æ€§å­¦ä¹ ç‡è°ƒåº¦å™¨æ­¤æ—¶ä¹Ÿå°†å­¦ä¹ ç‡é™åˆ°äº†1e-7è¿™ä¸ªæ•°é‡çº§ã€‚</strong></p>
<h1 id="run-mlm-wwm-py"><a href="#run-mlm-wwm-py" class="headerlink" title="run_mlm_wwm.py"></a>run_mlm_wwm.py</h1><p>ç”±äºpypiæ›´æ–°ä¸åŠæ—¶ï¼Œéœ€è¦ä»gitå®‰è£…transformersï¼Œå‘½ä»¤ä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/huggingface/transformers.git</span><br><span class="line"><span class="built_in">cd</span> transformers</span><br><span class="line">pip install -e .</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œå‘½ä»¤ä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">CUDA_VISIBLE_DEVICES=1 python run_mlm_wwm.py --model_name_or_path ../BERT/bert-large-cased-whole-word-masking --train_file nyt_corpus.txt --do_train --output_dir output --max_seq_length 200 --num_train_epochs 5  --per_device_train_batch_size 20 --save_steps 10000 --save_total_limit 8</span><br></pre></td></tr></table></figure>
<p>åœ¨NYTä¸Šè®­ç»ƒè€—æ—¶24Hï¼Œé‡‡ç”¨bert-large-cased-whole-word-maskingã€‚</p>
<p><strong>æ¯ä¸€ä¸ªcheckpointå ç”¨å†…å­˜ä¸º4Gå·¦å³ã€‚</strong></p>
<p><strong>è¿è¡Œç»“æŸåï¼Œæœ€ç»ˆlossé™åˆ°äº†1.15å·¦å³ï¼Œè¯´æ˜æˆ‘ä»¬ä¹‹å‰çš„é¢„è®­ç»ƒå¯èƒ½è¿˜ä¸å¤Ÿå……åˆ†ï¼Œä¸‹é¢æˆ‘å‡†å¤‡è°ƒåˆ°10ä¸ªepochå†æ¬¡è¿›è¡Œå°è¯•</strong></p>
<h2 id="10ä¸ªepoch"><a href="#10ä¸ªepoch" class="headerlink" title="10ä¸ªepoch"></a>10ä¸ªepoch</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python run_mlm_wwm.py --model_name_or_path ../BERT/bert-large-cased-whole-word-masking --train_file nyt_corpus.txt --do_train --output_dir output --max_seq_length 200 --num_train_epochs 10  --per_device_train_batch_size 20 --save_steps 10000 --save_total_limit 3</span><br></pre></td></tr></table></figure>
<font color="orange">å°è¯•çœ‹æ˜¯å¦è¿˜ä¼šç”±æ•ˆæœçš„æå‡~</font>

<h2 id="è¿è¡Œlog"><a href="#è¿è¡Œlog" class="headerlink" title="è¿è¡Œlog"></a>è¿è¡Œlog</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[INFO|trainer.py:395] 2020-12-28 18:28:39,231 &gt;&gt; The following columns <span class="keyword">in</span> the training <span class="built_in">set</span> don<span class="string">'t have a corresponding argument in `BertForMaskedLM.forward` and have been ignored: .</span></span><br><span class="line"><span class="string">[INFO|trainer.py:718] 2020-12-28 18:28:39,238 &gt;&gt; ***** Running training *****</span></span><br><span class="line"><span class="string">[INFO|trainer.py:719] 2020-12-28 18:28:39,239 &gt;&gt;   Num examples = 695059</span></span><br><span class="line"><span class="string">[INFO|trainer.py:720] 2020-12-28 18:28:39,239 &gt;&gt;   Num Epochs = 5</span></span><br><span class="line"><span class="string">[INFO|trainer.py:721] 2020-12-28 18:28:39,239 &gt;&gt;   Instantaneous batch size per device = 20</span></span><br><span class="line"><span class="string">[INFO|trainer.py:722] 2020-12-28 18:28:39,239 &gt;&gt;   Total train batch size (w. parallel, distributed &amp; accumulation) = 20</span></span><br><span class="line"><span class="string">[INFO|trainer.py:723] 2020-12-28 18:28:39,239 &gt;&gt;   Gradient Accumulation steps = 1</span></span><br><span class="line"><span class="string">[INFO|trainer.py:724] 2020-12-28 18:28:39,239 &gt;&gt;   Total optimization steps = 173765</span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 2.065851318359375, '</span>learning_rate<span class="string">': 4.985612752855869e-05, '</span>epoch<span class="string">': 0.014387247144131442&#125;</span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 2.04491845703125, '</span>learning_rate<span class="string">': 4.9712255057117375e-05, '</span>epoch<span class="string">': 0.028774494288262883&#125;</span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 2.058274658203125, '</span>learning_rate<span class="string">': 4.956838258567606e-05, '</span>epoch<span class="string">': 0.043161741432394325&#125;                                                                                           </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 2.0292010498046875, '</span>learning_rate<span class="string">': 4.942451011423475e-05, '</span>epoch<span class="string">': 0.05754898857652577&#125;                                                                                           </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 2.0228314208984375, '</span>learning_rate<span class="string">': 4.9280637642793434e-05, '</span>epoch<span class="string">': 0.07193623572065722&#125;                                                                                          </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 2.018800048828125, '</span>learning_rate<span class="string">': 4.913676517135212e-05, '</span>epoch<span class="string">': 0.08632348286478865&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 2.0110439453125, '</span>learning_rate<span class="string">': 4.89928926999108e-05, '</span>epoch<span class="string">': 0.1007107300089201&#125;                                                                                                </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 2.0043060302734377, '</span>learning_rate<span class="string">': 4.8849020228469486e-05, '</span>epoch<span class="string">': 0.11509797715305153&#125;                                                                                          </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.9853199462890625, '</span>learning_rate<span class="string">': 4.870514775702817e-05, '</span>epoch<span class="string">': 0.12948522429718298&#125;                                                                                           </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.9929195556640624, '</span>learning_rate<span class="string">': 4.856127528558686e-05, '</span>epoch<span class="string">': 0.14387247144131443&#125;                                                                                           </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.9991339111328126, '</span>learning_rate<span class="string">': 4.8417402814145545e-05, '</span>epoch<span class="string">': 0.15825971858544585&#125;                                                                                          </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.98677978515625, '</span>learning_rate<span class="string">': 4.827353034270423e-05, '</span>epoch<span class="string">': 0.1726469657295773&#125;                                                                                              </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 2.007623291015625, '</span>learning_rate<span class="string">': 4.812965787126292e-05, '</span>epoch<span class="string">': 0.18703421287370875&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.9972188720703126, '</span>learning_rate<span class="string">': 4.79857853998216e-05, '</span>epoch<span class="string">': 0.2014214600178402&#125;                                                                                             </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.9690428466796874, '</span>learning_rate<span class="string">': 4.7841912928380284e-05, '</span>epoch<span class="string">': 0.21580870716197162&#125;                                                                                          </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.959529052734375, '</span>learning_rate<span class="string">': 4.769804045693897e-05, '</span>epoch<span class="string">': 0.23019595430610307&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.9772723388671876, '</span>learning_rate<span class="string">': 4.7554167985497656e-05, '</span>epoch<span class="string">': 0.24458320145023452&#125;                                                                                          </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.956650146484375, '</span>learning_rate<span class="string">': 4.741029551405634e-05, '</span>epoch<span class="string">': 0.25897044859436597&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.9764119873046875, '</span>learning_rate<span class="string">': 4.726642304261503e-05, '</span>epoch<span class="string">': 0.2733576957384974&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.9451396484375, '</span>learning_rate<span class="string">': 4.7122550571173715e-05, '</span>epoch<span class="string">': 0.28774494288262886&#125;                                                                                             </span></span><br><span class="line"><span class="string">  6%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                                                                                                                    | 10000/173765 [1:29:26&lt;27:18:00,  1.67it/s][INFO|trainer.py:1248] 2020-12-28 19:58:05,894 &gt;&gt; Saving model checkpoint to output/checkpoint-10000</span></span><br><span class="line"><span class="string">[INFO|configuration_utils.py:289] 2020-12-28 19:58:05,896 &gt;&gt; Configuration saved in output/checkpoint-10000/config.json</span></span><br><span class="line"><span class="string">[INFO|modeling_utils.py:814] 2020-12-28 19:58:09,676 &gt;&gt; Model weights saved in output/checkpoint-10000/pytorch_model.bin</span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.967901123046875, '</span>learning_rate<span class="string">': 4.69786780997324e-05, '</span>epoch<span class="string">': 0.3021321900267603&#125;                                                                                              </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.9398819580078126, '</span>learning_rate<span class="string">': 4.683480562829108e-05, '</span>epoch<span class="string">': 0.3165194371708917&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.9575858154296875, '</span>learning_rate<span class="string">': 4.669093315684977e-05, '</span>epoch<span class="string">': 0.3309066843150232&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.935358642578125, '</span>learning_rate<span class="string">': 4.6547060685408454e-05, '</span>epoch<span class="string">': 0.3452939314591546&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.920288330078125, '</span>learning_rate<span class="string">': 4.640318821396714e-05, '</span>epoch<span class="string">': 0.359681178603286&#125;                                                                                              </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.9564296875, '</span>learning_rate<span class="string">': 4.6259315742525826e-05, '</span>epoch<span class="string">': 0.3740684257474175&#125;                                                                                                 </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.9050736083984374, '</span>learning_rate<span class="string">': 4.611544327108451e-05, '</span>epoch<span class="string">': 0.3884556728915489&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.9197130126953126, '</span>learning_rate<span class="string">': 4.59715707996432e-05, '</span>epoch<span class="string">': 0.4028429200356804&#125;                                                                                             </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.9287261962890625, '</span>learning_rate<span class="string">': 4.5827698328201885e-05, '</span>epoch<span class="string">': 0.4172301671798118&#125;                                                                                           </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.897843017578125, '</span>learning_rate<span class="string">': 4.568382585676057e-05, '</span>epoch<span class="string">': 0.43161741432394324&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.918166015625, '</span>learning_rate<span class="string">': 4.553995338531926e-05, '</span>epoch<span class="string">': 0.4460046614680747&#125;                                                                                                </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.9367061767578124, '</span>learning_rate<span class="string">': 4.5396080913877944e-05, '</span>epoch<span class="string">': 0.46039190861220614&#125;                                                                                          </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.93353662109375, '</span>learning_rate<span class="string">': 4.525220844243663e-05, '</span>epoch<span class="string">': 0.47477915575633756&#125;                                                                                             </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.894266357421875, '</span>learning_rate<span class="string">': 4.510833597099532e-05, '</span>epoch<span class="string">': 0.48916640290046903&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.89986474609375, '</span>learning_rate<span class="string">': 4.4964463499553996e-05, '</span>epoch<span class="string">': 0.5035536500446005&#125;                                                                                             </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.89962744140625, '</span>learning_rate<span class="string">': 4.482059102811268e-05, '</span>epoch<span class="string">': 0.5179408971887319&#125;                                                                                              </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.8909339599609376, '</span>learning_rate<span class="string">': 4.467671855667137e-05, '</span>epoch<span class="string">': 0.5323281443328634&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.865968505859375, '</span>learning_rate<span class="string">': 4.4532846085230055e-05, '</span>epoch<span class="string">': 0.5467153914769948&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.881063232421875, '</span>learning_rate<span class="string">': 4.438897361378874e-05, '</span>epoch<span class="string">': 0.5611026386211262&#125;                                                                                             </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.879991943359375, '</span>learning_rate<span class="string">': 4.424510114234742e-05, '</span>epoch<span class="string">': 0.5754898857652577&#125;                                                                                             </span></span><br><span class="line"><span class="string"> 12%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                                                                                                            | 20000/173765 [2:59:09&lt;24:13:30,  1.76it/s][INFO|trainer.py:1248] 2020-12-28 21:27:48,397 &gt;&gt; Saving model checkpoint to output/checkpoint-20000</span></span><br><span class="line"><span class="string">[INFO|configuration_utils.py:289] 2020-12-28 21:27:48,399 &gt;&gt; Configuration saved in output/checkpoint-20000/config.json</span></span><br><span class="line"><span class="string">[INFO|modeling_utils.py:814] 2020-12-28 21:27:52,186 &gt;&gt; Model weights saved in output/checkpoint-20000/pytorch_model.bin</span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.8942625732421876, '</span>learning_rate<span class="string">': 4.410122867090611e-05, '</span>epoch<span class="string">': 0.5898771329093891&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.889036376953125, '</span>learning_rate<span class="string">': 4.3957356199464794e-05, '</span>epoch<span class="string">': 0.6042643800535206&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.867447998046875, '</span>learning_rate<span class="string">': 4.381348372802348e-05, '</span>epoch<span class="string">': 0.618651627197652&#125;                                                                                              </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.859236328125, '</span>learning_rate<span class="string">': 4.3669611256582166e-05, '</span>epoch<span class="string">': 0.6330388743417834&#125;                                                                                               </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.8667769775390626, '</span>learning_rate<span class="string">': 4.352573878514085e-05, '</span>epoch<span class="string">': 0.6474261214859149&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.864222900390625, '</span>learning_rate<span class="string">': 4.338186631369954e-05, '</span>epoch<span class="string">': 0.6618133686300464&#125;                                                                                             </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.876696044921875, '</span>learning_rate<span class="string">': 4.3237993842258225e-05, '</span>epoch<span class="string">': 0.6762006157741778&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.8643328857421875, '</span>learning_rate<span class="string">': 4.309412137081691e-05, '</span>epoch<span class="string">': 0.6905878629183092&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.8401954345703124, '</span>learning_rate<span class="string">': 4.29502488993756e-05, '</span>epoch<span class="string">': 0.7049751100624406&#125;                                                                                             </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.83107666015625, '</span>learning_rate<span class="string">': 4.280637642793428e-05, '</span>epoch<span class="string">': 0.719362357206572&#125;                                                                                               </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.841105712890625, '</span>learning_rate<span class="string">': 4.2662503956492964e-05, '</span>epoch<span class="string">': 0.7337496043507036&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.849765625, '</span>learning_rate<span class="string">': 4.251863148505165e-05, '</span>epoch<span class="string">': 0.748136851494835&#125;                                                                                                    </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.832751220703125, '</span>learning_rate<span class="string">': 4.2374759013610336e-05, '</span>epoch<span class="string">': 0.7625240986389664&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.828905517578125, '</span>learning_rate<span class="string">': 4.223088654216902e-05, '</span>epoch<span class="string">': 0.7769113457830978&#125;                                                                                             </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.853523193359375, '</span>learning_rate<span class="string">': 4.208701407072771e-05, '</span>epoch<span class="string">': 0.7912985929272293&#125;                                                                                             </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.835915771484375, '</span>learning_rate<span class="string">': 4.1943141599286395e-05, '</span>epoch<span class="string">': 0.8056858400713608&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.845493896484375, '</span>learning_rate<span class="string">': 4.179926912784508e-05, '</span>epoch<span class="string">': 0.8200730872154922&#125;                                                                                             </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.833302490234375, '</span>learning_rate<span class="string">': 4.165539665640377e-05, '</span>epoch<span class="string">': 0.8344603343596236&#125;                                                                                             </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.7969888916015626, '</span>learning_rate<span class="string">': 4.1511524184962454e-05, '</span>epoch<span class="string">': 0.848847581503755&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.813013671875, '</span>learning_rate<span class="string">': 4.136765171352114e-05, '</span>epoch<span class="string">': 0.8632348286478865&#125;                                                                                                </span></span><br><span class="line"><span class="string"> 17%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–                                                                                                                   | 30000/173765 [4:28:54&lt;26:16:01,  1.52it/s][INFO|trainer.py:1248] 2020-12-28 22:57:34,191 &gt;&gt; Saving model checkpoint to output/checkpoint-30000</span></span><br><span class="line"><span class="string">[INFO|configuration_utils.py:289] 2020-12-28 22:57:34,193 &gt;&gt; Configuration saved in output/checkpoint-30000/config.json</span></span><br><span class="line"><span class="string">[INFO|modeling_utils.py:814] 2020-12-28 22:57:37,929 &gt;&gt; Model weights saved in output/checkpoint-30000/pytorch_model.bin</span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.8161768798828124, '</span>learning_rate<span class="string">': 4.122377924207983e-05, '</span>epoch<span class="string">': 0.877622075792018&#125;                                                                                             </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.800627197265625, '</span>learning_rate<span class="string">': 4.107990677063851e-05, '</span>epoch<span class="string">': 0.8920093229361494&#125;                                                                                             </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.80393505859375, '</span>learning_rate<span class="string">': 4.093603429919719e-05, '</span>epoch<span class="string">': 0.9063965700802809&#125;                                                                                              </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.8064656982421874, '</span>learning_rate<span class="string">': 4.079216182775588e-05, '</span>epoch<span class="string">': 0.9207838172244123&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.800693359375, '</span>learning_rate<span class="string">': 4.0648289356314565e-05, '</span>epoch<span class="string">': 0.9351710643685437&#125;                                                                                               </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.8068582763671874, '</span>learning_rate<span class="string">': 4.050441688487325e-05, '</span>epoch<span class="string">': 0.9495583115126751&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.8205863037109375, '</span>learning_rate<span class="string">': 4.036054441343193e-05, '</span>epoch<span class="string">': 0.9639455586568066&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.83301171875, '</span>learning_rate<span class="string">': 4.021667194199062e-05, '</span>epoch<span class="string">': 0.9783328058009381&#125;                                                                                                 </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.8173153076171875, '</span>learning_rate<span class="string">': 4.0072799470549304e-05, '</span>epoch<span class="string">': 0.9927200529450695&#125;                                                                                           </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.782671630859375, '</span>learning_rate<span class="string">': 3.992892699910799e-05, '</span>epoch<span class="string">': 1.007107300089201&#125;                                                                                              </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.7521663818359374, '</span>learning_rate<span class="string">': 3.9785054527666676e-05, '</span>epoch<span class="string">': 1.0214945472333323&#125;                                                                                           </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.767458740234375, '</span>learning_rate<span class="string">': 3.964118205622536e-05, '</span>epoch<span class="string">': 1.0358817943774639&#125;                                                                                             </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.7407720947265626, '</span>learning_rate<span class="string">': 3.949730958478405e-05, '</span>epoch<span class="string">': 1.0502690415215952&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.78615087890625, '</span>learning_rate<span class="string">': 3.9353437113342735e-05, '</span>epoch<span class="string">': 1.0646562886657267&#125;                                                                                             </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.7433726806640626, '</span>learning_rate<span class="string">': 3.920956464190142e-05, '</span>epoch<span class="string">': 1.0790435358098582&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.7276751708984375, '</span>learning_rate<span class="string">': 3.906569217046011e-05, '</span>epoch<span class="string">': 1.0934307829539895&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.7605506591796876, '</span>learning_rate<span class="string">': 3.8921819699018794e-05, '</span>epoch<span class="string">': 1.107818030098121&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.75696728515625, '</span>learning_rate<span class="string">': 3.8777947227577474e-05, '</span>epoch<span class="string">': 1.1222052772422524&#125;                                                                                             </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.7471634521484376, '</span>learning_rate<span class="string">': 3.863407475613616e-05, '</span>epoch<span class="string">': 1.136592524386384&#125;                                                                                             </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.72530859375, '</span>learning_rate<span class="string">': 3.8490202284694846e-05, '</span>epoch<span class="string">': 1.1509797715305154&#125;                                                                                                </span></span><br><span class="line"><span class="string"> 23%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–                                                                                                           | 40000/173765 [5:58:08&lt;24:17:23,  1.53it/s][INFO|trainer.py:1248] 2020-12-29 00:26:47,669 &gt;&gt; Saving model checkpoint to output/checkpoint-40000</span></span><br><span class="line"><span class="string">[INFO|configuration_utils.py:289] 2020-12-29 00:26:47,672 &gt;&gt; Configuration saved in output/checkpoint-40000/config.json</span></span><br><span class="line"><span class="string">[INFO|modeling_utils.py:814] 2020-12-29 00:26:51,427 &gt;&gt; Model weights saved in output/checkpoint-40000/pytorch_model.bin</span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.7199117431640625, '</span>learning_rate<span class="string">': 3.834632981325353e-05, '</span>epoch<span class="string">': 1.1653670186746468&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.74417578125, '</span>learning_rate<span class="string">': 3.820245734181222e-05, '</span>epoch<span class="string">': 1.1797542658187783&#125;                                                                                                 </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.718279296875, '</span>learning_rate<span class="string">': 3.8058584870370905e-05, '</span>epoch<span class="string">': 1.1941415129629096&#125;                                                                                               </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.739827392578125, '</span>learning_rate<span class="string">': 3.791471239892959e-05, '</span>epoch<span class="string">': 1.2085287601070411&#125;                                                                                             </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.7394217529296876, '</span>learning_rate<span class="string">': 3.777083992748828e-05, '</span>epoch<span class="string">': 1.2229160072511727&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.7399776611328126, '</span>learning_rate<span class="string">': 3.7626967456046964e-05, '</span>epoch<span class="string">': 1.237303254395304&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.7402420654296875, '</span>learning_rate<span class="string">': 3.748309498460565e-05, '</span>epoch<span class="string">': 1.2516905015394355&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.7499097900390626, '</span>learning_rate<span class="string">': 3.733922251316434e-05, '</span>epoch<span class="string">': 1.2660777486835668&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.731468994140625, '</span>learning_rate<span class="string">': 3.719535004172302e-05, '</span>epoch<span class="string">': 1.2804649958276983&#125;                                                                                             </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.7096973876953125, '</span>learning_rate<span class="string">': 3.705147757028171e-05, '</span>epoch<span class="string">': 1.2948522429718299&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.715921875, '</span>learning_rate<span class="string">': 3.690760509884039e-05, '</span>epoch<span class="string">': 1.3092394901159612&#125;                                                                                                   </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.7501182861328124, '</span>learning_rate<span class="string">': 3.6763732627399075e-05, '</span>epoch<span class="string">': 1.3236267372600927&#125;                                                                                           </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.75416552734375, '</span>learning_rate<span class="string">': 3.6619860155957755e-05, '</span>epoch<span class="string">': 1.338013984404224&#125;                                                                                              </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.7309554443359374, '</span>learning_rate<span class="string">': 3.647598768451644e-05, '</span>epoch<span class="string">': 1.3524012315483556&#125;                                                                                            </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.7114766845703124, '</span>learning_rate<span class="string">': 3.633211521307513e-05, '</span>epoch<span class="string">': 1.366788478692487&#125;                                                                                             </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.71192626953125, '</span>learning_rate<span class="string">': 3.6188242741633814e-05, '</span>epoch<span class="string">': 1.3811757258366184&#125;                                                                                             </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.72509228515625, '</span>learning_rate<span class="string">': 3.60443702701925e-05, '</span>epoch<span class="string">': 1.39556297298075&#125;                                                                                                 </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.6887713623046876, '</span>learning_rate<span class="string">': 3.5900497798751186e-05, '</span>epoch<span class="string">': 1.4099502201248812&#125;                                                                                           </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.70512939453125, '</span>learning_rate<span class="string">': 3.575662532730987e-05, '</span>epoch<span class="string">': 1.4243374672690128&#125;                                                                                              </span></span><br><span class="line"><span class="string">&#123;'</span>loss<span class="string">': 1.6820177001953125, '</span>learning_rate<span class="string">': 3.561275285586856e-05, '</span>epoch<span class="string">': 1.4387247144131443&#125;</span></span><br></pre></td></tr></table></figure>
<h1 id="DEBUG"><a href="#DEBUG" class="headerlink" title="DEBUG"></a>DEBUG</h1><h2 id="1-Import-Error"><a href="#1-Import-Error" class="headerlink" title="1. Import Error"></a>1. Import Error</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ImportError: cannot import name <span class="string">'is_main_process'</span> from <span class="string">'transformers.trainer_utils'</span></span><br></pre></td></tr></table></figure>
<p>åŸå› æ˜¯å®‰è£…transformerçš„æ—¶å€™ä¸€äº›è¾…åŠ©ä»£ç æ˜¯æ²¡æœ‰å®‰è£…çš„ ï¼Œæœ‰ä¸¤ç§<a href="https://github.com/huggingface/transformers/issues/8210" target="_blank" rel="noopener">è§£å†³æ–¹æ¡ˆ</a>ï¼š</p>
<ol>
<li>ä»githubå®‰è£…transformerï¼Œä½¿ç”¨å‘½ä»¤ï¼š</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/huggingface/transformers.git</span><br><span class="line"><span class="built_in">cd</span> transformers</span><br><span class="line">pip install -e .</span><br></pre></td></tr></table></figure>
<ol>
<li>ç›´æ¥å»æ‰¾åˆ°å¯¹åº”çš„å‡½æ•°ï¼Œå¤åˆ¶ç²˜è´´åˆ°å½“å‰æ–‡ä»¶ä¸­ã€‚</li>
</ol>
<p>ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘é‡‡ç”¨ç¬¬äºŒç§æ–¹æ³•ã€‚</p>
<h2 id="2-ConnectionError-text-py"><a href="#2-ConnectionError-text-py" class="headerlink" title="2. ConnectionError: text.py"></a>2. ConnectionError: text.py</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Couldn<span class="string">'t reach https://raw.githubusercontent.com/huggingface/datasets/1.1.3/datasets/text/text.py</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨çš„ä»£ç†é—®é¢˜ï¼Œå¯¼è‡´ä¸èƒ½è‡ªåŠ¨è”ç½‘ä¸‹è½½éœ€è¦çš„pyæ–‡ä»¶ã€‚</p>
<p>æ‰‹åŠ¨ä¸‹è½½text.pyæ–‡ä»¶ï¼Œç„¶åæ”¾ç½®åœ¨å½“å‰ç›®å½•ä¸‹çš„<code>text/text.py</code>ä¸­ã€‚å†æ¬¡å°è¯•è¿è¡Œã€‚</p>
<p>Problem Solved !!!</p>
<h2 id="3-tensor-size"><a href="#3-tensor-size" class="headerlink" title="3. tensor size"></a>3. tensor size</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">RuntimeError: The size of tensor a (762) must match the size of tensor b (512) at non-singleton dimension 1</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥åˆ©ç”¨<code>python run_mlm.py --help</code>æ¥æŸ¥çœ‹å¸®åŠ©ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">max_seq_length: Optional[int] = field(</span><br><span class="line">    default=<span class="literal">None</span>,</span><br><span class="line">    metadata=&#123;</span><br><span class="line">        <span class="string">"help"</span>: <span class="string">"The maximum total input sequence length after tokenization. Sequences longer "</span></span><br><span class="line">        <span class="string">"than this will be truncated."</span></span><br><span class="line">    &#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>åŸå› æ˜¯ç”±äºå¥å­é•¿åº¦è¿‡é•¿ï¼Œè¶…è¿‡äº†512çš„æœ€å¤§é™åˆ¶ï¼Œåœ¨è¿è¡Œæ—¶æŒ‡å®š<code>--max_seq_length</code>å°±å¯ä»¥è§£å†³é—®é¢˜ã€‚</p>
<h2 id="4-Evaluation"><a href="#4-Evaluation" class="headerlink" title="4. Evaluation"></a>4. Evaluation</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"run_mlm.py"</span>, line 420, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    main()</span><br><span class="line">  File <span class="string">"run_mlm.py"</span>, line 398, <span class="keyword">in</span> main</span><br><span class="line">    eval_output = trainer.evaluate()</span><br><span class="line">  File <span class="string">"/home/klhao/.conda/envs/klhao-pytorch/lib/python3.7/site-packages/transformers/trainer.py"</span>, line 1251, <span class="keyword">in</span> evaluate</span><br><span class="line">    output = self.prediction_loop(eval_dataloader, description=<span class="string">"Evaluation"</span>)</span><br><span class="line">  File <span class="string">"/home/klhao/.conda/envs/klhao-pytorch/lib/python3.7/site-packages/transformers/trainer.py"</span>, line 1353, <span class="keyword">in</span> prediction_loop</span><br><span class="line">    preds_host = logits <span class="keyword">if</span> preds_host is None <span class="keyword">else</span> nested_concat(preds_host, logits, dim=0)</span><br><span class="line">  File <span class="string">"/home/klhao/.conda/envs/klhao-pytorch/lib/python3.7/site-packages/transformers/trainer_pt_utils.py"</span>, line 49, <span class="keyword">in</span> nested_concat</span><br><span class="line">    <span class="built_in">return</span> torch.cat((tensors, new_tensors), dim=dim)</span><br><span class="line">RuntimeError: Sizes of tensors must match except <span class="keyword">in</span> dimension 1. Got 77 and 111 (The offending index is 0)</span><br></pre></td></tr></table></figure>
<p>åŸå› æ˜¯æµ‹è¯•çš„æ—¶å€™å¯¹predsè¿›è¡Œæ‹¼æ¥ï¼Œå‘é‡ç»´åº¦ä¸åŒ¹é…ã€‚</p>
<p>ä¿®æ”¹æ–¹æ³•ä¸ºåœ¨.shåŠ å…¥å‘½ä»¤, <code>--pad_to_max_length</code>ï¼Œå°±å¯ä»¥ç¡®ä¿å¥å­é•¿åº¦ä¸€è‡´ã€‚åœ¨NYTæ•°æ®é›†ä¸Šï¼Œmax_lengthè®¾ä¸º150å°±å¯ä»¥äº†ã€‚</p>
<p>ä½†æ˜¯ï¼Œä¾ç„¶ä¼šå‡ºç°çˆ†æ˜¾å­˜çš„æƒ…å†µï¼Œå¯ä»¥ä¿®æ”¹<code>/home/klhao/.conda/envs/klhao-pytorch/lib/python3.7/site-packages/transformers/trainer.py</code>çš„1353è¡Œé™„è¿‘ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> loss <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">    losses = loss.repeat(batch_size)</span><br><span class="line">    losses_host = losses <span class="keyword">if</span> losses_host <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">else</span> torch.cat((losses_host, losses), dim=<span class="number">0</span>)</span><br><span class="line"><span class="keyword">if</span> logits <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">    logits = logits.cpu().numpy()  <span class="comment"># å‡å°‘æ˜¾å­˜</span></span><br><span class="line">    preds_host = logits <span class="keyword">if</span> preds_host <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">else</span> nested_concat(preds_host, logits, dim=<span class="number">0</span>)</span><br><span class="line"><span class="keyword">if</span> labels <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">    labels = labels.cpu().numpy()  <span class="comment"># å‡å°‘æ˜¾å­˜</span></span><br><span class="line">    labels_host = labels <span class="keyword">if</span> labels_host <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">else</span> nested_concat(labels_host, labels, dim=<span class="number">0</span>)</span><br><span class="line">self.control = self.callback_handler.on_prediction_step(self.args, self.state, self.control)</span><br></pre></td></tr></table></figure>
<p>Perfect! å®Œç¾~ğŸŠğŸ—ğŸ—ğŸƒğŸƒâœ¨ğŸ‰</p>
<h1 id="è®¡ç®—ç›¸ä¼¼åº¦"><a href="#è®¡ç®—ç›¸ä¼¼åº¦" class="headerlink" title="è®¡ç®—ç›¸ä¼¼åº¦"></a>è®¡ç®—ç›¸ä¼¼åº¦</h1><p>å°†å¥å­è½¬åŒ–ä¸ºå‘é‡ï¼Œç„¶åè®¡ç®—cosineç›¸ä¼¼åº¦ï¼Œåˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š</p>
<ol>
<li>relation phrase ç›´æ¥æŠ•å…¥BERT</li>
<li>å¥å­å–å¤´å°¾å®ä½“ä¹‹é—´ä»¥åŠä¸¤ä¾§è·ç¦»ä¸ºk çš„æŠ•å…¥BERT</li>
</ol>
<p>å–[CLS]å¯¹åº”çš„å‘é‡ï¼Œè®¡ç®—å¾—åˆ°cosineç›¸ä¼¼åº¦å³å¯~</p>
<h1 id="å…¶ä»–è¡¥å……"><a href="#å…¶ä»–è¡¥å……" class="headerlink" title="å…¶ä»–è¡¥å……"></a>å…¶ä»–è¡¥å……</h1><p>åœ¨Trainer.pyä»£ç ä¸­å¯ä»¥çœ‹åˆ°é»˜è®¤çš„optimizerå’Œschedulerï¼Œä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_optimizer_and_scheduler</span><span class="params">(self, num_training_steps: int)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Setup the optimizer and the learning rate scheduler.</span></span><br><span class="line"><span class="string">        We provide a reasonable default that works well. If you want to use something else, you can pass a tuple in the</span></span><br><span class="line"><span class="string">        Trainer's init through :obj:`optimizers`, or subclass and override this method in a subclass.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> self.optimizer <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            no_decay = [<span class="string">"bias"</span>, <span class="string">"LayerNorm.weight"</span>]</span><br><span class="line">            optimizer_grouped_parameters = [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">"params"</span>: [p <span class="keyword">for</span> n, p <span class="keyword">in</span> self.model.named_parameters() <span class="keyword">if</span> <span class="keyword">not</span> any(nd <span class="keyword">in</span> n <span class="keyword">for</span> nd <span class="keyword">in</span> no_decay)],</span><br><span class="line">                    <span class="string">"weight_decay"</span>: self.args.weight_decay,</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">"params"</span>: [p <span class="keyword">for</span> n, p <span class="keyword">in</span> self.model.named_parameters() <span class="keyword">if</span> any(nd <span class="keyword">in</span> n <span class="keyword">for</span> nd <span class="keyword">in</span> no_decay)],</span><br><span class="line">                    <span class="string">"weight_decay"</span>: <span class="number">0.0</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">            ]</span><br><span class="line">            <span class="keyword">if</span> self.sharded_dpp:</span><br><span class="line">                self.optimizer = OSS(</span><br><span class="line">                    params=optimizer_grouped_parameters,</span><br><span class="line">                    optim=AdamW,</span><br><span class="line">                    lr=self.args.learning_rate,</span><br><span class="line">                    betas=(self.args.adam_beta1, self.args.adam_beta2),</span><br><span class="line">                    eps=self.args.adam_epsilon,</span><br><span class="line">                )</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                self.optimizer = AdamW(</span><br><span class="line">                    optimizer_grouped_parameters,</span><br><span class="line">                    lr=self.args.learning_rate,</span><br><span class="line">                    betas=(self.args.adam_beta1, self.args.adam_beta2),</span><br><span class="line">                    eps=self.args.adam_epsilon,</span><br><span class="line">                )</span><br><span class="line">        <span class="keyword">if</span> self.lr_scheduler <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            self.lr_scheduler = get_linear_schedule_with_warmup(</span><br><span class="line">                self.optimizer, num_warmup_steps=self.args.warmup_steps, num_training_steps=num_training_steps</span><br><span class="line">            )</span><br></pre></td></tr></table></figure>
<p>è€Œçº¿æ€§è°ƒèŠ‚å™¨ä»£ç ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_linear_schedule_with_warmup</span><span class="params">(optimizer, num_warmup_steps, num_training_steps, last_epoch=<span class="number">-1</span>)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Create a schedule with a learning rate that decreases linearly from the initial lr set in the optimizer to 0, after</span></span><br><span class="line"><span class="string">    a warmup period during which it increases linearly from 0 to the initial lr set in the optimizer.</span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        optimizer (:class:`~torch.optim.Optimizer`):</span></span><br><span class="line"><span class="string">            The optimizer for which to schedule the learning rate.</span></span><br><span class="line"><span class="string">        num_warmup_steps (:obj:`int`):</span></span><br><span class="line"><span class="string">            The number of steps for the warmup phase.</span></span><br><span class="line"><span class="string">        num_training_steps (:obj:`int`):</span></span><br><span class="line"><span class="string">            The total number of training steps.</span></span><br><span class="line"><span class="string">        last_epoch (:obj:`int`, `optional`, defaults to -1):</span></span><br><span class="line"><span class="string">            The index of the last epoch when resuming training.</span></span><br><span class="line"><span class="string">    Return:</span></span><br><span class="line"><span class="string">        :obj:`torch.optim.lr_scheduler.LambdaLR` with the appropriate schedule.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">lr_lambda</span><span class="params">(current_step: int)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> current_step &lt; num_warmup_steps:</span><br><span class="line">            <span class="keyword">return</span> float(current_step) / float(max(<span class="number">1</span>, num_warmup_steps))</span><br><span class="line">        <span class="keyword">return</span> max(</span><br><span class="line">            <span class="number">0.0</span>, float(num_training_steps - current_step) / float(max(<span class="number">1</span>, num_training_steps - num_warmup_steps))</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> LambdaLR(optimizer, lr_lambda, last_epoch)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>NLP</category>
        <category>Pretrained Language Model</category>
      </categories>
      <tags>
        <tag>BERT</tag>
        <tag>MLM</tag>
        <tag>Pretrain</tag>
        <tag>BertForPreTraining</tag>
        <tag>BertForMaskedLM</tag>
      </tags>
  </entry>
  <entry>
    <title>DISTRE debug è®°å½•</title>
    <url>/2020/12/20/DISTRE-debug-%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<h1 id="1-en-core-web-sm"><a href="#1-en-core-web-sm" class="headerlink" title="1. en_core_web_sm"></a>1. en_core_web_sm</h1><p>åœ¨Spacyä¸­éœ€è¦ç”¨åˆ°è¿™ä¸ªï¼Œä½†æ˜¯åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨ä»£ç†ï¼Œä¼šæŠ¥é”™ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"/data/klhao/.conda/klhao-allennlp/lib/python3.6/site-packages/urllib3/connectionpool.py"</span>, line 696, <span class="keyword">in</span> urlopen</span><br><span class="line">    self._prepare_proxy(conn)</span><br><span class="line">  File <span class="string">"/data/klhao/.conda/klhao-allennlp/lib/python3.6/site-packages/urllib3/connectionpool.py"</span>, line 964, <span class="keyword">in</span> _prepare_proxy</span><br><span class="line">    conn.connect()</span><br><span class="line">  File <span class="string">"/data/klhao/.conda/klhao-allennlp/lib/python3.6/site-packages/urllib3/connection.py"</span>, line 366, <span class="keyword">in</span> connect</span><br><span class="line">    self._tunnel()</span><br><span class="line">  File <span class="string">"/data/klhao/.conda/klhao-allennlp/lib/python3.6/http/client.py"</span>, line 930, <span class="keyword">in</span> _tunnel</span><br><span class="line">    (version, code, message) = response._read_status()</span><br><span class="line">  File <span class="string">"/data/klhao/.conda/klhao-allennlp/lib/python3.6/http/client.py"</span>, line 280, <span class="keyword">in</span> _read_status</span><br><span class="line">    raise RemoteDisconnected(<span class="string">"Remote end closed connection without"</span></span><br><span class="line">http.client.RemoteDisconnected: Remote end closed connection without response</span><br></pre></td></tr></table></figure>
<p><a href="https://stackoom.com/question/3mGaI/%E7%94%B1%E4%BA%8E%E4%BB%A3%E7%90%86%E9%97%AE%E9%A2%98-%E6%97%A0%E6%B3%95%E7%82%B9%E7%82%B9%E5%AE%89%E8%A3%85spacy-%E6%A8%A1%E5%9E%8B" target="_blank" rel="noopener">æ–‡æ¡£ä¸­</a>å»ºè®®å¯ä»¥ç›´æ¥ä¸‹è½½ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install https://github.com/explosion/spacy-models/releases/download/en_core_web_sm-2.1.0/en_core_web_sm-2.1.0.tar.gz</span><br></pre></td></tr></table></figure>
<p>ok, it worked! âœ¨</p>
<a id="more"></a>
<h1 id="train-json"><a href="#train-json" class="headerlink" title="train.json"></a>train.json</h1><p>ä½œè€…æ²¡æœ‰æ˜ç¡®çš„è¯´æ˜é‡‡ç”¨çš„æ ¼å¼ï¼Œä½†æ˜¯å¯ä»¥æ¨æ–­å‡ºæ¥ï¼š</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">target = &#123;</span><br><span class="line">    'sentence': record['text'],</span><br><span class="line">    'head': &#123;'word': record['h']['name']&#125;,</span><br><span class="line">    'tail': &#123;'word': record['t']['name']&#125;,</span><br><span class="line">    'relation': record['relation']</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
        <category>Distant Supervision</category>
      </categories>
      <tags>
        <tag>AllenNLP</tag>
        <tag>Pytorch</tag>
        <tag>DISTRE</tag>
        <tag>SpaCy</tag>
      </tags>
  </entry>
  <entry>
    <title>AllenNLP Jsonnet æ¨¡å¼</title>
    <url>/2020/12/20/AllenNLP-Jsonnet-%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<p>è¿™ç¯‡æ–‡ç« æ˜¯å¯¹å®˜æ–¹æ•™ç¨‹çš„ç¿»è¯‘ï¼š</p>
<p><a href="https://github.com/allenai/allennlp/blob/v0.6.1/tutorials/getting_started/using_as_a_library_pt1.md" target="_blank" rel="noopener">https://github.com/allenai/allennlp/blob/v0.6.1/tutorials/getting_started/using_as_a_library_pt1.md</a></p>
<p>æ­£å¦‚å‰æ–‡ä¸­æ‰€æåˆ°çš„ï¼ŒAllennlpçš„åŸºæœ¬ä½¿ç”¨æµç¨‹æ˜¯éœ€è¦è‡ªå®šä¹‰ä¸¤ä¸ªæ–‡ä»¶ï¼š<code>datareader</code>ï¼›<code>model</code>;<br> åŒæ—¶ï¼Œå¦‚æœå­˜åœ¨å·²ç»å®šä¹‰å¥½çš„<code>datareader</code>æˆ‘ä»¬ä¹Ÿæ˜¯å¯ä»¥ç›´æ¥æ‹¿æ¥å°±ç”¨ã€‚æ¥ä¸‹æ¥è¦ä»‹ç»çš„è¿™ä¸ªä¾‹å­å‘¢ï¼Œä¸»è¦èµ·åˆ°äº†ä¸¤ä¸ªä½œç”¨ï¼šâ‘ ç†Ÿæ‚‰allennlpçš„åŸºæœ¬æ¡†æ¶å’Œé€»è¾‘â‘¡å­¦ä¹ å¦‚ä½•è‡ªå®šä¹‰è‡ªå·±çš„æ¨¡å‹ã€‚æ¨¡å‹å…¨éƒ¨éƒ½å®šä¹‰å®Œæˆäº†ä¹‹åï¼Œéœ€è¦å†™ä¸€ä¸ªjsonæ–‡ä»¶ç”¨æ¥å®Œæˆå¯¹æ¨¡å‹çš„åŸºæœ¬é…ç½®ã€‚</p>
<p>â€ƒâ€ƒåœ¨è¿™ç¯‡åšå®¢å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å°†ä¼šèƒ½å¤Ÿæ„å»ºä¸€ä¸ªå¯¹å­¦æœ¯è®ºæ–‡è¿›è¡Œåˆ†ç±»çš„æ¨¡å‹ï¼Œå¹¶ä¸”ä¼šä½¿ç”¨è¯¥æ¨¡å‹åœ¨å…¶ä»–çš„æ•°æ®é›†ä¸Šè¿›è¡Œæµ‹è¯•ã€‚ç›®çš„æ˜¯é€šè¿‡è¿™ç¯‡åšå®¢è®©ä½ å¯¹å¦‚ä½•ä¿®æ”¹ä»£ç ï¼Œå¦‚ä½•è®­ç»ƒæ¨¡å‹ï¼Œå¦‚ä½•è¿›è¡Œé¢„æµ‹ç­‰ç­‰åŸºæœ¬æ“ä½œè¿‡ç¨‹æœ‰ä¸€ä¸ªå¤§è‡´çš„äº†è§£ã€‚åœ¨æœ€åæˆ‘ä»¬ä¼šè´´å‡ºæ¥æºä»£ç ã€‚</p>
<h4 id="3-2-æ„å»ºè‡ªå·±çš„ä»£ç åº“"><a href="#3-2-æ„å»ºè‡ªå·±çš„ä»£ç åº“" class="headerlink" title="3.2 æ„å»ºè‡ªå·±çš„ä»£ç åº“"></a>3.2 æ„å»ºè‡ªå·±çš„ä»£ç åº“</h4><p>â€ƒâ€ƒæ­£å¦‚å‰é¢æ‰€æåˆ°çš„ï¼Œè¦æƒ³è‡ªå·±åˆ©ç”¨<code>AllenNLP</code>å®ç°ä¸€ä¸ªæ¨¡å‹ï¼Œé‚£ä¹ˆå°±éœ€è¦å†™ä¸¤éƒ¨åˆ†çš„ä»£ç ï¼šDatasetReader/Modelã€‚æ‰€ä»¥å‘¢ï¼Œæˆ‘ä»¬çš„ä¸‹ä¸€æ­¥å°±æ˜¯è¦æŠŠæˆ‘ä»¬è‡ªå·±å†™çš„ä»£ç æ”¾åœ¨pythonèƒ½å¤Ÿæ‰¾åˆ°çš„ä½ç½®ï¼Œè¿™æ ·æˆ‘ä»¬çš„<code>AllenNLP</code>æ‰èƒ½å¤Ÿè°ƒç”¨è¿™äº›æ¨¡å—å‘€ã€‚å‡è®¾æˆ‘ä»¬è‡ªå·±çš„ä»£ç åº“åŸºç¡€åŒ…åå«<code>my_library</code>ï¼Œå½“ç„¶å•¦ï¼Œä½ æƒ³èµ·å•¥åå­—éƒ½è¡Œï¼Œåªè¦è¿™ä¸ªåº“ç¬¦åˆä¸¤ä¸ªæ¡ä»¶ï¼šâ‘ ä½äº<code>python</code>çš„æŸ¥æ‰¾åŒ…çš„è·¯å¾„ä¸Šâ‘¡è¿™ä¸ªåº“é‡ŒåŒ…å«ä½ å†™çš„<code>models</code>ä»¥åŠ<code>dataset_readers</code></p>
<h4 id="3-3-ç¼–å†™ä½ è‡ªå·±çš„DatasetReader"><a href="#3-3-ç¼–å†™ä½ è‡ªå·±çš„DatasetReader" class="headerlink" title="3.3 ç¼–å†™ä½ è‡ªå·±çš„DatasetReader"></a>3.3 ç¼–å†™ä½ è‡ªå·±çš„DatasetReader</h4><p>â€ƒâ€ƒç°åœ¨æˆ‘ä»¬è‡ªå·±çš„ä»£ç åº“å·²ç»å»ºç«‹å¥½å•¦ï¼Œè¦å¼€å§‹å†™ä»£ç å•¦ï¼å½“ç„¶å•¦ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æœ‰ä¸€äº›æ•°æ®ã€‚åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦é¢„æµ‹æŸä¸€ç¯‡å­¦æœ¯è®ºæ–‡çš„å‘è¡¨åœºåˆã€‚å…·ä½“ä¸€ç‚¹è¯´ï¼Œå°±æ˜¯ç»™å‡ºä¸€ç¯‡è®ºæ–‡çš„æ ‡é¢˜å’Œæ‘˜è¦ï¼Œæˆ‘ä»¬æƒ³è¦åˆ¤æ–­å®ƒåˆ°åº•æ˜¯åœ¨â€è‡ªç„¶è¯­è¨€å¤„ç†é¢†åŸŸâ€œï¼Œâ€œæœºå™¨å­¦ä¹ é¢†åŸŸâ€è¿˜æ˜¯â€äººå·¥æ™ºèƒ½é¢†åŸŸâ€çš„è®ºæ–‡ã€‚</p>
<p>â€ƒâ€ƒæˆ‘ä»¬ä½¿ç”¨çš„æ•°æ®æ˜¯ä»<code>Semantic Scholar</code>æœç´¢å¼•æ“ä¸Šä¸‹è½½çš„ï¼Œæ¯ç¯‡æ–‡ç« éƒ½æ ‡æ³¨å¥½äº†æ‰€å±çš„é¢†åŸŸã€‚ä¸‹è½½ä¸‹æ¥çš„æ•°æ®æ–‡ä»¶æ˜¯JSONæ ¼å¼çš„ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½åº”è¯¥è‡³å°‘åŒ…å«æ ‡é¢˜ï¼ˆ<code>title</code>ï¼‰ï¼Œæ‘˜è¦(<code>paperAbstract</code>)ï¼Œä»¥åŠæ‰€å±é¢†åŸŸï¼ˆ<code>venue</code>ï¼‰è¿™æ ·ä¸‰éƒ¨åˆ†å†…å®¹ã€‚</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"title"</span>: <span class="string">"A review of Web searching studies and a framework for future research"</span>,</span><br><span class="line">  <span class="attr">"paperAbstract"</span>: <span class="string">"Research on Web searching is at an incipient stage. ..."</span>,</span><br><span class="line">  <span class="attr">"venue"</span>: <span class="string">"&#123;AI|ML|ACL&#125;"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>åœ¨è¿™ä¸€éƒ¨åˆ†å‘¢ï¼Œæˆ‘ä»¬é™¤äº†ä¼šå®Œæˆæ–‡ä»¶è¯»å–çš„ä»£ç çš„ç¼–å†™ï¼Œè¿˜ä¼šå¯¹è¿™äº›ä»£ç è¿›è¡Œæµ‹è¯•ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ä¹ æƒ¯ï¼ä½ ä»¬ä¹Ÿè¦å­¦ä¼šå“¦ã€‚æˆ‘ä»¬æµ‹è¯•çš„æ—¶å€™ï¼Œä¼šä»æ•°æ®é›†ä¸­æŠ½å‡ºæ¥10ç¯‡æ–‡ç« æ„æˆä¸€ä¸ªç®€å•çš„ä»£ç æµ‹è¯•æ•°æ®é›†ï¼Œç”¨æ¥æµ‹è¯•æˆ‘ä»¬ä»£ç çš„åŸºæœ¬åŠŸèƒ½æ˜¯ä¸æ˜¯éƒ½å®ç°å•¦ã€‚</p>
<p>â€ƒâ€ƒå½“ç„¶å•¦ï¼Œæˆ‘ä»¬çš„æµ‹è¯•ä»£ç æ˜¯è¦é‡‡ç”¨<code>AllenNLP</code>ä¸­æä¾›çš„æµ‹è¯•æ¥å£æ»´ã€‚è¿™äº›æ¥å£èƒ½å¤Ÿå¾ˆå¥½çš„å¸®æˆ‘ä»¬åšå¥½æµ‹è¯•çš„å‡†å¤‡å’Œæ”¶å°¸çš„å·¥ä½œã€‚</p>
<p>â€ƒâ€ƒæˆ‘ä»¬é¦–å…ˆæƒ³ä¸€æƒ³æˆ‘ä»¬éœ€è¦æµ‹è¯•çš„åªæ˜¯<code>DatasetReader</code>ä¸­çš„<code>read</code>å‡½æ•°ï¼Œä¸‹é¢ç»™å‡ºæµ‹è¯•ä»£ç çš„å†™æ³•</p>
<p> â€¦â€¦â€¦â€¦â€¦.æ­¤å¤„çœç•¥1000å­—â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦..</p>
<p>æµ‹è¯•æ–‡ä»¶å†™å¥½å•¦ï¼Œæˆ‘ä»¬ç°åœ¨è¦å¼€å§‹æ­£å¼çš„å†™<code>DatasetReader</code>æ–¹æ³•å•¦ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å†™é‡å†™ä¸€ä¸‹<code>_read</code>å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä»æ–‡æœ¬æ–‡ä»¶ä¸­è·å–æ•°æ®ï¼Œç„¶åå°†æ•°æ®è½¬æ¢æˆ<code>tokens</code>è¡¨ç¤ºçš„<code>instance</code>ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_read</span><span class="params">(self, file_path)</span>:</span></span><br><span class="line">      <span class="keyword">with</span> open(cached_path(file_path), <span class="string">"r"</span>) <span class="keyword">as</span> data_file:</span><br><span class="line">          logger.info(<span class="string">"Reading instances from lines in file at: %s"</span>, file_path)</span><br><span class="line">          <span class="keyword">for</span> line_num, line <span class="keyword">in</span> enumerate(Tqdm.tqdm(data_file.readlines())):</span><br><span class="line">              line = line.strip(<span class="string">"\n"</span>)</span><br><span class="line">              <span class="keyword">if</span> <span class="keyword">not</span> line:</span><br><span class="line">                  <span class="keyword">continue</span></span><br><span class="line">              paper_json = json.loads(line)</span><br><span class="line">              title = paper_json[<span class="string">'title'</span>]</span><br><span class="line">              abstract = paper_json[<span class="string">'paperAbstract'</span>]</span><br><span class="line">              venue = paper_json[<span class="string">'venue'</span>]</span><br><span class="line">              <span class="keyword">yield</span> self.text_to_instance(title, abstract, venue)</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢è¿™å°±æ˜¯<code>_read</code>å‡½æ•°çš„å†…å®¹äº†ï¼Œæ³¨æ„åˆ°æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨<code>open</code>å‡½æ•°æ¥æ‰“å¼€éœ€è¦è¯»å–çš„æ–‡ä»¶ã€‚<strong>æ³¨æ„ï¼Œopenå‡½æ•°æ˜¯æŠŠæˆ‘ä»¬æä¾›çš„è¿™ä¸ªè·¯å¾„å½“æˆç½‘ç»œèµ„æº(url)æ¥è®¿é—®å¹¶ä¸”è¯»å–çš„ï¼Œè¿™ä¸€ç‚¹åœ¨åé¢éœ€è¦ä¸‹è½½çš„æ•°æ®æ–‡ä»¶ä¸­èµ·åˆ°äº†è‡³å…³é‡è¦çš„ä½œç”¨</strong>ã€‚</p>
<p>â€ƒâ€ƒåœ¨æ‰“å¼€äº†æ–‡ä»¶ä¹‹åï¼Œ<code>_read</code>å‡½æ•°çš„åŸºæœ¬é€»è¾‘å‘¢ï¼Œæ˜¯éå†æ–‡ä»¶ä¸­æ¯ä¸€è¡Œæ•°æ®ï¼Œç„¶åæŠŠè¿™ä¸€è¡Œæ•°æ®è½¬æ¢æˆ<code>JSON</code>æ ¼å¼ï¼Œä»è€Œæå–å‡ºæ‰€éœ€è¦çš„å­—æ®µï¼Œå¹¶ä¸”åˆ©ç”¨<code>text_to_instance</code>å°†è¿™äº›å­—æ®µè½¬æ¢æˆ<code>instance</code>ç±»å‹çš„æ•°æ®ã€‚<strong>æ³¨æ„ï¼Œè¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªinstanceè€Œä¸æ˜¯æ•´ä¸ªæ–‡æœ¬çš„instancesï¼Œæ¢å¥è¯è¯´ï¼Œè¿™é‡Œåªæ˜¯æ•™ç»™ç¨‹åºå¦‚ä½•å»å¤„ç†è¿™äº›è¾“å…¥ï¼Œå…·ä½“çš„å¤„ç†è¿‡ç¨‹æ˜¯é€æ˜çš„</strong>ã€‚è¿˜æœ‰ä¸€ç‚¹éœ€è¦æä¸€ä¸‹ï¼Œè¿™é‡Œç”¨äº†ä¸€ä¸ªå¾ˆæœ‰è¶£çš„å‡½æ•°<code>Tqdm</code>ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯è¿›åº¦æ¡ï¼æ¯æ¬¡è°ƒç”¨ä¸€ä¸‹å°±ä¼šæ‰“å°ä¸€ä¸ªè¿›åº¦æ¡ï¼Œ<code>pretty neat</code>å“ˆã€‚ä¸‹é¢ç»™å‡º<code>text_to_instance</code>çš„åŸºæœ¬å®ç°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">text_to_instance</span><span class="params">(self, title: str, abstract: str, venue: str = None)</span> -&gt; Instance:</span></span><br><span class="line">    tokenized_title = self._tokenizer.tokenize(title)</span><br><span class="line">    tokenized_abstract = self._tokenizer.tokenize(abstract)</span><br><span class="line">    title_field = TextField(tokenized_title, self._token_indexers)</span><br><span class="line">    abstract_field = TextField(tokenized_abstract, self._token_indexers)</span><br><span class="line">    fields = &#123;<span class="string">'title'</span>: title_field, <span class="string">'abstract'</span>: abstract_field&#125;</span><br><span class="line">    <span class="keyword">if</span> venue <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        fields[<span class="string">'label'</span>] = LabelField(venue)</span><br><span class="line">    <span class="keyword">return</span> Instance(fields)</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆï¼Œéœ€è¦è®°ä½ä¸€ç‚¹ï¼š<code>instance</code>ç±»å‹å®é™…ä¸Šå°±æ˜¯å¤šä¸ªå­—æ®µçš„é›†åˆã€‚è¿™äº›å­—æ®µå°†ä¼šæ•™ç»™<code>AllenNLP</code>è¿›è¡Œå¤„ç†ï¼Œå¹¶ä¸”ä¼ é€’ç»™ä½ çš„<code>model</code>ã€‚è¿™é‡Œç”¨åˆ°äº†<code>TextField</code>è¡¨ç¤ºè½¬åŒ–æˆäº†åºå·ä¹‹å(<code>tokenized</code>)çš„æ–‡æœ¬æ•°æ®ï¼›<code>LabelField</code>è¡¨ç¤ºç±»åˆ«æ ‡ç­¾ï¼›æ­¤å¤–è¿˜æœ‰å¾ˆå¤šç±»å‹çš„å­—æ®µæˆ‘ä»¬åœ¨è¿™é‡Œæš‚æ—¶ç”¨ä¸åˆ°å°±å…ˆä¸ä»‹ç»äº†ã€‚éœ€è¦é¢å¤–è¯´ä¸€å¥ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œèƒ½å¤Ÿçœ‹å‡ºï¼Œ<code>AllenNLP</code>åœ¨å¹•ååšäº†å¾ˆå¤šå·¥ä½œï¼Œä½†æ˜¯è®°ä½è¿™äº›å¹•åå·¥ä½œä¹Ÿæ˜¯å¯ä»¥è°ƒèŠ‚çš„ã€‚</p>
<p>â€ƒâ€ƒå…¶æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä½¿ç”¨ç±»æˆå‘˜å˜é‡ï¼ˆ<code>self._tokenizer</code>ç­‰ï¼‰æ¥æ„é€ æˆ‘ä»¬çš„<code>TextField</code>å­—æ®µã€‚æˆ‘ä»¬éœ€è¦ç®€å•ä»‹ç»ä¸€ä¸‹è¿™é‡Œç”¨åˆ°çš„ä¸¤ä¸ªæˆå‘˜å˜é‡ï¼š<code>self._tokenizer</code>/<code>self._token_indexers</code>ã€‚<code>Tokenizer</code>å‘¢æ˜¯æŠŠä½ çš„æ–‡æœ¬è½¬æ¢æˆå•è¯å•¦ï¼Œå­—æ¯å•¦ï¼Œæ¯”ç‰¹å¯¹å•¦ç­‰ç­‰å¸¸è§çš„ä½ æƒ³è¦çš„å½¢å¼ã€‚<code>TokenIndexer</code>å‘¢åˆ™æ˜¯ç»™è¿™äº›å½¢å¼ç¼–ä¸ªå·ï¼Œå¹¶ä¸”æŠŠæœ€ç»ˆçš„æ–‡æœ¬è½¬æ¢æˆåºå·è¡¨ç¤ºçš„å½¢å¼ã€‚ä¸¾ä¸ªä¾‹å­æ¥è¯´ï¼Œå¦‚æœä½ çš„<code>token</code>æ˜¯å•è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¼ºå¤§çš„<code>TokenIndexer</code>å¯ä»¥è‡ªåŠ¨çš„ä¸ºä½ ç”Ÿæˆå•è¯ç¼–å·ï¼Œå­—æ¯ç¼–å·ï¼Œ<code>pos_tags</code>çš„ç¼–å·ã€‚ä½ æœ‰å¯èƒ½æ„è¯†åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æˆ‘ä»¬æ˜æ˜æ²¡æœ‰å®šä¹‰è¿‡è¿™äº›æˆå‘˜å˜é‡ï¼Œè¿™äº›æˆå‘˜å˜é‡æ˜¯ä»å“ªé‡Œæ¥çš„å‘¢ï¼ç­”ï¼šè¿™äº›æˆå‘˜å˜é‡éƒ½æ˜¯åœ¨<code>init</code>å‡½æ•°ä¸­å®šä¹‰çš„ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹çœ‹è¿™ä¸ªå‡½æ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@DatasetReader.register("s2_papers")</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SemanticScholarDatasetReader</span><span class="params">(DatasetReader)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,</span></span></span><br><span class="line"><span class="function"><span class="params">                 tokenizer: Tokenizer = None,</span></span></span><br><span class="line"><span class="function"><span class="params">                 token_indexers: Dict[str, TokenIndexer] = None)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        self._tokenizer = tokenizer <span class="keyword">or</span> WordTokenizer()</span><br><span class="line">        self._token_indexers = token_indexers <span class="keyword">or</span> &#123;<span class="string">"tokens"</span>: SingleIdTokenIndexer()&#125;</span><br></pre></td></tr></table></figure>
<p>çœ‹ä¸€çœ‹ï¼Œç§ä¸€ç§å“ˆï¼Œè¿™ä¸ªæ„é€ å‡½æ•°ä»å‚æ•°ä¸­è·å–äº†<code>Tokenizer</code>ä»¥åŠ<code>TokenIndexer</code>ï¼Œè¿™ä¸¤ä¸ªå‚æ•°è¿˜éƒ½æœ‰é»˜è®¤å€¼ã€‚æˆ‘ä»¬åªéœ€è¦åœ¨è°ƒç”¨è¿™ä¸ªæ„é€ å‡½æ•°çš„æ—¶å€™ä¼ é€’å‚æ•°è¿›å»å°±è¡Œå•¦ã€‚ä½†æ˜¯<strong>æ³¨æ„ï¼æˆ‘ä»¬æ˜¯ä¸ä¼šè‡ªå·±å»è°ƒç”¨è¿™ä¸ªæ„é€ å‡½æ•°çš„ï¼Œæˆ‘ä»¬è°ƒç”¨è¿™ä¸ªreaderå’Œmodelå…¨éƒ½åœ¨configä¸­å®Œæˆï¼Œä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬æ‰€æœ‰çš„å‚æ•°éƒ½å°†ä¼šé…ç½®æ–‡ä»¶ä¸­å®Œæˆ</strong>ã€‚å½“ç„¶å•¦ï¼Œä¸ºäº†èƒ½å¤Ÿåœ¨é…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ°æˆ‘ä»¬å®šä¹‰çš„è¿™ä¸ª<code>model</code>ä»¥åŠ<code>dataset_reader</code>ï¼Œæˆ‘ä»¬éœ€è¦ç»™è¿™ä¸¤ä¸ªç±»æ³¨å†Œä¸€ä¸ªåå­—<code>@DatasetReader.register(&quot;s2_papers&quot;)</code>ï¼Œåƒè¿™æ ·ã€‚æœ‰äº†è¿™ä¸ªæ³¨å†Œï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿåœ¨é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨è¿™ä¸ªç±»ã€‚<code>AllenNLP</code>ä¸ºæ‰€æœ‰çš„æ³¨å†Œçš„ç±»éƒ½å®ç°äº†ä¸€ä¸ª<code>from_params</code>çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•èƒ½å¤Ÿéå¸¸å¥½æ ¹æ®é…ç½®æ–‡ä»¶ä¸­æä¾›çš„ä¿¡æ¯ï¼Œå¯¹åº”çš„è°ƒç”¨æ„é€ å‡½æ•°ï¼Œä¸ºæˆ‘ä»¬æ„é€ <code>DatasetReader</code>ä»¥åŠ<code>model</code>å®ä¾‹ã€‚</p>
<p>â€ƒâ€ƒå°±æ˜¯è¿™ä¹ˆç®€å•ï¼å°±æ˜¯è¿™ä¸ªæ„Ÿè§‰ï¼</p>
<h4 id="3-4-ç¼–å†™Model-ä»£ç "><a href="#3-4-ç¼–å†™Model-ä»£ç " class="headerlink" title="3.4 ç¼–å†™Model ä»£ç "></a>3.4 ç¼–å†™Model ä»£ç </h4><p>â€ƒâ€ƒæˆ‘ä»¬ç°åœ¨æœ‰äº†å¯ä»¥å¤„ç†æ•°æ®çš„ä»£ç ï¼Œåªéœ€è¦ä¸€ä¸ªå¯ä»¥ç”¨çš„æ¨¡å‹å°±å¯ä»¥è·‘å•¦ã€‚è¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬è¿™ä¸€å°èŠ‚éœ€è¦å®ç°çš„ä¸œè¥¿ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¼ ç»Ÿæ€è·¯ï¼Œå…ˆæŠŠæµ‹è¯•æ–‡ä»¶å®šä¹‰å¥½ã€‚</p>
<p>â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦.æ­¤å¤„çœç•¥1000å­—â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦</p>
<p>å¥½å•¦ï¼Œä¸‹é¢å¯ä»¥åŠ¨çœŸæ ¼çš„å¼€å§‹å†™æ¨¡å‹å•¦ã€‚ä¸è¿‡åœ¨å¼€å§‹å†™ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç¡®å®šä¸€ä¸‹æ¨¡å‹çš„åŸºæœ¬ç»“æ„ã€‚æˆ‘ä»¬æœ‰ä¸¤ä¸ªè¾“å…¥(æ ‡é¢˜å’Œæ‘˜è¦)ä»¥åŠä¸€ä¸ªè¾“å‡ºæ ‡ç­¾ï¼Œæ³¨æ„è¿™ä¸¤ä¸ªè¾“å…¥éƒ½åº”è¯¥å·²ç»æ˜¯è½¬æ¢æˆåºå·å•¦ã€‚é‚£ä¹ˆæˆ‘ä»¬ä¸‹ä¸€æ­¥è‡ªç„¶å°±æ˜¯éœ€è¦æŠŠåºå·è½¬æ¢æˆå¯¹åº”çš„<code>embeddings</code>å•¦ã€‚æ¥ä¸‹æ¥éœ€è¦è€ƒè™‘çš„äº‹æƒ…æˆ‘ä»¬å¦‚ä½•å¤„ç†è¿™äº›å‘é‡å‘¢ï¼Ÿæˆ‘ä»¬çš„å‰é¦ˆç¥ç»ç½‘ç»œè¯¥å¼„æˆå‡ å±‚ï¼Ÿç¥ç»ç½‘ç»œè¯¥æ˜¯ä»€ä¹ˆç»“æ„ï¼Ÿä¸ç”¨æ€•ï¼æˆ‘ä»¬çš„<code>AllenNLP</code>åœ¨è¿™é‡Œå…¨å°è£…ï¼Œæ²¡æœ‰ä¸­é—´å•†èµšå·®ä»·ï¼Œåœ¨è¿™é‡Œèƒ½å¤Ÿè®©ä½ èŠ±æœ€å°‘çš„æ—¶é—´å®Œæˆä¸€ä¸ªåŸºæœ¬çš„æ¨¡å‹ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€çœ‹æ„é€ å‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Model.register("paper_classifier")</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AcademicPaperClassifier</span><span class="params">(Model)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,</span></span></span><br><span class="line"><span class="function"><span class="params">                 vocab: Vocabulary,</span></span></span><br><span class="line"><span class="function"><span class="params">                 text_field_embedder: TextFieldEmbedder,</span></span></span><br><span class="line"><span class="function"><span class="params">                 title_encoder: Seq2VecEncoder,</span></span></span><br><span class="line"><span class="function"><span class="params">                 abstract_encoder: Seq2VecEncoder,</span></span></span><br><span class="line"><span class="function"><span class="params">                 classifier_feedforward: FeedForward,</span></span></span><br><span class="line"><span class="function"><span class="params">                 initializer: InitializerApplicator = InitializerApplicator<span class="params">()</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">                 regularizer: Optional[RegularizerApplicator] = None)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        super(AcademicPaperClassifier, self).__init__(vocab, regularizer)</span><br><span class="line"></span><br><span class="line">        self.text_field_embedder = text_field_embedder</span><br><span class="line">        self.num_classes = self.vocab.get_vocab_size(<span class="string">"labels"</span>)</span><br><span class="line">        self.title_encoder = title_encoder</span><br><span class="line">        self.abstract_encoder = abstract_encoder</span><br><span class="line">        self.classifier_feedforward = classifier_feedforward</span><br><span class="line">        self.metrics = &#123;</span><br><span class="line">                <span class="string">"accuracy"</span>: CategoricalAccuracy(),</span><br><span class="line">                <span class="string">"accuracy3"</span>: CategoricalAccuracy(top_k=<span class="number">3</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        self.loss = torch.nn.CrossEntropyLoss()</span><br><span class="line">        initializer(self)</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°±åƒåœ¨<code>DatasetReader</code>å½“ä¸­ä¸€æ ·æ³¨å†Œä¸€ä¸‹æˆ‘ä»¬çš„æ¨¡å‹ï¼Œæ–¹ä¾¿é…ç½®æ–‡ä»¶çš„æŸ¥æ‰¾ã€‚<strong>æ³¨æ„ï¼Œè¿™é‡Œå‡ºç°äº†ä¸€ä¸ªå¥‡æ€ªçš„å‚æ•°Vocabularyï¼Œè¿™ä¸ªå‚æ•°é¡¾åæ€ä¹‰å°±æ˜¯æˆ‘ä»¬çš„æ•°æ®å­—å…¸ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨å“ªé‡Œæ„é€ çš„å‘¢ï¼Ÿï¼Ÿï¼Ÿç­”æ¡ˆæ˜¯ä¸ç”¨æ„é€ ï¼å†™modelçš„æ—¶å€™é¡ºæ‰‹å†™ä¸Šå»å°±è¡Œå•¦ï¼Œè¿™ä¸ªæ˜¯Allennlpå¸®åŠ©æˆ‘ä»¬å†™å¥½çš„</strong>ã€‚åŒæ—¶è¿™ä¸ªæ•°æ®å­—å…¸å…¶å®æ˜¯ä¸ªå¤åˆå­—å…¸ï¼ŒåŒ…æ‹¬æ‰€æœ‰<code>TextField</code>çš„å­—å…¸ï¼Œä»¥åŠ<code>LabelField</code>è‡ªå·±å•ç‹¬çš„å­—å…¸ã€‚ç„¶åéœ€è¦ä»‹ç»çš„å‚æ•°å°±æ˜¯<code>TextFieldEmbedder</code>ä¸ºæ‰€æœ‰çš„<code>TextField</code>ç±»å…±åŒå»ºç«‹äº†ä¸€ä¸ª<code>embeddings</code>ã€‚</p>
<p>â€ƒâ€ƒåˆ©ç”¨è¿™ä¸ª<code>embeddings</code>ä»¥åŠæˆ‘ä»¬è¾“å…¥çš„åºå·ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿè·å¾—ä¸€ä¸ªå‘é‡ç»„æˆçš„åºåˆ—ã€‚ä¸‹ä¸€æ­¥å°±æ˜¯å¯¹è¿™ä¸ªåºåˆ—è¿›è¡Œå˜åŒ–ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯<code>Seq22VecEncoder</code>ã€‚è¿™ä¸ª<code>Encoder</code>å¯ä»¥æœ‰å¾ˆå¤šçš„å˜åŒ–ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯æœ€æœ€ç®€å•çš„ä¸€ç§ï¼Œå°±æ˜¯<code>bag of embeddings</code>ï¼Œç›´æ¥æ±‚å¹³å‡ã€‚å½“ç„¶å•¦ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä»€ä¹ˆ<code>CNN</code>å•¦ï¼Œ<code>RNN</code>å•¦ç­‰é«˜å¤§ä¸Šçš„æ¨¡å‹ï¼Œæˆ‘ä»¬éƒ½æœ‰çš„!æˆ‘ä»¬éƒ½æœ‰çš„ï¼</p>
<p>â€ƒâ€ƒå‰é¦ˆç¥ç»ç½‘ç»œå‘¢ä¹Ÿæ˜¯ä¸€ä¸ªé¢„å…ˆå®šä¹‰å¥½çš„<code>Module</code>ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹è¿™ä¸ªç½‘ç»œçš„æ·±åº¦å®½åº¦æ¿€æ´»å‡½æ•°ã€‚<code>InitializerApplicator</code>åŒ…å«ç€æ‰€æœ‰å‚æ•°çš„åŸºæœ¬åˆå§‹åŒ–æ–¹æ³•ã€‚å¦‚æœä½ æƒ³è‡ªå®šä¹‰åˆå§‹åŒ–ï¼Œå°±éœ€è¦æ—¶å€™ç”¨<code>RegularizerApplicator</code></p>
<p>â€ƒâ€ƒè¿™äº›æ¦‚å¿µææ‡‚äº†ä¹‹åï¼Œä¸‹é¢çš„æ“ä½œå°±å¾ˆç®€å•å•¦ã€‚æˆ‘ä»¬åªéœ€è¦åƒä¼ ç»Ÿçš„<code>Pytorch</code>ä¸­çš„ç¨‹åºä¸€æ ·ï¼Œé‡å†™ä¸€ä¸ª<code>forward</code>å‡½æ•°å°±å¥½å•¦ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self,</span></span></span><br><span class="line"><span class="function"><span class="params">            title: Dict[str, torch.LongTensor],</span></span></span><br><span class="line"><span class="function"><span class="params">            abstract: Dict[str, torch.LongTensor],</span></span></span><br><span class="line"><span class="function"><span class="params">            label: torch.LongTensor = None)</span> -&gt; Dict[str, torch.Tensor]:</span></span><br><span class="line">    embedded_title = self.text_field_embedder(title)</span><br><span class="line">    title_mask = util.get_text_field_mask(title)</span><br><span class="line">    encoded_title = self.title_encoder(embedded_title, title_mask)</span><br><span class="line"></span><br><span class="line">    embedded_abstract = self.text_field_embedder(abstract)</span><br><span class="line">    abstract_mask = util.get_text_field_mask(abstract)</span><br><span class="line">    encoded_abstract = self.abstract_encoder(embedded_abstract, abstract_mask)</span><br><span class="line"></span><br><span class="line">    logits = self.classifier_feedforward(torch.cat([encoded_title, encoded_abstract], dim=<span class="number">-1</span>))</span><br><span class="line">    class_probabilities = F.softmax(logits)</span><br><span class="line"></span><br><span class="line">    output_dict = &#123;<span class="string">"class_probabilities"</span>: class_probabilities&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> label <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        loss = self.loss(logits, label.squeeze(<span class="number">-1</span>))</span><br><span class="line">        <span class="keyword">for</span> metric <span class="keyword">in</span> self.metrics.values():</span><br><span class="line">            metric(logits, label.squeeze(<span class="number">-1</span>))</span><br><span class="line">        output_dict[<span class="string">"loss"</span>] = loss</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> output_dict</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬é¦–å…ˆæ³¨æ„åˆ°çš„åº”è¯¥æ˜¯è¿™ä¸ªå‡½æ•°çš„å‚æ•°ã€‚è¿˜è®°å¾—æˆ‘ä»¬å†™çš„<code>DatasetReader</code>å—ï¼Ÿå®ƒæ„é€ çš„<code>instance</code>å°±åŒ…å«äº†è¿™æ ·å‡ ä¸ªå­—æ®µ<code>Fields</code>ã€‚æ‰€ä»¥åœ¨è¿™é‡Œï¼Œå‚æ•°çš„åå­—ä¸€å®šè¦å’Œ<code>DatasetReader</code>ä¸­å®šä¹‰çš„åå­—ä¿æŒä¸€è‡´ã€‚<code>AllenNLP</code>åœ¨è¿™é‡Œå°†ä¼šè‡ªåŠ¨çš„åˆ©ç”¨ä½ çš„<code>DatasetReader</code>å¹¶ä¸”æŠŠæ•°æ®ç»„ç»‡æˆ<code>batches</code>çš„å½¢å¼ï¼Œå¿…è¦æ—¶è¿˜ä¼šç»™ä½ <code>padding</code>ä¸€ä¸‹ã€‚<strong>æ³¨æ„ï¼Œforwardå‡½æ•°æ¥æ”¶çš„å‚æ•°æ­£æ˜¯ä¸€ä¸ªbatchçš„æ•°æ®</strong>ã€‚</p>
<p>â€ƒâ€ƒæ³¨æ„ï¼Œæˆ‘ä»¬è¦æ±‚å¿…é¡»æŠŠ<code>labels</code>ä¹Ÿä¼ é€’ç»™<code>forward</code>å‡½æ•°ã€‚è¿™ä¹ˆåšçš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†èƒ½å¤Ÿè®¡ç®—æŸå¤±å‡½æ•°ã€‚åœ¨è®­ç»ƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„æ¨¡å‹ä¼šä¸»åŠ¨çš„å»å¯»æ‰¾è¿™ä¸ª<code>loss</code>ï¼Œç„¶åè‡ªåŠ¨çš„åå‘ä¼ æ’­å›å»ï¼Œç„¶åæ›´æ”¹å‚æ•°ã€‚<strong>åŒæ—¶æˆ‘ä»¬ä¹Ÿåº”è¯¥æ³¨æ„åˆ°ï¼Œè¿™ä¸ªå‚æ•°æ˜¯å¯ä»¥ä¸ºç©ºçš„ï¼Œè¿™ä¸»è¦æ˜¯ä¸ºäº†åº”å¯¹predictionçš„æƒ…å†µ</strong>ã€‚è¿™ä¸ªå°†ä¼šåœ¨åé¢ç« èŠ‚ä¸­è¿›è¡Œä»‹ç»ã€‚</p>
<p>â€ƒâ€ƒæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€çœ‹è¾“å…¥çš„ç±»å‹ã€‚<code>label</code>å¾ˆç®€å•ï¼Œä»–å°±æ˜¯ä¸€ä¸ª<code>[batch_size,1]</code>å¤§å°çš„<code>tensor</code>æ²¡ä»€ä¹ˆå¥½è¯´çš„ã€‚å¦å¤–ä¸¤ä¸ªå¯å°±æœ‰ç‚¹å¤æ‚å•¦ã€‚å¦‚æœä½ è¿˜è®°å¾—ï¼Œ<code>title</code>å’Œ<code>abstract</code>ä¸¤ä¸ªæ˜¯<code>TextField</code>ç±»å‹çš„ï¼Œç„¶åè¿™äº›<code>TextField</code>åˆè¢«è½¬æ¢æˆäº†å­—å…¸ç±»å‹çš„ã€‚è¿™ä¸ªæ–°çš„å­—å…¸å‘¢å¯èƒ½åŒ…æ‹¬äº†å•è¯id,å­—æ¯arrayæˆ–è€…posæ ‡ç­¾IDä»€ä¹ˆçš„ã€‚ä½†æ˜¯æˆ‘ä»¬çš„<code>embedder</code>æ˜¯ä¸åœ¨ä¹ä½ æ˜¯ä»€ä¹ˆé¬¼å­—å…¸çš„ï¼Œç›´æ¥ä¸€è‚¡è„‘çš„æ‰”è¿›å»å°±èƒ½å¤Ÿå¸®ä½ å®Œæˆè½¬æ¢è¿‡ç¨‹ã€‚è¿™å°±æ„å‘³ç€æˆ‘ä»¬<code>TextFieldEmbedder</code>å¿…é¡»å’Œ<code>TextField</code>å®Œç¾çš„å¯¹æ¥å“‡ï¼Œä¸ç„¶ä¸æ˜¯è¦çè½¬æ¢å•¦ã€‚å¯¹æ¥çš„è¿‡ç¨‹åˆæ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­å®Œæˆçš„ï¼Œåœ¨åé¢æˆ‘ä»¬å°†ä¼šè¯¦ç»†çš„è®²è§£ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»ç†è§£äº†æ¨¡å‹çš„åŸºæœ¬è¾“å…¥ï¼Œæ¥çœ‹çœ‹å®ƒçš„åŸºæœ¬é€»è¾‘ã€‚æ¨¡å‹å¹²çš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯æ‰¾åˆ°<code>title</code>å’Œ<code>abstract</code>çš„<code>embeddings</code>,ç„¶åå¯¹è¿™äº›å‘é‡è¿›è¡Œæ“ä½œã€‚æ³¨æ„æˆ‘ä»¬éœ€è¦åˆ©ç”¨ä¸€ä¸ªå«<code>masks</code>çš„å˜é‡æ¥æ ‡è¯†å“ªäº›å…ƒç´ ä»…ä»…æ˜¯ç”¨æ¥æ ‡è¯†è¾¹ç•Œçš„ï¼Œè€Œä¸éœ€è¦æ¨¡å‹è€ƒè™‘ã€‚æˆ‘ä»¬å¯¹è¿™äº›å‘é‡è¿›è¡Œäº†ä¸€é€šæ“ä½œä¹‹åï¼Œç”Ÿæˆäº†ä¸€ä¸ªå‘é‡ã€‚ç„¶åæŠŠè¿™ä¸ªå‘é‡æ‰”åˆ°ä¸€ä¸ªå‰é¦ˆç¥ç»ç½‘ç»œä¸­å°±å¯ä»¥å¾—åˆ°<code>class logits</code>å…¶å®å°±æ˜¯é¢„æµ‹ä¸ºå„ä¸ªç±»çš„æ¦‚ç‡ï¼Œæœ‰äº†è¿™ä¸ªæ¦‚ç‡æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°æœ€ç»ˆé¢„æµ‹çš„ç»“æœã€‚æœ€åï¼Œå¦‚æœæ˜¯è®­ç»ƒè¿‡ç¨‹çš„è¯ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è®¡ç®—æŸå¤±å’Œè¯„ä»·æ ‡å‡†ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹è¿™ä¸¤éƒ¨åˆ†çš„ä»£ç ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_metrics</span><span class="params">(self, reset: bool = False)</span> -&gt; Dict[str, float]:</span></span><br><span class="line">        <span class="keyword">return</span> &#123;metric_name: metric.get_metric(reset) <span class="keyword">for</span> metric_name, metric <span class="keyword">in</span> self.metrics.items()&#125;</span><br><span class="line">This method <span class="keyword">is</span> how the model tells the training code which metrics it<span class="string">'s computing. The second pieces of code is the decode method:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def decode(self, output_dict: Dict[str, torch.Tensor]) -&gt; Dict[str, torch.Tensor]:</span></span><br><span class="line"><span class="string">        predictions = output_dict['</span>class_probabilities<span class="string">'].cpu().data.numpy()</span></span><br><span class="line"><span class="string">        argmax_indices = numpy.argmax(predictions, axis=-1)</span></span><br><span class="line"><span class="string">        labels = [self.vocab.get_token_from_index(x, namespace="labels")</span></span><br><span class="line"><span class="string">                  for x in argmax_indices]</span></span><br><span class="line"><span class="string">        output_dict['</span>label<span class="string">'] = labels</span></span><br><span class="line"><span class="string">        return output_dict</span></span><br></pre></td></tr></table></figure>
<p><code>decode</code>å‡½æ•°åŒ…æ‹¬ä¸¤ä¸ªåŠŸèƒ½â‘ æ˜¯æ¥æ”¶<code>forward</code>å‡½æ•°çš„è¿”å›å€¼ï¼Œå¹¶ä¸”å¯¹è¿™ä¸ªè¿”å›å€¼è¿›è¡Œæ“ä½œï¼Œæ¯”å¦‚è¯´ç®—å‡ºå…·ä½“æ˜¯é‚£ä¸ªè¯å•Šç­‰ç­‰ã€‚â‘¡æ˜¯å°†æ•°å­—å˜æˆå­—ç¬¦ï¼Œæ–¹ä¾¿é˜…è¯»ã€‚å¥½å•¦ï¼Œè‡³æ­¤æˆ‘ä»¬çš„æ¨¡å‹å·²ç»æ„å»ºå¥½å•¦ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥æµ‹è¯•å•¦ã€‚</p>
<h4 id="3-5-è®­ç»ƒæ¨¡å‹"><a href="#3-5-è®­ç»ƒæ¨¡å‹" class="headerlink" title="3.5 è®­ç»ƒæ¨¡å‹"></a>3.5 è®­ç»ƒæ¨¡å‹</h4><p>â€ƒâ€ƒä¸ºäº†è®­ç»ƒæ¨¡å‹ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚é¦–å…ˆæ¥çœ‹å¯¹<code>dataset_reader</code>çš„å®šä¹‰ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"dataset_reader": &#123;</span><br><span class="line">  "type": "s2_papers"</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>â€ƒè¿™ä¸€éƒ¨åˆ†é…ç½®åº”è¯¥åŒ…å«ç€<code>DatasetReader</code>çš„è¾“å…¥å‚æ•°ã€‚<code>type</code>è¿™ä¸ªå­—æ®µå‘¢ï¼Œå°±æ˜¯æˆ‘ä»¬æ³¨å†Œçš„è‡ªå·±å†™çš„<code>DatasetReader</code>çš„åå­—ï¼Œå‰©ä¸‹çš„å‚æ•°éƒ½æ˜¯ç›´æ¥ä¼ å…¥åˆ°äº†æ„é€ å‡½æ•°ä¸­ã€‚åœ¨è¿™é‡Œæ²¡æœ‰å…¶ä»–çš„å‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ä¼šä½¿ç”¨é»˜è®¤çš„<code>tokenizer</code>å’Œ<code>tokenIndexer</code>ã€‚</p>
<p>â€ƒâ€ƒæ¥ç€çœ‹ä¸€çœ‹è®­ç»ƒå’Œæµ‹è¯•çš„åŸºæœ¬å‚æ•°ã€‚ä¸‹é¢è¿™äº›å‚æ•°å®šä¹‰äº†å¦‚ä½•æ„é€ batchæ•°æ®ï¼Œå¦‚ä½•è®­ç»ƒæ¨¡å‹ã€‚<code>sorting_keys</code>é¡¾åæ€ä¹‰æ˜¯å®šä¹‰äº†æˆ‘ä»¬æ‰€æœ‰<code>instance</code>çš„æ’åºæ–¹å¼ï¼Œæ’åºå¯ä»¥æé«˜æ•ˆç‡ï¼ˆèŠ±åœ¨padding tokenä¸Šé¢çš„è®¡ç®—å‡å°‘ï¼‰ï¼›ä½¿ç”¨<code>AdaGrad</code>ä½œä¸ºä¼˜åŒ–å™¨ï¼Œæ‰§è¡Œ40ä¸ªepochï¼Œå¦‚æœ10ä¸ªepochæ²¡æœ‰æ”¹è¿›çš„è¯å°±æå‰ç»“æŸè®­ç»ƒã€‚å¹¶ä¸”è¿™é‡Œçš„è®­ç»ƒæ•°æ®æ˜¯ä»ç½‘ä¸Šä¸‹è½½ä¸‹æ¥çš„ï¼Œè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¹‹å‰å†™è¯»å–æ–‡ä»¶çš„ä»£ç æ—¶ç”¨åˆ°äº†cached_pathçš„åŸå› ã€‚</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"train_data_path"</span>: <span class="string">"https://s3-us-west-2.amazonaws.com/allennlp/datasets/academic-papers-example/train.jsonl"</span>,</span><br><span class="line">  <span class="attr">"validation_data_path"</span>: <span class="string">"https://s3-us-west-2.amazonaws.com/allennlp/datasets/academic-papers-example/dev.jsonl"</span>,</span><br><span class="line">  <span class="attr">"iterator"</span>: &#123;</span><br><span class="line">    <span class="attr">"type"</span>: <span class="string">"bucket"</span>,</span><br><span class="line">    <span class="attr">"sorting_keys"</span>: [[<span class="string">"abstract"</span>, <span class="string">"num_tokens"</span>], [<span class="string">"title"</span>, <span class="string">"num_tokens"</span>]],</span><br><span class="line">    <span class="attr">"batch_size"</span>: <span class="number">64</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"trainer"</span>: &#123;</span><br><span class="line">    <span class="attr">"num_epochs"</span>: <span class="number">40</span>,</span><br><span class="line">    <span class="attr">"patience"</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">"cuda_device"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"grad_clipping"</span>: <span class="number">5.0</span>,</span><br><span class="line">    <span class="attr">"validation_metric"</span>: <span class="string">"+accuracy"</span>,</span><br><span class="line">    <span class="attr">"optimizer"</span>: &#123;</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"adagrad"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>æœ€åä¸€æ®µé…ç½®æ–°é²œå‡ºç‚‰å•¦ã€‚<code>key</code>å­—æ®µåˆå‡ºç°å•¦ï¼Œè¿™æ˜¯æˆ‘ä»¬æ³¨å†Œçš„æ¨¡å‹åç§°ã€‚å‰©ä¸‹çš„å­—æ®µå°†ä¼šä¼ é€’ç»™æ¨¡å‹çš„<code>from_params</code>å‡½æ•°ã€‚æˆ‘ä»¬è¿˜å®šä¹‰äº†<code>TextFieldEmbedder</code>çš„é…ç½®ï¼Œåœ¨è¿™é‡Œç”¨çš„æ˜¯gloveçš„å‘é‡ä½œä¸ºæˆ‘ä»¬çš„embeddingsã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰ä¸€äº›å­—æ¯çº§åˆ«çš„embeddings,ç”šè‡³å¯ä»¥å®šä¹‰å®Œä¹‹åè®©ä»–è‡ªåŠ¨çš„å·ç§¯ä¸€ä¸‹ä»€ä¹ˆçš„ï¼Œè¿™éƒ½æ˜¯å¯è¡Œçš„ã€‚åœ¨è¿™é‡Œæ²¡æœ‰è¿™ç§æ“ä½œï¼Œä¹Ÿå°±ä¸ä»‹ç»å•¦ã€‚ä¸è¿‡åœ¨<code>crf_tagger</code>ä¸­æ˜¯å­˜åœ¨çš„ã€‚</p>
<p>â€ƒâ€ƒ<code>title</code>å’Œ<code>abstract</code>å‘¢ç”¨çš„éƒ½æ˜¯åŒå‘LSTMçš„æ¨¡å‹ä½œä¸º<code>encoders</code>,å…¶å®å°±æ˜¯pytorch é‡Œé¢å°è£…äº†ä¸€ä¸‹<code>Seq2VecEncoder</code>ï¼Œè¿™æ ·åœ¨ä»£ç ä¸­å°±å¯ä»¥ç»™å‡ºç»Ÿä¸€çš„æ ¼å¼äº†ã€‚å‰é¦ˆç¥ç»ç½‘ç»œå¯ä»¥è‡ªå®šä¹‰å®½åº¦æ·±åº¦å’Œæ¿€æ´»å±‚ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"model": &#123;</span><br><span class="line">    "type": "paper_classifier",</span><br><span class="line">    "text_field_embedder": &#123;</span><br><span class="line">      "tokens": &#123;</span><br><span class="line">        "type": "embedding",</span><br><span class="line">        "pretrained_file": "https://s3-us-west-2.amazonaws.com/allennlp/datasets/glove/glove.6B.100d.txt.gz",</span><br><span class="line">        "embedding_dim": 100,</span><br><span class="line">        "trainable": false</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    "title_encoder": &#123;</span><br><span class="line">      "type": "lstm",</span><br><span class="line">      "bidirectional": true,</span><br><span class="line">      "input_size": 100,</span><br><span class="line">      "hidden_size": 100,</span><br><span class="line">      "num_layers": 1,</span><br><span class="line">      "dropout": 0.2</span><br><span class="line">    &#125;,</span><br><span class="line">    "abstract_encoder": &#123;</span><br><span class="line">      "type": "lstm",</span><br><span class="line">      "bidirectional": true,</span><br><span class="line">      "input_size": 100,</span><br><span class="line">      "hidden_size": 100,</span><br><span class="line">      "num_layers": 1,</span><br><span class="line">      "dropout": 0.2</span><br><span class="line">    &#125;,</span><br><span class="line">    "classifier_feedforward": &#123;</span><br><span class="line">      "input_dim": 400,</span><br><span class="line">      "num_layers": 2,</span><br><span class="line">      "hidden_dims": [200, 3],</span><br><span class="line">      "activations": ["relu", "linear"],</span><br><span class="line">      "dropout": [0.2, 0.0]</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure>
<p>å®Œå•¦ï¼åˆ°äº†è¿™é‡Œæˆ‘ä»¬å·²ç»æŠŠè‡ªå·±çš„æ¨¡å‹å†™å®Œå•¦ï¼Œç°åœ¨å¯ä»¥ç›´æ¥åœ¨æ•°æ®é›†ä¸Šè®­ç»ƒå•¦ã€‚ç°åœ¨å‘¢ï¼Œå”¯ä¸€çš„é—®é¢˜å°±æ˜¯æˆ‘ä»¬çš„<code>AllenNLP</code>å¹¶ä¸è®¤è¯†æˆ‘ä»¬çš„æ¨¡å‹å“‡ï¼Œæˆ‘ä»¬å¿…é¡»å§å®ƒæ”¾åœ¨<code>python</code>çš„åŒ…è·¯å¾„ä¸Šï¼Œç„¶åæ‰§è¡Œæ—¶åŠ ä¸Šè¿™ä¹ˆä¸€ä¸ªå‚æ•°<code>--include-package my_library</code>ã€‚å®Œæ•´çš„æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">allennlp train \</span><br><span class="line">    experiments/venue_classifier.json \</span><br><span class="line">    -s /tmp/venue_output_dir \</span><br><span class="line">    --include-package my_library</span><br></pre></td></tr></table></figure>
<h1 id="3-6-å®ç°é¢„æµ‹åŠŸèƒ½"><a href="#3-6-å®ç°é¢„æµ‹åŠŸèƒ½" class="headerlink" title="3.6 å®ç°é¢„æµ‹åŠŸèƒ½"></a>3.6 å®ç°é¢„æµ‹åŠŸèƒ½</h1><blockquote>
<p>â€ƒâ€ƒå½“æˆ‘ä»¬è®­ç»ƒå¥½æ¨¡å‹ä¹‹åï¼Œæ¥ä¸‹æ¥éœ€è¦åšçš„å°±æ˜¯é¢„æµ‹äº†ã€‚é¢„æµ‹çš„å®ç°æ˜¯æœ¬å°èŠ‚çš„ä¸»è¦å†…å®¹ã€‚</p>
</blockquote>
<h4 id="3-6-1-åˆ›å»ºé¢„æµ‹å™¨"><a href="#3-6-1-åˆ›å»ºé¢„æµ‹å™¨" class="headerlink" title="3.6.1 åˆ›å»ºé¢„æµ‹å™¨"></a>3.6.1 åˆ›å»ºé¢„æµ‹å™¨</h4><p>â€ƒâ€ƒåœ¨æˆ‘ä»¬å‰é¢å†™è¿‡çš„è®ºæ–‡åˆ†ç±»çš„æ¨¡å‹å½“ä¸­ï¼Œæœ€æ ¸å¿ƒçš„å°±æ˜¯<code>forward</code>å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°é•¿è¿™ä¸ªæ ·å­ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self,</span></span></span><br><span class="line"><span class="function"><span class="params">                title: Dict[str, torch.LongTensor],</span></span></span><br><span class="line"><span class="function"><span class="params">                abstract: Dict[str, torch.LongTensor],</span></span></span><br><span class="line"><span class="function"><span class="params">                label: torch.LongTensor = None)</span> -&gt; Dict[str, torch.Tensor]:</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„<code>forward</code>å‡½æ•°å·²ç»å¾ˆæ£’å•¦ï¼Œå…¶å®æˆ‘ä»¬ä»¥å‰å‘¢éƒ½æ˜¯åœ¨forwardçš„ä¹‹åï¼Œè‡ªå·±å†™ä¸ªå‡½æ•°å°±å«ä¸ª<code>predict</code>å•¥çš„ï¼Œç„¶åç”¨è¿™ä¸ªå»é¢„æµ‹ã€‚ä½†æ˜¯å‘¢ï¼Œåœ¨<code>AllenNLP</code>é‡Œçš„è§£å†³æ–¹æ¡ˆæ˜¯æœ‰æ‰€ä¸åŒçš„ã€‚åœ¨è¿™é‡ŒæŠŠé¢„æµ‹å™¨å®šä¹‰æˆäº†ä¸€ä¸ªç±»ï¼Œé‡ç‚¹é‡å†™ä¸€ä¸ª<code>_json_to_instance</code>å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å‘¢ä¸»è¦å·¥ä½œæ˜¯æ ¹æ®<code>json</code>æ ¼å¼çš„è¾“å…¥æ•°æ®ï¼Œç”Ÿæˆ<code>instance</code>ï¼Œä»¥åŠæ ‡ç­¾ä¹‹ç±»çš„ä¿¡æ¯ï¼Œç„¶ååˆ©ç”¨<code>forward</code>å‡½æ•°è¿›è¡Œé¢„æµ‹,æœ€åæŠŠ<code>forward</code>çš„è¿”å›ç»“æœå’Œè¿™ç©æ„çš„è¿”å›ç»“æœä¸€èµ·è¿”å›ç»™ä½ ã€‚<strong>ä¹‹æ‰€ä»¥è¦é‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œä¸»è¦æ˜¯ä¸ºäº†èƒ½å¤Ÿæ–¹ä¾¿çš„ç”¨äºå±•ç¤ºdemo</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Predictor.register('paper-classifier')</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PaperClassifierPredictor</span><span class="params">(Predictor)</span>:</span></span><br><span class="line">    <span class="string">"""Predictor wrapper for the AcademicPaperClassifier"""</span></span><br><span class="line"><span class="meta">    @overrides</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_json_to_instance</span><span class="params">(self, json_dict: JsonDict)</span> -&gt; Tuple[Instance, JsonDict]:</span></span><br><span class="line">        title = json_dict[<span class="string">'title'</span>]</span><br><span class="line">        abstract = json_dict[<span class="string">'paperAbstract'</span>]</span><br><span class="line">        instance = self._dataset_reader.text_to_instance(title=title, abstract=abstract)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># label_dict will be like &#123;0: "ACL", 1: "AI", ...&#125;</span></span><br><span class="line">        label_dict = self._model.vocab.get_index_to_token_vocabulary(<span class="string">'labels'</span>)</span><br><span class="line">        <span class="comment"># Convert it to list ["ACL", "AI", ...]</span></span><br><span class="line">        all_labels = [label_dict[i] <span class="keyword">for</span> i <span class="keyword">in</span> range(len(label_dict))]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> instance, &#123;<span class="string">"all_labels"</span>: all_labels&#125;</span><br></pre></td></tr></table></figure>
<p>â€ƒâ€ƒè¿™æ®µä»£ç ä½¿ç”¨äº†å‰é¢å†™å¥½çš„<code>text_to_instance</code>ç»„æˆäº†ä¸€ä¸ªåªåŒ…å«<code>title</code>å’Œ<code>abstract</code>ä¸¤ä¸ªå­—æ®µçš„<code>instance</code>ã€‚è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå…ƒç»„ï¼ŒåŒ…æ‹¬äº†ä¸¤ä¸ªå…ƒç´ ã€‚ç¬¬ä¸€ä¸ªæ˜¯è¿”å›çš„å®ä¾‹<code>instance</code>ï¼Œç¬¬äºŒä¸ªæ˜¯ä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å«äº†æ‰€æœ‰çš„æ ‡ç­¾ä¹‹ç±»çš„ä¸œè¥¿ï¼Œ<font color="green">æ€»ä¹‹å°±æ˜¯æˆ‘ä»¬çš„forwardçš„è¿”å›å€¼æ²¡æœ‰æä¾›çš„ä½†æ˜¯æˆ‘ä»¬åˆéœ€è¦çš„ä¸œè¥¿éƒ½æ”¾åœ¨è¿™é‡Œå°±å¥½å•¦</font>ã€‚<strong>åœ¨è¿™é‡Œæˆ‘ä»¬åªæ˜¯å­˜å‚¨æ‰€æœ‰å¯èƒ½çš„æ ‡ç­¾ï¼Œå…¶ä»–çš„ä¸œè¥¿æš‚æ—¶å°±ä¸å­˜å•¦ã€‚</strong>å½“ç„¶ï¼Œå¦‚æœä½ è¿æ ‡ç­¾éƒ½ç”¨ä¸ç€ï¼Œé‚£ä½ å°±æ”¾ä¸ªç©ºç©ºçš„å­—å…¸åœ¨è¿™é‡Œå ä½å°±å¥½å•¦ã€‚</p>
<h4 id="3-6-2-æµ‹è¯•é¢„æµ‹å™¨"><a href="#3-6-2-æµ‹è¯•é¢„æµ‹å™¨" class="headerlink" title="3.6.2 æµ‹è¯•é¢„æµ‹å™¨"></a>3.6.2 æµ‹è¯•é¢„æµ‹å™¨</h4><p>â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦..æ­¤å¤„çœç•¥Nä¸ªå­—â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦..</p>
<p>ç»è¿‡è¿™äº›æµ‹è¯•ç”¨ä¾‹çš„éªŒè¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ”¾å¿ƒå¤§èƒ†çš„ä½¿ç”¨é¢„æµ‹çš„åŠŸèƒ½å•¦ã€‚ä¸‹é¢ç»™å‡ºåŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">usage: allennlp [<span class="built_in">command</span>] predict [-h]</span><br><span class="line">                                  [--output-file OUTPUT_FILE]</span><br><span class="line">                                  [--batch-size BATCH_SIZE]</span><br><span class="line">                                  [--silent]</span><br><span class="line">                                  [--cuda-device CUDA_DEVICE]</span><br><span class="line">                                  [-o OVERRIDES]</span><br><span class="line">                                  [--include-package INCLUDE_PACKAGE]</span><br><span class="line">                                  [--predictor PREDICTOR]</span><br><span class="line">                                  archive_file input_file</span><br></pre></td></tr></table></figure>
<p>ç•™å¿ƒä¸€ä¸‹ä¸Šé¢çš„ä»£ç æœ‰ä¸¤ä¸ªå¿…é¡»è¦æœ‰çš„å‚æ•°ï¼Œè¾“å…¥æ–‡ä»¶ï¼Œä»¥åŠè®­ç»ƒå¥½çš„æ¨¡å‹ã€‚ä¸‹é¢ç»™å‡ºä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">allennlp predict \</span><br><span class="line">    tests/fixtures/model.tar.gz \</span><br><span class="line">    tests/fixtures/s2_papers.jsonl \</span><br><span class="line">    --include-package my_library \</span><br><span class="line">    --predictor paper-classifier</span><br><span class="line">When you run this it will <span class="built_in">print</span> the ten <span class="built_in">test</span> inputs and their predictions, each of <span class="built_in">which</span> looks like:</span><br><span class="line"></span><br><span class="line">prediction:  &#123;<span class="string">"all_labels"</span>: [<span class="string">"AI"</span>, <span class="string">"ACL"</span>, <span class="string">"ML"</span>], <span class="string">"logits"</span>: [0.008737504482269287, 0.22074833512306213, -0.005263201892375946], <span class="string">"class_probabilities"</span>: [0.31034138798713684, 0.38363200426101685, 0.3060266375541687], <span class="string">"label"</span>: <span class="string">"ACL"</span>&#125;</span><br></pre></td></tr></table></figure>
<h1 id="3-7-è¿è¡Œåœ¨çº¿çš„demo"><a href="#3-7-è¿è¡Œåœ¨çº¿çš„demo" class="headerlink" title="3.7 è¿è¡Œåœ¨çº¿çš„demo"></a>3.7 è¿è¡Œåœ¨çº¿çš„demo</h1><p>ä¸€æ—¦ä½ è®­ç»ƒå¥½äº†æ¨¡å‹ï¼Œå¹¶ä¸”é…ç½®å¥½äº†ä¸€ä¸ªé¢„æµ‹å™¨ï¼Œï¼Œå°±å¾ˆå®¹æ˜“è¿è¡Œä¸€ä¸ªç®€å•çš„web Demoå•¦ã€‚åªéœ€è¦æ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python -m allennlp.service.server_simple \</span><br><span class="line">    --archive-path tests/fixtures/model.tar.gz \</span><br><span class="line">    --predictor paper-classifier \</span><br><span class="line">    --include-package my_library \</span><br><span class="line">    --title <span class="string">"Academic Paper Classifier"</span> \</span><br><span class="line">    --field-name title \</span><br><span class="line">    --field-name paperAbstract</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤å°†ä¼šåœ¨<code>localhost:8000</code>å¼€å¯ä¸€ä¸ªç®€å•çš„æœåŠ¡ï¼Œå¦‚å›¾æ‰€ç¤º</p>
<p><img src="/images/blog/2020/allennlp/demo.webp" alt></p>
]]></content>
      <categories>
        <category>Others</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>AllenNLP</tag>
        <tag>Pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title>Allennlp å…¥é—¨</title>
    <url>/2020/12/19/Allennlp-%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<p>åœ¨æœ€è¿‘çš„å®éªŒä¸­ï¼Œå¯¹æ¯”æ–¹æ³•é‡Œæœ‰ä¸€ä¸ªéœ€è¦ç”¨åˆ°AllenNLPï¼Œå› æ­¤ï¼Œå¯¹AllenNLPè¿›è¡Œä¸€ä¸ªå…¥é—¨çš„äº†è§£ã€‚</p>
<h1 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h1><p>Allennlpå°†NLPä»»åŠ¡å¤„ç†æµç¨‹ä¸­çš„å„ä¸ªé˜¶æ®µéƒ½åšäº†ä¸€å®šç¨‹åº¦çš„æŠ½è±¡ï¼Œåœ¨è½¯ä»¶è®¾è®¡ä¸Šè®²å°±æ˜¯ï¼Œå®ç°äº†é«˜å†…èšï¼Œä½è€¦åˆï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿä¸“æ³¨äºç‰¹å®šæ¨¡å—çš„é€»è¾‘ï¼Œè€Œæ— éœ€å…¶ä»–æµç¨‹çš„æ”¹åŠ¨ï¼Œæå¤§ç¨‹åº¦ä¸Šå‡å°‘äº†å·¥ä½œé‡ã€‚</p>
<p>é‚£åŸºç¡€ä¸”é‡è¦çš„å¤„ç†æµç¨‹æœ‰ï¼š</p>
<ul>
<li>DatasetReaderï¼šä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œè½¬åŒ–ä¸ºInstanceé›†åˆ</li>
<li>Modelï¼šæ¨¡å‹ä¸»ä½“</li>
<li>Iteratorï¼šè¿­ä»£æ•°æ®ï¼Œæå–batchæ•°æ®</li>
<li>Trainerï¼šæ¨¡å‹è®­ç»ƒå™¨ï¼Œå¹¶è®°å½•metric</li>
<li>Predictorï¼šä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹æ¥é¢„æµ‹æ•°æ®</li>
</ul>
<p>ä»¥ä¸Šæ¯ä¸ªæµç¨‹æ˜¯æ¾è€¦åˆçš„ï¼Œæ²¡æœ‰å¼ºå…³è”ï¼Œéœ€è¦å…¨å±€é…ç½®çš„ä¸œè¥¿éå¸¸å°‘ã€‚æ¯”å¦‚åœ¨NLPå¤„ç†ä¸­æœ€å¸¸è§çš„ä¸€ä¸ªï¼šnum_embedding/vocab_size éœ€è¦æå‰å…¨å±€ç»™å®šï¼Œæˆ–è€…ä½¿ç”¨å•ç‹¬çš„é…ç½®æ¥å­˜å‚¨ï¼Œåªä¸è¿‡å¸¦æ¥çš„é—®é¢˜å°±æ˜¯è¿™ä¸ªé…ç½®åœ¨å¾ˆå¤šåœ°æ–¹éƒ½å¯èƒ½ä¼šä½¿ç”¨åˆ°ï¼Œæ•…å‚æ•°çš„ä¼ é€’å°±åˆä¼šå¢åŠ ä»£ç çš„å†—æ‚åº¦ï¼Œä½¿ç”¨èµ·æ¥å¾ˆä¸æ–¹ä¾¿ã€‚åœ¨Allennlpä¸­ä¼šæœ‰ä¸€ä¸ªvocabularyå…¨å±€å­˜å‚¨ï¼Œæ— éœ€å•ç‹¬é…ç½®ï¼Œä¸”æä¾›å‡½æ•°æ¥å£è°ƒç”¨è·å–ï¼Œéå¸¸ç®€å•ã€‚<a id="more"></a></p>
<h1 id="DatasetReader"><a href="#DatasetReader" class="headerlink" title="DatasetReader"></a>DatasetReader</h1><p>æ•°æ®é¢„å¤„ç†ï¼Œç¹çæ— èŠä½†åˆå°‘ä¸äº†ï¼Œè€ŒAllennlpè®©æˆ‘ä»¬åªå…³æ³¨äºæ ¸å¿ƒçš„æ•°æ®è¯»å–ï¼Œé€šç”¨çš„ä¸œè¥¿æ—©å·²å°è£…å¥½ï¼Œæ ¸å¿ƒçš„é€»è¾‘ä¸€ä¸ªéƒ½é€ƒä¸äº†ï¼Œæ¯”å¦‚åœ¨DatasetReaderæˆ‘ä»¬åªéœ€è¦å®ç°ä¸¤ä¸ªå‡½æ•°ï¼š_read , text_to_instanceï¼Œå³å¯å®Œæˆæ•°æ®é¢„å¤„ç†æ•´ä¸ªæµç¨‹ï¼Œå…¶ä»–çš„æ¯”å¦‚build_vocabulary, idx2word, word2idx, get_vocab_sizeç­‰éƒ½å¸®æˆ‘ä»¬åšè¾½ï¼Œå°±é—®ä½ è¿™ä¸ªå·¥å…·æ£’ä¸æ£’ï¼Œå¦™ä¸å¦™ã€‚</p>
<p>åˆ«ä»¥ä¸º_readå’Œtext_to_instanceå‡½æ•°é€»è¾‘æœ‰å¤šå¤æ‚ï¼Œå…¶å®å†ç®€å•ä¸è¿‡äº†ï¼š</p>
<ol>
<li>ä»æœ¬åœ°è¯»å–æ•°æ®</li>
<li>ä»æ•°æ®ä¸­è¯»å–ç›¸å…³æ•°æ®å­—æ®µ</li>
<li>å°†æå–çš„æ•°æ®è½¬åŒ–æˆInstanceæ•°ç»„</li>
</ol>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@DatasetReader.register("pos")</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PosDatasetReader</span><span class="params">(DatasetReader)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    DatasetReader for PoS tagging data, one sentence per line, like</span></span><br><span class="line"><span class="string">    The###DET dog###NN ate###V the###DET apple###NN</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, token_indexers: Dict[str, TokenIndexer] = None)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        super().__init__(lazy=<span class="literal">False</span>)</span><br><span class="line">        self.token_indexers = token_indexers <span class="keyword">or</span> &#123;<span class="string">"tokens"</span>: SingleIdTokenIndexer()&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">text_to_instance</span><span class="params">(self, tokens: List[Token], tags: List[str] = None)</span> -&gt; Instance:</span></span><br><span class="line">        sentence_field = TextField(tokens, self.token_indexers)</span><br><span class="line">        fields = &#123;<span class="string">"sentence"</span>: sentence_field&#125;</span><br><span class="line">        <span class="keyword">if</span> tags:</span><br><span class="line">            label_field = SequenceLabelField(labels=tags, sequence_field=sentence_field)</span><br><span class="line">            fields[<span class="string">"labels"</span>] = label_field</span><br><span class="line">        <span class="keyword">return</span> Instance(fields)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_read</span><span class="params">(self, file_path: str)</span> -&gt; Iterator[Instance]:</span></span><br><span class="line">        <span class="keyword">with</span> open(file_path) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">                pairs = line.strip().split()</span><br><span class="line">                sentence, tags = zip(*(pair.split(<span class="string">"###"</span>) <span class="keyword">for</span> pair <span class="keyword">in</span> pairs))</span><br><span class="line">                <span class="keyword">yield</span> self.text_to_instance([Token(word) <span class="keyword">for</span> word <span class="keyword">in</span> sentence], tags)</span><br></pre></td></tr></table></figure>
<p>è¯»å–çš„Instanceé›†åˆç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="/images/blog/2020/allennlp/datasetreader.jpg" alt></p>
<p>éœ€è¦æ³¨æ„è¿™é‡Œçš„text_to_instanceå‡½æ•°æ˜¯<strong>é‡å†™</strong>ï¼Œå¦å¤–ä¹Ÿå¯ä»¥å°†text_to_instanceä¸­çš„ä»£ç æ¬è¿åˆ°_readä¸­å»ï¼Œç¨‹åºä¸ä¼šå‡ºé”™ï¼Œåªä¸è¿‡é‰´äºè®¾è®¡æ¨¡å¼ä¸­çš„<strong>å•ä¸€èŒè´£</strong>è§„å®šï¼Œå»ºè®®å°†ä¸åŒé€»è¾‘çš„ä»£ç ä½¿ç”¨ä¸åŒå‡½æ•°è¿›è¡Œéš”ç¦»ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™ï¼Œæœ‰å¿ƒäººä¼šæ³¨æ„åˆ°ï¼ŒDatasetReader å’Œ Pytorchä¸­çš„Datasetã€DataLoaderçš„å¼‚åŒç‚¹æ˜¯å•¥ï¼Ÿ</p>
<p>ç­”ï¼šDatasetReaderæ˜¯å¯¹åä¸¤è€…çš„éƒ¨åˆ†æŠ½è±¡èåˆã€‚</p>
<ul>
<li><p>ç›¸åŒç‚¹</p>
</li>
<li><ul>
<li>éƒ½å®Œæˆæ•°æ®çš„è¯»å–ä¸æŠ½è±¡çš„åŠŸèƒ½</li>
<li>éƒ½èƒ½å¤Ÿå®ç°æ•°æ®çš„æ‡’åŠ è½½ï¼ˆé’ˆå¯¹äºå¤§æ•°æ®é‡çš„æƒ…å†µï¼‰</li>
<li>éƒ½æœ‰åŠ é€Ÿæ•°æ®è¯»å–çš„æ€§èƒ½çš„æœºåˆ¶</li>
</ul>
</li>
<li><p>ä¸åŒç‚¹</p>
</li>
<li><ul>
<li>DatasetReaderåˆäºŒä¸ºä¸€ï¼Œæ›´åŠ ç®€å•æ˜“æ‡‚</li>
<li>DatasetReaderåªéœ€è¦å®ç°ä¸€ä¸ªå‡½æ•°å³å¯å®Œæˆæ‰€æœ‰åŠŸèƒ½ï¼ˆå¹¶ä¸æ˜¯è¯´æ‰€æœ‰åŠŸèƒ½åœ¨DatasetReaderä¸­å®ç°ï¼Œè€Œæ˜¯é…åˆå…¶ä»–æ¨¡å—ä¸€èµ·å®ç°ï¼‰</li>
<li>DatasetReaderèƒ½å¤Ÿåœ¨æ•°æ®ç±»å‹ä¸Šæ”¯æŒå¤šç§ä¸åŒNLPä»»åŠ¡</li>
<li>å…¶ä»–çš„æˆ‘éƒ½ä¸è¯´äº†ï¼Œåæ­£å¾ˆç®€å•â€¦â€¦</li>
</ul>
</li>
</ul>
<p>è¯´äº†ä¸åŒç‚¹ï¼Œå¯è¿˜æ²¡æœ‰è¯´åˆ°å…¶æ ¸å¿ƒå¼ºå¤§ä¹‹å¤„ã€‚æˆ‘å°†ä»¥ä¸‰ç‚¹è¯´ï¼š - æ‡’åŠ è½½æ•°æ® - çº¦å®šèƒœäºé…ç½® - ä¸åŒç±»å‹çš„Field</p>
<h3 id="æ‡’åŠ è½½"><a href="#æ‡’åŠ è½½" class="headerlink" title="æ‡’åŠ è½½"></a>æ‡’åŠ è½½</h3><p>åœ¨ç¼–å†™_readå‡½æ•°çš„æ—¶å€™ï¼Œä½¿ç”¨yieldå…³é”®å­—è¿”å›æ•°æ®ï¼ŒDatasetReaderäºæ˜¯å¯¹äºæ•°æ®çš„è¯»å–å¤©ç„¶æœ‰ç€ä¸€ç§lazy generatoræ¨¡å¼ï¼Œæ”¯æŒæ‡’åŠ è½½æ•°æ®ï¼Œåªéœ€è¦åœ¨ä¼ é€’lazyå‚æ•°å°±è¡Œã€‚</p>
<p>å½“ç„¶ï¼Œå¯¹å†…å­˜æœ‰æ‰€ä¼˜åŒ–ï¼Œåœ¨æ—¶é—´ä¸Šå°±ä¼šæœ‰æ‰€æ¶ˆè€—ï¼Œè¿™æ˜¯æ‰€æœ‰ç®—æ³•éƒ½ä¸èƒ½é¿å…çš„ï¼Œé’ˆå¯¹ä¸åŒçš„æ•°æ®é›†ä½¿ç”¨ä¸åŒçš„æ•°æ®åŠ è½½æ¨¡å¼ã€‚</p>
<h3 id="çº¦å®šèƒœäºé…ç½®"><a href="#çº¦å®šèƒœäºé…ç½®" class="headerlink" title="çº¦å®šèƒœäºé…ç½®"></a>çº¦å®šèƒœäºé…ç½®</h3><p>ç»†å¿ƒçš„æœ‹å‹ä¼šå‘ç°ï¼Œæˆ‘ä»¬é‡å†™çš„æ˜¯_readå‡½æ•°ï¼Œè¿™æ˜¯ä¸€ä¸ªç§æœ‰å‡½æ•°ï¼Œä¹Ÿæ˜¯æ•´ä¸ªæ•°æ®è¯»å–æœ€æ ¸å¿ƒçš„å‡½æ•°ï¼ŒAllennlpå¸®æˆ‘ä»¬å®Œæˆäº†readå‡½æ•°ï¼Œå¹¶ä¼šè‡ªåŠ¨è°ƒç”¨_readå‡½æ•°è¯»å–æ•°æ®ã€‚æˆ‘ä»¬åªéœ€è¦å®ç°è¿™ä¸ªå‡½æ•°ï¼Œå…¶ä»–æ•°æ®æ•´ç†ä¸è¯»å–è¿›åº¦æ¡çš„å±•ç¤ºç­‰é™„å¸¦åŠŸèƒ½å°±ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å®Œæˆã€‚</p>
<h3 id="ä¸åŒç±»å‹çš„Field"><a href="#ä¸åŒç±»å‹çš„Field" class="headerlink" title="ä¸åŒç±»å‹çš„Field"></a>ä¸åŒç±»å‹çš„Field</h3><p>DatasetReaderæœ€ç»ˆè¿”å›çš„æ˜¯Instanceå®ä¾‹çš„é›†åˆï¼Œè€ŒInstanceå®é™…ä¸Šæ˜¯ä¸€ä¸ªå­—å…¸ç±»å‹çš„æ•°æ®ï¼š<code>MutableMapping[str, Field]</code>ï¼Œvalueæ˜¯Fieldç±»å‹çš„æ•°æ®ï¼Œå¸¸ç”¨çš„Fieldç±»å‹æœ‰ï¼š</p>
<ul>
<li>TextField</li>
<li>LabelField</li>
<li>SequenceLabelField</li>
<li>KnowledgeGraphField</li>
<li>â€¦</li>
</ul>
<p>é¦–å…ˆï¼ŒFieldçš„ä½œç”¨æ˜¯å­˜å‚¨tokenç›¸å…³ä¿¡æ¯ï¼Œä¸åŒçš„Fieldå®ç°ç±»èƒ½å¤Ÿå­˜å‚¨ä¸åŒä»»åŠ¡ä¸‹çš„æ•°æ®ç»“æ„ä¿¡æ¯ï¼Œæ¯”å¦‚sentence-classificationä¸POS/NERçš„æ•°æ®ç»“æ„å°±ä¸ä¸€æ ·ã€‚ä¸”ä¸åŒå®ç°æœ‰ä¸åŒçš„å¤„ç†æ–¹æ³•ï¼ŒAllennlpç»™æˆ‘ä»¬æä¾›äº†å¾ˆå¤šå†…ç½®å®ç°ï¼Œè¯¦ç»†å¯ä»¥å»çœ‹<a href="https://link.zhihu.com/?target=https%3A//github.com/allenai/allennlp/tree/master/allennlp/data/fields" target="_blank" rel="noopener">å®˜æ–¹ä»£ç </a>ï¼Œè¿™é‡Œæˆ‘å°±ä¸ä¸€ä¸€ä»‹ç»ï¼Œç®€å•ä»‹ç»å‡ ä¸ªï¼šTextFieldï¼ŒLabelField</p>
<p>å…ˆçœ‹TextFieldï¼Œç”¨æ¥å­˜å‚¨åºåˆ—ï¼ˆtokensï¼‰æ•°æ®ï¼Œåœ¨åˆå§‹åŒ–çš„æ—¶å€™æ˜¯éœ€è¦ä¼ é€’token_indexersï¼Œä»¥å¯¹æ•°æ®è¿›è¡Œç´¢å¼•æ˜ å°„ã€‚</p>
<p>è€ŒLabelFieldå’ŒSequenceLabelFieldå°±ä¸éœ€è¦token_indexersï¼Œå› ä¸ºæœ¬èº«å°±æ˜¯labelæ ‡ç­¾ï¼Œæ— éœ€ä½¿ç”¨ä¸åŒçš„ç´¢å¼•æ˜ å°„ï¼Œæ•…ä½¿ç”¨ç»Ÿä¸€é»˜è®¤ï¼ˆSingleIdï¼‰çš„ç´¢å¼•æ˜ å°„å¤„ç†å³å¯ã€‚</p>
<p>å¥½äº†ï¼Œæˆ‘ä»¬çŸ¥é“äº†Instanceæ˜¯å¦‚ä½•ä½¿ç”¨Fieldå­˜å‚¨æ•°æ®ï¼Œé‚£å¦‚ä½•æŠŠå­—æ®µå¡è¿›model.forwardå‡½æ•°ä¸­å»å‘¢ï¼Ÿ</p>
<p>ç­”ï¼šInstanceä¸­çš„keyå€¼ä¸forwardå‡½æ•°ä¸­çš„å‚æ•°åå¯¹åº”ã€‚</p>
<p>æ¯”å¦‚ä»¥ä¸Šä»£ç ä¸­ï¼Œæ¯ä¸ªInstanceæœ‰sentenceå’Œlabelä¸¤ä¸ªå­—æ®µï¼ˆFieldï¼‰ï¼Œæ•…åœ¨model.forwardå‡½æ•°ä¹Ÿæœ‰ä¸ä¹‹å¯¹åº”çš„å‚æ•°åï¼Œå¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Model.register("lstm-tagger")</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LstmTagger</span><span class="params">(Model)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å…¶ä»–å‡½æ•°æˆ‘å°±ä¸å±•ç¤ºå‡ºæ¥äº†</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self,</span></span></span><br><span class="line"><span class="function"><span class="params">                sentence: Dict[str, torch.Tensor],</span></span></span><br><span class="line"><span class="function"><span class="params">                label: torch.Tensor = None)</span> -&gt; Dict[str, torch.Tensor]:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>ã€æ€è€ƒé¢˜ã€‘ï¼šå’³å’³ï½ï½ï¼Œç»†å¿ƒçš„æœ‹å‹å¯èƒ½ä¼šè§‚å¯Ÿåˆ°ï¼Œsentenceçš„æ•°æ®ç±»å‹æ˜¯<code>Dict[str, torch.Tensor]</code>ï¼Œå¯æˆ‘åœ¨Instanceä¸­sentenceé”®ä¸Šå­˜å‚¨çš„å°±æ˜¯TextFieldã€‚å‰é¢ä¹Ÿè¯´äº†ï¼ŒTextFieldæœ¬èº«å°±æ˜¯éœ€è¦å°†æ•°æ®è½¬åŒ–æˆindexï¼Œç„¶åç”¨pytorchåŒ…è£…æˆtorch.Tensoræ•°æ®ç±»å‹ï¼Œé‚£ä¸ºä»€ä¹ˆä¼šæ˜¯Dict[str,torch.Tensor]æ•°æ®ç±»å‹å‘¢ï¼Ÿ ã€çº¿ç´¢ã€‘ï¼štoken_indexers , æ€è€ƒäº”ç§’é’Ÿâ€¦â€¦</p>
<h2 id="token-indexers-amp-token-embedders"><a href="#token-indexers-amp-token-embedders" class="headerlink" title="token_indexers &amp; token_embedders"></a>token_indexers &amp; token_embedders</h2><p>ä¸ºäº†è®²æ¸…æ¥šä¸Šé¢è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å†è·Ÿéšç€sentenceè¿™ä¸ªå­—æ®µä»è¯»å–åˆ°æ˜ å°„æˆè¯å‘é‡è¿™æ•´ä¸ªæµç¨‹æ¥è®²è§£ã€‚</p>
<font color="orange">sentenceå­—æ®µçš„å¤„ç†åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š 1. tokenizer -> åˆ†è¯ 2. Token -> è½¬åŒ–ä¸ºå•ä¸ªTokenå¯¹è±¡ 3. Instance -> è½¬åŒ–ä¸ºInstanceå®ä¾‹ 4. Iterator -> å¹¶ç»„è£…æˆbatchæ¨¡å¼ 5. model.forward -> å¡ç»™æ¨¡å‹å»æ‰§è¡Œ 6. token_embedders -> å°†idxè½¬åŒ–æˆè¯å‘é‡ </font>

<ol>
<li><strong>tokenizer -&gt; åˆ†è¯</strong></li>
</ol>
<p>è¿™ä¸ªè¿‡ç¨‹æ˜¯åœ¨æ–‡æœ¬è¯»å–çš„æ—¶å€™æ‰§è¡Œçš„ã€‚åœ¨DatasetReaderåˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¼šå°†tokenizerä¼ é€’åˆ°æ„é€ å‡½æ•°å½“ä¸­ï¼Œæ²¡æœ‰çš„è¯å°±åˆå§‹åŒ–ä¸€ä¸ªé»˜è®¤åˆ†è¯å™¨ã€‚è¿™ä¸ªåˆ†è¯å™¨å¯ä»¥æ˜¯ä¸€ä¸ªï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªï¼Œå–å†³äºåœ¨å‚æ•°åˆ—è¡¨é‡Œé¢ä¼ é€’çš„ä¸ªæ•°ã€‚</p>
<p>å¯¹äºè‹±æ–‡åˆ†è¯ï¼Œallennlpæœ‰å†…ç½®çš„WordTokenizerï¼Œå¯æ˜¯ä¸­æ–‡åˆ†è¯çš„è¯ï¼Œå°±éœ€è¦è‡ªå·±æ‰‹åŠ¨æ„é€ ä¸€ä¸ªï¼šç»§æ‰¿Tokenizerï¼Œç„¶åæ³¨å†Œã€‚è¿™æ ·å°±å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­é€šè¿‡typeæ‰¾åˆ°å®šåˆ¶åˆ†è¯å™¨ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"I love cat" -&gt; ["I", "love", "cat"]</span><br></pre></td></tr></table></figure>
<ol>
<li><strong>Token -&gt; è½¬åŒ–æˆå•ä¸ªTokenå¯¹è±¡</strong></li>
</ol>
<p>å¦‚æœçœ‹è¿‡Tokenæºç å°±ä¼šçŸ¥é“ï¼Œå…¶æ ¸å¿ƒå­˜å‚¨ç€textï¼Œtext_id,åˆ†åˆ«ä»£è¡¨ç€åˆ†è¯çš„<strong>æ–‡æœ¬</strong>ä»¥åŠ<strong>ç´¢å¼•</strong>ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼Œæ²¡æœ‰ä»€ä¹ˆé€»è¾‘ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">["I", "love", "cat"] -&gt; [Token("I"), Token("love"), Token("cat")]</span><br></pre></td></tr></table></figure>
<ol>
<li><strong>Instance -&gt; è½¬åŒ–ä¸ºInstanceå®ä¾‹</strong></li>
</ol>
<p>è¿™ä¸ªè¿‡ç¨‹ä¸€èˆ¬æ˜¯åœ¨DatasetReaderçš„text_to_instanceå‡½æ•°ä¸­å®Œæˆï¼Œå¹¶é’ˆå¯¹ä¸åŒå­—æ®µè½¬åŒ–æˆä¸åŒçš„Fieldã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">tokens = [Token("I"), Token("love"), Token("cat")]</span><br><span class="line">token_indexers = &#123;</span><br><span class="line">    "word_token": SingleIdTokenIndexer(),</span><br><span class="line">    "character_token": TokenCharactersIndexer()</span><br><span class="line">&#125;</span><br><span class="line">instance = &#123;</span><br><span class="line">    "sentence": TextField(tokens, token_indexers)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li><strong>Iterator -&gt; ç»„è£…æˆbatchæ¨¡å¼</strong></li>
</ol>
<p>è¿™ä¸ªè¿‡ç¨‹æˆ–è®¸çœ‹ä¸è§ï¼Œå¯æ˜¯é€»è¾‘åŸºæœ¬ä¸Šå›ºå®šï¼Œå¦‚æ— ç‰¹æ®Šéœ€æ±‚ï¼Œæ— éœ€å®šåˆ¶ã€‚</p>
<p>å°†Instanceè½¬åŒ–æˆidxçš„ä¼ªä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">instance = &#123;</span><br><span class="line">    "sentence": &#123;</span><br><span class="line">        "word_token": ["I", "love", "cat"] -&gt; torch.Tensor([23, 55, 67]),</span><br><span class="line">        "character_token": [["I"], ["l", "o", "v", "e"],["c", "a", "t"]] -&gt; torch.Tensor([[23], [34, 78, 35, 36],[13, 74, 26]])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶è€Œï¼ŒIteratorçœ‹ä¼¼ç®€å•ï¼Œå¯è¿˜æœ‰ä¸€äº›ç»†èŠ‚æˆ‘æƒ³ä¸å¤§å®¶èŠèŠï¼š</p>
<ul>
<li>åœ¨batchæ•°æ®çš„æ—¶å€™ï¼ŒåŒbatchä¸­ä¸åŒé•¿åº¦çš„æ•°æ®æ˜¯éœ€è¦pad</li>
<li>ä¸ºäº†padè¿‡ç¨‹çš„<strong>æ€§èƒ½</strong>ï¼Œå¯ä¼˜å…ˆå°†é•¿åº¦ç›¸è¿‘çš„æ–‡æœ¬æ”¾ç½®åœ¨åŒä¸€ä¸ªbatchä¸­</li>
<li>éšæœºæ‰“ä¹±æ•°æ®</li>
</ul>
<p>Allennlpå·²ç»å†…ç½®äº†å‡ ä¸ªDataIteratorï¼Œå‡ ä¹ä¸éœ€è¦ä½ è‡ªå·±é‡å†™ï¼Œé™¤éä½ åœ¨batchçš„è¿‡ç¨‹ä¸­ï¼Œå®Œæˆä¸€äº›åˆ›æ–°æ€§çš„å°trickã€‚</p>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> allennlp.data.iterators <span class="keyword">import</span> BucketIterator</span><br><span class="line"></span><br><span class="line">iterator = BucketIterator(batch_size=config.batch_size, </span><br><span class="line">                          biggest_batch_first=<span class="literal">True</span>,</span><br><span class="line">                          sorting_keys=[(<span class="string">"tokens"</span>, <span class="string">"num_tokens"</span>)],</span><br><span class="line">                         )</span><br><span class="line">iterator.index_with(vocab)</span><br></pre></td></tr></table></figure>
<ul>
<li>sorting_keys èƒ½å¤Ÿæå‡paddingè¿‡ç¨‹æ•ˆç‡ã€‚</li>
<li><p>index_with(vocab)éå¸¸é‡è¦ï¼šç»™token_indexersé…ç½®vocabularyã€‚<strong>è¿™ä¸€æ­¥åƒä¸‡ä¸è¦ç»™å¿˜è®°äº†</strong>ã€‚</p>
</li>
<li><p><strong>model.forward -&gt; æ¨¡å‹çš„å‚æ•°</strong></p>
</li>
</ul>
<p>Instanceç»è¿‡token_indexersè½¬åŒ–æˆç´¢å¼•ä¹‹åï¼Œç”±Iteratorç»„è£…æˆbatchæ•°æ®ï¼Œç„¶åå¡ç»™æ¨¡å‹çš„forwardå‡½æ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">token_embedders = &#123;</span><br><span class="line">    <span class="string">"word_token"</span>: TokenEmbedder(embedding_dim = <span class="number">23</span>),</span><br><span class="line">    <span class="string">"character_token"</span>: TokenEmbedder(embedding_dim = <span class="number">27</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">text_field_embedders = BaseTextFieldEmbedder(token_embedders)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self,sentence: Dict[str,torch.Tensor])</span>:</span></span><br><span class="line">    sentence_embedding = text_field_embedders(sentence)</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä¼ªä»£ç å¾ˆç®€å•çš„ï¼Œä¸è¿‡éœ€è¦æ³¨æ„å‡ ç‚¹ï¼š 1ï¼‰text_field_embedderså‚æ•°token_embeddersçš„å…³é”®å­—å’Œtoken_indexersçš„å…³é”®å­—å¿…é¡»è¦ä¿æŒä¸€è‡´ã€‚ 2ï¼‰å¤šç§TokenEmbedderså¯¹åŒä¸€ä¸ªæ–‡æœ¬åˆ†åˆ«åšå¤„ç†å¹¶æ˜ å°„åˆ°è¯å‘é‡åï¼Œå°†å…¶æ‹¼æ¥åˆ°ä¸€èµ·ã€‚æ¯”å¦‚ä¸Šè¿°ä¸¤ä¸ªtoken_embedderç»´åº¦ä¸º23å’Œ27ï¼Œsentence_embeddingçš„ç»´åº¦å°±ä¸º50ã€‚é€šè¿‡ç®€å•çš„å‡ è¡Œä»£ç å°±å¯ä»¥å®Œæˆå¾ˆå¤æ‚çš„è¯å‘é‡æ‹¼æ¥çš„åŠŸèƒ½ã€‚(WTF? è¯å‘é‡æ‹¼æ¥å¾ˆå¤æ‚å—ï¼Ÿ)</p>
<ol>
<li><strong>token_embedders -&gt; è¯å‘é‡æ˜ å°„</strong></li>
</ol>
<p>å…¶å®å¦‚ä½•å°†å°†æ–‡æœ¬ç´¢å¼•æ˜ å°„åˆ°è¯å‘é‡ï¼Œç¬¬äº”ç‚¹å°±å·²ç»è¯´äº†ã€‚å…¶æ ¸å¿ƒéœ€è¦æ³¨æ„çš„å°±æ˜¯ï¼š - token_indexerså’Œtoken_embedderséƒ½æ˜¯å­—å…¸ç±»å‹ï¼Œä¸”é”®å€¼å¿…é¡»ä¿æŒä¸€è‡´ - token_embedderså¤„ç†åçš„è¯å‘é‡æ˜¯æ‹¼æ¥åˆ°ä¸€èµ·<strong>ï¼ˆè¿™ä¸ªç‰¹æ€§éå¸¸æ£’ï¼‰</strong></p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬è·Ÿéšç€sentenceå­—æ®µä»è¯»å–åˆ°æ˜ å°„æˆè¯å‘é‡æ•´ä¸ªæµç¨‹éƒ½å·²ç»èŠå®Œäº†ï¼Œç›¸ä¿¡éƒ½å·²ç»æŒæ¡äº†ã€‚</p>
<p>è‡³æ­¤ï¼Œæˆ‘å·²ç»å°†æ¨¡å‹æ‰§è¡Œä¹‹å‰æ‰€æœ‰çš„æ³¨æ„ç‚¹éƒ½ç»™èŠå®Œäº†ã€‚</p>
<h2 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h2><p>å»ºè®®çœ‹çœ‹æºç ï¼Œå› ä¸ºçœ‹äº†æºç ä½ æ‰ä¼šå‘ç°ï¼ŒAllennlpçš„modelå’Œmoduleéƒ½æ˜¯åŸºäºPytorchçš„torch.nn.Moduleæ¨¡å—å»ºç«‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„ä½¿ç”¨Allennlpä¸­çš„ä»»ä½•ç±»ã€‚</p>
<p>ä¸ºäº†è¯´æ˜Allennlpä¸­çš„æ¨¡å‹ï¼Œæˆ‘å…ˆä¸Pytorchä¸­çš„æ¨¡å‹åšä¸€ä¸ªå¯¹æ¯”è¯´æ˜ï¼š</p>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, tokens: Dict[str, torch.Tensor],</span></span></span><br><span class="line"><span class="function"><span class="params">                id: Any, label: torch.Tensor)</span> -&gt; torch.Tensor:</span></span><br><span class="line">        mask = get_text_field_mask(tokens)</span><br><span class="line">        embeddings = self.word_embeddings(tokens)</span><br><span class="line">        state = self.encoder(embeddings, mask)</span><br><span class="line">        class_logits = self.projection(state)</span><br><span class="line"></span><br><span class="line">        output = &#123;<span class="string">"class_logits"</span>: class_logits&#125;</span><br><span class="line">        output[<span class="string">"loss"</span>] = self.loss(class_logits, label)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> output</span><br></pre></td></tr></table></figure>
<ul>
<li>Allennlpä¸­çš„forwardå‡½æ•°å‚æ•°æœ‰çš„æ˜¯ä¸€ä¸ªå­—å…¸ç±»å‹ï¼ˆç±»ä¼¼äºTextFieldæŒ‡å®šäº†TokenIndexerï¼‰çš„æ•°æ®ï¼Œæœ‰çš„æ˜¯çº¯torch.Tensoræ•°æ®ã€‚è€ŒPytorchä¸­çš„æ•°æ®æ ¼å¼æ²¡æœ‰é™åˆ¶ï¼Œè‡ªç”±åº¦ç”±è‡ªå·±æ§åˆ¶ï¼Œä½†æ¨èæ˜¯torch.Tensoræ•°æ®ç±»å‹ã€‚</li>
<li>Allennlpforwardå‡½æ•°è¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ªå­—å…¸ç±»å‹çš„æ•°æ®ï¼Œå…¶ä¸­æœ€é‡è¦çš„å°±æ˜¯æŸå¤±å‡½æ•°å€¼ï¼Œå¿…é¡»å°†å…¶å­˜å‚¨åœ¨lossé”®ä¸‹ï¼ˆè¿™æ˜¯ä¸€ä¸ª<strong>çº¦å®š</strong>ï¼‰ï¼ŒåŒæ—¶losså€¼çš„ä¸€ä¸ªè®¡ç®—ä¹Ÿæ˜¯åœ¨forwardå‡½æ•°ä¸­æ‰§è¡Œçš„ã€‚</li>
</ul>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»äº†è§£ä¸ºä»€ä¹ˆforwardå‡½æ•°æœ‰çš„å‚æ•°ä¸ºä»€ä¹ˆæ˜¯å­—å…¸ç±»å‹ã€‚é‚£æˆ‘è¿™é‡Œæƒ³é—®ä¸€ä¸ªé—®é¢˜ï¼š</p>
<p>ä¸ºä»€ä¹ˆforwardå‡½æ•°è¿”å›çš„å€¼ä¹Ÿæ˜¯å­—å…¸ç±»å‹ï¼Ÿ ç­”ï¼šå› ä¸ºåœ¨Trainerä¸­æœ‰å¤§ç”¨å¤„ï¼Œåé¢æˆ‘ä¼šè¿›ä¸€æ­¥è®²è§£ã€‚</p>
<p>Allennlpä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆå¥½ç”¨å‘¢ï¼Ÿ</p>
<p>ç­”ï¼šå› ä¸ºé‡Œé¢å°†å¾ˆå¤šç±»ä¼¼çš„ç»„ä»¶ï¼Œå¹¶å°†å…¶æŠ½è±¡æˆæ¨¡å—æ¥ä½¿ç”¨ï¼Œå¸¸ç”¨çš„æœ‰ï¼š</p>
<ul>
<li>token_embedder</li>
<li>encoder</li>
<li>decoder</li>
</ul>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> allennlp.nn.util <span class="keyword">import</span> get_text_field_mask</span><br><span class="line"><span class="keyword">from</span> allennlp.models <span class="keyword">import</span> Model</span><br><span class="line"><span class="keyword">from</span> allennlp.modules.text_field_embedders <span class="keyword">import</span> TextFieldEmbedder</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaselineModel</span><span class="params">(Model)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, word_embeddings: TextFieldEmbedder,</span></span></span><br><span class="line"><span class="function"><span class="params">                 encoder: Seq2VecEncoder,</span></span></span><br><span class="line"><span class="function"><span class="params">                 out_sz: int=len<span class="params">(label_cols)</span>)</span>:</span></span><br><span class="line">        super().__init__(vocab)</span><br><span class="line">        self.word_embeddings = word_embeddings</span><br><span class="line">        self.encoder = encoder</span><br><span class="line">        self.projection = nn.Linear(self.encoder.get_output_dim(), out_sz)</span><br><span class="line">        self.loss = nn.BCEWithLogitsLoss()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, tokens: Dict[str, torch.Tensor],</span></span></span><br><span class="line"><span class="function"><span class="params">                id: Any, label: torch.Tensor)</span> -&gt; torch.Tensor:</span></span><br><span class="line">        mask = get_text_field_mask(tokens)</span><br><span class="line">        embeddings = self.word_embeddings(tokens)</span><br><span class="line">        state = self.encoder(embeddings, mask)</span><br><span class="line">        class_logits = self.projection(state)</span><br><span class="line"></span><br><span class="line">        output = &#123;<span class="string">"class_logits"</span>: class_logits&#125;</span><br><span class="line">        output[<span class="string">"loss"</span>] = self.loss(class_logits, label)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> output</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œencoderæ˜¯Seq2VecEncoderï¼ˆåŸºç±»ï¼‰ç±»å‹ï¼Œæ•…å¯æ›´æ”¹encoderçš„å®ç°ï¼Œå¹¶ä¸æ”¹å˜æ¨¡å‹å†…éƒ¨çš„ä»£ç ï¼Œå®ç°ç»„ä»¶çš„å•ç‹¬æ›¿æ¢ï¼Œè€Œæˆ‘ä»¬æ‰€éœ€è¦åšçš„ï¼Œåªéœ€è¦æ·»åŠ Seq2VecEncoderçš„æ´¾ç”Ÿç±»å³å¯ã€‚</p>
<p>è¿™å°±æ˜¯Allennlpçš„å¼ºå¤§ä¹‹å¤„ï¼šæ‰€æœ‰çš„æµç¨‹éƒ½æŠ½è±¡åŒ–ï¼Œå…·ä½“å®ç°åªéœ€è¦è‡ªå·±æŒ‡å®šæˆ–å®ç°å°±è¡Œã€‚</p>
<h2 id="Train"><a href="#Train" class="headerlink" title="Train"></a>Train</h2><p>æ¥ä¸‹æ¥å°±è¯¥è®¨è®ºæ¨¡å‹çš„<strong>è®­ç»ƒæµç¨‹</strong>äº†ã€‚</p>
<p>ç›¸æ¯”Pytorchç¹æ‚ä¸”æ¯«æ— æ–°ç‰¹æ€§çš„è®­ç»ƒè¿‡ç¨‹ï¼ŒKeraså’Œtensorflowæ¡†æ¶å°±åšçš„å¾ˆå¥½ï¼Œåªéœ€è¦ç®€å•çš„å‡ è¡Œä»£ç å°±å¯ä»¥æ›¿ä»£Pytorchå¤šè¡Œæ‰‹åŠ¨ç¼–åˆ¶çš„è®­ç»ƒloopã€‚</p>
<p>AllennlpæŠ½è±¡äº†ä¸€ä¸ªTrainerï¼Œç”¨æ¥æ‰§è¡Œè®­ç»ƒè¿‡ç¨‹ï¼šæ›´æ–°æ¢¯åº¦ï¼Œä¿å­˜æ—¥å¿—æ–‡ä»¶ï¼ˆç”¨tensorboardæŸ¥çœ‹ï¼‰ï¼Œä¿å­˜best_modelï¼Œè‰¯å¥½çš„è®­ç»ƒè¿‡ç¨‹è¾“å‡ºç­‰ç­‰ï¼Œè¿™ä¸ªè®­ç»ƒå™¨å¤§å¤§å‡å°‘äº†æˆ‘ä»¬çš„å·¥ä½œé‡ã€‚</p>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼Œä¹Ÿæ˜¯éå¸¸ç®€å•ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> allennlp.training.trainer <span class="keyword">import</span> Trainer</span><br><span class="line"></span><br><span class="line">trainer = Trainer(</span><br><span class="line">    model=model,</span><br><span class="line">    optimizer=optim.Adam(model.parameters(), lr=config.lr),</span><br><span class="line">    iterator=iterator,</span><br><span class="line">    train_dataset=train_ds,</span><br><span class="line">    cuda_device=<span class="number">0</span> <span class="keyword">if</span> USE_GPU <span class="keyword">else</span> <span class="number">-1</span>,</span><br><span class="line">    num_epochs=config.epochs,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">trainer.train()</span><br></pre></td></tr></table></figure>
<p>é…ç½®å®ŒTrainerï¼Œåªéœ€è¦æŒ‡å®štrainå‡½æ•°å³å¯å®Œæˆè®­ç»ƒçš„æ•´ä¸ªè¿‡ç¨‹ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Allennlpéå¸¸å¥½ç”¨ï¼Œä¹Ÿæœ‰è¶³å¤Ÿçš„å®šåˆ¶åŒ–èƒ½åŠ›ï¼Œä¹Ÿå¯ä»¥å’ŒTransformerå®Œç¾ç»“åˆåœ¨ä¸€èµ·ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒ<strong>semantic parsing</strong>ï¼Œ<strong>state machine</strong>ï¼Œæœªæ¥ä¹Ÿä¼šæ·»åŠ æ›´å¤šæ›´å¼ºå¤§çš„æ¨¡å—ã€‚</p>
<p><br></p>
<blockquote>
<p>æ¬è¿è‡ªçŸ¥ä¹ï¼š</p>
<p><a href="https://zhuanlan.zhihu.com/p/111563535" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/111563535</a></p>
</blockquote>
<p><br></p>
<h1 id="æ„Ÿå—"><a href="#æ„Ÿå—" class="headerlink" title="æ„Ÿå—"></a>æ„Ÿå—</h1><p>è™½ç„¶ä½œè€…ä»‹ç»äº†å¾ˆå¤šï¼Œä½†æ•´ä½“çœ‹ä¸‹æ¥æ„Ÿè§‰ç¹çè€Œä½æ•ˆï¼Œå¾ˆå¤šç±»å’Œæ¨¡å—çš„å°è£…æ²¡æœ‰å¿…è¦ï¼Œè€Œä¸”å­¦ä¹ æˆæœ¬è¾ƒé«˜ã€‚å€¼å¾—èµæ‰¬çš„å°±æ˜¯å¯¹Trainå’ŒTestè¿‡ç¨‹çš„å°è£…äº†ï¼Œå…¶ä»–çš„å®åœ¨ä¸å¤Ÿæœ‰å¸å¼•åŠ›ã€‚</p>
]]></content>
      <categories>
        <category>Others</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>AllenNLP</tag>
        <tag>Pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title>pip å®‰è£…è·¯å¾„</title>
    <url>/2020/12/19/pip-%E5%AE%89%E8%A3%85%E8%B7%AF%E5%BE%84/</url>
    <content><![CDATA[<p>ä»Šå¤©åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…åŒ…æ—¶ï¼Œæç¤ºç©ºé—´å·²æ»¡ï¼ŒåŸå› æ˜¯/homeç›®å½•ç£ç›˜æ»¡äº†ã€‚</p>
<h1 id="æŸ¥çœ‹pipé»˜è®¤å®‰è£…è·¯å¾„"><a href="#æŸ¥çœ‹pipé»˜è®¤å®‰è£…è·¯å¾„" class="headerlink" title="æŸ¥çœ‹pipé»˜è®¤å®‰è£…è·¯å¾„"></a>æŸ¥çœ‹pipé»˜è®¤å®‰è£…è·¯å¾„</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip show numpy</span><br></pre></td></tr></table></figure>
<p>ç»“æœæ˜¾ç¤ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Name: numpy</span><br><span class="line">Version: 1.19.4</span><br><span class="line">Summary: NumPy is the fundamental package <span class="keyword">for</span> array computing with Python.</span><br><span class="line">Home-page: https://www.numpy.org</span><br><span class="line">Author: Travis E. Oliphant et al.</span><br><span class="line">Author-email: None</span><br><span class="line">License: BSD</span><br><span class="line">Location: /home/klhao/.conda/envs/klhao-allennlp/lib/python3.6/site-packages</span><br><span class="line">Requires: </span><br><span class="line">Required-by: thinc, tensorboardX, spacy, scipy, msgpack-numpy</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œç”±äºæˆ‘ä»¬æ˜¯åœ¨condaåˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…ï¼Œæ‰€ä»¥pipå®‰è£…çš„ä½ç½®æ˜¯condaé»˜è®¤çš„ä½ç½®ã€‚ä¸ºäº†ä½¿ç©ºé—´å……è¶³ï¼Œéœ€è¦åœ¨åˆ›å»ºcondaç¯å¢ƒæ—¶æŒ‡å®šå®‰è£…ç›®å½•ã€‚<a id="more"></a></p>
<h1 id="condaåˆ›å»ºç¯å¢ƒæ—¶æŒ‡å®šç›®å½•"><a href="#condaåˆ›å»ºç¯å¢ƒæ—¶æŒ‡å®šç›®å½•" class="headerlink" title="condaåˆ›å»ºç¯å¢ƒæ—¶æŒ‡å®šç›®å½•"></a>condaåˆ›å»ºç¯å¢ƒæ—¶æŒ‡å®šç›®å½•</h1><p>å®‰è£…è™šæ‹Ÿç¯å¢ƒåˆ°æŒ‡å®šç›®å½•å‘½ä»¤ä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda create --prefix=/data/klhao/.conda/klhao-allennlp python=3.6</span><br></pre></td></tr></table></figure>
<p>å¯¹äºè¿™ç§æ–¹å¼åˆ›å»ºçš„ç¯å¢ƒï¼Œéœ€è¦ä»¥å…¨è·¯å¾„æ¿€æ´»ï¼Œå‘½ä»¤ä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda activate /data/klhao/.conda/klhao-allennlp</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œåœ¨æ¿€æ´»è™šæ‹Ÿç¯å¢ƒåï¼Œå†ä½¿ç”¨conda, pipå°±å¯ä»¥æ„‰å¿«çš„å®‰è£…åŒ…äº†~ğŸˆğŸ‰âœ¨</p>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>pip</tag>
        <tag>pip3</tag>
      </tags>
  </entry>
  <entry>
    <title>TARE debug è®°å½•</title>
    <url>/2020/12/12/TARE-debug-%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<h1 id="1-ä½¿ç”¨iterå°†DataLoaderè½¬åŒ–ä¸ºè¿­ä»£å™¨"><a href="#1-ä½¿ç”¨iterå°†DataLoaderè½¬åŒ–ä¸ºè¿­ä»£å™¨" class="headerlink" title="1. ä½¿ç”¨iterå°†DataLoaderè½¬åŒ–ä¸ºè¿­ä»£å™¨"></a>1. ä½¿ç”¨iterå°†DataLoaderè½¬åŒ–ä¸ºè¿­ä»£å™¨</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">loader = iter(train_loader)</span><br></pre></td></tr></table></figure>
<p>å†…å­˜è¶…å‡ºï¼ŒæŠ¥é”™ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">RuntimeError: [enforce fail at CPUAllocator.cpp:65] . DefaultCPUAllocator: can<span class="string">'t allocate memory: you tried to allocate 800000000000 bytes. Error code 12 (Cannot allocate memory)</span></span><br></pre></td></tr></table></figure>
<p>åŸå› æ˜¯æˆ‘åœ¨æ•°æ®é›†é•¿åº¦ä¸Šè®¾ä¸ºäº† int(1e12) , å¯¼è‡´å†…å­˜æº¢å‡ºã€‚</p>
<h1 id="2-æ¨¡å‹çš„-train-æˆ–-eval-çŠ¶æ€"><a href="#2-æ¨¡å‹çš„-train-æˆ–-eval-çŠ¶æ€" class="headerlink" title="2. æ¨¡å‹çš„ train æˆ– eval çŠ¶æ€"></a>2. æ¨¡å‹çš„ train æˆ– eval çŠ¶æ€</h1><p>æƒ³è¦æŸ¥çœ‹æ¨¡å‹çš„çŠ¶æ€ï¼Œä½¿ç”¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(model.training)</span><br></pre></td></tr></table></figure>
<p>å½“ä½¿ç”¨ model.eval() è®¾ç½®æ¨¡å‹ä¸ºæµ‹è¯•çŠ¶æ€æ—¶ï¼Œæ˜¯å¦ä¼šå°†æ¨¡å‹ä¸­çš„å­æ¨¡å—è‡ªåŠ¨è®¾ç½®ä¸ºæµ‹è¯•çŠ¶æ€å‘¢ï¼Ÿ(åæ¥æ€è€ƒäº†ä¸€ä¸‹ï¼ŒLinear() å°±æ˜¯ Module å­æ¨¡å—å•Šâ€¦ æ˜¯æˆ‘åˆ¶æ–äº†ğŸ™„)</p>
<p>é€šè¿‡ä¸‹é¢çš„ä»£ç æµ‹è¯•:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(<span class="string">'======================='</span>)</span><br><span class="line">print(model.training)</span><br><span class="line">print(model.classifier.training)</span><br><span class="line">model.eval()</span><br><span class="line">print(model.training)</span><br><span class="line">print(model.classifier.training)</span><br><span class="line">print(<span class="string">'======================='</span>)</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ç»“æœä¸ºTrue, True, False, False. è¯´æ˜ Pytorch æ˜¯ä¼šè‡ªåŠ¨é€’å½’å¯¹å­æ¨¡å—è¿›è¡Œå¯¹åº”è®¾ç½®çš„ã€‚<a id="more"></a></p>
<h1 id="3-DataLoader-ä¸­-shuffle-å‚æ•°çš„ä½œç”¨"><a href="#3-DataLoader-ä¸­-shuffle-å‚æ•°çš„ä½œç”¨" class="headerlink" title="3. DataLoader() ä¸­ shuffle å‚æ•°çš„ä½œç”¨"></a>3. DataLoader() ä¸­ shuffle å‚æ•°çš„ä½œç”¨</h1><p>åœ¨ DataLoader() ç±»ä¸­ï¼Œæœ‰shuffleå‚æ•°ï¼Œåœ¨å®˜æ–¹çš„æ–‡æ¡£é‡Œï¼Œæ˜¯è¿™æ ·å†™çš„ï¼š</p>
<blockquote>
<p><strong>shuffle</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" target="_blank" rel="noopener"><em>bool</em></a><em>,</em> <em>optional</em>) â€“ set to <code>True</code> to have the data reshuffled at every epoch (default: <code>False</code>)</p>
</blockquote>
<p>æˆ‘çš„ç–‘é—®æ˜¯ shuffle æ˜¯å¦ä¼šåœ¨ç¬¬ä¸€ä¸ªepochå¯¹æ•°æ®éšæœºshuffleå‘¢?</p>
<p>é€šè¿‡å®éªŒå°è¯•ä¸€ä¸‹ï¼ğŸ’ª</p>
<p>æŒ‡å®šä¸åŒçš„éšæœºæ•°ç§å­ï¼Œè·‘ä¸¤æ¬¡ï¼Œæ‰“å°ç¬¬ä¸€ä¸ªbatchã€‚ç¬¬ä¸€æ¬¡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tensor([[   25,  1100,   258,  ...,     0,     0,     0],s]</span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒæ¬¡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tensor([[   73,     2,   337,  ...,     0,     0,     0],s]</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ˜¯ä¸åŒçš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´<strong>shuffle æ˜¯æ¯ä¸ªepochéƒ½ä¼šè¿›è¡Œçš„</strong></p>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>CUDA</tag>
        <tag>Relation Extraction</tag>
        <tag>Distant Supervision</tag>
        <tag>TARE</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux Bash å¸¸ç”¨ç»å…¸å‘½ä»¤</title>
    <url>/2020/12/09/Linux-Bash-%E5%B8%B8%E7%94%A8%E7%BB%8F%E5%85%B8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<h1 id="é€’å½’æŸ¥æ‰¾æ–‡ä»¶"><a href="#é€’å½’æŸ¥æ‰¾æ–‡ä»¶" class="headerlink" title="é€’å½’æŸ¥æ‰¾æ–‡ä»¶"></a>é€’å½’æŸ¥æ‰¾æ–‡ä»¶</h1><p>æƒ³è¦æŸ¥æ‰¾ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰.logæ–‡ä»¶ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">find ç›®å½• -name <span class="string">"*.log"</span></span><br></pre></td></tr></table></figure>
<p>ç»“æœä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(klhao-pytorch) klhao@Bobby:~/Adidas/outputs$ find . -name <span class="string">"*.log"</span></span><br><span class="line">====================================================================</span><br><span class="line">./sent_att_blstm_422_NYT/log.log</span><br><span class="line">./sent_pcnn_422_NYT/log.log</span><br><span class="line">./sent_cnn_422/log.log</span><br><span class="line">./sent_crcnn_422/log.log</span><br><span class="line">./sent_pcnn_422/log.log</span><br><span class="line">./sent_crcnn_422_NYT/log.log</span><br><span class="line">./bag_cnn_one_422/log.log</span><br><span class="line">./sent_att_blstm_422/log.log</span><br><span class="line">./bag_pcnn_att_422/log.log</span><br><span class="line">./sent_cnn_422_NYT/log.log</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæƒ³è¦å°†è¿™äº›æ–‡ä»¶æ‰§è¡Œè¿›ä¸€æ­¥çš„æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨<code>xargs</code>å‘½ä»¤ï¼Œä¾‹å¦‚åˆ é™¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">find ç›®å½• -name <span class="string">"*.log"</span> | xargs rm</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="æŸ¥çœ‹è¿›ç¨‹"><a href="#æŸ¥çœ‹è¿›ç¨‹" class="headerlink" title="æŸ¥çœ‹è¿›ç¨‹"></a>æŸ¥çœ‹è¿›ç¨‹</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ps aux</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæƒ³è¦æŸ¥çœ‹å…·ä½“çš„ç”¨æˆ·åã€è¿›ç¨‹idï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ps aux | grep 23087</span><br><span class="line">ps aux | grep klhao</span><br></pre></td></tr></table></figure>
<p>å˜»å˜»å˜»å˜»ğŸ˜</p>
<h1 id="æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯"><a href="#æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯"></a>æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cat /proc/version</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Linux version 4.15.0-66-generic (buildd@lgw01-amd64-044) (gcc version 7.4.0 (Ubuntu 7.4.0-1ubuntu1~18.04.1)) <span class="comment">#75-Ubuntu SMP Tue Oct 1 05:24:09 UTC 2019</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Others</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>bash</tag>
      </tags>
  </entry>
  <entry>
    <title>Byte Pair Embedding vs Word Embedding</title>
    <url>/2020/12/08/Byte-Pair-Embedding-vs-Word-Embedding/</url>
    <content><![CDATA[<h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒBERT åœ¨è¿›è¡Œ tokenization çš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯Byte Pair Embeddingï¼Œåé¢ç®€ç§°ä¸ºBPEï¼›è€Œä¼ ç»Ÿçš„tokenization æ˜¯ä»¥ word ä¸ºå•ä½ï¼Œç®€ç§°ä¸º WEã€‚åœ¨ä¸€äº›ä»»åŠ¡ä¸­ï¼Œä½¿ç”¨ BPE ä¼šæœ‰ä¸€äº›ä¸æ–¹ä¾¿ï¼Œæ¯”å¦‚åºåˆ—æ ‡æ³¨ä»»åŠ¡ï¼Œå› ä¸º BPE ä¼šæ”¹å˜ä½ç½®ï¼Œå¯¼è‡´å¤„ç†æ•°æ®éå¸¸çš„éº»çƒ¦ã€‚ä½†æ˜¯ï¼Œä¸é‡‡ç”¨ BERT è‡ªå¸¦çš„ tokenization æ–¹æ³•ï¼Œåˆä¼šæ‹…å¿ƒç»“æœå˜å·®ï¼Œå½±å“å®éªŒæ•ˆæœï¼Œåˆ°åº•ä¼šä¸ä¼šå‘¢ï¼Œä»Šå¤©åšä¸ªå®éªŒï¼Œä»¥ç»åæ‚£ğŸ¤­</p>
<h1 id="å®éªŒè®¾è®¡"><a href="#å®éªŒè®¾è®¡" class="headerlink" title="å®éªŒè®¾è®¡"></a>å®éªŒè®¾è®¡</h1><p>åœ¨ IMDB æ•°æ®é›†ä¸Šè¿›è¡Œï¼Œè¿™æ˜¯ä¸€ä¸ªäºŒåˆ†ç±»æ•°æ®é›†ï¼Œåˆ¤æ–­æƒ…æ„Ÿæ˜¯æ­£å‘è¿˜æ˜¯è´Ÿå‘ï¼Œæˆ‘ä»¬åˆ†åˆ«é‡‡ç”¨ BPE å’Œ WE æ–¹æ³•ï¼Œå¯¹æ¯”å®éªŒæ•ˆæœçš„å·®å¼‚ã€‚<a id="more"></a></p>
<h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><p>é¦–å…ˆéœ€è¦å°†è®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®è¿›è¡Œæ ¼å¼çš„è½¬åŒ–ï¼Œè®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®æ ¼å¼ä¸€è‡´ï¼Œå‡ä¸ºä»¥ä¸‹å½¢å¼ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">    [<span class="string">"The film is excellent."</span>, <span class="number">1</span>]</span><br><span class="line">    ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>1ä»£è¡¨æƒ…æ„Ÿä¸ºæ­£å‘ï¼Œ0ä»£è¡¨æƒ…æ„Ÿä¸ºè´Ÿå‘ã€‚</p>
<p>ç„¶åä¸‹é¢å°±æ˜¯è®­ç»ƒéƒ¨åˆ†ï¼Œç”±äºå¾ˆç®€å•ï¼Œè¿™é‡Œå°±ä¸è¿‡å¤šè§£é‡Šäº†ï¼Œç›´æ¥è´´æºä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> DataLoader, Dataset</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> BertModel, BertTokenizer</span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IMDB</span><span class="params">(Dataset)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, file, mode)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.mode = mode</span><br><span class="line">        self.data = json.load(open(file, encoding=<span class="string">'utf-8'</span>))</span><br><span class="line">        self.tokenizer = BertTokenizer.from_pretrained(<span class="string">'/data/klhao/BERT/bert-base-uncased'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> len(self.data)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, item)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.data[item]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">generate_batch</span><span class="params">(self, data)</span>:</span></span><br><span class="line">        MAX_LENGTH = <span class="number">300</span></span><br><span class="line">        ids, masks, labels = [], [], []</span><br><span class="line">        <span class="keyword">for</span> d <span class="keyword">in</span> data:</span><br><span class="line">            text = d[<span class="number">0</span>].lower()</span><br><span class="line">            <span class="keyword">if</span> self.mode == <span class="string">'BPE'</span>:</span><br><span class="line">                id = self.tokenizer.encode(text)</span><br><span class="line">            <span class="keyword">elif</span> self.mode == <span class="string">'WE'</span>:</span><br><span class="line">                id = self.tokenizer.convert_tokens_to_ids(text.split())</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">raise</span> ValueError</span><br><span class="line">            mask = ([<span class="number">1</span>] * len(id) + [<span class="number">0</span>] * (MAX_LENGTH - len(id)))[:MAX_LENGTH]</span><br><span class="line">            id = (id + [<span class="number">0</span>] * MAX_LENGTH)[:MAX_LENGTH]</span><br><span class="line">            label = d[<span class="number">1</span>]</span><br><span class="line">            masks.append(mask)</span><br><span class="line">            ids.append(id)</span><br><span class="line">            labels.append(label)</span><br><span class="line">        <span class="keyword">return</span> torch.tensor(ids), torch.tensor(masks), torch.tensor(labels)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CLS</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.bert = BertModel.from_pretrained(<span class="string">'/data/klhao/BERT/bert-base-uncased/'</span>)</span><br><span class="line">        self.linear = nn.Linear(<span class="number">768</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, input, mask)</span>:</span></span><br><span class="line">        vector = self.bert(input, mask)[<span class="number">1</span>]</span><br><span class="line">        out = self.linear(vector)</span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span><span class="params">(args, model, train_loader, test_loader, optimizer)</span>:</span></span><br><span class="line">    loss_function = nn.CrossEntropyLoss()</span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        <span class="keyword">for</span> i, data <span class="keyword">in</span> tqdm(enumerate(train_loader), ncols=<span class="number">60</span>):</span><br><span class="line">            inputs, masks, label = data[<span class="number">0</span>].cuda(), data[<span class="number">1</span>].cuda(), data[<span class="number">2</span>].cuda()</span><br><span class="line">            out = model(inputs, masks)</span><br><span class="line">            loss = loss_function(out, label)</span><br><span class="line">            loss.backward()</span><br><span class="line">            optimizer.step()</span><br><span class="line">            optimizer.zero_grad()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># TEST</span></span><br><span class="line">        PREDICTION = []</span><br><span class="line">        GOLD = []</span><br><span class="line">        <span class="keyword">for</span> i, data <span class="keyword">in</span> tqdm(enumerate(test_loader), ncols=<span class="number">60</span>):</span><br><span class="line">            inputs, masks, label = data[<span class="number">0</span>].cuda(), data[<span class="number">1</span>].cuda(), data[<span class="number">2</span>].cuda()</span><br><span class="line">            out = model(inputs, masks)</span><br><span class="line">            _, pred = torch.max(torch.softmax(out, dim=<span class="number">1</span>), dim=<span class="number">1</span>)</span><br><span class="line">            PREDICTION += pred.cpu().tolist()</span><br><span class="line">            GOLD += label.cpu().tolist()</span><br><span class="line">        accuracy = np.sum(np.array(PREDICTION) == np.array(GOLD)) / len(GOLD)</span><br><span class="line">        print(<span class="string">f'Epoch <span class="subst">&#123;epoch&#125;</span>, accuracy <span class="subst">&#123;accuracy&#125;</span>'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    parser = argparse.ArgumentParser()</span><br><span class="line">    parser.add_argument(<span class="string">'--mode'</span>, default=<span class="string">'BPE'</span>, help=<span class="string">'BPE or WE'</span>)</span><br><span class="line">    args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">    train_data = IMDB(<span class="string">'train.json'</span>, args.mode)</span><br><span class="line">    test_data = IMDB(<span class="string">'test.json'</span>, args.mode)</span><br><span class="line">    train_loader = DataLoader(train_data, batch_size=<span class="number">16</span>, shuffle=<span class="literal">True</span>, collate_fn=train_data.generate_batch)</span><br><span class="line">    test_loader = DataLoader(test_data, batch_size=<span class="number">16</span>, shuffle=<span class="literal">False</span>, collate_fn=test_data.generate_batch)</span><br><span class="line">    model = CLS().cuda()</span><br><span class="line">    optimizer = torch.optim.Adam(model.parameters(), lr=<span class="number">1e-5</span>)</span><br><span class="line"></span><br><span class="line">    train(args, model, train_loader, test_loader, optimizer)</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œçš„æ—¶å€™åªéœ€è¦<code>python run.py</code>å³å¯ã€‚</p>
<h1 id="å®éªŒç»“æœ"><a href="#å®éªŒç»“æœ" class="headerlink" title="å®éªŒç»“æœ"></a>å®éªŒç»“æœ</h1><h2 id="ä½¿ç”¨-BPE"><a href="#ä½¿ç”¨-BPE" class="headerlink" title="ä½¿ç”¨ BPE"></a>ä½¿ç”¨ BPE</h2><p>1563it [11:37,  2.24it/s]<br>1563it [04:55,  5.29it/s]<br>Epoch 0, accuracy 0.89644<br>1563it [11:35,  2.25it/s]<br>1563it [04:58,  5.24it/s]<br>Epoch 1, accuracy 0.91976</p>
<h2 id="ä½¿ç”¨-WE"><a href="#ä½¿ç”¨-WE" class="headerlink" title="ä½¿ç”¨ WE"></a>ä½¿ç”¨ WE</h2><p>1563it [10:24,  2.50it/s]<br>1563it [03:12,  8.12it/s]<br>Epoch 0, accuracy 0.89252<br>1563it [10:23,  2.51it/s]<br>1563it [03:12,  8.10it/s]<br>Epoch 1, accuracy 0.89956<br>1563it [10:26,  2.50it/s]<br>1563it [03:12,  8.11it/s]<br>Epoch 2, accuracy 0.89328</p>
<h1 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h1><font color="orange"> å¯¹æ¯”å‘ç°ï¼Œä½¿ç”¨ BPE ç¡®å®æ¯”ä½¿ç”¨ WE æ•ˆæœå¥½ï¼Œåœ¨Epoch 1ï¼ŒBPEå·²ç»å¯ä»¥è¾¾åˆ°91.976çš„å‡†ç¡®ç‡ï¼Œè€Œä½¿ç”¨ WE åªèƒ½è¾¾åˆ° 89.956ï¼Œç›¸å·®2.02ä¸ªç™¾åˆ†ç‚¹ã€‚è€Œä¸”ï¼Œä½¿ç”¨ BPE è®­ç»ƒé€Ÿåº¦æ›´å¿«ï¼Œæ‹Ÿåˆæ›´å¿«ï¼Œä½¿ç”¨BPEä¸€è½®å°±æå‡äº†2ä¸ªå¤šç™¾åˆ†ç‚¹ï¼Œè€Œä½¿ç”¨WEï¼Œæå‡äº†0.7ä¸ªç™¾åˆ†ç‚¹ï¼Œè¿˜ä¸åˆ°1ä¸ªç™¾åˆ†ç‚¹ã€‚ </font>

<font color="red"> è€Œä¸”ï¼Œåœ¨ç¬¬ä¸‰è½®çš„æ—¶å€™ï¼ŒWEå°±å·²ç»è¿‡æ‹Ÿåˆäº†ï¼Œæ•ˆæœä¸Šä¸å»äº†ï¼ï¼</font>

<p><strong>æ€»ä¹‹ï¼Œä»¥åä¸èƒ½ä¸ºäº†æ‡’çœäº‹ï¼Œç›´æ¥ä½¿ç”¨ WE æ–¹æ³•äº†ï¼å¯èƒ½ä¼šå¯¹ç»“æœé€ æˆå¾ˆå¤§çš„å½±å“ï¼</strong></p>
<h1 id="ç»†èŠ‚"><a href="#ç»†èŠ‚" class="headerlink" title="ç»†èŠ‚"></a>ç»†èŠ‚</h1><h2 id="æ˜¯å¦éœ€è¦æ‰‹åŠ¨-lower"><a href="#æ˜¯å¦éœ€è¦æ‰‹åŠ¨-lower" class="headerlink" title="æ˜¯å¦éœ€è¦æ‰‹åŠ¨ lower()"></a>æ˜¯å¦éœ€è¦æ‰‹åŠ¨ lower()</h2><p>åœ¨ä½¿ç”¨ huggingface çš„ bert-base-uncased çš„æ—¶å€™ï¼Œéœ€è¦æ‰‹åŠ¨å°†æ–‡æœ¬è½¬åŒ–ä¸ºå°å†™å½¢å¼ï¼Œå› ä¸ºé€šè¿‡å®éªŒå‘ç°ï¼Œä½¿ä¸ä½¿ç”¨ <code>lower()</code> å¾—åˆ°çš„ id æ˜¯ä¸ä¸€æ ·çš„ï¼š</p>
<p>ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[100, 2152, 2003, 1037, 9476, 100, 2009, 2743, 2012, 1996, 2168, 2051]</span><br></pre></td></tr></table></figure>
<p>ä¸ä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[100, 100, 2003, 1037, 9476, 100, 100, 2743, 2012, 1996, 2168, 2051]</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥è§‚å¯Ÿåˆ°ä¸ä½¿ç”¨ <code>lower</code> å¾—åˆ°çš„100æ›´å¤šï¼Œä¹Ÿå°±æ˜¯æœ‰æ›´å¤šçš„ UNK å­—ç¬¦ï¼Œout-of-vocabularyï¼Œå¯èƒ½ä¼šå½±å“å®éªŒæ•ˆæœã€‚</p>
]]></content>
      <categories>
        <category>NLP</category>
        <category>Pretrained Language Model</category>
      </categories>
      <tags>
        <tag>BERT</tag>
        <tag>BPE</tag>
        <tag>Embedding</tag>
        <tag>GPT</tag>
      </tags>
  </entry>
  <entry>
    <title>å…³äºDSGANçš„ç»†èŠ‚</title>
    <url>/2020/12/07/%E5%85%B3%E4%BA%8EDSGAN%E7%9A%84%E7%BB%86%E8%8A%82/</url>
    <content><![CDATA[<h1 id="cleanæ•°æ®"><a href="#cleanæ•°æ®" class="headerlink" title="cleanæ•°æ®"></a>cleanæ•°æ®</h1><p><a href="https://github.com/Panda0406/Adversarial-Learning-Distant-Supervision-RE/issues/2" target="_blank" rel="noopener">https://github.com/Panda0406/Adversarial-Learning-Distant-Supervision-RE/issues/2</a></p>
<p>DSGANå¾—åˆ°çš„å¹²å‡€æ•°æ®åˆ†å¸ƒæ˜¯ä¸å¹³è¡¡çš„ï¼Œä½œè€…æ‰‹åŠ¨è°ƒæ•´äº†ç”Ÿæˆæ•°æ®çš„æ¯”ä¾‹ï¼Œå»æ‰äº†ä¸€äº›è¿‡é«˜çš„æ¯”ä¾‹çš„ç±»åˆ«çš„æ•°æ®ï¼Œä»¥é¿å…ä¸å¿…è¦çš„åç½®ã€‚</p>
<blockquote>
<p> <a href="https://github.com/thunlp/NRE/blob/master/PCNN%2BATT/out/pr.txt" target="_blank" rel="noopener"> Their repo</a> do not perform as you present. I have tested it.</p>
<p> Because we remove many sentence bags of positive entity pairs, it causes the proportion change of positive set and negative set. So we correspondingly add some positive sentence sets based on the learned filter network. These positive sentence sets are the subset of cleaned positive sentence sets. This part is explained in the code.</p>
</blockquote>
<a id="more"></a>
<h1 id="å¦‚ä½•åˆ’åˆ†Nå’ŒP"><a href="#å¦‚ä½•åˆ’åˆ†Nå’ŒP" class="headerlink" title="å¦‚ä½•åˆ’åˆ†Nå’ŒP?"></a>å¦‚ä½•åˆ’åˆ†Nå’ŒP?</h1><p>è¿™ä¸ªé—®é¢˜æ¥è‡ªissue 4:</p>
<p><a href="https://github.com/Panda0406/Adversarial-Learning-Distant-Supervision-RE/issues/4" target="_blank" rel="noopener">https://github.com/Panda0406/Adversarial-Learning-Distant-Supervision-RE/issues/4</a></p>
<blockquote>
<p>è®ºæ–‡ä¸­å†™é“å…³äºæ•°æ®é›†DSå·²ç»åˆ’åˆ†äº†Nå’ŒPï¼Œè¿™éƒ¨åˆ†æ˜¯æ•°æ®é›†æœ¬èº«å°±å·²ç»æä¾›çš„è¿˜æ˜¯äººä¸ºåˆè‡ªå·±åˆ’åˆ†çš„ï¼Ÿå¦å¤–N^Då’ŒN^Gå…·ä½“æ€ä¹ˆåˆ’åˆ†ï¼Ÿ</p>
</blockquote>
<p>ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šé€šè¿‡é˜…è¯»ä½œè€…çš„æºä»£ç ï¼ŒNæ˜¯æŒ‡NAæ•°æ®ï¼ŒPæ˜¯æŒ‡é™¤å»NAå¤–çš„å…¶ä»–æ•°æ®ã€‚ä½œè€…è®­ç»ƒäº†ä¸€ä¸ªCNNçš„äºŒåˆ†ç±»å™¨ï¼Œç”¨äºåŒºåˆ†På’ŒNï¼Œç„¶åå–Nä¸­æ’åœ¨å‰300000çš„æ ·æœ¬ä½œä¸ºè´Ÿæ ·æœ¬ (good_negative) ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">filter_negative</span><span class="params">(embeddings, inputs, rela2sents, args)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    åˆ©ç”¨ RANK_CNN ç­›é€‰ NA æ ·æœ¬ï¼Œç”¨äº GAN è®­ç»ƒ</span></span><br><span class="line"><span class="string">    Select high-quality negative samples for robust result.</span></span><br><span class="line"><span class="string">    rela2sents: å…³ç³» r å¯¹åº”çš„å¥å­åˆ—è¡¨ (å»é™¤ same)</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'\n\n############## Training Rank_CNN ##############'</span></span><br><span class="line"></span><br><span class="line">    pos_data, neg_data = list(), list()</span><br><span class="line">    <span class="keyword">for</span> k, v <span class="keyword">in</span> rela2sents.items():</span><br><span class="line">        <span class="keyword">if</span> k != <span class="number">0</span>:</span><br><span class="line">            pos_data += v</span><br><span class="line">    neg_data = rela2sents[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'positive size:'</span>, len(pos_data), <span class="string">'negative size:'</span>, len(neg_data)  <span class="comment"># nonna å’Œ na</span></span><br><span class="line"></span><br><span class="line">    rank_model = Rank_CNN(embeddings, args, emb_change=<span class="literal">True</span>)</span><br><span class="line">    rank_model = rank_model.cuda() <span class="keyword">if</span> use_cuda <span class="keyword">else</span> rank_model</span><br><span class="line"></span><br><span class="line">    x = pos_data+neg_data</span><br><span class="line">    y = [<span class="number">1</span>]*len(pos_data)+[<span class="number">0</span>]*len(neg_data)</span><br><span class="line">    trainloader = generate_trainloader(inputs, x, y, args.batch_size, shuf=<span class="literal">True</span>)</span><br><span class="line">    parameters = filter(<span class="keyword">lambda</span> p: p.requires_grad, rank_model.parameters())</span><br><span class="line">    optimizer = optim.Adam(parameters, lr=<span class="number">0.0005</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        <span class="comment">#rank_model.train()</span></span><br><span class="line">        corrects, total, accuracy = <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i, (x, y) <span class="keyword">in</span> enumerate(trainloader, <span class="number">0</span>):</span><br><span class="line">            logits = calculate_logits(rank_model, x, args.max_sent)</span><br><span class="line">            y = y.type(LongTensor)</span><br><span class="line">            loss = calculate_loss(logits, y)</span><br><span class="line">            optimizer.zero_grad()</span><br><span class="line">            loss.backward()</span><br><span class="line">            optimizer.step()</span><br><span class="line"></span><br><span class="line">            corrects += (torch.max(logits, <span class="number">1</span>)[<span class="number">1</span>].view(y.size()).data == y).sum()</span><br><span class="line">            total += int(y.size()[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> i % args.log_interval == <span class="number">0</span>:</span><br><span class="line">                accuracy = <span class="number">100.0</span> * corrects / total</span><br><span class="line">                time_str = datetime.datetime.now().isoformat()</span><br><span class="line">                sys.stdout.write(<span class="string">"[rank_data] epoch %d step %d | loss : %f, accuracy: %f"</span> % (epoch, i, loss.data[<span class="number">0</span>], accuracy) + <span class="string">'\r'</span>)</span><br><span class="line">                sys.stdout.flush()</span><br><span class="line">        <span class="keyword">print</span> <span class="string">''</span></span><br><span class="line"></span><br><span class="line">        accuracy, accuracy_non_NA = calculate_accuracy(trainloader, rank_model, args, epoch)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> accuracy_non_NA &gt; <span class="number">90.0</span>:  <span class="comment"># è¿™ä¸€æ­¥æ˜¯å¦å°±æ˜¯ä½œè€…è¯´çš„è®©æ¨¡å‹è¿‡æ‹Ÿåˆ? #</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    torch.save(rank_model.state_dict(), <span class="string">'./models/Rank.pkl'</span>)</span><br><span class="line">    GAN_train_data = deepcopy(rela2sents)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"\n##############  Selecting high-quality negative samples  ##############"</span></span><br><span class="line">    <span class="comment"># é€‰å–æ’åœ¨å‰ 300000 çš„è´Ÿæ ·æœ¬ #</span></span><br><span class="line">    good_negative = select_negative(rank_model, rela2sents[<span class="number">0</span>], inputs, args.max_sent)</span><br><span class="line">    GAN_train_data[<span class="number">0</span>] = good_negative</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"We select %d high-quality negative sentences"</span> % (len(good_negative))</span><br><span class="line">    pickle.dump(GAN_train_data, open(<span class="string">'./data/GAN_train_data.pkl'</span>, <span class="string">'wb'</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> GAN_train_data</span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒä¸ªé—®é¢˜ï¼š$N^D$ å’Œ $N^G$ çš„åˆ’åˆ†æ˜¯éšæœºåˆ’åˆ†çš„ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sample_negative_set</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">"""éšæœºé‡‡æ ·åˆ’åˆ†è´Ÿæ ·æœ¬"""</span></span><br><span class="line">    <span class="keyword">if</span> len(self.pos_data) &lt; <span class="number">10000</span>:</span><br><span class="line">        nl = <span class="number">50000</span></span><br><span class="line">        neg_sample = self.neg_data[:<span class="number">100000</span>]</span><br><span class="line">        G_neg_data = [neg_sample[<span class="number">2</span>*i] <span class="keyword">for</span> i <span class="keyword">in</span> range(nl)]</span><br><span class="line">        G_neg_data = random.sample(G_neg_data, max(<span class="number">5</span>*len(self.pos_data), <span class="number">20000</span>))</span><br><span class="line">        D_neg_data = [neg_sample[<span class="number">2</span>*i+<span class="number">1</span>] <span class="keyword">for</span> i <span class="keyword">in</span> range(nl)]</span><br><span class="line">        D_neg_data = random.sample(D_neg_data, max(<span class="number">5</span>*len(self.pos_data), <span class="number">20000</span>))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        nl = min(<span class="number">5</span>*len(self.pos_data), <span class="number">150000</span>)</span><br><span class="line">        neg_sample = self.neg_data[:<span class="number">2</span>*nl]</span><br><span class="line">        G_neg_data = [neg_sample[<span class="number">2</span>*i] <span class="keyword">for</span> i <span class="keyword">in</span> range(nl)]</span><br><span class="line">        D_neg_data = [neg_sample[<span class="number">2</span>*i+<span class="number">1</span>] <span class="keyword">for</span> i <span class="keyword">in</span> range(nl)]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Positive_total: %d, G_negative: %d, D_negative: %d"</span> %(len(self.pos_data), len(G_neg_data), len(D_neg_data))</span><br><span class="line"></span><br><span class="line">    self.G_neg_data = G_neg_data</span><br><span class="line">    self.D_neg_data = D_neg_data</span><br></pre></td></tr></table></figure>
<h1 id="Variable"><a href="#Variable" class="headerlink" title="Variable"></a>Variable</h1><p>ç”±äºä»£ç æ˜¯é‡‡ç”¨æ—©æœŸpytorchç‰ˆæœ¬å®ç°ï¼Œæ‰€ä»¥ä¾ç„¶å­˜åœ¨Variableè¿™æ ·çš„å†™æ³•ã€‚</p>
<blockquote>
<p>variableæ˜¯tensorçš„å¤–åŒ…è£…ï¼Œdataå±æ€§å­˜å‚¨ç€tensoræ•°æ®ï¼Œgradå±æ€§å­˜å‚¨å…³äºè¯¥å˜é‡çš„å¯¼æ•°ï¼Œcreatoræ˜¯ä»£è¡¨è¯¥å˜é‡çš„åˆ›é€ è€…</p>
</blockquote>
<p>ä½†æ˜¯åœ¨ç›®å‰é‡‡ç”¨çš„pytorch 1.x ç‰ˆæœ¬ï¼ŒVariableå·²ç»å’ŒTensoråˆå¹¶ï¼Œæ‰€ä»¥æ— éœ€è¿‡äºåœ¨æ„~</p>
<h1 id="batch-size-å¤§å°"><a href="#batch-size-å¤§å°" class="headerlink" title="batch_size å¤§å°"></a>batch_size å¤§å°</h1><p>åœ¨å¯¹ç”Ÿæˆå™¨ã€åˆ¤åˆ«å™¨è¿›è¡Œé¢„è®­ç»ƒæ—¶ï¼Œbatch_size è®¾çš„ç‰¹åˆ«å¤§ï¼Œæºä»£ç ä¸­å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = pos_data + neg_data</span><br><span class="line">y = [<span class="number">1</span>] * len(pos_data) + [<span class="number">0</span>] * len(neg_data)</span><br><span class="line">batch_size = int(len(y) / <span class="number">50</span>) + <span class="number">1</span>  </span><br><span class="line"><span class="comment"># batch_size å¾ˆå¤§, å¯¹äº pos=5000, neg=30000, åˆ™ batch_size = 700 !!</span></span><br></pre></td></tr></table></figure>
<h2 id="ä¸çŸ¥é“è®¾ç½®è¿™ä¹ˆå¤§çš„-batch-size-ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸çŸ¥é“è®¾ç½®è¿™ä¹ˆå¤§çš„-batch-size-ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸çŸ¥é“è®¾ç½®è¿™ä¹ˆå¤§çš„ batch_size ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä¸çŸ¥é“è®¾ç½®è¿™ä¹ˆå¤§çš„ batch_size ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>æœ‰æ—¶é—´çš„è¯ï¼Œå¯¹ batch_size çš„å®é™…è®¾ç½®çš„å½±å“ï¼Œè¿›è¡Œå®éªŒæ¢ç©¶ã€‚</p>
<h1 id="å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–è¿‡ç¨‹"><a href="#å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–è¿‡ç¨‹" class="headerlink" title="å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–è¿‡ç¨‹"></a>å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–è¿‡ç¨‹</h1><p>é¦–å…ˆï¼Œä¸ºæ¯ä¸ªæ ·æœ¬è®¡ç®— logitsï¼Œç„¶åä»¥ logits ä¸ºæ¦‚ç‡ï¼Œä¸ºæ¯ä¸ªæ ·æœ¬èµ‹äºˆ0, 1æ ‡ç­¾ï¼Œè¿™ä¸€æ­¥æ˜¯ä¸€ä¸ªæŒ‰æ¦‚ç‡éšæœºé‡‡æ ·çš„è¿‡ç¨‹ï¼Œå³<code>action</code>æ­¥ã€‚</p>
<p>å…·ä½“ä»£ç ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">select_action</span><span class="params">(self, model, x, random=True)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    ä¸ºæ¯ä¸€ä¸ªæ ·æœ¬æŒ‰ç…§æ¦‚ç‡èµ‹äºˆæ ‡ç­¾</span></span><br><span class="line"><span class="string">    :param model:</span></span><br><span class="line"><span class="string">    :param x:</span></span><br><span class="line"><span class="string">    :param random: æ˜¯å¦å¼•å…¥éšæœºæ€§</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    probs = calculate_prob(model, x, self.max_sent, self.inputs, detach=<span class="literal">True</span>)</span><br><span class="line">    actions_probs = probs[:, <span class="number">1</span>]</span><br><span class="line">    <span class="keyword">if</span> random:</span><br><span class="line">        actions = list()</span><br><span class="line">        <span class="keyword">for</span> prob <span class="keyword">in</span> probs:</span><br><span class="line">            <span class="keyword">if</span> abs(prob[<span class="number">0</span>]-prob[<span class="number">1</span>])&lt;<span class="number">0.3</span>:  <span class="comment"># å¦‚æœæ¦‚ç‡ç›¸å·®ä¸å¤§, å°±æŒ‰æ¦‚ç‡é€‰æ‹©</span></span><br><span class="line">                actions.append(int(np.random.choice(np.arange(<span class="number">2</span>), p=prob)))</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                actions.append(int(np.argmax(prob)))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        actions = list(np.argmax(probs, axis=<span class="number">1</span>))</span><br><span class="line">    <span class="keyword">return</span> actions</span><br></pre></td></tr></table></figure>
<p>æ ¹æ®actionsä¸­çš„0, 1æ ‡ç­¾ï¼Œå¯ä»¥å°†æ ·æœ¬åˆ’åˆ†ä¸ºhigh_conf_sents å’Œ low_conf_sentsï¼Œå³å¯ä»¥æ ¹æ®Generatoråˆ’åˆ†é«˜ç½®ä¿¡åº¦æ ·æœ¬å’Œä½ç½®ä¿¡åº¦æ ·æœ¬ã€‚ç„¶åç”¨å®ƒä»¬å»è®­ç»ƒDiscriminatorã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train_Discriminator</span><span class="params">(self, high_conf_sents, low_conf_sents)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    :param high_conf_sents: ç”± Generator é¢„æµ‹çš„æ­£æ ·æœ¬é›†</span></span><br><span class="line"><span class="string">    :param low_conf_sents: ç”± Generator é¢„æµ‹çš„è´Ÿæ ·æœ¬é›†</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    bag_size = len(high_conf_sents + low_conf_sents)</span><br><span class="line">    pp = float(len(low_conf_sents) / bag_size)</span><br><span class="line">    <span class="comment"># åŠ¨æ€è°ƒæ•´å­¦ä¹ ç‡, high_conf_sents å æ¯”è¶Šå¤§, å­¦ä¹ ç‡è¶Šé«˜ #</span></span><br><span class="line">    self.D_optimizer.param_groups[<span class="number">0</span>][<span class="string">'lr'</span>] = self.D_lr * (<span class="number">1</span> - pp)</span><br><span class="line">    <span class="string">"""åœ¨è¿™é‡ŒæŠŠæ ‡ç­¾è¿›è¡Œäº†ç½®æ¢"""</span></span><br><span class="line">    trainloader = generate_trainloader(self.inputs, low_conf_sents, [<span class="number">1</span>] * len(low_conf_sents),</span><br><span class="line">                                       batch_size=len(low_conf_sents), shuf=<span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> range(self.D_epoch):</span><br><span class="line">        self.Discriminator.train()</span><br><span class="line">        <span class="keyword">for</span> i, (x, y) <span class="keyword">in</span> enumerate(trainloader):</span><br><span class="line">            logits = calculate_logits(self.Discriminator, x, self.max_sent)</span><br><span class="line">            loss = calculate_loss(logits, y)</span><br><span class="line">            self.D_optimizer.zero_grad()</span><br><span class="line">            loss.backward()</span><br><span class="line">            self.D_optimizer.step()</span><br><span class="line"></span><br><span class="line">    self.D_optimizer.param_groups[<span class="number">0</span>][<span class="string">'lr'</span>] = self.D_lr * pp</span><br><span class="line">    trainloader = generate_trainloader(self.inputs, high_conf_sents, [<span class="number">0</span>] * len(high_conf_sents),</span><br><span class="line">                                       batch_size=len(high_conf_sents), shuf=<span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> range(self.D_epoch):</span><br><span class="line">        self.Discriminator.train()</span><br><span class="line">        <span class="keyword">for</span> i, (x, y) <span class="keyword">in</span> enumerate(trainloader):</span><br><span class="line">            logits = calculate_logits(self.Discriminator, x, self.max_sent)</span><br><span class="line">            loss = calculate_loss(logits, y)</span><br><span class="line">            self.D_optimizer.zero_grad()</span><br><span class="line">            loss.backward()</span><br><span class="line">            self.D_optimizer.step()</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢å°†æ­£è´Ÿæ ·æœ¬çš„æ ‡ç­¾ç½®æ¢ï¼Œç”¨â€é”™è¯¯â€œçš„æ ‡ç­¾å»è®­ç»ƒDiscriminatorï¼ŒæŒ‰ç…§è‡ªç„¶çš„æƒ³æ³•ï¼ŒDiscriminatoræ•ˆæœä¼šä¸‹é™ï¼Œè€Œä¸‹é¢çš„<code>reward</code>çš„è®¡ç®—å°±è¦ç”¨åˆ°è¿™ä¸ªä¸‹é™å¹…åº¦ä½œä¸ºæŒ‡æ ‡ã€‚</p>
<p>åœ¨å…·ä½“çš„rewardè®¡ç®—è¿‡ç¨‹ä¸­ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">""" ================================= å¼ºåŒ–å­¦ä¹  =============================== """</span></span><br><span class="line"><span class="keyword">if</span> is_Training:</span><br><span class="line">    D_pos_prob_list = [self.D_pos_prob_dict[i][bag_id] <span class="keyword">for</span> i <span class="keyword">in</span> range(epoch)]</span><br><span class="line">    D_neg_prob_list = [self.D_neg_prob_dict[i][bag_id] <span class="keyword">for</span> i <span class="keyword">in</span> range(epoch)]</span><br><span class="line">    self.D_pos_prob_dict[epoch].append(D_pos_prob)</span><br><span class="line">    self.D_neg_prob_dict[epoch].append(D_neg_prob)</span><br><span class="line">    <span class="keyword">if</span> epoch &gt; <span class="number">0</span>:</span><br><span class="line">        reward_PD = max(D_pos_prob_list) - self.D_pos_prob_dict[epoch][bag_id]</span><br><span class="line">        reward_ND = max(D_neg_prob_list) - self.D_neg_prob_dict[epoch][bag_id]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        reward_PD = <span class="number">0.01</span></span><br><span class="line">        reward_ND = <span class="number">0.01</span></span><br><span class="line">    reward = <span class="number">100</span> * (reward_PD + reward_ND + <span class="number">0.05</span>)</span><br><span class="line">    <span class="string">""" ===================================================================== """</span></span><br></pre></td></tr></table></figure>
<font color="red">è¿™é‡Œæˆ‘æœ‰ä¸€ä¸ªå›°æƒ‘ï¼ŒæŒ‰ç…§é“ç†ï¼Œåº”è¯¥å¸Œæœ›D_pos_probè¶Šå°è¶Šå¥½ï¼ŒD_neg_probè¶Šå¤§è¶Šå¥½ï¼Œä½†æ˜¯ä½œè€…å´å¯¹ä¸¤è€…è¿›è¡Œäº†åŒæ ·çš„å¤„ç†ï¼Ÿï¼</font>

<p>æ ¹æ®æˆ‘çš„ç†è§£ï¼Œreward_NDåº”è¯¥æ­£å¥½å’Œreward_PDç›®æ ‡ç›¸åï¼Œå³ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">reward_ND = self.D_neg_prob_dict[epoch][bag_id] - max(D_neg_prob_list)</span><br></pre></td></tr></table></figure>
<h2 id="ä¸çŸ¥é“æ˜¯ä¸æ˜¯ä¸€ä¸ªbug"><a href="#ä¸çŸ¥é“æ˜¯ä¸æ˜¯ä¸€ä¸ªbug" class="headerlink" title="ä¸çŸ¥é“æ˜¯ä¸æ˜¯ä¸€ä¸ªbug?"></a>ä¸çŸ¥é“æ˜¯ä¸æ˜¯ä¸€ä¸ªbug?</h2><h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><ol>
<li>åœ¨ä»£ç å®ç°ä¸­ï¼Œç”¨åˆ°äº†deepcopy()ï¼Œç”¨äºæ·±å¤åˆ¶ä¸€ä¸ªå¯¹è±¡ï¼š</li>
</ol>
<blockquote>
<p> copy.deepcopy(x[, memo])</p>
<pre><code> Return a deep copy of x.
</code></pre></blockquote>
<ol>
<li>åœ¨å°†argså‚æ•°èµ‹ç»™æ¨¡å‹çš„æ—¶å€™ï¼Œæ‰‹åŠ¨å†™å¯èƒ½è¦å¥½å¤šè¡Œï¼Œå¯ä»¥ä½¿ç”¨<code>setattr()</code>å‡½æ•°ï¼ŒæŒ‰ç…§ä»¥ä¸‹å†™æ³•ï¼š</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> vars(args).items(): </span><br><span class="line">    setattr(self, k, v)</span><br></pre></td></tr></table></figure>
<ol>
<li>å¯¹è¯å‘é‡çš„åˆå§‹åŒ–é‡‡ç”¨å‡åŒ€åˆ†å¸ƒï¼š</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">word2id[<span class="string">'UNK'</span>] = W_size+<span class="number">1</span></span><br><span class="line">W[W_size+<span class="number">1</span>] = np.random.uniform(<span class="number">-0.25</span>, <span class="number">0.25</span>, w_dim)  <span class="comment"># UNK</span></span><br></pre></td></tr></table></figure>
<ol>
<li>ä¿å­˜æ•°ç»„æˆ–åˆ—è¡¨ï¼š</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">numpy.savez(file, *args, **kwds)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Save several arrays into a single file in uncompressed .npz format.</p>
</blockquote>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æ€»è€Œè¨€ä¹‹ï¼ŒDSGANæ˜¯å¸Œæœ›åˆ©ç”¨NAæ•°æ®æä¾›ç›‘ç£ä¿¡æ¯ï¼Œä½¿å¾—æ¨¡å‹èƒ½å¤ŸåŒºåˆ†å¼€TPå’ŒFPï¼Œæ•´ä½“æµç¨‹å¯ä»¥æ¦‚æ‹¬å¦‚ä¸‹ï¼š</p>
<ol>
<li>é€‰å–æ ·æœ¬æ•°å¤§äº1500çš„å…³ç³»ä½œä¸ºPOSï¼Œè®­ç»ƒRANK-CNNï¼Œé€‰å–éš¾ä»¥è¾¨åˆ«çš„å‰300,000ä¸ªNAæ ·æœ¬ä½œä¸ºè´Ÿæ ·æœ¬</li>
<li>é’ˆå¯¹æ¯ä¸ªå…³ç³»Rï¼š<ol>
<li>åˆ©ç”¨å…¨éƒ¨POS, NAé¢„è®­ç»ƒGå’ŒDï¼Œä»¥äºŒåˆ†ç±»ä¸ºç›®æ ‡</li>
<li>å›ºå®šä½é™¤å…¨è¿æ¥å±‚ä»¥å¤–çš„æ‰€æœ‰å‚æ•°</li>
<li>å¦‚æœæ­£æ ·æœ¬è¿‡å¤šï¼Œéšæœºé€‰å–7800ä¸ªï¼›å¯¹è´Ÿæ ·æœ¬ï¼Œé€‰å–æœ€éš¾åŒºåˆ†çš„å‰5000ä¸ª</li>
<li>ç”¨Generatorç”Ÿæˆæ¦‚ç‡ï¼ŒæŒ‰ç…§æ¦‚ç‡æ‰§è¡Œselect_action()ï¼Œå¹¶æ ¹æ®actionå°†POS minibatchåˆ’åˆ†ä¸ºhigh_conf_sents, low_conf_sents</li>
<li>èµ‹äºˆhigh_conf_sentsæ ‡ç­¾1ï¼Œlow_conf_sentsæ ‡ç­¾0ï¼Œè®­ç»ƒDiscriminatorï¼›æ˜¾ç„¶ï¼ŒDiscriminatorè¡¨ç°ä¼šå˜å·®ï¼Œå› ä¸ºæ¥å—äº†é”™è¯¯çš„è®­ç»ƒå¯¼å‘ã€‚</li>
<li>æ ¹æ®Discriminatoråœ¨high_conf_sents, NAä¸Šçš„æ¦‚ç‡å€¼ï¼Œè®¡ç®—reward</li>
<li>è®­ç»ƒä¼˜åŒ–å™¨</li>
</ol>
</li>
<li>é€‰å–ä½¿Dæ•ˆæœä¸‹é™æœ€å¤šçš„Gï¼Œå¹¶å¯¹POSäºŒåˆ†ç±»ï¼Œå®ç°FPçš„å»é™¤ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
        <category>Distant Supervision</category>
      </categories>
      <tags>
        <tag>GAN</tag>
        <tag>Distant Supervision</tag>
        <tag>RE</tag>
        <tag>DSGAN</tag>
        <tag>noise</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows10è“ç‰™è®¾å¤‡åˆ é™¤å¤±è´¥</title>
    <url>/2020/12/07/Windows10%E8%93%9D%E7%89%99%E8%AE%BE%E5%A4%87%E5%88%A0%E9%99%A4%E5%A4%B1%E8%B4%A5/</url>
    <content><![CDATA[<p>åœ¨win10è“ç‰™è®¾å¤‡æ€»æ˜¯ä¼šå‡ºç°åˆ é™¤å¤±è´¥çš„é—®é¢˜ï¼ŒçœŸæ˜¯å‘çˆ¹â€¦æ˜¯win10çš„ä¸€ä¸ªbug:</p>
<p><a href="https://answers.microsoft.com/zh-hans/windows/forum/windows_10-hardware/win10%E8%93%9D%E7%89%99%E8%AE%BE%E5%A4%87%E6%97%A0/dd641a9b-ca95-491a-8cd9-90747b36fe2c" target="_blank" rel="noopener">https://answers.microsoft.com/zh-hans/windows/forum/windows_10-hardware/win10%E8%93%9D%E7%89%99%E8%AE%BE%E5%A4%87%E6%97%A0/dd641a9b-ca95-491a-8cd9-90747b36fe2c</a></p>
<p>åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>ä¸‹è½½ <a href="http://bluetoothinstaller.com/bluetooth-command-line-tools/" target="_blank" rel="noopener">ä¿®å¤å·¥å…·</a>ï¼Œä¸€è·¯é»˜è®¤é€‰é¡¹å®Œæˆå®‰è£…ã€‚é˜²æ­¢é“¾æ¥å¤±æ•ˆï¼Œé™„ä¸Š <a href="https://pan.baidu.com/s/1CJ-7laoysT8r-iPnGvB1GA" target="_blank" rel="noopener">ç™¾åº¦ç½‘ç›˜é“¾æ¥</a></li>
<li>æ‰“å¼€ Powershellï¼Œå‘½ä»¤è¡Œè¾“å…¥ <code>btpair -u</code>ï¼Œå›è½¦æ‰§è¡Œ</li>
<li>ç­‰å¾…ï¼Œä¼šå‘ç°å·²é…å¯¹çš„è“ç‰™è®¾å¤‡ <strong>ç»ˆäº</strong> <strong>æˆåŠŸ</strong> <strong>å½»åº•</strong> è¢«åˆ é™¤äº†</li>
<li>å–œæè€Œæ³£</li>
</ol>
<blockquote>
<p><a href="https://blog.csdn.net/u014595375/article/details/85730427" target="_blank" rel="noopener">https://blog.csdn.net/u014595375/article/details/85730427</a></p>
</blockquote>
<p>å‘œå‘œå‘œâ”­â”®ï¹â”­â”®</p>
<p>è¦æ˜¯éƒ½è¿˜ä¸ç®¡ç”¨ï¼Œå°±è¯•ä¸€ä¸‹æ’æ‹”è“ç‰™ã€é‡å¯ç”µè„‘ã€å¼€å…³ç”µæºâ€¦â€¦<strong>é‡å¯å¤§æ³•å¥½!</strong></p>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>Windows</tag>
        <tag>win10</tag>
        <tag>Bluetooth</tag>
        <tag>Microsoft</tag>
      </tags>
  </entry>
  <entry>
    <title>è¿œç¨‹ç›‘ç£å…³ç³»æŠ½å–çš„inference</title>
    <url>/2020/12/06/%E8%BF%9C%E7%A8%8B%E7%9B%91%E7%9D%A3%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96%E7%9A%84inference/</url>
    <content><![CDATA[<h1 id="sentence-level-or-bag-level"><a href="#sentence-level-or-bag-level" class="headerlink" title="sentence-level or bag-level?"></a>sentence-level or bag-level?</h1><p>å…³äºè¿œç¨‹ç›‘ç£å…³ç³»æŠ½å–çš„æµ‹è¯•é˜¶æ®µï¼Œç½‘ä¸Šçš„ä¸€ä¸ªè®¨è®ºå€¼å¾—æ·±æ€ï¼š</p>
<p><a href="https://github.com/malllabiisc/RESIDE/issues/51" target="_blank" rel="noopener">https://github.com/malllabiisc/RESIDE/issues/51</a></p>
<blockquote>
<p>Hi <a href="https://github.com/juanluis17" target="_blank" rel="noopener">@juanluis17</a>,<br>In the distantly-supervised setting, the evaluation is performed at the bag-level only because the label on individual instances might be wrong. In both the benchmark datasets, the labels are available at the bag-level only so at the instance-level, we do not have the ground truth to evaluate the performance.</p>
</blockquote>
<p>Hi,<br>I understand that problem in distant supervision. The need to evaluate at the instance level is given because I have a dataset where I know which label is wrong. What I came up with with this implementation is to place each instance of the bag with the predicted label for the bag and thus perform the evaluation.<br>Another alternative is to use each instance as a bag.</p>
<h1 id="single-label-or-multi-label"><a href="#single-label-or-multi-label" class="headerlink" title="single-label or multi-label?"></a>single-label or multi-label?</h1><p>åˆ°åº•æ˜¯å•åˆ†ç±»è¿˜æ˜¯å¤šåˆ†ç±»ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¸å¤Ÿç»Ÿä¸€çš„åšæ³•ï¼Œåœ¨RESIDEä¸­ï¼Œæ˜¯è¿™æ ·æ“ä½œçš„ï¼š</p>
<p><a href="https://github.com/malllabiisc/RESIDE/issues/23" target="_blank" rel="noopener">https://github.com/malllabiisc/RESIDE/issues/23</a></p>
<h3 id="speedcell4-commented-on-2-Apr-2019-â€¢-edited"><a href="#speedcell4-commented-on-2-Apr-2019-â€¢-edited" class="headerlink" title="speedcell4 commented on 2 Apr 2019 â€¢ edited"></a><strong>speedcell4</strong> commented <a href="https://github.com/malllabiisc/RESIDE/issues/23#issue-428050708" target="_blank" rel="noopener">on 2 Apr 2019</a> â€¢ edited</h3><h3 id="svjan5-commented-on-2-Apr-2019-â€¢-edited"><a href="#svjan5-commented-on-2-Apr-2019-â€¢-edited" class="headerlink" title="svjan5 commented on 2 Apr 2019 â€¢ edited"></a><strong>svjan5</strong> commented <a href="https://github.com/malllabiisc/RESIDE/issues/23#issuecomment-479066990" target="_blank" rel="noopener">on 2 Apr 2019</a> â€¢ edited</h3><h1 id="Old-School-PR-Curve"><a href="#Old-School-PR-Curve" class="headerlink" title="Old-School PR Curve"></a>Old-School PR Curve</h1><p>ä¸€äº›ä¼ ç»Ÿæ–¹æ³•çš„PRæ›²çº¿ï¼Œä¾‹å¦‚Mintz, Riedel, Hoffmann,ç­‰ï¼š</p>
<p><a href="https://github.com/thunlp/OpenNRE/tree/4d6d321c9b369615ca07508705d921d30d8286d4/data" target="_blank" rel="noopener">https://github.com/thunlp/OpenNRE/tree/4d6d321c9b369615ca07508705d921d30d8286d4/data</a></p>
<p>ä¸å¾—ä¸è¯´ï¼ŒOpenNREğŸ®ğŸº</p>
]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
        <category>Distant Supervision</category>
      </categories>
      <tags>
        <tag>Relation Extraction</tag>
        <tag>Distant Supervision</tag>
        <tag>Inference</tag>
      </tags>
  </entry>
  <entry>
    <title>å¤šåˆ†ç±»è®¡ç®— P@N æ–¹æ³•</title>
    <url>/2020/12/05/%E5%A4%9A%E5%88%86%E7%B1%BB%E8%AE%A1%E7%AE%97-P-N-%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<p>åœ¨å¤šåˆ†ç±»æ–¹æ³•ä¸­ï¼Œæœ‰æ—¶å€™ä¼šç”¨åˆ°P@Nçš„è¯„ä»·æŒ‡æ ‡ï¼Œå…·ä½“å¯ä»¥å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getPscore</span><span class="params">(self, sess, data, label=<span class="string">'P@N Evaluation'</span>)</span>:</span></span><br><span class="line">	<span class="string">"""</span></span><br><span class="line"><span class="string">	Computes P@N for N = 100, 200, and 300</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	Parameters</span></span><br><span class="line"><span class="string">	----------</span></span><br><span class="line"><span class="string">	data:		Data for P@N evaluation</span></span><br><span class="line"><span class="string">	label:		Log label to be used while logging</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	Returns</span></span><br><span class="line"><span class="string">	-------</span></span><br><span class="line"><span class="string">	P@100		Precision @ 100</span></span><br><span class="line"><span class="string">	P@200		Precision @ 200</span></span><br><span class="line"><span class="string">	P@300		Precision @ 300</span></span><br><span class="line"><span class="string">	"""</span></span><br><span class="line">	test_loss, test_acc, y, y_pred, logit_list, y_hot = self.predict(sess, data, label)</span><br><span class="line"></span><br><span class="line">       <span class="comment"># å»é™¤ NA ç±»åˆ«</span></span><br><span class="line">	y_true   = np.array([e[<span class="number">1</span>:] <span class="keyword">for</span> e <span class="keyword">in</span> y_hot]).  	 reshape((<span class="number">-1</span>))</span><br><span class="line">	y_scores = np.array([e[<span class="number">1</span>:] <span class="keyword">for</span> e <span class="keyword">in</span> logit_list]).reshape((<span class="number">-1</span>))</span><br><span class="line"></span><br><span class="line">	allprob = np.reshape(np.array(y_scores), (<span class="number">-1</span>))  <span class="comment"># æ‹‰æˆä¸€ç»´æ•°ç»„</span></span><br><span class="line">	allans  = np.reshape(y_true, (<span class="number">-1</span>))</span><br><span class="line">	order   = np.argsort(-allprob)  <span class="comment"># æ’åºåçš„ index</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">p_score</span><span class="params">(n)</span>:</span></span><br><span class="line">		corr_num = <span class="number">0.0</span></span><br><span class="line">		<span class="keyword">for</span> i <span class="keyword">in</span> order[:n]:</span><br><span class="line">			corr_num += <span class="number">1.0</span> <span class="keyword">if</span> (allans[i] == <span class="number">1</span>) <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">		<span class="keyword">return</span> corr_num / n</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> p_score(<span class="number">100</span>), p_score(<span class="number">200</span>), p_score(<span class="number">300</span>)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
      </categories>
      <tags>
        <tag>Relation Extraction</tag>
        <tag>P@N</tag>
        <tag>multi-label</tag>
      </tags>
  </entry>
  <entry>
    <title>Rule Mining - Wikidata PPDB WordNet</title>
    <url>/2020/12/04/Rule-Mining-Wikidata-PPDB-WordNet/</url>
    <content><![CDATA[<p>ä½¿ç”¨ä¸€äº›é¢å¤–ä¿¡æ¯ï¼Œå¯ä»¥è¾…åŠ©å…³ç³»æŠ½å–çš„è¿›è¡Œã€‚</p>
<h1 id="Wikidata"><a href="#Wikidata" class="headerlink" title="Wikidata"></a>Wikidata</h1><p>åœ¨Wikidataä¸­ï¼Œpropertyå­˜åœ¨aliasä¿¡æ¯ï¼Œå¯ä»¥ç”¨æ¥å¯»æ‰¾å…³ç³» (å±æ€§) çš„åŒåå…³ç³»ï¼Œå…·ä½“å¯å‚è€ƒæˆ‘ä¹‹å‰çš„æ–‡ç« ã€‚</p>
<p><strong>FIGER provides a mapping from types provides by Freebase to its 113 categories.</strong></p>
<h1 id="PPDB"><a href="#PPDB" class="headerlink" title="PPDB"></a>PPDB</h1><p>PPDB (The Paraphase Database)ï¼Œæœ‰ä¸€ä¸ªåœ¨çº¿ç½‘ç«™ï¼š</p>
<p><a href="http://paraphrase.org/#/" target="_blank" rel="noopener">PPDB (paraphrase.org)</a></p>
<p>ä¾‹å¦‚ï¼Œè¾“å…¥çŸ­è¯­â€œcapital ofâ€ï¼Œå¯ä»¥æŸ¥åˆ°19ä¸ªè¿‘ä¼¼çŸ­è¯­ï¼š<a id="more"></a></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">capital cities of</span><br><span class="line">Unknown syntactic type</span><br><span class="line"></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"><span class="number">2</span>	</span><br><span class="line">capital city of</span><br><span class="line">Unknown syntactic type</span><br><span class="line"></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"><span class="number">3</span>	</span><br><span class="line">working capital</span><br><span class="line">Unknown syntactic type</span><br><span class="line"></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"><span class="number">4</span>	</span><br><span class="line">capital cities</span><br><span class="line">Unknown syntactic type</span><br><span class="line"></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"><span class="number">5</span>	</span><br><span class="line">capital city</span><br><span class="line">Unknown syntactic type</span><br><span class="line"></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"><span class="number">6</span>	</span><br><span class="line">, capital city of</span><br><span class="line">Unknown syntactic type</span><br><span class="line"></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"><span class="number">7</span>	</span><br><span class="line">financing of</span><br><span class="line">Unknown syntactic type</span><br><span class="line"></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"><span class="number">8</span>	</span><br><span class="line">capital flows</span><br><span class="line">Unknown syntactic type</span><br><span class="line"></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"><span class="number">9</span>	</span><br><span class="line">of financial resources</span><br><span class="line">Unknown syntactic type</span><br><span class="line"></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"><span class="number">10</span>	</span><br><span class="line">capital city ,</span><br><span class="line">Unknown syntactic type</span><br><span class="line"></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"><span class="number">11</span>	</span><br><span class="line">'s capital</span><br><span class="line">Unknown syntactic type</span><br><span class="line"></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"><span class="number">12</span>	</span><br><span class="line">financial resources for</span><br><span class="line">Unknown syntactic type</span><br><span class="line"></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"><span class="number">13</span>	</span><br><span class="line">resources available</span><br><span class="line">Unknown syntactic type</span><br><span class="line"></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"><span class="number">14</span>	</span><br><span class="line">financial flows</span><br><span class="line">Unknown syntactic type</span><br><span class="line"></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"><span class="number">15</span>	</span><br><span class="line">, officials</span><br><span class="line">Unknown syntactic type</span><br><span class="line"></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"><span class="number">16</span>	</span><br><span class="line">, the capital city of</span><br><span class="line">Unknown syntactic type</span><br><span class="line"></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"><span class="number">17</span>	</span><br><span class="line">, capital city</span><br><span class="line">Unknown syntactic type</span><br><span class="line"></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"><span class="number">18</span>	</span><br><span class="line">capital stock of</span><br><span class="line">Unknown syntactic type</span><br><span class="line"></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"> <span class="number">0</span></span><br><span class="line"><span class="number">19</span>	</span><br><span class="line">share capital of</span><br><span class="line">Unknown syntactic type</span><br></pre></td></tr></table></figure>
<h1 id="â€”â€”â€”â€”â€”â€”â€”â€”"><a href="#â€”â€”â€”â€”â€”â€”â€”â€”" class="headerlink" title="â€”â€”â€”â€”â€”â€”â€”â€”-"></a>â€”â€”â€”â€”â€”â€”â€”â€”-</h1><p>ä½†æ˜¯ï¼Œå·²ç»æœ‰ä¹‹å‰çš„å·¥ä½œå¸®æˆ‘ä»¬åšå¥½äº†ï¼š</p>
<p><a href="https://github.com/malllabiisc/RESIDE" target="_blank" rel="noopener">https://github.com/malllabiisc/RESIDE</a></p>
<h1 id="WordNet"><a href="#WordNet" class="headerlink" title="WordNet"></a>WordNet</h1><p>ä¹‹å‰è¿˜æœ‰æƒ³è¿‡ä½¿ç”¨ WordNet åšä¸€äº›åŒä¹‰è¯ã€ä¸Šä½è¯çš„æ›¿æ¢ï¼Œä½†æ˜¯æƒ³æƒ³ï¼ŒWordNetæœ‰ç‚¹è¿‡æ—¶äº† (ğŸ¥¶ğŸ¤¯)ï¼Œæ‰€ä»¥å°±ä¸é‡‡ç”¨è¿™ç§æ–¹æ³•äº†ï¼Œä½¿ç”¨<strong>é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹</strong>ï¼Œè•´å«ä¸°å¯Œçš„è¯­ä¹‰ä¿¡æ¯ï¼Œè€Œä¸”æ³›åŒ–èƒ½åŠ›æ›´å¥½ï¼Œå²‚ä¸ç¾å“‰ï¼Ÿ</p>
]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
        <category>Distant Supervision</category>
      </categories>
      <tags>
        <tag>Wikidata</tag>
        <tag>PPDB</tag>
        <tag>WordNet</tag>
      </tags>
  </entry>
  <entry>
    <title>ç»˜åˆ¶PRæ›²çº¿ï¼Œæƒ¯ä¾‹åšæ³•</title>
    <url>/2020/12/03/%E7%BB%98%E5%88%B6PR%E6%9B%B2%E7%BA%BF%EF%BC%8C%E6%83%AF%E4%BE%8B%E5%81%9A%E6%B3%95/</url>
    <content><![CDATA[<p>åœ¨è¿œç¨‹ç›‘ç£å…³ç³»æŠ½å–è¯„ä»·æ—¶ï¼Œé€šå¸¸ä¼šé‡‡ç”¨PRæ›²çº¿çš„æ–¹å¼ï¼Œéœ€è¦æ·±å…¥ç†è§£ã€‚</p>
<p>æœ¬æ–‡çš„PRç»˜åˆ¶æ–¹æ³•ä¸»è¦å‚è€ƒäº†RESIDEï¼Œæœ‰å…´è¶£å¯ä»¥ç›´æ¥æŸ¥çœ‹æºç ï¼š</p>
<p><a href="https://github.com/malllabiisc/RESIDE" target="_blank" rel="noopener">https://github.com/malllabiisc/RESIDE</a></p>
<h1 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h1><p>ç»˜åˆ¶éœ€è¦ç”¨åˆ°scikit-learnå·¥å…·ï¼Œä»¥åŠmatplotlibåŒ…ã€‚</p>
<h1 id="è®¡ç®—å‡½æ•°"><a href="#è®¡ç®—å‡½æ•°" class="headerlink" title="è®¡ç®—å‡½æ•°"></a>è®¡ç®—å‡½æ•°</h1><p>æ ¸å¿ƒåŠŸèƒ½å°±ä¸‹é¢å‡ è¡Œï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> precision_recall_curve, average_precision_score</span><br><span class="line"></span><br><span class="line">y_true, y_scores = loadData(<span class="string">'./results/&#123;&#125;/precision_recall.pkl'</span>.format(args.name))</span><br><span class="line">precision,recall,threshold = precision_recall_curve(y_true,y_scores)</span><br><span class="line">rea_under = average_precision_score(y_true, y_scores)</span><br><span class="line">baselines_path = <span class="string">'./baselines_pr/&#123;&#125;/'</span>.format(dataset)</span><br><span class="line">print(<span class="string">'Area under the curve: &#123;:.3&#125;'</span>.format(area_under))</span><br><span class="line"></span><br><span class="line">plt.plot(recall[:], precision[:], label=<span class="string">'RESIDE'</span>, color =<span class="string">'red'</span>, lw=<span class="number">1</span>, marker = <span class="string">'o'</span>, markevery = <span class="number">0.1</span>, ms = <span class="number">6</span>)</span><br></pre></td></tr></table></figure>
<p>å…³äºprecision_recall_curve(), average_precision_score()ï¼Œå¼ºçƒˆæ¨èå»çœ‹æ–‡æ¡£ï¼š</p>
<p><a href="https://scikit-learn.org/stable/modules/generated/sklearn.metrics.precision_recall_curve.html" target="_blank" rel="noopener">https://scikit-learn.org/stable/modules/generated/sklearn.metrics.precision_recall_curve.html</a></p>
<p><a href="https://scikit-learn.org/stable/modules/generated/sklearn.metrics.average_precision_score.html" target="_blank" rel="noopener">https://scikit-learn.org/stable/modules/generated/sklearn.metrics.average_precision_score.html</a></p>
<a id="more"></a>
<h2 id="precision-recall-curve"><a href="#precision-recall-curve" class="headerlink" title="precision_recall_curve()"></a>precision_recall_curve()</h2><font color="orange"> **å€¼å¾—æ³¨æ„çš„æ˜¯y_trueè¦æ±‚æ˜¯äºŒè¿›åˆ¶çš„ï¼Œå¯¹äºå¤šåˆ†ç±»é—®é¢˜ï¼Œå°±éœ€è¦è‡ªå·±å°†åˆ†ç±»æ ‡ç­¾é€šè¿‡æŸç§æ–¹å¼è½¬åŒ–ã€‚** </font>

<p>å¤„ç†éƒ¨åˆ†çš„ä»£ç ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">y_true = np.array([e[<span class="number">1</span>:] <span class="keyword">for</span> e <span class="keyword">in</span> y_hot]).reshape((<span class="number">-1</span>))  <span class="comment"># ä¸è€ƒè™‘ NA å…³ç³»</span></span><br><span class="line">y_scores = np.array([e[<span class="number">1</span>:] <span class="keyword">for</span> e <span class="keyword">in</span> logit_list]).reshape((<span class="number">-1</span>))</span><br><span class="line">area_pr = average_precision_score(y_true, y_scores)</span><br></pre></td></tr></table></figure>
<h2 id="average-precision-score"><a href="#average-precision-score" class="headerlink" title="average_precision_score()"></a>average_precision_score()</h2><p>åœ¨sklearnä¸­çš„å®ç°ä¸­ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼š</p>
<p>è®¡ç®—å…¬å¼ä¸ºï¼š</p>
<script type="math/tex; mode=display">
AP = \sum (R_n - R_{n-1})P_n</script><blockquote>
<p>This implementation is not interpolated and is different from computing the area under the precision-recall curve with the trapezoidal rule [æ¢¯å½¢å…¬å¼], which uses linear interpolation and can be too optimistic.</p>
</blockquote>
<p>é‡‡ç”¨äº†ä¸€ç§çŸ©å½¢çš„è¿‘ä¼¼è®¡ç®—æ–¹æ³•ï¼Œæ²¡æœ‰é‡‡ç”¨æ’å€¼æ³•ã€‚<strong>Anywayâ€¦ç›´æ¥ç”¨å°±å¯ä»¥äº†ï¼</strong></p>
<h1 id="ç»˜åˆ¶å‡½æ•°"><a href="#ç»˜åˆ¶å‡½æ•°" class="headerlink" title="ç»˜åˆ¶å‡½æ•°"></a>ç»˜åˆ¶å‡½æ•°</h1><p>ç»˜åˆ¶ä¸»è¦ç”¨åˆ°matplotlibå·¥å…·ï¼Œå‡½æ•°ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">base_list = [<span class="string">'BGWA'</span>, <span class="string">'PCNN+ATT'</span>, <span class="string">'PCNN'</span>, <span class="string">'MIMLRE'</span>, <span class="string">'MultiR'</span>, <span class="string">'Mintz'</span>]</span><br><span class="line">color = [<span class="string">'purple'</span>, <span class="string">'darkorange'</span>, <span class="string">'green'</span>, <span class="string">'xkcd:azure'</span>, <span class="string">'orchid'</span>, <span class="string">'cornflowerblue'</span>]</span><br><span class="line">marker = [<span class="string">'d'</span>, <span class="string">'s'</span>, <span class="string">'^'</span>, <span class="string">'*'</span>, <span class="string">'v'</span>, <span class="string">'x'</span>, <span class="string">'h'</span>]</span><br><span class="line">plt.ylim([<span class="number">0.3</span>, <span class="number">1.0</span>])</span><br><span class="line">plt.xlim([<span class="number">0.0</span>, <span class="number">0.45</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i, baseline <span class="keyword">in</span> enumerate(base_list):</span><br><span class="line">	precision = np.load(baselines_path + baseline + <span class="string">'/precision.npy'</span>)</span><br><span class="line">	recall    = np.load(baselines_path + baseline + <span class="string">'/recall.npy'</span>)</span><br><span class="line">	plt.plot(recall, precision, color = color[i], label = baseline, lw=<span class="number">1</span>, marker = marker[i], markevery = <span class="number">0.1</span>, ms = <span class="number">6</span>)</span><br><span class="line"></span><br><span class="line">plt.xlabel(<span class="string">'Recall'</span>,    fontsize = <span class="number">14</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Precision'</span>, fontsize = <span class="number">14</span>)</span><br><span class="line">plt.legend(loc=<span class="string">"upper right"</span>, prop = &#123;<span class="string">'size'</span> : <span class="number">12</span>&#125;)</span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line">plt.tight_layout()</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">plot_path = <span class="string">'./results/&#123;&#125;/plot_pr.pdf'</span>.format(args.name)</span><br><span class="line">plt.savefig(plot_path)</span><br><span class="line">print(<span class="string">'Precision-Recall plot saved at: &#123;&#125;'</span>.format(plot_path))</span><br></pre></td></tr></table></figure>
<p><img scr="/images/blog/2020/plot_pr.png" width="500"></p>
]]></content>
      <categories>
        <category>Others</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>AUC</tag>
        <tag>PR Curve</tag>
      </tags>
  </entry>
  <entry>
    <title>pipä¸‹è½½é€Ÿåº¦è¿‡æ…¢çš„é—®é¢˜</title>
    <url>/2020/12/03/pip%E4%B8%8B%E8%BD%BD%E9%80%9F%E5%BA%A6%E8%BF%87%E6%85%A2%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<p>åœ¨æœåŠ¡å™¨ä¸Šä¸‹è½½tensorflow-gpu 1.15æ—¶ï¼Œä¸‹è½½é€Ÿåº¦å¤ªæ…¢ï¼Œåªæœ‰35KB/sï¼Œå¤ªæ…¢äº†â€¦å•Š( â€¢Ì€ Ï‰ â€¢Ì )âœ§</p>
<p>å¯ä»¥åœ¨ä¸‹è½½æ—¶æŒ‡å®šä¸‹è½½æºï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install -i https://pypi.tuna.tsinghua.edu.cn/simple tensorflow-gpu==1.15</span><br></pre></td></tr></table></figure>
<p>ä¸‹è½½é€Ÿåº¦é£™å‡åˆ°12MB/sï¼Œèµ·é£â›·ğŸ¤º</p>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>tsinghua</tag>
        <tag>pip</tag>
      </tags>
  </entry>
  <entry>
    <title>Wikidata aliases åˆ©ç”¨ç»´åŸºæ•°æ®ä¸­çš„åŒåæ•°æ®</title>
    <url>/2020/12/03/Wikidata-aliases-%E5%88%A9%E7%94%A8%E7%BB%B4%E5%9F%BA%E6%95%B0%E6%8D%AE%E4%B8%AD%E7%9A%84%E5%90%8C%E5%90%8D%E6%95%B0%E6%8D%AE/</url>
    <content><![CDATA[<h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>Aliases æ˜¯ Also known as çš„æ„æ€ï¼Œå‚è§<a href="https://www.wikidata.org/wiki/Help:Aliases" target="_blank" rel="noopener">Help:Aliases</a> </p>
<p>Aliases å¯ä»¥åˆ†ä¸ºå®ä½“çš„å’Œå±æ€§ (å…³ç³») çš„ï¼Œåœ¨å®éªŒä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨å…³ç³»çš„åŒåï¼Œå³ <a href="https://www.wikidata.org/wiki/Special:MyLanguage/Help:Properties" target="_blank" rel="noopener">Help:Properties</a></p>
<p>å¦‚æœä¸ç†è§£Wikidataçš„æ•°æ®ç»„æˆå½¢å¼ä»¥åŠå„ä¸ªåç§°çš„å«ä¹‰ï¼Œå¯ä»¥å‚è€ƒ<a href="https://www.wikidata.org/wiki/Wikidata:Glossary#Aliases" target="_blank" rel="noopener">Wikidata:Glossary</a></p>
<p><img src="/images/blog/2020/730px-Datamodel_in_Wikidata.svg.png" alt></p>
<a id="more"></a>
<h1 id="è·å–-Aliases-åˆ—è¡¨"><a href="#è·å–-Aliases-åˆ—è¡¨" class="headerlink" title="è·å– Aliases åˆ—è¡¨"></a>è·å– Aliases åˆ—è¡¨</h1><p>é¦–å…ˆæ‰“å¼€<a href="https://www.wikidata.org/wiki/Help:Properties" target="_blank" rel="noopener">Help:Properties</a> é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°<strong>Search</strong>é¡¹ï¼Œæä¾›äº†æœç´¢å…¥å£ã€‚</p>
<p>æ‰“å¼€Propertiesæœç´¢é¡µé¢ï¼Œè¾“å…¥æƒ³è¦æŸ¥è¯¢çš„å…³ç³» (å±æ€§)ã€‚ä¸¾ä¸ªæ —å­ğŸŒ°ï¼Œè¾“å…¥â€capital ofâ€ï¼Œå¾—åˆ°ç»“æœï¼š</p>
<p><img src="/images/blog/2020/Aliases.png" alt></p>
<h1 id="åˆ©ç”¨SPARQLæŸ¥è¯¢"><a href="#åˆ©ç”¨SPARQLæŸ¥è¯¢" class="headerlink" title="åˆ©ç”¨SPARQLæŸ¥è¯¢"></a>åˆ©ç”¨SPARQLæŸ¥è¯¢</h1><p>ç”±äºæˆ‘æ²¡æœ‰äº²è‡ªåŠ¨æ‰‹å°è¯•ï¼Œæ‰€ä»¥å°±æŠŠStack overflowä¸Šé¢çš„ä¸€ä¸ªé—®é¢˜ç­”æ¡ˆç›´æ¥è´´åœ¨è¿™é‡Œï¼Œæ„Ÿå…´è¶£å¯ä»¥å»çœ‹<a href="https://stackoverflow.com/questions/40593452/how-to-retrieve-aliases-from-wikidata" target="_blank" rel="noopener">åŸé¡µé¢</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT distinct ?subject ?subjectLabel ?nomeLabel ?cognomeLabel ?nickname ?alternative ?subjectAltLabel WHERE &#123;</span><br><span class="line">  ?subject wdt:P31 wd:Q5.</span><br><span class="line">  ?subject p:P54 ?team .</span><br><span class="line">  ?team ps:P54 wd:Q2739 .</span><br><span class="line">  FILTER NOT EXISTS &#123; ?team pq:P582 ?end . &#125;</span><br><span class="line">  OPTIONAL &#123; ?subject wdt:P735 ?nome . &#125;</span><br><span class="line">  OPTIONAL &#123; ?subject wdt:P734 ?cognome . &#125;</span><br><span class="line">  OPTIONAL &#123; ?subject wdt:P1449 ?nickname . &#125;</span><br><span class="line">  OPTIONAL &#123; ?subject skos:altLabel ?alternative . &#125;</span><br><span class="line">  SERVICE wikibase:label &#123; bd:serviceParam wikibase:language &quot;it,en,fr&quot;. &#125;</span><br><span class="line">&#125;</span><br><span class="line">ORDER BY (?cognomeLabel)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
        <category>Distant Supervision</category>
      </categories>
      <tags>
        <tag>Distant Supervision</tag>
        <tag>Wikidata</tag>
        <tag>As same as</tag>
      </tags>
  </entry>
  <entry>
    <title>Pytorchç”¨äºåºåˆ—å·ç§¯çš„Conv1d()å’ŒConv2d()åŒºåˆ«</title>
    <url>/2020/11/30/Pytorch%E7%94%A8%E4%BA%8E%E5%BA%8F%E5%88%97%E5%8D%B7%E7%A7%AF%E7%9A%84Conv1d-%E5%92%8CConv2d-%E5%8C%BA%E5%88%AB/</url>
    <content><![CDATA[<p>å¯¹äºPCNNçš„å®ç°ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ä½¿ç”¨Conv1d()ï¼Œä¸€ç§æ˜¯ä½¿ç”¨Conv2d()ï¼Œåˆ°åº•ä¸¤ç§æ–¹å¼æœ‰æ²¡æœ‰åŒºåˆ«ï¼Ÿä»Šå¤©åšäº†ä¸ªå®éªŒè¿›è¡Œæ¢ç©¶ã€‚</p>
<h1 id="1-å·ç§¯å±‚è¶…å‚æ•°"><a href="#1-å·ç§¯å±‚è¶…å‚æ•°" class="headerlink" title="1. å·ç§¯å±‚è¶…å‚æ•°"></a>1. å·ç§¯å±‚è¶…å‚æ•°</h1><p>Conv2d():</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">self.conv = nn.Conv2d(</span><br><span class="line">    in_channels=<span class="number">1</span>,</span><br><span class="line">    out_channels=self.filter_num,</span><br><span class="line">    kernel_size=(self.window, self.dim),</span><br><span class="line">    stride=(<span class="number">1</span>, <span class="number">1</span>),</span><br><span class="line">    bias=<span class="literal">True</span>,</span><br><span class="line">    padding=(<span class="number">1</span>, <span class="number">0</span>),  <span class="comment"># same padding</span></span><br><span class="line">    padding_mode=<span class="string">'zeros'</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>Conv1d():</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">self.conv1d = nn.Conv1d(</span><br><span class="line">    in_channels=self.dim,</span><br><span class="line">    out_channels=self.filter_num,</span><br><span class="line">    kernel_size=self.window,</span><br><span class="line">    stride=<span class="number">1</span>,</span><br><span class="line">    bias=<span class="literal">True</span>,</span><br><span class="line">    padding=<span class="number">1</span>,</span><br><span class="line">    padding_mode=<span class="string">'zeros'</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h1 id="2-å·ç§¯è¿‡ç¨‹"><a href="#2-å·ç§¯è¿‡ç¨‹" class="headerlink" title="2. å·ç§¯è¿‡ç¨‹"></a>2. å·ç§¯è¿‡ç¨‹</h1><p>Conv2d():</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">convolution</span><span class="params">(self, x, mask)</span>:</span></span><br><span class="line">    x = x.unsqueeze(dim=<span class="number">1</span>)  <span class="comment"># (N, C, H, W) &lt;- (N, 1, seq_len, dim)</span></span><br><span class="line">    x = self.conv(x)</span><br><span class="line">    x = x.view(<span class="number">-1</span>, self.filter_num, self.max_len)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># mask, remove the effect of 'PAD'</span></span><br><span class="line">    mask = mask.unsqueeze(dim=<span class="number">1</span>)</span><br><span class="line">    mask = mask.expand(mask.shape[<span class="number">0</span>], self.filter_num, mask.shape[<span class="number">-1</span>])</span><br><span class="line">    x = x.masked_fill_(mask.eq(<span class="number">0</span>), float(<span class="string">'-inf'</span>))</span><br><span class="line">    x = x.unsqueeze(dim=<span class="number">-1</span>)</span><br><span class="line">    <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<p>Conv1d():</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">convolution1d</span><span class="params">(self, x, mask)</span>:</span></span><br><span class="line">    x = x.transpose(<span class="number">1</span>, <span class="number">2</span>)  <span class="comment"># (N, C, L) &lt;- (N, dim, seq_len)</span></span><br><span class="line">    x = self.conv1d(x)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># mask, remove the effect of 'PAD'</span></span><br><span class="line">    mask = mask.unsqueeze(dim=<span class="number">1</span>)</span><br><span class="line">    mask = mask.expand(mask.shape[<span class="number">0</span>], self.filter_num, mask.shape[<span class="number">-1</span>])</span><br><span class="line">    x = x.masked_fill_(mask.eq(<span class="number">0</span>), float(<span class="string">'-inf'</span>))</span><br><span class="line">    x = x.unsqueeze(dim=<span class="number">-1</span>)</span><br><span class="line">    <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<h1 id="3-å®éªŒç»“æœ"><a href="#3-å®éªŒç»“æœ" class="headerlink" title="3. å®éªŒç»“æœ"></a>3. å®éªŒç»“æœ</h1><p>å›ºå®šéšæœºæ•°ç§å­ï¼Œä¸¤ç§ä¸åŒçš„å®ç°æ–¹å¼ç»“æœå®Œå…¨ä¸€æ ·ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<font color="orange"> <strong>ä¸¤ç§æ–¹å¼æ²¡æœ‰åŒºåˆ«ï¼</strong> </font> ç»ˆäºå¯ä»¥æ”¾å¿ƒäº†ï¼</p>
<p>Conv2d():</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[Mon 30 Nov 2020 14:05:47]-INFO-run.py-208-1425: Epoch: 10, DEV non_na_macro_f1: 0.5618245545712591</span><br><span class="line">[Mon 30 Nov 2020 14:06:01]-INFO-evaluate.py-85-1425: ***** Running evaluation E-11_S-1513 *****</span><br><span class="line">[Mon 30 Nov 2020 14:06:01]-INFO-evaluate.py-86-1425:   Num examples = 10262</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-345-1425: ***** dev Eval results E-11_S-1513 *****</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   acc = 0.7189631650750341</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   auc = 0.6220957891050019</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   dsgt_f1 = 0.5959275473368374</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   dsgt_p = 0.6370019755980496</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   dsgt_r = 0.6031188145161877</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   macro-f1 = 0.5959275473368374</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   macro-precision = 0.6370019755980497</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   macro-recall = 0.6031188145161875</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   max_f1 = 0.7331908070550509</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   mean_prec = 0.17543470520760482</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   micro-f1 = 0.7189631650750341</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   micro-precision = 0.7189631650750341</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   micro-recall = 0.7189631650750341</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   non_na_auc = 0.7465032659070302</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   non_na_macro_f1 = 0.5959275473368374</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   non_na_macro_precision = 0.6370019755980496</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   non_na_macro_recall = 0.6031188145161877</span><br></pre></td></tr></table></figure>
<p>Conv1d():</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[Mon 30 Nov 2020 14:05:47]-INFO-run.py-208-1425: Epoch: 10, DEV non_na_macro_f1: 0.5618245545712591</span><br><span class="line">[Mon 30 Nov 2020 14:06:01]-INFO-evaluate.py-85-1425: ***** Running evaluation E-11_S-1513 *****</span><br><span class="line">[Mon 30 Nov 2020 14:06:01]-INFO-evaluate.py-86-1425:   Num examples = 10262</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-345-1425: ***** dev Eval results E-11_S-1513 *****</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   acc = 0.7189631650750341</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   auc = 0.6220957891050019</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   dsgt_f1 = 0.5959275473368374</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   dsgt_p = 0.6370019755980496</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   dsgt_r = 0.6031188145161877</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   macro-f1 = 0.5959275473368374</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   macro-precision = 0.6370019755980497</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   macro-recall = 0.6031188145161875</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   max_f1 = 0.7331908070550509</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   mean_prec = 0.17543470520760482</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   micro-f1 = 0.7189631650750341</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   micro-precision = 0.7189631650750341</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   micro-recall = 0.7189631650750341</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   non_na_auc = 0.7465032659070302</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   non_na_macro_f1 = 0.5959275473368374</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   non_na_macro_precision = 0.6370019755980496</span><br><span class="line">[Mon 30 Nov 2020 14:06:05]-INFO-evaluate.py-347-1425:   non_na_macro_recall = 0.6031188145161877</span><br></pre></td></tr></table></figure>
<h1 id="4-torch-max-å’Œmaxpooling-çš„åŒºåˆ«ï¼Ÿ"><a href="#4-torch-max-å’Œmaxpooling-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="4. torch.max()å’Œmaxpooling()çš„åŒºåˆ«ï¼Ÿ"></a>4. torch.max()å’Œmaxpooling()çš„åŒºåˆ«ï¼Ÿ</h1><p>åœ¨å·ç§¯åå¾€å¾€éœ€è¦è¿›è¡Œæœ€å¤§æ± åŒ–æ“ä½œï¼Œä½†æ˜¯ä½¿ç”¨maxpooling()å’Œç›´æ¥ä½¿ç”¨torch.max()æœ‰æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿä¸æƒ³å»è¯»æºç ï¼Œç›´æ¥åšå®éªŒå°è¯•ä¸€ä¸‹~</p>
<p><strong>åœ¨å›ºå®šéšæœºæ•°ç§å­çš„æƒ…å†µä¸‹ï¼Œä¸¤ç§æ–¹å¼å®Œå…¨ä¸€è‡´ï¼Œè¯´æ˜maxpooling()å°±æ˜¯å–max()çš„è¿‡ç¨‹ï¼Œæ²¡æœ‰å·®åˆ«ã€‚</strong></p>
]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
        <tag>PCNN</tag>
        <tag>Conv1d</tag>
        <tag>Conv2d</tag>
      </tags>
  </entry>
  <entry>
    <title>sparqlæŸ¥è¯¢çš„é€Ÿåº¦</title>
    <url>/2020/11/26/sparql%E6%9F%A5%E8%AF%A2%E7%9A%84%E9%80%9F%E5%BA%A6/</url>
    <content><![CDATA[<p>æœ€è¿‘åœ¨å®éªŒè¿‡ç¨‹ä¸­ï¼Œéœ€è¦ä½¿ç”¨pythonæŸ¥è¯¢midå¯¹åº”çš„å®ä½“ç±»å‹ï¼Œå°è¯•äº†ä½¿ç”¨<a href="https://sparqlwrapper.readthedocs.io/en/latest/SPARQLWrapper.Wrapper.html?highlight=setQuery#SPARQLWrapper.Wrapper.SPARQLWrapper.setQuery" target="_blank" rel="noopener">RDFLib</a>æä¾›çš„APIæ¥å£ï¼Œä½†æ˜¯æ•ˆç‡å®åœ¨å¤ªä½äº†ï¼Œæˆ‘<strong>æŸ¥è¯¢1ä¸ªå®ä½“éœ€è¦ç”¨æ—¶9så·¦å³</strong>ï¼Œè¿™æ ·ä¸‹æ¥ï¼ŒæŸ¥è¯¢10ä¸‡ä¸ªå®ä½“ï¼Œå°±éœ€è¦è€—æ—¶250å°æ—¶â€¦â€¦ä¸å¯æ¥å—</p>
<h1 id="1-ä½¿ç”¨RDFLib"><a href="#1-ä½¿ç”¨RDFLib" class="headerlink" title="1. ä½¿ç”¨RDFLib"></a>1. ä½¿ç”¨RDFLib</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wrapper</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.sparql = SPARQLWrapper(<span class="string">"http://210.28.132.62:8900/sparql"</span>)</span><br><span class="line">        self.sparql.setReturnFormat(JSON)</span><br><span class="line">        self.query_string = <span class="string">"select ?o where &#123;&lt;http://rdf.freebase.com/ns/%s&gt; &lt;http://rdf.freebase.com/ns/type.object.type&gt; ?o&#125;"</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(self, mid)</span>:</span></span><br><span class="line">        self.sparql.setQuery(self.query_string % mid)</span><br><span class="line">        results =  self.sparql.query().convert()</span><br><span class="line">        data = [result[<span class="string">"o"</span>][<span class="string">"value"</span>] <span class="keyword">for</span> result <span class="keyword">in</span> results[<span class="string">"results"</span>][<span class="string">"bindings"</span>]]</span><br><span class="line">        <span class="keyword">return</span> data</span><br></pre></td></tr></table></figure>
<h1 id="2-ä½¿ç”¨urllib"><a href="#2-ä½¿ç”¨urllib" class="headerlink" title="2. ä½¿ç”¨urllib"></a>2. ä½¿ç”¨urllib</h1><p>å°è¯•ç›´æ¥ä½¿ç”¨urllibå‘é€è¯·æ±‚ï¼Œä¸å†ç”¨ç°æœ‰çš„å°è£…å·¥å…·ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(mid)</span>:</span></span><br><span class="line">    <span class="string">"""ä½¿ç”¨urllibæŸ¥è¯¢SPARQL"""</span></span><br><span class="line">    params = &#123;<span class="string">'query'</span>:<span class="string">'select ?o where &#123;&lt;http://rdf.freebase.com/ns/m.071cn&gt; &lt;http://rdf.freebase.com/ns/type.object.type&gt; ?o&#125;'</span>,</span><br><span class="line">    <span class="string">'format'</span>: <span class="string">'application/sparql-results+json'</span>&#125;</span><br><span class="line">    params = bytes(urllib.parse.urlencode(params), encoding=<span class="string">'utf8'</span>)</span><br><span class="line">    result = json.loads(urllib.request.urlopen(<span class="string">'http://210.28.132.62:8900/sparql'</span>, data=params).read().decode(<span class="string">'utf-8'</span>))</span><br><span class="line">    result = [r[<span class="string">"o"</span>][<span class="string">"value"</span>] <span class="keyword">for</span> r <span class="keyword">in</span> result[<span class="string">"results"</span>][<span class="string">"bindings"</span>]]</span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·æŸ¥è¯¢äº†10ä¸ªå®ä½“ï¼Œè€—æ—¶90sâ€¦â€¦è¿˜æ˜¯å¤ªæ…¢äº†ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆæ•ˆç‡ä¸Šçš„æå‡ã€‚</p>
<h1 id="3-ä½¿ç”¨grequestså¹¶å‘è¯·æ±‚"><a href="#3-ä½¿ç”¨grequestså¹¶å‘è¯·æ±‚" class="headerlink" title="3. ä½¿ç”¨grequestså¹¶å‘è¯·æ±‚"></a>3. ä½¿ç”¨grequestså¹¶å‘è¯·æ±‚</h1><p>ä¼°è®¡æ˜¯å› ä¸ºä¸²è¡Œå¯¼è‡´æ•ˆç‡å¤ªä½ï¼Œåœ¨ç½‘ä¸ŠæŸ¥è¯¢åï¼Œæ¨è<a href="https://github.com/spyoungtech/grequests" target="_blank" rel="noopener">grequests</a></p>
<p>æ”¹å†™å‡½æ•°å¦‚ä¸‹ï¼š<a id="more"></a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pquery</span><span class="params">(mids)</span>:</span></span><br><span class="line">    <span class="string">"""å¹¶è¡ŒæŸ¥è¯¢"""</span></span><br><span class="line">    req_list = [grequests.get(</span><br><span class="line">        <span class="string">'http://210.28.132.62:8900/sparql'</span>,</span><br><span class="line">        params = &#123;</span><br><span class="line">            <span class="string">"query"</span>: <span class="string">"select ?o where &#123;&lt;http://rdf.freebase.com/ns/%s&gt; &lt;http://rdf.freebase.com/ns/type.object.type&gt; ?o&#125;"</span> % mid,</span><br><span class="line">            <span class="string">"format"</span>: <span class="string">"application/sparql-results+json"</span></span><br><span class="line">        &#125;) <span class="keyword">for</span> mid <span class="keyword">in</span> mids</span><br><span class="line">    ]</span><br><span class="line">    resp_list = grequests.map(req_list)</span><br><span class="line">    <span class="keyword">return</span> resp_list</span><br></pre></td></tr></table></figure>
<p>æŸ¥è¯¢10ä¸ªå®ä½“ï¼Œè€—æ—¶0.03sï¼YESâœŒ</p>
<p>æŸ¥è¯¢1000ä¸ªå®ä½“ï¼Œè€—æ—¶8.49sï¼ç«ç®­ä¸€èˆ¬çš„é€Ÿåº¦ï¼ğŸš€èµ·é£ï¼</p>
<h1 id="4-æ€»ç»“"><a href="#4-æ€»ç»“" class="headerlink" title="4. æ€»ç»“"></a>4. æ€»ç»“</h1><p>è¿™æ¬¡ç»å†è®©æˆ‘ä½“ä¼šåˆ°ç®—æ³•çš„é‡è¦æ€§ï¼Œå¥½çš„ç®—æ³•ä½•æ­¢æ˜¯äº‹åŠåŠŸå€å•Šï¼</p>
]]></content>
      <categories>
        <category>Others</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>SPARQL</tag>
        <tag>urllib</tag>
        <tag>urllib2</tag>
        <tag>urllib3</tag>
      </tags>
  </entry>
  <entry>
    <title>Rule Mining-è§„åˆ™æŒ–æ˜ç®—æ³•</title>
    <url>/2020/11/26/Rule-Mining-%E8%A7%84%E5%88%99%E6%8C%96%E6%8E%98%E7%AE%97%E6%B3%95/</url>
    <content><![CDATA[<p>å¯ä»¥åˆ©ç”¨æ•°æ®æŒ–æ˜æŠ€æœ¯ï¼Œè‡ªåŠ¨åœ°ä»æ–‡æœ¬ä¸­æŒ–æ˜æ¨¡å¼ï¼Œåœ¨å…³ç³»æŠ½å–ä¸­ï¼Œæˆ‘é‡‡ç”¨äº†ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<h1 id="1-å®ä½“ç±»å‹è¯†åˆ«"><a href="#1-å®ä½“ç±»å‹è¯†åˆ«" class="headerlink" title="1. å®ä½“ç±»å‹è¯†åˆ«"></a>1. å®ä½“ç±»å‹è¯†åˆ«</h1><h2 id="1-1-How-to-search-in-freebase-by-mid"><a href="#1-1-How-to-search-in-freebase-by-mid" class="headerlink" title="1.1 How to search in freebase by mid?"></a>1.1 How to search in freebase by mid?</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select ?o</span><br><span class="line">where</span><br><span class="line">&#123;</span><br><span class="line">	&lt;http://rdf.freebase.com/ns/m.071cn&gt; </span><br><span class="line">    &lt;http://rdf.freebase.com/ns/type.object.type&gt;</span><br><span class="line">    ?o</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŒ‰ç…§ä¸Šè¿°æ–¹å¼ï¼Œå¾—åˆ°å½“å‰å®ä½“<code>m.071cn</code>çš„å®ä½“ç±»å‹ï¼Œåˆ—è¡¨å¦‚ä¸‹ï¼š</p>
<p><img src="/images/blog/2020/types.png" alt></p>
<p>å…·ä½“åœ¨pythonä¸­å®ç°æ—¶ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹å¼ï¼Œä¸»è¦ç”¨åˆ°<a href="https://github.com/RDFLib/rdflib" target="_blank" rel="noopener">REFLib</a>åŒ…ï¼Œå…·ä½“å¯å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡åšæ–‡ï¼š</p>
<blockquote>
<p> <a href>sparqlæŸ¥è¯¢çš„é€Ÿåº¦</a></p>
</blockquote>
<a id="more"></a>
<h2 id="1-2-ç­›é€‰"><a href="#1-2-ç­›é€‰" class="headerlink" title="1.2 ç­›é€‰"></a>1.2 ç­›é€‰</h2><p>å¯ä»¥å°†midçš„å®ä½“é“¾æ¥ç»“æœå’Œä½¿ç”¨å·¥å…· (å¦‚ Stanford Core NLP) çš„å‘½åå®ä½“è¯†åˆ«ç»“æœç›¸ç»“åˆï¼Œå¾—åˆ°å®ä½“ç±»å‹ä¿¡æ¯ã€‚</p>
<p>freebaseä¸­åŒ…å«çš„domainsæœ‰ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line"> <span class="string">"visual_art"</span>,</span><br><span class="line"> <span class="string">"soccer"</span>,</span><br><span class="line"> <span class="string">"geography"</span>,</span><br><span class="line"> <span class="string">"martial_arts"</span>,</span><br><span class="line"> <span class="string">"amusement_parks"</span>,</span><br><span class="line"> <span class="string">"conferences"</span>,</span><br><span class="line"> <span class="string">"comic_strips"</span>,</span><br><span class="line"> <span class="string">"metropolitan_transit"</span>,</span><br><span class="line"> <span class="string">"comedy"</span>,</span><br><span class="line"> <span class="string">"atom"</span>,</span><br><span class="line"> <span class="string">"tv"</span>,</span><br><span class="line"> <span class="string">"dining"</span>,</span><br><span class="line"> <span class="string">"fictional_universe"</span>,</span><br><span class="line"> <span class="string">"time"</span>,</span><br><span class="line"> <span class="string">"internet"</span>,</span><br><span class="line"> <span class="string">"nytimes"</span>,</span><br><span class="line"> <span class="string">"chess"</span>,</span><br><span class="line"> <span class="string">"book"</span>,</span><br><span class="line"> <span class="string">"engineering"</span>,</span><br><span class="line"> <span class="string">"dataworld"</span>,</span><br><span class="line"> <span class="string">"library"</span>,</span><br><span class="line"> <span class="string">"projects"</span>,</span><br><span class="line"> <span class="string">"protected_sites"</span>,</span><br><span class="line"> <span class="string">"travel"</span>,</span><br><span class="line"> <span class="string">"government"</span>,</span><br><span class="line"> <span class="string">"zoos"</span>,</span><br><span class="line"> <span class="string">"tennis"</span>,</span><br><span class="line"> <span class="string">"interests"</span>,</span><br><span class="line"> <span class="string">"spaceflight"</span>,</span><br><span class="line"> <span class="string">"award"</span>,</span><br><span class="line"> <span class="string">"base"</span>,</span><br><span class="line"> <span class="string">"broadcast"</span>,</span><br><span class="line"> <span class="string">"meteorology"</span>,</span><br><span class="line"> <span class="string">"religion"</span>,</span><br><span class="line"> <span class="string">"cvg"</span>,</span><br><span class="line"> <span class="string">"computer"</span>,</span><br><span class="line"> <span class="string">"imdb"</span>,</span><br><span class="line"> <span class="string">"opera"</span>,</span><br><span class="line"> <span class="string">"distilled_spirits"</span>,</span><br><span class="line"> <span class="string">"radio"</span>,</span><br><span class="line"> <span class="string">"people"</span>,</span><br><span class="line"> <span class="string">"language"</span>,</span><br><span class="line"> <span class="string">"transportation"</span>,</span><br><span class="line"> <span class="string">"games"</span>,</span><br><span class="line"> <span class="string">"type"</span>,</span><br><span class="line"> <span class="string">"medicine"</span>,</span><br><span class="line"> <span class="string">"olympics"</span>,</span><br><span class="line"> <span class="string">"food"</span>,</span><br><span class="line"> <span class="string">"sports"</span>,</span><br><span class="line"> <span class="string">"royalty"</span>,</span><br><span class="line"> <span class="string">"wine"</span>,</span><br><span class="line"> <span class="string">"digicams"</span>,</span><br><span class="line"> <span class="string">"aviation"</span>,</span><br><span class="line"> <span class="string">"influence"</span>,</span><br><span class="line"> <span class="string">"user"</span>,</span><br><span class="line"> <span class="string">"basketball"</span>,</span><br><span class="line"> <span class="string">"finance"</span>,</span><br><span class="line"> <span class="string">"celebrities"</span>,</span><br><span class="line"> <span class="string">"music"</span>,</span><br><span class="line"> <span class="string">"comic_books"</span>,</span><br><span class="line"> <span class="string">"organization"</span>,</span><br><span class="line"> <span class="string">"education"</span>,</span><br><span class="line"> <span class="string">"skiing"</span>,</span><br><span class="line"> <span class="string">"ice_hockey"</span>,</span><br><span class="line"> <span class="string">"military"</span>,</span><br><span class="line"> <span class="string">"cricket"</span>,</span><br><span class="line"> <span class="string">"chemistry"</span>,</span><br><span class="line"> <span class="string">"automotive"</span>,</span><br><span class="line"> <span class="string">"fashion"</span>,</span><br><span class="line"> <span class="string">"boats"</span>,</span><br><span class="line"> <span class="string">"theater"</span>,</span><br><span class="line"> <span class="string">"event"</span>,</span><br><span class="line"> <span class="string">"baseball"</span>,</span><br><span class="line"> <span class="string">"freebase"</span>,</span><br><span class="line"> <span class="string">"media_common"</span>,</span><br><span class="line"> <span class="string">"common"</span>,</span><br><span class="line"> <span class="string">"bicycles"</span>,</span><br><span class="line"> <span class="string">"american_football"</span>,</span><br><span class="line"> <span class="string">"rail"</span>,</span><br><span class="line"> <span class="string">"biology"</span>,</span><br><span class="line"> <span class="string">"business"</span>,</span><br><span class="line"> <span class="string">"kp_lw"</span>,</span><br><span class="line"> <span class="string">"venture_capital"</span>,</span><br><span class="line"> <span class="string">"astronomy"</span>,</span><br><span class="line"> <span class="string">"law"</span>,</span><br><span class="line"> <span class="string">"periodicals"</span>,</span><br><span class="line"> <span class="string">"exhibitions"</span>,</span><br><span class="line"> <span class="string">"architecture"</span>,</span><br><span class="line"> <span class="string">"film"</span>,</span><br><span class="line"> <span class="string">"location"</span>,</span><br><span class="line"> <span class="string">"symbols"</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<font color="orange"> **å°†ä¸€äº›æ˜æ˜¾é”™è¯¯çš„çš„è¿‡æ»¤æ‰ï¼Œä¾‹å¦‚user, commonç­‰ï¼Œç„¶åé€‰å–é¢‘ç‡æœ€é«˜çš„ä½œä¸ºå®ä½“ç±»å‹ã€‚** </font>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">RANKS = [</span><br><span class="line">    (<span class="string">'people.person'</span>, <span class="string">'people.person'</span>),</span><br><span class="line">    (<span class="string">'location.location'</span>, <span class="string">'location.location'</span>),</span><br><span class="line">    (<span class="string">'organization.organization'</span>, <span class="string">'organization.organization'</span>),</span><br><span class="line">    (<span class="string">'religion.religion'</span>, <span class="string">'religion.religion'</span>),</span><br><span class="line">    (<span class="string">'film.film'</span>, <span class="string">'film.film'</span>),</span><br><span class="line">    (<span class="string">'sports.sports_team'</span>, <span class="string">'sports.sports_team'</span>),</span><br><span class="line">    (<span class="string">'people.ethnicity'</span>, <span class="string">'people.ethnicity'</span>),</span><br><span class="line">    (<span class="string">'people.family'</span>, <span class="string">'people.family'</span>),</span><br><span class="line">    (<span class="string">'language.human_language'</span>, <span class="string">'language.human_language'</span>),</span><br><span class="line">    (<span class="string">'people.profession'</span>, <span class="string">'people.profession'</span>),</span><br><span class="line">    (<span class="string">'film.film_festival'</span>, <span class="string">'film.film_festival'</span>),</span><br><span class="line">    # ================ maps ================ #</span><br><span class="line">    (<span class="string">'film.film_character'</span>, <span class="string">'people.person'</span>),</span><br><span class="line">    (<span class="string">'people.family_name'</span>, <span class="string">'people.person'</span>)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>æŒ‰ç…§ä¸Šè¿°é¡ºåºç­›é€‰å’Œæ˜ å°„ï¼Œå®éªŒè¯æ˜æ•ˆæœè¿˜æ˜¯ä¸é”™çš„å˜»å˜»ğŸ¤©</p>
<h1 id="2-è§„åˆ™ä½“æŒ–æ˜"><a href="#2-è§„åˆ™ä½“æŒ–æ˜" class="headerlink" title="2. è§„åˆ™ä½“æŒ–æ˜"></a>2. è§„åˆ™ä½“æŒ–æ˜</h1><p>è§„åˆ™ä½“æŒ–æ˜ä¸»è¦æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œï¼š</p>
<ol>
<li>å–å¤´å°¾å®ä½“ä¹‹é—´çš„å­—ç¬¦ä¸²</li>
<li>å»é™¤æ ‡ç‚¹ï¼Œè½¬ä¸ºå°å†™</li>
<li>è¯å¹²æå–</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> nltk.stem.porter <span class="keyword">import</span> PorterStemmer</span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br></pre></td></tr></table></figure>
<p>åˆ©ç”¨ä»¥ä¸‹å‡ ä¸ªå‡½æ•°ï¼š</p>
<ol>
<li>å–å­—ç¬¦ä¸²</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_nested</span><span class="params">(h, t)</span>:</span></span><br><span class="line">    <span class="string">"""å®ä½“æ˜¯å¦æœ‰é‡å éƒ¨åˆ†"""</span></span><br><span class="line">    <span class="keyword">if</span> (t[<span class="string">'pos'</span>][<span class="number">0</span>] &lt;= h[<span class="string">'pos'</span>][<span class="number">0</span>] &lt; t[<span class="string">'pos'</span>][<span class="number">1</span>]) <span class="keyword">or</span> (t[<span class="string">'pos'</span>][<span class="number">0</span>] &lt; h[<span class="string">'pos'</span>][<span class="number">1</span>] &lt;= t[<span class="string">'pos'</span>][<span class="number">1</span>]):</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">if</span> (h[<span class="string">'pos'</span>][<span class="number">0</span>] &lt;= t[<span class="string">'pos'</span>][<span class="number">0</span>] &lt; h[<span class="string">'pos'</span>][<span class="number">1</span>]) <span class="keyword">or</span> (h[<span class="string">'pos'</span>][<span class="number">0</span>] &lt; t[<span class="string">'pos'</span>][<span class="number">1</span>] &lt;= h[<span class="string">'pos'</span>][<span class="number">1</span>]):</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">extract_pattern</span><span class="params">(data)</span>:</span></span><br><span class="line">    patterns = []</span><br><span class="line">    <span class="keyword">for</span> record <span class="keyword">in</span> data:</span><br><span class="line">        <span class="keyword">if</span> is_nested(record[<span class="string">'h'</span>], record[<span class="string">'t'</span>]):</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">if</span> record[<span class="string">'h'</span>][<span class="string">'pos'</span>][<span class="number">0</span>] &lt; record[<span class="string">'t'</span>][<span class="string">'pos'</span>][<span class="number">0</span>]:</span><br><span class="line">            start = record[<span class="string">'h'</span>][<span class="string">'pos'</span>][<span class="number">1</span>]</span><br><span class="line">            end = record[<span class="string">'t'</span>][<span class="string">'pos'</span>][<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            start = record[<span class="string">'t'</span>][<span class="string">'pos'</span>][<span class="number">1</span>]</span><br><span class="line">            end = record[<span class="string">'h'</span>][<span class="string">'pos'</span>][<span class="number">0</span>]</span><br><span class="line">        body = record[<span class="string">'text'</span>][start:end]</span><br><span class="line">        patterns.append(&#123;<span class="string">'body'</span>: body, <span class="string">'relation'</span>:record[<span class="string">'relation'</span>]&#125;)</span><br><span class="line">    <span class="keyword">return</span> patterns</span><br></pre></td></tr></table></figure>
<ol>
<li>è½¬å°å†™ï¼Œå»é™¤æ ‡ç‚¹</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">punctuation</span><span class="params">(patterns)</span>:</span></span><br><span class="line">    result = []</span><br><span class="line">    regex = re.compile(<span class="string">'[%s]'</span> % re.escape(string.punctuation))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(patterns)):</span><br><span class="line">        body = regex.sub(<span class="string">''</span>, patterns[i][<span class="string">'body'</span>]).strip().lower()</span><br><span class="line">        <span class="keyword">if</span> len(body) &gt; <span class="number">0</span>:</span><br><span class="line">            result.append(&#123;<span class="string">'body'</span>:body, <span class="string">'relation'</span>:patterns[i][<span class="string">'relation'</span>]&#125;)</span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>
<ol>
<li>åˆ©ç”¨ NLTK è¯å¹²æå–</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">stemming</span><span class="params">(patterns)</span>:</span></span><br><span class="line">    stemmer = PorterStemmer()</span><br><span class="line">    result = []</span><br><span class="line">    <span class="keyword">for</span> pattern <span class="keyword">in</span> tqdm(patterns, total=len(patterns)):</span><br><span class="line">        body = <span class="string">' '</span>.join([stemmer.stem(token) <span class="keyword">for</span> token <span class="keyword">in</span> pattern[<span class="string">'body'</span>].split()])</span><br><span class="line">        <span class="keyword">if</span> len(body) &gt; <span class="number">0</span>:</span><br><span class="line">            result.append(&#123;<span class="string">'body'</span>:body, <span class="string">'relation'</span>:pattern[<span class="string">'relation'</span>]&#125;)</span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>
<h1 id="3-è§„åˆ™ç­›é€‰å’Œæ ‡æ³¨"><a href="#3-è§„åˆ™ç­›é€‰å’Œæ ‡æ³¨" class="headerlink" title="3. è§„åˆ™ç­›é€‰å’Œæ ‡æ³¨"></a>3. è§„åˆ™ç­›é€‰å’Œæ ‡æ³¨</h1><p>æŒ‰ç…§é¢‘ç‡æˆ–è§„åˆ™è¦†ç›–çš„æ ·æœ¬æ•°ï¼Œè¿‡æ»¤è§„åˆ™ï¼›ç„¶åæ ‡æ³¨è§„åˆ™ã€‚å¾—åˆ°è§„åˆ™é›†åˆã€‚ç»“æŸğŸ‰</p>
]]></content>
      <categories>
        <category>Algorithms</category>
      </categories>
      <tags>
        <tag>Rule</tag>
        <tag>Pattern</tag>
        <tag>è§„åˆ™</tag>
        <tag>æ¨¡å¼</tag>
        <tag>è§„åˆ™æŒ–æ˜</tag>
        <tag>Rule Mining</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¶¨çŸ¥è¯†â€”â€”GCNæœ‰å‘å›¾, Inductive, Transductive</title>
    <url>/2020/11/25/%E6%B6%A8%E7%9F%A5%E8%AF%86%E2%80%94%E2%80%94GCN%E6%9C%89%E5%90%91%E5%9B%BE-Inductive-Transductive/</url>
    <content><![CDATA[<h1 id="GCNå¯ä»¥å¤„ç†æœ‰å‘å›¾å—ï¼Ÿ"><a href="#GCNå¯ä»¥å¤„ç†æœ‰å‘å›¾å—ï¼Ÿ" class="headerlink" title="GCNå¯ä»¥å¤„ç†æœ‰å‘å›¾å—ï¼Ÿ"></a>GCNå¯ä»¥å¤„ç†æœ‰å‘å›¾å—ï¼Ÿ</h1><p>é¦–å…ˆå›¾ç¥ç»ç½‘ç»œåˆ†ä¸ºspectral domain å’Œ spatial domainä¸¤å¤§å—ã€‚</p>
<p>spatial domainå®Œå…¨å¯ä»¥å¤„ç†æœ‰å‘å›¾ï¼Œä¾‹å¦‚GAT; </p>
<p>spectral domainç¡®å®æ˜¯å»ºç«‹åœ¨æ— å‘å›¾çš„å‡è®¾çš„ä¸‹çš„ï¼Œç†è®ºä¸Šå¯¹æœ‰å‘å›¾æ— èƒ½ä¸ºåŠ›ã€‚ä¸è¿‡ä¹Ÿæœ‰ä¸€äº›äººåœ¨æ”¹è¿›ï¼Œä½†æ˜¯ç†è®ºæ ¹åŸºæ”¾åœ¨é‚£ï¼Œèƒ½åšåªæœ‰ä»æœ‰å‘å›¾ä¸­æ„é€ å‡ºå¯¹ç§°çš„æƒå€¼çŸ©é˜µã€‚ä¾‹å¦‚è¿™ç¯‡16å¹´Scienceçš„å·¥ä½œï¼ˆ70+é¡µï¼‰ç»™å‡ºäº†ä¸€ç§ä½¿ç”¨æ¨¡ä½“ï¼ˆä¸€äº›éå¸¸å°çš„å±€éƒ¨å›¾èŒƒå¼ï¼Œå¯ä»¥æ ¹æ®åº”ç”¨è‡ªå®šä¹‰ï¼‰ä»æœ‰å‘å›¾æ„é€ å¯¹ç§°æ‹‰æ™®æ‹‰æ–¯çŸ©é˜µçš„æ–¹æ³•</p>
<p><a href="https://arxiv.org/pdf/1612.08447.pdf" target="_blank" rel="noopener">https://arxiv.org/pdf/1612.08447.pdf</a></p>
<p>ä¸‹é¢è¿™ç¯‡17å¹´çš„å·¥ä½œï¼Œå°±æ˜¯ä½¿ç”¨æ¨¡ä½“çš„æ–¹æ³•å°†spectral domain GCNæ‰©å±•åˆ°æœ‰å‘å›¾ä¸Š</p>
<p><a href="https://arxiv.org/abs/1802.01572" target="_blank" rel="noopener">https://arxiv.org/abs/1802.01572</a></p>
<h1 id="Inductive-Learning-v-s-Transductive-Learning"><a href="#Inductive-Learning-v-s-Transductive-Learning" class="headerlink" title="Inductive Learning v.s. Transductive Learning"></a>Inductive Learning v.s. Transductive Learning</h1><p>æ ¹æ®ç»´åŸºç™¾ç§‘ï¼Œæœ‰ä»¥ä¸‹å®šä¹‰ï¼š</p>
<blockquote>
<p><strong>Transduction</strong> is reasoning from observed, specific (training) cases to specific (test) cases. In contrast, <strong>induction</strong> is reasoning from observed training cases to general rules, which are then applied to the test cases.</p>
</blockquote>
<p>æ‹†å¼€äº†çœ‹ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ–¹å¼ç†è§£ï¼š<a id="more"></a></p>
<h2 id="Inductive-Learning"><a href="#Inductive-Learning" class="headerlink" title="Inductive Learning"></a>Inductive Learning</h2><p>ä¼ ç»Ÿçš„ç›‘ç£å­¦ä¹ å°±æ˜¯Inductive Learningã€‚æˆ‘ä»¬ç”¨æ ‡æ³¨çš„è®­ç»ƒé›†è®­ç»ƒä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œç„¶ååœ¨ä»æ¥æ²¡è§è¿‡çš„æµ‹è¯•é›†ä¸Šé¢„æµ‹æ ‡ç­¾ã€‚</p>
<h2 id="Transductive-Learning"><a href="#Transductive-Learning" class="headerlink" title="Transductive Learning"></a>Transductive Learning</h2><p>ä¸åŒäºInductive Learningï¼ŒTransductive Learningåœ¨è®­ç»ƒå’Œæµ‹è¯•é˜¶æ®µéƒ½å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„æ•°æ®ã€‚åˆ©ç”¨è®­ç»ƒé›†è¿›è¡Œå­¦ä¹ ï¼Œç„¶ååœ¨æµ‹è¯•é›†ä¸Šé¢„æµ‹æ ‡ç­¾ã€‚è™½ç„¶æµ‹è¯•é›†ä¸Šçš„æ ‡ç­¾ä¸å¯çŸ¥ï¼Œä½†æ˜¯åœ¨è®­ç»ƒæ—¶ï¼Œæµ‹è¯•é›†ä¸Šçš„æ¨¡å¼ (pattern) å’Œé¢å¤–ä¿¡æ¯ (additional information) è¿˜æ˜¯å¯ä»¥åˆ©ç”¨çš„ã€‚</p>
<h2 id="åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>Transduction ä¸æ„å»ºä¸€ä¸ªé¢„æµ‹æ¨¡å‹ã€‚å¦‚æœæµ‹è¯•é›†ä¸­åŠ å…¥äº†æ–°çš„æ•°æ®ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦é‡æ–°è®­ç»ƒæ•´ä¸ªæ¨¡å‹ï¼Œç„¶ååœ¨æ–°çš„æµ‹è¯•é›†ä¸Šçš„é¢„æµ‹ã€‚ä¸æ­¤ä¸åŒï¼ŒInduction æ„å»ºä¸€ä¸ªé¢„æµ‹æ¨¡å‹ï¼Œå½“æœ‰æ–°çš„æµ‹è¯•æ•°æ®æ—¶ï¼Œä¸éœ€è¦é‡æ–°è®­ç»ƒã€‚</p>
<p><img src="/images/blog/2020/inductivetransductive.png" alt></p>
]]></content>
      <categories>
        <category>Machine Learning</category>
      </categories>
      <tags>
        <tag>GCN</tag>
        <tag>Inductive</tag>
        <tag>Transductive</tag>
      </tags>
  </entry>
  <entry>
    <title>å­—ç¬¦ä¸²è§„èŒƒåŒ–â€”â€”å»é™¤æ ‡ç‚¹ç¬¦å·å’Œè¯å¹²æå–</title>
    <url>/2020/11/24/%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%A7%84%E8%8C%83%E5%8C%96%E2%80%94%E2%80%94%E5%8E%BB%E9%99%A4%E6%A0%87%E7%82%B9%E7%AC%A6%E5%8F%B7%E5%92%8C%E8%AF%8D%E5%B9%B2%E6%8F%90%E5%8F%96/</url>
    <content><![CDATA[<h1 id="å»é™¤æ ‡ç‚¹ç¬¦å·"><a href="#å»é™¤æ ‡ç‚¹ç¬¦å·" class="headerlink" title="å»é™¤æ ‡ç‚¹ç¬¦å·"></a>å»é™¤æ ‡ç‚¹ç¬¦å·</h1><p>åˆ©ç”¨<code>string.punctuation</code>å’Œ<code>str.translate()</code>ï¼Œæ•ˆç‡é«˜è€Œä¸”è´¨é‡é«˜ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> string</span><br><span class="line"></span><br><span class="line">s =<span class="string">"string. With. Punctuation"</span></span><br><span class="line">s = s.translate(string.maketrans(<span class="string">""</span>, <span class="string">""</span>), string.punctuation)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line"><span class="string">'string With Punctuation'</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ä»¥ä¸Šæ–¹æ³•åœ¨ Python 3.4 ä»¥åå°±ä¸å¥½ç”¨äº†â€¦â€¦</p>
<p>å¯ä»¥æ”¹ç”¨æ­£åˆ™è¡¨è¾¾å¼å®ç°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">regex = re.compile(<span class="string">'[%s]'</span> % re.escape(string.punctuation))</span><br><span class="line">s = <span class="string">"string. With. Punctuation"</span></span><br><span class="line">s = regex.sub(<span class="string">''</span>, s)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line"><span class="string">'string With Punctuation'</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="ä½¿ç”¨-NLTK-è¯å¹²æå–"><a href="#ä½¿ç”¨-NLTK-è¯å¹²æå–" class="headerlink" title="ä½¿ç”¨ NLTK è¯å¹²æå–"></a>ä½¿ç”¨ NLTK è¯å¹²æå–</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> nltk.stem.porter <span class="keyword">import</span> PorterStemmer</span><br><span class="line"></span><br><span class="line">stemmer = PorterStemmer()</span><br><span class="line">s = <span class="string">"string With Punctuation"</span></span><br><span class="line">s = <span class="string">' '</span>.join([stemmer.stem(token) <span class="keyword">for</span> token <span class="keyword">in</span> s.split()])  <span class="comment"># ä¸€æ¬¡åªèƒ½å¤„ç†ä¸€ä¸ªtoken</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line"><span class="string">'string with punctuat'</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Others</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>normalization</tag>
        <tag>stemming</tag>
        <tag>punctuation</tag>
        <tag>string</tag>
        <tag>å­—ç¬¦ä¸²</tag>
        <tag>è¯å¹²æå–</tag>
        <tag>è§„èŒƒåŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title>è¯å¹²æå– (stemming) å’Œè¯å½¢è¿˜åŸ (lemmatization)</title>
    <url>/2020/11/24/%E8%AF%8D%E5%B9%B2%E6%8F%90%E5%8F%96-stemming-%E5%92%8C%E8%AF%8D%E5%BD%A2%E8%BF%98%E5%8E%9F-lemmatization/</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡è½¬è½½è‡ªï¼š</p>
<p><a href="https://blog.csdn.net/m0_37744293/article/details/79065002" target="_blank" rel="noopener">https://blog.csdn.net/m0_37744293/article/details/79065002</a></p>
</blockquote>
<h1 id="å…±åŒç‚¹"><a href="#å…±åŒç‚¹" class="headerlink" title="å…±åŒç‚¹"></a>å…±åŒç‚¹</h1><p><strong>è¯å½¢è¿˜åŸ</strong>ï¼ˆlemmatizationï¼‰ï¼Œæ˜¯æŠŠä¸€ä¸ªä»»ä½•å½¢å¼çš„è¯­è¨€è¯æ±‡è¿˜åŸä¸ºä¸€èˆ¬å½¢å¼ï¼ˆèƒ½è¡¨è¾¾å®Œæ•´è¯­ä¹‰ï¼‰ï¼Œè€Œ<strong>è¯å¹²æå–</strong>ï¼ˆstemmingï¼‰æ˜¯æŠ½å–è¯çš„è¯å¹²æˆ–è¯æ ¹å½¢å¼ï¼ˆä¸ä¸€å®šèƒ½å¤Ÿè¡¨è¾¾å®Œæ•´è¯­ä¹‰ï¼‰ã€‚è¯å½¢è¿˜åŸå’Œè¯å¹²æå–æ˜¯è¯å½¢è§„èŒƒåŒ–çš„ä¸¤ç±»<br>é‡è¦æ–¹å¼ï¼Œéƒ½èƒ½å¤Ÿè¾¾åˆ°æœ‰æ•ˆå½’å¹¶è¯å½¢çš„ç›®çš„ï¼ŒäºŒè€…æ—¢æœ‰è”ç³»ä¹Ÿæœ‰åŒºåˆ«ã€‚</p>
<ul>
<li>ç›®æ ‡ä¸€è‡´ã€‚è¯å¹²æå–å’Œè¯å½¢è¿˜åŸçš„ç›®æ ‡å‡ä¸ºå°†è¯çš„å±ˆæŠ˜å½¢æ€æˆ–æ´¾ç”Ÿå½¢æ€ç®€åŒ–æˆ–å½’å¹¶ä¸ºè¯å¹²ï¼ˆstemï¼‰æˆ–åŸå½¢çš„åŸºç¡€å½¢å¼ï¼Œéƒ½æ˜¯ä¸€ç§å¯¹è¯çš„ä¸åŒå½¢æ€çš„ç»Ÿä¸€å½’å¹¶çš„è¿‡ç¨‹ã€‚</li>
<li>ç»“æœéƒ¨åˆ†äº¤å‰ã€‚è¯å¹²æå–å’Œè¯å½¢è¿˜åŸä¸æ˜¯äº’æ–¥å…³ç³»ï¼Œå…¶ç»“æœæ˜¯æœ‰éƒ¨åˆ†äº¤å‰çš„ã€‚ä¸€éƒ¨åˆ†è¯åˆ©ç”¨è¿™ä¸¤ç±»æ–¹æ³•éƒ½èƒ½è¾¾åˆ°ç›¸åŒçš„è¯å½¢è½¬æ¢æ•ˆæœã€‚å¦‚â€œdogsâ€çš„è¯å¹²ä¸ºâ€œdogâ€ï¼Œå…¶åŸå½¢ä¹Ÿä¸ºâ€œdogâ€ã€‚</li>
<li>ä¸»æµå®ç°æ–¹æ³•ç±»ä¼¼ã€‚ç›®å‰å®ç°è¯å¹²æå–å’Œè¯å½¢è¿˜åŸçš„ä¸»æµå®ç°æ–¹æ³•å‡æ˜¯åˆ©ç”¨è¯­è¨€ä¸­å­˜åœ¨çš„è§„åˆ™æˆ–åˆ©ç”¨è¯å…¸æ˜ å°„æå–è¯å¹²æˆ–è·å¾—è¯çš„åŸå½¢ã€‚</li>
<li>åº”ç”¨é¢†åŸŸç›¸ä¼¼ã€‚ä¸»è¦åº”ç”¨äºä¿¡æ¯æ£€ç´¢å’Œæ–‡æœ¬ã€è‡ªç„¶è¯­è¨€å¤„ç†ç­‰æ–¹é¢ï¼ŒäºŒè€…å‡æ˜¯è¿™äº›åº”ç”¨çš„åŸºæœ¬æ­¥éª¤ã€‚<a id="more"></a></li>
</ul>
<h1 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h1><p><strong>åŒºåˆ«</strong></p>
<ul>
<li>åœ¨åŸç†ä¸Šï¼Œè¯å¹²æå–ä¸»è¦æ˜¯é‡‡ç”¨â€œç¼©å‡â€çš„æ–¹æ³•ï¼Œå°†è¯è½¬æ¢ä¸ºè¯å¹²ï¼Œå¦‚å°†â€œcatsâ€å¤„ç†ä¸ºâ€œcatâ€ï¼Œå°†â€œeffectiveâ€å¤„ç†ä¸ºâ€œeffectâ€ã€‚è€Œè¯å½¢è¿˜åŸä¸»è¦é‡‡ç”¨â€œè½¬å˜â€çš„æ–¹æ³•ï¼Œå°†è¯è½¬å˜ä¸ºå…¶åŸå½¢ï¼Œå¦‚å°†â€œdroveâ€å¤„ç†ä¸ºâ€œdriveâ€ï¼Œå°†â€œdrivingâ€å¤„ç†ä¸ºâ€œdriveâ€ã€‚</li>
<li>åœ¨å¤æ‚æ€§ä¸Šï¼Œè¯å¹²æå–æ–¹æ³•ç›¸å¯¹ç®€å•ï¼Œè¯å½¢è¿˜åŸåˆ™éœ€è¦è¿”å›è¯çš„åŸå½¢ï¼Œéœ€è¦å¯¹è¯å½¢è¿›è¡Œåˆ†æï¼Œä¸ä»…è¦è¿›è¡Œè¯ç¼€çš„è½¬åŒ–ï¼Œè¿˜è¦è¿›è¡Œè¯æ€§è¯†åˆ«ï¼ŒåŒºåˆ†ç›¸åŒè¯å½¢ä½†åŸå½¢ä¸åŒçš„è¯çš„å·®åˆ«ã€‚è¯æ€§æ ‡æ³¨çš„å‡†ç¡®ç‡ä¹Ÿç›´æ¥å½±å“è¯å½¢è¿˜åŸçš„å‡†ç¡®ç‡ï¼Œå› æ­¤ï¼Œè¯å½¢è¿˜åŸæ›´ä¸ºå¤æ‚ã€‚</li>
<li>åœ¨å®ç°æ–¹æ³•ä¸Šï¼Œè™½ç„¶è¯å¹²æå–å’Œè¯å½¢è¿˜åŸå®ç°çš„ä¸»æµæ–¹æ³•ç±»ä¼¼ï¼Œä½†äºŒè€…åœ¨å…·ä½“å®ç°ä¸Šå„æœ‰ä¾§é‡ã€‚è¯å¹²æå–çš„å®ç°æ–¹æ³•ä¸»è¦åˆ©ç”¨è§„åˆ™å˜åŒ–è¿›è¡Œè¯ç¼€çš„å»é™¤å’Œç¼©å‡ï¼Œä»è€Œè¾¾åˆ°è¯çš„ç®€åŒ–æ•ˆæœã€‚è¯å½¢è¿˜åŸåˆ™ç›¸å¯¹è¾ƒå¤æ‚ï¼Œæœ‰å¤æ‚çš„å½¢æ€å˜åŒ–ï¼Œå•çº¯ä¾æ®è§„åˆ™æ— æ³•å¾ˆå¥½åœ°å®Œæˆã€‚å…¶æ›´ä¾èµ–äºè¯å…¸ï¼Œè¿›è¡Œè¯å½¢å˜åŒ–å’ŒåŸå½¢çš„æ˜ å°„ï¼Œç”Ÿæˆè¯å…¸ä¸­çš„æœ‰æ•ˆè¯ã€‚</li>
<li>åœ¨ç»“æœä¸Šï¼Œè¯å¹²æå–å’Œè¯å½¢è¿˜åŸä¹Ÿæœ‰éƒ¨åˆ†åŒºåˆ«ã€‚è¯å¹²æå–çš„ç»“æœå¯èƒ½å¹¶ä¸æ˜¯å®Œæ•´çš„ã€å…·æœ‰æ„ä¹‰çš„è¯ï¼Œè€Œåªæ˜¯è¯çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚â€œrevivalâ€è¯å¹²æå–çš„ç»“æœä¸ºâ€œrevivâ€ï¼Œâ€œailinerâ€è¯å¹²æå–çš„ç»“æœä¸ºâ€œairlinâ€ã€‚è€Œç»è¯å½¢è¿˜åŸå¤„ç†åè·å¾—çš„ç»“æœæ˜¯å…·æœ‰ä¸€å®šæ„ä¹‰çš„ã€å®Œæ•´çš„è¯ï¼Œä¸€èˆ¬ä¸ºè¯å…¸ä¸­çš„æœ‰æ•ˆè¯ã€‚</li>
<li>åœ¨åº”ç”¨é¢†åŸŸä¸Šï¼ŒåŒæ ·å„æœ‰ä¾§é‡ã€‚è™½ç„¶äºŒè€…å‡è¢«åº”ç”¨äºä¿¡æ¯æ£€ç´¢å’Œæ–‡æœ¬å¤„ç†ä¸­ï¼Œä½†ä¾§é‡ä¸åŒã€‚<font color="orange"> <strong>è¯å¹²æå–æ›´å¤šè¢«åº”ç”¨äºä¿¡æ¯æ£€ç´¢é¢†åŸŸï¼Œå¦‚Solrã€Luceneç­‰ï¼Œç”¨äºæ‰©å±•æ£€ç´¢ï¼Œç²’åº¦è¾ƒç²—ã€‚è¯å½¢è¿˜åŸæ›´ä¸»è¦è¢«åº”ç”¨äºæ–‡æœ¬æŒ–æ˜ã€è‡ªç„¶è¯­è¨€å¤„ç†ï¼Œç”¨äºæ›´ç»†ç²’åº¦ã€æ›´ä¸ºå‡†ç¡®çš„æ–‡æœ¬åˆ†æå’Œè¡¨è¾¾</strong> </font></li>
</ul>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å…·ä½“åœ¨åº”ç”¨çš„æ—¶å€™ï¼Œä¸»è¦çœ‹ä»»åŠ¡<strong>æ›´å¼ºè°ƒç²¾åº¦è¿˜æ˜¯å¬å›</strong>ï¼Œç„¶åé€‰æ‹©é€‚åˆçš„æ–¹æ³•~</p>
]]></content>
      <categories>
        <category>Algorithms</category>
      </categories>
      <tags>
        <tag>stemming</tag>
        <tag>è¯å¹²æå–</tag>
        <tag>è¯å½¢è¿˜åŸ</tag>
        <tag>lemmatization</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸€æ–‡ææ‡‚NLpä¸­çš„å¯¹æŠ—è®­ç»ƒ</title>
    <url>/2020/11/23/%E4%B8%80%E6%96%87%E6%90%9E%E6%87%82NLp%E4%B8%AD%E7%9A%84%E5%AF%B9%E6%8A%97%E8%AE%AD%E7%BB%83/</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡è½¬è‡ªï¼šærumor</p>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzA5MjEyNDMxOQ==&amp;mid=2247483956&amp;idx=1&amp;sn=49d079e4cd785cb4739f660d72468235&amp;scene=21#wechat_redirect" target="_blank" rel="noopener">https://mp.weixin.qq.com/s?__biz=MzA5MjEyNDMxOQ==&amp;mid=2247483956&amp;idx=1&amp;sn=49d079e4cd785cb4739f660d72468235&amp;scene=21#wechat_redirect</a></p>
</blockquote>
<p><br></p>
<blockquote>
<p>æœ¬æ–‡ä¸»è¦ä¸²çƒ§äº†FGSM, FGM, PGD, FreeAT, YOPO, FreeLB, SMARTè¿™å‡ ç§å¯¹æŠ—è®­ç»ƒæ–¹æ³•ï¼Œå¸Œæœ›èƒ½ä½¿å„ä½å¤§ä½¬ç‚¼å‡ºçš„ä¸¹è¯æ›´åŠ åœ†æ¶¦æœ‰å…‰æ³½ï¼Œä¸€é¢—æ°¸æµä¼ </p>
</blockquote>
<h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p><strong>å¯¹æŠ—è®­ç»ƒæ˜¯ä¸€ç§å¼•å…¥å™ªå£°çš„è®­ç»ƒæ–¹å¼ï¼Œå¯ä»¥å¯¹å‚æ•°è¿›è¡Œæ­£åˆ™åŒ–ï¼Œæå‡æ¨¡å‹é²æ£’æ€§å’Œæ³›åŒ–èƒ½åŠ›ã€‚</strong></p>
<p>å¯¹æŠ—è®­ç»ƒçš„å‡è®¾æ˜¯ï¼šç»™è¾“å…¥åŠ ä¸Šæ‰°åŠ¨ä¹‹åï¼Œè¾“å‡ºåˆ†å¸ƒå’ŒåŸYçš„åˆ†å¸ƒä¸€è‡´</p>
<p>æœ‰ç›‘ç£çš„æ•°æ®ä¸‹ä½¿ç”¨äº¤å‰ç†µä½œä¸ºæŸå¤±ï¼š</p>
<a id="more"></a>
<p>åŠç›‘ç£æ•°æ®ä¸‹å¯è®¡ç®—KLæ•£åº¦ï¼š</p>
<p>æ‰°åŠ¨å¦‚ä½•å¾—æ¥å‘¢ï¼Ÿè¿™éœ€è¦å¯¹æŠ—çš„æ€æƒ³ï¼Œå³<strong>å¾€å¢å¤§æŸå¤±çš„æ–¹å‘å¢åŠ æ‰°åŠ¨</strong></p>
<p>æœ‰ç›‘ç£ä¸‹ï¼š</p>
<p>åŠç›‘ç£ä¸‹ï¼š</p>
<p>thetaä¸Šé¢ä¸€ä¸ªå°–å„¿ä»£è¡¨çš„æ˜¯å¸¸æ•°ã€‚ç›®çš„æ˜¯è¯´åœ¨è®¡ç®—å¯¹æŠ—æ‰°åŠ¨æ—¶è™½ç„¶è®¡ç®—äº†æ¢¯åº¦ï¼Œä½†ä¸å¯¹å‚æ•°è¿›è¡Œæ›´æ–°ï¼Œ<strong>å› ä¸ºå½“å‰å¾—åˆ°çš„å¯¹æŠ—æ‰°åŠ¨æ˜¯å¯¹æ—§å‚æ•°æœ€ä¼˜çš„</strong>ã€‚ä¸ç†è§£çš„åŒå­¦å¯ä»¥è‡ªå·±çœ‹ä¸‹ä¼ªä»£ç ä½“ä¼šä¸€ä¸‹ã€‚</p>
<p>ç”¨ä¸€å¥è¯å½¢å®¹å¯¹æŠ—è®­ç»ƒçš„æ€è·¯ï¼Œå°±æ˜¯<strong>åœ¨è¾“å…¥ä¸Šè¿›è¡Œæ¢¯åº¦ä¸Šå‡(å¢å¤§loss)ï¼Œåœ¨å‚æ•°ä¸Šè¿›è¡Œæ¢¯åº¦ä¸‹é™(å‡å°loss)</strong>ã€‚ç”±äºè¾“å…¥ä¼šè¿›è¡Œembedding lookupï¼Œæ‰€ä»¥<strong>å®é™…çš„åšæ³•æ˜¯åœ¨embedding tableä¸Šè¿›è¡Œæ¢¯åº¦ä¸Šå‡</strong>ã€‚</p>
<p>æ¥ä¸‹æ¥ä»‹ç»ä¸åŒçš„æ–¹æ³•ï¼Œåç»­æ–¹æ³•<strong>ä¼˜åŒ–çš„ä¸»è¦æ–¹å‘æœ‰ä¸¤ç‚¹ï¼šå¾—åˆ°æ›´ä¼˜çš„æ‰°åŠ¨ &amp; æå‡è®­ç»ƒé€Ÿåº¦</strong></p>
<h3 id="FGSM-Fast-Gradient-Sign-Method-ICLR2015"><a href="#FGSM-Fast-Gradient-Sign-Method-ICLR2015" class="headerlink" title="FGSM (Fast Gradient Sign Method): ICLR2015"></a>FGSM (Fast Gradient Sign Method): ICLR2015</h3><p>FGSMæ˜¯Goodfellowæå‡ºå¯¹æŠ—è®­ç»ƒæ—¶çš„æ–¹æ³•ï¼Œå‡è®¾å¯¹äºè¾“å…¥çš„æ¢¯åº¦ä¸ºï¼š</p>
<p>é‚£æ‰°åŠ¨è‚¯å®šæ˜¯æ²¿ç€æ¢¯åº¦çš„æ–¹å‘å¾€æŸå¤±å‡½æ•°çš„æå¤§å€¼èµ°ï¼š</p>
<h3 id="FGM-Fast-Gradient-Method-ICLR2017"><a href="#FGM-Fast-Gradient-Method-ICLR2017" class="headerlink" title="FGM (Fast Gradient Method): ICLR2017"></a>FGM (Fast Gradient Method): ICLR2017</h3><p>FSGMæ˜¯æ¯ä¸ªæ–¹å‘ä¸Šéƒ½èµ°ç›¸åŒçš„ä¸€æ­¥ï¼ŒGoodfellowåç»­æå‡ºçš„FGMåˆ™æ˜¯æ ¹æ®å…·ä½“çš„æ¢¯åº¦è¿›è¡Œscaleï¼Œå¾—åˆ°æ›´å¥½çš„å¯¹æŠ—æ ·æœ¬ï¼š</p>
<p>ä¼ªä»£ç ï¼š</p>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å¯¹äºæ¯ä¸ªx:  1.è®¡ç®—xçš„å‰å‘lossã€åå‘ä¼ æ’­å¾—åˆ°æ¢¯åº¦  2.æ ¹æ®embeddingçŸ©é˜µçš„æ¢¯åº¦è®¡ç®—å‡ºrï¼Œå¹¶åŠ åˆ°å½“å‰embeddingä¸Šï¼Œç›¸å½“äºx+r  3.è®¡ç®—x+rçš„å‰å‘lossï¼Œåå‘ä¼ æ’­å¾—åˆ°å¯¹æŠ—çš„æ¢¯åº¦ï¼Œç´¯åŠ åˆ°(1)çš„æ¢¯åº¦ä¸Š  4.å°†embeddingæ¢å¤ä¸º(1)æ—¶çš„å€¼  5.æ ¹æ®(3)çš„æ¢¯åº¦å¯¹å‚æ•°è¿›è¡Œæ›´æ–°</span><br></pre></td></tr></table></figure>
<h3 id="PGD-Projected-Gradient-Descent-ICLR2018"><a href="#PGD-Projected-Gradient-Descent-ICLR2018" class="headerlink" title="PGD (Projected Gradient Descent): ICLR2018"></a>PGD (Projected Gradient Descent): ICLR2018</h3><p>FGMç›´æ¥é€šè¿‡epsilonå‚æ•°ä¸€ä¸‹å­ç®—å‡ºäº†å¯¹æŠ—æ‰°åŠ¨ï¼Œè¿™æ ·å¾—åˆ°çš„å¯èƒ½ä¸æ˜¯æœ€ä¼˜çš„ã€‚å› æ­¤PGDè¿›è¡Œäº†æ”¹è¿›ï¼Œå¤šè¿­ä»£å‡ æ¬¡ï¼Œæ…¢æ…¢æ‰¾åˆ°æœ€ä¼˜çš„æ‰°åŠ¨ã€‚</p>
<p>å¼•ç”¨[1]ï¼š</p>
<blockquote>
<p>FGMç®€å•ç²—æš´çš„â€œä¸€æ­¥åˆ°ä½â€ï¼Œå¯èƒ½èµ°ä¸åˆ°çº¦æŸå†…çš„æœ€ä¼˜ç‚¹ã€‚PGDåˆ™æ˜¯â€œå°æ­¥èµ°ï¼Œå¤šèµ°å‡ æ­¥â€ï¼Œå¦‚æœèµ°å‡ºäº†æ‰°åŠ¨åŠå¾„ä¸ºepsilonçš„ç©ºé—´ï¼Œå°±æ˜ å°„å›â€œçƒé¢â€ä¸Šï¼Œä»¥ä¿è¯æ‰°åŠ¨ä¸è¦è¿‡å¤§</p>
</blockquote>
<p>ä¸”</p>
<p>ä¼ªä»£ç ï¼š</p>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å¯¹äºæ¯ä¸ªx:  1.è®¡ç®—xçš„å‰å‘lossã€åå‘ä¼ æ’­å¾—åˆ°æ¢¯åº¦å¹¶å¤‡ä»½  å¯¹äºæ¯æ­¥t:      2.æ ¹æ®embeddingçŸ©é˜µçš„æ¢¯åº¦è®¡ç®—å‡ºrï¼Œå¹¶åŠ åˆ°å½“å‰embeddingä¸Šï¼Œç›¸å½“äºx+r(è¶…å‡ºèŒƒå›´åˆ™æŠ•å½±å›epsilonå†…)      3.tä¸æ˜¯æœ€åä¸€æ­¥: å°†æ¢¯åº¦å½’0ï¼Œæ ¹æ®1çš„x+rè®¡ç®—å‰åå‘å¹¶å¾—åˆ°æ¢¯åº¦      4.tæ˜¯æœ€åä¸€æ­¥: æ¢å¤(1)çš„æ¢¯åº¦ï¼Œè®¡ç®—æœ€åçš„x+rå¹¶å°†æ¢¯åº¦ç´¯åŠ åˆ°(1)ä¸Š  5.å°†embeddingæ¢å¤ä¸º(1)æ—¶çš„å€¼  6.æ ¹æ®(4)çš„æ¢¯åº¦å¯¹å‚æ•°è¿›è¡Œæ›´æ–°</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å¾ªç¯ä¸­ræ˜¯é€æ¸ç´¯åŠ çš„ï¼Œè¦æ³¨æ„çš„æ˜¯<strong>æœ€åæ›´æ–°å‚æ•°åªä½¿ç”¨æœ€åä¸€ä¸ªx+rç®—å‡ºæ¥çš„æ¢¯åº¦</strong>ã€‚</p>
<h3 id="FreeAT-Free-Adversarial-Training-NIPS2019"><a href="#FreeAT-Free-Adversarial-Training-NIPS2019" class="headerlink" title="FreeAT (Free Adversarial Training): NIPS2019"></a>FreeAT (Free Adversarial Training): NIPS2019</h3><p>ä»FGSMåˆ°PGDï¼Œä¸»è¦æ˜¯ä¼˜åŒ–å¯¹æŠ—æ‰°åŠ¨çš„è®¡ç®—ï¼Œè™½ç„¶å–å¾—äº†æ›´å¥½çš„æ•ˆæœï¼Œä½†è®¡ç®—é‡ä¹Ÿä¸€æ­¥æ­¥å¢åŠ ã€‚å¯¹äºæ¯ä¸ªæ ·æœ¬ï¼ŒFGSMå’ŒFGMéƒ½åªç”¨è®¡ç®—ä¸¤æ¬¡ï¼Œä¸€æ¬¡æ˜¯è®¡ç®—xçš„å‰åå‘ï¼Œä¸€æ¬¡æ˜¯è®¡ç®—x+rçš„å‰åå‘ã€‚è€ŒPGDåˆ™è®¡ç®—äº†K+1æ¬¡ï¼Œæ¶ˆè€—äº†æ›´å¤šçš„è®¡ç®—èµ„æºã€‚å› æ­¤FreeATè¢«æäº†å‡ºæ¥ï¼Œåœ¨PGDçš„åŸºç¡€ä¸Šè¿›è¡Œè®­ç»ƒé€Ÿåº¦çš„ä¼˜åŒ–ã€‚</p>
<p>FreeATçš„æ€æƒ³æ˜¯åœ¨å¯¹æ¯ä¸ªæ ·æœ¬xè¿ç»­é‡å¤mæ¬¡è®­ç»ƒï¼Œè®¡ç®—ræ—¶å¤ç”¨ä¸Šä¸€æ­¥çš„æ¢¯åº¦ï¼Œä¸ºäº†ä¿è¯é€Ÿåº¦ï¼Œæ•´ä½“epochä¼šé™¤ä»¥mã€‚rçš„æ›´æ–°å…¬å¼ä¸ºï¼š</p>
<p>ä¼ªä»£ç ï¼š</p>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">åˆå§‹åŒ–r=0å¯¹äºepoch=1...N/m:  å¯¹äºæ¯ä¸ªx:      å¯¹äºæ¯æ­¥m:        1.åˆ©ç”¨ä¸Šä¸€æ­¥çš„rï¼Œè®¡ç®—x+rçš„å‰åå‘ï¼Œå¾—åˆ°æ¢¯åº¦        2.æ ¹æ®æ¢¯åº¦æ›´æ–°å‚æ•°        3.æ ¹æ®æ¢¯åº¦æ›´æ–°r</span><br></pre></td></tr></table></figure>
<p>ç¼ºç‚¹ï¼šFreeLBæŒ‡å‡ºï¼ŒFreeATçš„é—®é¢˜åœ¨äºæ¯æ¬¡çš„rå¯¹äºå½“å‰çš„å‚æ•°éƒ½æ˜¯æ¬¡ä¼˜çš„ï¼ˆæ— æ³•æœ€å¤§åŒ–lossï¼‰ï¼Œå› ä¸ºå½“å‰ræ˜¯ç”±r(t-1)å’Œtheta(t-1)è®¡ç®—å‡ºæ¥çš„ï¼Œæ˜¯å¯¹äºtheta(t-1)çš„æœ€ä¼˜ã€‚</p>
<p>æ³¨ï¼š</p>
<p>1.è®ºæ–‡ä¸­æä¾›ä¼ªä»£ç ï¼Œä½†æºç ä¸­å¥½åƒå¯¹1æ­¥è¾“å…¥åšäº†å½’ä¸€åŒ–è®ºæ–‡ä¸­å¹¶æ²¡æœ‰æåˆ°</p>
<p>2.ä¸ªäººè®¤ä¸ºå¯ä»¥æŠŠFreeATå½“æˆæ‰§è¡Œmæ¬¡çš„FGSMï¼Œæœ€å¼€å§‹r=0ï¼Œç¬¬ä¸€æ¬¡æ›´æ–°çš„æ˜¯xçš„æ¢¯åº¦ï¼Œä¹‹åå¼€å§‹è¿­ä»£æ›´æ–°rï¼Œåˆ™æ ¹æ®x+rçš„æ¢¯åº¦æ›´æ–°å‚æ•°ã€‚ä½†ä»£ç ä¸­æœ‰ä¸ªé—®é¢˜æ˜¯råªåœ¨æœ€å¼€å§‹åˆå§‹åŒ–ï¼Œå¦‚æœè¿­ä»£åˆ°æ–°çš„æ ·æœ¬x2ï¼Œä¹Ÿæ˜¯æ ¹æ®ä¸Šä¸ªæ ·æœ¬çš„rè¿›è¡Œæ›´æ–°çš„ï¼Œè¿™é‡Œæˆ‘æœ‰äº›ç–‘é—®ï¼Œå¸Œæœ›æ‡‚çš„å¤§ä½¬èµæ•™ä¸‹ï½</p>
<p>ä»£ç ï¼š<a href="https://github.com/mahyarnajibi/FreeAdversarialTraining/blob/d70774030871fa3207e09ce8528c1b84cd690603/main_free.py#L160" target="_blank" rel="noopener">https://github.com/mahyarnajibi/FreeAdversarialTraining/blob/d70774030871fa3207e09ce8528c1b84cd690603/main_free.py#L160</a></p>
<h3 id="YOPO-You-Only-Propagate-Once-NIPS2019"><a href="#YOPO-You-Only-Propagate-Once-NIPS2019" class="headerlink" title="YOPO (You Only Propagate Once): NIPS2019"></a>YOPO (You Only Propagate Once): NIPS2019</h3><p>ä»£ç ï¼š<a href="https://github.com/a1600012888/YOPO-You-Only-Propagate-Once" target="_blank" rel="noopener">https://github.com/a1600012888/YOPO-You-Only-Propagate-Once</a></p>
<p>YOPOçš„ç›®æ ‡ä¹Ÿæ˜¯æå‡PGDçš„æ•ˆç‡ï¼Œè¿™ç¯‡æ–‡ç« éœ€è¦çš„ç†è®ºçŸ¥è¯†æ¯”è¾ƒé›„åšï¼Œè¿™é‡Œåªç®€è¦ä»‹ç»ä¸€ä¸‹ã€‚</p>
<p>æ„Ÿå…´è¶£åˆå•ƒä¸ä¸‹æ¥åŸè®ºæ–‡çš„åŒå­¦ï¼ˆæ¯”å¦‚æˆ‘ï¼‰å¯ä»¥å‚è€ƒ[9]ï¼Œå¦‚æœ‰è§£è¯»é”™è¯¯æ¬¢è¿æŒ‡å‡ºï½</p>
<p>æå¤§å€¼åŸç†PMP(Pontryaginâ€™s maximum principle)æ˜¯optimizerçš„ä¸€ç§ï¼Œå®ƒå°†ç¥ç»ç½‘ç»œçœ‹ä½œåŠ¨åŠ›å­¦ç³»ç»Ÿã€‚è¿™ä¸ªæ–¹æ³•çš„ä¼˜ç‚¹æ˜¯åœ¨ä¼˜åŒ–ç½‘ç»œå‚æ•°æ—¶ï¼Œå±‚ä¹‹é—´æ˜¯è§£è—•çš„ã€‚é€šè¿‡è¿™ä¸ªæ€æƒ³ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³åˆ°ï¼Œæ—¢ç„¶æ‰°åŠ¨æ˜¯åŠ åœ¨embeddingå±‚çš„ï¼Œä¸ºä»€ä¹ˆæ¯æ¬¡è¿˜è¦è®¡ç®—å®Œæ•´çš„å‰åå‘ä¼ æ’­å‘¢ï¼Ÿ</p>
<p>åŸºäºè¿™ä¸ªæƒ³æ³•ï¼Œä½œè€…æƒ³å¤ç”¨åå‡ å±‚çš„æ¢¯åº¦ï¼Œå‡è®¾pä¸ºå®šå€¼ï¼š</p>
<p>åˆ™å¯¹rçš„æ›´æ–°å°±å¯ä»¥å˜ä¸º</p>
<p>æˆ‘ä»¬å¯ä»¥å…ˆå†™å‡ºYOPOçš„æ¢¯åº¦ä¸‹é™ç‰ˆæœ¬ï¼š</p>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å¯¹äºæ¯ä¸ªæ ·æœ¬xåˆå§‹åŒ–r(1,0)å¯¹äºj=1,2,...,m:  1.æ ¹æ®r(j,0),è®¡ç®—p  å¯¹äºs=0,1,...,n-1:    2.è®¡ç®—r(j,s+1)  3.å¦r(j+1,0)=r(j,n)</span><br></pre></td></tr></table></figure>
<p>ä½œè€…åˆæå‡ºäº†PMPç‰ˆæœ¬çš„YOPOï¼Œå¹¶è¯æ˜SGDçš„YOPOæ˜¯PMPç‰ˆçš„ä¸€ç§ç‰¹æ®Šå½¢å¼ã€‚è¿™æ ·æ¯æ¬¡è¿­ä»£rå°±åªç”¨åˆ°embeddingçš„æ¢¯åº¦å°±å¯ä»¥äº†ã€‚</p>
<p>å¼•ç”¨[9]:</p>
<blockquote>
<p><strong>è™½ç„¶YOPO-m-nåªå®Œæˆäº†mæ¬¡å®Œæ•´çš„æ­£åå‘ä¼ æ’­ï¼Œä½†æ˜¯å´å®ç°äº†m*næ¬¡æ¢¯åº¦ä¸‹é™</strong>ã€‚è€ŒPGD-rç®—æ³•å®Œæˆræ¬¡å®Œæ•´çš„æ­£åå‘ä¼ æ’­å´åªèƒ½å®ç°ræ¬¡æ¢¯åº¦ä¸‹é™ã€‚è¿™æ ·çœ‹æ¥ï¼ŒYOPO-m-nç®—æ³•çš„æ•ˆç‡æ˜æ˜¾æ›´é«˜ï¼Œè€Œå®éªŒä¹Ÿè¡¨æ˜ï¼Œ<strong>åªè¦ä½¿å¾—m*nç•¥å¤§äºrï¼ŒYOPO-m-nçš„æ•ˆæœå°±èƒ½å¤Ÿä¸PGD-rç›¸åª²ç¾</strong>ã€‚</p>
</blockquote>
<p>ç„¶è€Œæ•…äº‹çš„åè½¬æ¥çš„å¤ªå¿«ï¼ŒFreeLBæŒ‡å‡ºYOPOä½¿ç”¨çš„å‡è®¾å¯¹äºReLU-basedç½‘ç»œä¸æˆç«‹ï¼š</p>
<blockquote>
<p>Interestingly, the analysis backing the extra update steps assumes a twice continuously differentiable loss, which does not hold for ReLU-based neural networks they experimented with, and thus the reasons for the success of such an algorithm remains obscure.</p>
</blockquote>
<p>åˆ«é—®äº†ï¼Œé—®å°±æ˜¯PMPï¼Œæ¥è·Ÿæˆ‘ä¸€èµ·è¿›å…¥ä¸‹ä¸€éƒ¨ä»½çš„å­¦ä¹ ã€‚</p>
<h3 id="FreeLB-Free-Large-Batch-ICLR2020"><a href="#FreeLB-Free-Large-Batch-ICLR2020" class="headerlink" title="FreeLB (Free Large-Batch): ICLR2020"></a>FreeLB (Free Large-Batch): ICLR2020</h3><p>FreeLBè®¤ä¸ºï¼ŒFreeATå’ŒYOPOå¯¹äºè·å¾—æœ€ä¼˜r (inner max)çš„è®¡ç®—éƒ½å­˜åœ¨é—®é¢˜ï¼Œå› æ­¤æå‡ºäº†ä¸€ç§ç±»ä¼¼PGDçš„æ–¹æ³•ã€‚åªä¸è¿‡PGDåªä½¿ç”¨äº†æœ€åä¸€æ­¥x+rè¾“å‡ºçš„æ¢¯åº¦ï¼Œè€ŒFreeLBå–äº†æ¯æ¬¡è¿­ä»£rè¾“å‡ºæ¢¯åº¦çš„å¹³å‡å€¼ï¼Œç›¸å½“äºæŠŠè¾“å…¥çœ‹ä½œä¸€ä¸ªKå€å¤§çš„è™šæ‹Ÿbatchï¼Œç”±[X+r1, X+r2, â€¦, X+rk]æ‹¼æ¥è€Œæˆã€‚å…·ä½“çš„å…¬å¼ä¸ºï¼š</p>
<p>ä¸ºäº†æ–¹ä¾¿å¯¹æ¯”ï¼Œå†è´´ä¸‹è®ºæ–‡ä¸­PGDçš„å…¬å¼ï¼š</p>
<p>FreeLBå’ŒPGDä¸»è¦æœ‰ä¸¤ç‚¹åŒºåˆ«ï¼š</p>
<p>1.PGDæ˜¯è¿­ä»£Kæ¬¡råå–æœ€åä¸€æ¬¡æ‰°åŠ¨çš„æ¢¯åº¦æ›´æ–°å‚æ•°ï¼ŒFreeLBæ˜¯å–Kæ¬¡è¿­ä»£ä¸­çš„å¹³å‡æ¢¯åº¦</p>
<p>2.PGDçš„æ‰°åŠ¨èŒƒå›´éƒ½åœ¨epsilonå†…ï¼Œå› ä¸ºä¼ªä»£ç ç¬¬3æ­¥å°†æ¢¯åº¦å½’0äº†ï¼Œæ¯æ¬¡æŠ•å½±éƒ½ä¼šå›åˆ°ä»¥ç¬¬1æ­¥xä¸ºåœ†å¿ƒï¼ŒåŠå¾„æ˜¯epsilonçš„åœ†å†…ï¼Œè€ŒFreeLBæ¯æ¬¡çš„xéƒ½ä¼šè¿­ä»£ï¼Œæ‰€ä»¥rçš„èŒƒå›´æ›´åŠ çµæ´»ï¼Œæ›´å¯èƒ½æ¥è¿‘å±€éƒ¨æœ€ä¼˜ï¼š</p>
<p>FreeLBçš„ä¼ªä»£ç ä¸ºï¼š</p>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å¯¹äºæ¯ä¸ªx:  1.é€šè¿‡å‡åŒ€åˆ†å¸ƒåˆå§‹åŒ–rï¼Œæ¢¯åº¦gä¸º0  å¯¹äºæ¯æ­¥t=1...K:      2.æ ¹æ®x+rè®¡ç®—å‰åå‘ï¼Œç´¯è®¡æ¢¯åº¦g      3.æ›´æ–°r  4.æ ¹æ®g/Kæ›´æ–°æ¢¯åº¦</span><br></pre></td></tr></table></figure>
<p>è®ºæ–‡ä¸­è¿˜æŒ‡å‡ºäº†å¾ˆé‡è¦çš„ä¸€ç‚¹ï¼Œå°±æ˜¯<strong>å¯¹æŠ—è®­ç»ƒå’Œdropoutä¸èƒ½åŒæ—¶ä½¿ç”¨</strong>ï¼ŒåŠ ä¸Šdropoutç›¸å½“äºæ”¹å˜äº†ç½‘ç»œç»“æ„ï¼Œä¼šå½±å“rçš„è®¡ç®—ã€‚å¦‚æœè¦ç”¨çš„è¯éœ€è¦åœ¨<strong>Kæ­¥ä¸­éƒ½ä½¿ç”¨åŒä¸€ä¸ªmask</strong>ã€‚</p>
<h3 id="SMART-SMoothness-inducing-Adversarial-Regularization"><a href="#SMART-SMoothness-inducing-Adversarial-Regularization" class="headerlink" title="SMART (SMoothness-inducing Adversarial Regularization)"></a>SMART (SMoothness-inducing Adversarial Regularization)</h3><p>SMARTè®ºæ–‡ä¸­æå‡ºäº†ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<p>1.å¯¹æŠ—æ­£åˆ™ SMoothness-inducing Adversarial Regularizationï¼Œæå‡æ¨¡å‹é²æ£’æ€§</p>
<p>2.ä¼˜åŒ–ç®—æ³• Bregman proximal point optimizationï¼Œé¿å…ç¾éš¾æ€§é—å¿˜</p>
<p>æœ¬æ–‡åªä»‹ç»å…¶ä¸­çš„å¯¹æŠ—æ­£åˆ™æ–¹æ³•ã€‚</p>
<p>SMARTæå‡ºäº†ä¸¤ç§å¯¹æŠ—æ­£åˆ™æŸå¤±ï¼ŒåŠ åˆ°æŸå¤±å‡½æ•°ä¸­ï¼š</p>
<p>ç¬¬ä¸€ç§å‚è€ƒäº†åŠç›‘ç£å¯¹æŠ—è®­ç»ƒï¼Œå¯¹æŠ—çš„ç›®æ ‡æ˜¯æœ€å¤§åŒ–æ‰°åŠ¨å‰åçš„è¾“å‡ºï¼Œåœ¨åˆ†ç±»ä»»åŠ¡æ—¶lossé‡‡ç”¨å¯¹ç§°çš„KLæ•£åº¦ï¼Œå›å½’ä»»åŠ¡æ—¶ä½¿ç”¨å¹³æ–¹æŸå¤±æŸå¤±ï¼š</p>
<p>ç¬¬äºŒç§æ–¹æ³•æ¥è‡ªDeepMindçš„NIPS2019[8]ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯è®©æ¨¡å‹å­¦ä¹ åˆ°çš„æµè¡Œæ›´å…‰æ»‘ï¼Œå³è®©lossåœ¨è®­ç»ƒæ•°æ®å‘ˆçº¿æ€§å˜åŒ–ï¼Œå¢å¼ºå¯¹æ‰°åŠ¨çš„æŠµæŠ—èƒ½åŠ›ã€‚ä½œè€…è®¤ä¸ºï¼Œå¦‚æœlossæµè¡Œè¶³å¤Ÿå¹³æ»‘ï¼Œé‚£l(x+r)å¯ä»¥ç”¨ä¸€é˜¶æ³°å‹’å±•å¼€è¿›è¡Œè¿‘ä¼¼ï¼Œå› æ­¤ç”¨æ¥å¯¹æŠ—çš„æ‰°åŠ¨éœ€è¦æœ€å¤§åŒ–l(x+r)å’Œä¸€é˜¶æ³°å‹’å±•å¼€çš„è·ç¦»ï¼š</p>
<p>SMARTçš„ç®—æ³•å’ŒPGDç›¸ä¼¼ï¼Œä¹Ÿæ˜¯è¿­ä»£Kæ­¥æ‰¾åˆ°æœ€ä¼˜rï¼Œç„¶åæ›´æ–°æ¢¯åº¦ã€‚</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æŠŠæœ€è¿‘çš„ä¸€äº›å¯¹æŠ—è®­ç»ƒæ–¹æ³•æ€»ç»“å‡ºæ¥ï¼Œå¯ä»¥çœ‹åˆ°è¶‹åŠ¿ä»â€œä¼˜åŒ–PGDçš„é€Ÿåº¦â€åˆå›åˆ°äº†â€œæ‰¾å¯»æœ€ä¼˜æ‰°åŠ¨â€ï¼Œä¸ªäººä¹Ÿæ¯”è¾ƒè®¤åŒï¼Œè®­ç»ƒé€Ÿåº¦æ…¢ä¸€äº›å¯¹äºæ™®é€šæ¨¡å‹è¿˜æ˜¯å¯ä»¥æ¥å—çš„ï¼Œä¸»è¦è¿˜æ˜¯çœ‹æœ€ç»ˆçš„æ•ˆæœæœ‰æ²¡æœ‰æå‡ã€‚ä¹‹å‰è‡ªå·±è¯•è¿‡FGMå’ŒPGDï¼ŒFGMæœ‰è½»å¾®æå‡ï¼Œä½†PGDæ²¡æœ‰ï¼Œåº”è¯¥éœ€è¦åœ¨è¶…å‚æ•°ä¸Šè¿›è¡Œè°ƒæ•´ã€‚FreeLBå’ŒSMARTåœ¨GLUEæ¦œå•ä¸Šéƒ½æœ‰å‡ºç°è¿‡ï¼Œç›¸ä¿¡ä¹‹åå¯¹æŠ—è®­ç»ƒä¹Ÿæ˜¯æ ‡é…äº†ï¼Œåç­‰å¾®è½¯æ”¾å‡ºæºç ã€‚</p>
]]></content>
      <categories>
        <category>Machine Learning</category>
      </categories>
      <tags>
        <tag>NLP</tag>
        <tag>adversarial learning</tag>
      </tags>
  </entry>
  <entry>
    <title>ç»™BERTåŠ ä¸€ä¸ªlosså°±èƒ½ç¨³å®šæå‡ï¼Ÿæ–¯å¦ç¦+Facebookæœ€æ–°åŠ›ä½œï¼</title>
    <url>/2020/11/23/%E7%BB%99BERT%E5%8A%A0%E4%B8%80%E4%B8%AAloss%E5%B0%B1%E8%83%BD%E7%A8%B3%E5%AE%9A%E6%8F%90%E5%8D%87%EF%BC%9F%E6%96%AF%E5%9D%A6%E7%A6%8F-Facebook%E6%9C%80%E6%96%B0%E5%8A%9B%E4%BD%9C%EF%BC%81/</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡è½¬è½½è‡ªï¼š ærumor</p>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzA5MjEyNDMxOQ==&amp;mid=2247484387&amp;idx=1&amp;sn=7f9eae754af0c3ddf9adce7a895a977e&amp;chksm=9070a613a7072f05a31246a6b048ee3c7d65062d49b14d4145384c17a7553b44b7bf7e7ff828&amp;mpshare=1&amp;scene=24&amp;srcid=1107993ELlp55ob4rmegV26m&amp;sharer_sharetime=1604738440808&amp;sharer_shareid=03b37d2da63d394d243dc8d08e8bee5f&amp;key=ca9d6dcc40175cc992ed8e7bfa4f484ca7b3c118a0572637d8b0b30bc2d229ce920b2ec0e5e9171fdbc7ec12f00a9845e0c543fa2510c3e5329a991a3f26f6492351b9a165569d42982fcaab5d780503114221a20eca6cc7c7e862001fc3b7e04a5e02854b769b2d5f85b5f006535e2a1a1f820649d49832fabb10c5395769fe&amp;ascene=14&amp;uin=MjExODc0NDkwMg%3D%3D&amp;devicetype=Windows+10+x64&amp;version=6300002f&amp;lang=zh_CN&amp;exportkey=AXogFzo0WzlA%2BmWvocfsXHk%3D&amp;pass_ticket=JMu0tZ8lnp%2FRuz1okqXGKHCSZV44b5P1Q0yYYVTQAtVTaM8NrMmb5T6PBnHGy2oL&amp;wx_header=0" target="_blank" rel="noopener">https://mp.weixin.qq.com/s?__biz=MzA5MjEyNDMxOQ==&amp;mid=2247484387&amp;idx=1&amp;sn=7f9eae754af0c3ddf9adce7a895a977e&amp;chksm=9070a613a7072f05a31246a6b048ee3c7d65062d49b14d4145384c17a7553b44b7bf7e7ff828&amp;mpshare=1&amp;scene=24&amp;srcid=1107993ELlp55ob4rmegV26m&amp;sharer_sharetime=1604738440808&amp;sharer_shareid=03b37d2da63d394d243dc8d08e8bee5f&amp;key=ca9d6dcc40175cc992ed8e7bfa4f484ca7b3c118a0572637d8b0b30bc2d229ce920b2ec0e5e9171fdbc7ec12f00a9845e0c543fa2510c3e5329a991a3f26f6492351b9a165569d42982fcaab5d780503114221a20eca6cc7c7e862001fc3b7e04a5e02854b769b2d5f85b5f006535e2a1a1f820649d49832fabb10c5395769fe&amp;ascene=14&amp;uin=MjExODc0NDkwMg%3D%3D&amp;devicetype=Windows+10+x64&amp;version=6300002f&amp;lang=zh_CN&amp;exportkey=AXogFzo0WzlA%2BmWvocfsXHk%3D&amp;pass_ticket=JMu0tZ8lnp%2FRuz1okqXGKHCSZV44b5P1Q0yYYVTQAtVTaM8NrMmb5T6PBnHGy2oL&amp;wx_header=0</a></p>
</blockquote>
<p>å…³æ³¨CVé¢†åŸŸçš„å°ä¼™ä¼´ä¸€å®šéƒ½è®°å¾—Hintonå›¢é˜Ÿåœ¨å¹´åˆæå‡ºçš„SimCLR[1]ï¼Œé‡‡ç”¨è‡ªç›‘ç£çš„å¯¹æ¯”å­¦ä¹ æ–¹æ³•è¿›è¡Œencoderçš„è®­ç»ƒï¼Œå„ç§ç¢¾å‹ä¹‹å‰çš„æ¨¡å‹ã€‚æ‰€ä»¥ä»Šå¹´æˆ‘ä¸€ç›´åœ¨ç­‰æŸä¸ªå¤§æ‹›ï¼Œç»ˆäºåœ¨20å¹´çš„å°¾å·´çœ‹åˆ°äº†ä¸€ä¸å¸Œæœ›ã€‚</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/y3eXggUiaulKxPfjTNakIdlo21VibGTDStFIxemGWIVEJYUo0CjBGCENBjtz5icxShn7huiapJpRvL9qf566fiaghbA/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>ä»Šå¤©è¦ä»‹ç»çš„è¿™ç¯‡å·¥ä½œæ¥è‡ªæ–¯å¦ç¦å’ŒFacebook AIï¼Œä½œè€…åœ¨BERTåˆ†ç±»ä»»åŠ¡çš„ç²¾è°ƒé˜¶æ®µåŠ å…¥äº†å¯¹æ¯”å­¦ä¹ çš„lossï¼Œåœ¨å„ä¸ªä»»åŠ¡ä¸Šéƒ½è·å¾—äº†å¾ˆç¨³å®šçš„æå‡ï¼š</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/y3eXggUiaulKxPfjTNakIdlo21VibGTDStAW2lmSQUp1HzEzk6EkXiaRZeDRTW7jPIhnuBJcPv3mgRZ3QAnm7FHsg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>ä¸Šå›¾ä¸­CEè¡¨ç¤ºäº¤å‰ç†µï¼ŒSCLè¡¨ç¤ºSupervised Contrastive Learningã€‚å®è¯è¯´ç»“æœå¹¶ä¸å¤ŸæƒŠè‰³ï¼Œç”¨å¯¹æŠ—å­¦ä¹ ä¹Ÿå·®ä¸å¤šå¯ä»¥åšåˆ°ï¼Œè®©æˆ‘æƒŠå–œçš„æ˜¯åœ¨Few-shotä¸Šçš„æ•ˆæœï¼š</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/y3eXggUiaulKxPfjTNakIdlo21VibGTDStS1XJA4g2Rians3ScwrPrJghn4Lbo89FTRkCdmRHs4uDWDgbhdvqnqzQ/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>Nè¡¨ç¤ºè®­ç»ƒæ ·æœ¬æ•°é‡ã€‚å¯ä»¥çœ‹åˆ°N=20æ—¶QNLIä¸Šæœ‰10ä¸ªç‚¹ä¹‹å¤šçš„æå‡ã€‚</p>
<p>ä¸‹é¢å°±è®©æˆ‘ä»¬æ¥èµ°è¿‘ç§‘å­¦ï¼Œçœ‹çœ‹SCLæ˜¯ä¸ªå•¥ç©æ„å„¿å­ï½</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è®ºæ–‡é¢˜ç›®ï¼šSupervised Contrastive Learning for Pre-trained Language Model Fine-tuningè®ºæ–‡é“¾æ¥ï¼šhttps://arxiv.org/abs/2011.01403</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="å¯¹æ¯”å­¦ä¹ "><a href="#å¯¹æ¯”å­¦ä¹ " class="headerlink" title="å¯¹æ¯”å­¦ä¹ "></a>å¯¹æ¯”å­¦ä¹ </h3><p>å¯¹æ¯”å­¦ä¹ çš„æ ¸å¿ƒæ€æƒ³ï¼Œå°±æ˜¯è®©æ¨¡å‹å­¦ä¹ <strong>å¦‚ä½•å°†æ­£æ ·æœ¬å’Œå…¶ä»–è´Ÿæ ·æœ¬åŒºåˆ«å¼€æ¥ï¼ŒæŠ“ä½æ ·æœ¬çš„æœ¬è´¨ç‰¹å¾ï¼Œè€Œä¸æ˜¯æŠŠæ¯ä¸ªç»†èŠ‚éƒ½è€ƒè™‘åˆ°</strong>ã€‚æ‹¿äººæ¥ä¸¾ä¾‹ï¼Œå‡å¦‚æœ‰äººè®©ä½ å‡­ç©ºç”»ä¸€å¼ ä¸€ç¾å…ƒï¼Œä½ å¯èƒ½åªç”»æˆè¿™æ ·[2]ï¼š</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/y3eXggUiaulKxPfjTNakIdlo21VibGTDStHx7nG8z5mb77mhRy4BmNYe9s6Rwqz4TcLicmaCR9gpYs8FKibvNkPiaQQ/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>è€Œå¦‚æœç»™ä½ ä¸€å¼ ç¾å…ƒç…§ç€ä¸´æ‘¹ï¼Œå¯èƒ½è¿˜èƒ½ç”»å¥½çœ‹ç‚¹ï¼Œæ¯”å¦‚è¿™æ ·ï¼š</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/y3eXggUiaulKxPfjTNakIdlo21VibGTDStHHnFicc4QXic2IeP04iaMz2c67hx78PVCB7lLyvNmhceKBxqu6GVBBk4Q/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>æ‰€ä»¥è¯´æˆ‘ä»¬è®°ä½çš„ï¼Œä¸ä¸€å®šæ˜¯åƒç´ çº§åˆ«çš„ç‰¹å¾ï¼Œè€Œæ˜¯æ›´é«˜ç»´åº¦çš„ã€‚åœ¨è®­ç»ƒæ¨¡å‹æ—¶ï¼Œä¹Ÿä¸å¼ºæ±‚å®ƒä»¬æŠŠæ‰€æœ‰ä¿¡æ¯éƒ½ç¼–ç ï¼Œåªè¦ç»†è‡´åˆ°å¯ä»¥åŒºåˆ†æ•°æ®ä¸­çš„ä¸åŒæ ·æœ¬å°±å¯ä»¥ã€‚</p>
<p>å¦‚ä½•å®ç°å‘¢ï¼Ÿè¿™ä¸ªå°±ä½“ç°åœ¨ç›®æ ‡å‡½æ•°ä¸Šï¼š</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/y3eXggUiaulKxPfjTNakIdlo21VibGTDStsXfx4gvJClkpHyxzFW1sSD2RR1qre7UcaAZ6327pOicwRnG7AlAWYOg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>åœ¨è‡ªç›‘ç£çš„æƒ…å†µä¸‹ï¼Œå¯¹æ¯”å­¦ä¹ åˆ©ç”¨æ•°æ®å¢å¼ºæ–¹æ³•ï¼Œç»™æ¯ä¸ªè¾“å…¥æ ·æœ¬è¾“å…¥æ„å»ºå¦ä¸€ä¸ªview ä½œä¸ºæ­£ä¾‹ï¼Œå¹¶ä½¿ç”¨åŒbatchä¸‹å…¶ä»–æ ·æœ¬ä½œä¸ºè´Ÿä¾‹ï¼Œè¾¾åˆ°æ‹‰è¿‘æ­£ä¾‹æ‹‰å¼€è´Ÿä¾‹çš„â€œå¯¹æ¯”â€ç›®çš„ï¼š</p>
<p>æè¿°å¾—æ›´å…·ä½“ä¸€ç‚¹ï¼Œå°±æ˜¯æŠŠNä¸ªè¾“å…¥æ ·æœ¬å¢å¼ºåˆ°2Nä¸ªï¼Œç„¶åè¿›è¡Œ2Nåˆ†ç±»ï¼ˆå…¶ä¸­æœ‰2ä¸ªæ­£ä¾‹2N-2ä¸ªè´Ÿä¾‹ï¼‰ã€‚</p>
<p>P.S. å…³äºå¯¹æ¯”å­¦ä¹ åœ¨å›¾åƒé¢†åŸŸçš„è¿›å±•å¯ä»¥å‚è€ƒçŸ¥ä¹@Tobias Leeçš„æ–‡ç« [3]ã€‚</p>
<h3 id="Supervised-Contrastive-Learning"><a href="#Supervised-Contrastive-Learning" class="headerlink" title="Supervised Contrastive Learning"></a>Supervised Contrastive Learning</h3><p>ä¸Šæ–‡è®²äº†è‡ªç›‘ç£çš„å¯¹æ¯”å­¦ä¹ ä¸»è¦æ˜¯é ä¸€ä¸ªbatchå†…çš„æ ·æœ¬é—´ç›¸äº’å¯¹æ¯”ï¼Œé‚£æœ‰ç›‘ç£çš„æ•°æ®å¦‚ä½•æ›´å¥½åˆ©ç”¨å‘¢ï¼Ÿ</p>
<p>ä½œè€…å°±é’ˆå¯¹åˆ†ç±»ä»»åŠ¡è¿›è¡Œäº†ç ”ç©¶ã€‚åˆ†ç±»çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯æŠŠä¸åŒç±»åˆ«çš„æ ·æœ¬åˆ’åˆ†å¼€æ¥ï¼Œé€šå¸¸ä½¿ç”¨äº¤å‰ç†µä½œä¸ºæŸå¤±å‡½æ•°ã€‚ä½œè€…åˆ™æå‡ºäº†ä¸€ä¸ªæ–°çš„å¯¹æ¯”å­¦ä¹ loss SCLï¼Œ<strong>å°†åŒä¸€ç±»çš„æ ·æœ¬äº’ç›¸ä½œä¸ºæ­£ä¾‹ï¼Œä¸åŒç±»åˆ«çš„ä½œä¸ºè´Ÿä¾‹</strong>ã€‚ä»¥æ­¤è¾¾åˆ°æ‹‰è¿‘ç±»å†…æ ·æœ¬ã€æ‹‰å¼€ç±»é—´è·ç¦»çš„ç›®çš„ï¼š</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/y3eXggUiaulKxPfjTNakIdlo21VibGTDStZxubfzuicAGazsUOnuCue8cxQQq3fvj1UH3LickfwWOdZ0TSQia7YgsHg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>å…·ä½“çš„æŸå¤±è®¡ç®—æ–¹æ³•ä¸ºï¼ˆå³æ»‘å…¬ç¤ºï¼‰ï¼š</p>
<p>å…¶ä¸­æ˜¯æ­£ç¡®labelï¼Œæ˜¯å½’ä¸€åŒ–åçš„encoderè¾“å‡ºï¼Œæ˜¯ä¸€ä¸ªæ§åˆ¶ç±»é—´è·ç¦»çš„è¶…å‚æ•°ï¼Œè¶Šä½è´Ÿä¾‹å°±è¶Šéš¾åˆ†ã€‚è¿™ä¸ªå¼å­çš„ä¸»è¦ç›®çš„å°±æ˜¯æ‹‰è¿‘æ­£æ ·æœ¬ï¼ˆåŒç±»æ•°æ®ï¼‰çš„è·ç¦»ã€‚</p>
<h3 id="å®éªŒç»“æœ"><a href="#å®éªŒç»“æœ" class="headerlink" title="å®éªŒç»“æœ"></a>å®éªŒç»“æœ</h3><p>é™¤äº†å¼€å¤´å±•ç¤ºçš„ç›´æ¥æå‡å¤–ï¼Œä½œè€…è¿˜è¿›è¡Œäº†å¾ˆå¤šåˆ†æã€‚ä»SST-2æ•°æ®é›†çš„[CLS] embeddingæ¥çœ‹ï¼Œé€šè¿‡CEï¼ˆå·¦ï¼‰å’ŒSCLï¼ˆå³ï¼‰æŸå¤±è®­ç»ƒå‡ºæ¥çš„encoderå¯¹æ­£è´Ÿä¾‹çš„åŒºåˆ†èƒ½åŠ›ç¡®å®æœ‰ä¸å°‘å·®è·ï¼š</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/y3eXggUiaulKxPfjTNakIdlo21VibGTDStVorFtpY4PDjG6O53WjSXVyOm8G2yQLYBuBQgMRNMiaAp8cq40G6FlYA/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>åŒæ—¶åœ¨æœ‰å™ªå£°çš„è®­ç»ƒæ•°æ®ä¸ŠSCLé²æ£’æ€§ä¼šæ›´å¼ºï¼ˆTè¶Šé«˜å™ªå£°è¶Šå¤šï¼‰ï¼š</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/y3eXggUiaulKxPfjTNakIdlo21VibGTDStwbicARdicmQ8VkaibVa0ee9mgyYnHo8mgcQI3ibBKkBW436uhTkINbAGCg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>è¿™ç¯‡æ–‡ç« ç›®å‰æ­£åœ¨æŠ•ç¨¿ICLR2021ï¼ˆéƒ½åœ¨arxivä¸ŠæŒ‚äº†è¿˜ç›²å®¡å•¥ã€‚ã€‚ï¼‰ï¼Œæ€»ä½“çš„æ”¹åŠ¨æ¯”è¾ƒç®€å•ï¼Œä½†å¯¹æ¯”å­¦ä¹ çš„å‰æ™¯è¿˜æ˜¯æŒºå¤§çš„ï¼ŒåŒæ—¶åŠ ä¸ŠSCLæŸå¤±ä¹‹åä¸ä»…å¯¹å°‘æ ·æœ¬çš„æƒ…å†µå¾ˆæœ‰å¸®åŠ©ï¼Œä¹Ÿèƒ½æå‡æ¨¡å‹é²æ£’æ€§ï¼Œç›¸æ¯”äº<a href="https://mp.weixin.qq.com/s?__biz=MzA5MjEyNDMxOQ==&amp;mid=2247483956&amp;idx=1&amp;sn=49d079e4cd785cb4739f660d72468235&amp;scene=21#wechat_redirect" target="_blank" rel="noopener">å¯¹æŠ—å­¦ä¹ </a>çš„è®¡ç®—ä»£ä»·æ˜æ˜¾è¦å°ï¼Œè¿˜æ˜¯æ¯”è¾ƒå®ç”¨çš„ï¼Œä¸€èµ·ç«‹ä¸ªflagï¼Œå¤ç°ä¸€æ³¢ï¼Ÿ</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/y3eXggUiaulKxPfjTNakIdlo21VibGTDStiagG58ibWjLq0rAfbhtuIbj8aR2Hib3jgKw7rmThcFGmnFWTW9yNlpIqQ/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
]]></content>
      <categories>
        <category>Machine Learning</category>
      </categories>
      <tags>
        <tag>BERT</tag>
        <tag>Contrastive Loss</tag>
        <tag>Machine Learning</tag>
        <tag>å¯¹æ¯”å­¦ä¹ </tag>
        <tag>SimCLR</tag>
        <tag>Feature Space</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨matplotlibç»˜åˆ¶æŸ±çŠ¶å›¾</title>
    <url>/2020/11/23/%E4%BD%BF%E7%94%A8matplotlib%E7%BB%98%E5%88%B6%E6%9F%B1%E7%8A%B6%E5%9B%BE/</url>
    <content><![CDATA[<h1 id="åŸºæœ¬ç»˜åˆ¶"><a href="#åŸºæœ¬ç»˜åˆ¶" class="headerlink" title="åŸºæœ¬ç»˜åˆ¶"></a>åŸºæœ¬ç»˜åˆ¶</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"> </span><br><span class="line">num_list = [<span class="number">1.5</span>,<span class="number">0.6</span>,<span class="number">7.8</span>,<span class="number">6</span>]</span><br><span class="line">plt.bar(range(len(num_list)), num_list)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><div align="center"> <img src="/images/blog/2020/zhu.png" alt><br><a id="more"></a></div></p>
<h1 id="è®¾ç½®æ ‡ç­¾"><a href="#è®¾ç½®æ ‡ç­¾" class="headerlink" title="è®¾ç½®æ ‡ç­¾"></a>è®¾ç½®æ ‡ç­¾</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"> </span><br><span class="line">name_list = [<span class="string">'Monday'</span>,<span class="string">'Tuesday'</span>,<span class="string">'Friday'</span>,<span class="string">'Sunday'</span>]</span><br><span class="line">num_list = [<span class="number">1.5</span>,<span class="number">0.6</span>,<span class="number">7.8</span>,<span class="number">6</span>]</span><br><span class="line">plt.bar(range(len(num_list)), num_list,color=<span class="string">'rgb'</span>,tick_label=name_list)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><div align="center"> <img src="/images/blog/2020/zhu1.png" alt></div></p>
]]></content>
      <categories>
        <category>Others</category>
        <category>Tool</category>
      </categories>
      <tags>
        <tag>matplotlib</tag>
        <tag>å¯è§†åŒ–</tag>
        <tag>æŸ±çŠ¶å›¾</tag>
      </tags>
  </entry>
  <entry>
    <title>NYT baseline ç¬”è®°</title>
    <url>/2020/11/21/NYT-baseline-%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h1 id="1-Conv1dä¸Conv2dçš„åŒºåˆ«"><a href="#1-Conv1dä¸Conv2dçš„åŒºåˆ«" class="headerlink" title="1. Conv1dä¸Conv2dçš„åŒºåˆ«"></a>1. Conv1dä¸Conv2dçš„åŒºåˆ«</h1><p>ä¹‹å‰å†™PCNNæ—¶éƒ½æ˜¯ä½¿ç”¨Conv1då®ç°ï¼Œä½†æ˜¯åœ¨é˜…è¯»åˆ«äººçš„æºç æ—¶å‘ç°æ˜¯ç”¨çš„Conv2dï¼Œéš¾é“æ˜¯è‡ªå·±æé”™äº†ï¼Ÿ</p>
<h2 id="Conv2D"><a href="#Conv2D" class="headerlink" title="Conv2D"></a>Conv2D</h2><p><img src="https://pic1.zhimg.com/80/v2-10c0d7782638fb59f5746508503e4a58_720w.jpg" alt="img"></p>
<p>å¦‚å›¾ï¼Œè¾“å…¥ä¸º <img src="https://www.zhihu.com/equation?tex=%287%2C7%2C3%29" alt="[å…¬å¼]"> çš„å›¾ç‰‡ï¼Œå·ç§¯æ ¸çš„å°ºå¯¸ä¸º <img src="https://www.zhihu.com/equation?tex=%283%2C3%29" alt="[å…¬å¼]"> ï¼Œå·ç§¯æ ¸ä¸ªæ•°ä¸º2ï¼Œæ‰€ä»¥</p>
<p>å‚æ•°æ€»æ•°<img src="https://www.zhihu.com/equation?tex=%3D3%2A3%2A3%2A2" alt="[å…¬å¼]"> ã€‚</p>
<p>å¤šå‡ºæ¥çš„3ä¸ºå›¾ç‰‡çš„channelï¼Œæ¯ä¸ªå·ç§¯æ ¸ä¼šè‡ªåŠ¨æ‰©å……åˆ°3ç»´ï¼Œå¯¹åº”æ¯ä¸ªé€šé“ã€‚</p>
<h2 id="Conv1D"><a href="#Conv1D" class="headerlink" title="Conv1D"></a>Conv1D</h2><p><img src="https://pic2.zhimg.com/80/v2-0df2ad2e4d63f8c9da6940293cf8fab1_720w.jpg" alt="img"></p>
<p>å¦‚å›¾ï¼Œè¾“å…¥æœ‰ä¸¤ä¸ªåºåˆ—ï¼Œç¬¬ä¸€ä¸ªåºåˆ—ä¸º <img src="https://www.zhihu.com/equation?tex=%283%2C3%29" alt="[å…¬å¼]"> çš„æ–‡æœ¬ï¼Œå·ç§¯æ ¸çš„å°ºå¯¸ä¸º 2ï¼Œå·ç§¯æ ¸ä¸ªæ•°ä¸º1ï¼Œæ‰€ä»¥</p>
<p>å‚æ•°æ€»æ•°<img src="https://www.zhihu.com/equation?tex=%3D3%2A2%2A1" alt="[å…¬å¼]"> ã€‚</p>
<p>å¤šå‡ºæ¥çš„3ä¸ºæ–‡æœ¬çš„è¯å‘é‡ç»´åº¦ï¼Œ<strong>å·ç§¯æ ¸ä¼šè‡ªåŠ¨æ‰©å……åˆ°2ç»´ï¼Œå¯¹åº”æ¯ä¸ªéšç»´åº¦</strong>ã€‚</p>
<p><strong>æ‰€ä»¥ç»“è®ºæ˜¯ä¸¤è€…æ˜¯ä¸€æ ·çš„ï¼Œæ€æ ·ç”¨éƒ½å¯ä»¥ï¼Œåªæ˜¯å†™æ³•ä¸åŒï¼</strong><a id="more"></a></p>
<h1 id="2-get-item"><a href="#2-get-item" class="headerlink" title="2. __get_item__()"></a>2. __get_item__()</h1><p>åœ¨ç»§æ‰¿äº†Datasetçš„æ•°æ®é›†ç±»ï¼Œéœ€è¦é‡å†™__get_item__()å‡½æ•°ï¼Œå¯ä»¥ä¼ å…¥slice()ç±»</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">( self, key )</span> :</span></span><br><span class="line">    <span class="keyword">if</span> isinstance( key, slice ) :</span><br><span class="line">        <span class="comment">#Get the start, stop, and step from the slice</span></span><br><span class="line">        <span class="keyword">return</span> [self[ii] <span class="keyword">for</span> ii <span class="keyword">in</span> xrange(*key.indices(len(self)))]</span><br><span class="line">    <span class="keyword">elif</span> isinstance( key, int ) :</span><br><span class="line">        <span class="keyword">if</span> key &lt; <span class="number">0</span> : <span class="comment">#Handle negative indices</span></span><br><span class="line">            key += len( self )</span><br><span class="line">        <span class="keyword">if</span> key &lt; <span class="number">0</span> <span class="keyword">or</span> key &gt;= len( self ) :</span><br><span class="line">            <span class="keyword">raise</span> IndexError, <span class="string">"The index (%d) is out of range."</span>%key</span><br><span class="line">        <span class="keyword">return</span> self.getData(key) <span class="comment">#Get the data from elsewhere</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">raise</span> TypeError, <span class="string">"Invalid argument type."</span></span><br></pre></td></tr></table></figure>
<h1 id="3-pdb-set-trace"><a href="#3-pdb-set-trace" class="headerlink" title="3. pdb.set_trace()"></a>3. pdb.set_trace()</h1><p>pdb.<strong>set_trace</strong>(*,  <em>header=None</em>)</p>
<p>åœ¨è°ƒç”¨æœ¬å‡½æ•°çš„å †æ ˆå¸§å¤„è¿›å…¥è°ƒè¯•å™¨ã€‚<font color="orange">ç”¨äºç¡¬ç¼–ç ä¸€ä¸ªæ–­ç‚¹åˆ°ç¨‹åºä¸­çš„å›ºå®šç‚¹å¤„</font>ï¼Œå³ä½¿è¯¥ä»£ç ä¸åœ¨è°ƒè¯•çŠ¶æ€ï¼ˆå¦‚æ–­è¨€å¤±è´¥æ—¶ï¼‰ã€‚å¦‚æœä¼ å…¥ <em>header</em>ï¼Œå®ƒå°†åœ¨è°ƒè¯•å¼€å§‹å‰è¢«æ‰“å°åˆ°æ§åˆ¶å°ã€‚</p>
<h1 id="4-PCNN-ONE-å®ç°"><a href="#4-PCNN-ONE-å®ç°" class="headerlink" title="4. PCNN + ONE å®ç°"></a>4. PCNN + ONE å®ç°</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, token2ids, pos1s, pos2s, mask, scopes, rel_labels, is_training=False)</span>:</span></span><br><span class="line">        <span class="string">"""ç›¸æ¯”äº PCNN å¤šäº†å‚æ•°: scopes, rel_labels, is_training=False"""</span></span><br><span class="line">        x = self.input(token2ids, pos1s, pos2s)</span><br><span class="line">        x = self.convolution(x, mask)</span><br><span class="line">        x = self.piece_maxpool(x, mask)</span><br><span class="line">        x = self.tanh(x)</span><br><span class="line">        x = self.dropout(x)</span><br><span class="line">        <span class="comment"># selector</span></span><br><span class="line">        bag_rep = list()</span><br><span class="line">        <span class="keyword">for</span> ind, scope <span class="keyword">in</span> enumerate(scopes):</span><br><span class="line">            sent_rep = x[scope[<span class="number">0</span>]:scope[<span class="number">1</span>], :]</span><br><span class="line">            out = self.dense(sent_rep)</span><br><span class="line">            probs = torch.softmax(out, dim=<span class="number">-1</span>)</span><br><span class="line">            <span class="keyword">if</span> is_training:</span><br><span class="line">                _, j = torch.max(probs[:, rel_labels[ind]], dim=<span class="number">-1</span>)  <span class="comment"># é€‰å–æœ€å¤§çš„æ ·æœ¬ä½œä¸º bag è¡¨ç¤º</span></span><br><span class="line">                bag_rep.append(out[j])</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                row_prob, row_idx = torch.max(probs, dim=<span class="number">-1</span>)</span><br><span class="line">                <span class="keyword">if</span> row_idx.sum() &gt; <span class="number">0</span>:</span><br><span class="line">                    mask = row_idx.view(<span class="number">-1</span>, <span class="number">1</span>).expand(<span class="number">-1</span>, probs.shape[<span class="number">-1</span>])</span><br><span class="line">                    probs = probs.masked_fill_(mask.eq(<span class="number">0</span>), float(<span class="string">'-inf'</span>))</span><br><span class="line">                    row_prob, _ = torch.max(probs[:, <span class="number">1</span>:], dim=<span class="number">-1</span>)</span><br><span class="line">                    _, row_idx = torch.max(row_prob, dim=<span class="number">0</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    _, row_idx = torch.max(row_prob, dim=<span class="number">-1</span>)</span><br><span class="line">                bag_rep.append(out[row_idx])</span><br><span class="line"></span><br><span class="line">        bag_rep = torch.stack(bag_rep)</span><br><span class="line">        <span class="keyword">return</span> bag_rep</span><br></pre></td></tr></table></figure>
<h1 id="5-PCNN-ATT-å®ç°"><a href="#5-PCNN-ATT-å®ç°" class="headerlink" title="5. PCNN + ATT å®ç°"></a>5. PCNN + ATT å®ç°</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, token2ids, pos1s, pos2s, mask, scopes, rel_labels, is_training=False)</span>:</span></span><br><span class="line">    x = self.input(token2ids, pos1s, pos2s)</span><br><span class="line">    x = self.convolution(x, mask)  <span class="comment"># (batch, hidden, seq_len, 1)</span></span><br><span class="line">    x = self.piece_maxpool(x, mask)</span><br><span class="line">    x = self.tanh(x)</span><br><span class="line">    x = self.dropout(x)  <span class="comment"># (batch, 3 * hidden)</span></span><br><span class="line">    <span class="comment"># selector</span></span><br><span class="line">    <span class="keyword">if</span> is_training:</span><br><span class="line">        query = torch.zeros((x.size(<span class="number">0</span>))).long()</span><br><span class="line">        query.to(x.device)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(scopes)):</span><br><span class="line">            query[scopes[i][<span class="number">0</span>]:scopes[i][<span class="number">1</span>]] = rel_labels[i]</span><br><span class="line">        <span class="comment"># (batch, 3 * hidden)</span></span><br><span class="line">        att_mat = self.dense.weight[query]  <span class="comment"># å…¨è¿æ¥å±‚èµ·åˆ°äº† relation query çš„ä½œç”¨ #</span></span><br><span class="line">        att_score = (x * att_mat).sum(<span class="number">-1</span>)</span><br><span class="line">        bag_rep = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(scopes)):</span><br><span class="line">            bag_mat = x[scopes[i][<span class="number">0</span>]:scopes[i][<span class="number">1</span>]]</span><br><span class="line">            softmax_att_score = F.softmax(att_score[scopes[i][<span class="number">0</span>]:scopes[i][<span class="number">1</span>]], dim=<span class="number">-1</span>)  <span class="comment"># å¯¹ att_score åš softmax</span></span><br><span class="line">            bag_rep.append((softmax_att_score.unsqueeze(<span class="number">-1</span>) * bag_mat).sum(<span class="number">0</span>))</span><br><span class="line">        bag_rep = torch.stack(bag_rep, <span class="number">0</span>)</span><br><span class="line">        bag_rep = self.dropout(bag_rep)</span><br><span class="line">        bag_logits = self.dense(bag_rep)  <span class="comment"># äºŒæ¬¡ç”¨åˆ°äº† dense.weight çŸ©é˜µ</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>pytorch</tag>
        <tag>NYT</tag>
        <tag>PCNN</tag>
        <tag>Attention</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç®—æœºAIé¡¶ä¼šå®¡ç¨¿æµç¨‹</title>
    <url>/2020/11/20/%E8%AE%A1%E7%AE%97%E6%9C%BAAI%E9%A1%B6%E4%BC%9A%E5%AE%A1%E7%A8%BF%E6%B5%81%E7%A8%8B/</url>
    <content><![CDATA[<h1 id="1-EMNLP-2020"><a href="#1-EMNLP-2020" class="headerlink" title="1. EMNLP 2020"></a>1. EMNLP 2020</h1><p><strong>NLPå¯è§£é‡Šæ€§å’Œæ¨¡å‹åˆ†æä¸»é¢˜çš„æŠ•ç¨¿æ•°é‡æœ‰æ˜¾è‘—ä¸Šå‡</strong>ã€‚è¿™æ˜¯ACL2020æ–°å¼•å…¥çš„ä¸»é¢˜ï¼Œæ”¶åˆ°95ç¯‡æŠ•ç¨¿ã€‚ä½†åœ¨EMNLPæŠ•ç¨¿æ•°å­—ç¿»å€äº†ï¼Œå±•ç°äº†ç¤¾åŒºåœ¨å¯¹NLPå¯è§£é‡Šæ€§å’Œæ¨¡å‹åˆ†æè¿™ä¸€ä¸»é¢˜ä¸Šçš„å…´è¶£å¢é•¿æ›´ä¸ºè¿…é€Ÿã€‚</p>
<h2 id="å®¡ç¨¿è¿‡ç¨‹ï¼šä½œè€…å³å®¡ç¨¿"><a href="#å®¡ç¨¿è¿‡ç¨‹ï¼šä½œè€…å³å®¡ç¨¿" class="headerlink" title="å®¡ç¨¿è¿‡ç¨‹ï¼šä½œè€…å³å®¡ç¨¿"></a><strong>å®¡ç¨¿è¿‡ç¨‹ï¼šä½œè€…å³å®¡ç¨¿</strong></h2><p>åœ¨Yulan Heä»‹ç»å®Œæ•´ä½“æ•°æ®ä¹‹åï¼Œæœ¬æ¬¡è¯„å®¡ä¹‹ä¸€ï¼Œå¢¨å°”æœ¬å¤§å­¦æ•™æˆTrevor Cohnä»‹ç»äº†æœ¬æ¬¡ä¼šè®®çš„æŠ•ç¨¿è¿‡ç¨‹ã€‚</p>
<p>å¯¹æŠ•ç¨¿æ ¼å¼å’Œå®¡ç¨¿æ ¼å¼åšäº†å¾ˆå¤šæ”¹å˜ã€‚<strong>æœ¬æ¬¡è¯„å§”ä¼šæœ‰è¶…è¿‡3000åæˆå‘˜ï¼Œè¯„å§”å·¥ä½œæ­£å¦‚å¾€å¹´å¤§ä¼šä¸€æ ·ï¼ŒæŒ‰ç…§åˆ†çº§ç»“æ„æ ‡å‡†å¼€å±•ã€‚</strong> <strong>æ”¹å˜äº†ä¸€ä»¶äº‹å°±æ˜¯è¦æ±‚æ‰€æœ‰æŠ•ç¨¿è‡³å°‘æåä¸€ä½ä½œè€…ä½œä¸ºå®¡ç¨¿äºº</strong>ã€‚éšåæŠŠä»–ä»¬åˆ†å…¥ä¸åŒç ”ç©¶é¢†åŸŸï¼Œå°†æ›´æœ‰ç»éªŒçš„å®¡ç¨¿äººç¼–å…¥æœ€ç»ˆå®¡ç¨¿åº“ã€‚</p>
<p>å¯¹æ¯ä½å®¡ç¨¿äººä¹Ÿä½¿ç”¨ä»–ä»¬çš„è¯­ä¹‰å­¦å­¦æœ¯èµ„æ–™æ•°æ®æ¥æŠ“å–ä»–ä»¬çš„è®ºæ–‡ä»¥å¾—åˆ°ä»–ä»¬ä¹‹å‰çš„å‡ºç‰ˆç‰©è®°å½•ï¼Œé€šè¿‡è¿™æ ·çš„æ–¹å¼èƒ½è¯†åˆ«å‡ºæ›´å¤šçš„é«˜çº§å®¡ç¨¿äººã€‚</p>
<p><img src="/images/blog/2020/IJCAI/distri.png" alt></p>
<p>å†æ¬¡ç»™ä½ ä»¬å±•ç¤ºæ•°æ®åº“ä¸­çš„ä¸€ä¸ªæƒ³æ³•ã€‚ä¸Šå›¾å±•ç¤ºäº†æ¯ä¸ªå®¡ç¨¿äººè¿‡å»å‡ºç‰ˆç‰©çš„æ•°é‡ã€‚å‘ç°å¤§éƒ¨åˆ†å®¡ç¨¿äººéƒ½æœ‰å¤§é‡è®ºæ–‡ï¼Œä»–ä»¬éƒ½æ˜¯ç ”ç©¶çš„â€œè¡Œå®¶é‡Œæ‰‹â€ã€‚ä¹Ÿå‘ç°ä¸¤ä¾§æœ‰ä¸€äº›æ•°æ®åç¦»çš„å­¦è€…ï¼Œå¯èƒ½æ˜¯ç”±äºæ²¡æœ‰è¯­ä¹‰å­¦å­¦æœ¯èµ„æ–™æˆ–è€…å¯èƒ½å’Œå…¶ä»–ç ”ç©¶è€…é‡åã€‚ä»è¿™ä»½æ•°æ®ï¼Œå¯ä»¥é«˜ç²¾åº¦çš„è¯†åˆ«é‚£äº›æœ‰å¤§é‡è®ºæ–‡å¹¶ä¸”æœ‰åšå£«å­¦ä½çš„ä¸ªäººã€‚å°†ä»–ä»¬ç§°ä¹‹ä¸ºæ˜Ÿçº§å®¡ç¨¿äººå¹¶ä¸”ç¡®ä¿æ¯ä¸€ç¯‡è®ºæ–‡éƒ½è¢«è‡³å°‘ä¸€ä½æ˜Ÿçº§å®¡ç¨¿äººå®¡é˜…ã€‚</p>
<p>å®¡ç¨¿è¦æ±‚ä½¿ç”¨çš„è‡ªåŠ¨åŒ–ç®—æ³•ä¸ACLç›¸ä¼¼ã€‚è¿™å»ºç«‹åœ¨æŠ•ç¨¿å’Œå®¡ç¨¿äººä¹‹é—´çš„å¤§è‡´ç›¸ä¼¼æ€§ä¸Šã€‚è®ºæ–‡ç¡®è®¤ä¹‹åäº¤ç»™åŒ¹é…ç®—æ³•åšä¸€ä¸ªå—é™çš„ä¼˜åŒ–é€‰æ‹©æ¥ä¿è¯å°Šé‡å®¡ç¨¿äººçš„è´Ÿæ‹…é™åˆ¶ä»¥ä¿è¯å®¡ç¨¿è´¨é‡ã€‚å¯¹å®¡ç¨¿ä»»åŠ¡å’ŒåŒºåŸŸä¸»å¸­åˆ†é…éƒ½è¿™ä¹ˆåšå¹¶ä¸”è¿™äº›ä»»åŠ¡è¢«é«˜çº§åŒºä¸»å¸­å›¢æ‰‹åŠ¨è°ƒæ•´ã€‚æ€»ä½“ä¸Šè®¤ä¸ºè¿™é¡¹å·¥ä½œå®Œæˆçš„å¾ˆå‡ºè‰²å› ä¸ºç§»é™¤äº†å¼ºåˆ¶æ€§å‘½ä»¤è¿™ä¸ªé¢å¤–ä¹‹ä¸¾ã€‚</p>
<a id="more"></a>
<p><strong>æœ¬æ¬¡è®ºå›çš„å…¶ä»–æ”¹åŠ¨æ˜¯ï¼š</strong></p>
<p>ä¸€æ˜¯å¯¹æ¯ç¯‡æŠ•ç¨¿éƒ½åŒ…æ‹¬ä¸€ä»½<strong>å†ç°æ€§æ¸…å•</strong>ï¼Œè¯„å®¡å¿…é¡»ç»™ä¸€ä¸ªå†ç°æ€§æ¸…å•åˆ†æ•°å¹¶ä¸”å›ç­”åé¦ˆé—®å·è¿™ä¸ªå†ç°æ€§æ¸…å•æ˜¯å¦æœ‰ç”¨ï¼Œå…¶ä¸­78%å›ç­”æœ‰ç”¨æˆ–è€…æŸç§ç¨‹åº¦ä¸Šæœ‰ç”¨ã€‚æ ¹æ®å†ç°æ€§æ¸…å•ï¼ŒæŠ•ç¨¿å¤§ä½“ä¸Šéƒ½æä¾›äº†æ›´å¤šçš„ä¿¡æ¯ã€‚MLçš„å†ç°æ€§æŒ‘æˆ˜ï¼ŒEMNLPæ­£åœ¨å­¦ä¹ å…¶ä»–AIå¤§ä¼šä¾‹å¦‚NeurIPSã€CVPRã€‚</p>
<p>äºŒæ˜¯<strong>å…è®¸ä½œè€…æä¾›è¢«æ‹’ç¨¿ä»¶æŠ•ç¨¿</strong>ï¼Œä½œè€…è¦å±•ç¤ºè¢«æ‹’ç†ç”±å¹¶ä¸”è§£é‡Šä½ å¦‚ä½•æ”¹æ­£è¿™äº›é—®é¢˜ã€‚é€šè¿‡æ­¤æ”¹åŠ¨ï¼Œ349ç¯‡æ­¤ç±»æŠ•ç¨¿è®ºæ–‡æ¯”å…¶ä»–è®ºæ–‡é«˜å½•å–ç‡6%ã€‚</p>
<p>ä¸‰æ˜¯ä»Šå¹´æ–°å¢åŠ äº†é“å¾·è§„èŒƒè¦æ±‚åœ¨æŠ•ç¨¿å®¡æŸ¥æµç¨‹ä¹‹ä¸­ã€‚</p>
<p>æœ€åæ˜¯å®¡ç¨¿è´¨é‡ï¼Œé¦–å…ˆæ˜¯å®¡ç¨¿äººç»„ç»‡è¿‡ç¨‹ä¸­çš„å‰æœŸç­›é€‰å’Œä¹‹åçš„åˆ†ç±»å¯¹æé«˜å®¡ç¨¿è´¨é‡éƒ½æœ‰å¸®åŠ©ã€‚ä¹Ÿä¼šæä¾›è¯¦ç»†çš„å®¡ç¨¿æŒ‡å¯¼ï¼Œæ˜¯ç¤¾åŒºä¸­ç§¯æçš„åé¦ˆã€‚å½“ç„¶ï¼Œè¿™ä¹Ÿéœ€è¦ç¤¾åŒºæˆå‘˜æ›´å¤šçš„åŠªåŠ›å®Œå…¨çš„æ¥æé«˜å®¡ç¨¿è´¨é‡ã€‚</p>
<h1 id="2-ACL-2020"><a href="#2-ACL-2020" class="headerlink" title="2. ACL 2020"></a>2. ACL 2020</h1><h2 id="å®¡ç¨¿è¡¨å•"><a href="#å®¡ç¨¿è¡¨å•" class="headerlink" title="å®¡ç¨¿è¡¨å•"></a>å®¡ç¨¿è¡¨å•</h2><p>æˆ‘ä»¬é‡‡ç”¨äº†EMNLP-IJCNLP 2019ä»¥åŠACL 2019çš„å®¡ç¨¿è¡¨å•å¹¶ä½œå‡ºäº†ä¸€äº›ä¿®æ”¹ã€‚å®¡ç¨¿è¡¨å•å°†ç”±ä¸‰éƒ¨åˆ†ç»„æˆã€‚</p>
<p><strong>1ã€æ·±åº¦å®¡ç¨¿æ„è§</strong>ï¼šè¿™ä¸ªéƒ¨åˆ†å°†ç”±ä½ æ¥ç»™å‡ºå¯¹äºè®ºæ–‡çš„ç»¼åˆè¯„ä»·å¹¶ä¸”æä¾›ä½œå‡ºè¿™äº›è¯„ä»·çš„ä¾æ®ï¼Œå…¶ä¸­åŒ…æ‹¬6ä¸ªå°èŠ‚ã€‚</p>
<ul>
<li><p><strong>æ ¸å¿ƒå®¡ç¨¿æ„è§</strong>ï¼š<strong>è¿™æ˜¯æœ€é‡è¦çš„ä¸€éƒ¨åˆ†ã€‚</strong>éœ€è¦ç»™å‡ºä½ å¯¹äºè¿™ç¯‡è®ºæ–‡è´¡çŒ®ç‚¹çš„çœ‹æ³•ä»¥åŠè¾¾æˆè¿™äº›è´¡çŒ®ç‚¹çš„å®Œæˆç¨‹åº¦ã€‚ç”¨ä½ çš„è§‚ç‚¹æ¥æè¿°è¿™ç¯‡è®ºæ–‡æœ€æ˜¾è‘—çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚å¯ä»¥æ˜¯ä¸¤ä¸ªæ®µè½ï¼ˆæˆ–è€…æ›´é•¿ï¼‰çš„è®ºè¿°æˆ–è€…æ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚éœ€è¦è¯´æ˜è¯¥å·¥ä½œæ˜¯å¦‚ä½•æ¨è¿›è®¡ç®—è¯­è¨€å­¦ç°æœ‰çš„å‘ç°ï¼Œå¹¶ä¸”/æˆ–è€…å¼ºè°ƒè¯¥å·¥ä½œä¸ºä»€ä¹ˆæ²¡èƒ½åšå‡ºè¶³å¤Ÿçš„è´¡çŒ®ã€‚</p>
</li>
<li><p><strong>æ¥æ”¶ç†ç”±</strong>ï¼šç®€è¦åœ°ä»æ ¸å¿ƒå®¡ç¨¿æ„è§ä¸­å½’çº³å‡ºè¿™ç¯‡è®ºæ–‡è¢«å¤§ä¼šæ¥å—çš„ç†ç”±ï¼Œå¹¶ä¸”ACLç¤¾åŒºæˆå‘˜ä¼šä»ä¸­å¾—åˆ°ä»€ä¹ˆæ ·çš„ç›Šå¤„ã€‚ä½ å¯ä»¥å‚è€ƒè‡ªå·±çš„å®¡ç¨¿æ„è§ä»¥æä¾›æ›´å¤šèƒŒæ™¯å’Œè¯¦ç»†ä¿¡æ¯ã€‚</p>
</li>
<li><p><strong>æ‹’ç»ç†ç”±</strong>ï¼šç®€è¦åœ°å½’çº³å‡ºå¦‚æœè¿™ç¯‡è®ºæ–‡ä»¥ç°åœ¨è¿™ç§å½¢å¼å‘è¡¨å°†ä¼šå¸¦æ¥ä»€ä¹ˆæ½œåœ¨çš„é£é™©æˆ–è€…å®³å¤„ã€‚ç»™å‡ºä¸ºäº†æé«˜çŸ¥è¯†æ°´å¹³åº”è¯¥æœ‰å“ªäº›æ–¹é¢çš„æ”¹è¿›ã€‚</p>
</li>
<li><p><strong>æ€»ä½“æ¨èåˆ†æ•°</strong>ï¼šè¿™é‡Œæˆ‘ä»¬ä¼šè¦æ±‚ä½ ç»¼åˆä»¥ä¸Šè§‚ç‚¹å¹¶ç»™å‡ºä½ å¯¹è®ºæ–‡çš„æœ€ç»ˆè¯„ä»·ã€‚</p>
</li>
<li><ul>
<li>ä¸EMNLP 2019ç›¸åŒï¼Œ<strong>æˆ‘ä»¬å°†ä½¿ç”¨â€œå¸¦åŠåˆ†é—´éš”çš„5åˆ†åˆ¶â€æ¥æ‰“åˆ†</strong>ã€‚å®¡ç¨¿è¡¨å•é‡Œæä¾›äº†æ¯ä¸ªåˆ†æ•°æ®µçš„è¯´æ˜ã€‚è¿™äº›æ•°å­—åªæ˜¯ç”¨ç®€æ´çš„æ–¹æ³•æ¥è¡¨è¾¾æ€»ä½“è§‚ç‚¹ä»¥åŠä¸Šè¿°è¯„å®¡å†…å®¹çš„é‡è¦æ€§ã€‚</li>
<li><strong>ä»Šå¹´ä¸ä»¥å¾€ä¸åŒçš„æ˜¯æˆ‘ä»¬ç§»é™¤äº†3åˆ†ï¼ˆæ¨¡æ£±ä¸¤å¯ï¼‰</strong>ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›å®¡ç¨¿äººèƒ½å¤Ÿç»™å‡ºå¯¹äºè®ºæ–‡çš„åå‘æ€§ï¼šè¾¹ç•Œçº¿ä¹‹ä¸Šè¿˜æ˜¯è¾¹ç•Œçº¿ä¹‹ä¸‹ã€‚</li>
<li>æœ€ç»ˆçš„å½•ç”¨å†³å®šä¸ä»…ä»…ä¾é è¿™äº›åˆ†æ•°å¹¶ä¸”ä¹Ÿä¸ä¼šç”¨å¹³å‡åˆ†æ¥å†³å®šï¼Œæ˜¯é€šè¿‡è€ƒè™‘æ‰€æœ‰å®¡ç¨¿æ„è§ã€å®¡ç¨¿äººè®¨è®ºã€é¢†åŸŸä¸»å¸­çš„ç»¼åˆæ„è§ï¼ˆmeta-reviewï¼‰ä»¥åŠæ¨èç¨‹åº¦ã€‚ç„¶è€Œï¼Œå°†ä½ çš„å®¡ç¨¿æ„è§ä¸ä¸Šè¿°å› ç´ å¯¹é½æ˜¯éå¸¸æœ‰å¿…è¦çš„ï¼Œè¿™æ ·ä½œè€…æ‰èƒ½å¤Ÿç†è§£æœ€ç»ˆå½•ç”¨ç»“è®ºæ˜¯æ€ä¹ˆç»™å‡ºçš„ã€‚</li>
</ul>
</li>
<li><p><strong>å®¡ç¨¿äººç½®ä¿¡åº¦</strong>ï¼šè¿™ä¸€éƒ¨åˆ†æ˜¯ç”¨æ¥å‘ŠçŸ¥ç¨‹åºå§”å‘˜ä¼šå’Œä½œè€…ä½ å¯¹äºè¿™ç¯‡è®ºæ–‡çš„è¯„å®¡æœ‰å¤šå¤§çš„æŠŠæ¡ï¼Œè€ƒè™‘ä½ ä¸ªäººçš„ä¸“ä¸šç¨‹åº¦ã€å¯¹è¯¥é¢†åŸŸçš„ç†Ÿæ‚‰ç¨‹åº¦ä»¥åŠè®ºæ–‡çš„å†…å®¹ã€‚</p>
</li>
<li><p><strong>ä½œè€…è®ºè¾©</strong>ï¼šACL 2020ä¼šæä¾›ä½œè€…è®ºè¾©ç¯èŠ‚ã€‚æ‰€ä»¥æ£€æŸ¥ä½œè€…çš„è®ºè¾©å†…å®¹æ˜¯å¦è§£ç­”äº†ä½ çš„é—®é¢˜ä»¥åŠæ¶ˆé™¤äº†è¯¯è§£æ˜¯éå¸¸é‡è¦çš„ã€‚è¿™å¯èƒ½ä¼šå½±å“åˆ°ä½ çš„æœ€ç»ˆæ¨èåˆ†æ•°ä»¥åŠæ ¸å¿ƒå®¡ç¨¿æ„è§ã€‚å¦‚æœè§£ç­”äº†ä½ çš„ç–‘æƒ‘ï¼Œè¯·æ›´æ–°ä½ çš„å®¡ç¨¿æ„è§ä»¥åŠæ¨èåˆ†æ•°ï¼ˆå¹¶ä¸”åœ¨å®¡ç¨¿æ„è§ä¸­æ ‡æ˜ä½ çš„æ–°ç»“è®ºï¼Œä»¥ä¾¿é¢†åŸŸä¸»å¸­åŠæ—¶å‘ç°ï¼‰ã€‚</p>
</li>
</ul>
<p><strong>2ã€å¯¹ä½œè€…çš„æé—®ä»¥åŠå…¶ä»–åé¦ˆ</strong>ï¼šå› ä¸ºæˆ‘ä»¬æœ‰ä½œè€…è®ºè¾©ç¯èŠ‚ï¼Œä½ å¯ä»¥å‘ä½œè€…æå‡ºä¸€äº›æé—®ï¼Œä»¥ä¾¿ä»–ä»¬èƒ½å¤Ÿç­”ç–‘è§£æƒ‘ã€‚è¿™é‡Œä¹Ÿå¯ä»¥å†™ä¸€äº›æå‡æœ€ç»ˆè®ºæ–‡ï¼ˆæˆ–æœªæ¥ç‰ˆæœ¬çš„è®ºæ–‡ï¼‰è´¨é‡çš„å…¶ä»–å»ºè®®ã€‚</p>
<p><strong>3ã€ä¿å¯†ä¿¡æ¯</strong>ï¼šåœ¨è¿™ä¸€éƒ¨åˆ†çš„å†…å®¹ä¸ä¼šè¢«ä½œè€…çœ‹åˆ°ã€‚è¿™é‡Œæˆ‘ä»¬ä¼šè®©ä½ æ¨èè¯¥è®ºæ–‡çš„å±•ç¤ºå½¢å¼ï¼ˆå£å¤´æŠ¥å‘Šæˆ–è€…å¼ è´´æµ·æŠ¥ï¼‰ã€å¥–é¡¹æ¨èã€å­¦æœ¯é“å¾·é¡¾è™‘ä»¥åŠå…¶ä»–è¦å‘é€ç»™é¢†åŸŸä¸»å¸­æˆ–è€…ç¨‹åºå§”å‘˜ä¼šä¸»å¸­çš„ä¿å¯†ä¿¡æ¯ã€‚</p>
<h2 id="ACLé€šç”¨å®¡ç¨¿å‡†åˆ™"><a href="#ACLé€šç”¨å®¡ç¨¿å‡†åˆ™" class="headerlink" title="ACLé€šç”¨å®¡ç¨¿å‡†åˆ™"></a>ACLé€šç”¨å®¡ç¨¿å‡†åˆ™</h2><p>è¯·åœ¨å®¡ç¨¿çš„æ—¶å€™é‡‡å–å¹³è¡¡çš„æ–¹æ³•ã€‚ä¸€æ–¹é¢æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿé€šè¿‡å½•ç”¨ä¸€äº›æè¿°å®Œæ•´å·¥ä½œçš„é«˜è´¨é‡çš„è®ºæ–‡æ¥å½¢æˆä¸€ä¸ªå¯é çš„å¤§ä¼šç¨‹åºï¼Œå¦å¤–ä¸€æ–¹é¢æˆ‘ä»¬ä¹Ÿå¸Œæœ›èƒ½æ‹¥æœ‰ä¸€ä¸ªå†…å®¹å¹¿æ³›è€Œåˆæœ‰è¶£çš„å¤§ä¼šç¨‹åºã€‚æ‰€ä»¥åœ¨å®¡æŸ¥åˆ†é…ç»™ä½ çš„è®ºæ–‡çš„æ—¶å€™ï¼Œè¯·ç”¨å¼€æ”¾çš„å¿ƒæ€å»è¯„ä»·å’Œæ¨èå®ƒä»¬ã€‚</p>
<p>åŒæ—¶è¦æ³¨æ„ï¼ŒçŸ­æ–‡å¹¶ä¸æ˜¯ä¸€ä¸ªâ€œç¼©çŸ­çš„â€é•¿æ–‡ã€‚çŸ­æ–‡éœ€è¦èƒ½å¤Ÿé€šè¿‡è¾ƒå°‘çš„ç¯‡å¹…æ¥è¡¨è¾¾è§‚ç‚¹å¹¶ä½œå‡ºèšç„¦çš„è´¡çŒ®ã€‚</p>
<p>å‚è€ƒACL 2019å¤§ä¼šï¼Œæˆ‘ä»¬æ¨èå®¡ç¨¿äººé˜…è¯»ä¸€äº›æœ‰ç»éªŒçš„å®¡ç¨¿äººä»¥åŠå¤§ä¼šç»„ç»‡è€…æ’°å†™çš„ç›¸å…³æŒ‡å—ã€‚å°¤å…¶è¦æ¨èï¼š</p>
<ul>
<li>NLPä¸“å®¶ä»¬ï¼ˆMirella Lapata, Marco Baroni, Yoav Artzi, Emily Bender, Joel Tetreault, Ani Nenkova, and Tim Baldwinï¼‰æ’°å†™çš„ä¼˜ç§€åšå®¢ï¼Œæ›¾ç»è¢«ç”¨äºACL 2017å®¡ç¨¿æ¨èï¼š<a href="https://acl2017.wordpress.com/2017/02/23/last-minute-reviewing-advice/" target="_blank" rel="noopener">https://acl2017.wordpress.com/2017/02/23/last-minute-reviewing-advice/</a></li>
<li>é©¬é‡Œå…°å¤§å­¦çš„Nikas Elmqvistæ’°å†™çš„åœ¨å®¡ç¨¿æ—¶é¿å…çŠ¯çš„é—®é¢˜ï¼š<a href="https://sites.umiacs.umd.edu/elm/2016/02/01/mistakes-reviewers-make/" target="_blank" rel="noopener">https://sites.umiacs.umd.edu/elm/2016/02/01/mistakes-reviewers-make/</a></li>
<li>NAACL 2018ç¨‹åºå§”å‘˜ä¼šä¸»å¸­æä¾›çš„å®¡ç¨¿æ ·ä¾‹ï¼ˆæ³¨æ„ï¼šä¸æˆ‘ä»¬çš„å®¡ç¨¿æ¨¡æ¿ä¸å¤ªä¸€æ ·ï¼‰ï¼š<a href="https://naacl2018.wordpress.com/2018/01/20/a-review-form-faq/" target="_blank" rel="noopener">https://naacl2018.wordpress.com/2018/01/20/a-review-form-faq/</a></li>
<li>è¿™é‡Œè¿˜æœ‰ä¸€ç¯‡çŸ­å»ºè®®ï¼š<a href="https://naacl2018.wordpress.com/2017/12/19/some-holiday-reviewing-advice/" target="_blank" rel="noopener">https://naacl2018.wordpress.com/2017/12/19/some-holiday-reviewing-advice/</a> </li>
</ul>
<h2 id="è¾…åŠ©ææ–™"><a href="#è¾…åŠ©ææ–™" class="headerlink" title="è¾…åŠ©ææ–™"></a>è¾…åŠ©ææ–™</h2><p>è¾…åŠ©ææ–™æ˜¯å•ç‹¬ä¸Šä¼ çš„ä¸€ä»½é¢å¤–çš„ææ–™ã€‚è¾…åŠ©ææ–™é¡¾åæ€ä¹‰æ˜¾ç„¶æ˜¯èµ·åˆ°è¾…åŠ©ä½œç”¨çš„ï¼Œå¹¶ä¸”ä½ æ²¡æœ‰ä¹‰åŠ¡è¦å®¡æŸ¥è¿™äº›æ–‡ä»¶ã€‚ä½ å¯ä»¥æŠŠå®ƒå½“åšåƒå…¶ä»–å¼•ç”¨æ–‡çŒ®ä¸€æ ·ï¼Œè¾…åŠ©ä½ æ›´å¥½åœ°äº†è§£èƒŒæ™¯æˆ–è€…è¶…å‡ºè®ºæ–‡å†…å®¹ä¹‹å¤–çš„ä¸€äº›ç»†èŠ‚ä¿¡æ¯ã€‚</p>
<h2 id="ç¬¬äºŒå®¡ç¨¿äºº"><a href="#ç¬¬äºŒå®¡ç¨¿äºº" class="headerlink" title="ç¬¬äºŒå®¡ç¨¿äºº"></a>ç¬¬äºŒå®¡ç¨¿äºº</h2><p>ä¸å¤§å¤šæ•°ä»¥å¾€çš„NLPä¼šè®®ä¸€æ ·ï¼Œä½ å¯ä»¥å‘ä»–äººå¯»æ±‚å¸®åŠ©ã€‚ä½†æ˜¯åœ¨æ’°å†™æœ€ç»ˆè¯„è®ºå¹¶ä¸”ç»™å‡ºæœ€ç»ˆæ¨èåˆ†æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›ä½ èƒ½å¤Ÿå¸æ”¶ç¬¬äºŒå®¡ç¨¿äººçš„å®¡ç¨¿æ„è§ï¼Œå¹¶ä¸”ç”¨ä½ è‡ªå·±çš„è¯­è¨€é‡æ–°æ’°å†™å®¡ç¨¿æ„è§ä»¥åŠè°ƒæ•´ç›¸åº”çš„åˆ†æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ€ç»ˆçš„å®¡ç¨¿æ„è§è¦ååº”å‡ºä½ å¯¹è¯¥è®ºæ–‡çš„æ„è§ï¼Œå¹¶ä¸”éœ€è¦ä½ èƒ½å¤Ÿè¯æ˜åœ¨æœ€ç»ˆå®¡ç¨¿æ„è§ä¸­çš„è§‚ç‚¹æ˜¯åˆç†çš„ã€‚</p>
<h2 id="æŠ•ç¨¿è®ºæ–‡æ ¼å¼"><a href="#æŠ•ç¨¿è®ºæ–‡æ ¼å¼" class="headerlink" title="æŠ•ç¨¿è®ºæ–‡æ ¼å¼"></a>æŠ•ç¨¿è®ºæ–‡æ ¼å¼</h2><p>ç¨‹åºå§”å‘˜ä¼šä¸»å¸­ä»¥åŠé¢†åŸŸä¸»å¸­å·²ç»ç§»é™¤äº†é‚£äº›è¿åæ ¼å¼è¦æ±‚çš„è®ºæ–‡ã€‚æ‰€ä»¥ä½ ä¸éœ€è¦æ‹…å¿ƒä¼šè¢«åˆ†é…åˆ°è¿™äº›æœ‰æ ¼å¼é—®é¢˜çš„è®ºæ–‡ã€‚</p>
<h2 id="é‡è¦æ—¥æœŸ"><a href="#é‡è¦æ—¥æœŸ" class="headerlink" title="é‡è¦æ—¥æœŸ"></a>é‡è¦æ—¥æœŸ</h2><p>æ‰€æœ‰å®¡ç¨¿æ„è§å¿…é¡»åœ¨2020å¹´2æœˆ7æ—¥æ˜ŸæœŸäº”ï¼ˆåœ°çƒä¸Šä»»ä½•åœ°æ–¹çš„åˆå¤œæ—¶é—´ï¼‰è¿”å›ã€‚<font color="orange"><strong>è¯·æ³¨æ„ï¼Œåœ¨ä½œè€…è®ºè¾©ç¯èŠ‚ç»“æŸåï¼Œå®¡ç¨¿äººå°†åœ¨2æœˆ18æ—¥-2æœˆ24æ—¥æœŸé—´å‚ä¸è®¨è®ºç¯èŠ‚</strong></font>ã€‚ä½ çš„è´£ä»»é‡å¤§ï¼Œæ‰€ä»¥ä¸è¦å°†å®¡ç¨¿ä»»åŠ¡æ”¾åˆ°æœ€åä¸€åˆ»æ‰å®Œæˆï¼</p>
<ul>
<li>1æœˆ17æ—¥-2æœˆ7æ—¥ï¼šå®¡ç¨¿æ—¶é—´</li>
<li>2æœˆ12æ—¥-2æœˆ17æ—¥ï¼šä½œè€…è®ºè¾©ç¯èŠ‚</li>
<li>2æœˆ18æ—¥-2æœˆ24æ—¥ï¼šå®¡ç¨¿äººè®¨è®ºæ—¶é—´ï¼ˆé¢†åŸŸä¸»å¸­å‘èµ·è®¨è®ºï¼‰</li>
</ul>
<h1 id="3-IJCAI-2021"><a href="#3-IJCAI-2021" class="headerlink" title="3. IJCAI 2021"></a>3. IJCAI 2021</h1><p><img src="/images/blog/2020/IJCAI/chair.png" alt></p>
<h2 id="å®¡ç¨¿æ¶æ„"><a href="#å®¡ç¨¿æ¶æ„" class="headerlink" title="å®¡ç¨¿æ¶æ„"></a>å®¡ç¨¿æ¶æ„</h2><font color="blue">What are the different roles of the program committee?</font>

<p><strong>PCs (Program Committee members):</strong> participate in only full-paper review phase: write reviews and participate in discussions.<br><strong>SPCs (Senior Program Committee members):</strong> participate in both summary-reject and full-paper review phases. In summary-reject phase: fill in checkbox form and (optional) write brief reviews; in full-paper review phase: write reviews and participate discussions.<br><strong>ACs (Area Chairs):</strong> participate both summary-reject and full-paper review phase. In summary-reject phase: fill in checkbox form and (optional) write brief reviews; in full-paper review phase: <font color="purple">Coordinate reviewers, write meta-reviews and make recommendations.</font><br><strong>SACs (Senior Area Chairs)</strong>: A very small group of leading experts who help cross-check the reviews, meta-reviews and recommendations of ACs.<br><strong>(A)PCC: Program Chair and Associate Program Chairs:</strong> IJCAI has a single Program Chair governing the whole program of the conference. 3 Associate Program Chairs with different expertise are appointed to help the Program Chair to cover the whole AI field.</p>
<p>ä»ä¸Šå¾€ä¸‹æ˜¯å±‚çº§é€æ¸å¢é«˜çš„~</p>
<p>IJCAI 2021 çš„ Program Chair å³ PCC æ˜¯å‘¨å¿—åè€å¸ˆ (Nanjing University)</p>
<h2 id="ä¿å¯†æ€§"><a href="#ä¿å¯†æ€§" class="headerlink" title="ä¿å¯†æ€§"></a>ä¿å¯†æ€§</h2><font color="blue">Who sees whom?</font>

<p>IJCAI-21 review process will be triple blind at the level of Area Chairs (AC), Senior Program Committee members (SPC), and Program Committee members (PC), i.e., AC/SPC/PC cannot see the identities of authors and other AC/SPC/PCs, and vice versa. Author identities are also invisible to Senior Area Chairs (SACs) and vice versa.<br>During the discussion phase, AC/SPC/PCs should avoid disclosing your own identity. You can use CMT number to call other reviewers such as Meta-Reviewer1, Reviewer2, etc. To compensate for information of the hidden reviewer names, you can see the information of â€œhow many years have you worked in Artificial Intelligence?â€ of other reviewers handling the same submission.</p>
<h2 id="IJCAI-2020-çš„å…¶ä»–æ”¹é©"><a href="#IJCAI-2020-çš„å…¶ä»–æ”¹é©" class="headerlink" title="IJCAI 2020 çš„å…¶ä»–æ”¹é©"></a>IJCAI 2020 çš„å…¶ä»–æ”¹é©</h2><ul>
<li><p>é¦–å…ˆï¼Œåœ¨ IJCAI 2020 çš„ã€ŒCall for Papersã€è§„å®šä¸­å°±æ˜ç¡®è¡¨ç¤ºï¼Œè¢« AAAI 2020ã€ECAI 2020ã€AAMAS 2020ã€ICCV 2020 æˆ– ICAPS 2020 æ‹’ç»çš„è®ºæ–‡åœ¨ç»è¿‡å®è´¨æ€§æ”¹è¿›ä¹‹åå¯ä»¥é‡æ–°æäº¤ç»™ IJCAI-PRICAI 2020ï¼Œä½†<strong>ä½œè€…å¿…é¡»ï¼ˆmustï¼‰å£°æ˜è¿™æ˜¯æ‹’ç¨¿é‡æŠ•</strong>ï¼Œè€Œä¸”è¦é™„ä¸Šè¯´æ˜ä¿¡ã€‚è¯´æ˜ä¿¡è¦è§£é‡Šè¢«æ‹’çš„ä¸»è¦åŸå› ä»¥åŠä½œè€…é’ˆå¯¹è¯„å®¡æ„è§æ‰€åšçš„æ”¹è¿›ã€‚è¿™ä»½è¯´æ˜ä¿¡è¦è¿åŒä¹‹å‰çš„è¯„å®¡æ„è§å’Œè¢«æ‹’çš„ç¨¿ä»¶ä¸€èµ·æäº¤ã€‚</p>
</li>
<li><p>è€Œåœ¨ rebuttal é˜¶æ®µï¼Œ<strong>IJCAI 2020 çš„æ–°å®¡ç¨¿æœºåˆ¶ç¦æ­¢ä½œè€…å›ç­”é—®é¢˜ã€åšå‡ºé™„åŠ è§£é‡Šï¼Œä¹Ÿä¸èƒ½è¿½åŠ å®éªŒç»“æœã€‚</strong>è¿™æ„å‘³ç€å®¡ç¨¿äººä¼šå°†æ‰€æœ‰è®ºæ–‡çš„åˆæ¬¡æäº¤ç‰ˆæœ¬å½“åšæœ€ç»ˆç‰ˆæœ¬çœ‹å¾…ï¼Œä»è€Œè®©äººä»¬å¯¹äºè®ºæ–‡ä¼˜åŠ£çš„åˆ¤æ–­èšç„¦äºåˆ›æ–°ç‚¹ä¹‹ä¸Šã€‚</p>
</li>
<li><p>æ­¤å¤–ï¼ŒIJCAI 2020 ä¹Ÿæ›´æ–°äº†å…³äºå•äººæŠ•ç¨¿æ•°é‡çš„ä¸Šé™ï¼Œ<strong>æ¯ä½ä½œè€…çš„æŠ•ç¨¿æ•°ä¸èƒ½è¶…è¿‡ 6 ç¯‡</strong>ï¼Œè€Œå»å¹´çš„è§„å®šæ˜¯ä¸è¶…è¿‡ 10 ç¯‡ã€‚</p>
</li>
</ul>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>NLP</tag>
        <tag>AI</tag>
        <tag>Machine Learning</tag>
        <tag>Data Mining</tag>
        <tag>CV</tag>
        <tag>ML</tag>
        <tag>DM</tag>
        <tag>Artificial Intelligence</tag>
        <tag>Computer Vision</tag>
        <tag>Natural Language Processing</tag>
      </tags>
  </entry>
  <entry>
    <title>PRæ›²çº¿çš„ç»˜åˆ¶</title>
    <url>/2020/11/20/PR%E6%9B%B2%E7%BA%BF%E7%9A%84%E7%BB%98%E5%88%B6/</url>
    <content><![CDATA[<h1 id="1-äºŒåˆ†ç±»"><a href="#1-äºŒåˆ†ç±»" class="headerlink" title="1. äºŒåˆ†ç±»"></a>1. äºŒåˆ†ç±»</h1><p>P-Ræ›²çº¿çš„ç”Ÿæˆæ–¹æ³•ï¼š<strong>æ ¹æ®å­¦ä¹ å™¨çš„é¢„æµ‹ç»“æœå¯¹æ ·æœ¬è¿›è¡Œæ’åºï¼Œæ’åœ¨å‰é¢çš„æ˜¯å­¦ä¹ å™¨è®¤ä¸ºæœ€å¯èƒ½æ˜¯æ­£ä¾‹çš„æ ·æœ¬ï¼Œæ’åœ¨æœ€åçš„æ˜¯æœ€ä¸å¯èƒ½æ˜¯æ­£ä¾‹çš„æ ·æœ¬ï¼ŒæŒ‰æ­¤é¡ºåºé€ä¸ªå°†æ ·æœ¬ä½œä¸ºæ­£ä¾‹é¢„æµ‹ï¼Œåˆ™æ¯æ¬¡å¯ä»¥è®¡ç®—å‡ºå½“å‰çš„æŸ¥å…¨ç‡ã€æŸ¥å‡†ç‡ï¼Œä»¥æŸ¥å…¨ç‡ä¸ºæ¨ªè½´ã€æŸ¥å‡†ç‡ä¸ºçºµè½´åšå›¾ï¼Œå¾—åˆ°çš„æŸ¥å‡†ç‡-æŸ¥å…¨ç‡æ›²çº¿å³ä¸ºP-Ræ›²çº¿</strong>ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´å¯¹æ¯ä¸ªæ ·æœ¬é¢„æµ‹å…¶ä¸ºæ­£ä¾‹çš„æ¦‚ç‡ï¼Œç„¶åå°†æ‰€æœ‰æ ·æœ¬æŒ‰é¢„æµ‹çš„æ¦‚ç‡è¿›è¡Œæ’åºï¼Œç„¶åä¾æ¬¡å°†æ’åºåçš„æ ·æœ¬åšä¸ºæ­£ä¾‹è¿›è¡Œé¢„æµ‹ï¼Œä»è€Œå¾—åˆ°æ¯æ¬¡é¢„æµ‹çš„æŸ¥å…¨ç‡ä¸æŸ¥å‡†ç‡ã€‚è¿™ä¸ªä¾æ¬¡å°†æ ·æœ¬åšä¸ºæ­£ä¾‹çš„è¿‡ç¨‹å®é™…ä¸Šå°±æ˜¯é€æ­¥é™ä½æ ·æœ¬ä¸ºæ­£ä¾‹çš„æ¦‚ç‡çš„åŸŸå€¼ï¼Œé€šè¿‡é™ä½åŸŸå€¼ï¼Œæ›´å¤šçš„æ ·æœ¬ä¼šè¢«é¢„æµ‹ä¸ºæ­£ä¾‹ï¼Œä»è€Œä¼šæé«˜æŸ¥å…¨ç‡ï¼Œç›¸å¯¹çš„æŸ¥å‡†ç‡å¯èƒ½é™ä½ï¼Œè€Œéšç€åé¢è´Ÿæ ·æœ¬çš„å¢åŠ ï¼ŒæŸ¥å…¨ç‡æé«˜ç¼“æ…¢ç”šè‡³æ²¡æœ‰æå‡ï¼Œç²¾åº¦é™ä½ä¼šæ›´å¿«ã€‚</p>
<p>sklearnçš„è®¡ç®—è¿‡ç¨‹ä¸å®šä¹‰ç›¸åæ˜¯æŒ‰æ¦‚ç‡ä»å°åˆ°å¤§é€’å¢çš„é¡ºåºæ¥è®¡ç®—æŸ¥å‡†ç‡ä¸æŸ¥å…¨ç‡çš„ï¼Œå¹¶ä¸”åˆ†åˆ«ä¸ºæŸ¥å‡†ç‡å’ŒæŸ¥å…¨ç‡æ·»åŠ äº†1å’Œ0ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> precision_recall_curve</span><br><span class="line"><span class="keyword">from</span> sklearn.utils.fixes <span class="keyword">import</span> signature</span><br><span class="line"></span><br><span class="line">plt.figure(<span class="string">"P-R Curve"</span>)</span><br><span class="line">plt.title(<span class="string">'Precision/Recall Curve'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'Recall'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Precision'</span>)</span><br><span class="line"><span class="comment">#y_trueä¸ºæ ·æœ¬å®é™…çš„ç±»åˆ«ï¼Œy_scoresä¸ºæ ·æœ¬ä¸ºæ­£ä¾‹çš„æ¦‚ç‡</span></span><br><span class="line">y_true = np.array([<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>])</span><br><span class="line">y_scores = np.array([<span class="number">0.9</span>, <span class="number">0.75</span>, <span class="number">0.86</span>, <span class="number">0.47</span>, <span class="number">0.55</span>, <span class="number">0.56</span>, <span class="number">0.74</span>, <span class="number">0.62</span>, <span class="number">0.5</span>, <span class="number">0.86</span>, <span class="number">0.8</span>, <span class="number">0.47</span>, <span class="number">0.44</span>, <span class="number">0.67</span>, <span class="number">0.43</span>, <span class="number">0.4</span>, <span class="number">0.52</span>, <span class="number">0.4</span>, <span class="number">0.35</span>, <span class="number">0.1</span>])</span><br><span class="line">precision, recall, thresholds = precision_recall_curve(y_true, y_scores)</span><br><span class="line"><span class="comment">#print(precision)</span></span><br><span class="line"><span class="comment">#print(recall)</span></span><br><span class="line"><span class="comment">#print(thresholds)</span></span><br><span class="line">plt.plot(recall,precision)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯è¿™ä¸ªåªæ”¯æŒäºŒåˆ†ç±»ï¼š</p>
<p><img src="/images/blog/2020/pr.png" alt></p>
<a id="more"></a>
<h1 id="2-å¤šåˆ†ç±»"><a href="#2-å¤šåˆ†ç±»" class="headerlink" title="2. å¤šåˆ†ç±»"></a>2. å¤šåˆ†ç±»</h1><p>æŸ¥ä¸­æ–‡çš„æŸ¥äº†å¥½ä¹…éƒ½æ²¡æœ‰æ‰¾åˆ°ï¼ŒğŸ˜“ï¼Œè¿˜æ˜¯è‹±æ–‡å†…å®¹å¤š~</p>
<p>ä¸å†å†™äº†ï¼Œç›´æ¥çœ‹ä¸‹é¢å‡ ä¸ªå†…å®¹å°±å¤Ÿäº†ï¼š</p>
<blockquote>
<p>ä¸­æ–‡ï¼š</p>
<p><a href="https://blog.csdn.net/YE1215172385/article/details/79443552" target="_blank" rel="noopener">https://blog.csdn.net/YE1215172385/article/details/79443552</a></p>
<p>è‹±æ–‡ï¼š</p>
<p><a href="https://scikit-learn.org/stable/auto_examples/model_selection/plot_precision_recall.html" target="_blank" rel="noopener">https://scikit-learn.org/stable/auto_examples/model_selection/plot_precision_recall.html</a></p>
<p><a href="https://www.scikit-yb.org/en/latest/api/classifier/prcurve.html" target="_blank" rel="noopener">https://www.scikit-yb.org/en/latest/api/classifier/prcurve.html</a></p>
</blockquote>
<p>sklearnğŸ®ğŸºï¼ï¼ï¼</p>
]]></content>
      <categories>
        <category>Machine Learning</category>
      </categories>
      <tags>
        <tag>PR-Curve</tag>
        <tag>Machine Learning</tag>
        <tag>sklearn</tag>
        <tag>è¯„ä¼°æ–¹æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>é™ˆå¥•è¿…ç»™å”±æ­Œçˆ±å¥½è€…çš„åæ¡å»ºè®®</title>
    <url>/2020/11/20/%E9%99%88%E5%A5%95%E8%BF%85%E7%BB%99%E5%94%B1%E6%AD%8C%E7%88%B1%E5%A5%BD%E8%80%85%E7%9A%84%E5%8D%81%E6%9D%A1%E5%BB%BA%E8%AE%AE/</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡è½¬è½½è‡ªè€³å¸ï¼š<a href="https://mp.weixin.qq.com/s/hjkXYs7YQBw9LoafUa-C-A" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/hjkXYs7YQBw9LoafUa-C-A</a></p>
</blockquote>
<p>æˆ‘æ˜¯é™ˆå¥•è¿…çš„æ­Œè¿·ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œä»–æ˜¯ä¸€ä¸ªå‡ ä¹æ²¡æœ‰çŸ­æ¿çš„æ­Œæ‰‹ï¼Œä¹Ÿæ˜¯æˆ‘è®¤ä¸ºå½“ä»Šæœ€ä¼šå”±çš„åè¯­æµè¡Œç”·æ­Œæ‰‹ã€‚</p>
<p>é¦–å…ˆä»–æœ‰ä¸€ä¸ªå¤©ç„¶â€œæ˜‚è´µâ€çš„éŸ³è‰²ï¼Œè¿™ç‚¹è·Ÿå”±åŠŸä¸æŠ€å·§éƒ½æ— å…³ï¼Œæ˜¯ä¸€ä¸ªäººå†…åœ¨äººæ ¼ä¸ç²¾ç¥æ ¼è°ƒçš„åæ˜ ï¼›</p>
<p>äºŒæ˜¯ä»–æœ‰å‡ºè‰²çš„è¯­æ„Ÿä¸ä¹æ„Ÿï¼Œä¸ä»…æ¼”å”±åè¯­å¬ä¼—æœ€å–œæ¬¢çš„èŠ­ä¹æŠ’æƒ…æ›²é£æ˜¯ä¸€æµå¥½æ‰‹ï¼Œéå¸¸ä¼šè¡¨è¾¾ï¼ŒåŒæ—¶å› ä¸ºæœ‰æä½³çš„å¾‹åŠ¨æ„Ÿä¸èŠ‚å¥æ„Ÿï¼Œå”±å„ç§ç°ä»£å¾‹åŠ¨å‹æ›²é£ã€å¤å¤é£æ ¼çš„èˆæ›²éŸ³ä¹ï¼Œä»¥åŠä¹é˜ŸåŒ–çš„Jamå‹éŸ³ä¹ä¹Ÿç›¸å½“å‡ºè‰²ï¼Œå› ä¸ºå³å…´èƒ½åŠ›ä¹Ÿå¾ˆå‡ºä¼—ï¼Œä¸åƒå¾ˆå¤šä¼ ç»Ÿçš„â€œå£°ä¹å”±åŠŸå‹â€æ­Œæ‰‹ï¼Œå”±ä¼ ç»Ÿæ›²é£æŒºå¥½ï¼Œå”±ç°ä»£ç‚¹çš„æ›²é£æˆ–æ˜¯æ¬§ç¾åŒ–çš„æ›²é£ï¼Œä¼šæ„Ÿè§‰è¿‡æ—¶åˆæ­»æ¿ï¼›</p>
<p>ä¸‰æ˜¯ä»–æœ‰ç‹¬åˆ°çš„å£°ä¹æŠ€å·§ï¼Œä»–çš„å£°ä¹æŠ€å·§ä¸æ˜¯å¦‚ä»Šç½‘ç»œä¸Šæµè¡Œè®¨è®ºçš„é‚£ä¸€å¥—å£°ä¹æ ‡å‡†ï¼Œä»–çš„å£°ä¹é£æ ¼æ˜¯æŸ”é¡ºã€é€šç•…ã€ä¸°æ»¡ã€æ— ç—•ï¼Œå¬ä¼¼ç®€å•ï¼Œæ¢ä¸ªäººä¸€å”±å°±çŸ¥é“ä¸ç®€å•ï¼Œå³ä½¿æ¢çš„é‚£ä¸ªäººæ˜¯å…¬è®¤çš„å”±å°†ï¼›</p>
<p>å››æ˜¯ä»–çš„æ¼”å”±æœ‰â€œåšåº¦â€ï¼Œè¿™ä¸ªåšåº¦ä¸æ˜¯æŒ‡éŸ³è‰²çš„æµ‘åšï¼Œè€Œæ˜¯æœ‰å†…åœ¨çš„æ”¯æ’‘ï¼Œæ¯”å¦‚è¯´åƒç¦§å¹´çš„ä¸€äº›é’æ˜¥æ—¶ä»£çš„æ­Œæ‰‹ï¼Œå”±å¹´è½»åŒ–æ°”è´¨çš„éŸ³ä¹å€’æ˜¯ä¸é”™ï¼Œä½†å¶å°”åœ¨å¤§å‹é¢å¥–å…¸ç¤¼ä¸Šè‡´æ•¬ä¸€äº›æ°‘æ­Œæ—¶ä»£çš„ç»å…¸æˆ–è€…æœ‰æ–‡åŒ–åº•è•´çš„è€æ­Œï¼Œå°±æ„Ÿè§‰åƒæ˜¯å°å­©åœ¨å”±å¤§äººçš„æ­Œï¼Œè€Œé™ˆå¥•è¿…ï¼Œä»å‡ºé“æ—¶å°±å¼€å§‹å”±æ¸¯ä¹ä¸¤å¤§ä»£è¡¨æ€§è¯äººæ‰€å†™çš„æ·±åˆ»æ™¦æ¶©çš„è¯ï¼Œæœ‰å¤§é‡è¶…å‡ºå¹´è½»ä¸ªäººä½“éªŒä¸ç”Ÿæ´»é˜…å†çš„ï¼Œå…³äºæ—¶ä»£ã€æƒ…æ„Ÿä¸äººç”Ÿä½“ä¼šçš„ä¸»é¢˜ï¼Œä»ä¸€å¼€å§‹æ¼”å”±çš„â€œåšåº¦â€å°±åœ¨ï¼›</p>
<p>äº”æ˜¯ä»–æœ‰éå¸¸å¼ºçƒˆçš„èº«ä½“è‡ªç”±ï¼Œè¿™ç‚¹æˆ‘å»å¹´ç»å¸¸è¯´åˆ°ï¼Œèº«ä½“ä¸è‡ªç”±çš„æ­Œæ‰‹å”±æ­Œå¿…ç„¶å­˜åœ¨é—®é¢˜ï¼Œè€Œè¿™ç‚¹ä¸ä»…æ˜¯å‘ˆç°åœ¨ä»–å¦‚â€œå¤§å¨±ä¹å®¶â€ä¸€èˆ¬çš„èˆå°è¡¨æ¼”ä¸­ï¼Œè€Œä¸”ä¼šå¸¸å‡ºç°åœ¨ä»–å„ç§è®¿è°ˆçš„è‚¢ä½“è¯­è¨€ä¸­ã€‚</p>
<p>å¦å¤–è¿˜æœ‰ä¸€äº›æˆ‘ä¸ªäººçš„è§‚å¯Ÿï¼Œä»–æ˜¯ä¸€ä¸ªå¾ˆâ€œé€šâ€çš„äººï¼Œå•çº¯åˆé€šé€ï¼Œå…³äºéŸ³ä¹ä¸äººç”Ÿéƒ½æœ‰å¾ˆå¤šè‡ªå·±çš„æƒ³æ³•ï¼Œä½†å¯èƒ½å±€é™åœ¨è¯­è¨€è¡¨è¾¾ä¸æ™®é€šè¯ä¸Šï¼Œè¿™ç‚¹ä¸å®¹æ˜“è¢«å†…åœ°è§‚ä¼—æ‰€æ„Ÿå—åˆ°ï¼Œä»Šå¤©çœ‹åˆ°æŠ–éŸ³å®£å¸ƒé™ˆå¥•è¿…å…¥é©»äº†æŠ–éŸ³ï¼Œæƒ³å¿…è¿‘æœŸä¼šæœ‰ä¸€äº›å¤§åŠ¨ä½œï¼Œä¹Ÿæ›´ä¼šåœ¨çŸ­è§†é¢‘æ—¶ä»£è®©æ›´å¤šå†…åœ°è§‚ä¼—æ·±å…¥äº†è§£ä»–ï¼Œæˆ‘æ”¶é›†äº†ä¸€äº›å¤šå¹´æ¥ä»–åœ¨å„ç§è®¿è°ˆä¸­è°ˆè®ºåˆ°çš„ï¼Œå…³äºå”±æ­Œä¸éŸ³ä¹ä¸Šçš„å»ºè®®ä¸ä½“ä¼šï¼Œæƒ³å¿…å¯¹äºå¹´è½»æ­Œæ‰‹ä¼šå¾ˆå—ç”¨ã€‚</p>
<a id="more"></a>
<p><strong>1ã€å¾‹åŠ¨ï¼ˆGrooveï¼‰å¾ˆé‡è¦</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_gif/5C1rMEYel1HfRFicsiciaQ3lviaxQUgaEZicY3OpJE3O0tRvCIxTUx58Bx4sVwicUNMsmCLmHJag5n1HRpprycvwjOqA/640?wx_fmt=gif&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1" alt="img"></p>
<p>è™½ç„¶é™ˆå¥•è¿…æœ€çŸ¥åçš„æ­Œéƒ½æ˜¯æŠ’æƒ…æ­Œæ›²å±…å¤šï¼Œæ¯•ç«Ÿåè¯­å¬ä¼—æ›´æ³¨é‡æ—‹å¾‹ä¸æ­Œè¯ï¼Œä½†æ˜¯å…¶å®ä»–æœ¬äººåçˆ±çš„ï¼Œå¤šæ˜¯ä¸€äº›èŠ‚å¥é²œæ˜çš„å¾‹åŠ¨å‹æ›²é£ï¼Œåœ¨ã€Šä¸­å›½æ–°æ­Œå£°ã€‹åšå¯¼å¸ˆæ—¶ï¼ŒèŠ‚ç›®ç»™ä»–çš„å¤´è¡”æ˜¯â€œæƒ…æ­Œå¤©ç‹â€ï¼Œä»–æ˜æ˜¾å¾ˆä¸å–œæ¬¢è¿™ä¸ªç§°å·ï¼Œè§‰å¾—é‚£ç±»æ­Œä¸èƒ½è®©ä»–äº§ç”Ÿæœ¬èƒ½çš„å…´å¥‹ï¼Œè€Œä»–å–œæ¬¢çš„éŸ³ä¹è¦æœ‰å¼ºçƒˆçš„Grooveï¼Œäº†è§£ä»–çš„éƒ½çŸ¥é“ï¼Œé™ˆå¥•è¿…å¾ˆå–œæ¬¢Funk/Disco/Soulæ›²é£çš„éŸ³ä¹ï¼Œä¸€æ˜¯è¿™æ ·çš„éŸ³ä¹æ›´åŠ ä¹é˜ŸåŒ–ï¼Œæ›´æ³¨é‡ç¼–æ›²ä¸Šçš„éŸ³ä¹æ€§ï¼ŒäºŒæ˜¯è¿™æ ·çš„æ­Œæ›²ç°åœºè¡¨æ¼”èµ·æ¥æ›´ä¸ºé…£ç•…æ·‹æ¼“ã€è‡ªç”±éšæ€§ï¼Œåœ¨å¾ˆå¤šè®¿è°ˆä¸­ï¼Œä»–ç»å¸¸ä¼šç¤ºèŒƒæ€§åœ°è°ƒä¾ƒè‡ªå·±çš„ä¸€äº›æŠ’æƒ…èŠ­ä¹å¾ˆæ— è¶£ï¼Œæ¯”å¦‚ã€Šå©šç¤¼çš„ç¥ç¦ã€‹è¿™é¦–æ­Œï¼Œé€šå¸¸ä¸å¹¸å°±æˆäº†é¶å­ã€‚</p>
<p>è€Œå¾‹åŠ¨çš„é‡è¦æ€§ä¸ä»…ä½“ç°åœ¨éŸ³ä¹ä¸ç¼–æ›²ä¸Šï¼Œå¯¹äºå”±æ­Œæ¥è¯´ä¹Ÿéå¸¸é‡è¦ï¼Œå®ƒä¼šä½“ç°åœ¨å”±æ­Œçš„flowä¸­ï¼Œä¸ä»…åŒ…å«å¾‹åŠ¨æ„Ÿï¼Œè¿˜æœ‰å”±æ­Œæ—¶éŸ³èŠ‚ä¸å¥å­çš„æ—¶å€¼ã€åœé¡¿ã€è¯­æ°”ã€å­—å¥ä¸æ—‹å¾‹å®‰æ’çš„æµåŠ¨ï¼Œå¾ˆå¤šäººä»¥ä¸ºæŠ’æƒ…æ­Œä¸éœ€è¦flowï¼Œå…¶å®æŠ’æƒ…æ­Œæ›´éœ€è¦ï¼Œå› ä¸ºè¦æ‰¾åˆ°æŠ’æƒ…æ…¢æ­Œçš„flowæ›´éš¾ï¼Œè€Œè¿™ç±»æ­Œå”±å¾—å¥½çš„æ­Œæ‰‹ï¼Œæ¯”å¦‚é™ˆå¥•è¿…ï¼Œå­™ç‡•å§¿ï¼Œè«æ–‡è”šç­‰ï¼Œéƒ½éå¸¸äº†è§£flowçš„é‡è¦æ€§ã€‚æˆ‘åæ¥ä¼šæ„Ÿè§‰åˆ°ï¼Œå¦‚ä»Šç½‘ç»œä¸Šäººä»¬è®¨è®ºæ­Œæ‰‹çš„å”±åŠŸæ—¶ï¼Œå¯¹å£°ä¹çš„é‡è§†è¿‡é«˜äº†ï¼Œè€Œéå¸¸å¿½è§†å¾‹åŠ¨çš„é‡è¦æ€§ï¼Œå¤§é™†æœ‰å¾ˆå¤šå£°ä¹èƒ½åŠ›å¾ˆå¼ºä½†æ˜¯flowå¾ˆå·®çš„æ­Œæ‰‹ï¼Œæ— è®ºéŸ³è´¨å†å¥½ï¼Œå£°é‡å†å¤§ï¼Œå¬èµ·æ¥éƒ½å¾ˆæ­»æ¿ï¼Œè€Œå¦‚æœflowå¾ˆå¥½ï¼Œåˆ™èƒ½è®©æ¡£æ¬¡æ˜æ˜¾æå‡ä¸€ä¸¤ä¸ªå°é˜¶ã€‚å¦‚æœä½ æ˜¯ä¸€ä½æ­Œæ‰‹ï¼Œå£°ä¹ã€è¯­æ„Ÿã€æƒ…æ„Ÿéƒ½ä¸é”™ï¼Œä½†æ¼”å”±æ€»æ˜¯ç»™äººæ„Ÿè§‰ç¼ºä¹çµåŠ¨æ„Ÿä¸æµåŠ¨æ„Ÿï¼Œä¹Ÿè®¸éœ€è¦å»äº†è§£å¾‹åŠ¨çš„é‡è¦ã€‚</p>
<p><strong>2ã€å”±æ­Œä¸å¿…è¦å¤ªç”¨åŠ›ï¼Œä½ éœ€è¦èå…¥éŸ³ä¹ï¼Œè€Œä¸æ˜¯åœ¨è·ŸéŸ³ä¹æ‰“æ¶</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/5C1rMEYel1HfRFicsiciaQ3lviaxQUgaEZicYappyu7W608d9geiaC4tUGa2aZoxYt8nuxBo5DzdP3qKmthtJbFAsRXw/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>è¿™æ˜¯é™ˆå¥•è¿…åœ¨é‡‡è®¿ä¸­å¤šæ¬¡æåˆ°çš„è§‚ç‚¹ï¼Œå”±æ­Œå¤ªç”¨åŠ›ï¼Œä¼šä¸§å¤±æ­Œæ›²ç¾æ„Ÿã€‚æˆ‘è®¤ä¸ºå”±æ­Œç”¨åŠ›æ˜¯å”±æ­Œé€‰ç§€æ—¶ä»£å…´èµ·çš„ä¸€ç§é£æ½®ï¼Œä»¥ã€Šä¸­å›½å¥½å£°éŸ³ã€‹ä¸ºä»£è¡¨ï¼Œè‰æ ¹é€‰ç§€éå¸¸éœ€è¦è¡¨ç°è‡ªå·±ï¼Œè¿‡åº¦å‘ˆç°èƒ½åŠ›ï¼Œâ€œé«˜ã€çŒ›ã€å¼ºâ€æœ€å®¹æ˜“ç›´è§‚ä½“ç°ï¼ŒEasonå¤šæ¬¡è¯´è¿‡ï¼Œâ€œä½ æ˜¯åœ¨è¡¨è¾¾ä½œå“ï¼Œè€Œä¸æ˜¯åœ¨è·ŸéŸ³ä¹æ¯”é«˜ä½â€ã€‚</p>
<p>Easonè¯´ï¼Œå”±æ­Œè¦ç”¨çœ‹ä¼¼è½»æ¾çš„æ–¹å¼æ¥ä¸¥è‚ƒåœ°è¡¨è¾¾äº‹ç‰©ï¼Œæ­Œæ‰‹éšç€å¹´é¾„ï¼Œæœºèƒ½ä¼šé€€åŒ–ï¼Œä½†è‹¥å­¦ä¼šç”¨å†…åŒ–çš„æƒ…æ„Ÿæ¥å¤„ç†éŸ³ä¹ï¼Œå“ªæ€•æœºèƒ½é€€åŒ–ï¼Œä½†æ˜¯å”±æ­Œçš„è¡¨è¾¾å´ä¼šç”Ÿé•¿ã€‚ä»–è¯´çš„è¿™ç‚¹å¾ˆç¬¦åˆä¸€äº›æ¬§ç¾divaä»¬çš„çŠ¶æ€ï¼Œä½ ä¼šå‘ç°ï¼Œæ¬§ç¾æœ‰å¾ˆå¤šå¤©åï¼Œåˆ°äº†ä¸€å®šå¹´é¾„å€’å—“äº†ï¼Œé«˜éŸ³é£™ä¸ä¸Šå»ï¼Œç„¶è€Œè¿™ç§çŠ¶å†µé€¼è¿«äº†æ­Œæ‰‹ä»æœºèƒ½ã€æ„Ÿå®˜åˆºæ¿€ï¼Œè¢«è¿«è½¬ç§»å‘æ›´ä¸°å¯Œä¸”ç»†å¾®çš„ä¹æ€§è¡¨è¾¾ï¼Œå”±å¾—å››ä¸¤æ‹¨åƒæ–¤ï¼Œå¼€å§‹æœ‰äº†å¤§å¸ˆé£èŒƒã€‚åœ¨é‡‡è®¿ä¸­ï¼ŒEasonç¤ºèŒƒè¿‡æ—©å¹´ä¸å¦‚ä»Šçš„ä¸¤ç§æ¼”å”±ã€Šå¤•é˜³æ— é™å¥½ã€‹çš„æ–¹å¼ï¼Œæ˜æ˜¾åè€…æ›´è½»ã€æ›´å¼±ã€æ›´æŸ”ï¼Œä½†åŒ…å«çš„æƒ…æ„Ÿä¸æ„è•´å´æ›´ä¸°å¯Œï¼Œä»–æœ‰ä¸€ä¸ªæœ‰è¶£çš„æ¯”å–»ï¼Œè¯´åˆ€å­çŒ›ç„¶åœ°ä¸€åˆ€æ’è¿›å»ï¼Œå’Œåˆ€å­æ…¢æ…¢åœ°æ‰­è½¬è¿›å»ï¼Œç—›ä¸æ„Ÿå—çš„è¿‡ç¨‹éƒ½è¢«æ‹‰é•¿ï¼Œåè€…æ‰æ›´èƒ½å‘½ä¸­æ­Œæ›²çš„æ„Ÿæƒ…ã€‚</p>
<p><strong>3ã€ç°åœºçš„çè´µï¼Œåœ¨äºçŠ¯é”™</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/5C1rMEYel1HfRFicsiciaQ3lviaxQUgaEZicYEvZYqP5pFqIKdI0vhrzdcNVThjXV7ndl69Yjgb6gDQ36nOwg8G5sicQ/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>æˆ‘æƒ³ï¼Œè¿™å¥è¯è¡¨è¾¾çš„æ„æ€ï¼Œæ˜¯è¯´ç°åœºçè´µåœ¨äºå®ƒçš„ä¸å¯å¤åˆ¶æ€§ï¼Œå³ä½¿æ˜¯çŠ¯é”™ã€‚è¡¨æ¼”è€…ä¸è¦æ‹¿é‡å¤çš„ã€ä¸å˜çš„ã€å››å¹³å…«ç¨³çš„ä¸œè¥¿æ¥ç°åœºè¡¨æ¼”ï¼Œç°åœºè¡¨æ¼”è¦æœ‰æ–°é²œçš„ä¸ä¸€æ ·çš„ä¸œè¥¿ï¼Œä¸ºä½•äººä»¬å–œæ¬¢çœ‹çœŸæ­£çš„ç°åœºè¡¨æ¼”ï¼Œå‡å”±å³ä½¿å®Œç¾ä¹Ÿæ„Ÿè§‰ç¼ºä¹ç”Ÿæœºï¼Œæ­Œå¾·è¯´ï¼Œç°åœºè¡¨æ¼”å°±æ˜¯åœ¨èˆå°ä¸Šèµ°é’¢ç´¢ï¼Œå› ä¸ºç°åœºéœ€è¦ä¸€ç§æ„å¤–ä¸æœªçŸ¥ï¼Œåœ¨åˆ°è¾¾é‚£ç§æœªçŸ¥ä¹‹å‰ï¼Œä½ ç©¶ç«Ÿæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œæ˜¯å¦æ˜¯æŒ‰ç…§æˆ‘è„‘ä¸­é¢„æƒ³çš„è·¯å¾„æ¥èµ°ï¼Œå°±åƒè¿›çƒå‰çš„ä¸€åˆ¹é‚£ç»™äººçš„ç´§å¼ ä¸æœŸå¾…ï¼Œè¿™æ˜¯ç°åœºçš„é­…åŠ›ï¼Œå³ä½¿æŠµè¾¾çš„é‚£ä¸€åˆ»æ˜¯å¤±è´¥çš„ï¼Œä½†æ˜¯å®ƒå…ˆå‰æ‰€è°ƒåŠ¨èµ·çš„æƒ…ç»ªä¸åˆºæ¿€å´å·²ç„¶å‘ç”Ÿï¼Œæ‰€ä»¥ä¸è¦å®³æ€•çŠ¯é”™ã€‚</p>
<p>åŒæ—¶ç°åœºè¿˜æœ‰å³å…´çš„é­…åŠ›ï¼Œä»¥åŠåŒä¸€é¦–æ­Œçš„ä¸åŒå¤„ç†æ–¹å¼ï¼ŒEasonè¯´å”±ç°åœºï¼Œæ¯ä¸€é¦–éƒ½è¦è¿½æ±‚ä¸ä¸€æ ·çš„ä¸œè¥¿ï¼Œä¸€æˆä¸å˜æ˜¯æ¯ç‡¥ä¹å‘³çš„ï¼Œè€Œä¸€é¦–æ­Œæ ¹æ®å½“ä¸‹çš„çŠ¶æ€ä¸å¿ƒæƒ…ã€è§‚ä¼—çš„æœŸå¾…ä¸ååº”çš„ä¸åŒï¼Œæ¼”ç»å‡ºæ¥çš„æ„Ÿè§‰å¿…ç„¶ä¸åŒï¼Œå³ä½¿æœ‰é”™è¯¯ä¹Ÿæ˜¯æœ‰ç”Ÿæœºçš„é”™è¯¯ï¼Œå†’é™©ã€å³å…´ã€é”™è¯¯ä¸æ„å¤–ï¼Œéƒ½å¥½è¿‡å‘³åŒåš¼èœ¡çš„å®‰å…¨ã€‚</p>
<p><strong>4ã€ä¸è¦åšè°çš„æ¥ç­äººï¼Œæ­Œæ‰‹åªéœ€åšè‡ªå·±</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/5C1rMEYel1HfRFicsiciaQ3lviaxQUgaEZicY9uoHT0Sic5EP5bZFWW5GbDaVcXvibHBxu4VDJxJE8ysoAs6ia2cxYicPNA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>æ­Œè¿·æƒ³å¿…éƒ½çŸ¥é“ï¼ŒEasonåœ¨ä¹åå¹´ä»£æœ«å‡ºé“æ—¶ï¼Œæ˜¯è¢«å”±ç‰‡å…¬å¸å½“ä½œâ€œå¼ å­¦å‹çš„æ¥ç­äººâ€æ¥æ‰“é€ çš„ï¼Œå½“æ—¶çš„å”±è…”å°±æœ‰åˆ»æ„å¾€å¼ å­¦å‹é æ‹¢çš„ç—•è¿¹ï¼Œå¯¹æ­¤Easonè‡ªå·±å…¶å®å¾ˆç–‘æƒ‘ï¼Œä»–è¯´â€œæˆ‘å½“æ—¶å¿ƒæƒ³ï¼Œå¼ å­¦å‹ä¸æ˜¯è¿˜åœ¨ä¸Šç­å—ï¼Œæˆ‘æ€ä¹ˆæ¥ä»–çš„ç­â€ï¼Œåœ¨é‚£ä¸ªæ—¶å€™ï¼Œä»–çœ‹æ‰€æ¬£èµçš„ä¼ä½°ã€å¼ éœ‡å²³éƒ½å„è‡ªæœ‰è‡ªå·±çš„é£æ ¼ï¼Œå¹¶ä¸”å¸‚åœºåå“ä¹Ÿå¾ˆå¥½ï¼Œä¸ºä»€ä¹ˆè‡ªå·±å°±åªèƒ½å»èµ°ä»–äººçš„è·¯å‘¢ï¼Ÿ</p>
<p>äº‹å®ä¸Šï¼Œèµ°â€œå¼ å­¦å‹æ¥ç­äººâ€è·¯çº¿çš„é™ˆå¥•è¿…å‘å±•ç¡®å®ä¸é¡ºåˆ©ï¼Œä»–å›å¤´è¿‡æ¥çœ‹ï¼Œè¯´é‚£æ—¶å–ä¸å¥½æ˜¯å½“ç„¶çš„ï¼Œæˆ‘éƒ½ä¸æ˜¯åœ¨åšæˆ‘è‡ªå·±ã€‚åšè°çš„æ¥ç­äººï¼Œæ— éæ˜¯ç”¨å”±ç‰‡è¡Œä¸šæ—¢æœ‰çš„ç»éªŒã€ç°æˆçš„æ¨¡å¼å†²ç€é”€é‡ã€åæ°”ã€é‡‘é’±å»ï¼Œè¿™æœ¬èº«çš„åŠ¨æœºå°±éå¸¸åŠŸåˆ©ï¼Œæœ‰æ¬¡çœ‹çª¦æ–‡æ¶›è¯´çš„ä¸€å¥è¯ï¼Œä»–è¯´ï¼Œåœ¨ä»–çš„äººç”Ÿç»éªŒé‡Œï¼Œæ€»æœ‰ä¸€ç§å¾ˆé‚ªçš„æ„Ÿè§‰ï¼Œé‚£å°±æ˜¯ä½ ç›´æ¥å†²ç€ä»€ä¹ˆå»çš„æ—¶å€™ï¼Œé‚£ä¸œè¥¿åè€Œä¼šç¦»ä½ å¾ˆè¿œã€‚æ¯”å¦‚è¯´ä½ æŸæ®µæ—¶é—´é‡Œç›´æ¥å†²ç€æŒ£é’±å»ï¼Œé‚£ä¹ˆé‚£æ®µæ—¶é—´è‚¯å®šæŒ£ä¸åˆ°ä»€ä¹ˆé’±ï¼Œåè€Œæ˜¯ä¸“æ³¨æŠ•å…¥äºè‡ªå·±çœŸæ­£å–œæ¬¢çš„äº‹æƒ…æ—¶ï¼Œé’±åè€Œæ˜¯ä¸€ä¸ªæ°´åˆ°æ¸ æˆçš„äº‹æˆã€‚è¿™ç‚¹æˆ‘å®Œå…¨ç†è§£ï¼Œå½“ä½ å†²ç€ä»€ä¹ˆå»çš„æ—¶å€™ï¼Œæ˜¯åç¦»äº†è‡ªå·±çœŸæ­£å®‰èº«ç«‹å‘½çš„é¢†åŸŸï¼Œå¿ƒæ€ä¼šå¤±è¡¡ã€åˆ¤æ–­ä¼šé”™è¯¯ã€é¢„çŸ¥ä¼šåç¦»ï¼ŒåŒæ—¶ä¸§å¤±äº†æœ¬èƒ½çš„æœ€çè´µçš„ç›´è§‰ä¸æ„ŸçŸ¥ï¼Œè‡ªç„¶ä¸ä¼šæœ‰å¥½çš„ç»“æœã€‚</p>
<p><strong>5ã€å”±æ­Œéœ€è¦æŠ•å…¥æ„Ÿä¸é›†ä¸­åŠ›ï¼Œæ­Œæ›²çš„è¡¨è¾¾ä¼šéšç€äººç”Ÿé˜…å†è€Œä¸°æ»¡</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/5C1rMEYel1HfRFicsiciaQ3lviaxQUgaEZicY90EMnP2LTTTWODn4jxby0MdF2jHHibXYRUXSK20wp2vwan9BPKAlBSQ/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>åœ¨é™ˆå¥•è¿…äºŒåå²å‡ºå¤´çš„æ—¶å€™ï¼Œå”±äº†å¾ˆå¤šç”±æ¸¯ä¹ç»å…¸è¯äººå†™å¾—æ·±åˆ»æ™¦æ¶©ã€å……æ»¡è±¡å¾æ„ä¹‰ä¸”å¤šå¹´åå†çœ‹çŠ¹å¦‚æ—¶ä»£è°¶è¯­çš„æ­Œï¼Œè¿™äº›è¯æ˜¯è¯ä½œè€…çš„äººç”Ÿé˜…å†ä¸ä¸–æƒ…æ„ŸçŸ¥ï¼Œè€Œä¸æ˜¯äºŒåå²å¹´è½»äººçš„äººç”Ÿç»éªŒï¼Œæ¯”å¦‚ã€Šæ—¶ä»£æ›²ã€‹çš„â€œåˆ«äººè¯è¿Ÿæäº†ï¼Œæ„¿æ—¶ä»£ä»ä¸ºæˆ‘ç•™äº†åº§â€ï¼Œã€Šé»„é‡‘æ—¶ä»£ã€‹çš„â€œé»„é‡‘å¹¿åœºå†…åˆ†æ‰‹ï¼Œåœ¨æ—¶ä»£é—¨å¤–å†èšâ€ï¼Œã€Šåé«˜æ½®ã€‹çš„â€œçµä¸æ¬²å·²å‡çº§äº†ï¼Œæ€å¯å†è·Œè½å¯‚å¯¥â€ï¼Œã€Šæˆ‘ä»€ä¹ˆéƒ½æ²¡æœ‰ã€‹çš„â€œå‘½é€”æ— å¥‡ä¸æœ‰æ›¾çˆ±æƒœçš„æ€»è¦æ”¾æ‰‹ï¼Œéš¾æ¥æ‰‹çš„åˆæ¥ç­‰å€™â€ï¼Œã€Šæˆ‘çš„å¿«ä¹æ—¶ä»£ã€‹â€œé•¿è·¯æ¼«æ¼«æ˜¯å¦‚ä½•èµ°è¿‡ï¼Œå®æ„¿è®©ä¹æå¿˜å½¢çš„æˆ‘ï¼Œç¦»æ—¶ä»£è¿œè¿œï¼Œæ²¡äººé—´çƒŸç«â€ç­‰ç­‰ã€‚</p>
<p>åæ¥Easonä¹Ÿè¯´è¿‡ï¼Œé‚£ä¸ªæ—¶å€™ä»–æœªå¿…èƒ½é¢†ä¼šè¿™äº›æ­Œçš„æ„æ€ï¼Œåªèƒ½ç”¨è‡ªå·±å…¨ç„¶çš„æŠ•å…¥ç†è§£ä¸ç›´è§‰å…ˆå”±ã€‚å¹¸å¥½ä»–æœ‰å‡ºä¼—çš„å¤©èµ‹ï¼Œåœ¨é’æ¶©çš„å¹´çºªä¸ç‰‡é¢çš„é¢†ä¼šä¸­ï¼Œä¹Ÿå°†è¿™äº›æ­Œå®Œæˆå¾—ä¸åç¦»ä¸»æ—¨ï¼Œç„¶è€Œæˆ‘è®¤ä¸ºæœ€é‡è¦çš„å°±æ˜¯ä»–æ‰€è¯´çš„å…¨ç„¶çš„æŠ•å…¥ï¼Œè¯äººæ˜¯ä»ä¿¯è§†çš„è§’åº¦æ¥å†™è¿™äº›å…³äºæ—¶ä»£çš„è¯ï¼Œè€ŒäºŒåå²å‡ºå¤´çš„é™ˆå¥•è¿…åˆ™æ˜¯å®Œå…¨æŠŠè‡ªå·±ä½œä¸ºæ—¶ä»£çš„å‚ä¸è€…æŠ•å…¥å…¶ä¸­ï¼Œç”¨ä¸€ä¸ªä½“å¾®ç¼©è€Œå…¨ç„¶çš„ä¾§é¢æ¥æ˜ ç°å‡ºæ•´ä¸ªæ—¶ä»£çš„ä¸€è§’ï¼Œä¹Ÿå½¢æˆäº†å¦ä¸€ç§è¯ é‡Šï¼Œè€Œè¿™äº›æ­Œï¼Œä»–åœ¨åå¹´åã€äºŒåå¹´åå†å”±ï¼Œæœ‰äº†ç»å†ä¸ä½“ä¼šï¼Œæœ‰æ›´å¹¿é˜”çš„ç”»é¢çš„é“ºå¼€ä¸æ„è•´çš„åŠ æ·±ï¼Œä¸€æ­¥æ­¥åœ°ä¸°æ»¡äº†è¡¨è¾¾ï¼Œå¦‚æ­¤å¯¹ç…§æ¥å¬ï¼Œæ›´æ˜¯ç›¸æ˜ æˆè¶£ï¼Œæ„å‘³æ·±é•¿ã€‚</p>
<p><strong>6ã€ä¸è¦æ’æ–¥å¤§ä¼—ä¸å•†ä¸šåŒ–ï¼ŒåŒæ—¶ä¿æŒè‡ªå·±çš„è‰ºæœ¯åŒ–è¿½æ±‚</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/5C1rMEYel1HfRFicsiciaQ3lviaxQUgaEZicY4J7qqTLl6sE0LGGdGjL5r01bRibsHjIPU90q2J3K0eiaOcYFfyKQHYkg/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>é™ˆå¥•è¿…æ›¾ç»è¡¨è¾¾è¿‡ï¼Œæœ‰å¾ˆå¤šæ­Œæ›²çš„å›½è¯­ç‰ˆæœ¬ï¼Œæœ€å¼€å§‹æ˜¯è¢«è‡ªå·±æ‰€åæ„Ÿçš„ï¼Œä»–è®¤ä¸ºé‚£æ˜¯åˆ»æ„è¦å»è¿åˆä¸€ä¸ªå¸‚åœºï¼Œæ¯”å¦‚è¯´ã€Šåå¹´ã€‹ï¼Œå…¬å¸å› ã€Šæ˜å¹´ä»Šæ—¥ã€‹åœ¨ç²¤è¯­å¸‚åœºå¤§è·æˆåŠŸä¹‹æå‡ºè¦åšå›½è¯­ç‰ˆæœ¬ï¼Œèµ·åˆé™ˆå¥•è¿…å¾ˆæ’æ–¥ï¼Œè§‰å¾—æœ‰ç§å–äºŒæ‰‹è´§çš„æ„Ÿè§‰ï¼Œç„¶è€Œåœ¨å…¬å¸çš„åŠè¯´ä¹‹ä¸‹ï¼Œè¿˜æ˜¯æ¼”å”±äº†å›½è¯­ç‰ˆæœ¬ã€Šåå¹´ã€‹ï¼Œæ²¡æƒ³åˆ°åœ¨å†…åœ°å¤§è·æˆåŠŸï¼Œä¹ŸçœŸæ­£åœ°æ‰“å¼€äº†ä»–çš„å†…åœ°å¸‚åœºã€‚</p>
<p>åæ¥ä»–åˆ°å†…åœ°å¼€æ¼”å”±ä¼šï¼Œåœ¨å°ä¸Šç¬¬ä¸€æ¬¡æ¼”å”±ã€Šåå¹´ã€‹çš„æ—¶å€™ï¼Œå°ä¸‹å…¨åœºå¤§åˆå”±ï¼Œçªç„¶ä»¤ä»–å¾ˆå—è§¦åŠ¨ï¼Œä»–å¼€å§‹ç†è§£åˆ°ï¼Œæ—‹å¾‹ä¸æ–‡å­—ã€éŸ³ä¹ä¸ç”Ÿæ´»ã€æ­Œæ›²ä¸å¹³å‡¡ä¸ªä½“ä¹‹é—´ï¼Œæœ‰ç€å¥‡å¦™çš„åŒ–å­¦ååº”ï¼Œä¸€é¦–æ­Œå¯èƒ½ä½ è‡ªå·±å¹¶ä¸é‡è§†ï¼Œä½†ä½ ä¸çŸ¥é“å®ƒä¼šåœ¨ä»€ä¹ˆæ—¶å€™åˆä¸è°çš„ç”Ÿæ´»å½“ä¸‹ä¸€åˆ»å½¢æˆäº†å…±é¸£ï¼Œä¸€ä½æ­Œæ‰‹æ‹¥æœ‰ç€æ— æ•°äººå¦‚æ­¤çš„å…±é¸£ï¼Œé‚£ä¹Ÿæ˜¯ä¸€ç§å¹¸è¿ã€‚åƒå‰ä¸ä¹…ï¼ŒæçŸå’Œå¸¸çŸ³ç£Šåœ¨ã€Šæˆ‘ä»¬çš„æ­Œã€‹ä¸­ä¸´æ—¶åˆå”±äº†æçŸæ—©å¹´çš„ã€Šæ¯ä¸€æ¬¡æƒ³ä½ ã€‹ï¼Œå¾ˆä»¤äººæ„ŸåŠ¨ï¼Œè¿™é¦–æ­ŒæçŸæœ¬äººæ›¾ç»å¹¶ä¸å–œæ¬¢ï¼Œä½†å¸¸çŸ³ç£Šè¯´æ›¾åœ¨ä»–çš„è®°å¿†é‡Œæœ‰ç€é‡è¦çš„ä½ç½®ï¼ŒéŸ³ä¹å°±æ˜¯å¦‚æ­¤å¥‡å¦™ï¼Œä½ å¹¶ä¸çŸ¥é“ï¼Œä½ çš„ä¸€é¦–æ­Œä¼šåœ¨è°çš„é’æ˜¥ä¸ç”Ÿæ´»é‡Œç•™ä¸‹æ·±åˆ»çš„å°è®°ï¼Œåˆæ— æ„ä¸­å½±å“äº†è°ï¼Œåƒä¸‡äººèšåˆåœ¨ä¸€èµ·ï¼Œé‚£æ ·çš„æ„ä¹‰æ˜¯éš¾ä»¥ä¼°é‡çš„ã€‚</p>
<p>æ‰€ä»¥Easonè¯´ï¼Œèƒ½å—åˆ°å¤§ä¼—åŒ–ä¸å•†ä¸šåŒ–çš„è®¤å¯ï¼Œæ˜¯ä½ çš„å¹¸è¿ï¼Œä½†æ˜¯ä¸€å¼ ä¸“è¾‘ï¼Œä¹Ÿå¿…å®šéœ€è¦æœ‰è‡ªå·±çœŸæ­£å–œæ¬¢çš„éŸ³ä¹ï¼Œä»–è®¤ä¸ºåé¦–é‡Œé¢æœ‰ä¸‰å››é¦–ï¼Œå¯¹äºä¸€ä¸ªå¤§ä¼—åŒ–å•†ä¸šæˆåŠŸçš„æ­Œæ‰‹æ¥è¯´ï¼Œå·²ç»è¶³å¤Ÿã€‚</p>
<p>å‰å‡ å¤©ä»–å‚åŠ äº†æŸèŠ‚ç›®çš„â€œä¸€ç§’é’Ÿå‰å¥æŒ‘æˆ˜â€ï¼Œå³æ”¾ä¸€é¦–æ­Œçš„å‰å¥ä¸€ç§’é’Ÿï¼Œç„¶åè¯´å‡ºæ­Œåï¼Œè¿™ä¸ªæŒ‘æˆ˜éš¾åº¦å¾ˆå¤§ï¼Œé‡Œé¢æœ‰ä»–å¤§é‡çš„äºŒåå¹´å‰çš„å†·é—¨æ­Œæ›²ï¼Œæœ‰çš„ç”šè‡³è¿å¾ˆå¤šç²‰ä¸éƒ½æ²¡å¬è¿‡ï¼Œä½†ä»–å¯ä»¥å…¨éƒ¨ç­”å¯¹ï¼Œè€Œä¸”å¾ˆå¤šè¿å‘è¡Œæ—¥æœŸç›‘åˆ¶æ˜¯è°éƒ½è®°å¾—ä¸€æ¸…äºŒæ¥šï¼Œä¸€ç§’é’Ÿçš„å‰å¥ï¼Œæ— éå°±æ˜¯ä¸€ä¸ªå’Œå¼¦ã€ä¸€ä¸ªå•éŸ³ã€æˆ–è€…ä¸€å£°é¼“ï¼Œèƒ½ç²¾å‡†åœ°è®°å¾—æ˜¯å“ªé¦–æ­Œï¼Œè¯´æ˜æ˜¯å¯¹è‡ªå·±çš„ä½œå“çš„ç¼–æ›²æ¯ä¸€ä¸ªéƒ¨åˆ†éƒ½äº†å¦‚æŒ‡æŒï¼Œéƒ½æŠ•å…¥äº†æå¤§çš„å¿ƒåŠ›ï¼Œæœç„¶å¦‚ä»–è‡ªå·±æ‰€è¯´çš„ï¼Œä»–çˆ±è‡ªå·±çš„éŸ³ä¹ã€‚</p>
<p><strong>7ã€ä¸è¦å¼ºè°ƒè‡ªå·±èƒŒåæœ‰å¤šåŠªåŠ›å¿ƒé…¸ï¼Œè§‚ä¼—æ²¡æœ‰å¿…è¦ç†è§£ä½ åšäº†ä»€ä¹ˆ</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/5C1rMEYel1HfRFicsiciaQ3lviaxQUgaEZicY8klA2PTaXYCtFFrrict0INJ1bmjpELzRfSJxcS5o8icsPEFstkEB7CEQ/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>â€œåŠªåŠ›äººè®¾â€æ˜¯å¨±ä¹åœˆè¿‘äº›å¹´æ¥æ¯”è¾ƒæµè¡Œçš„ä¸€ç§æ‰“é€ ï¼Œå°¤å…¶æ˜¯åœ¨å¶åƒæ˜æ˜Ÿä¸æµé‡æ˜æ˜Ÿèº«ä¸Šæœ€ä¸ºå¸¸è§ï¼Œè¿™èƒŒåæœ‰ä¸€ç§éšç§˜çš„è¿åˆç¾¤ä¼—å¿ƒé‡Œçš„æ ¹æºï¼Œå¤§ä¼—åŒæ¶ä¸åŠ³è€Œè·ï¼Œå°¤å…¶æ˜¯å¯¹äºæ‰€å¾—è¿œè¿œè¶…å‡ºå¹³å‡¡ç™¾å§“çš„å…¬ä¼—äººç‰©æ¥è¯´ï¼Œä¸å¤§ä¼—ä¹‹é—´æœ‰ç€å¤©ç„¶çš„é˜¶å±‚é¸¿æ²Ÿï¼Œå¾ˆå®¹æ˜“å¼•å‘äººä»¬åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸å·¥ä½œä¸­é‚£äº›ä¸å…¬å¹³ç«äº‰çš„ç„¦è™‘æ„Ÿï¼Œè¿™å…¶å®å¾ˆæ­£å¸¸ï¼Œæ‰€ä»¥â€œåŠªåŠ›äººè®¾â€å°±æ˜¯ä¸ºäº†å–å·§åœ°åŒ–è§£è¿™ç§çŸ›ç›¾è€Œå½¢æˆçš„ï¼Œå°¤å…¶æ˜¯å¯¹äºæ²¡æœ‰ä½œå“çš„è‰ºäººæ¥è¯´ï¼ŒåŠªåŠ›äººè®¾æ˜¯åœ¨å‘Šè¯‰äººä»¬ï¼Œæˆ‘çš„æ‰€å¾—å…¶å®æ²¡æœ‰é‚£ä¹ˆå®¹æ˜“ï¼Œå½“ä½ è¡¨ç°å¾—è¶Šä¸å®¹æ˜“çš„æ—¶å€™ï¼Œç¾¤ä¼—çš„è´Ÿé¢æƒ…ç»ªå°±å¤šäº†ä¸€ä»½æŠµæ¶ˆï¼ˆæœ¬æ¥è¿™ç§æŠµæ¶ˆæ˜¯è¦é ä½œå“çš„ï¼‰ã€‚ç„¶è€ŒEasonè¯´å¾—å¾ˆå¯¹ï¼Œå¤§å®¶ä¹°ç¥¨ä»˜äº†é’±è¿›æ¥ï¼Œè¦çš„æ˜¯ä¸€ä¸ªæœ€ç»ˆçš„æˆæœï¼Œè‡³äºä½ å—äº†å¤šå¤§å§”å±ˆèƒŒåæœ‰å¤šå°‘åŠªåŠ›ï¼Œè¿™ä¸åœ¨è§‚ä¼—éœ€è¦ç†è§£çš„èŒƒå›´å†…ï¼Œå¼ºè°ƒè‡ªå·±èƒŒåçš„åŠªåŠ›ä¸å¿ƒé…¸ï¼Œä¸ä¼šç»™ä½ çš„ä½œå“è‰ºæœ¯æœ‰æ‰€åŠ æˆï¼Œåªèƒ½ç»™ç²‰ä¸å¢åŠ ä¸€ç§è‹¦æƒ…æ„Ÿçš„ç²˜åˆï¼Œä»¥åŠè®©è‡ªå·±å°‘ä¸€äº›å› â€œæ‰ä¸é…ä½â€è€Œå¼•å‘çš„è´Ÿé¢èˆ†è®ºå£°è®¨ï¼Œäººæ´»äºä¸–ï¼Œæ²¡æœ‰è°çš„ç”Ÿæ´»æ˜¯å®¹æ˜“çš„ï¼Œåšå“ªä¸€è¡Œéƒ½æ˜¯è‰°éš¾çš„ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„è‹¦è¡·ã€‚Easonè¯´ï¼Œä½ çœŸæ­£éœ€è¦åšçš„æ˜¯ï¼Œåœ¨å°ä¸Šå…¨åŠ›æŠ•å…¥ï¼Œä¸‹äº†å°åï¼Œè€ƒè™‘è‡ªå·±è¯¥å¦‚ä½•è¿›å–ã€‚</p>
<p><strong>8ã€è¦æœ‰å¹½é»˜æ„Ÿ</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/5C1rMEYel1HfRFicsiciaQ3lviaxQUgaEZicYNWU9bvhib1n9Xib26otYOUqZiaOvI8dgGR80fyS4AA8ibCpasxORKJhorQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>è™½ç„¶å¹½é»˜æ„Ÿä¸å”±æ­Œæ²¡æœ‰ç›´æ¥çš„å…³è”ï¼Œç„¶è€Œä»»ä½•è¡Œä¸šï¼Œå…·æœ‰å¹½é»˜æ„Ÿéƒ½æ˜¯å¾ˆå¥½çš„ä¸€ç§å“è´¨ï¼Œå¹½é»˜æ„Ÿä¸æ˜¯å–å¼„ä¸åˆ»æ„æŠ–æœºçµï¼Œè€Œæ˜¯ä¸€ç§è‡ªç„¶çš„æµéœ²ï¼ŒEasonè¯´ï¼Œå¹½é»˜æ„Ÿä½¿äººé•¿å‘½ï¼Œè¿™ä¸–ä¸Šéœ€è¦å¤šä¸€äº›çš„å¹½é»˜æ„Ÿï¼Œäººçš„è„‘è¢‹å¾ˆå¤æ‚ï¼Œä½ æ´»å¾—è¶Šä¹…ï¼Œé˜…å†è¶Šå¤šï¼Œæƒ³çš„äº‹æƒ…å°±ä¼šè¶Šå¤šï¼Œè¿™æ—¶å€™ä¿æŒæœ‰è¶£ä¸å•çº¯çš„ç«¥å¿ƒå°±éå¸¸é‡è¦ã€‚ä½ ç»å¸¸ä¼šçœ‹åˆ°ä»–éœ²å‡ºå¾ˆå¤šé¬¼é©¬çš„è¡¨æƒ…ä»¥åŠæœ‰è¶£çš„å¦™è¯­ï¼ŒåŒæ—¶ä¼´éšç€å¤¸å¼ çš„è‚¢ä½“ä¸è§£æ”¾çš„èº«ä½“è¯­è¨€ï¼Œå¹½é»˜æ„Ÿå…¶å®æ˜¯ä¸€ç§å¯¹ç”Ÿæ´»çš„çƒ­æƒ…ä¸ä¹è§‚ã€å¯¹äººä¸äº‹çš„å–„æ„ã€æ•æ·çš„æ€ç»´ååº”ã€èƒ½ä½“å¯Ÿåˆ°äº‹ç‰©ä¹‹é—´ç‰¹åˆ«çš„å…³è”ã€ä»¥åŠæ”¾æ¾ä¸”è‡ªåœ¨çš„ç²¾ç¥çŠ¶æ€çš„é›†åˆï¼Œè¿™äº›ç‰¹è´¨ä¸ä»…åœ¨å¾ˆå¤šè¡Œä¸šä¸­éœ€è¦å…·å¤‡ï¼Œè€Œä¸”å¯¹å¾…ç”Ÿæ´»æœ¬èº«å°±è¯¥å¦‚æ­¤ã€‚</p>
<p><strong>9ã€æ­Œæ‰‹ä¸å¯èƒ½æ°¸è¿œå¤„äºæ—¶ä»£çš„å·…å³°ï¼Œå”¯æœ‰å”±å¥½æ­Œæ‰æ˜¯ä½ çš„æœ¬åˆ†</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/5C1rMEYel1HfRFicsiciaQ3lviaxQUgaEZicY8Dssl5jY19cb12U8KItS1D7ib05rZPjDFDzwBYhCv7icEf28Kkr6bzEQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>è¿‘ä¸¤å¹´å¯¹äºéŸ³ä¹è¡Œä¸šå†²å‡»æœ€å¤§çš„æ–°ç”Ÿäº‹ç‰©æƒ³å¿…å°±æ˜¯æŠ–éŸ³äº†ï¼Œåœ¨æŠ–éŸ³ä¹‹å‰çš„å‡ å¹´æ˜¯éŸ³ä¹ç»¼è‰ºèŠ‚ç›®ï¼ˆ2012ï½2017ï¼‰ï¼ŒéŸ³ç»¼ç»™äº†è§‚ä¼—ä¸€ç§å¼ºè°ƒå”±åŠŸæŠ€æœ¯ã€éœ€è¦æ„Ÿå®˜å†²å‡»çš„ã€è‡ªè¯èƒ½åŠ›çš„ã€ä»¥åŠå¤æ‚åŒ–æ”¹ç¼–å‘ˆç°çš„å®¡ç¾ä¹ æƒ¯ï¼Œè€ŒæŠ–éŸ³â€”â€”åœ¨ä»Šå¹´é‡‘æ›²å¥–é¢å¥–å…¸ç¤¼ä¸Šé™ˆçŠå¦®çš„å‘è¨€ä¸­å°±ç‰¹åˆ«æåˆ°ï¼Œå®ƒæœ€å¤§çš„æ”¹å˜ï¼Œå°±æ˜¯å¤§ä¼—å¯¹äºä¸€é¦–æ­Œâ€œåå‡ ç§’é’Ÿå†³å®šç”Ÿæ­»â€çš„å®¡ç¾ä¹ æƒ¯ã€‚</p>
<p>åœ¨å¦‚ä½•é¢å¯¹çŸ­è§†é¢‘æ—¶ä»£å¦‚æ­¤æ±¹æ¶Œçš„æµªæ½®ï¼Œæˆ‘æƒ³æ— è®ºæ˜¯è€æ­Œæ‰‹è¿˜æ˜¯æ–°äººéƒ½å¾ˆå…³æ³¨ï¼Œä¸è¢«æ—¶ä»£ç»™æ·˜æ±°ï¼Œæˆ–è€…æ˜¯èµ¶ä¸Šè¿™è¶Ÿé£é€Ÿè¡Œé©¶çš„åˆ—è½¦ï¼Œç›®åŠ›æ‰€åŠï¼Œå®ƒå¸¦æ¥äº†å¾ˆå¤šä»ä¸šè€…çš„ç„¦è™‘ï¼Œæˆ‘ä¹Ÿå¸¸å¬åˆ°æœ‰æ­Œæ‰‹æœ‰è¯¸å¦‚æ­¤ç±»ç–‘é—®ï¼Œå¸¸è§çš„æœ‰ä»¥ä¸‹å‡ ç§ï¼Œâ€œåˆ›ä½œè€…æ˜¯å¦åº”è¯¥ä¸»åŠ¨å¢åŠ ä½œå“çš„é€šä¿—æ€§ï¼Œåˆ›ä½œæ›´ç¬¦åˆçŸ­è§†é¢‘å®¡ç¾ä¸ä¼ æ’­ç‰¹æ€§çš„éŸ³ä¹â€ã€â€œåœ¨åå‡ ç§’å®šç”Ÿæ­»çš„æ—¶ä»£ï¼Œè¿˜æ˜¯å¦æœ‰å¿…è¦æŠ•å…¥å…¨éƒ¨å¿ƒåŠ›åšå®Œæ•´ä¸“è¾‘â€ã€â€œçŸ­è§†é¢‘éŸ³ä¹æ›´æ–°æ¢ä»£å¦‚æ­¤ä¹‹å¿«ï¼Œç©¶ç«Ÿä»€ä¹ˆæ ·çš„æ­Œæ‰èƒ½ç•™ä¸‹çœŸæ­£æˆä¸ºç»å…¸â€â€œä¼ ç»Ÿæ­Œæ‰‹å¦‚ä½•åœ¨è¿™ä¸ªæ—¶ä»£è®©æ–°ä¸–ä»£ä»¬å–œæ¬¢â€ã€â€œéŸ³ä¹è¡Œä¸šçš„é—¨æ§›è¶Šæ¥è¶Šä½çš„æ—¶å€™ï¼Œå¦‚ä½•æ‰èƒ½çŸ¥é“è‡ªå·±é€‚ä¸é€‚åˆæˆä¸ºæ­Œæ‰‹â€ã€‚</p>
<p>æˆ‘æƒ³è¿™äº›é—®é¢˜ï¼Œä¸Šè¿°çš„å‡ ç‚¹ï¼Œé™ˆå¥•è¿…éƒ½ä½œä¸ºä¸€ä¸ªåœ¨åè¯­ä¹å›å±¹ç«‹äºŒåå¹´ä¸å€’çš„å‰è¾ˆç»™å‡ºäº†è‡ªå·±çš„ç­”æ¡ˆï¼Œæ°å¥½ä»Šæ—¥æŠ–éŸ³å®£å¸ƒé™ˆå¥•è¿…å·²æ­£å¼å…¥é©»äº†æŠ–éŸ³ï¼Œæˆ‘è§‰å¾—åœ¨ä¸Šè¿°çš„å¾ˆå¤šå»ºè®®ä¸­ï¼Œå¾ˆå¤šè´´åˆè¿™ä¸ªæ—¶ä»£çš„è¶‹åŠ¿ï¼Œæ¯”å¦‚è¯´â€œå¾‹åŠ¨å¾ˆé‡è¦â€ï¼Œå°½ç®¡å¯¹äºEasonæ¥è¯´æ›´å¤šçš„æ˜¯éŸ³ä¹æ€§ä¸Šçš„è€ƒè™‘ï¼Œä½†æ˜¯å¦‚ä»Šæ—¶ä»£çš„éŸ³ä¹å¾‹åŠ¨çš„é‡è¦æ€§è¶Šæ¥è¶Šæ˜æ˜¾ï¼Œåœ¨æŠ–éŸ³ä¸Šå®ƒä¹Ÿä½œä¸ºäº†èŠ‚å¥å¡ç‚¹ä¸è·³èˆé£æ½®çš„ä¸€é¢è€Œè¢«å¼ºçƒˆä½“ç°ï¼›æ¯”å¦‚â€œå¤§èƒ†åœ°çŠ¯é”™â€ï¼Œä¼˜ç‚¹ä¸ç¼ºç‚¹åŒæ ·é²œæ˜ï¼Œæ˜¯è‰æ ¹ä»çŸ­è§†é¢‘é‡Œè„±é¢–è€Œå‡ºçš„æœ€å‡¸æ˜¾çš„ç‰¹å¾ï¼Œæœ‰äººçˆ±æœ‰äººæ¨ï¼Œè¿™ä¸ªæ—¶ä»£äººä»¬ä¸è¦å®Œç¾æ— ç¼ºçš„äº‹ç‰©ï¼Œéœ€è¦ç”Ÿå‘½åŠ›æœ€ä¸ºé²œæ´»ç”ŸåŠ¨çš„äººä¸äº‹ï¼›æ¯”å¦‚â€œä¸èµ°ä»–äººçš„è·¯ï¼Œè¦åšè‡ªå·±â€ï¼Œåœ¨æ–°ä¸–ä»£å¼€å§‹è½°è½°çƒˆçƒˆåœ°ç™»ä¸Šèˆå°æ—¶ï¼Œä¸ªæ€§ä¸å¼ºçƒˆè‡ªæˆ‘çš„é‡è¦æ€§ä¼šæ„ˆå‘å‡¸æ˜¾ï¼Œä¸€å®šå¾—æœ‰è‡ªå·±çš„é²œæ˜è¾¨è¯†æ‰èƒ½åœ¨è¿™æ— è¾¹æ— é™…çš„çŸ­è§†é¢‘æ±ªæ´‹ä¸­è„±é¢–è€Œå‡ºã€‚</p>
<p>åŒæ—¶ï¼ŒEasonè¿˜æ›¾è®²åˆ°çš„è¿™äº›ç‚¹ä¹Ÿæ›´ä¸ºé‡è¦ï¼Œæˆ‘è®¤ä¸ºæ— è®ºæ˜¯å¤„åœ¨å”±ç‰‡æ—¶ä»£ã€éŸ³ç»¼æ—¶ä»£ã€è¿˜æ˜¯çŸ­è§†é¢‘éŸ³ä¹æ—¶ä»£ï¼Œè¿™äº›è¯éƒ½åŒæ ·å—ç”¨ã€‚ä»–è¯´â€œä¸è¦ç”¨åŠŸåˆ©ä¹‹å¿ƒå»åšéŸ³ä¹ï¼Œåªæƒ³å‡ºåä¸æ˜¯ä¸€ä¸ªé•¿è¿œè®¡åˆ’â€ï¼Œå¦‚ä»Šæœ‰å¤ªå¤šäººæƒ³èµ¶ä¸Šè¿™ä¸€æ³¢çŸ­è§†é¢‘çº¢åˆ©ï¼Œæµé‡è‡³ä¸Šï¼Œç„¶åå¾ˆå¤šäººå¾—åˆ°çš„åªæ˜¯æ˜™èŠ±ä¸€ç°çš„å–§åš£ï¼Œæœ‰çš„æ—¶å€™ï¼Œæ—¶ä»£çš„åŠ é€Ÿæœªå¿…ä¸ä¸ªä½“çš„è¿›ç¨‹ä¸€è‡´ï¼Œå°±åƒé™ˆå¥•è¿…åœ¨ä¹åå¹´ä»£èµ°å¼ å­¦å‹è·¯çº¿å‡ºé“ï¼Œè¢«è®¤ä¸ºæ˜¯â€œè¾‰ç…Œçš„æ—¶ä»£ï¼Œç¢°ä¸Šäº†å¤±è´¥çš„ä¸ªäººé™…é‡â€ï¼Œåè€Œåœ¨æ¸¯ä¹æ²¡è½çš„æ—¶å€™ï¼Œä»–æ‰ç§°ä¸ºè¢«å¯„äºˆäº†æ‹¯æ•‘é¦™æ¸¯ä¹å›çš„åšæœ›ã€‚åŒæ—¶ä»–ä¹Ÿè®¤ä¸ºï¼Œä¸è¦é—®è‡ªå·±æ˜¯å¦é€‚åˆåšæ­Œæ‰‹ï¼ŒçœŸæ­£è¦åšæ­Œæ‰‹çš„äººå…¶å®ä¸ä¼šè¿™ä¹ˆé—®ï¼Œé‚£å¯¹ä»–æ¥è¯´æ˜¯ä¸€ç§å¤©ç„¶çš„é©±ä½¿ï¼Œé™¤æ­¤å¤–ä»–åšä¸äº†ä»»ä½•äº‹ï¼Œä»–åˆ«æ— é€‰æ‹©ã€‚Easonè¯´å¯¹äºåˆšå…¥è¡Œçš„æ–°äººæ¥è¯´ï¼Œä¸è¦æ€•åƒäºï¼Œç”¨æœ€è¯šæ³çš„å¿ƒæ¥è¡¨ç°è‡ªå·±å°±å¥½ï¼Œè€Œå¯¹äºè€æ­Œæ‰‹æ¥è¯´ï¼Œè‹¥ä¸é€‰æ‹©ä¸»åŠ¨é¡ºåº”æ—¶ä»£ï¼Œé‚£ä¹ˆæ—¶ä»£ä¸ä¼šé¡ºåº”ä½ ï¼Œè¿™çœ‹ä¸ªäººçš„é€‰æ‹©ï¼Œå¦‚æœæœ‰ä¸€å¤©ï¼Œå½“ä½ æ„Ÿè§‰å·²ç»åšå°½äº†è‡ªå·±çš„æ‰€èƒ½ï¼Œä¹å›è¿˜æ˜¯ä¸èƒ½å†å®¹çº³ä½ ï¼Œé‚£ä¹Ÿæ˜¯è‡ªç„¶çš„äº‹ï¼Œå› ä¸ºäººç”Ÿéƒ½æœ‰å‘¨æœŸï¼Œå¬å¤©å‘½ï¼Œå°½äººäº‹ï¼Œé—®å¿ƒæ— æ„§ï¼Œæ›¾ç»æœ‰äººå¬è¿‡ä½ å”±æ­Œï¼Œå…¶å®å·²ç»æ¯”ä¸–ä¸Šçš„ç»å¤§å¤šæ•°äººå¹¸è¿ã€‚</p>
<p><strong>10ã€éŸ³ä¹é“è·¯å¦‚äººç”Ÿï¼Œä¸è¦å®³æ€•æŒ«æŠ˜ï¼Œå¼¯è·¯çš„æ²¿é€”é£æ™¯ä¼šæ›´å¤š</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/5C1rMEYel1HfRFicsiciaQ3lviaxQUgaEZicY3J35ib1WgTIibbprvOPagrjt9lfbLRGPnaxsU5ovyFEM1Q5rZUn1uhZQ/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>åœ¨2004å¹´ï¼Œé™ˆå¥•è¿…ä¹Ÿæ›¾é™·å…¥è¿›å®¶åº­ã€äº‹ä¸šã€åˆçº¦çš„å¤šé‡ä½è°·ï¼Œç„¶è€Œå›è¿‡å¤´æ¥çœ‹ï¼Œä»–å´å¾ˆå¦ç„¶ï¼ŒEasonè¯´æŒ«æŠ˜æ¯ä¸ªäººéƒ½ä¼šé‡åˆ°ï¼Œå¾ˆå¤šæ—¶å€™ä½ æ¥å—äº†åè€Œè®©è‡ªå·±èƒ½èˆ’æœä¸€ç‚¹ï¼Œæœ‰äº›äº‹è¶ŠæŠ—æ‹’è¶Šä¸å¼€å¿ƒï¼Œè¶ŠæŠ—æ‹’åªä¼šè¶Šé’»ç‰›è§’å°–ï¼Œæ¥å—äº†ï¼Œé€€ä¸€æ­¥å†çœ‹è¿™äº›äº‹ï¼Œä¼šå‘ç°åŸæ¥äººç”Ÿä¸æ­¢æœ‰ä¸€æ¡å‡ºè·¯ã€‚Easonè¯´äººç”Ÿè‹¥æ˜¯ä¸€æ®µä»Aèµ°åˆ°Bçš„è·¯ç¨‹ï¼Œç›´è·¯å°½ç®¡ä¼šé¡ºç•…ï¼Œå¯å¼¯è·¯èƒ½è®©äººæ¬£èµåˆ°æ²¿è·¯æ›´å¤šé£æ™¯ï¼Œåœ¨äººç”Ÿçš„å„ç§è½¬å¼¯ä¹‹å¤„ï¼Œä½ ä¹Ÿä¼šæœ‰æ›´å¤šä¸°å¯Œçš„ä½“ä¼šï¼Œäººç”Ÿçš„ç›®çš„ä¸æ˜¯é¡ºç•…ï¼Œè€Œæ˜¯ä½“éªŒï¼Œçæƒœæ¯ä¸ªå½“ä¸‹æ‰€å‘ç”Ÿçš„äº‹ä»¶ä¸æƒ…æ„Ÿè§¦åŠ¨ï¼Œå› ä¸ºLife is goodã€‚</p>
<p>å°±åƒæœ€è¿‘Easonçš„æ–°æ­Œã€Šè‡´æ˜æ—¥çš„èˆã€‹ï¼Œäººç”Ÿå¦‚ä¸€å‡ºè·Œå®•èµ·ä¼ã€åä¸½ç¹å¤çš„èˆè¹ˆå‰§ï¼Œä¸–äººçš„èˆå§¿å¤§ä¸ç›¸åŒï¼Œæœ‰åä¸½æ¢æˆˆã€å­¤å•èŠ­è•¾ã€è‡ªç”±è¸¢è¸ã€æ€§æ„Ÿçˆµå£«ã€çƒ­æƒ…ä¼¦å·´ï¼Œæœ‰å‡†å¤‡å……åˆ†çš„å®‰æ’ï¼Œä¹Ÿæœ‰ä¸´åœºå‘æŒ¥çš„å³å…´ï¼Œæ„æˆäº†ä¸€ä¸ªç¼¤çº·è€Œè·³åŠ¨çš„ä¸–ç•Œï¼›è¿™èˆè¹ˆå‰§ä¹Ÿå……æ»¡ç€çªå‘ä¸æ„å¤–ï¼Œä¼šè·Œå€’ã€ä¼šå¤±è¯¯ã€ä¼šé”™æ‹ã€ä¼šå¤±æ§ã€æˆ–å¿«æˆ–æ…¢ã€æˆ–æ€¥æˆ–ç¼“ï¼Œå¦‚ç”Ÿæ´»ä¸€èˆ¬ï¼ŒæœªçŸ¥é‡é‡ï¼Œæ— æ³•é¢„çŸ¥ï¼Œä½ åªæœ‰åšå¥½å…¨é¢çš„åº”å¯¹ï¼›è¿™èˆè¹ˆå‰§ä¹Ÿä¸æ­¢ä½ ä¸€äººï¼Œä½ å¯ä»¥çºµæƒ…ç‹¬èˆã€é†‰æ¢¦åŒèˆã€æˆ–ä¸ä¼—äººå…±èˆï¼Œä½ æ˜¯è‡ªå·±å‰§ä¸­çš„ä¸»è§’ï¼Œä¹Ÿæ˜¯ä»–äººä¸–ç•Œçš„é£æ™¯ï¼Œâ€œè·¨å‡ºçš„æ­¥å±¥å¦‚ä½œç”»ï¼Œæ²¿é€”é™å¬å±±æµ·æ¸…é›…â€ï¼Œæ— è®ºæ˜¯æ˜æ—¥è¿˜æ˜¯è¿‡å¾€ï¼Œä»–å¯¹äºäººç”Ÿçš„ä¿¡å¿µä¸æ„¿æ™¯éƒ½å§‹ç»ˆæœªå˜ï¼Œåœ¨äºŒåäºŒå¹´å‰ã€Šæˆ‘çš„å¿«ä¹æ—¶ä»£ã€‹é‡Œç¬¬ä¸€å¥å°±å”±ç€ï¼Œè®©æˆ‘æœ‰ä¸ªç¾æ»¡æ—…ç¨‹ã€‚</p>
]]></content>
      <categories>
        <category>Others</category>
        <category>Music</category>
      </categories>
      <tags>
        <tag>éŸ³ä¹</tag>
        <tag>Music</tag>
        <tag>Eason</tag>
        <tag>é™ˆå¥•è¿…</tag>
        <tag>å”±æ­Œ</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonä¸­çš„æµ‹è¯•å•å…ƒ - doctest</title>
    <url>/2020/11/19/python%E4%B8%AD%E7%9A%84%E6%B5%8B%E8%AF%95%E5%8D%95%E5%85%83-doctest/</url>
    <content><![CDATA[<p>ä½¿ç”¨pythonçš„doctestçš„æ¨¡å—ï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„å¯¹å‡½æ•°è¿›è¡Œæµ‹è¯•~</p>
<font color="orange">

åœ¨å‡½æ•°ä½“ä¸­ï¼Œåœ¨å¼€å¤´çš„æ³¨é‡Šéƒ¨åˆ†ï¼Œä½¿ç”¨">>> function(...)"è¾“å…¥æµ‹è¯•å‚æ•°

åœ¨ä¸‹ä¸€è¡Œè¾“å‡ºç›®æ ‡ç»“æœ

</font>

<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">leaky_data</span><span class="params">(file1, file2)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    æŸ¥çœ‹è®­ç»ƒé›†å’Œæµ‹è¯•é›†æ˜¯å¦å­˜åœ¨æ•°æ®æ³„éœ²</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; leaky_data('train.txt', 'test.txt')</span></span><br><span class="line"><span class="string">    []</span></span><br><span class="line"><span class="string">    æ•°æ®é›†ä¸­è®­ç»ƒé›†å’ŒéªŒè¯é›†ä¸å­˜åœ¨é‡å¤æ•°æ®</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    leaky = []</span><br><span class="line">    samples = set()</span><br><span class="line">    <span class="keyword">with</span> open(file1, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> l <span class="keyword">in</span> f:</span><br><span class="line">            samples.add(json.loads(l)[<span class="string">'text'</span>])</span><br><span class="line">    <span class="keyword">with</span> open(file2, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> l <span class="keyword">in</span> f:</span><br><span class="line">            record = json.loads(l)</span><br><span class="line">            sample = record[<span class="string">'text'</span>]</span><br><span class="line">            <span class="keyword">if</span> sample <span class="keyword">in</span> samples:</span><br><span class="line">                leaky.append(sample)</span><br><span class="line">    leaky = list(set(leaky))</span><br><span class="line">    <span class="keyword">return</span> leaky</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>ç„¶ååœ¨ä¸»ç¨‹åºä¸­ï¼Œä½¿ç”¨ä»¥ä¸‹çš„å†™æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">import</span> doctest</span><br><span class="line">    doctest.testmod()</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ‰€æœ‰çš„æµ‹è¯•éƒ½é€šè¿‡äº†ï¼Œåˆ™ä¸ä¼šæœ‰ä»»ä½•æç¤ºï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/images/blog/2020/pass.png" alt></p>
<p>å¦‚æœå‡ºç°äº†ä¸æ»¡è¶³çš„æƒ…å†µï¼Œåˆ™ä¼šæŠ¥é”™ï¼š</p>
<p><img src="/images/blog/2020/notpass.png" alt></p>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>doctest</tag>
        <tag>æµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>torch.nn.CrossEntropyLoss()</title>
    <url>/2020/11/19/torch-nn-CrossEntropyLoss/</url>
    <content><![CDATA[<p><em>CLASS</em><code>torch.nn.CrossEntropyLoss</code>(<em>weight: Optional[torch.Tensor] = None</em>, <em>size_average=None</em>, <em>ignore_index: int = -100</em>, <em>reduce=None</em>, <em>reduction: str = â€˜meanâ€™</em>)<a href="https://pytorch.org/docs/stable/_modules/torch/nn/modules/loss.html#CrossEntropyLoss" target="_blank" rel="noopener">[SOURCE]</a></p>
<p>This criterion combines <code>nn.LogSoftmax()</code> and <code>nn.NLLLoss()</code> in one single class.</p>
<p>It is useful when training a classification problem with C classes. If provided, the optional argument <code>weight</code> should be a 1D Tensor assigning weight to each of the classes. This is particularly useful when you have an unbalanced training set.</p>
<font color="orange">**The input is expected to contain raw, unnormalized scores for each class.**</font>

<p><em>PS: æˆ‘ä¹‹å‰ä¸ä¼šä¸€ç›´ç”¨é”™äº†å§ï¼Ÿåœ¨ç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™æ˜¯ä¸éœ€è¦è‡ªå·±æ‰‹åŠ¨Softmax()çš„â€¦â€¦å»åšå®éªŒè¯•ä¸€ä¸‹ã€‚ã€‚ã€‚</em></p>
<p><br><a id="more"></a></p>
<p>input has to be a Tensor of size either (minibatch, C) or (minibatch, C, d_1, d_2, â€¦, d_K) with Kâ‰¥1 for the K-dimensional case (described later).</p>
<p>This criterion expects a class index in the range [0, C-1] as the target for each value of a 1D tensor of size <em>minibatch</em>; if <em>ignore_index</em> is specified, this criterion also accepts this class index (this index may not necessarily be in the class range).</p>
<p>The loss can be described as:</p>
<script type="math/tex; mode=display">
\text{loss}(x, class) = -\log\left(\frac{\exp(x[class])}{\sum_j \exp(x[j])}\right) = -x[class] + \log\left(\sum_j \exp(x[j])\right)</script><p>or in the case of the <code>weight</code> argument being specified:</p>
<script type="math/tex; mode=display">
\text{loss}(x, class) = weight[class] \left(-x[class] + \log\left(\sum_j \exp(x[j])\right)\right)</script><p>The losses are averaged across observations for each minibatch. If the <code>weight</code> argument is specified then this is a weighted average:</p>
<script type="math/tex; mode=display">
\text{loss} = \frac{\sum^{N}_{i=1} loss(i, class[i])}{\sum^{N}_{i=1} weight[class[i]]}</script><p>Can also be used for higher dimension inputs, such as 2D images, by providing an input of size (minibatch, C, d_1, d_2, â€¦, d_K)(minibatch,C,d1,d2,â€¦,dK) with K \geq 1Kâ‰¥1 , where KK is the number of dimensions, and a target of appropriate shape (see below).</p>
<ul>
<li><p>Parameters</p>
<p><strong>weight</strong> (<a href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor" target="_blank" rel="noopener"><em>Tensor</em></a><em>,</em> <em>optional</em>) â€“ a manual rescaling weight given to each class. If given, has to be a Tensor of size C<strong>size_average</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" target="_blank" rel="noopener"><em>bool</em></a><em>,</em> <em>optional</em>) â€“ Deprecated (see <code>reduction</code>). By default, the losses are averaged over each loss element in the batch. Note that for some losses, there are multiple elements per sample. If the field <code>size_average</code> is set to <code>False</code>, the losses are instead summed for each minibatch. Ignored when reduce is <code>False</code>. Default: <code>True</code><strong>ignore_index</strong> (<a href="https://docs.python.org/3/library/functions.html#int" target="_blank" rel="noopener"><em>int</em></a><em>,</em> <em>optional</em>) â€“ Specifies a target value that is ignored and does not contribute to the input gradient. When <code>size_average</code> is <code>True</code>, the loss is averaged over non-ignored targets.<strong>reduce</strong> (<a href="https://docs.python.org/3/library/functions.html#bool" target="_blank" rel="noopener"><em>bool</em></a><em>,</em> <em>optional</em>) â€“ Deprecated (see <code>reduction</code>). By default, the losses are averaged or summed over observations for each minibatch depending on <code>size_average</code>. When <code>reduce</code> is <code>False</code>, returns a loss per batch element instead and ignores <code>size_average</code>. Default: <code>True</code><strong>reduction</strong> (<em>string**,</em> <em>optional</em>) â€“ Specifies the reduction to apply to the output: <code>&#39;none&#39;</code> | <code>&#39;mean&#39;</code> | <code>&#39;sum&#39;</code>. <code>&#39;none&#39;</code>: no reduction will be applied, <code>&#39;mean&#39;</code>: the weighted mean of the output is taken, <code>&#39;sum&#39;</code>: the output will be summed. Note: <code>size_average</code> and <code>reduce</code> are in the process of being deprecated, and in the meantime, specifying either of those two args will override <code>reduction</code>. Default: <code>&#39;mean&#39;</code></p>
</li>
<li><p>Shape:</p>
<p>Input: (N, C)(N,C) where C = number of classes, or (N, C, d_1, d_2, â€¦, d_K)(N,C,d1,d2,â€¦,dK) with K \geq 1Kâ‰¥1 in the case of K-dimensional loss.Target: (N)(N) where each value is 0 \leq \text{targets}[i] \leq C-10â‰¤targets[i]â‰¤Câˆ’1 , or (N, d_1, d_2, â€¦, d_K)(N,d1,d2,â€¦,dK) with K \geq 1Kâ‰¥1 in the case of K-dimensional loss.Output: scalar. If <code>reduction</code> is <code>&#39;none&#39;</code>, then the same size as the target: (N)(N) , or (N, d_1, d_2, â€¦, d_K)(N,d1,d2,â€¦,dK) with K \geq 1Kâ‰¥1 in the case of K-dimensional loss.</p>
</li>
</ul>
<p>Examples:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; loss = nn.CrossEntropyLoss()</span><br><span class="line">&gt;&gt;&gt; input = torch.randn(3, 5, requires_grad=True)</span><br><span class="line">&gt;&gt;&gt; target = torch.empty(3, dtype=torch.long).random_(5)</span><br><span class="line">&gt;&gt;&gt; output = loss(input, target)</span><br><span class="line">&gt;&gt;&gt; output.backward()</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Neural Networks</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
        <tag>Loss Function</tag>
        <tag>CrossEntropy</tag>
        <tag>Softmax</tag>
      </tags>
  </entry>
  <entry>
    <title>éŸ©å…ˆåŸ¹ - å¼€æ”¾å¼çŸ¥è¯†è·å–</title>
    <url>/2020/11/18/%E9%9F%A9%E5%85%88%E5%9F%B9-%E5%BC%80%E6%94%BE%E5%BC%8F%E7%9F%A5%E8%AF%86%E8%8E%B7%E5%8F%96/</url>
    <content><![CDATA[<p>è¿‘æœŸäº†è§£åˆ°<a href="http://www.icip.org.cn/team/hanxianpei/" target="_blank" rel="noopener">éŸ©å…ˆåŸ¹</a>æ˜¯ä¸­ç§‘é™¢è½¯ä»¶ç ”ç©¶æ‰€çš„ä¸€ä½è€å¸ˆï¼Œåœ¨Bootstrapping REæ–¹é¢åšäº†å¾ˆå¤šçš„å·¥ä½œï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä¹‹å‰æƒ³è¦å°è¯•çš„æ–¹å‘ï¼Œæ‰€ä»¥åé¢ä¼šå¤šç•™æ„è¿½è¸ªå¤§ä½¬çš„æ­¥ä¼ã€‚</p>
<p><img src="/images/blog/2020/hanxianpei.png" alt></p>
]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
      </categories>
      <tags>
        <tag>Relation Extraction</tag>
        <tag>Rule</tag>
        <tag>Open IE</tag>
        <tag>Bootstraping</tag>
        <tag>Reinforcement Learning</tag>
        <tag>End-to-End</tag>
      </tags>
  </entry>
  <entry>
    <title>å’Œè€å¸ˆèµ¶Deadlineçš„æ³¨æ„äº‹é¡¹</title>
    <url>/2020/11/18/%E5%92%8C%E8%80%81%E5%B8%88%E8%B5%B6Deadline%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/</url>
    <content><![CDATA[<blockquote>
<p>æœ¬ç¯‡æ–‡ç« è½¬è½½è‡ªé™ˆæ€¡ç„¶è€å¸ˆçš„å…¬ä¼—å·ï¼šé™ˆè€å¸ˆæœ‰è¯è¯´</p>
</blockquote>
<p><br></p>
<p>ä»Šå¹´ç”µå­è®¾è®¡è‡ªåŠ¨åŒ–é¢†åŸŸå’Œè®¡ç®—æœºä½“ç³»ç»“æ„é¢†åŸŸçš„ä¸¤å¤§é¡¶çº§ä¼šè®®DACå’ŒISCAçš„æˆªç¨¿æ—¥æœŸæ”¾åœ¨äº†å­¦æ ¡æ„Ÿæ©èŠ‚å‡æœŸçš„å‰ä¸€å¤©æ™šä¸Šï¼ˆ11æœˆ21æ—¥ï¼‰ï¼ŒåŠ ä¸Šä¹‹å‰ä¸€å‘¨æˆªç¨¿çš„CVPRå’ŒæŸä¸ªä¼šè®®ï¼Œç»“æœç»„é‡Œçš„è€å¸ˆå’ŒåŒå­¦éƒ½èµ¶æ­»çº¿ï¼ˆdeadlineï¼‰èµ¶äº†ä¸ªå¤©æ˜åœ°æš—ã€‚éšç€æˆªæ­¢æ—¥æœŸæ—¥ç›Šä¸´è¿‘ï¼Œé™ˆè€å¸ˆçš„è„¾æ°”ä¹Ÿä¸€å¤©åä¼¼ä¸€å¤©ã€‚</p>
<p>æŠŠæ–‡ç« äº¤ä¸Šå»ä¹‹åï¼Œå›æƒ³æ•´ä¸ªè¿‡ç¨‹ï¼Œè§‰å¾—è¿˜æ˜¯æœ‰å¿…è¦å†™ä¸€ç¯‡æ–‡ç« å¯¹å„ä½æ›¾ç»ã€æ­£åœ¨ã€æˆ–æœªæ¥å°†ä¼šèµ¶æ­»çº¿çš„åšå£«ç”ŸåŒå­¦ä»¬è¯´å‡ å¥æœ‰å…³å¦‚ä½•æé«˜å’Œå¯¼å¸ˆä¸€èµ·èµ¶æ–‡ç« æ­»çº¿æ•ˆç‡çš„</p>
<p><strong>åå¤§æ³¨æ„äº‹é¡¹</strong>ã€‚</p>
<h1 id="ä¸€-è¯·ææ—©å¼€å§‹"><a href="#ä¸€-è¯·ææ—©å¼€å§‹" class="headerlink" title="|| ä¸€ ||  è¯·ææ—©å¼€å§‹"></a><strong>|| ä¸€ ||</strong>  <strong>è¯·ææ—©å¼€å§‹</strong></h1><p>ä»Šå¹´æœ‰ä¸ªåˆšæ¥çš„å­¦ç”Ÿåœ¨æ–‡ç« æˆªç¨¿ä¸¤å‘¨å‰æˆ‘ç¢°åˆ°ä»–åœ¨å®éªŒå®¤çœ‹è§†é¢‘ã€‚æˆ‘è¯´ä½ æ²¡äº‹åšäº†?èµ¶ç´§èµ¶æ–‡ç« ã€‚ä»–è¯´æ²¡é—®é¢˜ï¼Œæˆ‘å¿ƒé‡Œæœ‰æ•°ã€‚ç»“æœä»–çš„ç¬¬ä¸€ç¨¿ä¸€ç›´åˆ°æˆªç¨¿å‰ä¸‰ä¸ªå°æ—¶æ‰å…¨éƒ¨å®Œæˆã€‚æˆ‘åªå¥½é™ªç€ä»–æ”¹åˆ°æœ€åä¸€åˆ†é’Ÿã€‚ç”±äºæ—¶é—´æœ‰é™ï¼Œå¾ˆå¤šæ®µè½éƒ½åªèƒ½æ”¹äº†æ”¹è‹±è¯­ï¼Œå¯¹äºé€»è¾‘å’Œç»†èŠ‚åˆ™å®Œå…¨æ— æ³•ç»†æŠ äº†ã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿè¿™æœ‰ä¸¤ä¸ªé‡è¦çš„åŸå› ï¼š</p>
<p>1)     <strong>äººä»¬å¾€å¾€ä»¥ç»“æ„è¿›åº¦ä¸ºåŸºå‡†æ¥çº¿æ€§é¢„æµ‹æ‰€éœ€è¦çš„æ—¶é—´ï¼Œè€Œå¿½ç•¥ç»†èŠ‚å¯èƒ½å¸¦æ¥çš„é¢å¤–å¼€é”€ã€‚</strong>æ¯”å¦‚åœ¨æ‹¥æœ‰è¯¦ç»†å›¾çº¸çš„æƒ…å†µä¸‹ï¼Œå»ºé€ ä¸€ä¸ªå¤§æ¥¼æ‰€éœ€çš„æ¡†æ¶éœ€è¦çš„æ—¶é—´è¿œä½äºè£…æ°´ç”µã€è£…ä¿®çš„æ—¶é—´ã€‚è€Œæ²¡æœ‰ç»éªŒçš„å­¦ç”Ÿç»å¸¸ä»¥è‡ªå·±å†™ä¸€æ®µè¯çš„æ—¶é—´é•¿çŸ­æ¥é¢„æµ‹æ’°å†™æ•´ä¸ªè®ºæ–‡æ‰€éœ€è¦çš„æ—¶é—´ï¼Œé€ æˆä¸¥é‡ä½ä¼°ã€‚å®é™…ä¸Šï¼Œ<strong>æ’°å†™ä¸€ç¯‡å­¦æœ¯è®ºæ–‡æ‰€éœ€çš„æ—¶é—´çš„ç»å¤§éƒ¨åˆ†æ˜¯èŠ±åœ¨æ–‡ç« å¤§ä½“æ¡†æ¶å‡ºæ¥ä¹‹åçš„é€»è¾‘è°ƒæ•´ã€è¡¥å……æ•°æ®ã€è‹±æ–‡ä¿®æ”¹ã€ç”šè‡³ç”»å›¾è¡¨ç­‰çç¢çš„ç»†èŠ‚ä¸Šã€‚</strong></p>
<p>2)     æ‰€æœ‰çš„äººéƒ½æ˜¯è¶Šåˆ°æ­»çº¿æ•ˆç‡è¶Šé«˜ï¼Œä½†<strong>ä½œä¸ºä¸€ä¸ªåä½œçš„æ•´ä½“ï¼Œæ•™ç ”ç»„æœ€åçš„ç“¶é¢ˆå®é™…ä¸Šåœ¨å¯¼å¸ˆ</strong>ï¼šä»–/å¥¹è¦é¢å¯¹æ‰€æœ‰æŠ•ç¨¿çš„æ–‡ç« è€Œä¸æ˜¯ä½ ä¸€ä¸ªäººï¼è¶Šå¾€åï¼Œä½ å•ä½æ—¶é—´æ‰€è·å¾—çš„è€å¸ˆçš„æœ‰æ•ˆåé¦ˆè¶Šå°‘ã€‚ä»è€Œé™ä½ä½ ä¿®æ”¹çš„æ•ˆç‡ã€‚</p>
<p>æ‰€ä»¥ï¼Œ<strong>å°½æ—©å¼€å§‹ï¼Œå°½æ—©åˆ©ç”¨ä½ å’Œå¯¼å¸ˆçš„ç©ºä½™æ—¶é—´</strong>ï¼Œä¼šæå¤§çš„æé«˜æœ€ç»ˆè®ºæ–‡çš„è´¨é‡ã€‚<a id="more"></a></p>
<p><br></p>
<h1 id="äºŒ-ä¸€å®šè¦åˆ—æçº²å’Œå®éªŒè®¡åˆ’"><a href="#äºŒ-ä¸€å®šè¦åˆ—æçº²å’Œå®éªŒè®¡åˆ’" class="headerlink" title="|| äºŒ ||  ä¸€å®šè¦åˆ—æçº²å’Œå®éªŒè®¡åˆ’"></a><strong>|| äºŒ ||  ä¸€å®šè¦åˆ—æçº²å’Œå®éªŒè®¡åˆ’</strong></h1><p>å¾ˆå¤šå­¦ç”Ÿå–œæ¬¢æ‰“è…¹ç¨¿ï¼Œä¸å–œæ¬¢æŠŠæ–‡ç« çš„æçº²å’Œå®éªŒè®¡åˆ’åˆ—å‡ºæ¥ï¼Œæ›´ä¸å–œæ¬¢ç…§ç€æçº²å’Œè®¡åˆ’å»å†™ï¼Œè§‰å¾—å¤šæ­¤ä¸€ä¸¾ï¼Œè€å­åªè¦å®éªŒç»“æœæ£’æ£’å“’å°±å¥½äº†ä¹ˆï¼</p>
<p><strong>åˆ—æçº²å’Œå®éªŒè®¡åˆ’æœ€é‡è¦çš„åŠŸç”¨æ˜¯ä¸ºäº†æ¢³ç†æ•´ä¸ªæ–‡ç« çš„é€»è¾‘è„‰ç»œã€‚</strong>é¡¶çº§ä¼šè®®å½•å–ç‡éƒ½åœ¨20%ç”šè‡³ä»¥ä¸‹ã€‚æ‰€ä»¥è¯„å®¡è®ºæ–‡å¦‚æˆ˜åœºï¼Œå„ä¸ªè¯„å®¡äººæ‹¿ç€æ”¾å¤§é•œæ¥å¯»æ‰¾æ–‡ç« ä¸­ç¼ºå¤±çš„é€»è¾‘é“¾æ¡ï¼Œæ¯”å¦‚ï¼šè¿™ä¸ªæ¨è®ºçš„é€»è¾‘æ˜¯æ€ä¹ˆæ¥çš„ï¼Ÿæœ‰å……è¶³æ•°æ®æ”¯æŒä¹ˆï¼Ÿæœ‰æ²¡æœ‰æŸä¸ªè®¾è®¡å‚æ•°æ²¡æœ‰è®¨è®ºï¼Ÿè¿˜ç¼ºäº†å“ªä¸ªå®éªŒç»“æœï¼Ÿåªè¦æœ‰ä¸€ä¸ªè¿™æ ·çš„é€»è¾‘é“¾æ¡ç¼ºå¤±ï¼Œåœ¨è¯„å®¡ä¼šä¸ŠåŸºæœ¬å°±å¯ä»¥ä¸€é”¤å®šéŸ³çš„æ‹’æ‰è¿™ç¯‡æ–‡ç« ã€‚å› æ­¤ï¼Œ<strong>æçº²å’Œå®éªŒè®¡åˆ’ä¼šè®©ä½ å’Œå¯¼å¸ˆä»å¤´ä¸€ç¯ç¯çš„æ£€éªŒæ•´ä¸ªè®ºæ–‡ä¸­æ•…äº‹çš„é€»è¾‘é“¾æ¡ï¼Œç¡®ä¿æ¯ä¸€ä¸ªç»“è®ºéƒ½æœ‰è¶³å¤Ÿçš„å‰æå‡è®¾ã€è®¨è®ºå’Œå®éªŒæ•°æ®æ”¯æŒï¼Œå‰åå‘¼åº”ï¼Œç¡®ä¿æ— æ‡ˆå¯å‡»ã€‚</strong></p>
<p>æˆ‘ç»å†è¿‡çš„ç»å¤§éƒ¨åˆ†çš„å†™ä½œè¿‡ç¨‹ä¸­ï¼Œæ–‡ç« å„éƒ¨åˆ†é€»è¾‘å…³ç³»éƒ½ä¼šåœ¨ä¸€å¼€å§‹é¢‘ç¹è°ƒæ•´ï¼Œå¥½åƒæ­ç§¯æœ¨ä¸€æ ·ï¼Œ<strong>æœ€ç»ˆæ‰¾åˆ°ä¸€ä¸ªæœ€ç¨³å®šï¼Œæœ€éš¾æ”»å‡»çš„ç»“æ„ã€‚</strong>åœ¨å…¶ä¹‹ä¸Šå¼€å§‹å†™ä½œå’Œå‡†å¤‡å®éªŒç»“æœï¼Œå¦‚åŒåšå®Œå½¢å¡«ç©ºä¸€æ ·ï¼Œæ—¢è‡ªä¿¡ã€åˆé«˜æ•ˆã€‚</p>
<p><br></p>
<h1 id="ä¸‰-è¯·å¤šèŠ±ç‚¹æ—¶é—´ç»™æ–‡ç« å–ä¸ªå¥½åå­—"><a href="#ä¸‰-è¯·å¤šèŠ±ç‚¹æ—¶é—´ç»™æ–‡ç« å–ä¸ªå¥½åå­—" class="headerlink" title="|| ä¸‰ ||  è¯·å¤šèŠ±ç‚¹æ—¶é—´ç»™æ–‡ç« å–ä¸ªå¥½åå­—"></a><strong>|| ä¸‰ ||  è¯·å¤šèŠ±ç‚¹æ—¶é—´ç»™æ–‡ç« å–ä¸ªå¥½åå­—</strong></h1><p>å¾ˆå¤šäººè§‰å¾—ç»™æ–‡ç« å–åå­—ä¸é‡è¦ï¼ŒæŒ¯æŒ¯æœ‰è¯çš„è¯´åªè¦æ–‡ç« å†™çš„å¥½ï¼Œå®éªŒç»“æœå……åˆ†ï¼Œæ•ˆæœå¥½ï¼Œå°±ä¸€å®šä¼šæœ‰å¥½ç»“æœã€‚</p>
<p>æˆ‘ä»¬æ¥æƒ³è±¡ä¸€ä¸‹ä½ çš„æ–‡ç« æ˜¯æ€ä¹ˆè¢«è¯„å®¡çš„ï¼š</p>
<p><strong>é¦–å…ˆ</strong>æ˜¯å¤§ä¼šæŠ€æœ¯å§”å‘˜ä¼šä¸»å¸­æ”¶åˆ°è¿™äº›æ–‡ç« ï¼Œç„¶åæ ¹æ®æ–‡ç« çš„åå­—ï¼ˆç¬¬ä¸€æ¬¡ï¼æœ‰æ—¶å€™è¿˜åŠ ä¸Šæ–‡ç« çš„æ‘˜è¦ï¼‰ï¼Œåˆ†é…åˆ°ä»–/å¥¹è®¤ä¸ºåˆé€‚çš„è¯„å®¡äººæ‰‹é‡Œã€‚æœ‰çš„ä¼šè®®è¿˜è¦å…ˆåˆ†åˆ°åˆé€‚çš„track;</p>
<p><strong>ç„¶å</strong>å†ç”±track chairåˆ†åˆ°å„ä¸ªè¯„å®¡äººæ‰‹é‡Œã€‚è€Œè¿™äº›è¯„å®¡äººå¾ˆå¤šå¹¶ä¸ä¼šé©¬ä¸Šçœ‹è¿™äº›æ–‡ç« ï¼ˆä»–ä»¬ä¹Ÿå¿™å•Šï¼‰ï¼Œè€Œæ˜¯æ ¹æ®è‡ªå·±çš„æ—¶é—´å®‰æ’ï¼Œçœ‹ä¸€ä¸‹å„ä¸ªæ–‡ç« çš„æ ‡é¢˜ï¼ˆç¬¬äºŒæ¬¡ï¼ï¼‰ï¼Œå†³å®šå“ªä¸€ç¯‡å…ˆå®¡ï¼Œå“ªä¸€ç¯‡åå®¡ã€‚äººä¹‹å¸¸æƒ…ï¼Œå¤§å®¶éƒ½ä¼šå…ˆçœ‹è‡ªå·±æœ€æ„Ÿå…´è¶£æˆ–è€…æœ€æ“…é•¿çš„æ–¹å‘çš„æ–‡ç« ã€‚è€Œåœ¨æœ€åè¯„å®¡æ„è§æäº¤æˆªè‡³æ—¥æœŸå‰æŠŠè‡ªå·±ä¸å–œæ¬¢çš„æ–‡ç« åŒ†åŒ†çœ‹ä¸€ä¸‹èµ¶ç´§æäº¤ã€‚</p>
<p><strong>æœ€å</strong>ï¼Œæ–‡ç« ä¼šåœ¨<font color="red">è¯„å®¡ä¼šä¸Š</font>è¢«å¤§å®¶è®¨è®ºã€‚è€Œä¼šä¸Šå¤§å®¶åšçš„ç¬¬ä¸€ä»¶äº‹æƒ…ï¼Œå°±æ˜¯ä¸»å¸­è¯»ä¸€éæ–‡ç« ç¼–å·å’Œé¢˜ç›®ï¼ˆç¬¬ä¸‰æ¬¡ï¼‰ï¼Œæé†’å¤§å®¶æ³¨æ„è¯¥æ–‡ç« è¦è¢«è®¨è®ºã€‚</p>
<p><strong>åœ¨ä»¥ä¸Šè¿‡ç¨‹ä¸­ï¼Œä½ çš„æ–‡ç« é¢˜ç›®ä¼šè¢«æå‡ºè‡³å°‘ä¸‰æ¬¡ã€‚</strong></p>
<p>é‚£ä¹ˆç°åœ¨é—®é¢˜æ¥äº†ï¼Œå¦‚æœä¸¤ç¯‡æ–‡ç« è´¨é‡å·®ä¸å¤šï¼Œä¸€ç¯‡çš„é¢˜ç›®å¹³å¹³æ— å¥‡ç”šè‡³ä¼šå¼•èµ·è¯»è€…å¯¹å†…å®¹çš„è¯¯è§£ï¼Œè€Œå¦ä¸€ç¯‡çš„é¢˜ç›®ä¸å†…å®¹éå¸¸è´´åˆ‡è€Œä¸”å¸å¼•çœ¼çƒï¼Œé‚£ä¹ˆå“ªç¯‡æ–‡ç« è¢«åˆ†é…åˆ°ä¸åˆé€‚çš„è¯„å®¡äººæ‰‹ä¸­çš„å‡ ç‡é«˜ï¼Ÿå“ªç¯‡æ–‡ç« è¯„å®¡äººä¼šå…ˆè¯»ã€ç²¾è¯»ã€æå‡ºæ›´æœ‰å»ºè®¾æ€§çš„å®¡ç¨¿æ„è§ï¼Ÿå“ªç¯‡æ–‡ç« ä¼šåœ¨æ¡ä»¶å·®ä¸å¤šçš„æƒ…å†µä¸‹è¢«æœ€ç»ˆé€‰ä¸­?</p>
<p>ä¸ç”¨æˆ‘å†å¤šè¯´äº†å§ï¼Ÿ</p>
<p><br></p>
<h1 id="å››-ç†Ÿæ‚‰ä½ çš„å†™ä½œå·¥å…·å’Œtemplate"><a href="#å››-ç†Ÿæ‚‰ä½ çš„å†™ä½œå·¥å…·å’Œtemplate" class="headerlink" title="|| å›› ||  ç†Ÿæ‚‰ä½ çš„å†™ä½œå·¥å…·å’Œtemplate"></a><strong>|| å›› ||</strong>  <strong>ç†Ÿæ‚‰ä½ çš„å†™ä½œå·¥å…·å’Œtemplate</strong></h1><p>æ— è®ºä½ æ˜¯ç”¨wordè¿˜æ˜¯latexï¼Œç”¨ä¸ç”¨endnoteï¼Œç”¨ä»€ä¹ˆç¯å¢ƒï¼Œè¯·ç†Ÿæ‚‰ä»–ä»¬çš„ä½¿ç”¨æŠ€å·§ã€‚</p>
<p>ä¸€ä¸ªæ’ç‰ˆæ¼‚äº®çš„æ–‡ç« æ€»ä¼šç»™äººèµå¿ƒæ‚¦ç›®çš„æ„Ÿè§‰ã€‚æ‰€ä»¥ï¼Œç†Ÿæ‚‰ä½ çš„å†™ä½œå·¥å…·å¾ˆé‡è¦ã€‚æ¯ä¸ªä¼šè®®éƒ½æœ‰ä»–ä»¬æä¾›çš„templateï¼Œæœ‰çš„å¥½çœ‹ï¼Œæœ‰çš„ä¸å¥½çœ‹ï¼Œæœ‰çš„äººå¯ä»¥æŠŠä¸å¥½çœ‹çš„å˜å¾—å¥½çœ‹ï¼Œæœ‰çš„äººåˆ™å¯ä»¥æŠŠå¥½çœ‹çš„templateå˜ä¸‘ã€‚è¿™äº›éƒ½æ˜¯éœ€è¦èŠ±æ—¶é—´æ¥åŸ¹å…»çš„ç»éªŒã€‚</p>
<p>ä¸è¿‡<strong>è‡³å°‘ï¼Œä½ å¯ä»¥åšåˆ°æ ¼å¼ä¸€è‡´</strong>ï¼š</p>
<p>æ‰€æœ‰æ®µè½çš„<strong>ç¼©è¿›ç›¸åŒ</strong>ï¼Œå‰åçš„<strong>spaceä¸€è‡´</strong>ï¼›</p>
<p>å›¾å’Œè¡¨æ°¸è¿œåœ¨å›¾æ–‡æ¡†é‡Œï¼Œè€Œå›¾æ–‡æ¡†æ°¸è¿œæ”¾åœ¨å››ä¸ªè§’ï¼›</p>
<p>Title 1æ‰€æœ‰å•è¯å¤§å†™, Title 2çš„æ¯ä¸ªè¯ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™, Title 3ã€å›¾çš„captionå’Œè¡¨çš„titleåªæœ‰ç¬¬ä¸€ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼›</p>
<p>æ‰€æœ‰çš„referenceé‡Œé¢<strong>æ‰€æœ‰itemçš„æ–‡ç« é¢˜ç›®ã€å·ã€é¡µã€å¹´ä»½æ ¼å¼éƒ½ä¸€è‡´</strong>ã€‚</p>
<p>ä¸€ä»½å¹²å¹²å‡€å‡€ã€æ•´æ•´é½é½ã€æ ¼å¼æ¼‚äº®ã€èŠ±å¿ƒæ€çš„draftå·²ç»å‘å¯¼å¸ˆè¡¨æ˜çš„ä½ è®¤çœŸçš„æ€åº¦å’Œä¸€å®šè¦ä¸­çš„å†³å¿ƒã€‚â€œæ‰€ä»¥ï¼Œè¯·ï¼ˆå¯¼å¸ˆï¼‰æ‚¨ä¹Ÿä¸€èµ·åŠªåŠ›å§ï¼â€</p>
<p>æœ€åï¼Œæ— è®ºä½ é€‰æ‹©æ€æ ·çš„è½¯ä»¶æ¥ç®¡ç†ä½ çš„referencesï¼Œä¸€å®šè¦æŒä¹‹ä»¥æ’ï¼Œä¸è¦å˜æ¥å˜å»ã€‚</p>
<p><br></p>
<h1 id="äº”-ä¸è¦æŠŠåŒ†åŒ†è€Œå°±çš„ç¬¬ä¸€ç¨¿ç»™å¯¼å¸ˆ"><a href="#äº”-ä¸è¦æŠŠåŒ†åŒ†è€Œå°±çš„ç¬¬ä¸€ç¨¿ç»™å¯¼å¸ˆ" class="headerlink" title="|| äº” ||  ä¸è¦æŠŠåŒ†åŒ†è€Œå°±çš„ç¬¬ä¸€ç¨¿ç»™å¯¼å¸ˆ"></a><strong>|| äº” ||</strong>  <strong>ä¸è¦æŠŠåŒ†åŒ†è€Œå°±çš„ç¬¬ä¸€ç¨¿ç»™å¯¼å¸ˆ</strong></h1><p><strong>å¾ˆå¤šäººä¹ æƒ¯äº†æŠŠå†™å®Œçš„ä¸œè¥¿æœªç»æ£€æŸ¥å°±ç›´æ¥äº¤ç»™å¯¼å¸ˆæ£€æŸ¥ã€‚</strong>æœ‰çš„æ—¶å€™æ˜¯å› ä¸ºæ—¶é—´ç´§æ€¥ï¼Œæœ‰çš„æ—¶å€™æˆ–è®¸ä»…ä»…æ˜¯å› ä¸ºæ‡’ã€‚ä½†<strong>è¯·è®°ä½ï¼Œåƒä¸‡ä¸è¦è¿™ä¹ˆåšã€‚</strong></p>
<p>æˆ‘è·Ÿæˆ‘çš„å­¦ç”Ÿè¯´ï¼Œæ— è®ºæ˜¯ä»–è¿˜æ˜¯æˆ‘ï¼Œæˆ–è€…ä»»ä½•äººã€‚ä½ æŠŠä½ ä»»ä½•å†™å¥½çš„ç¨¿å­æ”¾ä¸€å‘¨å›å¤´çœ‹ï¼Œéƒ½ä¼šæœ‰ä¸€ç§â€œè¿™æ˜¯ä»€ä¹ˆé¬¼â€çš„æ„Ÿè§‰ã€‚æ‰€ä»¥æ— è®ºå¦‚ä½•ï¼Œè¯·æŠŠä½ çš„ç¨¿å­å¤šè¯»å‡ éï¼Œç¡®ä¿ä½ å·²ç»ç«­å°½å…¨åŠ›æŠŠå®ƒå†™çš„æ¸…æ¥š-æ¸…æ¥š-å†æ¸…æ¥šï¼ˆé‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼‰äº†ä¹‹åï¼Œå†ç»™ä½ çš„å¯¼å¸ˆçœ‹ã€‚</p>
<p>å¯¹äºæ²¡æœ‰å‡†å¤‡å¥½å°±ç»™æˆ‘æ”¹çš„ç¨¿å­ï¼Œé€šå¸¸æˆ‘é‡åˆ°çš„æƒ…å†µæœ‰ä»¥ä¸‹ä¸‰ç§ï¼š</p>
<p><strong>æ•…äº‹çš„é€»è¾‘æœ‰ç‘•ç–µï¼š</strong>æçº²å’Œå®éªŒè®¡åˆ’åªèƒ½ä¿è¯æ•´ä½“æ¡†æ¶çš„é€»è¾‘æ­£ç¡®ã€‚å¹¶ä¸èƒ½ä¿è¯æ²¡æœ‰æ–‡å­—å°¤å…¶æ˜¯å¥ä¸å¥ä¹‹é—´å’Œä¸€å¥è¯å†…å‰åçš„é€»è¾‘ç‘•ç–µã€‚å¦‚æœæ™ºå•†æ²¡é—®é¢˜ï¼ˆè¿™ä¸ªå¤§å®¶éƒ½ä¸ä¼šæ‰¿è®¤çš„ï¼‰ï¼Œé‚£é€šå¸¸å‡ºç°è¿™ç§æƒ…å†µå”¯ä¸€çš„åŸå› æ˜¯æ‡’ï¼ˆå¾—æƒ³ï¼‰ï¼Œä¿—ç§°æƒ³åˆ°å“ªé‡Œå†™åˆ°å“ªé‡Œã€‚</p>
<p><strong>è‹±è¯­è¯´ä¸æ¸…æ¥šï¼š</strong>æˆ‘æ¯æ¬¡é—®æˆ‘çš„å­¦ç”Ÿè¿™ä¸ªæˆ‘è¯»ä¸æ‡‚çš„æ—¶å€™ï¼Œå¤§å¤šæ•°äººéƒ½ä¼šè¯´ï¼šè¿™ä¸ªæˆ‘ä¸çŸ¥é“æ€ä¹ˆè¯´ï¼ˆæ‰€ä»¥æˆ‘èƒ¡å†™äº†ä¸€ä¸ªè¯·æ‚¨æ¥æ”¹ï¼‰ï¼Œè¯´çš„ç†ç›´æ°”å£®ã€‚ä½†ä½ æœ‰æ²¡æœ‰try your bestå»å†™æ˜ç™½ï¼ˆæ¯”å¦‚è¯»äº†åˆ«äººçš„æ–‡ç« æˆ–è€…googleäº†åˆ«äººæ€ä¹ˆå†™ï¼‰è¿˜æ˜¯èƒ¡ä¹±å†™äº†ä¸€ä¸ªå¯¼å¸ˆæ˜¯è¯»çš„å‡ºæ¥çš„ã€‚<strong>æŠŠä¸æƒ³å¹²çš„è„æ´»æƒ³éƒ½ä¸æƒ³å°±ç•™ç»™å¯¼å¸ˆï¼Œä½ å°†æ°¸è¿œæ— æ³•æé«˜è‡ªå·±ã€‚</strong></p>
<p><strong>å¤§é‡çš„è¯­æ³•å’Œæ‹¼å†™çš„ä½çº§é”™è¯¯ï¼š</strong>æ²¡å•¥è¯´çš„ï¼Œè¿™æ„å‘³ç€ä½ å·²ç»æ”¾å¼ƒä½ è‡ªå·±äº†ã€‚è¦ä¹ˆå›å»é‡æ–°æ£€æŸ¥ï¼Œè¦ä¹ˆä½ è¿˜æ˜¯æ‰¾ä¸€ä»½æ›´é€‚åˆä½ çš„èŒä¸šé“è·¯å§ã€‚</p>
<p><strong>æ— è®ºä»¥ä¸Šå“ªä¸€ç§ï¼Œæˆ‘ä¼šè·Ÿå­¦ç”Ÿè¯´ï¼šå¯¹ä¸èµ·ï¼Œè¯·æ‹¿å›å»ã€‚</strong>è®°ä½åªæœ‰ä½ è‡ªå·±å°½åŠ›äº†ä¹‹åï¼Œåˆ«äººæ‰ä¼šå°½åŠ›å¸®ä½ ã€‚</p>
<p><br></p>
<h1 id="å…­-ç”¨reviewerçš„è§†è§’å»å†™æ–‡ç« "><a href="#å…­-ç”¨reviewerçš„è§†è§’å»å†™æ–‡ç« " class="headerlink" title="|| å…­ ||  ç”¨reviewerçš„è§†è§’å»å†™æ–‡ç« "></a><strong>||</strong> <strong>å…­ ||  ç”¨reviewerçš„è§†è§’å»å†™æ–‡ç« </strong></h1><p>æ–‡ç« æ˜¯å†™ç»™reviewerå’Œè¯»è€…çœ‹çš„ï¼Œä¸æ˜¯å†™ç»™è‡ªå·±çš„æ—¥è®°ã€‚æ‰€ä»¥ï¼Œè¦ä»ä¸€ä¸ªreviewerçš„è§’åº¦æ¥ç»„ç»‡å’Œæ’°å†™ä½ çš„æ–‡ç« ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä½ å¯èƒ½<strong>éœ€è¦è€ƒè™‘çš„ç»†èŠ‚</strong>ï¼š</p>
<p><strong>æ–‡ç« çš„ç»“æ„æ˜¯å¦åˆç†</strong>ï¼ŒåŒ…æ‹¬å„ä¸ªéƒ¨åˆ†é•¿åº¦æ˜¯å¦åˆé€‚ï¼Œintroå’Œbackgroundæ˜¯ä¸æ˜¯å¤ªé•¿ï¼ŸProposed methodæ˜¯ä¸æ˜¯å¤ªçŸ­è®©äººè§‰å¾—ç†è®ºè´¡çŒ®ä¸å¤Ÿï¼Ÿå®éªŒæ•°æ®æ˜¯ä¸æ˜¯å¤ªçŸ­ï¼Œæ•°æ®æ˜¯ä¸æ˜¯å¤ªå°‘è®©äººè§‰å¾—æ‰€åšçš„è®¨è®ºä¸å¤Ÿæ·±å…¥ç»†è‡´ï¼Ÿ</p>
<p><strong>å›¾ã€è¡¨ã€å…¬å¼çš„æ•°é‡</strong>æ˜¯ä¸æ˜¯åˆé€‚ï¼Ÿå¤ªå¤šè®©äººè§‰å¾—çº·ä¹±ï¼Œå¤ªå°‘è®©äººè¯»èµ·æ¥ç´¯ï¼ˆæƒ³è±¡ä¸€ä¸‹å¤§æ®µå¤§æ®µçš„æ¯ç‡¥è‹±æ–‡ï¼‰ã€‚<strong>ä½ç½®</strong>æ˜¯ä¸æ˜¯å‡ºç°åœ¨ä»–ä»¬åº”è¯¥å‡ºç°çš„åœ°æ–¹ï¼ˆæ¯”å¦‚ä¸éœ€è¦ç¿»é¡µå°±å¯ä»¥æ‰¾åˆ°æ–‡ä¸­æåˆ°çš„å›¾è¡¨ï¼‰ã€‚è¿™æ¬¡æäº¤è¿˜æœ‰äº”åˆ†é’Ÿçš„æ—¶å€™æˆ‘å‘ç°æœ‰ä¸ªå­¦ç”Ÿæœ‰ä¸€å¼ è¡¨ç«Ÿç„¶ä»æ¥æ²¡æœ‰åœ¨æ­£æ–‡æåˆ°è¿‡ï¼ˆå½“æ—¶ä¸¤çœ¼çœŸçš„æ˜¯é©¬ä¸Šä¸€é»‘å•Šï¼ï¼‰</p>
<p>æ˜¯ä¸æ˜¯æ‰€æœ‰çš„<strong>ç¼©å†™</strong>ä¹‹å‰éƒ½å®šä¹‰è¿‡ï¼Ÿæ˜¯ä¸æ˜¯æ»¡ç¯‡æœ‰å¤ªå¤šçš„ç¼©å†™ï¼Ÿæ ¼å¼æ˜¯ä¸æ˜¯å¤ªç´§æˆ–è€…å¤ªæ¾ï¼Ÿå›¾çš„<strong>é¢œè‰²</strong>æ˜¯ä¸æ˜¯å¤ªè¿‡é²œè‰³ï¼ˆæ¯”å¦‚æˆ‘ä»¬ç»„çš„ä¸€ä¸ªåŒå­¦å–œæ¬¢ç”¨â€˜è±¹çº¹â€œçº¹ç†çš„ç›´æ–¹å›¾<img src="https://res.wx.qq.com/mpres/htmledition/images/icon/common/emotion_panel/smiley/smiley_0.png?tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img">ï¼‰æˆ–è€…å¤ªè¿‡å•è°ƒï¼ˆå°¤å…¶ä¸è¦ç”¨Excelè‡ªå¸¦çš„defaultè®¾ç½®ï¼‰ï¼Ÿ</p>
<p>æœ€åï¼Œ<strong>è¦ç”¨reviewerèˆ¬æŒ‘å‰”çš„çœ¼å…‰å»å¯¹è‡ªå·±çš„å·¥ä½œæå‡ºè´¨ç–‘ï¼Œç„¶ååœ¨æ–‡ç« å°½é‡å»ä¸€ä¸€addressè¿™äº›ç–‘é—®</strong>ï¼šè¯„å®¡ä¸“å®¶åœ¨è¿™è¡Œæ··äº†å¤šå¹´ï¼Œä½ èƒ½çœ‹å‡ºæ¥çš„é—®é¢˜ï¼Œä»–ä»¬ç»å¯¹èƒ½çœ‹å‡ºæ¥ã€‚è€Œä½ çœ‹ä¸å‡ºæ¥çš„ï¼Œå¹¶ä¸ä»£è¡¨ä»–ä»¬çœ‹ä¸å‡ºæ¥ã€‚åƒä¸‡ä¸è¦æœ‰ä¾¥å¹¸å¿ƒç†ã€‚</p>
<p>å¦‚æœä½ ä¸çŸ¥é“è¯¥æ€ä¹ˆåšï¼Œ<strong>æ‰¾ä¸ªå®éªŒå®¤å…¶ä»–ä¸ç†Ÿæ‚‰ä½ å·¥ä½œçš„åŒå­¦è¯»ä¸€ä¸‹</strong>ï¼Œå¦‚æœä»–è¯»çš„è¾›è‹¦æ™¦æ¶©æˆ–è€…å‘ç°äº†æ˜æ˜¾çš„é€»è¾‘æ¼æ´ï¼Œé‚£è¯´æ˜ä½ çš„æ–‡ç« è¿˜éœ€è¦è¿›ä¸€æ­¥çš„ä¿®æ”¹æ¶¦è‰²ã€‚</p>
<p><br></p>
<h1 id="ä¸ƒ-ä¸è¦ä¸åŠ æ€ç´¢çš„æ¥å—å¯¼å¸ˆçš„revision"><a href="#ä¸ƒ-ä¸è¦ä¸åŠ æ€ç´¢çš„æ¥å—å¯¼å¸ˆçš„revision" class="headerlink" title="|| ä¸ƒ ||  ä¸è¦ä¸åŠ æ€ç´¢çš„æ¥å—å¯¼å¸ˆçš„revision"></a><strong>|| ä¸ƒ ||  ä¸è¦ä¸åŠ æ€ç´¢çš„æ¥å—å¯¼å¸ˆçš„revision</strong></h1><p>æˆ‘ä¸€æ¬¡è·Ÿä¸€ä¸ªå­¦ç”Ÿè¯´ï¼šè¯·æŠŠè¿™é‡Œçš„AAAæ”¹æˆBBBã€‚å­¦ç”Ÿå¾ˆå¿«å°±æ”¹å¥½ç»™æˆ‘äº†ã€‚æˆ‘æ‹¿åˆ°åçœ¼å‰ä¸€é»‘ï¼šä»–çœŸçš„å°±åœ¨åªæˆ‘æŒ‡å‡ºçš„é‚£ä¸€è¡Œé‡ŒæŠŠAAAæ”¹äº†BBBï¼Œè€Œä¸”çœŸçš„å°±åªæ”¹äº†è¿™ä¹ˆä¸€è¡Œï¼è€Œçœ¼çœ‹ç€ä¸‹ä¸€æ®µçš„AAAè¿˜æ˜¯AAAï¼</p>
<p>æˆ‘ä¸æ˜¯æ€€ç–‘ä½ ä¸ä¼šç”¨å…¨æ–‡å¯»æ‰¾-æ›¿æ¢åŠŸèƒ½ï¼Œè€Œæ˜¯æƒ³è¯´ä½ <strong>å¦‚ä½•æœ‰æ•ˆçš„åœ¨å¯¼å¸ˆçš„åé¦ˆä¸‹è¿…é€Ÿæé«˜è‡ªå·±ã€‚</strong></p>
<p>å¯¼å¸ˆå†’ç€wordå¯èƒ½ä¼šcrashçš„é£é™©åšæŒç”¨track revisionçš„æ–¹å¼æ”¹ä½ çš„wordæ–‡æ¡£æˆ–è€…åšæŒæŠŠpdfæ‰“å‡ºæ¥ç”¨ç¬”ä¿®æ”¹å†è®©ä½ ä¸€å­—ä¸€å­—çš„æ•²è¿›latexä¸æ˜¯ä¸ºäº†ä¸ºéš¾ä½ ï¼Œè€Œæ˜¯ä¸ºäº†é€¼ä½ è‡ªå·±ä»”ç»†æ€è€ƒä»–ä¸ºä»€ä¹ˆè¿™ä¹ˆä¿®æ”¹ã€‚å¦‚æœä½ è½»è½»æ¾æ¾çš„accept all revisionsï¼Œé‚£è¿™äº›åŠŸå¤«å°±ç™½è´¹äº†ã€‚</p>
<p><strong>å†™æ–‡ç« å’Œåšç§‘ç ”ä¸€æ ·ï¼Œè¦ä¸¾ä¸€åä¸‰ã€‚</strong>ä»…ä»…æ”¹æ­£å¯¼å¸ˆæŒ‡å‡ºçš„é‚£ä¸ªé”™è¯¯æ˜¯ä¸å¤Ÿçš„ï¼Œè¦å­¦ä¼šå°†å…¶æ¨å¹¿è‡³æ›´æ™®éçš„æƒ…å†µå¹¶æŠŠè¿™äº›æƒ…å†µéƒ½ä¿®æ”¹è¿‡æ¥ã€‚æ¯”å¦‚ä½ ä¼šç»å¸¸å‘ç°è€å¸ˆæŠŠä½ å†™çš„ä¸€ä¸ªé•¿å¥å­æ‰“æˆå‡ ä¸ªçŸ­å¥å­ã€‚è¿™æ˜¯å› ä¸ºå¤§å¤šæ•°ä¸­å›½å­¦ç”Ÿç”¨ä»å¥æ—¶å®¹æ˜“çŠ¯è¯­æ³•é”™ï¼Œè€Œä¸”ç”±äºè¯­è¨€ä¹ æƒ¯é—®é¢˜å¾€å¾€è¯ä¸è¾¾æ„ã€‚çŸ­å¥å­æ¯”è¾ƒå®¹æ˜“è¯´æ¸…æ¥šé—®é¢˜ã€‚é‚£ä½ ä¸‹æ¬¡å†å†™çš„æ—¶å€™ï¼Œå°±è¦åœ¨å…¨æ–‡ä¸­éƒ½é¿å…è¿™ç§æƒ…å†µã€‚è€Œä¸è¦åªæ˜¯è€å¸ˆæ”¹äº†å“ªé‡Œï¼Œä½ å°±æ¥å—é‚£é‡Œã€‚</p>
<p>æœ€åï¼Œå¦‚æœä½ è§‰å¾—è€å¸ˆçš„æ„è§ä¸å¯¹æˆ–è€…å¯¹ä½ çš„æ–‡å­—ç†è§£æœ‰è¯¯ï¼ˆè¿™ç»å¸¸å‡ºç°åœ¨å­¦ç”Ÿæ–‡å­—è¯ä¸è¾¾æ„çš„æƒ…å†µï¼‰ï¼Œè¯·ç›´æ¥è·Ÿè€å¸ˆè¯´ä»–å“ªé‡Œé”™äº†ï¼Œä¸è¦æ†‹åœ¨å¿ƒé‡Œã€‚åè¿‡æ¥ï¼Œä¹Ÿè¯·å¯¹è€å¸ˆæå‡ºçš„æ„è§ä¸è¦å¤ªdefensiveï¼Œç€æ€¥è§£é‡Šï¼ˆæˆ‘ä¸ºä»€ä¹ˆä¼šçŠ¯è¿™ä¸ªé”™è¯¯ï¼‰ï¼Œè¿˜æ˜¯èµ¶ç´§å›å»ä¿®æ”¹æ–‡ç« æœ€é‡è¦ã€‚Deadlineå‰å¤§å®¶éƒ½å¿™çš„å››è„šæœå¤©ï¼Œè°ä¹Ÿä¸ä¼šæœ‰å¿ƒæƒ…å¬ä½ çš„å¿ƒè·¯å†ç¨‹ã€‚<strong>æ— è®ºè€å¸ˆè¿˜æ˜¯å­¦ç”Ÿï¼Œé”™äº†å°±æ”¹ï¼Œåœ¨æ”¹æ­£ä¸­æé«˜ï¼ˆè¿™ä¸ªå¾ˆé‡è¦ï¼‰ï¼Œå°±å¤Ÿäº†ã€‚</strong>ç­‰åˆ°æ–‡ç« ä¸­äº†ï¼Œå†å›å‘³ä¹Ÿä¸è¿Ÿã€‚</p>
<p>æœ€åçš„æœ€åï¼Œ<strong>è¯·ä¿ç•™ä½ æ–‡ç« çš„æ¯ä¸€ä¸ªç‰ˆæœ¬ï¼ˆæœ€å¥½ä¸€å¤©ä¸€ä¸ªï¼‰</strong>ï¼Œç„¶åæœ‰æ—¶é—´<strong>æŠŠå¯¼å¸ˆä¿®æ”¹åçš„æœ€ç»ˆæŠ•å‡ºç¨¿å’Œè¿™äº›ç‰ˆæœ¬ä¸€ä¸€åšå¯¹æ¯”</strong>ï¼Œæƒ³ä¸€æƒ³å¯¼å¸ˆä¸ºä»€ä¹ˆè¦è¿™ä¹ˆä¿®æ”¹ï¼Œä¸€å®šä¼šå—ç›ŠåŒªæµ…ã€‚</p>
<p><br></p>
<h1 id="å…«-ä¸è¦ç…§æŠ„-ä¿ç•™æ‰€æœ‰æ¨å¯¼å’Œå®éªŒç»†èŠ‚"><a href="#å…«-ä¸è¦ç…§æŠ„-ä¿ç•™æ‰€æœ‰æ¨å¯¼å’Œå®éªŒç»†èŠ‚" class="headerlink" title="|| å…« ||  ä¸è¦ç…§æŠ„, ä¿ç•™æ‰€æœ‰æ¨å¯¼å’Œå®éªŒç»†èŠ‚"></a><strong>|| å…« ||  ä¸è¦ç…§æŠ„, ä¿ç•™æ‰€æœ‰æ¨å¯¼å’Œå®éªŒç»†èŠ‚</strong></h1><p>è¿™æ˜¯åå¤§æ³¨æ„äº‹é¡¹é‡Œé¢å”¯ä¸€<strong>è·Ÿå­¦æœ¯é“å¾·æœ‰å…³</strong>çš„éƒ¨åˆ†ï¼Œä½†ä¹Ÿæ˜¯æœ€ä¸èƒ½ç¢°çš„<strong>é«˜å‹çº¿</strong>ã€‚</p>
<p><strong>ä¸è¦ç…§æŠ„åˆ«äººä»»ä½•æ–‡å­—ï¼</strong>æ— è®ºæ˜¯æŠ€æœ¯çš„è¿˜æ˜¯éæŠ€æœ¯çš„ã€‚å¾ˆå¤šå­¦ç”Ÿè§‰å¾—å› ä¸ºä¸æ˜¯æŠ€æœ¯è´¡çŒ®ï¼ŒæŠ„åˆ«äººçš„introå’Œrelated workæ²¡å…³ç³»ï¼›ä¹Ÿæœ‰çš„å­¦ç”Ÿè§‰å¾—æŠ„åŒç»„ç”šè‡³è‡ªå·±ä¹‹å‰çš„æ–‡ç« æ²¡å…³ç³»ã€‚</p>
<p><strong>ä»¥ä¸Š-éƒ½-æ˜¯-é”™-çš„ï¼</strong></p>
<p>é™ˆè€å¸ˆä¸æ€•ä½ æ–‡å­—å†™çš„çƒ‚ï¼Œä½†æ¯æ¬¡ç¢°åˆ°å†™çš„æ¼‚æ¼‚äº®äº®æ–‡è¾ä¼˜ç¾çš„éƒ¨åˆ†å´èƒ†æˆ˜å¿ƒæƒŠï¼šè¿™æ€•ä¸æ˜¯æŠ„çš„å§ï¼Ÿåˆ«è¯´ï¼Œè¿™ä¹ˆå¤šå¹´è¿˜çœŸè¢«æˆ‘æŠ“å‡ºè¿‡å‡ æ¬¡ã€‚</p>
<p><strong>æ‰€æœ‰çš„æ•°æ®éƒ½è¦æœ‰å‡ºå¤„å’ŒåŸå§‹çš„å®éªŒè®°å½•ï¼Œæ‰€æœ‰çš„æ¨å¯¼éƒ½è¦æœ‰è¯¦ç»†è¿‡ç¨‹</strong>ï¼Œå³ä½¿è¿™äº›ç»†èŠ‚ä¸åœ¨æ–‡ä¸­å‡ºç°ï¼Œä¹Ÿä¸€å®šè¦<strong>é•¿æœŸä¿ç•™</strong>ï¼å¥½çš„æ–‡ç« ä¼šæœ‰å¾ˆå¤šäººfollowä½ çš„å·¥ä½œï¼Œå¤§å®¶ä¼šè¦æ±‚ä½ çš„ä»£ç å…¬å¼€ã€é‡å¤ä½ çš„å®éªŒï¼Œå’Œä½ çš„ç»“æœåšæ¯”è¾ƒã€‚è®°ä½ï¼Œæ‰€æœ‰ä¸èƒ½é‡å¤çš„å®éªŒéƒ½æ˜¯éª—å­ã€éƒ½æ˜¯è€æµæ°“ï¼<strong>å¼€æºæ˜¯ä¸ªå¥½åŠæ³•ï¼š</strong>æ—¢æ£€éªŒäº†ä½ çš„å·¥ä½œçš„å¯ä¿¡æ€§ï¼Œåˆå®£ä¼ äº†ä½ çš„å·¥ä½œã€‚</p>
<p>å¦‚æœä½ æ²¡æœ‰ç…§ä»¥ä¸Šåšï¼Œé‚£ä½ å°±æ˜¯å‘å¯¼å¸ˆäº†ã€‚æˆ‘åªèƒ½ç¤¼é€ä½ å‡ºç»„ï¼Œåœ¨åŠ ä¸Šä¸€å¥è©æç¥–å¸ˆå¯¹å­™æ‚Ÿç©ºè¯´çš„é‚£å¥è¯ï¼šâ€œæ—¥åä½ æƒ¹å‡ºç¥¸æ¥ï¼Œä¸æŠŠä¸ºå¸ˆè¯´å‡ºæ¥å°±è¡Œäº†â€œã€‚</p>
<p><br></p>
<h1 id="ä¹-ä¿æŒéšæ—¶å¾…å‘½å’Œååº”çš„çŠ¶æ€"><a href="#ä¹-ä¿æŒéšæ—¶å¾…å‘½å’Œååº”çš„çŠ¶æ€" class="headerlink" title="|| ä¹ ||  ä¿æŒéšæ—¶å¾…å‘½å’Œååº”çš„çŠ¶æ€"></a><strong>|| ä¹ ||  ä¿æŒéšæ—¶å¾…å‘½å’Œååº”çš„çŠ¶æ€</strong></h1><p><strong>è¯·ä¸è¦é—­é—¨é€ è½¦ï¼Œä¸è¦åœ¨å°é»‘å±‹é‡Œæ†‹å¤§æ‹›ã€‚</strong></p>
<p>å¾ˆå¤šå­¦ç”Ÿå¾ˆå®³æ€•è¢«å¯¼å¸ˆéª‚ï¼Œæˆ–è€…è§‰å¾—è‡ªå·±å†™çš„å¤ªçƒ‚ï¼Œå°±å¸Œæœ›æŠŠæ–‡ç« å†™çš„ä¸ƒä¸ƒå…«å…«å†ç»™å¯¼å¸ˆä¸€ä¸ªæƒŠå–œã€‚è¯´çœŸçš„ï¼Œæ¯æ¬¡æˆ‘çœ‹åˆ°çš„æ—¶å€™ï¼Œéƒ½åªå‰©ä¸‹äº†â€œæƒŠâ€œï¼Œå°¤å…¶æ˜¯è¿˜å‰©ä¸¤å¤©å°±æˆªç¨¿çš„æ—¶å€™ã€‚</p>
<p><strong>åœ¨æ•´ä¸ªå†™ä½œçš„è¿‡ç¨‹ä¸­ä¿æŒå’Œå¯¼å¸ˆåŠæ—¶è‰¯å¥½çš„æ›´æ–°ä¸æ²Ÿé€šæ˜¯ååˆ†å¿…è¦çš„ã€‚</strong>å¤§å¤šæ•°å¯¼å¸ˆçš„æ—¶é—´æ˜¯ç¢ç‰‡åŒ–çš„ï¼Œå¯¹ä½ çš„æ–‡ç« çœŸçš„æ˜¯â€œæƒ³èµ·æ¥å°±çœ‹ä¸€ä¸‹â€œã€‚å¦‚æœä½ ä¸èƒ½éšæ—¶æä¾›ä¸€ä¸ªæœ€æ–°çš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆä»–å¯¹ä½ çš„åé¦ˆå°±ä¸å¯èƒ½æ˜¯åŠæ—¶æœ‰æ•ˆçš„ã€‚æ‰€ä»¥ï¼Œå»ºç«‹ä¸€ä¸ªDropboxæ–‡ä»¶å¤¹ï¼Œ<strong>æ¯å¤©æŠŠæœ€æ–°çš„ç‰ˆæœ¬å’Œå¯¼å¸ˆåšä¸€ä¸ªæ›´æ–°ï¼Œå¹¶æé†’å¯¼å¸ˆï¼Œæ˜¯æœ‰æ•ˆçš„ç£ä¿ƒå¯¼å¸ˆä¿®æ”¹å’Œæ¶¦è‰²ä½ çš„æ–‡ç« çš„æ–¹æ³•ã€‚</strong>é™ˆè€å¸ˆä¹‹å‰è¯´è¿‡ï¼Œå¯¼å¸ˆå¯¹ä½ ç§‘ç ”çš„ä½œç”¨æ˜¯ä¸ºäº†è®©ä½ è¡Œè¿›åœ¨æ­£ç¡®çš„æ–¹å‘ä¸Šï¼Œåœ¨ä½ æ¯æ¬¡è·‘åçš„æ—¶å€™åŠæ—¶æŠŠä½ æ‹‰å›æ¥ã€‚è¿™ä¸ªæ—¶é—´é—´éš”è¶Šé•¿ï¼Œä½ è·‘åçš„å¯èƒ½æ€§å°±è¶Šå¤§ï¼Œè·‘åçš„è·ç¦»å°±è¶Šé•¿ï¼ŒæŠŠä½ æ‹‰å›æ¥æ‰€éœ€è¦çš„åŠ›æ°”å°±è¶Šå¤§ã€‚</p>
<p>å¯¹äºå¯¼å¸ˆçš„æ„è§è¦åŠæ—¶åé¦ˆï¼ˆbe responsiveï¼‰ã€‚ä¹‹å‰æµè¡Œè¿‡ä¸€ç¯‡é¸¡æ±¤ï¼Œè¯´<strong>é è°±çš„äººåªéœ€è¦åšåˆ°ä¸‰ç‚¹ï¼šå‡¡äº‹æœ‰äº¤ä»£ï¼Œä»¶ä»¶æœ‰ç€è½ï¼Œäº‹äº‹æœ‰å›éŸ³ã€‚</strong>è¯•æƒ³è€å¸ˆå‘Šè¯‰ä½ å»ä¿®æ”¹1,2, 3, 4, 5ï¼Œä½ å›æ¥åªä¿®æ”¹äº†2, 4, 5ï¼Œç„¶åä»–å†ç»™ä½ 1,3, 6ï¼Œä½ å†å›æ¥ä¸ª1å’Œ6ï¼Œé‚£ä»–è‚¯å®šéç–¯äº†ä¸è¡Œï¼ˆä½†è¿™æ ·çš„å­¦ç”Ÿæˆ‘çœŸçš„è§è¿‡è¿˜ä¸å°‘ï¼‰ã€‚è¿˜æœ‰ï¼Œ<strong>åƒä¸‡ä¸èƒ½ç©æ¶ˆå¤±ã€‚</strong>æˆ‘çŸ¥é“æœ‰çš„å­¦ç”Ÿå®³æ€•è¢«å¯¼å¸ˆéª‚æˆ–è€…å¸Œæœ›åšå®Œäº†å†è·Ÿè€å¸ˆè¯´è€Œç©æ¶ˆå¤±ï¼Œä¸å›è€å¸ˆemailï¼Œç”µè¯ï¼Œå¾®ä¿¡ï¼Œâ€¦ç›´åˆ°æŠŠäº‹æƒ…åšå®Œï¼Œé‚£å¯¼å¸ˆå°±åªæœ‰ç¥ˆç¥·ä¸Šå¸ä½ åšçš„æ˜¯ä»–æƒ³è¦çš„è¿™ä¸€æ¡è·¯äº†ã€‚</p>
<p>æœ€åï¼Œ<strong>åˆç†çš„å®‰æ’æ—¶é—´ä¹Ÿå¾ˆé‡è¦ã€‚</strong>ä¹°èœåšé¥­é™ªå¥³æœ‹å‹é€›è¡—è¿™äº›äº‹æƒ…è¯·åœ¨deadlineä¹‹å‰çš„ä¸€å‘¨å…ˆåšäº†ï¼<strong>ä¸€ä¸ªåšäº‹æ²¡æœ‰è®¡åˆ’ã€ä¸çŸ¥è½»é‡ç¼“æ€¥çš„äººä¸¢æ‰çš„ä¸ä»…ä»…æ˜¯ä¸€ç¯‡è®ºæ–‡ï¼Œè€Œæ˜¯ä½ çš„æœªæ¥ã€‚</strong></p>
<p><br></p>
<h1 id="å-æ”¹åˆ°æœ€åä¸€åˆ†é’Ÿï¼"><a href="#å-æ”¹åˆ°æœ€åä¸€åˆ†é’Ÿï¼" class="headerlink" title="|| å ||  æ”¹åˆ°æœ€åä¸€åˆ†é’Ÿï¼"></a><strong>|| å ||  æ”¹åˆ°æœ€åä¸€åˆ†é’Ÿï¼</strong></h1><p>äººåœ¨é‡å‹ä¸‹æ¿€å‘å‡ºçš„çˆ†å‘åŠ›æ˜¯æƒŠäººçš„ï¼æ‰€ä»¥ï¼Œ<strong>è¯·æ”¹åˆ°æœ€åä¸€åˆ†é’Ÿï¼</strong></p>
<p>ä¹Ÿè®¸æœ€åä½ å·²ç»åšä¸äº†ä»€ä¹ˆäº†ï¼ˆä¹Ÿåƒä¸‡åˆ«åšå¤§çš„ä¿®æ”¹ä»¥å…å¿™ä¸­å‡ºé”™ï¼‰ï¼Œä½†è‡³å°‘ä½ å¯ä»¥<strong>ä»”ç»†æ£€æŸ¥æ–‡ç« çš„æ¯ä¸€ä¸ªç»†èŠ‚</strong>ï¼ŒåŒ…æ‹¬<strong>æ‹¼å†™é”™è¯¯</strong>ï¼Œ<strong>æ ‡é¢˜çš„å¤§å°å†™</strong>æ˜¯å¦ä¸€è‡´ï¼Œæ˜¯å¦æœ‰<strong>é—æ¼çš„å¼•ç”¨æˆ–è€…å¼•ç”¨é”™è¯¯</strong>ï¼ˆlatexä¸Šä¼šå‡ºç°ä¸€ä¸ªé—®å·â€œï¼Ÿâ€ï¼‰<strong>å›¾çš„captionçš„å­—ä½“å¤§å°æ˜¯å¦ç»Ÿä¸€</strong>ï¼Œç­‰ç­‰ã€‚</p>
<p><strong>å›¾è¡¨é”™è¯¯æ˜¯æœ€å®¹æ˜“å¿½è§†çš„éƒ¨åˆ†</strong>ï¼šæˆ‘æ›¾ç»æœ‰ä¸ªç°åœ¨å·²ç»åšæ•™æˆçš„å­¦ç”Ÿåœ¨å½“å¹´ä¸€ç¯‡æ–‡ç« æäº¤æ—¶æ…Œå¿™ä¸­è´´é”™äº†ä¸€å¼ å›¾ï¼Œç»“æœæ–‡ç« è™½ç„¶reviewè·å¾—é«˜åˆ†ï¼Œä½†è¿˜æ˜¯è¢«ä¸€ä¸ªè¯„å®¡å‘ç°é—®é¢˜ç»™æ‹’æ‰äº†ã€‚æˆ‘å»ºè®®ä»–æŠŠé‚£ç¯‡è¯„å®¡ç»“æœæ‰“å‡ºæ¥è´´åœ¨å¢™ä¸Šï¼Œæé†’è‡ªå·±ä¸è¦å†çŠ¯è¿™æ ·æ„šè ¢çš„é”™è¯¯ã€‚<strong>è®°å¾—ï¼Œæ£€æŸ¥åˆ°æœ€åä¸€åˆ†é’Ÿï¼Œä¸æ–­æäº¤ä¿®æ”¹é”™è¯¯åçš„è®ºæ–‡ç›´åˆ°ç½‘ç«™å…³é—­ï¼</strong></p>
<p><strong>æ–‡ç« ä¸€æ—¦å¼€å§‹å†™ï¼Œå°±ä¸€å®šè¦åŠªåŠ›æŠ•å‡ºå»ï¼ä¸è¦åœä¸‹æ¥ï¼</strong></p>
<p>è™½ç„¶ä½ æ˜¯ç¬¬ä¸€ä½œè€…ï¼Œä½†<strong>è¯·è®°ä½ä½ çš„èº«åæ˜¯æ‰€æœ‰å…±åŒä½œè€…çš„å¿ƒè¡€å’ŒåŠªåŠ›</strong>ã€‚å¦‚æœä»–ä»¬ä¸å¸®ä½ å®Œæˆè¿™ç¯‡æ–‡ç« ï¼Œä»–ä»¬å®Œå…¨å¯ä»¥å»å†™å¦ä¸€ç¯‡æ–‡ç« ã€‚<strong>ä½ çš„æ”¾å¼ƒæ˜¯å¯¹ä»–ä»¬ç”Ÿå‘½çš„æµªè´¹ã€‚</strong>åœ¨ä¸€ä¸ªå­¦æœ¯é¢†åŸŸï¼Œé¡¶çº§ä¼šè®®å¾€å¾€åªæœ‰1-2ä¸ªã€‚ä½ é”™è¿‡äº†ä¸€æ¬¡deadlineï¼Œå¯èƒ½å¤§å®¶åŠå¹´ç”šè‡³ä¸€å¹´çš„å¿ƒè¡€å°±ç™½è´¹äº†ï¼Œä¸‹ä¸€æ¬¡æœºä¼šåˆæ˜¯åŠå¹´ä»¥åã€‚æ‰€ä»¥ä¸€æ—¦å†³å®šè¦æŠ•ç¨¿ï¼Œè¯·æ— è®ºå¦‚ä½•ä¸è¦æ”¾å¼ƒï¼Œä¸€å®šè¦åŠªåŠ›åˆ°æœ€åä¸€åˆ†é’Ÿå†è¯´ï¼</p>
<p>å¯¹è‡ªå·±è¯´â€œæ— è®ºå¦‚ä½•æˆ‘å·²ç»åŠªåŠ›è¿‡äº†â€è€Œè½»æ˜“æ”¾å¼ƒçš„äººæ˜¯æ²¡æœ‰æœªæ¥çš„ã€‚æ—¥å‰§ã€Šèƒœè€…å³æ˜¯æ­£ä¹‰ Legal Highã€‹çš„å°è¯è¯´åˆ°ï¼š</p>
<p>â€œ è¶Šæ˜¯å·¥ä½œåšä¸å¥½çš„æ— ç”¨ä¹‹äººâ€</p>
<p>â€œ å°±è¶Šæ˜¯ä¼šä¸»å¼ è‡ªå·±æœ‰å¤šåŠªåŠ›â€</p>
<p>â€œ åŠªåŠ›äº†åˆæ€ä¹ˆæ ·ï¼Œç»“æœæ‰æ˜¯å…¨éƒ¨ â€œ</p>
<p><img src="/images/blog/2020/chen.webp" alt></p>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>NLP</tag>
        <tag>IJCAI</tag>
        <tag>AI</tag>
        <tag>Deadline</tag>
      </tags>
  </entry>
  <entry>
    <title>è‡´2021å±Šé‡‘èæ¯•ä¸šç”Ÿ</title>
    <url>/2020/11/18/%E8%87%B42021%E5%B1%8A%E9%87%91%E8%9E%8D%E6%AF%95%E4%B8%9A%E7%94%9F/</url>
    <content><![CDATA[<p>ä¸çŸ¥é“ä¸ºä»€ä¹ˆè½¬è¿™ç¯‡æ–‡ç« ï¼Œæ˜æ˜æ˜¯å­¦è®¡ç®—æœºçš„å­¦ç”ŸğŸ˜€ï¼Œåªæ˜¯è§‰å¾—æœ‰ä¸€äº›è¯å¾ˆæœ‰é“ç†~</p>
<blockquote>
<p>ä»¥ä¸‹æ–‡ç« æ¥æºäºè—é‡‘ç•…æ˜¥å›­ ï¼Œä½œè€…å›­ä¸»</p>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzA4Njk5MTYwNQ==&amp;mid=2650996532&amp;idx=1&amp;sn=e0e9c1b9b7a44c47c12d2e49d7f91b81&amp;chksm=843668aeb341e1b857b71508eee5a74dd6466f5d09c26863ff0ca1349f7fbaf804fd6fd14f05&amp;mpshare=1&amp;scene=24&amp;srcid=1011rQqNEz7A399biLhf5V43&amp;sharer_sharetime=1602426945650&amp;sharer_shareid=03b37d2da63d394d243dc8d08e8bee5f&amp;key=42f89ebab0dc82fb05cada71e1d7f5beb2301b6710709bf3ff32c4a2dadc829f6e01a06b2e24dce94af2c1a538a3e0f96648bc7a1894c831ad095e32c51674e1ba25c1957c5449f260827a6e217d47d993190537477aa0c846dd452f60625ee638f39ffc185568fdea0bb267fe47995b2e55312df208619e0d8bb95d43b4af1b&amp;ascene=14&amp;uin=MjExODc0NDkwMg%3D%3D&amp;devicetype=Windows+10+x64&amp;version=6300002f&amp;lang=zh_CN&amp;exportkey=AUy6AdlmxfPPQBv80yaBbqc%3D&amp;pass_ticket=JMu0tZ8lnp%2FRuz1okqXGKHCSZV44b5P1Q0yYYVTQAtVTaM8NrMmb5T6PBnHGy2oL&amp;wx_header=0" target="_blank" rel="noopener">https://mp.weixin.qq.com/s?__biz=MzA4Njk5MTYwNQ==&amp;mid=2650996532&amp;idx=1&amp;sn=e0e9c1b9b7a44c47c12d2e49d7f91b81&amp;chksm=843668aeb341e1b857b71508eee5a74dd6466f5d09c26863ff0ca1349f7fbaf804fd6fd14f05&amp;mpshare=1&amp;scene=24&amp;srcid=1011rQqNEz7A399biLhf5V43&amp;sharer_sharetime=1602426945650&amp;sharer_shareid=03b37d2da63d394d243dc8d08e8bee5f&amp;key=42f89ebab0dc82fb05cada71e1d7f5beb2301b6710709bf3ff32c4a2dadc829f6e01a06b2e24dce94af2c1a538a3e0f96648bc7a1894c831ad095e32c51674e1ba25c1957c5449f260827a6e217d47d993190537477aa0c846dd452f60625ee638f39ffc185568fdea0bb267fe47995b2e55312df208619e0d8bb95d43b4af1b&amp;ascene=14&amp;uin=MjExODc0NDkwMg%3D%3D&amp;devicetype=Windows+10+x64&amp;version=6300002f&amp;lang=zh_CN&amp;exportkey=AUy6AdlmxfPPQBv80yaBbqc%3D&amp;pass_ticket=JMu0tZ8lnp%2FRuz1okqXGKHCSZV44b5P1Q0yYYVTQAtVTaM8NrMmb5T6PBnHGy2oL&amp;wx_header=0</a></p>
</blockquote>
<p>æœ€è¿‘é‡‘èåœˆé‡Œä¸€ä¸ªå…„å¼Ÿè·Ÿæˆ‘è®²äº†ä¸€ä¸ªæ®µå­ï¼š</p>
<p>è¯´ä¸€å®¶ç ”ç©¶æ‰€å†…éƒ¨ï¼Œæ¯ä¸ªç ”ç©¶å°ç»„éƒ½å·²ç»æ˜¯æ–°è´¢å¯Œç»„äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å†æ¯”ä»Šå¹´è°èƒ½ä¸Šæ–°è´¢å¯Œï¼Œè°ä¸èƒ½ä¸Šæ–°è´¢å¯Œã€‚<strong>æˆ‘ä»¬æ¯”çš„æ˜¯æ–°è´¢å¯Œèƒ½æ‹¿åˆ°ç¬¬å‡ åã€‚</strong></p>
<p>è¿™ä½å¥½å…„å¼Ÿåœé¡¿äº†ä¸€ä¸‹è¯´é“ï¼Œè¿™å°±å«é‡‘èåœˆçš„<strong>â€œå†…å·â€ã€‚</strong></p>
<p>æˆ‘å¿ƒé‡Œæƒ³å¥½å§ï¼Œä½ ä»¬è¿™ä¹Ÿèƒ½å«å†…å·ï¼Ÿå†…å·çš„ç»“æœæ— éå°±æ˜¯è¿™ä¸ªé¦–å¸­åæ¬¡å¾ˆå¥½å¹´è–ª500ä¸‡ï¼Œé‚£ä¸ªé¦–å¸­åæ¬¡ä¸å¥½ï¼Œä»Šå¹´åªèƒ½æ‹¿200ä¸‡ï¼Œå·æ¥å·å»ä¹Ÿéƒ½æ˜¯é‡‘èåœˆçš„é«˜ç«¯ç©å®¶ã€‚</p>
<p>è¿™æ ¹æœ¬å°±ä¸å«å·å¥½å§ã€‚</p>
<p>çœŸæ­£çš„â€œå·â€å­˜åœ¨äº<strong>é‡‘èåº”å±Šæ¯•ä¸šç”Ÿä¸­ã€‚</strong></p>
<p>å…¶å®è¿™ç§â€œå·â€åœ¨å®¿èˆå®‰æ’æ–¹é¢å°±å·²ç»åˆéœ²ç«¯å€ªäº†ï¼Œè´¢æ–°ç½‘19æ—¥æœ‰ä¸€ç¯‡æŠ¥é“è¿˜æŒºæœ‰æ„æ€çš„ï¼Œåå­—å«ã€Šè®°è€…æ‰‹è®°|ç ”ç©¶ç”Ÿæ‰©æ‹›18.9ä¸‡å…ƒï¼Œä½å®¿éš¾ä½•è§£ï¼Ÿã€‹ã€‚</p>
<p>ç®€è€Œè¨€ä¹‹å°±æ˜¯ç¡•å£«æ‰©æ‹›çš„å¤ªå‰å®³äº†ï¼Œå¾ˆå¤šå­¦æ ¡éƒ½æ˜¯å‡ ç™¾ä¸Šåƒçš„åœ¨æ‰©æ‹›ï¼ŒåºŠä½ä¸å¤Ÿäº†ï¼Œ<strong>å­¦æ ¡åªå¥½æŠŠä¸€å †ç ”ç©¶ç”Ÿè¸¢å‡ºå»ä½ã€‚</strong></p>
<p>ç ”ç©¶ç”Ÿä»¬åœ¨å°šæœªå¼€å­¦ä¹‹å‰ï¼Œå°±å®å®åœ¨åœ¨çš„åˆæ­¥å°åˆ°äº†<strong>â€œå·â€</strong>çš„æ»‹å‘³ï¼Œå®åœ¨æ˜¯ç›¸å½“çš„ç²¾å½©ã€‚<a id="more"></a></p>
<p>æ¸…åŒ—å°±åˆ«è¯´äº†ï¼Œå·²ç»å·åˆ°å¤©äº†ï¼Œå¾ˆå¤šå†…éƒ¨å­¦ç”Ÿå·²ç»é€æ¸æ„è¯†åˆ°ï¼Œå¤§å®¶åœ¨é‡‘èåœˆå­é‡Œè¿™æ ·å·ä¸‹å»ï¼Œå®åœ¨æ˜¯å¤ªæƒ¨äº†ã€‚</p>
<p>äºæ˜¯å¾ˆå¤šäººæœ¬ç§‘çš„æ—¶å€™å°±å¼€å§‹å¦è¾Ÿè¹Šå¾„ï¼Œç¬¬äºŒä¸“ä¸šå­¦æITï¼Œæ¯•ä¸šæ‰¾å·¥ä½œæ—¶é‡‘è+ITå¤åˆåŒæ–™èƒŒæ™¯ï¼Œä¼°è®¡è¦ä¸äº†å¤šä¹…è¿™ç§å‘å±•æ–¹å‘å°†è”šç„¶æˆé£ï¼Œ<strong>å°†äº’ç›¸ä¹‹é—´çš„å†…å·è¿›ä¸€æ­¥æå‡ä¸€ä¸ªæ¡£ä½ã€‚</strong></p>
<p>å› ä¸ºå·¥ä½œå…³ç³»æˆ‘ç»å¸¸è¦åˆ°ä¸Šæµ·å‡ºå·®ï¼Œç§ä¸‹é‡Œç»å¸¸æœ‰å¤æ—¦ã€äº¤å¤§ã€ä¸Šè´¢çš„ç²‰ä¸çº¦ç€è§é¢èŠå¤©ã€‚æ™®éæ„Ÿè§‰å°±æ˜¯æ¯”å‰å‡ å¹´çš„å­¦ç”Ÿï¼Œè¿™ä¸¤å¹´å¤§å®¶æ˜æ˜¾å˜å¾—æ›´åŠ ç„¦è™‘ã€‚</p>
<p>ä¸€ä¸ªå…¸å‹çš„ç‰¹ç‚¹å°±æ˜¯<strong>å¤æ—¦çš„å­¦ç”Ÿä¹Ÿé€æ¸å¼€å§‹ä¸Šè´¢åŒ–ã€‚</strong>å¤æ—¦è·Ÿä¸Šè´¢ä¸€ç›´éƒ½æ˜¯ä¸€å¯¹CPï¼Œä¸€ä¸ªè‡ªç§°â€œè´¢å¤§ç‰›é€¼â€ï¼Œä¸€ä¸ªè‡ªç§°â€œè‡ªç”±æ— ç”¨â€ã€‚</p>
<p>å¤æ—¦å­¦ç”Ÿç»™äººçš„æ„Ÿè§‰ï¼Œçš„ç¡®æ˜¯æ›´åŠ è‡ªç”±ä¸ç¾ä¸€ç‚¹ã€‚è´¢å¤§çš„å­¦ç”Ÿè¿«äºæ®‹é…·çš„ä¿ç ”æŒ‡æ ‡å’Œå°±ä¸šå‹åŠ›ï¼Œå¾€å¾€åœ¨å­¦ä¹ å’Œå®ä¹ å±‚é¢éƒ½éå¸¸çš„æ‹¼ã€‚<strong>ä½†æ˜¯ç›®å‰æ¥çœ‹å¤æ—¦çš„å­¦ç”Ÿå†…éƒ¨æ°›å›´å·²ç»é€æ¸çš„è·Ÿä¸Šè´¢æ¥è¿‘ã€‚</strong></p>
<p>æˆ‘å¹¶æ²¡æœ‰è¯´å¤æ—¦è·Ÿä¸Šè´¢å“ªç§å­¦ç”Ÿçš„æ°”è´¨æˆ–è€…æ°›å›´æ›´å¥½ä¸€äº›ï¼Œæ¯ä¸ªå­¦æ ¡éƒ½æœ‰è‡ªå·±çš„å†å²å’Œå®šä½ï¼Œç‰¹ç‚¹éƒ½ä¸ä¸€æ ·ï¼ŒåŸ¹å…»å‡ºæ¥å­¦ç”Ÿæ°”è´¨æ–¹é¢è‚¯å®šä¼šæœ‰æ‰€å·®åˆ«ã€‚</p>
<p>ä½†æ˜¯è¿‘å‡ å¹´æˆ‘çš„è§‚å¯Ÿç»“æœå°±æ˜¯ï¼Œæ— è®ºæ˜¯æ¸…åŒ—ä¹Ÿå¥½ã€å¤æ—¦ä¹Ÿå¥½ã€äº¤å¤§ä¹Ÿå¥½ï¼Œä¸Šè´¢ä¹Ÿç½¢ï¼ŒåŸ¹å…»å‡ºæ¥çš„ç»ç®¡ç±»å­¦ç”Ÿå·²ç»è¶Šæ¥è¶Šè¶‹åŒï¼Œæ•´å¤©èŠå¤©çš„è¯é¢˜åŸºæœ¬ä¸ç¦»å®ä¹ ã€å·¥ä½œã€èŒä¸šå‘å±•ï¼Œä»¥åŠæ€ä¹ˆèµšé’±ã€‚</p>
<p>å­¦ç”Ÿéƒ½åªå‰©ä¸‹ä¸€ä¸ªæ ‡ç­¾ï¼š</p>
<p><strong><em>ç„¦è™‘çš„ä¸­å›½é‡‘èåº”å±Šç”Ÿä»¬ã€‚</em></strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/gaHPCYDlq2Hn6GCveLmQSNa4oWHSj3Jz6ia8O9tJZdFjsv6wbTaNEib8XEY1pXMC0ibWbdXJXILMHbEiaVNoicKGJeg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>å¤§çš„ç¯å¢ƒå·²ç»æŠŠç»“è®ºæ¡†æ­»äº†ï¼šè¿™å¿…ç„¶æ˜¯ä¸€ä¸ªå†…å·çš„å±€ã€‚æ— è®ºæ˜¯æ¸…åŒ—å¤äº¤ï¼Œè¿˜æ˜¯å¤®è´¢ä¸Šè´¢äººå¤§ã€‚é™¤å»å¾ˆä¸ªåˆ«çš„ç¥äººï¼Œå°±ä¸šçš„å¤©èŠ±æ¿å¤§æ¦‚å°±å¤„åœ¨ä¸‰ä¸­ä¸€åï¼Œä»¥åŠå›½å†…å‡ å¤§åˆ¸å•†ç ”ç©¶æ‰€ä¸­ï¼Œ<strong>è€Œä¸”è¿›å»çš„æ¯”ä¾‹ä¹Ÿå¹¶ä¸é«˜ã€‚</strong></p>
<p>å…¶ä½™å­¦ç”Ÿå¸¸è§çš„å»å¤„æ˜¯é“¶è¡Œã€å››å¤§ã€äºŒçº¿å’¨è¯¢ã€äº’è”ç½‘ã€å¿«æ¶ˆã€è€ƒç¼–ã€‚å¯¹äºç›¸å½“ä¸€éƒ¨åˆ†äººæ¥è¯´ï¼Œ<strong>æ‰€è°“çš„åæ ¡å…‰ç¯ï¼Œä¸åæœŸçš„å°±ä¸šå®é™…ç›¸æ¯”ï¼Œè½å·®ä¸å¯è°“ä¸å¤§ã€‚</strong></p>
<p>ä»¥ä¸Šè®²äº†äº›é—®é¢˜ï¼Œæˆ‘çŸ¥é“ç›¸å½“å¤šçš„é‡‘èå­¦ç”Ÿï¼Œå°¤å…¶æ˜¯åº”å±Šç”Ÿæ­£åœ¨ä¸ºç§‹æ‹›ç§ƒå¤´ã€‚ç»†å¿ƒçš„è¯»è€…å¤§çˆ·æˆ–è®¸å‘ç°ï¼Œè¿™ä¸ªå·ä¸­å…³äºèŒä¸šå‘å±•çš„æ–‡ç« å æ¯”è¶Šæ¥è¶Šä½ï¼Œä¹‹åä¹Ÿå°±æŒ‘ä¸ªç§‹æ‹›ç­‰å…³é”®æ—¶ç‚¹ï¼Œä¸€å¹´æœ€å¤šä¹Ÿå°±å‘ä¸ªä¸€ä¸¤ç¯‡å…³äºèŒä¸šå‘å±•çš„æ–‡ç« ã€‚</p>
<p>æ–‡ç« æ•°é‡ç›¸å½“å°‘ï¼Œæˆ‘<strong>å°½é‡æŠŠæˆ‘æ‰€çŸ¥é“çš„ï¼Œå…¨éƒ¨å‘Šè¯‰ä½ ä»¬ï¼Œæ¯”å¦‚è¿™ç¯‡æ–‡ç« ã€‚</strong></p>
<p> <strong><em>ä¸€ã€æ‰¾å·¥ä½œè¯·åŠ¡å¿…æµ·ç‹ï¼Œæ¸£ä¸€ç‚¹ã€‚</em></strong></p>
<p>æœ‰äº›å­¦ç”Ÿç‰¹åˆ«ç‰¹åˆ«çš„å¯çˆ±å•çº¯ï¼Œè§‰å¾—å…¬å¸æ˜¯æˆ‘å®¶ï¼Œå‹çˆ±é å¤§å®¶ï¼Œé¢†å¯¼æ…ˆç¥¥ä½“è´´ï¼ŒåŒäº‹æ¸©æš–äº’åŠ©ï¼Œæˆ‘è¦è¡·å¿ƒè€¿è€¿çš„ï¼Œæ­»å¿ƒå¡Œåœ°çš„è·Ÿç€å…¬å¸ã€‚</p>
<p>å¯¹äºè¿™æ ·çš„åŒå­¦ï¼Œæˆ‘è¦ç»™ä½ é€ä¸Šç¤¾ä¼šä¸»ä¹‰çš„å…‰è£æ­¦å™¨ï¼Œæ¥ï¼Œè·Ÿç€æˆ‘è¯»ä¸‰éä»¥ä¸‹è¿™å¥è¯ï¼š</p>
<p><strong><em>ä½ è·Ÿä½ å…¬å¸ä¹‹é—´æ°¸è¿œå­˜åœ¨ç€ä¸€ç§çŸ›ç›¾ï¼Œè¿™ç§çŸ›ç›¾ä¸æ˜¯è¯·å®¢åƒé¥­ï¼Œä¸æ˜¯å˜»å˜»å“ˆå“ˆå°±å¯ä»¥ç¼“è§£å’Œæ©é¥°çš„ï¼Œè¿™ç§çŸ›ç›¾æ˜¯å·¥äººé˜¶çº§å’Œèµ„æœ¬å®¶ä¹‹é—´çš„ï¼Œä¸å¯è°ƒå’Œçš„æ ¹æœ¬æ€§çŸ›ç›¾ã€‚</em></strong></p>
<p>æ— è®ºä½ å®ä¹ çš„å…¬å¸çœ‹èµ·æ¥å¤šä¹ˆçš„ä¹‰æ­£è¨€è¾ã€ä¿¡èª“æ—¦æ—¦ã€å’Œè”¼å¯äº²ï¼Œä½ è¦è®°ä½ä»–æœ€ç»ˆçš„ç›®çš„ï¼Œ<strong>ä¸€å®šæ˜¯å……åˆ†å‹æ¦¨ä½ èº«ä¸Šçš„æ‰€æœ‰å‰©ä½™ä»·å€¼ï¼Œ</strong>å¸®åŠ©è‡ªå·±è¿›ä¸€æ­¥å‘å±•ã€‚ä½ ä»¬ä¹‹é—´å°±æ˜¯çº¯ç²¹çš„åˆ©ç”¨ä¸è¢«åˆ©ç”¨å…³ç³»ã€‚</p>
<p><strong>ä¸€æ—¦ä½ è¢«è®¤ä¸ºæ˜¯æ²¡æœ‰ä»·å€¼çš„ï¼Œå°±ä¼šè¢«è¿…é€Ÿçš„æ›¿ä»£æ‰ã€‚</strong></p>
<p>ä»¥ä¸Šè¿™ç§åŸºæœ¬å°±æ˜¯èŒåœºé“å¾‹ï¼Œ<strong>æ›´ä½•å†µä½ ä»äº‹çš„æ˜¯äººç²¾éåœ°çš„é‡‘èè¡Œä¸šï¼</strong></p>
<p>æ²¹å˜´æ»‘èˆŒè€…ç”šå¤šï¼Œå½“é¢ä¸€å¥—èƒŒåä¸€å¥—è€…ç”šå¤šï¼Œè¢«æ‹–ç€ç™½å«–ä¸€å¹´æœ€ç»ˆé¸½æ‰offerçš„æ•™è®­ï¼Œå®åœ¨æ˜¯æ¯”æ¯”çš†æ˜¯ã€‚</p>
<p>å› æ­¤ä½ å¿…é¡»è¦å­¦åä¸€ç‚¹ï¼Œå¿…é¡»è¦æµ·ç‹ï¼Œå¿…é¡»è¦æ¸£ï¼Œ<strong>ç§‹æ‹›æŠ•å¤Ÿ100å®¶ã€‚</strong></p>
<p>ç–«è‹—çš„ç ”å‘ä¹Ÿæ˜¯ä¸–ç•Œå„åœ°å‡ åä¸ªé¡¹ç›®ç»„ï¼Œå‡ åä¸ªæŠ€æœ¯è·¯å¾„åŒæ­¥æ¨è¿›ï¼Œæœ€åçœ‹å“ªä¸ªé¡¹ç›®ç»„è·‘å‡ºæ¥ï¼Œå°±ç”¨å“ªä¸ªã€‚</p>
<p>æ‰¾å·¥ä½œä¹Ÿè¦è¿™æ ·å­ã€‚å¦‚æœå®ä¹ é¢†å¯¼æ‹½ç€ä½ ä¸è‚¯è®©ä½ å‡ºå»æŠ•ç®€å†é¢è¯•ã€‚</p>
<p><strong>ä½ ä¼šä¸ä¼šæ„Ÿå†’ï¼Ÿä½ å®¶é‡Œè¡¨å“¥è¡¨å§èƒ½ä¸èƒ½çªç„¶ç»“å©šäº†ï¼Ÿä½ å¯¼å¸ˆèƒ½ä¸èƒ½çªç„¶æ‰¾ä½ åšé¡¹ç›®ï¼Ÿ</strong></p>
<p><strong>æ€»æ˜¯å­¦ä¸ä¼šï¼Œå†èªæ˜ä¸€ç‚¹ï¼Œè®°å¾—è‡ªæˆ‘ä¿æŠ¤ï¼Œå¿…è¦æ—¶å€™è®²äº›å–„æ„è°è¨€ã€‚</strong></p>
<p><strong><em>äºŒã€è¯·ä»èµ„äº§é…ç½®çš„è§’åº¦æ¥é€‰æ‹©è‡ªå·±çš„å®ä¹ æœºä¼šã€‚</em></strong></p>
<p>è¿™æ®µå†…å®¹ä¹‹å‰å†™è¿‡ï¼Œä¼°è®¡å¾ˆå¤šäººå¿˜äº†ï¼Œæˆ‘å†è´´ä¸€æ¬¡å§ã€‚</p>
<p>åœ¨ç§‹æ‹›æ—¶é…ç½®ä¸€ä¸ªå®ä¹ ç•™ç”¨çš„å·¥ä½œæœºä¼šï¼Œå†é…ç½®ä¸€ä¸ªé¢è¯•ç•™ç”¨çš„å·¥ä½œæœºä¼šã€‚å¯ä»¥é€‰æ‹©åœ¨ç ”ç©¶æ‰€æˆ–è€…æŠ•è¡Œé•¿æœŸè‹Ÿç€åˆ«æ”¾å¼ƒï¼Œï¼ˆæ¯•ç«Ÿ10æœˆä»½ä¹‹å‰å‘offerçš„åˆ¸å•†åŸºæœ¬æ²¡æœ‰ï¼‰ã€‚</p>
<p><strong>åŒæ—¶åœ¨ç§‹æ‹›çš„æ—¶å€™ç–¯ç‹‚æ‰¾é“¶è¡Œã€å…¬åŠ¡å‘˜ã€é‡‘èç›‘ç®¡æœºæ„ã€äº’è”ç½‘å¿«æ¶ˆç­‰æ–¹é¢çš„å·¥ä½œã€‚</strong></p>
<p>ä¸æ’é™¤çš„ä¸€ä¸ªæƒ…å½¢æ˜¯ï¼Œä½ çš„é¢†å¯¼æŠ“ç€ä½ éœ€è¦ç•™ç”¨è¿™ä¸ªæŠŠæŸ„æ‹¼å‘½å‹æ¦¨ä½ ç”šè‡³ç”»å¤§é¥¼ï¼Œä½†è¿™ä¸ªæ—¶å€™ä½ åŠ¡å¿…è¦å¯¹è‡ªå·±è´Ÿè´£ã€‚ä½ å¯ä»¥é€‰æ‹©æ€§æ‰¾å‡ ä¸ªå€Ÿå£ï¼Œæ¯”å¦‚æ‹‰è‚šå­ã€å‘çƒ§æˆ–è€…è·‘æ­¥è…¿æŠ˜äº†ï¼Œæˆ–è€…æ¬å‡ºä½ ä¸€å¹´æ²¡è§è¿‡çš„å¯¼å¸ˆï¼Œè¯´æœ‰é¡¹ç›®è®©ä½ åšã€‚</p>
<p><strong>åƒæ–¹ç™¾è®¡å¤šå‡ºå»æŠ•ç®€å†é¢è¯•ï¼Œç„¶åæ‰¾ä¸€ä¸ªofferä¿åº•ã€‚æ­£æ‰€è°“é¢†å¯¼çš„å˜´éª—äººçš„é¬¼ï¼Œæˆ‘è§è¿‡å¤ªå¤šè¢«åˆ©ç”¨å®Œç„¶åé¸½æ‰çš„ä¾‹å­äº†å‘µå‘µã€‚</strong></p>
<p><strong><em>é…ç½®ä¸€ä¸ªé•¿æœŸå®ä¹ ç•™ç”¨çš„å·¥ä½œæœºä¼šæ¥è¿›æ”»ï¼Œå†é…ç½®ä¸€ä¸ªé¢è¯•/è€ƒè¯•ç•™ç”¨çš„å·¥ä½œæœºä¼šæ¥é˜²å®ˆã€‚é£é™©å¯¹å†²é«˜ï¼Œè¿›å¯æ”»é€€å¯å®ˆï¼Œå²‚ä¸ç¾æ»‹æ»‹ï¼Ÿ</em></strong></p>
<p>å½“ç„¶æˆ‘ä¹Ÿè§è¿‡å®Œå…¨åç€æ¥çš„ï¼Œ3æœˆä»½æ¢ä¸€å®¶åˆ¸å•†å®ä¹ ã€6æœˆä»½å†æ¢ä¸€å®¶ï¼Œç„¶å7æœˆå¼€å§‹çš„æ—¶å€™å¹²è„†ç¦»èŒï¼Œç›´æ¥å»ç§‹æ‹›ã€‚</p>
<p>æ•¢æƒ…ä½ ä¹‹å‰çš„åˆ¸å•†å®ä¹ å°±æ˜¯ç™½ä½œè´¡çŒ®ï¼Œç”¨çˆ±å‘ç”µå¸®ç»„é‡Œè€å¸ˆåŠ å»‰ä»·åŠ³åŠ¨åŠ›çš„æ æ†å—ã€‚å¦‚æœæœ‰è¿™ä¹ˆä¹–çš„å®ä¹ ç”Ÿï¼Œéº»çƒ¦ç»™æˆ‘æ¥ä¸€æ‰“ï¼ˆç¬‘å“­ï¼‰ï¼Œ<strong>æˆ‘é‡‘èè¡Œä¸šé‚£ç¾¤å“¥ä»¬æ­£å—·å—·å¾…å“ºæƒ³è¦ç™½å«–å®ä¹ ç”Ÿå‘¢ã€‚</strong> </p>
<p>è·Ÿä½ ä»¬å¼€ä¸ªç©ç¬‘å“ˆå“ˆã€‚</p>
<p>ä¸¢æ‰å¹»æƒ³ï¼Œå‡†å¤‡æˆ˜æ–—ï¼Œå¤§å®¶åŠ æ²¹å§ï¼</p>
]]></content>
      <categories>
        <category>Others</category>
        <category>Interview</category>
      </categories>
      <tags>
        <tag>Interview</tag>
        <tag>Job</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¸…åå¤§ä½¬çš„ç§‹æ‹›ç®—æ³•å²—æ€»ç»“</title>
    <url>/2020/11/18/%E6%B8%85%E5%8D%8E%E5%A4%A7%E4%BD%AC%E7%9A%84%E7%A7%8B%E6%8B%9B%E7%AE%97%E6%B3%95%E5%B2%97%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<blockquote>
<p>ä½œè€… | å¯¹ç™½</p>
<p>ä¸ªäººç®€ä»‹ | æ¸…åå¤§å­¦ï¼Œå·¥å­¦ç¡•å£«åœ¨è¯»</p>
<p>åŸæ–‡é“¾æ¥ï¼Œç‚¹å‡»æ–‡æœ«é˜…è¯»åŸæ–‡ç›´è¾¾ï¼š</p>
<p><a href="https://zhuanlan.zhihu.com/p/296551038" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/296551038</a></p>
</blockquote>
<p><br></p>
<p>ä¸€æ™ƒæ¥è¿‘ä¸‰ä¸ªæœˆè¿‡å»äº†ï¼Œç§‹æ‹›ä¹Ÿåˆ°äº†å°¾å£°ï¼Œä¹‹å‰ä¸€ç›´å¿™äºå†™æ¯•ä¸šè®ºæ–‡ï¼Œç°åœ¨åœ¨è¿™é‡Œæƒ³æ€»ç»“ä¸€äº›è‡ªå·±æ±‚èŒäº’è”ç½‘å¤§å‚ç®—æ³•å²—çš„é¢ç»å’Œå¿ƒå¾—ï¼Œå¸Œæœ›å¸®åŠ©åæ¥çš„å­¦å¼Ÿå­¦å¦¹ä»¬æ”¶è·è‡ªå·±å¿ƒä»ªçš„offerã€‚</p>
<p>ä»Šå¹´çš„ç®—æ³•å²—æ±‚èŒè¾ƒå¾€å¹´ç«äº‰ä¹Ÿæ›´åŠ æ¿€çƒˆï¼Œå¯ä»¥é¢„è§ä»¥åè¿›å¤§å‚çš„ç®—æ³•å²—ä¼šå˜å¾—è¶Šæ¥è¶Šéš¾ï¼Œæ¯”å¦‚ç¾å›¢åŒ—æ–—å»å¹´çš„å‡†å…¥é—¨æ§›æ˜¯ä¸€ç¯‡CCF Aï¼Œè€Œä»Šå¹´ç›´æ¥æå‡åˆ°äº†ä¸¤ç¯‡CCF Aï¼Œéš¾åº¦æé«˜äº†ä¸€å€ï¼ŒåŠ ä¹‹ç–«æƒ…çš„å½±å“ï¼Œæˆ‘è®¤è¯†çš„å¾ˆå¤šæ‰‹æ¡é¡¶ä¼šçš„æœ¬ç§‘å­¦å¼Ÿä»¬ä»¥åŠæµ·å¤–çš„åŒå­¦ä»¬ä¹ŸåŠ å…¥åˆ°äº†æ‰¾å·¥ä½œçš„å¤§å†›ä¸­ï¼Œå› æ­¤ä»Šå¹´ç®—æ³•å²—çš„ç«äº‰å ªç§°å²ä¸Šå·…å³°ï¼ŒçœŸçš„æ˜¯å…«ä»™è¿‡æµ·ï¼Œå„æ˜¾ç¥é€šã€‚ä¸è¿‡ï¼Œæ‰¾å·¥ä½œä¸ä»…éœ€è¦å®åŠ›ï¼Œè¿æ°”å’Œæ–¹æ³•ä¹Ÿç¼ºä¸€ä¸å¯ï¼Œä¸‹é¢æˆ‘å°±è°ˆè°ˆæˆ‘è‡ªå·±çš„å¿ƒè·¯å†ç¨‹ã€‚</p>
<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>æœ¬äººTop2ç¡•å£«åœ¨è¯»ï¼Œéè®¡ç®—æœºç§‘ç­ï¼Œä¸¤ç¯‡è®ºæ–‡åœ¨æŠ•ï¼ŒæŠ•é€’å²—ä½çš„æ–¹å‘ä¸»è¦ä¸ºæ¨è/å¹¿å‘Š/æœºå™¨å­¦ä¹ ï¼Œåœ¨æ•´ä¸ªç§‹æ‹›çš„è¿‡ç¨‹ä¸­ï¼Œå…±å‚åŠ äº†8åœºé¢è¯•ï¼Œé˜¿é‡Œã€ç™¾åº¦ã€äº¬ä¸œã€ç¾å›¢ã€æ‹¼å¤šå¤šã€å¿«æ‰‹ã€å°çº¢ä¹¦ã€å¹³å®‰ã€‚æœ€åä¾¥å¹¸è·å¾—äº†7å®¶å…¬å¸çš„offerï¼Œå…¶ä¸­6å®¶sspï¼Œ1å®¶spï¼Œè–ªèµ„å¾…é‡40+W-70+Wä¸ç­‰ã€‚</p>
<p>å¯èƒ½å¾ˆå¤šäººä¼šè§‰å¾—æˆ‘åº”è¯¥æœ‰å¤šå®¶å¤§å‚çš„å®ä¹ ï¼Œä½†å…¶å®æˆ‘å¹¶æ²¡æœ‰ï¼Œç”±äºçˆ¶æ¯çš„å·¥ä½œå—åˆ°äº†ç–«æƒ…çš„å½±å“ï¼Œå¯¼è‡´æˆ‘ä»Šå¹´ä»ç–«æƒ…å¼€å§‹åˆ°7æœˆåˆä¸€ç›´éƒ½åœ¨å®¶é‡Œå¸®çˆ¶æ¯çš„å¿™ï¼Œä»è€Œé”™è¿‡äº†æš‘æœŸå®ä¹ ï¼Œçœ‹åˆ°å‘¨å›´çš„åŒå­¦éƒ½æ‹¿åˆ°äº†å¤§å‚å®ä¹ çš„offerï¼Œå½“æ—¶çš„æˆ‘åªæ„Ÿè§‰è‡ªå·±çš„ç§‹æ‹›åº”è¯¥å’Œäº’è”ç½‘æ— ç¼˜äº†ã€‚æ¯ä¸ªäººçš„ç§‹æ‹›åªæœ‰ä¸€æ¬¡ï¼Œå¦‚æœä¸å¥‹åŠ›ä¸€æï¼Œåˆæ€ä¼šçŸ¥é“æœ€ç»ˆçš„ç»“æœã€‚æŠ±ç€è¿™ä¸ªå¿µå¤´ï¼Œæˆ‘åœ¨7æœˆåˆå°±èµ¶ç´§æ”¾ä¸‹äº†çˆ¶æ¯çš„å·¥ä½œï¼Œå…¨èº«å¿ƒçš„å¤‡æˆ˜ç§‹æ‹›ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘å°±è¦è®²ä¸€è®²æˆ‘çš„æ–¹æ³•äº†ï¼Œå¤§éƒ¨åˆ†äº’è”ç½‘å…¬å¸ç®—æ³•å²—åŸºæœ¬æ˜¯ä¸‰è½®æŠ€æœ¯é¢+ä¸€è½®HRé¢ï¼ŒæŠ€æœ¯é¢æ¯è½®çš„é¢è¯•æ—¶é—´å¤§è‡´æ˜¯ä¸€ä¸ªå°æ—¶ï¼Œä¸»è¦è€ƒå¯Ÿcodingèƒ½åŠ›ã€åŸºç¡€çŸ¥è¯†å’Œé¡¹ç›®/ç«èµ›ã€‚ç”±äºæ—¶é—´çš„ä¸è¶³ï¼Œåœ¨è¿™ä¸‰ä¸ªæ–¹å‘ä¸Šæˆ‘åšäº†æ—¶é—´çš„åˆ†é…ï¼Œæˆ‘çš„å¤ä¹ é¡ºåºæ˜¯åŸºç¡€çŸ¥è¯†-&gt;é¡¹ç›®/ç«èµ›-&gt;codingèƒ½åŠ›ã€‚<a id="more"></a></p>
<p>1.åŸºç¡€çŸ¥è¯†</p>
<p>é™¤äº†æå°‘æ•°å…¬å¸ä¼šåœ¨ä¸€ä¸Šæ¥å°±è¦æ±‚ä½ åšä¸€é“ç¼–ç¨‹é¢˜ä»¥å¤–ï¼Œå¤§éƒ¨åˆ†äº’è”ç½‘å…¬å¸éƒ½ä¼šåœ¨ä½ çš„è‡ªæˆ‘ä»‹ç»å’Œè®ºæ–‡ä¹‹åå¼€å§‹è¿›è¡ŒåŸºç¡€çŸ¥è¯†çš„è€ƒå¯Ÿï¼Œå› æ­¤å®ƒçš„é‡è¦æ€§ä¸è¨€è€Œå–»ã€‚åŸºç¡€çŸ¥è¯†çš„å¤ä¹ æœ‰ä¸¤ç§é€”å¾„ï¼Œä¸€æ˜¯çœ‹ä¹¦ï¼ŒäºŒæ˜¯çœ‹è§†é¢‘ï¼Œè¿™å–å†³äºä½ å¯¹å“ªä¸€ç§é€”å¾„æ¥å—çŸ¥è¯†çš„é€Ÿåº¦æ›´å¿«ã€‚æˆ‘é€‰æ‹©çš„æ˜¯çœ‹ä¹¦ï¼Œä¸€æ˜¯å› ä¸ºè§†é¢‘ä¸ä¸€å®šè®²å¾—é¢é¢ä¿±åˆ°ï¼ŒäºŒæ˜¯è§†é¢‘è´¨é‡å¦‚æœä¸è¿‡å…³ï¼Œå¾ˆæœ‰å¯èƒ½æŸäº›ç»†èŠ‚çš„è®²è¿°æ˜¯é”™è¯¯çš„ã€‚ä»¥æ¨è/å¹¿å‘Šå²—ä½ä¸ºä¾‹ï¼Œæˆ‘ä¸»è¦çœ‹å¦‚ä¸‹ä¹¦ç±ã€‚</p>
<ul>
<li>å‘¨å¿—åçš„è¥¿ç“œä¹¦ã€Šæœºå™¨å­¦ä¹ ã€‹</li>
<li>æèˆªè€å¸ˆçš„ã€Šç»Ÿè®¡æœºå™¨å­¦ä¹ ã€‹ç¬¬äºŒç‰ˆ</li>
<li>DLåœ£ç»ã€Šæ·±åº¦å­¦ä¹ ã€‹ï¼ŒåˆåèŠ±ä¹¦ã€‚</li>
<li>ã€Šç™¾é¢æœºå™¨å­¦ä¹ ã€‹</li>
<li>ã€Šæ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡ã€‹ã€ã€Šçº¿æ€§ä»£æ•°ã€‹ã€ã€Šå‡¸ä¼˜åŒ–ã€‹</li>
<li>æ¨è/å¹¿å‘Šï¼šã€Šæ·±åº¦å­¦ä¹ æ¨èç³»ç»Ÿã€‹ã€ã€Šè®¡ç®—å¹¿å‘Šã€‹ç­‰</li>
</ul>
<p>å¦‚æœæ—¶é—´æœ‰é™ï¼Œå¯ä»¥ç›´æ¥å»çœ‹ç¬¬äºŒæœ¬è“çš®ä¹¦å’Œç¬¬ä¸‰æœ¬èŠ±ä¹¦ï¼Œè¿™ä¸¤æœ¬ä¹¦ä¸€å®šè¦ä»å¤´åˆ°å°¾ä»”ä»”ç»†ç»†çš„è¿‡ä¸€éï¼Œå› ä¸ºåŸºç¡€çŸ¥è¯†çš„è€ƒå¯Ÿæ— å¤–ä¹å°±æ˜¯æœºå™¨å­¦ä¹ æˆ–æ·±åº¦å­¦ä¹ é‡Œçš„çŸ¥è¯†ã€‚å½“è¿™ä¸¤æœ¬ä¹¦è¿‡å®Œä¸€éä¹‹åï¼Œå†çœ‹è¥¿ç“œä¹¦çš„æ•ˆç‡å°±ä¼šå¿«å¾ˆå¤šäº†ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œç¬¬å››æœ¬ä¹¦å¯ä»¥ç•™åœ¨ä½ å°†è¦é¢è¯•çš„é‚£å‡ å¤©ç€é‡å»å­¦ä¹ ï¼Œå› ä¸ºä½ æœ‰äº†å‰å‡ æœ¬ä¹¦çš„çŸ¥è¯†åšé“ºå«ï¼Œç¬¬å››æœ¬ä¹¦å°±å¯ä»¥å½“æˆå…«è‚¡æ–‡å»èƒŒäº†ã€‚å‰ææ˜¯ä¸€å®šè¦åœ¨ä½ ç†è§£è¿™äº›çŸ¥è¯†ä¹‹åï¼Œå› ä¸ºå•çº¯çš„æ­»è®°ç¡¬èƒŒé¢è¯•å®˜å…¶å®å¾ˆå®¹æ˜“å°±ä¼šå‘ç°ç ´ç»½ï¼Œæ¯•ç«Ÿç°åœ¨æ¯ä¸ªäººéƒ½ä¼šèƒŒã€‚å¯¹äºæœ¬ç§‘å­¦ä¹ è¿‡çš„çº¿ä»£å’Œæ¦‚ç‡è®ºï¼Œå»ºè®®å¤§å®¶ä¹Ÿå¤ä¹ ä¸€éï¼Œå› ä¸ºåœ¨æˆ‘çš„é¢è¯•è¿‡ç¨‹ä¸­å°±æœ‰é¢è¯•å®˜æ®‹å¿çš„æé—®äº†ï¼Œè™½ç„¶æ¦‚ç‡ä¸é«˜ã€‚å¯¹äºå­¦æœ‰ä½™åŠ›çš„åŒå­¦ï¼Œå¯ä»¥å»çœ‹ä¸€äº›æ¨è/å¹¿å‘Šæ–¹å‘çš„å·¥ä¸šç•Œäººå£«å‡ºç‰ˆçš„ä¹¦ç±ï¼Œè¿™ä¸€å—çš„çŸ¥è¯†è€ƒå¯Ÿå¾€å¾€ä¼šç©¿æ’åœ¨æ•´ä¸ªé¢è¯•ä¸­ï¼Œæœ‰çš„é¢è¯•å®˜ä¼šåœ¨æœ€åå½“æˆå¼€æ”¾é¢˜è¿›è¡Œè€ƒå¯Ÿã€‚</p>
<p>å…¶æ¬¡ï¼ŒåŸºç¡€çŸ¥è¯†çš„å¤ä¹ ä¹Ÿå¾ˆå®¹æ˜“ä¼šé—å¿˜ï¼Œé¢å¯¹è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä¸€èˆ¬ä¼šå°†é«˜é¢‘è€ƒç‚¹çš„çŸ¥è¯†å†™åœ¨ipadä¸­ï¼Œç„¶åæ¯æ™šä¼šå»å¤ä¹ ä¸€éï¼Œè¿™æ ·ä¸€ä¸ªæœˆä¸‹æ¥ï¼ŒåŸºç¡€çŸ¥è¯†åº”è¯¥å°±å¯ä»¥çƒ‚ç†Ÿäºå¿ƒäº†ï¼Œè¿™ä¸€æ®µçš„å¤ä¹ å°±å¯ä»¥å‘Šä¸€æ®µè½äº†ã€‚</p>
<p>2.é¡¹ç›®/ç«èµ›</p>
<p>é¡¹ç›®/ç«èµ›ä¸€èˆ¬ä¼šåœ¨åŸºç¡€çŸ¥è¯†ä¹‹åè¿›è¡Œè€ƒå¯Ÿï¼Œè¿™äº›ä¸€å®šè¦æå‰å‡†å¤‡å¥½ï¼Œå†™åœ¨ç®€å†é‡Œçš„é¡¹ç›®ä¸€å®šæ˜¯è¦è‡ªå·±äº²è‡ªåšè¿‡çš„ï¼Œå› ä¸ºä¸€æ—¦é¢è¯•å®˜é—®åˆ°äº†é¡¹ç›®ä¸­æŸä¸€ä¸ªéƒ¨åˆ†çš„ä»£ç æ˜¯å¦‚ä½•å®ç°è€Œä½ åˆå›ç­”ä¸ä¸Šæ¥çš„è¯ï¼Œåœ¨ä»–å¿ƒé‡Œå¯¹ä½ çš„å°è±¡å°±ä¼šéå¸¸å‡åˆ†ï¼Œå¹¶ä¸”ä¼šæ€€ç–‘å€™é€‰äººçš„è¯šä¿¡é—®é¢˜ã€‚æ‰€ä»¥ï¼Œæˆ‘çš„æ–¹æ³•æ˜¯å°†ä¹‹å‰åšè¿‡çš„é¡¹ç›®é‡æ–°å†åšä¸€éï¼ŒåŒ…æ‹¬ä»£ç éƒ¨åˆ†ã€‚è¿™ä¸€å—çœ‹ä¼¼ä¼šèŠ±è´¹å¤§é‡æ—¶é—´ï¼Œå®åˆ™å¹¶æ²¡æœ‰é‚£ä¹ˆé•¿ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä¼šå…ˆå°†åšè¿‡çš„é¡¹ç›®é‡æ–°æ¢³ç†ä¸€éï¼Œç”»å‡ºæ•´ä¸ªé¡¹ç›®çš„æµç¨‹å›¾ï¼Œç„¶åå†é€è¡Œå¤ä¹ è‡ªå·±çš„ä»£ç ã€‚ç­‰ä»£ç å¤ä¹ å®Œä¹‹åï¼Œå†åˆ æ‰é‡æ–°å†™ä¸€éï¼Œè¿™ä¸€æ­¥éª¤å› äººè€Œå¼‚ï¼Œå–å†³äºä½ çš„è®°å¿†èƒ½åŠ›ã€‚</p>
<p>ç«èµ›æ–¹é¢ï¼Œå¸¸ç”¨çš„ç«èµ›æ¨¡å‹å¦‚GBDTã€XGBoostã€LightGBMã€FFMã€DeepFFMç­‰ä¸€å®šè¦äº†è§£ã€‚æœ€åï¼Œå¦‚æœä½ çš„è®ºæ–‡æˆ–é¡¹ç›®ä¸é¢è¯•å®˜æ‰€åšçš„æ–¹å‘éå¸¸çš„matchï¼Œä½ é€šè¿‡è¿™ä¸€é¢çš„æ¦‚ç‡ä¹Ÿå°†ä¼šå¤§å¾ˆå¤šã€‚</p>
<p>3.codingèƒ½åŠ›</p>
<p>ä»£ç èƒ½åŠ›æ˜¯è®¡ç®—æœºä¸“ä¸šå­¦ç”Ÿçš„åŸºç¡€èƒ½åŠ›ï¼Œæ±‚èŒæŠ€æœ¯æ–¹å‘çš„åŒå­¦ï¼Œæ— è®ºæ˜¯æµ‹è¯•ã€å¼€å‘æˆ–ç®—æ³•ï¼Œäº’è”ç½‘å…¬å¸åœ¨è¿™ä¸€å—çš„è€ƒå¯Ÿéƒ½æ˜¯é‡ä¸­ä¹‹é‡ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œå¤§å‚åœ¨æ¯ä¸€è½®çš„æŠ€æœ¯é¢ä¸­ï¼Œè‡³å°‘ä¼šå‡ºä¸€é“ç¼–ç¨‹é¢˜ï¼Œå¤šçš„ä¼šç›´æ¥ä¸Šä¸‰é“ç¼–ç¨‹é¢˜è®©ä½ åšï¼ˆæˆ‘å°±é‡åˆ°äº†â€¦ï¼‰ï¼Œéš¾åº¦ä¸»è¦é›†ä¸­åœ¨easyå’Œmediumï¼Œå°‘æ•°ä¸§å¿ƒç—…ç‹‚ï¼ˆè¤’ä¹‰è¯ï¼‰çš„é¢è¯•å®˜ä¼šå‡ºhardé¢˜ã€‚è€Œè€ƒå¯ŸèŒƒå›´å·²æ˜¯åœˆå†…å…¬å¼€çš„ç§˜å¯†ï¼Œå°±åœ¨ã€Šå‰‘æŒ‡offerã€‹å’ŒLeetcodeä¸Šï¼Œå› æ­¤åˆ·é¢˜æˆä¸ºäº†å¤§å®¶æ±‚èŒè·¯ä¸Šå¿…é¡»è¦è¿ˆè¿‡çš„ä¸€é“åï¼Œè¿™ä¸ªåæ²¡æœ‰äººå¯ä»¥å¸®åˆ°ä½ ï¼Œåªæœ‰é ä½ è‡ªå·±ã€‚æˆ‘åœ¨ç¡•å£«é˜¶æ®µä¹Ÿæ²¡æœ‰åˆ»æ„çš„å»åˆ·è¿‡é¢˜ï¼Œåªæœ‰æœ¬ç§‘æ—¶åˆ·è¿‡æ´›è°·ï¼Œä¸‹é¢æ˜¯æˆ‘Leetcodeè´¦å·ä¸Šæäº¤æ¬¡æ•°çš„ç»Ÿè®¡ï¼š</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/nW2ZPfuYqSJh4l4lBnLYbAN7PVarFvVRcXWRCQB1dEbc4GgibJGibzibluMRCYgTX0v398v4H7GyRTcm5b5Az4mGg/640?wx_fmt=jpeg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>æˆ‘æ˜¯ä»8æœˆåˆå¼€å§‹é›†ä¸­åœ¨Leetcodeä¸Šåˆ·é¢˜ï¼Œä¸€ç›´åˆ·åˆ°äº†10æœˆä»½ï¼Œã€Šå‰‘æŒ‡offerã€‹ä¹Ÿæ˜¯åœ¨Leetcodeä¸Šåˆ·çš„ï¼Œå¹³å‡æ¯ä¸ªæœˆåˆ·é¢˜æ•°æ˜¯300ã€‚å¯èƒ½å¾ˆå¤šäººéƒ½è§‰å¾—300é“æ ¹æœ¬ä¸å¯èƒ½å®Œæˆï¼Œç¡®å®ï¼Œå¦‚æœä½ æŒ‰ç…§Leecodeå®˜æ–¹çš„é¢˜å·é¡ºåºå»åˆ·æ ¹æœ¬ä¸å¯èƒ½ï¼Œä½†å¦‚æœæ˜¯æŒ‰ç…§é¢˜ç›®ç±»å‹ï¼ˆæ ‡ç­¾ï¼‰å»åˆ·ï¼Œæ¯å¤©åˆ·10é“ï¼Œä¸€ä¸ªæœˆä¹Ÿå°±å®Œæˆäº†300é“ã€‚ä¸€å¼€å§‹å¯èƒ½ä¼šå¾ˆæ…¢ï¼Œä½†åŸºæœ¬ä¸Šæ¯ä¸ªç±»å‹çš„é¢˜ç›®å½“ä½ åˆ·å¤Ÿ20é“ä»¥åï¼Œéƒ½å¯ä»¥æ€»ç»“å‡ºè¯¥ç±»é¢˜ç›®çš„ä»£ç æ¨¡æ¿ï¼Œæ‰€ä»¥å‰æœŸä¼šæ…¢ä¸€ç‚¹ï¼Œè¶Šå¾€ååˆ™ä¼šå‘ç°åˆ·é¢˜é€Ÿåº¦è¶Šæ¥è¶Šå¿«ï¼Œå¯ä»¥ç†è§£ä¸ºå…ˆè‹¦åç”œã€‚è€Œå¯¹äºåˆ·é¢˜çš„æ–¹æ³•ï¼Œå¯ä»¥åˆ†ä¸ºä¸‰è½®è¿›è¡Œï¼š</p>
<p>a.ç¬¬ä¸€è½®ï¼šä¼˜å…ˆæ•ˆç‡ã€‚å½“ä¸€é“é¢˜èŠ±äº†åäº”åˆ†é’Ÿå»æ€è€ƒä¹Ÿæ²¡æœ‰æ€è·¯æ—¶ï¼Œåˆ™æœæ–­é€‰æ‹©ç›´æ¥çœ‹ç­”æ¡ˆã€‚</p>
<p>b.ç¬¬äºŒè½®ï¼šåŸ¹å…»æ€è·¯ã€‚ä½ éœ€è¦å¯¹ä»¥å‰åšè¿‡çš„æ¯ä¸€é“é¢˜éƒ½è¦æœ‰ä¸€ä¸ªå¤§è‡´çš„æ˜ åƒï¼Œå¹¶ä¸”çŸ¥é“è§£é¢˜çš„æ–¹æ³•æ˜¯ä»€ä¹ˆã€‚è¿™ä¸€è½®å…¶å®æœ€éš¾åº¦è¿‡ï¼Œå› ä¸ºäººå¯¹äº‹ç‰©çš„é—å¿˜æ˜¯æœ‰è§„å¾‹çš„ï¼Œè€Œæˆ‘ä»¬éœ€è¦æƒ³åŠæ³•å®¢æœè¿™ä¸ªè§„å¾‹ã€‚åœ¨è¿™é‡Œæ¨èä¸€ä¸‹æˆ‘çš„æ–¹æ³•ã€‚æˆ‘åœ¨åˆ·å®Œæ¯ä¸€é“é¢˜ä¹‹åï¼Œä¼šåœ¨ipadä¸Šæ³¨æ˜é¢˜å·ä»¥åŠé¢˜ç›®åç§°ï¼Œç„¶åå°†è¯¥é¢˜çš„è§£é¢˜æ€è·¯å†™ä¸‹æ¥ï¼Œæœ€åè¿˜ä¼šé‡å†™ä¸€éä»£ç ã€‚è¿™æ ·ï¼Œä»¥å¤©å’Œå‘¨ä¸ºå•ä½ä¸æ–­åœ°å¤ä¹ ä¹‹å‰çš„é¢˜ç›®ï¼Œå°±å¯ä»¥åšåˆ°ä»¥åé‡è§å®ƒä»¬æ—¶å¯ä»¥è¿…é€Ÿåæ˜ å‡ºæ˜¯ç”¨ä»€ä¹ˆæ–¹æ³•è§£å†³è¿™é“é¢˜çš„ã€‚</p>
<p>c.ç¬¬ä¸‰è½®ï¼šå®Œå–„æ€è·¯ã€‚å½“æˆ‘ä»¬é¡ºåˆ©åº¦è¿‡äº†ç¬¬äºŒè½®ä¹‹åï¼Œç¬¬ä¸‰è½®åˆ™éœ€è¦å­¦ä¹ æ¯é“é¢˜ç›®çš„å¤šç§è§£æ³•ï¼Œæ¯”å¦‚TopKé—®é¢˜å¯ä»¥ç”¨å¿«æ’å˜å½¢/å †/äºŒå‰æŸ¥æ‰¾æ ‘/è®¡æ•°æ’åºå››ç§æ–¹æ³•è§£å†³ã€‚åœ¨æˆ‘çš„é¢è¯•è¿‡ç¨‹ä¸­ï¼Œæœ‰äº›é¢è¯•å®˜ä¼šåœ¨ä½ ACä¸€é“é¢˜åè¿˜ä¼šè¦æ±‚å†™å‡ºæœ€ä¼˜è§£ï¼Œè¿™å¾€å¾€å†³å®šä½ çš„é¢è¯„æ˜¯å¦èƒ½è¾¾åˆ°è¾ƒé«˜çº§åˆ«ï¼Œä¹Ÿå°±æ˜¯èƒ½å¦æ‹¿åˆ°spä»¥ä¸Šçº§åˆ«çš„offerï¼Œå¹¶ä¸”ä¸€é“é¢˜å¦‚æœå­¦ä¼šäº†å¤šç§è§£æ³•ï¼Œä¹Ÿä¼šè®©ä½ åŠ æ·±å¯¹è¿™é“é¢˜çš„ç†è§£ã€‚å› æ­¤ï¼Œæˆ‘å»ºè®®å¤§å®¶è¦å­¦ä¼šç”¨å¤šç§è§£æ³•è§£å†³ä¸€é“é¢˜ï¼Œå¹¶ä¸”è¦åŸ¹å…»å‡ºèƒ½å¿«é€ŸACçš„èƒ½åŠ›ã€‚</p>
<p>PSï¼šåœ¨è¿™é‡Œï¼Œæˆ‘è¦æ¨èä¸€ä¸‹è‡ªå·±å…è´¹åŠ å…¥çš„Leetcodeæ¯æ—¥æ‰“å¡å’Œç«èµ›ç¾¤ï¼Œåœˆå†…ä¿—ç§°æ®‹é…·ç¾¤ã€‚å›½æœå‰ä¸€ç™¾ä½çš„é€‰æ‰‹åœ¨è¯¥ç¾¤éƒ½æœ‰å¥½å‡ åäººã€‚è§„åˆ™å¾ˆç®€å•ï¼Œæ¯æ—¥å®Œæˆé¢˜ä¸»å‘å¸ƒçš„Leetcodeé¢˜å·ä»¥åŠæ¯å‘¨åœ¨ç¾æœä¸Šæ‰“Leetcodeå‘¨èµ›ï¼Œä½†å‘¨èµ›æ’åé åçš„å°ä¼™ä¼´ä¼šè¦æ±‚å‘çº¢åŒ…ï¼Œè¿™ä¸ªæœºåˆ¶ä¹Ÿæ˜¯ä¸ºäº†ç£ä¿ƒå¤§å®¶å¿«é€Ÿæˆé•¿ã€‚æ‰€ä»¥ç§‹æ‹›ä¸æ˜¯åˆ·é¢˜ä¹‹è·¯çš„ç»ˆç‚¹ï¼Œè€Œä»…ä»…åªæ˜¯å¼€å§‹ã€‚</p>
<h2 id="é¢è¯•æŠ•é€’"><a href="#é¢è¯•æŠ•é€’" class="headerlink" title="é¢è¯•æŠ•é€’"></a>é¢è¯•æŠ•é€’</h2><p>åœ¨å®Œæˆäº†åŸºç¡€çŸ¥è¯†-&gt;é¡¹ç›®/ç«èµ›-&gt;codingèƒ½åŠ›çš„å¤ä¹ åï¼Œæ—¶é—´èŠ‚ç‚¹ä¹Ÿç§»åŠ¨åˆ°äº†å…«æœˆä¸­ä¸‹æ—¬ï¼Œè¿™æ—¶å¾ˆå¤šå…¬å¸çš„ç§‹æ‹›æ­£å¼æ‰¹å³å°†å¼€å§‹ã€‚ç”±äºæˆ‘é”™è¿‡äº†æå‰æ‰¹çš„æŠ•é€’ï¼Œè€Œæå‰æ‰¹å¾€å¾€éƒ½æ²¡æœ‰ç¬”è¯•ï¼Œæ‰€ä»¥æ­£å¼æ‰¹åªèƒ½å…ˆå‚åŠ ç¬”è¯•å†è¿›è¡Œé¢è¯•ã€‚ç»è¿‡è¡€ä¸æ³ªçš„ç£¨ç»ƒåï¼Œåœ¨è¿™é‡Œç»™å¤§å®¶çš„å»ºè®®æ˜¯ï¼Œæœ‰æå‰æ‰¹æŠ•æå‰æ‰¹ï¼Œæ— æå‰æ‰¹æŠ•ç‰¹æ®Šè®¡åˆ’ï¼Œé‡è¦çš„äº‹æƒ…è¯´ä¸‰ç™¾éã€‚åŸå› æœ‰ä¸¤ç‚¹ï¼š1ã€æå‰æ‰¹çš„ç«äº‰å‹åŠ›å°ï¼ŒæŠ•çš„äººå°‘ï¼Œå…ˆæ‹¿åˆ°offerçš„æ¦‚ç‡å¾ˆå¤§ï¼›2ã€æ­£å¼æ‰¹çš„ç¬”è¯•é¢˜ä¸€èˆ¬æœ‰ä¸€å®šéš¾åº¦ï¼Œä¸”åˆ·äººä¸»è¦çœ‹ACé¢˜ç›®çš„æ•°é‡ï¼Œæ¯”è¾ƒæ®‹é…·ã€‚è€Œä¸”æ®æˆ‘èº«è¾¹åŒå­¦çš„ä¾‹å­ï¼Œæœ‰å¾ˆå¤šäººç¬”è¯•å®Œä¹‹åå…¬å¸å°±æ³æ— éŸ³ä¿¡äº†ï¼Œè¦é—®å°±æ˜¯åœ¨ç­›é€‰ï¼Œå®é™…ä¸Šä½ å·²ç»å¦¥å¦¥å˜æˆäº†å¤‡èƒï¼ˆæœ‰æ‹çˆ±ç»éªŒçš„äººéƒ½æ‡‚ï¼‰ï¼Œç„¶ååœ¨å…¬å¸çš„æ± å­é‡Œæ¬¢å¿«çš„æ¸¸åŠ¨ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè‹¥æ„Ÿè§‰è‡ªå·±è¿˜æ²¡æœ‰å‡†å¤‡å¥½ï¼Œåˆ™å¯ä»¥ç­‰å¾…å‡ å¤©å†æŠ•é€’ï¼Œä½†åƒä¸‡ä¸è¦é”™è¿‡æå‰æ‰¹çš„æˆªæ­¢æ—¶é—´ã€‚</p>
<p>æ‰€ä»¥æå‰æ‰¹çš„é¢è¯•èƒ½æŠŠæ¡çš„è¿˜æ˜¯å°½é‡è¦æŠŠæ¡ï¼Œå“ªæ€•ä½ è§‰å¾—è‡ªå·±åªå‡†å¤‡äº†60%ï¼Œä½†ä¸‡ä¸€æˆåŠŸäº†å‘¢ï¼Ÿå› ä¸ºé¢è¯•é€šè¿‡è¿™ä¸ªäº‹æƒ…ï¼Œå®åŠ›ä¸è¿æ°”éƒ½éœ€è¦ï¼Œ åœ¨ä½ çš„å®åŠ›å’Œåˆ«äººå·®è·ä¸å¤§çš„æƒ…å†µä¸‹ï¼Œå®åŠ›ä¸å¤Ÿï¼Œä¹Ÿå¯ä»¥è¿æ°”æ¥å‡‘ä¸æ˜¯å—ã€‚</p>
<h2 id="éƒ¨åˆ†é¢ç»"><a href="#éƒ¨åˆ†é¢ç»" class="headerlink" title="éƒ¨åˆ†é¢ç»"></a>éƒ¨åˆ†é¢ç»</h2><p>ä»¥ä¸‹é¢ç»å‡ä¸ºå„ä¸ªå…¬å¸çš„æ­£å¼æ‰¹ï¼Œç”±äºæ—¶é—´æœ‰ç‚¹ä¹…è¿œï¼Œæœ‰äº›è€ƒç‚¹å·²ç»ä¸è®°å¾—äº†ã€‚</p>
<blockquote>
<p>äº¬ä¸œ</p>
</blockquote>
<p>ä¸€é¢ï¼š</p>
<p>1ã€ä»‹ç»è®ºæ–‡ã€é¡¹ç›®ï¼Œå¾ˆè¯¦ç»†ã€‚åŒ…æ‹¬æ¯ä¸€ä¸ªç¯èŠ‚æ˜¯æ€ä¹ˆå®ç°çš„ï¼ŒæŸå¤±å‡½æ•°æ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Œæ¨¡å‹æ˜¯å¦‚ä½•è®­ç»ƒçš„ç­‰ç­‰ã€‚</p>
<p>2ã€ä»£ç é¢˜ï¼šLeetcode 713ï¼šä¹˜ç§¯å°äºkçš„å­æ•°ç»„ï¼›Leetcode 297ï¼šäºŒå‰æ ‘çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚</p>
<p>3ã€GBDTã€XGBoostã€LigthGBMçš„åŒºåˆ«ä¸è”ç³»ã€‚</p>
<p>4ã€é€å…¥LRå‰ï¼Œå¦‚ä½•å¤„ç†æ•°æ®ï¼ˆç‰¹å¾å·¥ç¨‹ï¼‰ã€‚</p>
<p>äºŒé¢ï¼š</p>
<p>1ã€ä»‹ç»è®ºæ–‡ã€é¡¹ç›®ï¼Œå¾ˆè¯¦ç»†ã€‚</p>
<p>2ã€Transformerä¸­çš„Scaled Dot-Product Attentionä¸ºä»€ä¹ˆè¦ç¼©æ”¾ï¼ˆä¸¤ç‚¹ï¼‰ã€‚</p>
<p>3ã€Transformerä¸­çš„Position Embeddingæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p>
<p>4ã€baggingå’Œboostingä¸åå·®å’Œæ–¹å·®çš„å…³ç³»ä»¥åŠåŸå› ã€‚</p>
<p>5ã€å¦‚ä½•è§£å†³æ•°æ®ä¸å¹³è¡¡çš„é—®é¢˜ã€‚</p>
<p>6ã€å‡è®¾æ£€éªŒçš„ä¸¤ç±»é”™è¯¯ã€‚</p>
<p>7ã€MSEã€MAEä¸è´å¶æ–¯ä¼°è®¡çš„åŒºåˆ«ã€‚</p>
<p>8ã€ä¸ºä»€ä¹ˆå¿«æ’æ¯”å †æ’å¿«ï¼Ÿ</p>
<p>9ã€å£è¿°ç®—æ³•é¢˜ï¼šå¯¹ä¸€ä¸ªå•†å“çš„ä»·æ ¼ã€æ•°é‡ã€è´­ä¹°äººæ•°è¿›è¡Œåˆ†æ¬¡æ’åºï¼Œä¸æ”¹å˜ä¹‹å‰çš„æ’åºç»“æœã€‚</p>
<p>ä¸‰é¢ï¼š</p>
<p>ç”±äºä¸€ã€äºŒé¢è¡¨ç°å¥½ï¼Œä¸‰é¢ç›´æ¥è¿‡äº†ã€‚</p>
<blockquote>
<p>ç¾å›¢ï¼š</p>
</blockquote>
<p>ä¸€é¢ï¼š</p>
<p>1ã€ä»‹ç»è®ºæ–‡å’Œé¡¹ç›®ï¼Œå¾ˆè¯¦ç»†ã€‚</p>
<p>2ã€ä»£ç é¢˜ï¼šé¢è¯•é¢˜17.24ï¼šæœ€å¤§å­çŸ©é˜µï¼›Leetcode 695ï¼šå²›å±¿çš„æœ€å¤§é¢ç§¯ã€‚</p>
<p>3ã€ä»‹ç»ä¸€ä¸‹DSSMã€‚</p>
<p>4ã€å¼€æ”¾é¢˜ï¼šå…³äºåŒå¡”æ¨¡å‹çš„åº”ç”¨ã€‚</p>
<p>äºŒé¢ï¼š</p>
<p>1ã€ä»‹ç»è®ºæ–‡å’Œé¡¹ç›®ï¼Œä»¥åŠè®ºæ–‡ä¸­çš„æ¶‰åŠåˆ°çš„baselineæ¨¡å‹ã€‚</p>
<p>2ã€ä»£ç é¢˜ï¼šé¢è¯•é¢˜01.08ï¼šé›¶çŸ©é˜µï¼Œå†™å‡ºä¸¤ç§è§£æ³•ã€‚</p>
<p>3ã€XGBoost å¦‚æœæŸå¤±å‡½æ•°æ²¡æœ‰äºŒé˜¶å¯¼ï¼Œè¯¥æ€ä¹ˆåŠã€‚</p>
<p>4ã€èŠå¤©+åé—®ã€‚</p>
<p>ä¸‰é¢ï¼š</p>
<p>1ã€ä»‹ç»è®ºæ–‡å’Œé¡¹ç›®ï¼Œéå¸¸è¯¦ç»†ã€‚</p>
<p>2ã€ä»‹ç»å®ä¹ ï¼Œè¯´è¯´å®ä¹ å°è±¡ä¸­æœ€æ·±çš„ç‚¹ã€‚</p>
<p>3ã€å¼€æ”¾é¢˜ï¼šéƒ¨é—¨ä¸­çš„æŸä¸ªåº”ç”¨åœºæ™¯ä½ ä¼šæ€ä¹ˆè§£å†³ã€‚</p>
<p>4ã€èŒä¸šè§„åˆ’ï¼Œä¸ªäººå¸Œæœ›åšçš„æ–¹å‘ã€‚</p>
<blockquote>
<p>æ‹¼å¤šå¤šï¼š</p>
</blockquote>
<p>ä¸€é¢ï¼š</p>
<p>1ã€ä»‹ç»è®ºæ–‡å’Œé¡¹ç›®ã€‚</p>
<p>2ã€AUCæ˜¯å¦‚ä½•å®ç°çš„ï¼Œå®ƒå¯¹å‡åŒ€æ­£è´Ÿæ ·æœ¬é‡‡æ ·æ˜¯å¦æ•æ„Ÿï¼Œå¹¶ç”¨ä»£ç å®ç°ã€‚</p>
<p>3ã€BERTä¸ALBERTçš„åŒºåˆ«ã€‚</p>
<p>4ã€ä»‹ç»ä¸€ä¸‹DKNæ¨¡å‹ã€‚</p>
<p>äºŒé¢ï¼š</p>
<p>1ã€ä»‹ç»è®ºæ–‡å’Œé¡¹ç›®ã€‚</p>
<p>2ã€è¿‡æ‹Ÿåˆå¦‚ä½•è§£å†³+å…·ä½“æ–¹æ³•è¿½é—®ã€‚</p>
<p>3ã€ä»£ç é¢˜ï¼šLeetcode 42ï¼šæ¥é›¨æ°´ã€‚</p>
<p>4ã€çŸ¥è¯†å›¾è°±è¡¨ç¤ºå­¦ä¹ æœ‰å“ªäº›æ¨¡å‹ã€‚</p>
<p>5ã€èŠå¤©+åé—®ã€‚</p>
<blockquote>
<p>é˜¿é‡Œï¼š</p>
</blockquote>
<p>ä¸€é¢ï¼š</p>
<p>1ã€ä»‹ç»è®ºæ–‡å’Œé¡¹ç›®ã€‚</p>
<p>2ã€ä»£ç é¢˜ï¼šLeetcode 382ï¼šé“¾è¡¨éšæœºèŠ‚ç‚¹ï¼Œå¹¶å£è¿°è“„æ°´æ± é‡‡æ ·ç®—æ³•çš„æ¨å¯¼ã€‚</p>
<p>3ã€æ¦‚ç‡é¢˜ï¼šå°†ä¸€æ ¹æœ¨æ£åˆ†æˆä¸‰æ®µï¼Œæ±‚è¿™ä¸‰æ®µæ„æˆä¸‰è§’å½¢çš„æ¦‚ç‡ã€‚</p>
<p>4ã€å¼€æ”¾é¢˜ï¼šä¸€ä¸ªè¶…çº§å¤§æ–‡ä»¶ï¼Œæ¯ä¸€è¡Œæœ‰ä¸€ä¸ª ip åœ°å€ï¼Œå†…å­˜æœ‰é™ï¼Œå¦‚ä½•æ‰¾å‡ºå…¶ä¸­é‡å¤æ¬¡æ•°æœ€å¤šçš„ ip åœ°å€ã€‚</p>
<p>äºŒé¢ï¼š</p>
<p>1ã€ä»‹ç»è®ºæ–‡å’Œé¡¹ç›®ã€‚</p>
<p>2ã€è®ºæ–‡åç»­å¯èƒ½æå‡çš„ç‚¹ä»¥åŠæƒ³æ³•æ¢è®¨ã€‚</p>
<p>3ã€è¯´ä¸€è¯´Graph Embeddingå’ŒGNNçš„åŒºåˆ«ã€‚</p>
<p>4ã€ä»£ç é¢˜ï¼šLeetcode 23ï¼šåˆå¹¶Kä¸ªå‡åºé“¾è¡¨ã€‚</p>
<p>5ã€èŠå¤©+åé—®ã€‚</p>
<p>ä¸‰é¢ï¼š</p>
<p>1ã€ä»‹ç»è®ºæ–‡å’Œé¡¹ç›®ã€‚</p>
<p>2ã€ä»‹ç»ä¸€ä¸‹æœ€èƒ½ä½“ç°è‡ªå·±å·¥ç¨‹èƒ½åŠ›çš„é¡¹ç›®ã€‚</p>
<p>3ã€å¦‚ä½•æé«˜æ¨èçº¿ä¸Šçš„æ€§èƒ½ã€‚</p>
<p>4ã€å¼ºåŒ–å­¦ä¹ åœ¨æ¨èä¸­çš„åº”ç”¨åŠæ¢è®¨ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ€åï¼Œæˆ‘æƒ³è°ˆä¸€è°ˆè‡ªå·±å¯¹äºé¢è¯•çš„çœ‹æ³•ã€‚æ— è®ºæ˜¯ç«èµ›ã€è®ºæ–‡è¿˜æ˜¯å¤§å‚å®ä¹ ï¼Œè¿™äº›éƒ½æ˜¯ä¸ºäº†æ–¹ä¾¿ä½ æ‹¿åˆ°é¢è¯•çš„èµ„æ ¼ï¼Œå“ªæ€•ä½ ä¸‰è€…éƒ½æ²¡æœ‰ï¼Œä½†åªè¦å…¬å¸æ„¿æ„å‘ä½ å‘èµ·é¢è¯•ï¼Œä½ éƒ½åº”è¯¥å¥½å¥½åŠªåŠ›ã€‚è€Œæœ€ç»ˆæ˜¯å¦èƒ½é¡ºåˆ©æ‹¿åˆ°offerä»¥åŠofferçš„ç­‰çº§ï¼Œä¸»è¦è¿˜æ˜¯å–å†³äºä½ çš„é¢è¯„ï¼Œä¸€ä¸ªéå¸¸å¥½çš„é¢è¯„æ˜¯å¸®åŠ©ä½ æ‹¿ä¸‹å¤§å‚spä»¥ä¸Šofferè‡³å…³é‡è¦çš„å› ç´ ï¼Œå› æ­¤åˆ‡å¿Œé¢è¯•ç´§å¼ ï¼Œå¦‚æœä½ ç´§å¼ ï¼Œå¯ä»¥å¿ƒä¸­é»˜å¿µæ¬§ç±³è±†è…ã€‚</p>
<p>ç¥æ„¿å¤§å®¶éƒ½èƒ½æ‹¿åˆ°è‡ªå·±å¿ƒä»ªçš„offerï¼</p>
]]></content>
      <categories>
        <category>Others</category>
        <category>Interview</category>
      </categories>
      <tags>
        <tag>NLP</tag>
        <tag>Interview</tag>
        <tag>Job</tag>
      </tags>
  </entry>
  <entry>
    <title>è°ˆè°ˆæœªæ¥ï¼šNLPè·¯åœ¨ä½•æ–¹ï¼Ÿ</title>
    <url>/2020/11/18/%E8%B0%88%E8%B0%88%E6%9C%AA%E6%9D%A5%EF%BC%9ANLP%E8%B7%AF%E5%9C%A8%E4%BD%95%E6%96%B9%EF%BC%9F/</url>
    <content><![CDATA[<blockquote>
<p> æœ¬æ–‡è½¬è½½è‡ªï¼šâ€œå¤•å°ç‘¶çš„å–èŒå±‹â€</p>
<p>è¿™æ˜¯ä¸€ä¸ªå¾ˆèŒå¾ˆå¹²è´§çš„å…¬ä¼—å·ï¼Œå¼ºçƒˆå®‰åˆ©ä¸€ä¸‹~</p>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzIwNzc2NTk0NQ==&amp;mid=2247500560&amp;idx=1&amp;sn=f80675e02c36ff1c99eb2adb5a3c9205&amp;chksm=970febc6a07862d06a375a70ba21a63200dc0b8521d9655b48b4c37cfe00e8972bcb37644afc&amp;scene=126&amp;sessionid=1605625565&amp;key=1e61c84483e13f9471ee0797d016c58ad2c5650c2da9838f5a72d9628e9968cb2de25800764d4886b46fc6369be40d19db24e806b3df2775b2735adb3b07026fd4f9a606ea6808c12cf5c315c448e9320c0d6c3398f8042d2a272a48f2b1b74a3c08daf500b18c90b33a9389de250c682340459bc12840bc2a10de67ec55aa35&amp;ascene=1&amp;uin=MjExODc0NDkwMg%3D%3D&amp;devicetype=Windows+10+x64&amp;version=6300002f&amp;lang=zh_CN&amp;exportkey=AUEDy2LXhDbW1ZdKANZsG%2Fo%3D&amp;pass_ticket=JMu0tZ8lnp%2FRuz1okqXGKHCSZV44b5P1Q0yYYVTQAtVTaM8NrMmb5T6PBnHGy2oL&amp;wx_header=0" target="_blank" rel="noopener">https://mp.weixin.qq.com/s?__biz=MzIwNzc2NTk0NQ==&amp;mid=2247500560&amp;idx=1&amp;sn=f80675e02c36ff1c99eb2adb5a3c9205&amp;chksm=970febc6a07862d06a375a70ba21a63200dc0b8521d9655b48b4c37cfe00e8972bcb37644afc&amp;scene=126&amp;sessionid=1605625565&amp;key=1e61c84483e13f9471ee0797d016c58ad2c5650c2da9838f5a72d9628e9968cb2de25800764d4886b46fc6369be40d19db24e806b3df2775b2735adb3b07026fd4f9a606ea6808c12cf5c315c448e9320c0d6c3398f8042d2a272a48f2b1b74a3c08daf500b18c90b33a9389de250c682340459bc12840bc2a10de67ec55aa35&amp;ascene=1&amp;uin=MjExODc0NDkwMg%3D%3D&amp;devicetype=Windows+10+x64&amp;version=6300002f&amp;lang=zh_CN&amp;exportkey=AUEDy2LXhDbW1ZdKANZsG%2Fo%3D&amp;pass_ticket=JMu0tZ8lnp%2FRuz1okqXGKHCSZV44b5P1Q0yYYVTQAtVTaM8NrMmb5T6PBnHGy2oL&amp;wx_header=0</a></p>
</blockquote>
<p><strong>CMUã€åç››é¡¿å¤§å­¦ã€å—åŠ å·å¤§å­¦ã€MITã€MILAã€å¯†æ­‡æ ¹å¤§å­¦ã€çˆ±ä¸å ¡å¤§å­¦ã€DeepMindã€ä¼¯å…‹åˆ©ã€Apple</strong>â€¦å¦‚æœæˆ‘è¯´æ¥è‡ªè¿™äº›åœ°æ–¹çš„dalaoå…±åŒå‘è¡¨äº†ä¸€ç¯‡æ–‡ç« ï¼Œä½ ç›¸ä¿¡ä¹ˆï¼Ÿä½†åˆ«æƒŠè®¶ï¼Œåœ¨å³å°†å¬å¼€çš„EMNLPâ€™20çš„é•¿æ–‡åˆ—è¡¨é‡Œï¼Œæˆ‘ä»¬å°±çœŸæ‰¾åˆ°äº†è¿™æ ·ä¸€ç¯‡â€œå¥‡æ–‡â€ã€‚ä¸€ç¯‡è®ºæ–‡å¼•å¾—ä¼—æ˜Ÿäº‘é›†ï¼Œé‚£è§£å†³çš„å¿…ç„¶ä¸æ˜¯å°é—®é¢˜ã€‚è¿™ä¸ï¼Œä½œè€…ä¹Ÿå¾ˆè´´å¿ƒåœ°æŠŠä»–ä»¬æ‰€å¸Œæœ›è§£å†³çš„é—®é¢˜æ–œä½“ç‹¬è¡Œåœ°æ”¾åœ¨äº†è®ºæ–‡çš„é¦–æ é‡Œâ€”â€”</p>
<p><strong>Where is NLP goingï¼Ÿ</strong></p>
<p>â€¦â€¦</p>
<p>åœ¨æœªæ¥çš„è¿™å‡ åˆ†é’Ÿé‡Œï¼Œè®©æˆ‘ä»¬æš‚æ—¶æ”¾ä¸‹è‡ªå·±æ­£åœ¨æ”¹çš„æ¨¡å‹ã€æ­£åœ¨å†™çš„è®ºæ–‡å’Œæ­£åœ¨è¿½çš„SOTAï¼Œé‡æ‹¾è‡ªç„¶è¯­è¨€å¤„ç†çš„åˆå¿ƒï¼Œè·Ÿéšå¤§ä½¬ä»¬çš„è„šæ­¥ï¼Œå»ç•…æƒ³ä¸€ä¸‹æœªæ¥çš„NLPç©¶ç«Ÿæ˜¯ä»€ä¹ˆæ ·çš„å§ã€‚</p>
<p><strong>è®ºæ–‡é¢˜ç›®</strong>ï¼š</p>
<p>ã€ŠExperience Grounds Languageã€‹</p>
<p><strong>è®ºæ–‡é“¾æ¥</strong>ï¼š</p>
<p><em><a href="https://arxiv.org/abs/2004.10151" target="_blank" rel="noopener">https://arxiv.org/abs/2004.10151</a></em></p>
<p>Arxivè®¿é—®æ…¢çš„å°ä¼™ä¼´ä¹Ÿå¯ä»¥åœ¨ã€<strong>å¤•å°ç‘¶çš„å–èŒå±‹</strong>ã€‘è®¢é˜…å·åå°å›å¤å…³é”®è¯ã€<strong><em>1117</em></strong>ã€‘ä¸‹è½½è®ºæ–‡PDF~</p>
<h2 id="NLPï¼Œåˆ°åº•è¯¥æ€ä¹ˆæï¼Ÿ"><a href="#NLPï¼Œåˆ°åº•è¯¥æ€ä¹ˆæï¼Ÿ" class="headerlink" title="NLPï¼Œåˆ°åº•è¯¥æ€ä¹ˆæï¼Ÿ"></a>NLPï¼Œåˆ°åº•è¯¥æ€ä¹ˆæï¼Ÿ</h2><p>è¿™æ˜¯æ¯ä¸€ä¸ªNLPäººéƒ½å¸Œæœ›æ¢ç´¢çš„ç»ˆæé—®é¢˜ã€‚åœ¨ç»å†äº†21ä¸–çºªåˆçš„ç¥ç»è¯­è¨€æ¨¡å‹ã€2013å¹´word2vecç®—æ³•ã€2018å¹´çš„é¢„è®­ç»ƒæ¨¡å‹ç­‰ç­‰çš„é‡Œç¨‹ç¢‘è¿‡åï¼Œå½“ä»Šçš„NLPå·²ç»åœ¨è®¸å¤šä»»åŠ¡ä¸Šå–å¾—äº†ä»¤äººæ¬£å–œçš„æ•ˆæœã€‚ä½†æ˜¯ï¼Œåœ¨æ¬£å–œäºä¸€ä¸ªä¸ªå­ä»»åŠ¡çš„çªç ´ä¹‹åï¼Œæˆ‘ä»¬ä¹Ÿè¯¥åœä¸‹æ¥æ€è€ƒæˆ‘ä»¬æ¯ä¸ªäººåœ¨åˆè¯†NLPæ—¶çš„é‚£ä¸ªé—®é¢˜ï¼šå¦‚ä½•æ‰èƒ½è®©æœºå™¨<strong>çœŸæ­£åœ°</strong>ç†è§£äººç±»è¯­è¨€å‘¢ï¼Ÿ</p>
<p>æœ¬æ–‡æå‡ºäº†æœªæ¥NLPçš„å‘å±•æ–¹å‘ï¼šåªé æ–‡æœ¬ï¼Œæ˜¯å­¦ä¸ä¼šè¯­è¨€çš„ï¼›å­¦ä¼šè¯­è¨€ï¼Œéœ€è¦çš„æ˜¯â€œ<strong>è¯­è¨€ä¹‹å¤–çš„äº‹ä»¶</strong>â€å’Œâ€œ<strong>ç¤¾ä¼šç¯å¢ƒ</strong>â€ã€‚è¿™æ ·è™šæ— ç¼¥ç¼ˆçš„ä¸¤ä¸ªè¯ï¼Œéšå«çš„å´æ˜¯æœªæ¥NLPæ‰€éœ€è¦æ·»åŠ çš„æ½œåœ¨çš„æ–°ç»„ä»¶ã€‚</p>
<p>ä¸ºäº†æ›´åŠ å…·è±¡ï¼Œä½œè€…å¼•å…¥äº†â€œ<strong>ä¸–ç•ŒèŒƒå›´</strong>â€çš„æ¦‚å¿µï¼Œè‹±æ–‡åç§°World Scopeï¼Œç®€ç§°<strong>WS</strong>ï¼ˆä¸è§‰å¾—å’Œä½œè€…ç‹è‹æœ‰ç‚¹å…³ç³»ä¹ˆï¼ˆé€ƒï¼‰ï¼‰</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/IVz4ZzrQibgTFQmNH95NicHuicZqKFlMK2jkapjAo00uZS6tuIGrjUvKUuPsicKDW7ozpVia6pm4gw4njoCkbfPJN9g/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>é‚£ä¹ˆè¿™äº”ä¸ªä¸–ç•Œåˆ†åˆ«è¡¨ç¤ºä»€ä¹ˆï¼Œåˆè±¡å¾ç€NLPçš„å‘å±•åˆ°äº†å“ªä¸ªé˜¶æ®µå‘¢ï¼Ÿç°åœ¨ï¼Œè®©æˆ‘ä»¬æŠŠNLPç³»ç»Ÿæƒ³è±¡æˆè‡ªå®¶å­©å­ï¼Œçœ‹çœ‹å’±å®¶å®è´å„¿æ˜¯æ€ä¹ˆä¸€æ­¥æ­¥ä»è¿‡å»åªä¼šæ€»ç»“æ–‡æœ¬æ¨¡å¼åˆ°æœªæ¥èƒ½å¤Ÿèƒ½åŠ¨åœ°æ”¹å˜ä¸–ç•Œçš„å§~ï¼ˆä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬å°±å«å¥¹<strong>Nå®</strong>ï¼‰<a id="more"></a></p>
<h2 id="WS1ï¼šå°‘é‡è¯­æ–™çš„ä¸–ç•Œâ€”â€”å½“ç³»ç»Ÿå­¦ä¼šè¡¨ç¤º"><a href="#WS1ï¼šå°‘é‡è¯­æ–™çš„ä¸–ç•Œâ€”â€”å½“ç³»ç»Ÿå­¦ä¼šè¡¨ç¤º" class="headerlink" title="WS1ï¼šå°‘é‡è¯­æ–™çš„ä¸–ç•Œâ€”â€”å½“ç³»ç»Ÿå­¦ä¼šè¡¨ç¤º"></a>WS1ï¼šå°‘é‡è¯­æ–™çš„ä¸–ç•Œâ€”â€”å½“ç³»ç»Ÿå­¦ä¼šè¡¨ç¤º</h2><p><img src="https://mmbiz.qpic.cn/mmbiz_png/IVz4ZzrQibgTFQmNH95NicHuicZqKFlMK2jFSGWkRbJIr0m3D1J4EYTFHM0YQYEiaibITElsRssicqNXiayZ6uaicq2b2Q/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>Nå®ç»ˆäºæ‹¿åˆ°äº†å¥¹èƒ½æ¥è§¦åˆ°çš„ç¬¬ä¸€ä¸ªè¯­æ–™ï¼æ­¤æ—¶çš„å¥¹ï¼Œçœ‹çš„å¤šåŠæ˜¯ç±»ä¼¼äºPenn Treebankçš„ç»å…¸æ•°æ®é›†ï¼Œè€Œå¥¹æ—¢æ²¡æœ‰å®¹é‡å¾ˆå¤§çš„å¤§è„‘ï¼ˆæŒ‡æ¨¡å‹ï¼‰ï¼Œåˆæ¥è§¦ä¸åˆ°å…¶ä»–ä¸œè¥¿ï¼ˆæŒ‡æ„ŸçŸ¥å’Œå¤§é‡è¯­æ–™ï¼‰ï¼Œäºæ˜¯ç ”ç©¶è€…è´¹å°½å¿ƒæœºåœ°æ€è€ƒå¦‚ä½•è®©å¥¹ç”¨å°‘é‡æ–‡æœ¬ä¹Ÿèƒ½å­¦åˆ°äº›ä»€ä¹ˆã€‚è¿™æ—¶çš„å‘å±•ï¼Œæ­£æ˜¯é›†ä¸­åœ¨<strong>æ–‡æœ¬è¡¨ç¤º</strong>ä¸Šã€‚</p>
<p>æ‰€è°“çš„â€œ<strong>å«ä¹‰</strong>â€ï¼ˆmeaningï¼‰åˆ°åº•åœ¨å“ªé‡Œå‘¢ï¼Ÿä¸€ä¸ªå¾ˆç›´è§‚çš„æƒ³æ³•æ˜¯è®¤ä¸ºå«ä¹‰éšè—åœ¨æ–‡æœ¬çš„<strong>è¯­æ³•ç»“æ„</strong>ä¸­ï¼Œäºæ˜¯æ—©æœŸçš„NLPæ–¹æ³•å¤§éƒ½é‡‡ç”¨äº†è¯¸å¦‚è¯­æ³•çš„åˆ†æç»“æ„ã€‚</p>
<p>ä½†æ…¢æ…¢åœ°ï¼Œäººä»¬å‘ç°ï¼Œæ–‡æœ¬çš„å«ä¹‰è¿˜æœ‰å¦å¤–çš„è¡¨ç¤ºæ–¹æ³•ã€‚20ä¸–çºªæœ«-21ä¸–çºªåˆï¼ŒElmanå’ŒBengioç­‰äººè¯æ˜äº†<strong>å‘é‡è¡¨ç¤º</strong>å¯ä»¥æ•è·è¯­æ³•å’Œè¯­ä¹‰ä¿¡æ¯ï¼›21ä¸–çºªåˆï¼Œåˆ©ç”¨åŸºäºäº’ä¿¡æ¯çš„å±‚æ¬¡èšç±»è¡¨ç¤ºæ–¹æ³•å’Œéšé©¬å°”ç§‘å¤«é“¾ç”Ÿæˆè¯ç±»åˆ«çš„æ–¹æ³•è¯æ˜äº†ä¸€ä¸ªè¯çš„<strong>ä¸Šä¸‹æ–‡</strong>éšå«äº†è¿™ä¸ªè¯çš„å«ä¹‰ï¼›åŒæ ·æ˜¯21ä¸–çºªåˆï¼Œä»¥éšç‹„åˆ©å…‹é›·åˆ†å¸ƒæ¨¡å‹LDAä¸ºä»£è¡¨çš„ä¸»é¢˜ç”Ÿæˆæ¨¡å‹è¯æ˜äº†è·å–å«ä¹‰éœ€è¦<strong>å¤§é‡çš„</strong>ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚æ­£æ˜¯åŸºäºä»¥ä¸Šçš„è§‚å¯Ÿï¼Œæ‰æœ‰äº†è¿‘å¹´æ¥è¯¸å¦‚word2vecå’ŒGloVeçš„è¯å‘é‡è¡¨ç¤ºï¼Œä»¥åŠELMoã€GPTå’ŒBERTç­‰ç­‰çš„ä¸Šä¸‹æ–‡é¢„è®­ç»ƒè¡¨ç¤ºã€‚</p>
<p>ç„¶è€Œï¼Œå…³äºæ–‡æœ¬è¡¨ç¤ºï¼Œæœ‰ä¸€ä¸ªä¸€ç›´ä»¥æ¥çš„çŸ›ç›¾ï¼Œä¼´éšç€<strong>ç¬¦å·ä¸»ä¹‰</strong>å’Œ<strong>è¿æ¥ä¸»ä¹‰</strong>çš„äº‰è®ºèµ°åˆ°äº†ä»Šå¤©â€”â€”æŠŠè¯è¡¨ç¤ºä¸ºç¬¦å·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨ä¸€ä¸ªè¯çš„å­—å…¸é‡Šä¹‰ï¼Œä»è€Œç”¨å…¶ä»–è¯è¡¨ç¤ºå®ƒï¼Œè¿™ç§â€œä»¥è¯é‡Šè¯â€çš„æ–¹æ³•æœä»ç›´è§‰ï¼Œè§£é‡Šæ€§ä¸€æµï¼›ç„¶è€Œï¼ŒæŠŠè¯è¡¨ç¤ºä¸ºå‘é‡ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿåˆ©ç”¨è¯¸å¦‚ç¥ç»ç½‘ç»œçš„â€œè¿æ¥ä¸»ä¹‰â€ç³»ç»Ÿè¿›è¡Œå¤„ç†ï¼Œè¿™ç§â€œä»¥æ•°é‡Šè¯â€çš„æ–¹æ³•éš¾ä»¥è§£é‡Šï¼Œä½†æ¶ä¸ä½å®ƒå¥½ç”¨ã€‚</p>
<p>è¿™æ ·çš„ç¬¦å·ä¸»ä¹‰/è¿æ¥ä¸»ä¹‰äº‰è®ºç»å¸¸ä¼šåœ¨å½“ä»Šçš„å„å¤§äººå·¥æ™ºèƒ½è®ºå›è§åˆ°ï¼Œè€Œåœ¨è¿æ¥ä¸»ä¹‰å¤§è¡Œå…¶é“çš„å½“ä¸‹ï¼Œèƒ½åœ¨é¡¶ä¼šè®ºæ–‡è§åˆ°è¿™æ ·çš„äº‰è®ºå®åœ¨éš¾å¾—å•Š(=ãƒ»Ï‰ãƒ»=)</p>
<h2 id="WS2ï¼šæ–‡æœ¬çš„ä¸–ç•Œâ€”â€”å½“ç³»ç»Ÿå­¦ä¼šé˜…è¯»"><a href="#WS2ï¼šæ–‡æœ¬çš„ä¸–ç•Œâ€”â€”å½“ç³»ç»Ÿå­¦ä¼šé˜…è¯»" class="headerlink" title="WS2ï¼šæ–‡æœ¬çš„ä¸–ç•Œâ€”â€”å½“ç³»ç»Ÿå­¦ä¼šé˜…è¯»"></a>WS2ï¼šæ–‡æœ¬çš„ä¸–ç•Œâ€”â€”å½“ç³»ç»Ÿå­¦ä¼šé˜…è¯»</h2><p><img src="https://mmbiz.qpic.cn/mmbiz_png/IVz4ZzrQibgTFQmNH95NicHuicZqKFlMK2jRNV7jo1G5vbq3cQujPsicTRTdCk8XjrpRAG2ocpl76yvwV8jX2k0f3A/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>ä¸æ˜¯Nå®ä¸æ„¿æ„ä¸Šç½‘ï¼Œæ˜¯å¤šå¹´å‰å¥¹çš„å°è„‘ç“œå®åœ¨æ˜¯å¤„ç†ä¸äº†ç½‘ç»œä¸Šè¿™ä¹ˆå¤šçº·ç¹å¤æ‚çš„ä¿¡æ¯ã€‚ç„¶è€Œï¼Œå¤šäºäº†ä¸“åšNå®å¤§è„‘çš„é»„è€æ¿ï¼ˆé»„ä»å‹‹ï¼šï¼Ÿï¼‰å’Œé©æ–°äº†Nå®å¤§è„‘çš„Transformerç»“æ„ï¼ˆè°·æ­Œï¼šï¼Ÿï¼‰ï¼Œæœ‰äº†<strong>å¢å¼ºç®—åŠ›</strong>å’Œ<strong>æ¨¡å‹åŠ æŒ</strong>çš„Nå®ç»ˆäºå¼€çœ¼çœ‹åˆ°äº†æ›´å¹¿é˜”çš„çš„ä¸–ç•Œâ€”â€”éç»“æ„çš„ï¼Œå¤šè¯­è¨€çš„ï¼Œè·¨é¢†åŸŸçš„ï¼Œæ— æ ‡ç­¾çš„ï¼Œå•æ‹¿å‡ºå“ªä¸ªéƒ½å¾ˆè®©äººå…´å¥‹å§ï¼Œä½†<strong>BERTå…¨éƒ½è¦ï¼</strong></p>
<p>ä»¥BERTä¸ºä»£è¡¨çš„åŸºäºTransformerçš„é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹åœ¨ä¼—å¤šä¸‹æ¸¸ä»»åŠ¡ä¸Šçš„ä¼˜å¼‚è¡¨ç°ï¼Œåœ¨å¯¥å¯¥ä¸¤ä¸‰å¹´æ—¶é—´é‡ŒæŠŠNLPé¢†åŸŸçš„æ’è¡Œæ¦œå± äº†ä¸ªéã€‚åœ¨æˆ‘ä»¬ä¸ºæ–°è¯ç”Ÿçš„é¢„è®­ç»ƒæ¨¡å‹æ¬¢å‘¼é›€è·ƒæ—¶ï¼Œå†…å¿ƒä¹Ÿéš¾å…ä¼šä¸ºå®ƒä»¬è¶Šæ¥è¶Šåºå¤§çš„ä½“ç§¯å’Œâ€œé¥­é‡â€æ„Ÿåˆ°è§¦ç›®æƒŠå¿ƒã€‚</p>
<p>ä»è®­ç»ƒè¯­æ–™æ¥è¯´ï¼Œ2013å¹´çš„word2vecä½¿ç”¨äº†16äº¿ä¸ªtokenï¼Œä¸€å¹´åçš„GloVeä½¿ç”¨äº†8400äº¿ä¸ªtokenï¼Œè€ŒBERTç›´æ¥åƒä¸‹äº†æ•´ä¸ªç»´åŸºç™¾ç§‘+ä¸€ä¸‡å¤šæœ¬ä¹¦ã€‚ä»æ¨¡å‹å‚æ•°ä¸Šæ¥è¯´ï¼Œä»2018å¹´ELMoçš„åˆ°GPT-3çš„ä¹Ÿä¸è¿‡åªç”¨äº†ä¸¤å¹´æ—¶é—´ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œè¿™ç±»é¢„è®­ç»ƒæ¨¡å‹çš„æ•ˆæœå­˜åœ¨æ˜æ˜¾çš„<strong>è¾¹é™…æ•ˆç›Šé€’å‡</strong>ï¼šå¯¹äº16å¹´æå‡ºçš„è¯é¢„æµ‹ä»»åŠ¡LAMBADA[1]ï¼Œä»15äº¿å‚æ•°çš„GPT-2ï¼Œåˆ°170äº¿å‚æ•°çš„TuringNLGï¼Œæå‡ç”šå¾®ï¼›åˆ°äº†1750äº¿å‚æ•°çš„GPT-3ç»ˆäºæœ‰äº†8ä¸ªç‚¹çš„æå‡ï¼Œä½†èƒŒåçš„å¤šå‡ºæ¥çš„ç®—åŠ›å¼€é”€ï¼Œ<strong>å®ƒå€¼å—ï¼Ÿ</strong></p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œè¿™ç±»é¢„è®­ç»ƒæ¨¡å‹å¾ˆéš¾è§£å†³è®¸å¤šæ›´éš¾çš„NLPä»»åŠ¡ã€ä¾‹å¦‚<strong>è¾ƒéš¾çš„å…±æŒ‡è§£æ</strong>ï¼ˆâ€œæˆ‘æŠŠè½¦åœåœ¨äº†é‚£ä¸ªå°åœè½¦åœºï¼Œå› ä¸ºå®ƒè¶³å¤Ÿ[å°/å¤§]äº†ã€‚â€ï¼‰ã€‚ä¹‹æ‰€ä»¥ç§°ä¹‹ä¸ºâ€œè¾ƒéš¾çš„â€ï¼Œæ˜¯å› ä¸ºå®ƒä»¬æ˜¯ç»è¿‡ç²¾å¿ƒé€‰æ‹©çš„å¤„äºæ•°æ®åˆ†å¸ƒå°¾ç«¯çš„å…±æŒ‡å…³ç³»ã€‚å¦‚æœNå®æ²¡åœè¿‡è½¦ï¼Œå¥¹æ€ä¹ˆä¼šçŸ¥é“è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆä¸æ˜¯ä»å‰åŠå¥é‡Œç®€å•åœ°æå–å‡ºé‚£ä¸ªâ€œå°â€å­—å‘¢ï¼Ÿè§£å†³è¿™ä¸ªé—®é¢˜çš„å…³é”®ï¼Œåœ¨äº<strong>ç»éªŒ</strong>ã€‚è®ºæ–‡æ ‡é¢˜ä¸­çš„â€œExperienceâ€ï¼Œä¸ºæœªæ¥å¯èƒ½çš„å‘å±•æŒ‡æ˜äº†æ–¹å‘ã€‚</p>
<p>è¿™æ—¶ï¼Œæˆ‘ä»¬ç»ˆäºæ„è¯†åˆ°ï¼Œå†æ€ä¹ˆéç»“æ„å¤šè¯­è¨€è·¨é¢†åŸŸæ— æ ‡ç­¾çš„æ–‡æœ¬ï¼Œä¹Ÿç»ˆç©¶æ˜¯æ–‡æœ¬ï¼›å†å¾€é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ç ¸å˜›å°¼ï¼Œä¹Ÿä¸ä¸€å®šèƒ½æ¢æ¥çœŸæ­£æ™ºèƒ½çš„Nå®ã€‚Nå®ä¸ç¼ºæ–‡æœ¬äº†ï¼Œå¥¹åªæ˜¯éœ€è¦<strong>æ›´ç³»ç»Ÿåœ°</strong>æ„ŸçŸ¥è¿™ä¸ªä¸–ç•Œè€Œå·²ã€‚</p>
<h2 id="WS3ï¼šè§†è§‰ä¸å£°è§‰çš„ä¸–ç•Œâ€”â€”å½“ç³»ç»Ÿå­¦ä¼šæ„ŸçŸ¥"><a href="#WS3ï¼šè§†è§‰ä¸å£°è§‰çš„ä¸–ç•Œâ€”â€”å½“ç³»ç»Ÿå­¦ä¼šæ„ŸçŸ¥" class="headerlink" title="WS3ï¼šè§†è§‰ä¸å£°è§‰çš„ä¸–ç•Œâ€”â€”å½“ç³»ç»Ÿå­¦ä¼šæ„ŸçŸ¥"></a>WS3ï¼šè§†è§‰ä¸å£°è§‰çš„ä¸–ç•Œâ€”â€”å½“ç³»ç»Ÿå­¦ä¼šæ„ŸçŸ¥</h2><p><img src="https://mmbiz.qpic.cn/mmbiz_png/IVz4ZzrQibgTFQmNH95NicHuicZqKFlMK2j9iae4QNCuxVcvz1OE9sR91XYic7Tq8EuInic5ySRza63Lbm08nszEnsxA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>Nå®ä¸å†åªæ˜¯ä¸€å¤´æ‰è¿›ä¹¦æµ·é‡Œçš„ä¹¦å‘†å­äº†ï¼Œå¥¹ç»ˆäºæ‹¥æœ‰äº†èƒ½çœ‹åˆ°ä¸–ç•Œçš„<strong>çœ¼ç›</strong>ã€å¬åˆ°ä¸–ç•Œçš„<strong>è€³æœµ</strong>å’Œè§¦æ‘¸ä¸–ç•Œçš„<strong>åŒæ‰‹</strong>ï¼Œå°½ç®¡çœ¼ç›è€³æœµå’Œæ‰‹ä¹Ÿéƒ½æ˜¯æœºå™¨å­¦ä¹ æ¨¡å‹ã€‚ä½†æ˜¯ï¼Œå¦‚æœä¸çœ‹ä¸å¬ä¸ç¢°çš„è¯ï¼Œå¥¹æ€ä¹ˆèƒ½ç†è§£â€œåŠ¨å¦‚è„±å…”â€ã€â€œå™¤è‹¥å¯’è‰â€çš„çœŸæ„ï¼Œæ€ä¹ˆä½“ä¼šåˆ°æ‰“å·¥äººé’¢é“èˆ¬çš„æ„å¿—ï¼ˆä¸ï¼‰</p>
<p>è¿™å¤šå‡ºæ¥çš„æ„ŸçŸ¥ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿæ˜¯äººç±»åœ¨è¿›è¡Œå†³ç­–æ—¶çš„<strong>å¤šé‡ä¾æ®</strong>ï¼Œä¹Ÿæ˜¯äººä»¬åœ¨è®¤è¯†ä¸–ç•Œæ—¶è¾¾æˆçš„<strong>å…±è¯†</strong>ï¼ŒåŒæ—¶ä¹Ÿæ˜¯è¯­è¨€å­¦è¯æ˜çš„äººç±»åœ¨å­¦ä¹ è¯­è¨€æ—¶<strong>å¿…éœ€çš„å¤–éƒ¨è¾“å…¥</strong>ã€‚æµ·ä¼¦Â·å‡¯å‹’å­¦ä¹ è¯­è¨€çš„æ•…äº‹è„ç‚™äººå£ï¼Œç¼ºå¤±è§†è§‰çš„è¾…åŠ©å°šä¸”å¦‚æ­¤ï¼Œå‰¥å¤ºæ‰€æœ‰æ„Ÿå®˜åï¼Œå­¦åˆ°çš„è¯­è¨€è¿˜ä¼šæ˜¯ä¸€æ ·çš„å—ï¼Ÿ</p>
<p>æ–‡ç« å¼•ç”¨äº†ä¸€ç§è¡¨ç¤ºäººç±»çŸ¥è¯†çš„æ–¹æ³•ï¼š<strong>Frames and Scripts</strong>[2]ã€‚è¿™ç§æ–¹æ³•åœ¨ä¸Šä¸ªä¸–çºª80å¹´ä»£è¢«ç”¨æ¥è¡¨ç¤ºäººç±»çŸ¥è¯†ã€‚é€šä¿—æ¥è®²ï¼Œè¿™ä¸€æ–¹æ³•å°†äººç±»ä¸–ç•Œçš„é™æ€ç»„æˆå’ŒåŠ¨æ€åŠ¨ä½œæµç¨‹åˆ©ç”¨ç±»ä¼¼äºé¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ–¹å¼è¿›è¡Œå»ºæ¨¡ï¼šFramesåˆ©ç”¨ç±»å›¾æ„å»ºäº‹ç‰©ä¹‹é—´çš„å…³è”å…³ç³»ï¼Œè€ŒScriptsåˆ©ç”¨æµç¨‹å›¾æ„å»ºä¸€ç³»åˆ—åŠ¨ä½œçš„å‘ç”Ÿè¿‡ç¨‹ã€‚ä½†å³ä½¿æˆåŠŸè¡¨ç¤ºäº†ç±»åˆ«ä¹‹é—´çš„å…³è”å…³ç³»ï¼Œç±»åˆ«ä¸­çš„å„ä¸ªå±æ€§ã€æµç¨‹å›¾ä¸­çš„å„ä¸ªè¡Œä¸ºå’Œæ¡ä»¶ä¾ç„¶æ²¡æœ‰å’Œç°å®äº§ç”Ÿå¯¹åº”ã€‚å¤§æ¡†æ¶æœ‰äº†ï¼Œç»†èŠ‚å´é¢ä¸´äº†åŒæ ·çš„é—®é¢˜ï¼Œå› æ­¤ï¼Œè¿™ç§å»ºæ¨¡ä¾ç„¶å¾ˆç‰‡é¢ã€‚è¿™æ°æ°è¯´æ˜äº†å¤šæ¨¡æ€å¯¹äºç†è§£çŸ¥è¯†çš„é‡è¦æ€§ã€‚</p>
<p>æ—¢ç„¶æ˜¯å¤šæ¨¡æ€ï¼Œé‚£è‡ªç„¶è¦æåŠå…¶ä¸­æ¶‰åŠçš„æ¯ä¸ªé¢†åŸŸå‘å¤šæ¨¡æ€å‘å±•çš„åŠªåŠ›ã€‚è¿™å…¶ä¸­ï¼Œè®¡ç®—æœºè§†è§‰ï¼ˆCVï¼‰å’Œè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰çš„ç»“åˆè‡ªç„¶æ˜¯å‘å±•æœ€å¤šçš„ä¸€ä¸ªã€‚</p>
<p>è®¡ç®—æœºè§†è§‰é¢†åŸŸå·²ç»æå‰æ„è¯†åˆ°äº†ä¸è‡ªç„¶è¯­è¨€å¤„ç†äº¤äº’çš„é‡è¦æ€§ï¼Œå¹¶æå‡ºäº†ä¸€ç³»åˆ—å¯ä»¥å¤ç”¨çš„æ¨¡å‹ï¼Œè€Œè®¡ç®—æœºè§†è§‰é¢†åŸŸä¹Ÿåœ¨è¿‘å‡ å¹´æ¥å¼€å§‹è§£å†³<strong>è§†è§‰é—®ç­”VQA</strong>ã€<strong>è§†è§‰æ¨ç†</strong>å’Œ<strong>è§†é¢‘ç¿»è¯‘</strong>ç­‰ç­‰CV+NLPçš„äº¤äº’ä»»åŠ¡ã€‚è¿™äº›å¤šæ¨¡æ€ä»»åŠ¡çš„æ ‡å‡†æ•°æ®é›†å¯ä»¥æ”¯æŒå¤§è§„æ¨¡<strong>è§†è§‰+æ–‡æœ¬</strong>ã€ç”šè‡³<strong>è§†è§‰+æ–‡æœ¬+è¯­éŸ³Transformer</strong>æ¨¡å‹çš„è®­ç»ƒã€‚</p>
<p>NLPé¢†åŸŸçš„å‘å±•åŒæ ·æ”¯æ’‘äº†å¤šæ¨¡æ€çš„åº”ç”¨ï¼Œç”±äºCVé¢†åŸŸå¹¿æ³›é‡‡ç”¨çš„ImageNet[3]åˆ†ç±»é‡‡ç”¨äº†WordNet[4]æè¿°ä¸Šä¸‹ä½è¯å…³ç³»çš„å±‚æ¬¡åˆ†ç±»ï¼Œåœ¨åŠ å…¥äº†WordNetä¸­æ¯ä¸ªæ¦‚å¿µçš„å›¾åƒä¿¡æ¯åï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥åœ¨æ¦‚å¿µçš„<strong>å‘é‡è¡¨ç¤º</strong>ä¸­å­¦ä¹ åˆ°ä»…åˆ©ç”¨æ–‡æœ¬<strong>æ— æ³•è·å¾—çš„ç‰¹å¾</strong>ã€‚æ¯”å¦‚ï¼ŒWordNetä¸­â€œäººâ€æ˜¯ä¸€ç³»åˆ—ä¸åŒèŒä¸šçš„ä¸Šä½è¯ï¼Œå…¶ä¸­åŒ…æ‹¬â€œæ¶ˆé˜²å‘˜â€ï¼Œâ€œåŒ»ç”Ÿâ€ç­‰ç­‰ï¼›å•çº¯å‡­å€Ÿæ–‡æœ¬éš¾ä»¥æ•æ‰è¿™äº›ç±»åˆ«çš„åŒºåˆ«ï¼›ä½†åœ¨åŠ å…¥äº†â€œäººâ€ã€â€œæ¶ˆé˜²å‘˜â€ã€â€œåŒ»ç”Ÿâ€çš„å›¾ç‰‡è¿›è¡Œå¤šæ¨¡æ€å­¦ä¹ åï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨åƒç´ çº§çš„æ©ç ç²¾ç¡®åœ°è·å¾—ä¸åŒç±»åˆ«çš„å…·ä½“å·®å¼‚ï¼Œç”šè‡³å¯ä»¥å°†è‡ªç„¶è¯­è¨€æè¿°æ‹“å±•åˆ°ä»æœªè§è¿‡çš„ç±»åˆ«ä¸­ï¼Œå­¦ä¹ åˆ°æ–°ç±»åˆ«çš„ç‰¹å¾â€¦</p>
<p>è¿™æ­£æ˜¯<strong>é›¶æ¬¡å­¦ä¹ </strong>ï¼ˆZero-shot learningï¼‰çš„æƒ³æ³•ï¼Œåˆ©ç”¨ä¸€æ®µå¯¹æœªçŸ¥ç±»åˆ«çš„æè¿°ï¼Œè®©æ¨¡å‹ç†è§£åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æ²¡æœ‰è§è¿‡çš„ç±»åˆ«çš„ç‰¹å¾ã€‚å¯¹äºæ–‡æœ¬çš„å•ä¸€æ¨¡æ€å­¦ä¹ ï¼Œç”¨æ–‡æœ¬æè¿°æ–‡æœ¬æ˜¯WS1çš„æƒ³æ³•ï¼›è€Œå¤šæ¨¡æ€å­¦ä¹ é€šè¿‡æ·»åŠ <strong>é¢å¤–çš„æ„ŸçŸ¥æ–¹æ³•</strong>ï¼Œè®©é›¶æ¬¡å­¦ä¹ çš„æ•ˆæœå¾—åˆ°äº†å¤§å¹…æå‡ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¤šæ¨¡æ€ä¹‹åï¼ŒNå®åˆè¦åšäº›ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<h2 id="WS4ï¼šè¡Œä¸ºçš„ä¸–ç•Œâ€”â€”å½“ç³»ç»Ÿå­¦ä¼šè¯•é”™"><a href="#WS4ï¼šè¡Œä¸ºçš„ä¸–ç•Œâ€”â€”å½“ç³»ç»Ÿå­¦ä¼šè¯•é”™" class="headerlink" title="WS4ï¼šè¡Œä¸ºçš„ä¸–ç•Œâ€”â€”å½“ç³»ç»Ÿå­¦ä¼šè¯•é”™"></a>WS4ï¼šè¡Œä¸ºçš„ä¸–ç•Œâ€”â€”å½“ç³»ç»Ÿå­¦ä¼šè¯•é”™</h2><p><img src="https://mmbiz.qpic.cn/mmbiz_png/IVz4ZzrQibgTFQmNH95NicHuicZqKFlMK2jpMxFrhRRtrVuYibr5ibQj0ZFm0gcGvtZGDwmdkvRWlYIKibhiaPg7wLFGQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>Nå®å¯¹ä¸–ç•Œè§‚å¯Ÿäº†è®¸ä¹…ï¼Œå¥¹èƒ½è¯»èƒ½çœ‹èƒ½å¬ï¼Œæˆ‘ä»¬æ„Ÿè§‰å¥¹å¥½åƒç†è§£äº†è¿™ä¸ªä¸–ç•Œã€‚ä½†å®é™…ä¸Šï¼Œå¥¹å¯¹è¿™ä¸ªä¸–ç•Œä¼¼æ‡‚éæ‡‚ã€‚</p>
<p>åœ¨å¥¹çœ¼ä¸­ï¼Œè¯è¯­ä¸è¿‡æ˜¯ä¸€ä¸²æ•°å­—æˆ–æ˜¯åƒç´ ç»„æˆçš„ç‰¹å¾è€Œå·²ï¼Œæ¯ä¸ªåè¯æ¦‚å¿µåˆ°åº•éšå«ç€ä»€ä¹ˆ<strong>å†…åœ¨å±æ€§</strong>ï¼Œæ¯ä¸ªåŠ¨ä½œåˆ°åº•ä¼šå¸¦æ¥ä»€ä¹ˆ<strong>å½±å“</strong>ï¼Œæ¯ä¸ªå½¢å®¹è¯åˆ°åº•æè¿°äº†äº›ä»€ä¹ˆ<strong>ç‰¹ç‚¹</strong>ï¼ŒNå®éƒ½ä¸æ‡‚ã€‚è¢«åŠ¨çš„å­¦ä¹ å·²ç»æ»¡è¶³ä¸äº†å¥¹äº†ï¼Œå¥¹æƒ³ç”¨å¥¹çš„æ„ŸçŸ¥å»<strong>ä¸»åŠ¨åœ°</strong>ç†è§£è¯­è¨€èƒŒåçš„å«ä¹‰ã€‚å½“Nå®æœ‰äº†è¡ŒåŠ¨çš„èƒ½åŠ›ï¼Œå¥¹å°±æœ‰äº†å…·èº«ï¼Œæœ‰äº†å’Œå¤–ç•Œ<strong>äº’åŠ¨</strong>çš„æ¡ä»¶ã€‚</p>
<p>è¯•æƒ³ä¸€ä¸‹ï¼Œå¯¹äºâ€œæ©˜å­æ›´åƒæ˜¯æ£’çƒè¿˜æ˜¯é¦™è•‰ï¼Ÿâ€è¿™æ ·çš„é—®é¢˜ï¼Œä½ ä¼šä½œä½•å›ç­”ï¼Ÿ</p>
<p>WS1ç³»ç»Ÿä¼šè®¤ä¸ºæ©˜å­å’Œé¦™è•‰ç»å¸¸å‡ºç°åœ¨<strong>ç±»ä¼¼çš„ä¸Šä¸‹æ–‡</strong>é‡Œï¼Œæ‰€ä»¥æ©˜å­å’Œé¦™è•‰æ›´åƒï¼›WS2ç³»ç»Ÿä¼šè®¤ä¸ºæ©˜å­å’Œæ£’çƒ<strong>éƒ½æ˜¯åœ†å½¢çš„</strong>ï¼Œä½†è¯´ä¸ä¸Šæ¥æ£’çƒå’Œæ©˜å­çš„è´¨åœ°å’Œå¤§å°ï¼›WS3ç³»ç»Ÿä¼šäº†è§£åˆ°æ©˜å­ã€æ£’çƒå’Œé¦™è•‰çš„<strong>å¤–è¡¨</strong>ï¼Œæ‰€ä»¥åŒæ ·ä¼šè®¤ä¸ºæ©˜å­å’Œæ£’çƒæ›´åƒï¼Œå´è¯´ä¸æ¸…æ¥šæ£’çƒã€æ©˜å­å’Œé¦™è•‰çš„è½¯ç¡¬ç¨‹åº¦çš„é‡é‡ã€‚åªæœ‰å½“ç³»ç»Ÿèƒ½å¤Ÿæ¥è§¦åˆ°è¿™äº›ç‰©ä½“å¹¶äº§ç”Ÿ<strong>äº’åŠ¨</strong>æ—¶ï¼Œå®ƒæ‰ä¼šæ›´åŠ ç³»ç»Ÿåœ°å›ç­”ï¼Œæ©˜å­å’Œæ£’çƒå…·æœ‰ç›¸ä¼¼çš„æè´¨å’Œé‡é‡ï¼Œä½†æ©˜å­å’Œé¦™è•‰å…·æœ‰ç›¸åŒçš„è½¯ç¡¬ç¨‹åº¦å’Œç”¨é€”ã€‚</p>
<p>å®é™…ä¸Šï¼Œäººç±»åœ¨å­¦ä¹ çŸ¥è¯†æ—¶åœ¨ä¸æ–­åœ°ä¸å¤–ç•Œäº§ç”Ÿäº’åŠ¨å¹¶è·å¾—åé¦ˆï¼Œè€Œè¿™äº›<strong>æŒç»­çš„åé¦ˆ</strong>æ„æˆäº†æˆ‘ä»¬å­¦ä¹ è¿™ä¸ªä¸–ç•Œæ—¶çš„ç›‘ç£ä¿¡å·ã€‚è¿™äº›ä¿¡å·ç”šè‡³äº§ç”Ÿäºæˆ‘ä»¬å­¦ä¹ è¯­è¨€ä¹‹å‰ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œè¿™äº›å©´å„¿æ—¶æœŸäº§ç”Ÿçš„åé¦ˆç©¶ç«Ÿå½¢æˆäº†ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>å¯¹äºäººæ¥è¯´ï¼Œè¿™äº›åé¦ˆå½¢æˆäº†æˆ‘ä»¬çš„<strong>ç›´è§‰å’Œå¸¸è¯†</strong>ï¼Œè€Œè¿™äº›å†…å®¹æ­£æ˜¯æˆ‘ä»¬åœ¨æ—¥å¸¸äº¤æµæ—¶ä¸ä¼šä½¿ç”¨è¯­è¨€ç›´æ¥è¡¨è¿°çš„<strong>éšå«å†…å®¹</strong>ã€‚å¯¹äºæœºå™¨æ¥è¯´ï¼Œè¿™äº›è¯•é”™è¿‡ç¨‹ä¸­å¾—åˆ°çš„åé¦ˆå½¢æˆçš„å¯èƒ½æ˜¯â€œ<strong>å…ˆäºè¯­è¨€</strong>â€<strong>çš„è¡¨ç¤º</strong>ï¼ˆpre-linguistic representationsï¼‰ï¼Œå®ƒä»¬å¯ä»¥è¢«ç”¨æ¥ä½œä¸ºNLPç³»ç»Ÿæ³›åŒ–çš„åŸºç¡€ã€‚åœ¨è¯­è¨€å­¦ä¸Šå·²ç»è¯æ˜ï¼Œå­©å­ä»ä¹¦æœ¬ä¸Šå­¦çš„ä¸œè¥¿å¾ˆéš¾è¢«å¥¹ä»¬ç›´æ¥æ¬åˆ°ç°å®ç”Ÿæ´»ä¸­åŠ ä»¥åˆ©ç”¨ã€‚æˆ‘ä»¬åˆ©ç”¨å¤§é‡çš„å‚æ•°ï¼Œå¸Œæœ›ç”¨ç»Ÿè®¡å­¦çš„æ–¹æ³•å¦è¾Ÿè¹Šå¾„åœ°å®ç°ç”Ÿç‰©è¿›åŒ–çš„æˆæœï¼Œä½†ç¼ºå°‘äº†ä¸çœŸå®ä¸–ç•Œçš„äº¤äº’ï¼Œæˆ–è®¸æˆ‘ä»¬ç¦»è¿™ä¸ªç›®æ ‡ç¡®å®é¥è¿œã€‚</p>
<p>åœ¨WS4çš„ä¸–ç•Œï¼Œæˆ‘ä»¬å°±éœ€è¦å€ŸåŠ©<strong>æœºå™¨äººå­¦</strong>é¢†åŸŸçš„ç ”ç©¶æˆæœäº†ã€‚å°½ç®¡ä»ç°åœ¨çœ‹ï¼Œåˆ©ç”¨æœºå™¨äººå­¦çš„æˆæœè¿œæ¯”åˆ©ç”¨CVçš„æˆæœå›°éš¾ï¼Œä½†ä¸ºäº†å®ç°çœŸæ­£ç†è§£è¯­è¨€çš„ç›®æ ‡ï¼ŒNLPçš„ç ”ç©¶è€…åº”è¯¥åŒæ ·å…³æ³¨æœºå™¨äººå­¦çš„å‘å±•ã€‚éšç€åŠ¨ä½œç©ºé—´çš„åŠ å¤§ï¼ŒNLPç³»ç»Ÿå°±èƒ½å¤Ÿå­¦ä¼šæ›´å¤šçš„æŒ‡ä»¤ï¼Œè®©æ™ºèƒ½å®¶å±…å’Œæ™ºèƒ½æœºå™¨äººä¸å†æ˜¯ç°åœ¨è¿™æ ·ä»…é æŒ‡ä»¤é›†æ“ä½œçš„æœºå™¨ï¼Œè€Œæ˜¯æˆä¸ºçœŸæ­£èƒ½åº”ç”¨åœ¨ä»»ä½•åœºæ™¯ä¸‹çœŸæ­£çš„æ™ºèƒ½ç³»ç»Ÿã€‚</p>
<h2 id="WS5ï¼šç¤¾ä¼šçš„ä¸–ç•Œâ€”â€”å½“ç³»ç»Ÿå­¦ä¼šèƒ½åŠ¨"><a href="#WS5ï¼šç¤¾ä¼šçš„ä¸–ç•Œâ€”â€”å½“ç³»ç»Ÿå­¦ä¼šèƒ½åŠ¨" class="headerlink" title="WS5ï¼šç¤¾ä¼šçš„ä¸–ç•Œâ€”â€”å½“ç³»ç»Ÿå­¦ä¼šèƒ½åŠ¨"></a>WS5ï¼šç¤¾ä¼šçš„ä¸–ç•Œâ€”â€”å½“ç³»ç»Ÿå­¦ä¼šèƒ½åŠ¨</h2><p><img src="https://mmbiz.qpic.cn/mmbiz_png/IVz4ZzrQibgTFQmNH95NicHuicZqKFlMK2jlBfNm38POUY9VpWXialILeV1XxZtvWz92Yhb2qC88O0EfUpafOkC4iaA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>èƒ½åŠ¨å’Œèƒ½åŠ¨å¹¶ä¸æ˜¯ä¸€ä¸ªæ„æ€â€”â€”WS4çš„èƒ½åŠ¨æ˜¯â€œä¼šåŠ¨â€ï¼Œè€ŒWS5çš„èƒ½åŠ¨æ˜¯â€œ<strong>ä¸»è§‚èƒ½åŠ¨æ€§</strong>â€çš„èƒ½åŠ¨ã€‚Nå®çš„æˆé•¿ç›®æ ‡æ˜¯è¦é€ ç¦ç¤¾ä¼šçš„ï¼Œè€Œäººç±»ç¤¾ä¼šçš„å¯æ˜¯å¾ˆå¤æ‚çš„ã€‚å¥¹è¦åœ¨ä¸äººæ‰“äº¤é“çš„è¿‡ç¨‹ä¸­ä½“ç°å‡ºå¥¹è¡Œä¸ºçš„<strong>ç›®çš„æ€§</strong>ï¼Œè®©å¥¹çœŸæ­£èƒ½å¤Ÿå®ç°äººå·¥æ™ºèƒ½ç³»ç»Ÿçš„ä½¿å‘½ã€‚åˆ°è¿™ä¸ªé˜¶æ®µï¼ŒNå®å°±å·²ç»æˆä¸ºä¸€ä¸ª<strong>æŒä¹…å­˜åœ¨çš„ï¼Œå…·æœ‰ç‰¹å®šç¤¾ä¼šå±æ€§å’Œç»éªŒçš„æ™ºèƒ½ä»£ç†</strong>äº†ã€‚</p>
<p>NLPç³»ç»Ÿä¸€ç›´ä»¥æ¥éƒ½æ˜¯äººå·¥æ™ºèƒ½é¢†åŸŸé‡Œæœ€å—å…³æ³¨çš„é¢†åŸŸä¹‹ä¸€ï¼Œæ¯•ç«Ÿå›¾çµæµ‹è¯•å°±æ˜¯ä»¥å¯¹è¯ç³»ç»Ÿä¸ºåŸºç¡€çš„æµ‹è¯•ã€‚ä½†æ˜¯ï¼Œåœ¨è¿›è¡Œå›¾çµæµ‹è¯•æ—¶ï¼Œäººç»å¸¸ä¼šå—åˆ°<strong>æ¡†æ¶æ•ˆåº”</strong>ï¼ˆFrame effectï¼‰çš„å½±å“ï¼šå½“èŠå¤©æœºå™¨äººè¡¨æ˜è‡ªå·±ä»¥è‹±è¯­ä½œä¸ºç¬¬äºŒè¯­è¨€æˆ–æ˜¯è¡¨ç°å‡ºå¼±åŠ¿æ—¶ï¼Œäººè‡ªç„¶ä¼šå¤§å¹…é™ä½å¯¹å¯¹æ–¹çš„æœŸæœ›ï¼Œè®©åŸæœ¬çœŸå®æ€§ä¸é«˜çš„å›åº”ä¹Ÿçœ‹èµ·æ¥åƒæ˜¯çœŸäººä¸€æ ·ã€‚</p>
<p>é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆè¯´WS5å¯¹äºè¯­è¨€å­¦ä¹ è‡³å…³é‡è¦å‘¢ï¼Ÿ</p>
<p>é¦–å…ˆï¼Œä»è¯´è¯è€…çš„è§’åº¦ï¼Œè¯­è¨€è¦<strong>äº§ç”Ÿä½œç”¨</strong>ã€‚</p>
<p>ä»å“²å­¦ä¸Šè®²ï¼Œè¯­è¨€çš„åŠŸèƒ½ï¼ˆFunctionï¼‰æ˜¯å«ä¹‰çš„æ¥æºï¼›ä»è¯­è¨€å­¦ä¸Šè®²ï¼ŒåŸºäºä½¿ç”¨çš„è¯­è¨€å­¦ä¹ ç†è®ºè¡¨æ˜ï¼Œ<strong>æœ‰ç”¨çš„è¯­è¨€æ„å»º</strong>æ˜¯ä¸€åˆ‡çš„åŸºç¡€ã€‚è¿™äº›ç†è®ºåœ¨è¿‘å¹´æ¥å¼€å§‹å…³æ³¨è¯­è¨€åœ¨äººç±»çš„èµ·æºå’Œå‘å±•è¿‡ç¨‹ä¸­èµ·åˆ°çš„ä½œç”¨ï¼Œè¡¨æ˜äº†è¯­è¨€å¯¹äºç¤¾ä¼šç”Ÿæ´»çš„é‡è¦æ€§ã€‚</p>
<p>WS1-4é€æ­¥åœ°æ‰©å±•äº†è¯­è¨€å«ä¹‰çš„ç»„æˆï¼Œé€æ¸åœ°ï¼Œè¯­è¨€å¯ä»¥ç”±ç»“æœè½¬å˜ä¸ºèµ·å› ï¼Œä»å•çº¯çš„æ•°æ®è½¬å˜ä¸ºæœ‰ç”¨çš„ä¿¡æ¯ã€‚å½“ä¸‹ï¼ŒNLPç³»ç»Ÿç”Ÿæˆçš„è¯­å¥åªèƒ½ä»¥ä¸€ç§ä¸ç¤¾ä¼šéš”ç¦»å¼€çš„æ–¹å¼è¢«è¢«åŠ¨çš„è¯„ä»·ï¼Œè€Œè¦åšåˆ°è¡¡é‡NLPç³»ç»Ÿå¯¹ç¤¾ä¼šçš„å½±å“ï¼Œå¿…é¡»<strong>ä¸»åŠ¨åœ°</strong>è®©NLPç³»ç»Ÿå‚ä¸åˆ°è¯¸å¦‚<strong>è°ˆåˆ¤ï¼Œåˆä½œï¼Œæƒ…æ„Ÿæ”¯æŒ</strong>ç­‰ç­‰è¯­è¨€æ´»åŠ¨ä¸­æ¥ï¼Œè®©NLPç³»ç»Ÿèƒ½å¤Ÿæ¨æ–­äººçš„æƒ…æ„ŸçŠ¶æ€å’Œè¡Œä¸ºçš„ç¤¾ä¼šæ•ˆç›Šã€‚</p>
<p>å½“ä¸‹çš„è¯­è¨€æ¨¡å‹åˆ©ç”¨ä¸Šä¸‹æ–‡æ„å»ºæ¯ä¸ªè¯çš„é‡Šä¹‰ã€‚ä½†å®é™…ä¸Šï¼Œä¸€ä¸ªè¯çš„å«ä¹‰éœ€è¦è¢«æ”¾åœ¨<strong>ç‰¹å®šçš„è¯­è¨€å’Œç¤¾ä¼šç¯å¢ƒä¸‹</strong>è¿›è¡Œç»¼åˆè€ƒé‡ã€‚æ­£æ¯”å¦‚ï¼Œâ€œå¤§å¤±æ‰€æœ›â€çš„è¯å…¸æ„æ€æ˜¯ä¸ä»¤äººæ»¡æ„ï¼Œå¯æ˜¯ï¼Œåªæœ‰åœ¨å­©å­å­¦ä¹ è¯­è¨€æ—¶è¯´å‡ºè¿‡æˆ–æ˜¯å¬è§è¿‡é‚£å¥â€œä½ è®©æˆ‘å¤§å¤±æ‰€æœ›â€æ—¶ï¼Œå¥¹æ‰èƒ½çœŸæ­£æ‡‚å¾—è¿™ä¸ªè¯å¯¹äººæ¥è¯´å¤šä¹ˆæœ‰åˆ†é‡ã€‚ä¸€ä¸ªè¯çš„å«ä¹‰è¿œä¸æ­¢è¯æœ¬èº«çš„æ„æ€ï¼šå®ƒæœ€ä¸°å¯Œçš„è¡¨è¾¾è•´å«åœ¨äº†å®ƒ<strong>å¯¹å¤–ç•Œäº§ç”Ÿçš„å½±å“</strong>ä¹‹ä¸­ã€‚</p>
<p>å…¶æ¬¡ï¼Œä»è†å¬è€…çš„è§’åº¦è€Œè¨€ï¼Œè¯­è¨€è¦æˆä¸º<strong>äº†è§£å¯¹æ–¹æƒ³æ³•çš„å·¥å…·</strong>ã€‚</p>
<p>â€œæƒ³æ³•â€å¹¶ä¸å±€é™äºä¸€å¥è¯æœ¬èº«çš„æ„æ€ï¼Œè€Œæ›´å¤šåœ°æŒ‡å¯¹æ–¹çš„éœ€æ±‚ï¼Œæ„å›¾ï¼Œæ„Ÿæƒ…ï¼ŒçŸ¥è¯†å’Œèº«ä»½ã€‚å¯¹â€œæƒ³æ³•â€çš„ç ”ç©¶è¢«ç§°ä¸ºâ€œ<strong>å¿ƒæ™ºç†è®º</strong>â€ï¼ˆTheory of Mindï¼‰ã€‚è¿™ä¸€ç†è®ºè¢«å»ºæ¨¡ä¸º<strong>è®²è€…-å¬è€…æ¨¡å‹</strong>ï¼ˆSpeaker-listener modelï¼‰ï¼Œä»è®¡ç®—è§’åº¦è€Œè¨€ï¼Œåˆè¢«è¿›ä¸€æ­¥å‘å±•ä¸ºâ€œ<strong>ç†æ€§è¨€è¯­è¡Œä¸ºæ¨¡å‹</strong>â€[5]ï¼ˆRational speech act model, RSAï¼Œä¸€ç§åŸºäºè´å¶æ–¯æ¨æ–­çš„æœ‰æ•ˆæ²Ÿé€šå»ºæ¨¡ï¼‰ã€‚</p>
<p>å¯¹äº¤æµçš„ç†è§£åªç”¨é™æ€çš„æ•°æ®é›†æ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚å¯¹äºåŒä¸€ä¸ªæ ·æœ¬çš„æ ‡æ³¨ï¼Œä¸åŒçš„æ ‡æ³¨è€…å¯èƒ½æä¾›ä¸åŒçš„æ ‡æ³¨æ–¹æ³•ï¼Œè¿™å°±ä¼šå¼•å…¥ä¼ªå…³ç³»å’Œåå·®ã€‚<strong>åŠ¨æ€ä¸”çµæ´»çš„è¯„ä»·</strong>å¯èƒ½ä¼šè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†å¦‚ä½•ä¿æŒä¸€ä¸ªNLPç³»ç»Ÿçš„èº«ä»½ï¼Œå¦‚ä½•é¢å¯¹å¤–ç•Œå¯èƒ½å¸¦æ¥çš„å˜åŒ–ä¾æ—§éœ€è¦è¿›ä¸€æ­¥ç ”ç©¶ã€‚</p>
<p>é‚£ä¹ˆï¼Œæ€æ ·è®©NLPç³»ç»Ÿæ‹¥æœ‰èƒ½å¤Ÿ<strong>åœ¨ç¤¾ä¼šç¯å¢ƒä¸‹</strong>ç†è§£è¯­è¨€çš„èƒ½åŠ›å‘¢ï¼Ÿ</p>
<p>é¦–å…ˆï¼Œå¦‚æœå•çº¯åˆ©ç”¨ä¸€ä¸ªè¯¸å¦‚ç¥ç»ç½‘ç»œçš„é€šç”¨çš„å‡½æ•°æ‹Ÿåˆå™¨æ¥ç»™æ–‡æœ¬åšåˆ†ç±»ï¼Œå®ƒå¯èƒ½å•çº¯åˆ©ç”¨äº†æ–‡æœ¬ä¸­çš„è¯­æ³•è¯­ä¹‰ä¿¡æ¯ï¼Œå´æ°¸è¿œä¸ä¼šè®¤ä¸ºæ–‡æœ¬ä¸­å‡ºç°çš„äººã€äº‹ç‰©å’Œå› æœå…³ç³»æ˜¯<strong>çœŸå®å­˜åœ¨</strong>çš„ã€‚è¿™éœ€è¦æˆ‘ä»¬å‘æ¨¡å‹ä¸­å¼•å…¥è¶³å¤Ÿçš„<strong>å½’çº³åç½®</strong>ï¼ˆInductive biasï¼‰æ¥è§£å†³è¿™ä¸€é—®é¢˜ã€‚å…¶æ¬¡ï¼ŒåŸºäºäº¤å‰ç†µçš„æŸå¤±å‡½æ•°ä½¿å¾—NLPç³»ç»Ÿä¸å¤Ÿå…³æ³¨æ•°æ®åˆ†å¸ƒçš„å°¾ç«¯ï¼Œå¯¼è‡´<strong>å‡ºç°è¾ƒå°‘çš„äº‹ä»¶è¢«å¿½è§†äº†</strong>ã€‚æœ€åï¼Œç”±äºç°æœ‰çš„ç³»ç»Ÿä¾ç„¶æ— æ³•è¾¾æˆåƒäººç±»ä¸€æ ·çš„<strong>å½’çº³èƒ½åŠ›</strong>ï¼ŒNLPç³»ç»Ÿçš„é›¶æ¬¡å­¦ä¹ èƒ½åŠ›ä¾ç„¶æœ‰å¾…æé«˜ã€‚å› æ­¤ï¼ŒWS1-4çš„æ•°æ®æ— è®ºå†å¤§ï¼Œä»¥ç›®å‰çš„ç³»ç»Ÿè®¾è®¡ä¹Ÿéš¾ä»¥è®©NLPç³»ç»Ÿå­¦åˆ°è¶³å¤Ÿä¸°å¯Œçš„çŸ¥è¯†æ¥é™ä½æ¨¡å‹çš„å›°æƒ‘åº¦ã€‚</p>
<p>æœ€åï¼Œä»ç¤¾ä¼šç¯å¢ƒçš„è§’åº¦è€Œè¨€ï¼Œè¯­è¨€æ˜¯ç”¨åœ¨<strong>äººé™…äº¤æµ</strong>ä¸­çš„ï¼Œæ‰€ä»¥è¯­è¨€æœ¬èº«å°±æºå¸¦ç€<strong>åœ°ä½ã€èº«ä»½ã€æ„å›¾</strong>å’Œå…¶ä»–ä¸€ç³»åˆ—çš„å˜é‡ï¼Œä½†æˆ‘ä»¬å½“ä¸‹æ‰€ä½¿ç”¨çš„åŸºäºä¼—åŒ…çš„æ•°æ®æ ‡ç­¾å¹¶æ²¡æœ‰è€ƒè™‘è¿™ä¸€ç³»åˆ—å¯¹ç¤¾ä¼šç”Ÿæ´»è‡³å…³é‡è¦çš„ä¿¡æ¯ã€‚æ‰€ä»¥ï¼Œå¯¹äºç”Ÿæˆæ¨¡å‹è€Œè¨€ï¼Œä¸ºäº†è€ƒé‡æ¨¡å‹ä¸ç¤¾ä¼šä¹‹é—´çš„äº¤äº’æ€§ï¼Œéœ€è¦ç»™äºˆæ¨¡å‹ä¸€ä¸ª<strong>ç¤¾ä¼šåœ°ä½åŠèº«ä»½</strong>ï¼Œå°†å…¶ç½®èº«äºç‰¹å®šåœºæ™¯ä¸­æ¥è¿›è¡Œè¯„ä»·ã€‚</p>
<p>ä½†æ˜¯ï¼Œç¤¾ä¼šäº¤æµä¸­å­˜åœ¨é‚£ä¹ˆå¤šå˜é‡ï¼Œè¯¥æ€ä¹ˆè¿›è¡Œæ ‡æ³¨å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦è·³å‡ºè¿™ä¸ªåœˆå­ï¼šè®­ç»ƒ-éªŒè¯-æµ‹è¯•é›†çš„åˆ’åˆ†ä»¥åŠåŸºäºå¯¹æ¯”çš„è¯„ä»·æ–¹å¼é™åˆ¶äº†æˆ‘ä»¬çš„æƒ³è±¡åŠ›ã€‚æˆ‘ä»¬çš„ç»ˆæç›®æ ‡ï¼Œæ˜¯è®©NLPç³»ç»Ÿé€šè¿‡<strong>å‚ä¸åˆ°ç¤¾ä¼šå½“ä¸­</strong>è¿›è¡Œå­¦ä¹ ï¼Œè®©ç”¨æˆ·ä¸ç³»ç»Ÿè‡ªç”±äº¤æµï¼Œä½¿å¾—ç³»ç»Ÿåœ¨<strong>æ¢ç´¢ä¸è¯•é”™</strong>ä¸­é€æ¸è¾¾æˆå¯¹å…¶èº«ä»½çš„<strong>ç¤¾ä¼šè¯­è¨€å­¦æ„å»º</strong>ã€‚å½“æ¨¡å‹èƒ½å¤Ÿåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­èƒ½å¤Ÿä¸äººè¿›è¡Œäº¤äº’ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥çª¥è§†åˆ°æ¨¡å‹çš„å†³ç­–è¾¹ç•Œï¼ŒåŠ æ·±å¯¹æ¨¡å‹çš„äº†è§£äº†ã€‚</p>
<h2 id="é‚£ä¹ˆï¼Œè¦æ€ä¹ˆè¿›å…¥ä¸‹ä¸€ä¸ªWSä¸­å‘¢ï¼Ÿ"><a href="#é‚£ä¹ˆï¼Œè¦æ€ä¹ˆè¿›å…¥ä¸‹ä¸€ä¸ªWSä¸­å‘¢ï¼Ÿ" class="headerlink" title="é‚£ä¹ˆï¼Œè¦æ€ä¹ˆè¿›å…¥ä¸‹ä¸€ä¸ªWSä¸­å‘¢ï¼Ÿ"></a>é‚£ä¹ˆï¼Œè¦æ€ä¹ˆè¿›å…¥ä¸‹ä¸€ä¸ªWSä¸­å‘¢ï¼Ÿ</h2><p>å¥½é—®é¢˜~å®é™…ä¸Šï¼Œç°åœ¨å·²ç»æœ‰å¾ˆå¤šç ”ç©¶åœ¨æ¢ç´¢WS3-5çš„éœ€æ±‚äº†ã€‚ä½œè€…åœ¨æ–‡ç« ä¸­ç»™å‡ºäº†4ä¸ªè¿™æ ·çš„ç ”ç©¶æ–¹å‘ï¼š</p>
<ul>
<li><strong>ç¬¬äºŒè¯­è¨€ä¹ å¾—</strong>ï¼ˆSecond language acquisitionï¼‰ï¼šä¸åŒçš„å›½å®¶è™½ç„¶è¯­è¨€ä¸åŒï¼Œå´æœ‰ç€ç±»ä¼¼çš„ç¤¾ä¼šæ¨¡å‹ï¼Œå…¶ä¸­åŒ…æ‹¬ç±»ä¼¼çš„ç‰©ä½“æŒ‡ä»£ï¼ˆä¾‹å¦‚åŠ¨ç‰©ï¼Œæ°´æœâ€¦ï¼‰å’Œäººçš„å†…åœ¨çŠ¶æ€ï¼ˆä¾‹å¦‚å¿«ä¹ï¼Œé¥¥é¥¿â€¦ï¼‰ã€‚ç°æœ‰çš„ç ”ç©¶å·²ç»å¼€å§‹å‘ç¥ç»æœºå™¨ç¿»è¯‘æ¨¡å‹å¼•å…¥è¿™ç§ç›¸ä¼¼æ€§äº†ï¼šACLâ€™20çš„ä¸€ç¯‡è®ºæ–‡[6]åˆ©ç”¨äº†WS3çš„å›¾åƒä¿¡æ¯ä½œä¸ºå¢å¼ºåŒè¯­å¯¹åº”å…³ç³»çš„æ¢çº½ï¼Œæœªæ¥ä¼šå‘å±•ä¸ºåˆ©ç”¨WS4çš„æ¨¡æ‹Ÿä¸–ç•Œä¿¡æ¯ï¼Œä»¥åŠæœ€ç»ˆèµ°å‘WS5çš„çœŸå®ä¸–ç•Œä¿¡æ¯ã€‚</li>
<li><strong>æŒ‡ä»£æ¶ˆè§£</strong>ï¼ˆCoreference resolutionï¼‰å’Œ<strong>è¯ä¹‰æ¶ˆæ­§</strong>ï¼ˆWord sense disambiguationï¼‰ï¼šæ— è®ºæ˜¯ç¡®å®šæ–‡æœ¬ä¸­ä»£è¯å¯¹åº”çš„åè¯è¿˜æ˜¯æ¢ç©¶ä¸€ä¸ªè¯åœ¨æ–‡æœ¬ä¸­çš„ç¡®åˆ‡æ„æ€ï¼Œéƒ½æœ€ç»ˆéœ€è¦å¯¹å¿ƒæ™ºç†è®ºçš„æ¢ç´¢ï¼Œé€šè¿‡å¯¹å¬è€…éœ€æ±‚å’Œç»éªŒçš„å»ºæ¨¡ç»¼åˆåœ°å®Œæˆä»»åŠ¡ï¼Œè€Œéç®€å•åœ°é€šè¿‡æ–‡æœ¬å¯»æ‰¾åˆ°ä¸ä»£è¯æœ€æ¥è¿‘çš„åè¯ï¼Œæˆ–æ˜¯ç”¨å±€éƒ¨çš„æ–‡æœ¬ä¿¡æ¯ç¡®å®šè¯ä¹‰ã€‚ç±»ä¼¼TextWorld[7]çš„WS4è™šæ‹Ÿç¯å¢ƒä¸ºè¿›ä¸€æ­¥æ¢ç´¢è¿™ä¸¤ä¸ªé—®é¢˜æä¾›äº†æ–°çš„å¯èƒ½ã€‚</li>
<li><strong>æ–°è¯å­¦ä¹ </strong>ï¼ˆNovel word learningï¼‰ï¼šäººå¯¹äºç‰©ä½“çš„æè¿°å¯èƒ½ä¸ä»…å±€é™äºè¯­è¨€ï¼Œæœ‰æ—¶è¿˜ä¼šåŠ å…¥è‚¢ä½“è¯­è¨€é…åˆå½¢å®¹ç‰©ä½“çš„å½¢çŠ¶æˆ–å¤§å°ï¼Œè¿™éœ€è¦WS3ç³»ç»Ÿè¿›è¡Œå¤šæ¨¡æ€çš„æ„ŸçŸ¥ï¼›æ­¤å¤–ï¼Œåœ¨æè¿°æ–°çš„ç‰©ä½“æ—¶ï¼Œæˆ‘ä»¬ä¸ä»…ä¼šæè¿°å®ƒçš„å¤–è§‚ï¼Œè¿˜ä¼šæè¿°å®ƒçš„åŠŸèƒ½ï¼Œè¿™éœ€è¦WS4ç³»ç»Ÿå¯¹åŠ¨ä½œå’ŒåŠŸèƒ½çš„è®¤è¯†ã€‚ä¾‹å¦‚ï¼Œåœ¨æè¿°æ‰‹é£ç´æ—¶ï¼Œæˆ‘ä»¬ä¼šè¯´å®ƒâ€œèƒŒç€åƒå‰ä»–ï¼Œä½†å¼¹ç€åƒé’¢ç´â€ã€‚æ‰‹é£ç´ä¸å‰ä»–å’Œé’¢ç´çš„ç›¸ä¼¼æ€§ä»…ä½“ç°åœ¨ä½¿ç”¨åŠ¨ä½œä¸Šï¼Œè¿™ç§åŠ¨ä½œä¸Šçš„æè¿°åªæœ‰æ›´é«˜çº§çš„ç³»ç»Ÿæ‰èƒ½å¤Ÿè®¤è¯†ã€‚</li>
<li><strong>å†’çŠ¯æ€§è¯­è¨€</strong>ï¼ˆPersonally charged languageï¼‰ï¼šæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±ä¸æ„¿æ„å¬åˆ°çš„è¯ã€‚æ¯”å¦‚ï¼Œâ€œç¬¨è›‹â€è¿™ä¸ªè¯å¯¹äºä¸åŒçš„äººæœ‰ç€ä¸åŒçš„ç†è§£ï¼šæœ‰äº›äººå¯èƒ½è®¤ä¸ºè¿™æ ·çš„è¯´æ³•æ˜¯å¼€ç©ç¬‘ï¼Œæ— ä¼¤å¤§é›…ï¼›ä½†æœ‰äº›äººä¼šè®¤ä¸ºè¿™æ˜¯å¯¹è‡ªå·±åŠªåŠ›çš„å¦å®šï¼Œä»è€Œå—åˆ°ä¼¤å®³ã€‚åªæœ‰å½“ç³»ç»Ÿèµ°å‘WS5ï¼Œè·å¾—äº†ç¤¾ä¼šäº¤å¾€çš„çŸ¥è¯†ï¼Œæ‰èƒ½æ˜ç™½åœ¨ä¸åŒç¯å¢ƒå’Œæ¡ä»¶ä¸‹äººçš„æƒ…æ„Ÿç©¶ç«Ÿå¦‚ä½•ã€‚</li>
</ul>
<h2 id="çœ‹äº†è¿™ä¹ˆå¤šï¼Œè¿™ç¯‡æ–‡ç« ç©¶ç«Ÿæƒ³è¯´ä»€ä¹ˆï¼Ÿ"><a href="#çœ‹äº†è¿™ä¹ˆå¤šï¼Œè¿™ç¯‡æ–‡ç« ç©¶ç«Ÿæƒ³è¯´ä»€ä¹ˆï¼Ÿ" class="headerlink" title="çœ‹äº†è¿™ä¹ˆå¤šï¼Œè¿™ç¯‡æ–‡ç« ç©¶ç«Ÿæƒ³è¯´ä»€ä¹ˆï¼Ÿ"></a>çœ‹äº†è¿™ä¹ˆå¤šï¼Œè¿™ç¯‡æ–‡ç« ç©¶ç«Ÿæƒ³è¯´ä»€ä¹ˆï¼Ÿ</h2><p>ä½œè€…ç‹è‹åœ¨é˜…è¯»è¿™ç¯‡å‡ ä¹ä¸åŒ…å«ä»»ä½•æ•°æ®å’Œå…¬å¼çš„æ–‡ç« æ—¶ï¼Œä½“ä¼šåˆ°çš„åƒåŠ›æ„Ÿå®Œå…¨ä¸äºšäºä»»ä½•ä¸€ç¯‡å……æ–¥ç€å…¬å¼çš„æ–‡ç« ã€‚è®¸å¤šå“²å­¦å’Œè¯­è¨€å­¦æ¦‚å¿µåœ¨è¿‘å¹´æ¥å¾ˆå°‘è¢«æåŠï¼Œç”šè‡³ä¸€éƒ¨åˆ†æ¦‚å¿µæ ¹æœ¬æŸ¥ä¸åˆ°ç›¸å…³çš„ä¸­æ–‡ç¿»è¯‘ï¼Œåªå¥½ç»“åˆç»´åŸºç™¾ç§‘å’Œä¸€äº›æŸ¥å¾—åˆ°çš„è®²ä¹‰æ¥åŠªåŠ›ç†è§£ã€‚è¿™ä¹Ÿéš¾æ€ªï¼Œæ¯•ç«Ÿè¿™ç¯‡æ–‡ç« æ˜¯ä¼—å¤šé¢†åŸŸå¤§ä½¬ä»NLPã€CVã€è¯­è¨€å­¦ã€å“²å­¦å’Œæœºå™¨äººå­¦ç­‰ç­‰ä¸åŒçš„è§’åº¦ä¸ºNLPçš„æœªæ¥è§„åˆ’çš„å‰è¡Œè·¯çº¿ã€‚</p>
<p>ç„¶è€Œï¼Œæ–‡ä¸­æ‰€è¯´çš„è®¸å¤šä¸œè¥¿è™½ç„¶ç›®å‰å·²ç»æœ‰å·¥ä½œå¼€å§‹äº†ç›¸å…³çš„æ¢ç´¢ã€‚è™½ç„¶è¯¸å¦‚â€œå…·èº«â€ã€â€œç¤¾ä¼šå±æ€§â€ç­‰ç­‰åè¯çœ‹èµ·æ¥å’Œç°åœ¨çš„NLPç¤¾åŒºä¸æ€ä¹ˆæ²¾è¾¹å„¿ï¼Œè€Œä¸”è¿™äº›åè¯å®åœ¨æ˜¯è¿‡äºè™šæ— ç¼¥ç¼ˆï¼Œè¿™ä¹Ÿæ°å¥½ç»™äºˆäº†ç ”ç©¶è€…å……åˆ†çš„æƒ³è±¡ç©ºé—´ï¼Œè®©æ¯ä¸€ä¸ªç›®æ ‡å¾—ä»¥ç”¨ä¸åŒçš„æ–¹æ³•å®ç°ã€‚ä¾‹å¦‚ï¼ŒWS4çš„â€œè¯•é”™â€æ¦‚å¿µå’Œå¼ºåŒ–å­¦ä¹ æœ‰ç€åƒä¸ä¸‡ç¼•çš„è”ç³»ï¼Œè€ŒWS5çš„ç¤¾ä¼šå±æ€§åˆä¸ç”±å¾—è®©æˆ‘ä»¬æƒ³èµ·äº†å¾®è½¯äºšç ”é™¢è‡´åŠ›äºæå‡æ™ºå•†+æƒ…å•†çš„å¾®è½¯å°å†°[8]ï¼ˆå°å†°çš„è®ºæ–‡å¯¹äºç ”ç©¶å¯¹è¯ç³»ç»Ÿçš„åŒå­¦éå¸¸å€¼å¾—ä¸€è¯»ï¼Œå¤§æ¨èï¼‰ã€‚</p>
<p>æ‰€ä»¥ï¼Œåœ¨ä¸ºè¶Šæ¥è¶Šå¤§çš„æ¨¡å‹å’Œè®¡ç®—å¼€é”€å‘æ„ä¹‹ä½™ï¼Œæ¢ä¸ªè§’åº¦æ¥çœ‹çœ‹æˆ‘ä»¬æ‰€åœ¨çš„é¢†åŸŸï¼Œä»¥å¤§å±€è§‚çœ‹çœ‹æˆ‘ä»¬çš„å‘å±•é˜¶æ®µï¼Œæ€è€ƒæ€è€ƒè¸å…¥æœªæ¥éœ€è¦å­¦ä¹ å’Œå‘å±•ä»€ä¹ˆæ ·çš„æŠ€æœ¯ï¼Œä¹Ÿè®¸å°±èƒ½å®ç°å¼¯é“è¶…è½¦å‘¢~</p>
<p>è¦è·Ÿç´§æ½®æµé¸­ï¼åŠ æ²¹å§ï¼ŒNLPäºº(= Â· Ï‰ Â·=)</p>
]]></content>
      <categories>
        <category>NLP</category>
      </categories>
      <tags>
        <tag>NLP</tag>
        <tag>æœªæ¥</tag>
        <tag>ç•…æƒ³</tag>
      </tags>
  </entry>
  <entry>
    <title>å¯è§£é‡Šæ€§ (interpretability)</title>
    <url>/2020/11/18/%E5%8F%AF%E8%A7%A3%E9%87%8A%E6%80%A7-interpretability/</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡æ˜¯å¯¹TACL2019ã€ŠAnalysis Methods in Neural Language Processing: A Surveyã€‹çš„ç¿»è¯‘å’Œæ•´ç†ã€‚</p>
</blockquote>
<p>éšç€æ¨¡å‹ç²¾åº¦çš„æé«˜ï¼Œå¯è§£é‡Šæ€§å´ä¸æ–­ä¸‹é™ï¼Œä¸‹å›¾å½¢è±¡çš„è¡¨æ˜äº†è¿™ä¸€ç‚¹ï¼š</p>
<p><div align="center"> <img src="/images/blog/2020/interpretability.webp" alt></div></p>
<h3 id="å¯¼è¯»"><a href="#å¯¼è¯»" class="headerlink" title="å¯¼è¯»"></a>å¯¼è¯»</h3><p>NLPé¢†åŸŸå‘å±•è¿…çŒ›ï¼Œå…¶æ¨¡å‹åˆ†ææ–¹æ³•ä¹Ÿæ­£é€æ¸ç«çƒ­ã€‚ä¸ºä»€ä¹ˆè¦ç ”ç©¶NLPçš„å¯è§£é‡Šæ€§ï¼ŸæŸç§ç¨‹åº¦ä¸Šï¼Œè¿™ä¸€é—®é¢˜åˆè½å…¥æ›´å¤§çš„èŒƒç•´â€”â€”ä¸ºä»€ä¹ˆè¦ç ”ç©¶æœºå™¨å­¦ä¹ æ¨¡å‹çš„å¯è§£é‡Šæ€§ï¼Ÿå…¶æ”¯æŒè€…è®¤ä¸ºï¼Œåœ¨äºå¢åŠ MLç³»ç»Ÿçš„å¯é æ€§ã€å¯ä¿¡åº¦ã€å…¬å¹³æ€§å’Œå®‰å…¨æ€§ç­‰ã€‚æ­¤å¤–ï¼ŒçŸ¥å…¶æ‰€ä»¥ç„¶ä¹Ÿæœ‰åŠ©äºæ”¹è¿›æœºå™¨å­¦ä¹ æ¨¡å‹çš„æ•ˆæœã€‚</p>
<p>è€Œåœ¨NLPé¢†åŸŸï¼Œè¿™ä¸€é—®é¢˜éœ€è¦è”ç³»å…¶å‘å±•å†ç¨‹æ¥è§£ç­”ï¼š</p>
<p>æ—©æœŸçš„NLPå·¥ä½œé€šå¸¸æ¶‰åŠç‰¹å¾å·¥ç¨‹ï¼Œè¿™äº›æ‰‹å·¥ç‰¹å¾çš„å«ä¹‰æ˜¯æ˜“äºç†è§£çš„â€”â€”å½¢æ€ç‰¹æ€§ï¼Œè¯æ³•ç±»åˆ«ï¼Œå¥æ³•ç±»åˆ«ï¼Œè¯­ä¹‰å…³ç³»ç­‰ç­‰ã€‚ç†è®ºä¸Šï¼Œäººä»¬å¯ä»¥é€šè¿‡è§‚å¯Ÿæ¨¡å‹å¯¹è¿™äº›ç‰¹å¾èµ‹äºˆçš„æƒé‡æ¥æ›´å¥½åœ°ç†è§£æ¨¡å‹åœ¨åšä»€ä¹ˆã€‚è€Œå¯¹äºç°åœ¨æ™®éçš„ç«¯åˆ°ç«¯çš„ï¼ˆæ¯”å¦‚ï¼Œä»è¯å‘é‡è¾“å…¥åˆ°æ–‡æœ¬åˆ†ç±»çš„è¾“å‡ºï¼‰ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œç†è§£å’Œåˆ†æå®ƒä»¬çš„å·¥ä½œä¸æ˜¯é‚£ä¹ˆç›´è§‚ã€‚ä½†æ˜¯ï¼Œæ—¢ç„¶è¿™äº›æ¨¡å‹ç»“æ„èƒ½å¤Ÿæ•æ‰æ–‡æœ¬çš„ç‰¹å¾ï¼Œé‚£ä¹ˆæ—©æœŸçš„å…³äºè¯­è¨€å­¦æ¦‚å¿µçš„åˆ†æå·¥ä½œä¹Ÿåº”å½“é€‚ç”¨äºç°åœ¨çš„NLPç ”ç©¶ã€‚</p>
<p>æœ¬æ–‡å°è¯•åˆ†æè¿‘å¹´æ¥NLPå¯è§£é‡Šé¢†åŸŸçš„å·¥ä½œï¼Œæ¦‚æ‹¬å½“ä¸‹çš„ä¸»æµæ–¹å‘ï¼Œå¹¶é’ˆå¯¹å½“å‰å·¥ä½œçš„ä¸è¶³æå‡ºä¸€äº›å¯èƒ½çš„æœªæ¥æ–¹å‘ã€‚æœ¬æ–‡å°†å›´ç»•ä»¥ä¸‹å‡ æ–¹é¢å±•å¼€ï¼š</p>
<ul>
<li>è¯­ä¹‰ç‰¹å¾å­¦ä¹ </li>
<li>å¯è§†åŒ–æ–¹æ³•</li>
<li>æŒ‘æˆ˜é›†</li>
<li>å¯¹æŠ—æ ·æœ¬</li>
<li>è§£é‡Šæ¨¡å‹é¢„æµ‹</li>
<li>å…¶ä»–ç ”ç©¶</li>
</ul>
<a id="more"></a>
<h2 id="1-è¯­ä¹‰ç‰¹å¾å­¦ä¹ "><a href="#1-è¯­ä¹‰ç‰¹å¾å­¦ä¹ " class="headerlink" title="1. è¯­ä¹‰ç‰¹å¾å­¦ä¹ "></a>1. è¯­ä¹‰ç‰¹å¾å­¦ä¹ </h2><p>ç°ä»£NLPæ¨¡å‹é€šå¸¸æ˜¯ç«¯åˆ°ç«¯çš„ï¼Œæ²¡æœ‰æ˜¾å¼ç¼–ç è¯­ä¹‰ç‰¹å¾ï¼Œæ‰€ä»¥äººä»¬å¾ˆæƒ³çŸ¥é“æ¨¡å‹åˆ°åº•éƒ½å­¦åˆ°äº†ä»€ä¹ˆã€‚</p>
<h3 id="ç ”ç©¶æ–¹æ³•"><a href="#ç ”ç©¶æ–¹æ³•" class="headerlink" title="ç ”ç©¶æ–¹æ³•"></a>ç ”ç©¶æ–¹æ³•</h3><p>æœ€å¸¸è§çš„æ–¹æ³•å°±æ˜¯å°†æ¨¡å‹çš„æ¿€æ´»è¾“å‡ºå’Œè¯­ä¹‰ç‰¹å¾åˆ†ç±»è¿›è¡Œå…³è”ã€‚</p>
<p>å³ï¼Œå›ºå®šä¸€ä¸ªè®­ç»ƒå¥½çš„æ¨¡å‹ï¼ˆä¾‹å¦‚åœ¨æœºå™¨ç¿»è¯‘ä»»åŠ¡ï¼‰çš„æƒé‡ï¼Œå°†å…¶ç”¨äºç¼–ç è¯­æ–™å¹¶è®­ç»ƒä¸€ä¸ªåˆ†ç±»å™¨åšä¸€äº›è¯­ä¹‰ç‰¹å¾åˆ†ç±»ï¼ˆä¾‹å¦‚è¯æ€§åˆ†ç±»ç­‰ï¼‰ã€‚åˆ†ç±»ç»“æœçš„å¥½ååæ˜ äº†æ¨¡å‹å­¦ä¹ è¡¨ç¤ºçš„å¥½åã€‚</p>
<p>ä»¥ä¸Šè¿™ä¸€æ–¹æ³•å…·æœ‰å¤šä¸ªåå­—ï¼Œå¦‚â€œè¾…åŠ©åˆ†ç±»ä»»åŠ¡â€ï¼ˆauxiliary prediction tasksï¼‰ï¼Œâ€œè¯Šæ–­åˆ†ç±»å™¨â€ï¼ˆdiagnostic classifiersï¼‰ï¼Œä»¥åŠâ€œæ¢é’ˆå®éªŒâ€ï¼ˆprobing tasksï¼‰ç­‰ã€‚ç›®å‰å·²æœ‰çš„å·¥ä½œæ€»ç»“å¦‚ä¸‹ï¼š</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/GNpj5fw72EqiccKOqVfMxVaHMdiaIOIFpc1PT4Synn2yedUnW8gWGnDdABcdzrL0H4KoUkxH9sYfypuibHNhhDkAQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/GNpj5fw72EqiccKOqVfMxVaHMdiaIOIFpcaOIgRsk1OJnoVqVttqeDKrFXgoEwAN6dUxOMoOmw71B8UthS0m36Wg/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>ä¸¾ä¸€ä¸ªç¥ç»æœºå™¨ç¿»è¯‘ï¼ˆNMTï¼‰ä»»åŠ¡çš„ä¾‹å­ï¼š</p>
<blockquote>
<p>Xing Shi, Inkit Padhi, and Kevin Knight. 2016b. Does String-Based Neural MT Learn Source Syntax? In Proceedings of the 2016 Conference on Empirical Methods in Natural Language Processing, pages 1526â€“1534, Austin, Texas. Association for Computational Linguistics.</p>
</blockquote>
<p>é¦–å…ˆè®­ç»ƒä¸¤ä¸ªæ¨¡å‹ï¼šè‹±è¯‘æ³•å’Œæ³•è¯‘è‹±æ¨¡å‹ï¼Œç„¶åå°†æ¨¡å‹ä¸­çš„ç¼–ç å™¨éƒ¨åˆ†å•ç‹¬åœ¨è¯­æ–™ä¸Šè¿è¡Œè·å¾—ä¸­é—´çŠ¶æ€ï¼Œå¹¶ä»‹å…¥é€»è¾‘å›å½’åˆ†ç±»å™¨ç”¨äºä¸åŒè¯­æ³•ç‰¹å¾åˆ†ç±»ã€‚ä½œè€…å®éªŒå¾—å‡ºç»“è®ºï¼šNMTçš„ç¼–ç å™¨èƒ½å¤Ÿå­¦ä¹ è¯è¯­å±‚é¢å’Œå¥å­å±‚é¢é‡è¦çš„è¯­æ³•ä¿¡æ¯ï¼Œå¹¶ä¸”è¿›ä¸€æ­¥é€šè¿‡æ¯”è¾ƒä¸åŒç¼–ç å±‚çš„è¡¨ç¤ºå‘ç°ï¼šåœ¨å±€éƒ¨ç‰¹å¾æ›´å¤šåœ°ä½“ç°åœ¨åº•å±‚ç¼–ç ç»“æœä¸­ï¼Œè€Œé«˜å±‚çš„ç»“æ„åˆ™å­¦åˆ°å¥å­çš„å…¨å±€æˆ–è€…æ‘˜è¦çš„ä¿¡æ¯ã€‚</p>
<p>å…¶ä»–çš„å¯»æ‰¾æ¨¡å‹ç»“æ„å’Œè¯­ä¹‰ç‰¹å¾å…³è”çš„å®éªŒåŒ…æ‹¬åˆ†ææ³¨æ„åŠ›æƒé‡å’ŒæŒ‡ä»£è¯åˆ†è¾¨çš„å…³è”ï¼Œä»¥åŠç›´æ¥å’Œé—´æ¥è®¡ç®—æ¨¡å‹æ¿€æ´»å±‚è¾“å‡ºå’Œè¯­ä¹‰ç‰¹å¾çš„ç›¸å…³ç³»æ•°ã€‚</p>
<h3 id="è¯­ä¹‰ç‰¹å¾"><a href="#è¯­ä¹‰ç‰¹å¾" class="headerlink" title="è¯­ä¹‰ç‰¹å¾"></a>è¯­ä¹‰ç‰¹å¾</h3><p>ä¸Šè¿°å®éªŒæ¶µç›–äº†è®¸å¤šæœ‰ç”¨çš„è¯­ä¹‰ç‰¹å¾ï¼Œä»åŸºæœ¬ç‰¹å¾å¦‚å¥å­é•¿åº¦ï¼Œè¯è¯­ä½ç½®ï¼Œè¯è¯­å­˜åœ¨æ€§ï¼Œä»¥åŠç®€å•è¯åºï¼Œå½¢æ€å­¦ç»“æ„åˆ°è¯­æ³•å’Œè¯­ä¹‰ç»“æ„çš„ç‰¹å¾ï¼Œæ­¤å¤–è¿˜æœ‰éŸ³èŠ‚ã€å£éŸ³å’Œé£æ ¼ç­‰è¯­éŸ³ç‰¹å¾ç­‰ç­‰ã€‚</p>
<p>å°½ç®¡éš¾ä»¥å°†è¿™äº›åˆ†å¸ƒå¹¿æ³›çš„å·¥ä½œåŠ ä»¥æ•´åˆä¸€ç»Ÿï¼Œå¯ä»¥çœ‹å‡º<strong>ç¥ç»ç½‘ç»œå¯ä»¥å­¦åˆ°æ•°é‡å¯è§‚çš„è¯­è¨€å­¦ä¿¡æ¯</strong>ã€‚å¯¹äºé¢‘ç¹å‡ºç°çš„ç‰¹å¾ï¼Œæ¨¡å‹å­¦ä¹ å¾—å¾ˆå¥½ï¼›è€Œå¯¹äºå°‘è§çš„ç‰¹å¾ï¼Œå¯¹æ¨¡å‹è€Œè¨€åˆ™è¾ƒéš¾å­¦ä¹ ã€‚æœ‰å·¥ä½œå‘ç°LSTMå¯ä»¥æ•æ‰åˆ°å¤§éƒ¨åˆ†æƒ…å†µçš„ä¸»è¯­-åŠ¨è¯çš„å…±ç°å…³ç³»ï¼Œè€Œåœ¨æ›´éš¾çš„ä¾‹å­ä¸‹éœ€è¦ä¸€äº›ç›´æ¥çš„ç›‘ç£ä¿¡æ¯ã€‚</p>
<p>å¦ä¸€ä¸ªé€æ¸æµ®ç°å‡ºæ¥çš„ä¸»é¢˜æ˜¯ç ”ç©¶æ¨¡å‹å­¦ä¹ çš„æ–‡æœ¬è¡¨ç¤ºçš„<strong>å±‚æ¬¡åŒ–æ€§è´¨</strong>ã€‚ä¸Šæ–‡ä¸­æåˆ°çš„NMTæ¨¡å‹çš„å‘ç°å°±èƒ½è¯´æ˜è¿™ä¸€ç‚¹ï¼ŒåŒæ—¶åœ¨RNNæ¨¡å‹ä¸­ä¹Ÿèƒ½çœ‹åˆ°è¯­æ³•ä¿¡æ¯å‡ºç°åœ¨å±‚æ¬¡åŒ–çš„è¡¨ç¤ºä¸­ã€‚</p>
<p>æ­¤å¤–ï¼Œä¸€äº›ç ”ç©¶è€…ï¼ˆWilliamsç­‰ï¼Œ2018ï¼›Maillardå’ŒClarkï¼Œ2018ï¼‰å‘ç°ä½¿ç”¨éšå¼æ ‘çŠ¶ç»“æ„è®­ç»ƒçš„æ¨¡å‹åœ¨è‡ªç„¶è¯­è¨€æ¨ç†ï¼ˆNatural Language Inferenceï¼ŒNLIï¼‰ä»»åŠ¡ä¸­æ¯”ä½¿ç”¨è¯­æ³•æ ‡æ³¨æ ‘çš„æ¨¡å‹è¡¨ç°è¦å¥½ã€‚æ›´è¿›ä¸€æ­¥è¯´ï¼Œè¿™äº›æ¨¡å‹ä¸­çš„æ ‘å¹¶æ²¡æœ‰æŒ‰ç…§ç°æœ‰çš„è¯­æ³•ç†è®ºæ„å»ºè¯­æ³•æ ‘ï¼Œè¿™ä¹Ÿå¯¹ç¥ç»ç½‘ç»œå­¦ä¹ è¯­æ³•ä¿¡æ¯çš„é‡è¦æ€§å¸¦æ¥ç–‘é—®ã€‚</p>
<h3 id="æ¨¡å‹çš„ç›¸å…³ç»“æ„"><a href="#æ¨¡å‹çš„ç›¸å…³ç»“æ„" class="headerlink" title="æ¨¡å‹çš„ç›¸å…³ç»“æ„"></a>æ¨¡å‹çš„ç›¸å…³ç»“æ„</h3><p>åœ¨è¿™ä¸€é¢†åŸŸï¼Œæ¨¡å‹çš„éƒ¨åˆ†ç»“æ„è¢«ç”¨äºæ¢ç©¶æ˜¯å¦å…·æœ‰å¯¹è¯­ä¹‰ä¿¡æ¯çš„å­¦ä¹ èƒ½åŠ›ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>è¯å‘é‡</li>
<li>å¥å‘é‡</li>
<li>RNNçš„éšè—çŠ¶æ€å’Œé—¨æ§æ¿€æ´»è¾“å‡º</li>
<li>å¥å­åˆ°å¥å­æ¨¡å‹çš„æ³¨æ„åŠ›æƒé‡</li>
</ul>
<p>å¯¹CNNæ¨¡å‹çš„ç ”ç©¶å·¥ä½œè¾ƒå°‘ã€‚åœ¨è¯­éŸ³é¢†åŸŸå’Œå¤šæ¨¡æ€ç›¸å…³çš„å·¥ä½œç­‰ï¼Œè¯·å‚è€ƒä¸Šé¢çš„è¡¨ã€‚</p>
<h3 id="å±€é™"><a href="#å±€é™" class="headerlink" title="å±€é™"></a>å±€é™</h3><p><strong>ä¸Šè¿°çš„åˆ†ç±»æ–¹æ³•å¯ä»¥è¯æ˜æ¨¡å‹å¯ä»¥æ•æ‰ä¸€å®šçš„è¯­ä¹‰ä¿¡æ¯ï¼Œç„¶è€Œè¿™ä¸ä¸€å®šèƒ½è¯æ˜æ¨¡å‹åˆ©ç”¨äº†è¿™äº›ä¿¡æ¯è¿›è¡Œæ¨ç†</strong>ã€‚ä¾‹å¦‚ï¼ŒVanmassenhoveç­‰ï¼ˆ2017ï¼‰ç ”ç©¶äº†NMTï¼ˆä»¥åŠåŸºäºçŸ­è¯­çš„ç»Ÿè®¡æœºå™¨ç¿»è¯‘ï¼‰ä¸­çš„æ–¹é¢ä¿¡æ¯ã€‚ä»–ä»¬è®­ç»ƒäº†NMTå¥å­ç¼–ç å‘é‡çš„åˆ†ç±»å™¨ï¼Œå‘ç°ä»–ä»¬å¯ä»¥åœ¨90ï¼…çš„æ—¶é—´å†…å‡†ç¡®é¢„æµ‹æ—¶æ€ã€‚ä½†æ˜¯ï¼Œåœ¨è¯„ä¼°è¾“å‡ºç¿»è¯‘æ—¶ï¼Œä»–ä»¬å‘ç°åªæœ‰79ï¼…çš„ç»“æœå…·æœ‰æ­£ç¡®çš„æ—¶æ€ã€‚ä»–ä»¬å°†æ­¤ç»“æœè§£é‡Šä¸ºâ€œåœ¨è§£ç è¿‡ç¨‹ä¸­ä¸¢å¤±äº†éƒ¨åˆ†æ–¹é¢ä¿¡æ¯â€ã€‚ä¸æ­¤ç›¸å…³çš„æ˜¯ï¼ŒCÃ­fkaå’ŒBojarï¼ˆ2018ï¼‰åœ¨ç¿»è¯‘è´¨é‡ï¼ˆBLEUï¼‰å’Œè¡¨ç¤ºè´¨é‡ï¼ˆåˆ†ç±»ä»»åŠ¡ï¼‰æ–¹é¢æ¯”è¾ƒäº†å„ç§NMTæ¨¡å‹çš„æ€§èƒ½ã€‚ä»–ä»¬å‘ç°ä¸¤è€…ä¹‹é—´å­˜åœ¨è´Ÿç›¸å…³å…³ç³»ï¼Œè¿™è¡¨æ˜é«˜è´¨é‡çš„ç³»ç»Ÿå¯èƒ½æœªåœ¨å­¦ä¹ æŸäº›å¥å­çš„å«ä¹‰ã€‚ç›¸åï¼ŒArtetxeç­‰ï¼ˆ2018ï¼‰æŒ‡å‡ºï¼Œè¯åµŒå…¥åŒ…å«ä¸åŒçš„è¯­è¨€ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡å¯¹å­¦ä¹ çš„åµŒå…¥è¿›è¡Œçº¿æ€§å˜æ¢æ¥å‘ç°å®ƒã€‚ä»–ä»¬çš„ç»“æœæå‡ºäº†å¦ä¸€ç§è§£é‡Šï¼Œè¡¨æ˜â€œåµŒå…¥æ¨¡å‹èƒ½å¤Ÿå¯¹ä¸åŒçš„è¯­è¨€ä¿¡æ¯è¿›è¡Œç¼–ç ï¼Œä½†å¯¹è¿™äº›ä¿¡æ¯çš„è¡¨è¾¾æ–¹å¼æœ‰é™åˆ¶ã€‚â€</p>
<p>ä»æ–¹æ³•è®ºçš„è§’åº¦æ¥çœ‹ï¼Œå¤§å¤šæ•°ç›¸å…³çš„åˆ†æå·¥ä½œéƒ½ä¸äº’ç›¸å…³ï¼ˆcorrelationï¼‰æœ‰å…³ï¼š<strong>å…·æœ‰è¯­è¨€å±æ€§çš„ç¥ç»ç½‘ç»œç»„ä»¶ä¹‹é—´çš„å…³è”ç¨‹åº¦å¦‚ä½•</strong>ï¼Ÿå¯èƒ½ç¼ºä¹ä¸€ç§<strong>å› æœå…³ç³»</strong>çš„åº¦é‡ï¼šè¯­è¨€å±æ€§çš„ç¼–ç å¦‚ä½•å½±å“ç³»ç»Ÿè¾“å‡ºã€‚Giulianelliç­‰ï¼ˆ2018ï¼‰åœ¨è¿™ä¸ªé—®é¢˜ä¸Šå–å¾—äº†ä¸€äº›è¿›å±•ã€‚ä»–ä»¬æ ¹æ®RNNéšè—çŠ¶æ€å’Œé—¨æ§åœ¨ä¸åŒæ—¶é—´æ­¥é•¿é¢„æµ‹äº†æ•°å­—ä¸€è‡´æ€§ã€‚ç„¶åï¼Œä»–ä»¬æ ¹æ®é¢„æµ‹å’Œæ­£ç¡®æ ‡ç­¾ä¹‹é—´çš„å·®å¼‚ï¼Œé€šè¿‡æ›´æ”¹éšè—çš„æ¿€æ´»æ¥å¹²é¢„æ¨¡å‹å¦‚ä½•å¤„ç†å¥å­ã€‚è¿™ç§æé«˜çš„ä¸€è‡´æ€§é¢„æµ‹å‡†ç¡®æ€§ï¼Œå¹¶ä¸”æ•ˆæœåœ¨å¥å­è¿‡ç¨‹ä¸­æŒç»­å­˜åœ¨ï¼Œè¡¨æ˜æ­¤ä¿¡æ¯å¯¹æ¨¡å‹æœ‰å½±å“ã€‚ä½†æ˜¯ï¼Œä»–ä»¬æ²¡æœ‰æŠ¥å‘Šå¯¹æ•´ä½“æ¨¡å‹è´¨é‡çš„å½±å“ï¼Œä¾‹å¦‚é€šè¿‡æµ‹é‡å›°æƒ‘åº¦ã€‚å› æœæ¨ç†ï¼ˆcausal inferenceï¼‰çš„æ–¹æ³•å¯èƒ½ä¼šä¸ºå…¶ä¸­ä¸€äº›é—®é¢˜æä¾›æ–°çš„æ€è·¯ã€‚</p>
<h2 id="2-å¯è§†åŒ–æ–¹æ³•"><a href="#2-å¯è§†åŒ–æ–¹æ³•" class="headerlink" title="2. å¯è§†åŒ–æ–¹æ³•"></a>2. å¯è§†åŒ–æ–¹æ³•</h2><p>å¯è§†åŒ–å·¥å…·ï¼Œä¸ä»…åœ¨è¯­è¨€é¢†åŸŸï¼Œåœ¨å…¶ä»–é¢†åŸŸéƒ½æ˜¯æ˜¯ä¸€ç±»åˆ†æç¥ç»ç½‘ç»œçš„é‡è¦å·¥å…·ã€‚</p>
<ul>
<li>æ—©æœŸçš„å·¥ä½œå¯è§†åŒ–äº†è¯­è¨€å»ºæ¨¡ä»»åŠ¡è®­ç»ƒçš„<strong>RNNä¸­çš„éšè—å•å…ƒæ¿€æ´»è¾“å‡º</strong>ï¼Œå¹¶è§‚å¯Ÿåˆ°å®ƒä»¬å¦‚ä½•ä¸æŸäº›è¯­æ³•å…³ç³»ï¼ˆä¾‹å¦‚ç›¸å…³æ€§ï¼‰ç›¸å¯¹åº”ï¼ˆElmanï¼Œ1991ï¼‰ã€‚</li>
<li><strong>æ³¨æ„åŠ›æœºåˆ¶</strong>ä¸€å‡ºæ¥ï¼Œäººä»¬å¾ˆè‡ªç„¶å°±æƒ³åˆ°å°†å…¶å¯è§†åŒ–ç”¨åšè§£é‡Šå·¥å…·ã€‚æ³¨æ„åŠ›çš„å¯è§†åŒ–å·¥ä½œåŒ…æ‹¬ï¼šNMTï¼ˆBahdanauç­‰äººï¼Œ2014ï¼‰ï¼ŒNLIï¼ˆRocktÃ¤schelç­‰äººï¼Œ2016; Yinç­‰äººï¼Œ2016ï¼‰ï¼Œæ‘˜è¦ï¼ˆRushç­‰äººï¼Œ2015ï¼‰ï¼Œæœºå™¨ç¿»è¯‘çš„åç¼–è¾‘ï¼ˆJauregi Unanueç­‰äººï¼Œ 2018ï¼‰ç­‰ã€‚</li>
<li>è®¡ç®—å„ç§<strong>æ˜¾è‘—æ€§åº¦é‡</strong>ï¼ˆsaliency mearuresï¼‰ä»¥å°†é¢„æµ‹å½’å› äºè¾“å…¥è¦ç´ ï¼Œç„¶åå¯ä»¥åœ¨é€‰å®šçš„ç¤ºä¾‹ä¸­å¯è§†åŒ–é‡è¦æˆ–æ˜¾è‘—ç‰¹å¾ï¼ˆLiç­‰äººï¼Œ2016a; Aubakirovaå’ŒBansalï¼Œ2016; Sundararajanç­‰äººï¼Œ2017; Arrasç­‰äººï¼Œ2017aï¼Œb; Dingç­‰äººï¼Œ2017; Murdochç­‰äººï¼Œ2018; Mudrakartaç­‰äººï¼Œ2018; Montavonç­‰äººï¼Œ2018; Godinç­‰äººï¼Œ2018ï¼‰ã€‚æ˜¾è‘—æ€§ä¹Ÿå¯ä»¥é’ˆå¯¹ä¸­é—´å€¼è€Œä¸æ˜¯è¾“å…¥ç‰¹å¾è¿›è¡Œè®¡ç®—ï¼ˆGhaeiniç­‰äººï¼Œ2018ï¼‰ã€‚</li>
</ul>
<blockquote>
<p>ä¸‹å›¾æ˜¯NMTçš„attentionå¯è§†åŒ–å·¥ä½œçš„ä¸€ä¸ªå®ä¾‹ã€‚è¯´åˆ°æ³¨æ„åŠ›å¯è§†åŒ–ï¼Œæˆ‘è¯»åˆ°æœ‰å·¥ä½œï¼ˆã€ŠAttention Interpretability Across NLP Tasksã€‹ï¼‰å¯¹æ¯”äº†ä¸åŒä»»åŠ¡çš„attention weightsï¼Œå¾—å‡ºä¸€ä¸ªæœ‰è¶£çš„ç»“è®ºï¼šåœ¨single sentenceä»»åŠ¡ï¼ˆå¦‚å¥å­åˆ†ç±»ï¼‰çš„attentionå¯è§£é‡Šæ€§ä¸å¥½ï¼Œè€Œåœ¨sentence-pairä»»åŠ¡ï¼ˆå¦‚ç¿»è¯‘å’Œæ¨ç†ï¼‰ä¸Šattentionæ˜¯æœ‰æ•ˆçš„æœºåˆ¶ï¼Œå…¶å¯è§£é‡Šæ€§ä¹Ÿå’Œæ¨¡å‹æ•ˆæœæ­£ç›¸å…³ã€‚</p>
</blockquote>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/GNpj5fw72EqiccKOqVfMxVaHMdiaIOIFpcbV4nlTytz3tmMiaWYT8NnOnnibcohj9qMHPviafCNE9ngoursyhCvSnXw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>ä¸€ç§æœ‰å¯å‘æ€§çš„å¯è§†åŒ–æŠ€æœ¯æ˜¯å¯¹ç¥ç»ç½‘ç»œæ¿€æ´»è¿›è¡Œèšç±»ï¼Œå¹¶å°†å®ƒä»¬ä¸æŸç§è¯­è¨€ç‰¹æ€§è¿›è¡Œæ¯”è¾ƒã€‚æ—©æœŸçš„å·¥ä½œå°†RNNæ¿€æ´»èšé›†åœ¨ä¸€èµ·ï¼Œè¡¨æ˜å®ƒä»¬æŒ‰è¯æ±‡ç±»åˆ«è¿›è¡Œç»„ç»‡ï¼ˆElmanï¼Œ1989ï¼Œ1990ï¼‰ã€‚å…¶ä»–äººä¹Ÿéµå¾ªäº†ç±»ä¼¼çš„æŠ€æœ¯ã€‚</p>
<p>åŒæ—¶æœ¬é¢†åŸŸä¹Ÿå‡ºç°äº†ä¸€äº›ç”¨äºå¯è§†åŒ–ç¥ç»ç½‘ç»œçš„åœ¨çº¿å·¥å…·ï¼š</p>
<ul>
<li><strong>LSTMVis</strong>ï¼ˆStrobeltç­‰äººï¼Œ2018bï¼‰å¯è§†åŒ–RNNæ¿€æ´»ï¼Œé‡ç‚¹æ˜¯è·Ÿè¸ªéšè—çŠ¶æ€åŠ¨æ€ã€‚</li>
<li><strong>Seq2Seq-Vis</strong>ï¼ˆStrobeltç­‰ï¼Œ2018aï¼‰å¯è§†åŒ–åŸºäºæ³¨æ„åŠ›çš„seq2seqæ¨¡å‹ä¸­çš„ä¸åŒæ¨¡å—ï¼Œç›®çš„æ˜¯æ£€æŸ¥æ¨¡å‹å†³ç­–å’Œæµ‹è¯•æ›¿ä»£å†³ç­–ã€‚</li>
<li><strong>Rikters</strong>ï¼ˆ2018ï¼‰æå‡ºäº†å¦ä¸€ä¸ªä¸“æ³¨äºæ¯”è¾ƒæ³¨æ„åŠ›æ¯”å¯¹çš„å·¥å…·ã€‚å®ƒè¿˜æ ¹æ®æ³¨æ„æƒé‡çš„åˆ†å¸ƒæä¾›ç¿»è¯‘ç½®ä¿¡åº¦è¯„åˆ†ã€‚</li>
<li><strong>NeuroX</strong>ï¼ˆDalviç­‰ï¼Œ2019bï¼‰æ˜¯ä¸€ç§ç”¨äºå‘ç°å’Œåˆ†æå•ä¸ªç¥ç»å…ƒçš„å·¥å…·ï¼Œä¸“æ³¨äºæœºå™¨ç¿»è¯‘ã€‚</li>
</ul>
<h3 id="è¯„ä¼°æ–¹å¼"><a href="#è¯„ä¼°æ–¹å¼" class="headerlink" title="è¯„ä¼°æ–¹å¼"></a>è¯„ä¼°æ–¹å¼</h3><p>å¦‚åŒåœ¨å¯è§£é‡Šæ€§æ–¹é¢çš„è®¸å¤šå·¥ä½œä¸­ä¸€æ ·ï¼Œ<strong>è¯„ä¼°å¯è§†åŒ–è´¨é‡éå¸¸å›°éš¾ï¼Œå¹¶ä¸”é€šå¸¸ä»…é™äºå®šæ€§ç¤ºä¾‹</strong>ã€‚</p>
<p>Singhç­‰ï¼ˆ2018ï¼‰å±•ç¤ºäº†äººç±»é€šè¿‡ä¸¤ç§è§£é‡Šæ–¹æ³•ç”Ÿæˆçš„è¾“å…¥è¯çš„å±‚æ¬¡èšç±»ï¼Œå¹¶è¦æ±‚ä»–ä»¬è¯„ä¼°å“ªç§æ–¹æ³•æ›´å‡†ç¡®ï¼Œæˆ–è€…ä»–ä»¬æ›´ä¿¡ä»»å“ªç§æ–¹æ³•ã€‚å…¶ä»–äººæŠ¥å‘Šäº†åœ¨å¯¹è¯å»ºæ¨¡ï¼ˆFreemanç­‰äººï¼Œ2018ï¼‰å’ŒåŒ»ç–—ä»£ç é¢„æµ‹ä»»åŠ¡ï¼ˆMullenbachç­‰äººï¼Œ2018ï¼‰ä¸­å¯¹æ³¨æ„åŠ›å¯è§†åŒ–è¿›è¡Œçš„äººç±»è¯„ä¼°ã€‚</p>
<p>ä¸Šè¿°å¼€æ”¾æºä»£ç å·¥å…·çš„å¯ç”¨æ€§æœ‰æœ›é¼“åŠ±ç”¨æˆ·åœ¨å…¶å¸¸è§„ç ”å‘å‘¨æœŸä¸­åˆ©ç”¨å¯è§†åŒ–ã€‚ç„¶è€Œå…¶å¯è§†åŒ–æ•ˆæœå¦‚ä½•ä»æœ‰å¾…è§‚å¯Ÿã€‚</p>
<h2 id="3-æŒ‘æˆ˜é›†"><a href="#3-æŒ‘æˆ˜é›†" class="headerlink" title="3. æŒ‘æˆ˜é›†"></a>3. æŒ‘æˆ˜é›†</h2><p>NLPä¸­çš„å¤§å¤šæ•°åŸºå‡†æ•°æ®é›†å‡æ¥è‡ªæ–‡æœ¬è¯­æ–™åº“ï¼Œåæ˜ äº†è¯­è¨€ç°è±¡çš„è‡ªç„¶é¢‘ç‡åˆ†å¸ƒã€‚å°½ç®¡åœ¨å®è·µä¸­å¯¹äºå¹³å‡æƒ…å†µä¸‹è¯„ä¼°ç³»ç»Ÿæ€§èƒ½å¾ˆæœ‰ç”¨ï¼Œä½†æ­¤ç±»æ•°æ®é›†å¯èƒ½æ— æ³•æ•è·æ›´å¹¿æ³›çš„ç°è±¡ã€‚</p>
<p>å¦ä¸€ç§è¯„ä¼°æ¡†æ¶ç”±æŒ‘æˆ˜é›†æ„æˆï¼Œä¹Ÿç§°ä¸ºæµ‹è¯•å¥—ä»¶ï¼ˆtest suitesï¼‰ï¼Œå·²ç»åœ¨NLPä¸­ä½¿ç”¨äº†å¾ˆé•¿æ—¶é—´ï¼ˆLehmannç­‰ï¼Œ1996ï¼‰ï¼Œå°¤å…¶æ˜¯è¯„ä¼°æœºå™¨ç¿»è¯‘ç³»ç»Ÿï¼ˆKingå’ŒFalkedalï¼Œ1990ï¼›Isaharaï¼Œ1995ï¼›Kohç­‰ï¼Œ2001ï¼‰ã€‚</p>
<p>Lehmannç­‰ï¼ˆ1996å¹´ï¼‰æŒ‡å‡ºäº†æµ‹è¯•å¥—ä»¶çš„å‡ ä¸ªå…³é”®ç‰¹æ€§ï¼š<strong>ç³»ç»Ÿæ€§ï¼Œå¯¹æ•°æ®çš„æ§åˆ¶ï¼Œå¦å®šæ•°æ®çš„åŒ…å«ä»¥åŠç©·ä¸¾æ€§</strong>ã€‚</p>
<blockquote>
<p>è¿™ä¸€é¢†åŸŸå› ä¸ºç»Ÿè®¡NLPç³»ç»Ÿçš„å¤§è§„æ¨¡é‡åŒ–è¯„ä¼°æ–¹æ³•çš„æµè¡Œè€Œæ²‰å¯‚äº†ä¸€æ®µæ—¶é—´ã€‚</p>
</blockquote>
<p>æŒ‘æˆ˜æ•°æ®é›†å¯ä»¥æŒ‰ç…§ä»»åŠ¡ï¼Œè¯­è¨€ç°è±¡ï¼Œè¯­è¨€ï¼Œè§„æ¨¡ï¼Œæ„é€ æ–¹æ³•ï¼Œä»¥åŠè¯„ä¼°æ–¹æ³•ç­‰æ ‡å‡†è¿›è¡Œåˆ†ç±»ï¼Œå¦‚ä¸‹è¡¨ï¼š</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/GNpj5fw72EqiccKOqVfMxVaHMdiaIOIFpcjyyJPH0NA0gO0cBCz8XoicKGg7wLUK8v98sxfcd1wl5yUJN94gyFOeA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<h3 id="æŒ‰ä»»åŠ¡åˆ†ç±»"><a href="#æŒ‰ä»»åŠ¡åˆ†ç±»" class="headerlink" title="æŒ‰ä»»åŠ¡åˆ†ç±»"></a>æŒ‰ä»»åŠ¡åˆ†ç±»</h3><p>æŒ‘æˆ˜é›†ä¸­é’ˆå¯¹æœ€å¤šçš„ä»»åŠ¡æ˜¯è‡ªç„¶è¯­è¨€æ¨æ–­ï¼ˆNLIï¼‰å’Œæœºå™¨ç¿»è¯‘ï¼ˆMTï¼‰ï¼šä¸€æ–¹é¢è¿™äº›ä»»åŠ¡çš„æ¨¡å‹å¤šï¼Œå¦ä¸€æ–¹é¢è¿™äº›ä»»åŠ¡æ¶‰åŠå„ç§è¯­è¨€æ°´å¹³ï¼›è€Œå…¶ä»–ä¸€äº›é«˜çº§ä»»åŠ¡ï¼ˆå¦‚é˜…è¯»ç†è§£æˆ–é—®é¢˜è§£ç­”ï¼‰å¹¶æœªå¾—åˆ°è¶³å¤Ÿçš„é‡è§†ï¼Œå®ƒä»¬ä¹Ÿå¯èƒ½ä»ç²¾å¿ƒè®¾è®¡çš„æŒ‘æˆ˜é›†ä¸­è·ç›Šã€‚</p>
<p><strong>æŒ‘æˆ˜é›†ä¸»è¦çš„å·¥ä½œæ—¨åœ¨é€šè¿‡å°†åµŒå…¥æ¨¡å‹åœ¨å•è¯æˆ–å¥å­å¯¹ä¸Šè®¡ç®—çš„ç›¸ä¼¼æ€§ï¼Œä¸äººç±»ç›¸ä¼¼æ€§åˆ¤æ–­ç›¸å…³è”ï¼Œæ¥è¯„ä¼°åµŒå…¥æ¨¡å‹çš„è´¨é‡</strong>ã€‚</p>
<p>åŒ…å«æ­¤ç±»ç›¸ä¼¼æ€§è¯„åˆ†çš„æ•°æ®é›†é€šå¸¸ç”¨äºè¯„ä¼°å•è¯åµŒå…¥ï¼ˆFinkelsteinç­‰ï¼Œ2002ï¼›Bruniç­‰ï¼Œ2012ï¼›Hillç­‰ï¼Œ2015ï¼‰æˆ–å¥å­åµŒå…¥ï¼Œè¿™äº›æ•°æ®é›†ä¸­æœ‰è®¸å¤šåœ¨ç²—ç³™çš„çº§åˆ«ä¸Šè¯„ä¼°ç›¸ä¼¼æ€§ã€‚è¿˜æœ‰ä¸€äº›æ•°æ®é›†æä¾›äº†æ›´ç»†ç²’åº¦çš„è¯„ä¼°ï¼šä¾‹å¦‚ï¼Œä¸€äº›æ•°æ®é›†ä¸“ç”¨äºç‰¹å®šè¯ç±»ï¼Œå¦‚åŠ¨è¯ï¼ˆGerzç­‰ï¼Œ2016ï¼‰æˆ–ç¨€æœ‰è¯ï¼ˆLuongç­‰ï¼Œ2013ï¼‰ï¼Œæˆ–è¯„ä¼°å¥å­åµŒå…¥ä¸­çš„æˆåˆ†çŸ¥è¯†ï¼ˆMarelliç­‰ï¼Œ2014ï¼‰ç­‰ï¼›è¿˜æœ‰æ•°æ®é›†æ”¶é›†äº†å¤šè¯­è¨€å’Œè·¨è¯­è¨€ç‰ˆæœ¬ï¼ˆLeviantå’ŒReichartï¼Œ2015å¹´; Cerç­‰äººï¼Œ2017å¹´ï¼‰ã€‚</p>
<p>å°½ç®¡è¿™äº›æ•°æ®é›†è¢«å¹¿æ³›ä½¿ç”¨ï¼Œä½†è¿™ç§è¯„ä¼°ç”±äºå…¶ä¸»è§‚æ€§ä»¥åŠä¸ä¸‹æ¸¸ç»©æ•ˆçš„å¯ç–‘ç›¸å…³æ€§è€Œå—åˆ°æ‰¹è¯„ï¼ˆFaruqui et alï¼Œ2016ï¼‰ã€‚</p>
<h3 id="æŒ‰è¯­è¨€ç°è±¡åˆ†ç±»"><a href="#æŒ‰è¯­è¨€ç°è±¡åˆ†ç±»" class="headerlink" title="æŒ‰è¯­è¨€ç°è±¡åˆ†ç±»"></a>æŒ‰è¯­è¨€ç°è±¡åˆ†ç±»</h3><p>æŒ‘æˆ˜é›†çš„ä¸»è¦ç›®æ ‡ä¹‹ä¸€æ˜¯<strong>è¯„ä¼°æ¨¡å‹å¤„ç†ç‰¹å®šè¯­è¨€ç°è±¡çš„èƒ½åŠ›</strong>ã€‚</p>
<p>æ—©æœŸçš„ç ”ç©¶å¼ºè°ƒç©·ä¸¾æ€§ï¼ˆCooperç­‰ï¼Œ1996ï¼›Lehmannç­‰ï¼Œ1996ï¼‰ï¼Œè€Œæœ€è¿‘çš„ç ”ç©¶åˆ™å€¾å‘äºå…³æ³¨ä¸€äº›æ„Ÿå…´è¶£çš„ç‰¹æ€§ï¼šä¾‹å¦‚ï¼ŒSennrichï¼ˆ2017ï¼‰ä¸ºMTè¯„ä¼°å¼•å…¥äº†ä¸€ä¸ªæŒ‘æˆ˜é›†ï¼Œè¯¥æŒ‘æˆ˜é›†ç€é‡äº5ä¸ªå±æ€§ï¼šä¸»è¯­ä¸€è‡´ï¼Œåè¯çŸ­è¯­ä¸€è‡´ï¼ŒåŠ¨è¯ç»“æ„ï¼Œææ€§å’ŒéŸ³è¯‘ã€‚å¯¹å½¢æ€å­¦çš„MTæŒ‘æˆ˜é›†ç•¥ä¸ºè¯¦ç»†é˜è¿°ï¼ŒåŒ…æ‹¬14ç§å½¢æ€å­¦ç‰¹å¾ï¼ˆBurlotå’ŒYvonï¼Œ2017å¹´ï¼‰ã€‚å…¶ä»–æŒ‘æˆ˜é›†æ¶µç›–äº†æ›´å¤šç§è¯­è¨€å±æ€§ï¼šä¾‹å¦‚ï¼Œåœ¨Cooperç­‰äººä¸­æ‰©å±•ç±»åˆ«ï¼ˆ1996å¹´ï¼‰ï¼Œé’ˆå¯¹NLIçš„GLUEåˆ†æé›†æ¶µç›–äº†å››ä¸ªç²—ç•¥ç±»åˆ«ï¼ˆè¯æ±‡è¯­ä¹‰ï¼Œè°“è¯­-è‡ªå˜é‡ç»“æ„ï¼Œé€»è¾‘å’ŒçŸ¥è¯†ï¼‰ä¸­çš„30å¤šç§ç°è±¡ã€‚åœ¨MTè¯„ä¼°ä¸­ï¼ŒBurchardtç­‰äººï¼ˆ2017ï¼‰ä½¿ç”¨è¦†ç›–120ç§ç°è±¡çš„å¤§å‹æµ‹è¯•å¥—ä»¶æŠ¥å‘Šäº†ç»“æœï¼Œéƒ¨åˆ†åŸºäºLehmannç­‰ï¼ˆ1996ï¼‰ï¼ŒIsabelleç­‰ï¼ˆ2017ï¼‰å’ŒIsabelle and Kuhnï¼ˆ2018ï¼‰ä¸ºMTè¯„ä¼°å‡†å¤‡äº†æŒ‘æˆ˜é›†ï¼Œæ¶µç›–äº†è¯ç´ å¥æ³•ï¼Œå¥æ³•å’Œè¯æ³•å±‚é¢çš„ç»†ç²’åº¦ç°è±¡ã€‚</p>
<p>é€šå¸¸ï¼Œä»¥ç¼–ç¨‹æ–¹å¼æ„å»ºçš„æ•°æ®é›†å€¾å‘äºæ¶µç›–è¾ƒå°‘çš„ç»†ç²’åº¦è¯­è¨€å±æ€§ï¼Œè€Œæ‰‹åŠ¨æ„å»ºçš„æ•°æ®é›†åˆ™è¡¨ç¤ºæ›´å¤šç§ç°è±¡ã€‚</p>
<h3 id="æŒ‰è¯­è¨€åˆ†ç±»"><a href="#æŒ‰è¯­è¨€åˆ†ç±»" class="headerlink" title="æŒ‰è¯­è¨€åˆ†ç±»"></a>æŒ‰è¯­è¨€åˆ†ç±»</h3><p>ä¸å¹¸çš„æ˜¯ï¼Œåœ¨è®¸å¤šNLPå·¥ä½œä¸­ï¼Œå¤§å¤šæ•°æŒ‘æˆ˜é›†éƒ½æ˜¯è‹±è¯­ã€‚è¿™ç§æƒ…å†µåœ¨MTè¯„ä¼°ä¸­è¦å¥½ä¸€äº›ï¼Œå› ä¸ºè‡ªç„¶è€Œç„¶æ‰€æœ‰æ•°æ®é›†éƒ½å…·æœ‰å…¶ä»–è¯­è¨€ã€‚æ˜¾ç„¶ï¼Œéè‹±è¯­è¯­è¨€åœ¨MTä»»åŠ¡è¿˜æœ‰æ›´å¤šçš„å‘å±•ç©ºé—´ã€‚ä½†æ˜¯ï¼Œä¹Ÿè®¸åœ¨å…¶ä»–ä»»åŠ¡ä¸Šæ›´è¿«åˆ‡çš„éœ€è¦å¤§å‹éè‹±è¯­æ•°æ®é›†æ¥å¼€å‘æµè¡Œçš„NLPä»»åŠ¡çš„ç¥ç»æ¨¡å‹ã€‚</p>
<h3 id="æŒ‰è§„æ¨¡åˆ†ç±»"><a href="#æŒ‰è§„æ¨¡åˆ†ç±»" class="headerlink" title="æŒ‰è§„æ¨¡åˆ†ç±»"></a>æŒ‰è§„æ¨¡åˆ†ç±»</h3><p>ç°æœ‰çš„æŒ‘æˆ˜é›†çš„å¤§å°å·®å¼‚å¾ˆå¤§ï¼šæ‰‹å·¥æ„å»ºçš„æ•°æ®é›†è¾ƒå°ï¼Œå…¸å‹å¤§å°ä¸ºæ•°ç™¾ä¸ªï¼Œå°‘è§ä¸Šä¸‡ï¼›è‡ªåŠ¨æ„å»ºçš„æ•°æ®é›†è¦å¤§å¾—å¤šï¼ŒèŒƒå›´ä»æ•°åƒåˆ°è¿‘åä¸‡ï¼ˆSennrichï¼Œ2017ï¼‰ï¼Œç”šè‡³è¶…è¿‡ä¸€ç™¾ä¸‡ä¸ªæ ·æœ¬ï¼ˆLinzenç­‰äººï¼Œ2016ï¼‰ã€‚åœ¨åä¸€ç§æƒ…å†µä¸‹ï¼Œä½œè€…è®¤ä¸ºéœ€è¦å¦‚æ­¤å¤§çš„æµ‹è¯•é›†æ‰èƒ½è·å¾—è¶³å¤Ÿçš„ç½•è§æƒ…å†µè¡¨ç¤ºã€‚</p>
<h3 id="æŒ‰æ„é€ æ–¹æ³•åˆ†ç±»"><a href="#æŒ‰æ„é€ æ–¹æ³•åˆ†ç±»" class="headerlink" title="æŒ‰æ„é€ æ–¹æ³•åˆ†ç±»"></a>æŒ‰æ„é€ æ–¹æ³•åˆ†ç±»</h3><p>æŒ‘æˆ˜é›†ä¸€èˆ¬è¦ä¹ˆç”±ç¼–ç¨‹æ–¹å¼åˆ›å»ºï¼Œè¦ä¹ˆé€šè¿‡æ‰‹å·¥åˆ¶ä½œç‰¹å®šç¤ºä¾‹ä»¥æ‰‹åŠ¨åˆ›å»ºã€‚</p>
<p>é€šå¸¸ï¼ŒåŠè‡ªåŠ¨æ–¹æ³•ç”¨äºç¼–è¯‘ç¤ºä¾‹çš„åˆå§‹åˆ—è¡¨ï¼Œè¿™äº›ç¤ºä¾‹ç”±æ³¨é‡Šè€…æ‰‹åŠ¨éªŒè¯ã€‚å…·ä½“æ–¹æ³•è¿˜å½±å“è¯­è¨€ä½¿ç”¨çš„ç§ç±»ä»¥åŠç¤ºä¾‹çš„è‡ªç„¶æ€§æˆ–äººå·¥/ç»¼åˆæ€§ã€‚ç›®å‰ä¸»æµæ–¹æ¡ˆå¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>é€šè¿‡ä¿®æ”¹æˆ–ä»ç°æœ‰æ•°æ®é›†ä¸­æå–ç¤ºä¾‹æ¥æ„é€ æ•°æ®é›†</strong>ã€‚ä¾‹å¦‚ï¼ŒSanchezç­‰ï¼ˆ2018ï¼‰å’ŒGlocknerç­‰äººï¼ˆ2018å¹´ï¼‰ä»SNLIä¸­æå–äº†ç¤ºä¾‹ï¼ˆBowmanç­‰äººï¼Œ2015å¹´ï¼‰ï¼Œå¹¶æ›¿æ¢äº†ç‰¹å®šè¯ï¼ˆå¦‚ä¸Šä½è¯ï¼ŒåŒä¹‰è¯å’Œåä¹‰è¯ï¼‰ï¼Œç„¶åè¿›è¡Œäº†æ‰‹åŠ¨éªŒè¯ã€‚Linzenç­‰ï¼ˆ2016ï¼‰ä½¿ç”¨å¯å‘å¼æ–¹æ³•ä»åŸå§‹æ–‡æœ¬ä¸­æå–äº†ä¸»è¯­-åŠ¨è¯ä¸€è‡´çš„ç¤ºä¾‹ï¼Œä»è€Œå½¢æˆäº†ä¸€ä¸ªå¤§å‹æ•°æ®é›†ã€‚Gulordavaç­‰ï¼ˆ2018ï¼‰å°†å…¶æ‰©å±•åˆ°å…¶ä»–åè®®ç°è±¡ï¼Œä½†ä»–ä»¬ä¾èµ–äºæ ‘åº“ä¸­å¯ç”¨çš„å¥æ³•ä¿¡æ¯ï¼Œä»è€Œå¯¼è‡´æ•°æ®é›†æ›´å°ã€‚</li>
<li>ä¸€äº›æŒ‘æˆ˜é›†<strong>åˆ©ç”¨ç°æœ‰çš„æµ‹è¯•å¥—ä»¶ä½œä¸ºç¤ºä¾‹çš„ç›´æ¥æ¥æº</strong>ï¼ˆBurchardtç­‰ï¼Œ2017ï¼‰æˆ–<strong>æœç´¢ç›¸ä¼¼çš„è‡ªç„¶å­˜åœ¨çš„ç¤ºä¾‹</strong>ï¼ˆWangç­‰ï¼Œ2018aï¼‰ã€‚</li>
<li>Sennrichï¼ˆ2017ï¼‰å¼•å…¥äº†ä¸€ç§<strong>é€šè¿‡å¯¹æ¯”ç¿»è¯‘å¯¹è¯„ä¼°NMTç³»ç»Ÿ</strong>çš„æ–¹æ³•ï¼Œæ¨¡å‹ä¼°è®¡åæ˜ ç‰¹å®šè¯­è¨€ç‰¹æ€§çš„ä¸¤ç§å€™é€‰ç¿»è¯‘çš„æ¦‚ç‡ã€‚Sennriché€šè¿‡åº”ç”¨ç®€å•çš„è¯•æ¢æ³•ï¼ˆä¾‹å¦‚æ›´æ”¹æ€§åˆ«å’Œæ•°å­—ä»¥å¼•èµ·å‰åä¸ä¸€è‡´ï¼‰ä»¥ç¼–ç¨‹æ–¹å¼ç”Ÿæˆäº†æ­¤ç±»å¯¹ï¼Œä»è€Œå¾—åˆ°äº†æ¥è¿‘10ä¸‡ä¸ªç¤ºä¾‹çš„å¤§è§„æ¨¡æŒ‘æˆ˜é›†ã€‚ä½œè€…æ‰©å±•äº†è¯¥æ¡†æ¶ä»¥è¯„ä¼°å…¶ä»–å±æ€§ï¼Œä½†é€šå¸¸éœ€è¦æ›´å¤æ‚çš„ç”Ÿæˆæ–¹æ³•ï¼Œä¾‹å¦‚ä½¿ç”¨å½¢æ€åˆ†æä»ª/ç”Ÿæˆå™¨ï¼ˆBurlotå’ŒYvonï¼Œ2017ï¼‰æˆ–æ›´å¤šäººå·¥å‚ä¸ç”Ÿæˆï¼ˆBawdenç­‰ï¼Œ2018ï¼‰æˆ–éªŒè¯ï¼ˆRios Gonzalesç­‰ï¼Œ2017ï¼‰ã€‚</li>
<li>æœ€åï¼Œä¸€äº›ç ”ç©¶<strong>å®šä¹‰äº†æ¨¡æ¿ç”¨äºæ•è·äº†æŸäº›è¯­è¨€å±æ€§å¹¶ä½¿ç”¨å•è¯åˆ—è¡¨å°†å…¶å®ä¾‹åŒ–</strong>ï¼ˆDasguptaç­‰ï¼Œ2018ï¼›Rudingerç­‰ï¼Œ2018ï¼›Zhaoç­‰ï¼Œ2018aï¼‰ã€‚åŸºäºæ¨¡æ¿çš„ç”Ÿæˆå…·æœ‰æä¾›æ›´å¤šæ§åˆ¶ï¼ˆä¾‹å¦‚ç”¨äºè·å¾—ç‰¹å®šè¯æ±‡åˆ†å¸ƒï¼‰çš„ä¼˜åŠ¿ï¼Œä½†è¿™æ˜¯ä»¥ç‰ºç‰²ç¤ºä¾‹çš„è‡ªç„¶ç¨‹åº¦ä¸ºä»£ä»·çš„ã€‚</li>
</ul>
<h3 id="æŒ‰è¯„ä¼°æ–¹å¼åˆ†ç±»"><a href="#æŒ‰è¯„ä¼°æ–¹å¼åˆ†ç±»" class="headerlink" title="æŒ‰è¯„ä¼°æ–¹å¼åˆ†ç±»"></a>æŒ‰è¯„ä¼°æ–¹å¼åˆ†ç±»</h3><p>é€šå¸¸ï¼Œè¯„ä¼°æ¨¡å‹ç”¨å…¶åœ¨æŒ‘æˆ˜é›†ç¤ºä¾‹ä¸Šçš„æ€§èƒ½æ¥è¯„ä¼°ï¼Œè¦ä¹ˆä½¿ç”¨ä¸ç¬¬ä¸€é˜¶æ®µç”¨äºè¯„ä¼°ç³»ç»Ÿç›¸åŒçš„åº¦é‡æ ‡å‡†ï¼Œè¦ä¹ˆé€šè¿‡ä»£ç†è¿›è¡Œè¯„ä¼°ï¼Œå¦‚Sennrichï¼ˆ2017ï¼‰çš„å¯¹æ¯”å¯¹è¯„ä¼°ä¸­é‚£æ ·ã€‚</p>
<p>è‡ªåŠ¨è¯„ä¼°æŒ‡æ ‡çš„ä»£ä»·è¾ƒä½ï¼Œå¯ä»¥å¤§è§„æ¨¡è®¡ç®—ã€‚ä½†æ˜¯ï¼Œå¯èƒ½ä¼šç¼ºå°‘æŸäº›æ–¹é¢çš„æ•ˆæœã€‚å› æ­¤ï¼Œä¸€äº›ç ”ç©¶æŠ¥å‘Šäº†äººç±»å¯¹å…¶æŒ‘æˆ˜é›†çš„è¯„ä¼°ï¼Œä¾‹å¦‚åœ¨MTä¸­ï¼ˆIsabelleç­‰ï¼Œ2017; Burchardtç­‰ï¼Œ2017ï¼‰ã€‚</p>
<p>æ­¤å¤–ï¼Œæ ¹æ®æ¨¡å‹åœ¨æŒ‘æˆ˜é›†ä¸Šçš„è¡¨ç°æ¥åˆ¤æ–­æ¨¡å‹çš„è´¨é‡å¯èƒ½å¾ˆæ£˜æ‰‹ã€‚ä¸€äº›ä½œè€…å¼ºè°ƒï¼Œä»–ä»¬å¸Œæœ›åœ¨â€œè¶…å‡ºæ­£å¸¸è¿è¡Œèƒ½åŠ›â€çš„æç«¯æˆ–å›°éš¾æƒ…å†µä¸‹æµ‹è¯•ç³»ç»Ÿï¼ˆNaikç­‰äººï¼Œ2018ï¼‰ã€‚ä½†æ˜¯ï¼Œæ˜¯å¦åº”è¯¥æœŸæœ›ç³»ç»Ÿåœ¨ç‰¹æ®Šé€‰æ‹©çš„æƒ…å†µä¸‹ï¼ˆç›¸å¯¹äºä¸€èˆ¬æƒ…å†µï¼‰è¡¨ç°è‰¯å¥½ï¼Œå¯èƒ½å–å†³äºç›®æ ‡ï¼šä¸ºäº†æ›´å¥½åœ°çœ‹å¾…ç»“æœï¼Œå¯ä»¥å°†åŒä¸€ä»»åŠ¡çš„æ¨¡å‹ç»©æ•ˆä¸äººç±»ç»©æ•ˆè¿›è¡Œæ¯”è¾ƒï¼ˆGulordavaç­‰äººï¼Œ2018ï¼‰ã€‚</p>
<h2 id="4-å¯¹æŠ—æ ·æœ¬"><a href="#4-å¯¹æŠ—æ ·æœ¬" class="headerlink" title="4. å¯¹æŠ—æ ·æœ¬"></a>4. å¯¹æŠ—æ ·æœ¬</h2><p>è¦äº†è§£æ¨¡å‹ï¼Œè¿˜éœ€è¦äº†è§£å…¶å¤±è´¥ã€‚å°½ç®¡æœºå™¨å­¦ä¹ ç³»ç»Ÿåœ¨è®¸å¤šä»»åŠ¡ä¸Šéƒ½å–å¾—äº†æˆåŠŸï¼Œä½†å®ƒä»¬ä¹Ÿå¯¹æ¶æ„æ”»å‡»æˆ–å¯¹æŠ—æ€§ç¤ºä¾‹éå¸¸æ•æ„Ÿï¼ˆSzegedyç­‰ï¼Œ2014ï¼›Goodfellowç­‰ï¼Œ2015ï¼‰ã€‚åœ¨è§†è§‰é¢†åŸŸï¼Œå³ä½¿äººç±»æ— æ³•åˆ†è¾¨è¾“å…¥å›¾åƒçš„å¾®å°å˜åŒ–ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´åˆ†ç±»é”™è¯¯ã€‚</p>
<p>å¯¹æŠ—æ ·æœ¬çš„ç›®æ ‡åœ¨äºï¼Œå¯¹ç»™å®šçš„æ¨¡å‹ <em>f</em> å’Œè¾“å…¥æ ·æœ¬ xï¼Œæ‰¾åˆ°æ ·æœ¬ xâ€™ï¼Œå®ƒè¢«æ¨¡å‹é¢„æµ‹ä¸ºä¸åŒçš„ç±»åˆ«ï¼ŒåŒæ—¶ä¿æŒå’ŒåŸå§‹æ ·æœ¬å…·æœ‰æœ€å°çš„è·ç¦»ï¼š</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/GNpj5fw72EqiccKOqVfMxVaHMdiaIOIFpcgicuwGbxaMapMxPFYIcmjmicFKZSQRwt7iat2n0ibeG9SjNno16j3ArNJQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<p>åœ¨CVé¢†åŸŸï¼Œæ ·æœ¬æ”¹å˜é€šå¸¸æ˜¯å›¾åƒåƒç´ ï¼Œè®¡ç®—ä¸¤ä¸ªå›¾ç‰‡å‘é‡çš„å·®å€¼å¾ˆç®€å•ï¼Œå› ä¸ºæ•°å€¼è¿ç»­æ‰€ä»¥å¯ä»¥é€šè¿‡è®¡ç®—ç›¸å¯¹è¾“å…¥çš„æ¢¯åº¦æ¥è®¡ç®—å¾—åˆ°æ”¹å˜åçš„æ ·æœ¬ã€‚</p>
<p>åœ¨NLPé¢†åŸŸï¼Œè¾“å…¥æ˜¯ç¦»æ•£çš„ï¼ˆä¾‹å¦‚å•è¯åºåˆ—ï¼‰ï¼Œè¿™å¸¦æ¥äº†ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>å¦‚ä½•æµ‹é‡åŸå§‹ç¤ºä¾‹å’Œå¯¹æŠ—ç¤ºä¾‹ x å’Œ xâ€™ ä¹‹é—´çš„è·ç¦»ï¼Ÿ</li>
<li>å¦‚ä½•å°†æœ€å°åŒ–è¿™ä¸ªè·ç¦»è¡¨è¿°ä¸ºä¼˜åŒ–é—®é¢˜ï¼Ÿï¼ˆå› ä¸ºè¿™éœ€è¦è®¡ç®—æ”¹å˜ç›¸å¯¹äºç¦»æ•£è¾“å…¥çš„æ¢¯åº¦ï¼‰</li>
</ul>
<p>æœ¬æ–‡æŒ‰ç…§å¯¹æŠ—æ˜¯å¦å¯ä»¥å·²çŸ¥æ¨¡å‹ã€æ”»å‡»çš„ç›®çš„æ€§ã€ä¿®æ”¹å•ä½ã€æ”»å‡»çš„ä»»åŠ¡å¯¹å¯¹æŠ—æ–¹æ³•è¿›è¡Œåˆ†ç±»ï¼Œå¦‚ä¸‹è¡¨ï¼š</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/GNpj5fw72EqiccKOqVfMxVaHMdiaIOIFpcRqks0M0Chm5E8KYiaolADIYzT0ZibA1rxQgiaGdiaiaJNMLQneeSC0D1HMA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"></p>
<h3 id="æŒ‰å¯¹æŠ—æ˜¯å¦å·²çŸ¥æ¨¡å‹åˆ†ç±»"><a href="#æŒ‰å¯¹æŠ—æ˜¯å¦å·²çŸ¥æ¨¡å‹åˆ†ç±»" class="headerlink" title="æŒ‰å¯¹æŠ—æ˜¯å¦å·²çŸ¥æ¨¡å‹åˆ†ç±»"></a>æŒ‰å¯¹æŠ—æ˜¯å¦å·²çŸ¥æ¨¡å‹åˆ†ç±»</h3><p>å¯¹æŠ—æ¨¡å‹å¯ä»¥é€šè¿‡è®¿é—®æ¨¡å‹å‚æ•°ï¼ˆä¹Ÿç§°ä¸ºç™½ç›’æ”»å‡»ï¼‰æ¥ç”Ÿæˆå¯¹æŠ—æ€§ç¤ºä¾‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨é»‘ç›’æ”»å‡»æ¥è·å¾—å¯¹æŠ—æ€§ç¤ºä¾‹ï¼ˆPapernotç­‰ï¼Œ2016aï¼Œ2017ï¼›Narodytska and Kasiviswanathanï¼Œ2017ï¼›Liuç­‰ï¼Œ2017ï¼‰ ã€‚</p>
<p><strong>ç™½ç›’æ”»å‡»</strong>å¾ˆéš¾é€‚åº”æ–‡æœ¬ä¸–ç•Œï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸éœ€è¦å¯¹è¾“å…¥è®¡ç®—æ¢¯åº¦ï¼Œåœ¨æ–‡æœ¬æƒ…å†µä¸‹å¯èƒ½æ˜¯ç¦»æ•£çš„ã€‚åŒ…æ‹¬å¦‚ä¸‹æ–¹æ³•ï¼š</p>
<ul>
<li><strong>å¯¹è¾“å…¥è¯çš„åµŒå…¥è®¡ç®—æ¢¯åº¦ï¼Œå¹¶æ‰°åŠ¨åµŒå…¥</strong>ã€‚ç”±äºè¿™å¯èƒ½ä¼šå¯¼è‡´ä¸€ä¸ªä¸å¯¹åº”ä»»ä½•å•è¯çš„å‘é‡ï¼Œå› æ­¤äººä»¬å¯ä»¥æœç´¢åµŒå…¥ç»™å®šè¯å…¸ä¸­çš„æœ€è¿‘é‚»å•è¯ï¼ˆPapernotç­‰äººï¼Œ2016bï¼‰ï¼›Chengç­‰ï¼ˆ2018ï¼‰å°†è¿™ä¸ªæƒ³æ³•æ‰©å±•åˆ°seq2seqæ¨¡å‹ã€‚</li>
<li><strong>å¯¹è¾“å…¥è¯çš„åµŒå…¥è®¡ç®—æ¢¯åº¦ï¼Œä»¥è¯†åˆ«å’Œæ’åºè¦ä¿®æ”¹çš„è¯</strong>ï¼ˆSamantaå’ŒMehtaï¼Œ2017ï¼›Liangç­‰ï¼Œ2018ï¼‰ã€‚Ebrahimiç­‰ï¼ˆ2018bï¼‰å¼€å‘äº†ä¸€ç§æ›¿ä»£æ–¹æ³•ï¼Œè¯¥æ–¹æ³•é€šè¿‡åœ¨å‘é‡ç©ºé—´ä¸­è¡¨ç¤ºæ–‡æœ¬ç¼–è¾‘æ“ä½œï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªäºŒè¿›åˆ¶å‘é‡æ¥æŒ‡å®šå•è¯ä¸­çš„å“ªäº›å­—ç¬¦å°†è¢«æ›´æ”¹ï¼‰ï¼Œå¹¶æ²¿ç€è¯¥å‘é‡ç”¨å¯¼æ•°æ¥è¿‘ä¼¼æŸå¤±çš„å˜åŒ–ã€‚</li>
</ul>
<p>è€ƒè™‘åˆ°ä¸ºæ–‡æœ¬ç”Ÿæˆç™½ç›’å¯¹æŠ—æ€§ç¤ºä¾‹çš„å›°éš¾æ€§ï¼Œè®¸å¤šç ”ç©¶éƒ½è‡´åŠ›äºé»‘ç›’ç¤ºä¾‹ã€‚ä¸»è¦å·¥ä½œå¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>å—æ–‡æœ¬ç¼–è¾‘å¯å‘</strong>ï¼ˆè‡ªç„¶çš„æˆ–ç”±äººç±»æ™®éäº§ç”Ÿçš„ï¼Œä¾‹å¦‚é”™åˆ«å­—ï¼Œæ‹¼å†™é”™è¯¯ç­‰ï¼‰ï¼ˆSakaguchiç­‰äººï¼Œ2017ï¼›Heigoldç­‰äººï¼Œ2018ï¼›Belinkovå’ŒBiskï¼Œ2018ï¼‰ã€‚Gaoç­‰ï¼ˆ2018ï¼‰å®šä¹‰äº†è¯„åˆ†å‡½æ•°ä»¥è¯†åˆ«è¦ä¿®æ”¹çš„è¯è¯­ã€‚å‡½æ•°ä¸éœ€è¦è®¿é—®æ¨¡å‹å†…éƒ¨ï¼Œä½†æ˜¯éœ€è¦æ¨¡å‹é¢„æµ‹åˆ†æ•°ã€‚åœ¨è¯†åˆ«äº†é‡è¦æ ‡è®°ä¹‹åï¼Œå®ƒä»¬ä½¿ç”¨å¸¸è§çš„ç¼–è¾‘æ“ä½œæ¥ä¿®æ”¹å­—ç¬¦ã€‚</li>
<li>Zhaoç­‰ï¼ˆ2018cï¼‰ä½¿ç”¨<strong>ç”Ÿæˆå¯¹æŠ—ç½‘ç»œ</strong>ï¼ˆGANï¼‰ï¼ˆGoodfellow et alï¼Œ2014ï¼‰æ¥æœ€å°åŒ–è¾“å…¥çš„æ½œåœ¨è¡¨ç¤ºå’Œå¯¹æŠ—æ€§ç¤ºä¾‹ä¹‹é—´çš„è·ç¦»ï¼Œ<strong>å¹¶åœ¨æ½œåœ¨ç©ºé—´ä¸­è¿›è¡Œæ‰°åŠ¨</strong>ã€‚ç”±äºæ½œåœ¨è¡¨ç¤ºä¸éœ€è¦æ¥è‡ªå—æ”»å‡»çš„æ¨¡å‹ï¼Œå› æ­¤è¿™æ˜¯é»‘ç›’æ”»å‡»ã€‚</li>
<li>Alzantotç­‰ï¼ˆ2018å¹´ï¼‰å¼€å‘äº†ä¸€ç§æœ‰è¶£çš„<strong>åŸºäºäººå£çš„é—ä¼ ç®—æ³•</strong>ï¼Œå¯é€šè¿‡ä¿ç•™åŸå§‹å¥å­çš„ä¿®é¥°è¯­ç¾¤ä½“å¹¶è¯„ä¼°æ¯ä¸€ä»£çš„ä¿®é¥°è¯­é€‚åˆåº¦æ¥åˆ¶ä½œæ–‡æœ¬åˆ†ç±»çš„å¯¹æŠ—æ€§ç¤ºä¾‹ã€‚ä»–ä»¬ä¸éœ€è¦è®¿é—®æ¨¡å‹å‚æ•°ï¼Œä½†æ˜¯ä¼šä½¿ç”¨é¢„æµ‹åˆ†æ•°ã€‚Kuleshovç­‰äººæå‡ºäº†ç±»ä¼¼çš„æƒ³æ³•ï¼ˆ2018ï¼‰ã€‚</li>
</ul>
<h3 id="æŒ‰æ”»å‡»çš„ç›®çš„æ€§åˆ†ç±»"><a href="#æŒ‰æ”»å‡»çš„ç›®çš„æ€§åˆ†ç±»" class="headerlink" title="æŒ‰æ”»å‡»çš„ç›®çš„æ€§åˆ†ç±»"></a>æŒ‰æ”»å‡»çš„ç›®çš„æ€§åˆ†ç±»</h3><p>å¯¹æŠ—æ€§æ”»å‡»å¯ä»¥åˆ†ä¸ºå®šå‘æ”»å‡»å’Œéå®šå‘æ”»å‡»ï¼ˆYuanç­‰äººï¼Œ2017ï¼‰ã€‚</p>
<p>å…¶ä¸­ï¼Œå®šå‘æ”»å‡»æŒ‡å®šäº†ç‰¹å®šçš„é”™è¯¯ç±»åˆ« <img src="https://mmbiz.qpic.cn/mmbiz_svg/Ib5852jAyb82RBBvOrn3mh8z9ibBibZ1Mh3DPibCAh2zgdXYVCXvaySlvHLgibGujNBVJQv3t5M2icicicrLgFTN6ZOGSx1WicUlwYXF/640?wx_fmt=svg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"> ï¼Œè€Œéç›®æ ‡æ”»å‡»ä»…å…³å¿ƒé¢„æµ‹çš„ç±»åˆ«æ˜¯é”™è¯¯çš„ï¼Œ <img src="https://mmbiz.qpic.cn/mmbiz_svg/Ib5852jAyb82RBBvOrn3mh8z9ibBibZ1MhSJUgbQeBnJafzqv7D54GETp9EIsuGSm1oQ61aicaO3mx0J8fe7cdibbia5a4URBF6DD/640?wx_fmt=svg&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img"> ã€‚å®šå‘æ”»å‡»å¾ˆéš¾ç”Ÿæˆï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸éœ€è¦äº†è§£æ¨¡å‹å‚æ•°ï¼Œå³ï¼Œå®ƒä»¬æ˜¯ç™½ç›’æ”»å‡»ã€‚å¤§å¤šæ•°å¯¹æŠ—ç¤ºä¾‹éƒ½æ˜¯éé’ˆå¯¹æ€§çš„ï¼Œè€Œä¸€äº›é’ˆå¯¹æ€§çš„æ”»å‡»åŒ…æ‹¬Liangç­‰ ï¼ˆ2018aï¼‰å’ŒChenç­‰ï¼ˆ2018aï¼‰ï¼Œåè€…æŒ‡å®šäº†åœ¨å›¾åƒå­—å¹•æ¨¡å‹ä¸­ç”Ÿæˆçš„å•è¯æˆ–å­—å¹•ã€‚å…¶ä»–å®šå‘æ”»å‡»æ¨¡å‹åˆ™åœ¨æ”»å‡»seq2seqæ¨¡å‹æ—¶å°†ç‰¹å®šå•è¯æŒ‡å®šä¸ºçœç•¥ï¼Œæ›¿æ¢æˆ–åŒ…å«ï¼ˆChengç­‰äººï¼Œ2018; Ebrahimiç­‰äººï¼Œ2018aï¼‰ã€‚</p>
<p>åœ¨NLPä¸­äº§ç”Ÿå®šå‘æ”»å‡»çš„æ–¹æ³•å¯èƒ½ä¼šä»å…¶ä»–é¢†åŸŸçš„å¯¹æŠ—æ€§æ”»å‡»ä¸­è·å¾—æ›´å¤šå¯å‘ã€‚ä¾‹å¦‚ï¼Œåœ¨æ”»å‡»æ¶æ„è½¯ä»¶æ£€æµ‹ç³»ç»Ÿä¸­ï¼Œå¤šé¡¹ç ”ç©¶åœ¨é»‘ç›’æƒ…å†µä¸‹å¼€å‘äº†é’ˆå¯¹æ€§æ”»å‡»ï¼ˆYuanç­‰äººï¼Œ2017ï¼‰ã€‚Zhaoç­‰äººæå‡ºäº†é’ˆå¯¹MTçš„é»‘åŒ£å­é’ˆå¯¹æ€§æ”»å‡»ï¼ˆ2018cï¼‰ï¼Œä»–ä½¿ç”¨å¯¹æŠ—æ€§æ­£åˆ™åŒ–è‡ªåŠ¨ç¼–ç å™¨å°†å¥å­æ˜ å°„åˆ°è¿ç»­ç©ºé—´åï¼Œä½¿ç”¨GANæ¥æœç´¢å¯¹Google MTç³»ç»Ÿçš„æ”»å‡»ï¼ˆZhaoç­‰äººï¼Œ2018bï¼‰ã€‚</p>
<h3 id="æŒ‰ä¿®æ”¹çš„å•ä½åˆ†ç±»"><a href="#æŒ‰ä¿®æ”¹çš„å•ä½åˆ†ç±»" class="headerlink" title="æŒ‰ä¿®æ”¹çš„å•ä½åˆ†ç±»"></a>æŒ‰ä¿®æ”¹çš„å•ä½åˆ†ç±»</h3><p>å¯¹æŠ—æ–‡æœ¬ç¤ºä¾‹çš„å¤§éƒ¨åˆ†å·¥ä½œéƒ½æ¶‰åŠå­—ç¬¦å’Œ/æˆ–å•è¯çº§åˆ«çš„ä¿®æ”¹ï¼Œå…¶ä»–è½¬æ¢åŒ…æ‹¬æ·»åŠ å¥å­æˆ–æ–‡æœ¬å—ï¼ˆJia and Liangï¼Œ2017ï¼‰æˆ–ç”Ÿæˆå…·æœ‰æ‰€éœ€å¥æ³•ç»“æ„çš„å¤è¿°ï¼ˆIyyerç­‰äººï¼Œ2018ï¼‰ã€‚åœ¨å›¾åƒå­—å¹•ä¸­ï¼ŒChenç­‰äººï¼ˆ2018aï¼‰åœ¨è¾“å…¥å›¾åƒä¸­ä¿®æ”¹åƒç´ ä»¥å¯¹å­—å¹•æ–‡æœ¬äº§ç”Ÿé’ˆå¯¹æ€§çš„æ”»å‡»ã€‚</p>
<h3 id="æŒ‰å¯¹æŠ—ä»»åŠ¡åˆ†ç±»"><a href="#æŒ‰å¯¹æŠ—ä»»åŠ¡åˆ†ç±»" class="headerlink" title="æŒ‰å¯¹æŠ—ä»»åŠ¡åˆ†ç±»"></a>æŒ‰å¯¹æŠ—ä»»åŠ¡åˆ†ç±»</h3><p>é€šå¸¸ï¼Œå¤§å¤šæ•°åœ¨NLPä¸­å¯¹æŠ—ç¤ºä¾‹çš„å·¥ä½œéƒ½é›†ä¸­åœ¨ç›¸å¯¹é«˜çº§çš„è¯­è¨€ç†è§£ä»»åŠ¡ä¸Šï¼Œä¾‹å¦‚æ–‡æœ¬åˆ†ç±»ï¼ˆåŒ…æ‹¬æƒ…æ„Ÿåˆ†æï¼‰å’Œé˜…è¯»ç†è§£ï¼Œè€Œæ–‡æœ¬ç”Ÿæˆçš„å·¥ä½œä¸»è¦é›†ä¸­åœ¨MTã€‚</p>
<p>é™¤äº†å½¢æ€æ ‡è®°ï¼ˆHeigoldç­‰äººï¼Œ2018ï¼‰å’Œæ‹¼å†™æ ¡æ­£ï¼ˆSakaguchiç­‰äººï¼Œ2017ï¼‰ç­‰å°‘æ•°å·¥ä½œï¼Œå¯¹æŠ—æ ·æœ¬å´å¾ˆå°‘é’ˆå¯¹æ›´åº•å±‚çš„è¯­è¨€å¤„ç†ä»»åŠ¡ã€‚</p>
<h3 id="å¯¹æŠ—æ ·æœ¬çš„è¿è´¯æ€§å’Œæ”¹å˜é‡çš„è¯„ä¼°æ–¹å¼"><a href="#å¯¹æŠ—æ ·æœ¬çš„è¿è´¯æ€§å’Œæ”¹å˜é‡çš„è¯„ä¼°æ–¹å¼" class="headerlink" title="å¯¹æŠ—æ ·æœ¬çš„è¿è´¯æ€§å’Œæ”¹å˜é‡çš„è¯„ä¼°æ–¹å¼"></a>å¯¹æŠ—æ ·æœ¬çš„è¿è´¯æ€§å’Œæ”¹å˜é‡çš„è¯„ä¼°æ–¹å¼</h3><p>åœ¨å¯¹æŠ—å›¾åƒæ ·æœ¬ä¸­ï¼Œé€šè¿‡æµ‹é‡åƒç´ ç©ºé—´ä¸­çš„è·ç¦»æ¥æµ‹é‡æ‰°åŠ¨æ˜¯ç›¸å½“ç®€å•çš„ï¼Œå¯ä»¥ä½¿ç”¨æŸäº›æ­£åˆ™åŒ–æ–¹æ³•ï¼Œæˆ–é‡‡ç”¨ä¸äººç±»æ„ŸçŸ¥æ›´å¥½ç›¸å…³çš„æ›¿ä»£æªæ–½ï¼ˆRozsaç­‰ï¼Œ2016ï¼‰ã€‚å‘ˆç°å¯¹æŠ—å›¾åƒä¸æºå›¾åƒä¹‹é—´æ²¡æœ‰æ˜æ˜¾å·®å¼‚çš„è§†è§‰æ•ˆæœä¹Ÿä»¤äººä¿¡æœã€‚</p>
<p>è€Œåœ¨æ–‡æœ¬åŸŸä¸­ï¼Œè·ç¦»çš„æµ‹é‡ä¸æ˜¯é‚£ä¹ˆç®€å•ï¼Œäººç±»ç”šè‡³å¯ä»¥æ„Ÿè§‰åˆ°æ–‡æœ¬çš„å¾ˆå°å˜åŒ–ã€‚å› æ­¤ï¼Œå¯¹æ”»å‡»çš„è¯„ä¼°ç›¸å½“æ£˜æ‰‹ã€‚ä¸€äº›ç ”ç©¶å¯¹å¯¹æŠ—æ ·æœ¬æ–½åŠ äº†é™åˆ¶ï¼Œä½¿å…¶å…·æœ‰å°‘é‡çš„ç¼–è¾‘æ“ä½œï¼ˆGaoç­‰äººï¼Œ2018ï¼‰ã€‚å…¶ä»–äººåˆ™ä»¥ä¸åŒçš„æ–¹å¼ç¡®ä¿å¥æ³•æˆ–è¯­ä¹‰ä¸Šçš„è¿è´¯æ€§ï¼Œä¾‹å¦‚é€šè¿‡å•è¯ç›¸ä¼¼æ€§æˆ–å¥å­ç›¸ä¼¼æ€§è¿‡æ»¤æ›¿æ¢ï¼ˆAlzantotç­‰äººï¼Œ2018ï¼›Kuleshovç­‰äººï¼Œ2018ï¼‰ï¼Œæˆ–ä½¿ç”¨åŒä¹‰è¯å’Œå…¶ä»–å•è¯è¡¨ï¼ˆSamantaå’ŒMehtaï¼Œ2017ï¼›Yangç­‰ï¼Œ2018ï¼‰ã€‚</p>
<p>ä¸€äº›äººæŠ¥å‘Šäº†äººç±»æ˜¯å¦å¯ä»¥æ­£ç¡®åœ°å°†å¯¹æŠ—æ€§ç¤ºä¾‹åˆ†ç±»ï¼ˆYangç­‰äººï¼Œ2018ï¼‰ï¼Œä½†è¿™å¹¶æœªè¡¨æ˜å˜åŒ–çš„å¯æ„ŸçŸ¥æ€§ã€‚æ›´å¤šä¿¡æ¯ä¸°å¯Œçš„äººç ”ç©¶è¯„ä¼°äº†å¯¹æŠ—æ€§ç¤ºä¾‹ä¸åŸå§‹ç¤ºä¾‹çš„è¯­æ³•ç›¸ä¼¼æ€§æˆ–ç›¸ä¼¼æ€§ï¼ˆZhaoç­‰äººï¼Œ2018cï¼›Alzantotç­‰äººï¼Œ2018ï¼‰ã€‚è€ƒè™‘åˆ°åœ¨æ–‡æœ¬ä¸­äº§ç”Ÿéš¾ä»¥å¯Ÿè§‰çš„å˜åŒ–çš„å›ºæœ‰å›°éš¾ï¼Œéœ€è¦æ›´å¤šè¿™æ ·çš„è¯„ä¼°ã€‚</p>
<h2 id="5-è§£é‡Šæ¨¡å‹é¢„æµ‹"><a href="#5-è§£é‡Šæ¨¡å‹é¢„æµ‹" class="headerlink" title="5. è§£é‡Šæ¨¡å‹é¢„æµ‹"></a>5. è§£é‡Šæ¨¡å‹é¢„æµ‹</h2><blockquote>
<p>è¿™ä¸€éƒ¨åˆ†æ˜¯å…³äºExplainabilityï¼Œå’ŒInterpretabilityæœ‰äº›å¾®å¦™çš„åŒºåˆ«ã€‚</p>
</blockquote>
<p>è§£é‡Šç‰¹å®šçš„é¢„æµ‹è¢«è®¤ä¸ºæ˜¯å¯è§£é‡Šå·¥ä½œçš„ä¸€ä¸ªè¿«åˆ‡çš„ç—›ç‚¹ï¼ˆLiptonï¼Œ2016å¹´ï¼‰ï¼Œå®ƒè¢«è®¤ä¸ºå¢åŠ äº†æœºå™¨å­¦ä¹ ç³»ç»Ÿçš„å¯é æ€§ï¼ˆDoshi-Velezç­‰äººï¼Œ2017å¹´ï¼‰ã€‚ä½†æ˜¯ï¼Œè§£é‡Šä¸ºä»€ä¹ˆæ·±åº¦éå¸¸æ·±ï¼Œé«˜åº¦éçº¿æ€§çš„ç¥ç»ç½‘ç»œåšå‡ºä¸€å®šçš„é¢„æµ‹å¹¶éæ˜“äº‹ã€‚</p>
<ul>
<li>ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯<strong>è¦æ±‚æ¨¡å‹ç”Ÿæˆä¸ä¸»è¦é¢„æµ‹ä¸€èµ·çš„è§£é‡Š</strong>ï¼ˆZaidanç­‰ï¼Œ2007ï¼›Zhangç­‰ï¼Œ2016ï¼‰ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•éœ€è¦äººå·¥æ³¨é‡Šè§£é‡Šï¼Œè¿™å¯èƒ½å¾ˆéš¾æ”¶é›†ã€‚</li>
<li>ä¸€ç§æ›¿ä»£æ–¹æ³•æ˜¯<strong>ä½¿ç”¨éƒ¨åˆ†è¾“å…¥ä½œä¸ºè§£é‡Š</strong>ã€‚ä¾‹å¦‚ï¼ŒLeiç­‰ï¼ˆ2016ï¼‰å®šä¹‰äº†ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œè¯¥ç”Ÿæˆå™¨å­¦ä¹ æ–‡æœ¬ç‰‡æ®µä¸Šçš„åˆ†å¸ƒä½œä¸ºè¯æ˜é¢„æµ‹çš„åˆç†ä¾æ®ï¼Œå¹¶æ ¹æ®æƒ…æ„Ÿåˆ†æè¿›è¡Œè¯„ä¼°ã€‚Alvarez-Meliså’ŒJaakkolaï¼ˆ2017ï¼‰é€šè¿‡æ‰°åŠ¨è¾“å…¥å¹¶æ‰¾åˆ°æœ€ç›¸å…³çš„å…³è”ï¼Œåœ¨åºåˆ—åˆ°åºåˆ—çš„å­¦ä¹ åœºæ™¯ä¸­å‘ç°äº†è¾“å…¥-è¾“å‡ºå…³è”ã€‚Guptaå’ŒSchÃ¼tzeï¼ˆ2018ï¼‰ç ”ç©¶äº†å¦‚ä½•åœ¨RNNä¸­ç§¯ç´¯ä¿¡æ¯ä»¥è¿›è¡Œé¢„æµ‹ï¼Œä»¥åŠé¢„æµ‹åˆ†æ•°ä¸é‡è¦è¾“å…¥æ®µçš„å…³è”å³°å€¼ã€‚</li>
<li>ç”±äºè¿™äº›æ–¹æ³•ä½¿ç”¨è¾“å…¥æ®µæ¥è§£é‡Šé¢„æµ‹ï¼Œå› æ­¤å®ƒä»¬å¯¹ç½‘ç»œä¸­å‘ç”Ÿçš„å†…éƒ¨è®¡ç®—æ²¡æœ‰å¤ªå¤§çš„å¯å‘ã€‚</li>
</ul>
<p>ç›®å‰ï¼Œå°½ç®¡è¿™ä¸€å—å·¥ä½œå¯¹å¯è§£é‡Šé¢†åŸŸæ•´ä½“å…·æœ‰å…¬è®¤çš„é‡è¦æ€§ï¼Œæˆ‘ä»¬åœ¨NLPä¸­è§£é‡Šç¥ç»ç½‘ç»œçš„é¢„æµ‹çš„èƒ½åŠ›ä»ç„¶æœ‰é™ã€‚</p>
<h2 id="6-å…¶ä»–ç ”ç©¶"><a href="#6-å…¶ä»–ç ”ç©¶" class="headerlink" title="6. å…¶ä»–ç ”ç©¶"></a>6. å…¶ä»–ç ”ç©¶</h2><p>è¿™é‡ŒåŒ…å«ä¸€äº›æ‚é¡¹ã€‚</p>
<ul>
<li><strong>æ“¦é™¤æˆ–è€…éšè—éƒ¨åˆ†ç¥ç»ç½‘ç»œç»„ä»¶</strong>ï¼ˆä¾‹å¦‚è¯åµŒå…¥çš„éƒ¨åˆ†ç»´åº¦ï¼Œéšå±‚å•å…ƒï¼Œç”šè‡³æ•´ä¸ªè¯ï¼‰çš„æ•ˆæœå¯¹æ¯”å®éªŒï¼ˆLiç­‰äººï¼Œ2016b; Fengç­‰äººï¼Œ2018; Khandelwalç­‰äººï¼Œ2018 ; Bauç­‰äººï¼Œ2018ï¼‰ã€‚Liç­‰ï¼ˆ2016bï¼‰æ¶ˆé™¤äº†å•è¯åµŒå…¥æˆ–éšè—çŠ¶æ€ä¸‹çš„ç‰¹å®šç»´åº¦ï¼Œå¹¶è®¡ç®—äº†åˆ†é…ç»™ä¸åŒæ ‡ç­¾çš„æ¦‚ç‡çš„å˜åŒ–ã€‚ä»–ä»¬çš„å®éªŒæ­ç¤ºäº†è¯åµŒå…¥æ¨¡å‹ä¹‹é—´çš„æœ‰è¶£å·®å¼‚ï¼Œåœ¨æŸäº›æ¨¡å‹ä¸­ï¼Œä¿¡æ¯æ›´å¤šåœ°é›†ä¸­åœ¨éƒ¨åˆ†ç»´åº¦ä¸Šã€‚ä»–ä»¬è¿˜å‘ç°ï¼Œä¿¡æ¯åœ¨éšè—å±‚ä¸­çš„åˆ†å¸ƒæ¯”åœ¨è¾“å…¥å±‚ä¸­çš„åˆ†å¸ƒå¤šï¼Œå¹¶ä¸”åœ¨æƒ…æ„Ÿåˆ†æä»»åŠ¡ä¸­åˆ é™¤äº†æ•´ä¸ªå•è¯ä»¥æ‰¾åˆ°é‚£äº›é‡è¦çš„å•è¯ã€‚</li>
<li><strong>é€šè¿‡å®šä¹‰æ’å…¥ä»»åŠ¡æ¥è§£é‡Šè¯åµŒå…¥</strong>ï¼Œå…¶ä¸­äººç±»éœ€è¦æ ¹æ®è¯åµŒå…¥ç»´åº¦çš„å·®å¼‚æ¥é€‰æ‹©æ’å…¥è¯ï¼ˆMurphyç­‰äººï¼Œ2012; Fysheç­‰äººï¼Œ2015; Faruquiç­‰äººï¼Œ2015ï¼‰ã€‚åœ¨è¿™ç§å·¥ä½œä¸­ï¼Œå¦‚æœäººç±»èƒ½å¤Ÿæ›´å¥½åœ°è¯†åˆ«å‡ºæ’å…¥è¯ï¼Œé‚£ä¹ˆè¯åµŒå…¥æ¨¡å‹å¯èƒ½è¢«è®¤ä¸ºæ›´å…·è§£é‡Šæ€§ã€‚ç”±äºé«˜ç»´è¡¨ç¤ºçš„è¯„ä¼°æˆæœ¬é«˜æ˜‚ï¼Œå› æ­¤è€ƒè™‘äº†å…¶ä»–è‡ªåŠ¨è¯„ä¼°æ–¹å¼ï¼ˆParkç­‰äººï¼Œ2017ï¼›Senelç­‰äººï¼Œ2018ï¼‰ã€‚</li>
<li>å…³äºç¥ç»ç½‘ç»œçš„ä¸€é¡¹æ‚ ä¹…ä¼ ç»Ÿæ˜¯<strong>è¯„ä¼°å’Œåˆ†æå…¶å­¦ä¹ ä¸åŒå½¢å¼è¯­è¨€çš„èƒ½åŠ›</strong>ï¼ˆDasç­‰ï¼Œ1992; Caseyï¼Œ1996; Gerså’ŒSchmidhuberï¼Œ2001;BodÃ©nå’ŒWilesï¼Œ2002; Chalupå’ŒBlairï¼Œ2003ï¼‰ã€‚ã€‚è¿™ç§è¶‹åŠ¿ä¸€ç›´æŒç»­åˆ°ä»Šå¤©ï¼ŒåŒ…æ‹¬å¯¹ç°ä»£ç»“æ„åŠå…¶å¯å­¦ä¹ çš„å½¢å¼è¯­è¨€çš„ç ”ç©¶ï¼ˆWeissç­‰äººï¼Œ2018; Bernardyï¼Œ2018; Suzgunç­‰äººï¼Œ2019ï¼‰ï¼Œæˆ–å®ƒä»¬æ‹¥æœ‰çš„å½¢å¼å±æ€§ï¼ˆChenç­‰äººï¼Œ2018bï¼‰ã€‚</li>
</ul>
<h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>åˆ†æç¥ç»ç½‘ç»œå·²æˆä¸ºNLPç ”ç©¶çš„çƒ­é—¨è¯é¢˜ã€‚æˆ‘ä»¬å·²ç»å¼ºè°ƒäº†ç‰¹å®šäºè¯­è¨€çš„åˆ†ææ–¹é¢ï¼š</p>
<ul>
<li>åœ¨ç¥ç»ç½‘ç»œä¸­æ•è·äº†å“ªäº›è¯­è¨€ä¿¡æ¯ï¼Œå®ƒä»¬æˆåŠŸæ•è·äº†å“ªäº›ç°è±¡ä»¥åŠåœ¨å“ªé‡Œå¤±è´¥äº†ã€‚</li>
<li>è®¸å¤šåˆ†ææ–¹æ³•æ˜¯å¤§å‹æœºå™¨å­¦ä¹ ç¤¾åŒºçš„é€šç”¨æŠ€æœ¯ï¼Œä¾‹å¦‚é€šè¿‡æ˜¾ç€æ€§åº¦é‡è¿›è¡Œå¯è§†åŒ–æˆ–é€šè¿‡å¯¹æŠ—æ€§ç¤ºä¾‹è¿›è¡Œè¯„ä¼°ï¼›ä½†æ˜¯å³ä½¿æ˜¯é‚£äº›æœ‰æ—¶ä¹Ÿéœ€è¦éå‡¡çš„æ”¹ç¼–æ‰èƒ½ä¸æ–‡æœ¬è¾“å…¥ä¸€èµ·ä½¿ç”¨ã€‚</li>
<li>ä¸€äº›æ–¹æ³•æ›´ç‰¹å®šäºè¯¥é¢†åŸŸï¼Œä½†åœ¨å…¶ä»–é¢†åŸŸå¯èƒ½è¢«è¯æ˜æ˜¯æœ‰ç”¨çš„ã€‚æŒ‘æˆ˜é›†æˆ–æµ‹è¯•å¥—ä»¶å°±æ˜¯è¿™ç§æƒ…å†µã€‚</li>
</ul>
<p>åœ¨æ•´ä¸ªè°ƒæŸ¥è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç¡®å®šäº†å½“å‰åˆ†æå·¥ä½œä¸­çš„ä¸€äº›å±€é™æ€§æˆ–ä¸è¶³ä¹‹å¤„ï¼š</p>
<ul>
<li>ä½¿ç”¨è¾…åŠ©åˆ†ç±»ä»»åŠ¡æ¥è¯†åˆ«ç¥ç»ç½‘ç»œæ•è·çš„è¯­è¨€å±æ€§å·²æˆä¸ºæ ‡å‡†åšæ³•ï¼Œä½†æ˜¯ç¼ºä¹å…¶ä¸åŸå§‹ä»»åŠ¡ä¹‹é—´è”ç³»çš„ç†è®ºåŸºç¡€ï¼Œå’Œæ›´å¥½çš„ç»éªŒæ€§è€ƒè™‘ã€‚</li>
<li>åˆ†æå·¥ä½œçš„è¯„ä¼°é€šå¸¸æ˜¯æœ‰é™çš„æˆ–å®šæ€§çš„ï¼Œå°¤å…¶æ˜¯åœ¨å¯è§†åŒ–æŠ€æœ¯æ–¹é¢ã€‚ä¸ºäº†ç¡®å®šä¸åŒæ–¹æ³•çš„æˆåŠŸï¼Œéœ€è¦æ›´æ–°çš„è¯„ä¼°å½¢å¼ã€‚</li>
<li>é™¤äº†æä¾›å¯è§†åŒ–ä¹‹å¤–ï¼Œåœ¨è§£é‡Šç¥ç»ç½‘ç»œæ¨¡å‹çš„é¢„æµ‹æ–¹é¢æ‰€åšçš„å·¥ä½œç›¸å¯¹è¾ƒå°‘ã€‚éšç€å…¬ä¼—å¯¹è§£é‡Šæœºå™¨å­¦ä¹ ç³»ç»Ÿä¸­ç®—æ³•é€‰æ‹©çš„éœ€æ±‚ä¸æ–­å¢åŠ ï¼ˆDoshi-Velezå’ŒKimï¼Œ2017å¹´; Doshi-Velezç­‰äººï¼Œ2017å¹´ï¼‰ï¼Œè¿«åˆ‡éœ€è¦åœ¨è¿™ä¸€æ–¹å‘ä¸Šå–å¾—è¿›å±•ã€‚</li>
<li>å¤§å¤šæ•°åˆ†æå·¥ä½œéƒ½é›†ä¸­åœ¨è‹±è¯­ä¸Šï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸ºå„ç§ä»»åŠ¡æ„å»ºæŒ‘æˆ˜é›†æ—¶ï¼Œä½†MTç”±äºå…¶å›ºæœ‰çš„å¤šè¯­è¨€ç‰¹æ€§è€Œé™¤å¤–ã€‚éšç€é¢†åŸŸçš„å‘å±•å’Œæˆç†Ÿï¼Œå¼€å‘å…¶ä»–è¯­è¨€çš„èµ„æºå’Œè¯„ä¼°æ–¹æ³•å¾ˆé‡è¦ã€‚</li>
<li>é™¤NLIå’ŒMTå¤–ï¼Œè¿˜éœ€è¦æ›´å¤šæŒ‘æˆ˜é›†æ¥è¯„ä¼°å…¶ä»–ä»»åŠ¡ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>Neural Networks</category>
      </categories>
      <tags>
        <tag>NLP</tag>
        <tag>Neural Networks</tag>
        <tag>Deep Learning</tag>
        <tag>Interpretability</tag>
      </tags>
  </entry>
  <entry>
    <title>å¯¹å¶å›¾</title>
    <url>/2020/11/17/%E5%AF%B9%E5%81%B6%E5%9B%BE/</url>
    <content><![CDATA[<p>ä»Šå¤©ç»„ä¼šä¸Šå¶ç„¶å¬åˆ°â€œå¯¹å¶å›¾â€è¿™ä¸ªè¯ï¼Œå°±å†æ¬¡å›é¡¾ä¸€ä¸‹ç›¸å…³çš„å®šä¹‰~</p>
<p>ä¸€ä¸ªå›¾G=(V,E)ï¼Œè‹¥èƒ½å°†å…¶ç”»åœ¨å¹³é¢ä¸Šï¼Œä¸”ä»»æ„ä¸¤æ¡è¾¹çš„äº¤ç‚¹åªèƒ½æ˜¯Gçš„é¡¶ç‚¹ï¼Œåˆ™ç§°Gå¯åµŒå…¥å¹³é¢ï¼Œæˆ–ç§°Gæ˜¯å¯å¹³é¢çš„ã€‚å¯å¹³é¢å›¾åœ¨å¹³é¢ä¸Šçš„ä¸€ä¸ªåµŒå…¥ç§°ä¸ºä¸€ä¸ªå¹³é¢å›¾ã€‚</p>
<p>ç”±å¹³é¢å›¾çš„è¾¹åŒ…å›´è€Œæˆï¼Œå…¶ä¸­ä¸å«å›¾çš„é¡¶ç‚¹ã€‚ä¹Ÿç§°ä¸ºé¢ã€‚åŒ…å›´é¢Rçš„æ‰€æœ‰è¾¹ç»„æˆçš„å›è·¯ç§°ä¸ºè¯¥é¢çš„è¾¹ç•Œï¼Œå›è·¯é•¿åº¦ç§°ä¸ºè¯¥é¢çš„åº¦ï¼Œè®°ä¸ºdeg(R)ã€‚å…·æœ‰ç›¸åŒè¾¹ç•Œçš„é¢ç§°ä¸ºç›¸é‚»é¢ã€‚ç”±å¹³é¢å›¾çš„è¾¹åŒ…å›´ä¸”æ— ç©·å¤§çš„é¢ç§°ä¸ºå¤–éƒ¨é¢ã€‚ä¸€ä¸ªå¹³é¢å›¾æœ‰ä¸”åªæœ‰ä¸€ä¸ªå¤–éƒ¨é¢ã€‚</p>
<p>åˆ©ç”¨æ¬§æ‹‰å…¬å¼å’Œæ•°å­¦å½’çº³æ³•å¯ä»¥è¯æ˜å¹³é¢å›¾Gçš„æ‰€æœ‰é¢çš„åº¦ä¹‹å’Œç­‰äºå…¶è¾¹æ•°|E|çš„2å€ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å¼•å…¥å¯¹å¶å›¾ï¼Œè®¾æœ‰å¹³é¢å›¾G=(V, E)ï¼Œæ»¡è¶³ä¸‹åˆ—æ¡ä»¶çš„å›¾Gâ€™= (Vâ€™, Eâ€™) ç§°ä¸ºå›¾Gçš„å¯¹å¶å›¾ï¼šGçš„ä»»ä¸€é¢$R_i$å¯¹åº”ä¸”ä»…å¯¹åº”ä¸€ç‚¹$V_i^{â€˜}$ï¼›å¯¹Gçš„é¢$R_i$å’Œ$R_j$çš„å…±åŒè¾¹$E_k$ï¼Œç”»ä¸€æ¡è¾¹$E_k^{â€˜} = (V_i^{â€˜}, V_j^{â€˜})$ä¸”åªä¸$E_k$äº¤äºä¸€ç‚¹ï¼›è‹¥$E_k$å®Œå…¨å¤„äºæŸä¸ªé¢$R_i$ä¸­ï¼Œåˆ™$V_i^{â€˜}$æœ‰ä¸€è‡ªç¯$E_k^{â€˜}$ï¼Œå¦‚ä¸‹å›¾Gâ€™æ˜¯Gçš„å¯¹å¶å›¾ï¼š</p>
<p><div align="center"> <img src="/images/blog/2020/dual.png" alt></div></p>
<p>å¯¹å¶å›¾å¯ä»¥åº”ç”¨åˆ°<strong>æœ€å¤§æµ</strong>ä¸­ï¼Œå…·ä½“çš„ä»¥åå†çœ‹å§~</p>
]]></content>
      <categories>
        <category>Algorithms</category>
      </categories>
      <tags>
        <tag>Algorithms</tag>
        <tag>Dual Graph</tag>
        <tag>Graph</tag>
      </tags>
  </entry>
  <entry>
    <title>å…³äºNYT(Riedel et al. 2010)æ•°æ®é›†</title>
    <url>/2020/11/17/%E5%85%B3%E4%BA%8ENYT-Riedel-et-al-2010-%E6%95%B0%E6%8D%AE%E9%9B%86/</url>
    <content><![CDATA[<p>NYT10 (Riedel et al. 2010) æ˜¯è¿œç¨‹ç›‘ç£å…³ç³»æŠ½å–å¿…ä¸å¯å°‘çš„æ•°æ®é›†ï¼Œå¯¹äºæ•°æ®é›†çš„ä¸€äº›ç–‘é—®ä»¥åŠæ¢ç´¢ï¼Œåœ¨è¿™é‡Œè®°å½•ï¼Œä¹Ÿä¾›å¤§å®¶å‚è€ƒğŸ¤­</p>
<h1 id="1-OpenNREæä¾›çš„æ•°æ®é›†å’ŒRiedelæä¾›çš„æ•°æ®é›†æ˜¯å¦ä¸€è‡´ï¼Ÿ"><a href="#1-OpenNREæä¾›çš„æ•°æ®é›†å’ŒRiedelæä¾›çš„æ•°æ®é›†æ˜¯å¦ä¸€è‡´ï¼Ÿ" class="headerlink" title="1. OpenNREæä¾›çš„æ•°æ®é›†å’ŒRiedelæä¾›çš„æ•°æ®é›†æ˜¯å¦ä¸€è‡´ï¼Ÿ"></a>1. OpenNREæä¾›çš„æ•°æ®é›†å’ŒRiedelæä¾›çš„æ•°æ®é›†æ˜¯å¦ä¸€è‡´ï¼Ÿ</h1><p>RiedelåŸå§‹æ•°æ®é›†åœ¨è¿™é‡Œï¼š<a href="http://iesl.cs.umass.edu/riedel/ecml/" target="_blank" rel="noopener">http://iesl.cs.umass.edu/riedel/ecml/</a></p>
<p>é‡‡ç”¨çš„æ˜¯protocol bufferçš„å½¢å¼ï¼Œä¸èƒ½ç›´æ¥é˜…è¯»ï¼Œéœ€è¦è‡ªå·±ç”¨å·¥å…·å¤„ç†æˆtextå½¢å¼ã€‚</p>
<p>OpenNREå¤„ç†åçš„æ•°æ®é›†ï¼š<a href="https://github.com/thunlp/OpenNRE/tree/master/benchmark" target="_blank" rel="noopener">https://github.com/thunlp/OpenNRE/tree/master/benchmark</a></p>
<p>è¿™ä¸¤ä¸ªæ•°æ®é›†æœ‰æ²¡æœ‰ä»€ä¹ˆä¸ä¸€è‡´å‘¢ï¼Ÿæ¸…ååœ¨å¤„ç†çš„æ—¶å€™æœ‰æ²¡æœ‰åŠ ä¸€äº›ç‰¹æ®Šçš„æ“ä½œå‘¢ï¼Ÿè¿™æ˜¯æˆ‘ä¸€ç›´ç–‘é—®çš„ä¸€ä¸ªç‚¹ï¼Œå› ä¸ºè¦å¼€å±•å®éªŒï¼Œå¿…é¡»ç¡®ä¿æ•°æ®é›†çš„ä¸€è‡´æ€§ï¼Œæ‰å¯ä»¥å’Œå‰äººçš„å·¥ä½œè¿›è¡Œæ¯”è¾ƒã€‚</p>
<p><a href="https://github.com/thunlp/OpenNRE/issues/17" target="_blank" rel="noopener">https://github.com/thunlp/OpenNRE/issues/17</a></p>
<blockquote>
<p>train.txt and test.txt are labeled by distant supervision. As for details, you can refer to the issue <a href="https://github.com/thunlp/OpenNRE/issues/15" target="_blank" rel="noopener">#15</a><br>The train/test data are exactly same with the data in (Riedel et al. 2010) .<br>Because test data is smaller than train and the unbalance of relation truth numbers exists, the total number of relations in test.txt is smaller than train.txt</p>
</blockquote>
<p>OpenNREæä¾›çš„æ•°æ®å’ŒåŸå§‹æ•°æ®æ˜¯<strong>å®Œå…¨ä¸€è‡´</strong>çš„ã€‚ğŸ‘ <a id="more"></a></p>
<h1 id="2-NYTå…³ç³»ç±»å‹æ¢ç©¶"><a href="#2-NYTå…³ç³»ç±»å‹æ¢ç©¶" class="headerlink" title="2. NYTå…³ç³»ç±»å‹æ¢ç©¶"></a>2. NYTå…³ç³»ç±»å‹æ¢ç©¶</h1><h2 id="2-1-å±‚çº§å…³ç³»"><a href="#2-1-å±‚çº§å…³ç³»" class="headerlink" title="2.1 å±‚çº§å…³ç³»"></a>2.1 å±‚çº§å…³ç³»</h2><p>NYTå…³ç³»ç±»å‹å¤©ç„¶å­˜åœ¨å±‚çº§ï¼Œå¦‚/location/country/capital, /location/province/capitalç­‰</p>
<h2 id="2-2-é‡å¤å…³ç³»"><a href="#2-2-é‡å¤å…³ç³»" class="headerlink" title="2.2 é‡å¤å…³ç³»"></a>2.2 é‡å¤å…³ç³»</h2><p>NYTæ˜¯ç”±è¿œç¨‹ç›‘ç£ç”Ÿæˆï¼Œå™ªéŸ³æ˜¯å…¶æœ€å¤§çš„é—®é¢˜ï¼Œå…³ç³»ç±»å‹ä¸­å°±æœ‰å¾ˆå¤šé‡å¤ã€‚</p>
<p>/location/de_state/capital [å¾·å›½: å·]</p>
<p>/location/fr_region/capital [æ³•å›½: åœ°åŒº]</p>
<p>/location/in_state/administrative_capital [å°åº¦: é‚¦]</p>
<p>/location/in_state/judicial_capital [å°åº¦: é‚¦]</p>
<p>/location/in_state/legislative_capital [å°åº¦: é‚¦]</p>
<p>/location/it_region/capital [æ„å¤§åˆ©: åŒº]</p>
<p>/location/jp_prefecture/capital [æ—¥æœ¬: å¿]</p>
<p>/location/br_state/capital [å·´è¥¿: å·]</p>
<p>/location/cn_province/capital [ä¸­å›½: çœ]</p>
<p>/location/mx_state/capital [å¢¨è¥¿å“¥: å·]</p>
<p>/location/province/capital [åŠ æ‹¿å¤§: çœ]</p>
<p>/location/us_state/capital [ç¾å›½: å·]</p>
<p>è¡¨è¾¾çš„éƒ½æ˜¯åŒä¸€ç§å…³ç³»ç±»å‹â€¦â€¦</p>
<h1 id="3-å¦‚ä½•ç»˜åˆ¶PRæ›²çº¿ï¼Ÿ"><a href="#3-å¦‚ä½•ç»˜åˆ¶PRæ›²çº¿ï¼Ÿ" class="headerlink" title="3. å¦‚ä½•ç»˜åˆ¶PRæ›²çº¿ï¼Ÿ"></a>3. å¦‚ä½•ç»˜åˆ¶PRæ›²çº¿ï¼Ÿ</h1><p>è¿™é‡Œä¸»è¦å­¦ä¹ äº†ï¼š<a href="https://github.com/Spico197/NYT-H/issues/1" target="_blank" rel="noopener">https://github.com/Spico197/NYT-H/issues/1</a></p>
<blockquote>
<p>æŠ±æ­‰ä»£ç é‡Œå¯èƒ½æœ‰ç‚¹ä¹±ï¼Œåé¢ä¼šé‡æ„ä¸€ä¸‹ã€‚è¿™å…¶å®æ˜¯ä¸ªPRCç»˜åˆ¶çš„å‘ï¼ŒPRCæ˜¯æœ‰å¾ˆå¤šç§ç»˜åˆ¶æ–¹æ³•çš„ã€‚æˆ‘åœ¨ç¼–ç çš„æ—¶å€™ä¹Ÿæ˜¯è¾¹å°è¯•è¾¹å†™çš„ï¼Œæ‰€ä»¥åŒ…å«äº†ä¸€äº›æ²¡æœ‰åˆ æ‰çš„è¿‡ç¨‹ã€‚PRCæ ¹æ®æ˜¯å¦åŒ…å«NAå…³ç³»ä»¥åŠæ˜¯å¦åŒ…å«æ‰€æœ‰çš„é¢„æµ‹è¾“å‡ºï¼Œå¯ä»¥åˆ†ä¸º4ç§ã€‚</p>
<ul>
<li>ä¸åŒ…å«NAï¼Œå–æœ€å¤§é¢„æµ‹è¾“å‡ºï¼šä¿®æ”¹<code>evaluate.py</code>ä¸­ç¬¬166è¡Œçš„<code>for</code>è¯­å¥ï¼Œæ”¹ä¸ºæœ€å¤§æ¦‚ç‡/logitsä½ç½®çš„ç»“æœã€‚</li>
<li>ä¸åŒ…å«NAï¼Œå–å…¨éƒ¨é¢„æµ‹è¾“å‡ºï¼šæˆ‘ä»¬æœ€ç»ˆåœ¨è®ºæ–‡ä¸­æ±‡æŠ¥çš„æ˜¯OpenNREç»˜åˆ¶æ–¹æ¡ˆçš„ç»“æœï¼Œå³DSGTä¸Šçš„PRCï¼š<code>prc_opennre.json</code>å’ŒMAGTä¸Šçš„PRCï¼š<code>b_prc_opennre.json</code>ã€‚å¦‚READMEä¸­æ‰€è¿°ï¼Œè¿™ç§PRCçš„ç»˜åˆ¶æ–¹æ¡ˆæ˜¯å°†æ‰€æœ‰logits/æ¦‚ç‡ è¿›è¡Œæ’åºï¼ˆå‡å¦‚æœ‰Nä¸ªinstanceï¼Œæ¯ä¸ªinstanceé¢„æµ‹è¾“å‡º21ä¸ªéNAå…³ç³»çš„æ¦‚ç‡ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰N*21ä¸ªç‚¹ï¼‰ã€‚</li>
<li>åŒ…å«NAï¼Œå–æœ€å¤§é¢„æµ‹è¾“å‡ºï¼š<code>prc.json</code>æ–‡ä»¶ä¸­çš„PRCç»“æœæ˜¯å¯¹æ¯ä¸ªinstanceçš„è¾“å‡ºç»“æœï¼Œåªå–æœ€å¤§logits/æ¦‚ç‡ è¿›è¡Œæ’åºï¼Œæœ€ç»ˆåªæœ‰Nä¸ªç‚¹ï¼ˆDSGTï¼‰ã€‚è®ºæ–‡ä¸­æœªæ±‡æŠ¥ã€‚</li>
<li>åŒ…å«NAï¼Œå–å…¨éƒ¨é¢„æµ‹è¾“å‡ºï¼šå»é™¤<code>evaluate.py</code>æ–‡ä»¶ç¬¬167è¡Œçš„<code>if</code>æ¡ä»¶ã€‚</li>
</ul>
<p>å…¶å®ƒçš„å‡ ä¸ªæ–‡ä»¶ï¼š</p>
<ul>
<li><code>prc_bag2sent.json</code>ï¼šbag2sent trackçš„DSGT PRCç»“æœï¼Œè®ºæ–‡ä¸­æœªæ±‡æŠ¥ã€‚</li>
<li><code>prc_skprc_mine.json</code>ï¼šæ—©æœŸä½¿ç”¨sklearnæ±‚è§£PRCçš„ä¸€ä¸ªå°è¯•ï¼Œéœ€è¦å°†å¤šåˆ†ç±»é¢„æµ‹ç»“æœå…ˆè½¬æ¢ä¸ºäºŒåˆ†ç±»ç»“æœï¼ˆå¯¹/é”™ï¼‰ï¼Œè®ºæ–‡ä¸­æœªæ±‡æŠ¥ã€‚</li>
</ul>
</blockquote>
]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
        <category>Distant Supervision</category>
      </categories>
      <tags>
        <tag>Relation Extraction</tag>
        <tag>NYT</tag>
        <tag>Distant Supervision</tag>
      </tags>
  </entry>
  <entry>
    <title>å¯¹æ¯”å­¦ä¹  (Contrastive Learning) ç›¸å…³è¿›å±•æ¢³ç†</title>
    <url>/2020/11/14/%E5%AF%B9%E6%AF%94%E5%AD%A6%E4%B9%A0-Contrastive-Learning-%E7%9B%B8%E5%85%B3%E8%BF%9B%E5%B1%95%E6%A2%B3%E7%90%86/</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡è½¬è½½è‡ªï¼š</p>
<p><a href="https://zhuanlan.zhihu.com/p/141141365" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/141141365</a></p>
</blockquote>
<p><br></p>
<p>æœ€è¿‘æ·±åº¦å­¦ä¹ ä¸¤å·¨å¤´ Bengio å’Œ LeCun åœ¨ ICLR 2020 ä¸Šç‚¹å Self-Supervised Learningï¼ˆSSLï¼Œè‡ªç›‘ç£å­¦ä¹ ï¼‰ æ˜¯ AI çš„æœªæ¥ï¼Œè€Œå…¶çš„ä»£è¡¨çš„ Framework ä¾¿æ˜¯ Contrastive Learningï¼ˆCLï¼Œå¯¹æ¯”å­¦ä¹ ï¼‰ã€‚ å¦ä¸€å·¨å¤´ Hinton å’Œ Kaiming ä¸¤å°Šå¤§ç¥ä¹Ÿåœ¨è¿™é—®é¢˜ä¸Šéš”ç©ºè¿‡æ‹›ï¼ŒMoCoã€SimCLRã€MoCo V2 æ‰“å¾—ç«çƒ­ï¼Œè¿™å’Œ BERT ä¹‹åï¼Œå„å¤§å…¬å¸å‡º XL-Netã€RoBerta åˆ·æ¦œçš„åœºæ™¯ä½•å…¶ç›¸ä¼¼ã€‚æœ¬ç¯‡æ–‡ç« ï¼Œå°†ä¼šä»å¯¹æ¯”å­¦ä¹ çš„èƒŒåçš„ç›´è§‰åŸç†å‡ºå‘ï¼Œä»‹ç»å…¶æ¡†æ¶ï¼Œå¹¶ä¸”å¯¹ç›®å‰çš„ä¸€äº›ç›¸å…³çš„å·¥ä½œè¿›è¡Œç®€è¦ä»‹ç»ï¼Œå¸Œæœ›èƒ½å¤Ÿä¸ºæ„Ÿå…´è¶£çš„åŒå­¦æä¾›ä¸€äº›å¸®åŠ©ã€‚</p>
<h2 id="Motivation-amp-Framework"><a href="#Motivation-amp-Framework" class="headerlink" title="Motivation &amp; Framework"></a><strong>Motivation &amp; Framework</strong></h2><p>å¾ˆå¤šç ”ç©¶è€…è®¤ä¸ºï¼Œæ·±åº¦å­¦ä¹ çš„æœ¬è´¨å°±æ˜¯åšä¸¤ä»¶äº‹æƒ…ï¼š<strong>Representation Learningï¼ˆè¡¨ç¤ºå­¦ä¹ ï¼‰å’Œ Inductive Bias Learningï¼ˆå½’çº³åå¥½å­¦ä¹ ï¼‰</strong>ã€‚ç›®å‰çš„ä¸€ä¸ªè¶‹åŠ¿å°±æ˜¯ï¼Œå­¦å¥½äº†æ ·æœ¬çš„è¡¨ç¤ºï¼Œåœ¨ä¸€äº›ä¸æ¶‰åŠé€»è¾‘ã€æ¨ç†ç­‰çš„é—®é¢˜ä¸Šï¼Œä¾‹å¦‚åˆ¤æ–­å¥å­çš„æƒ…æ„Ÿææ€§ã€è¯†åˆ«å›¾åƒä¸­æœ‰å“ªäº›ä¸œè¥¿ï¼ŒAI ç³»ç»Ÿéƒ½å¯ä»¥å®Œæˆéå¸¸ä¸é”™ï¼›è€Œæ¶‰åŠåˆ°æ›´é«˜å±‚çš„è¯­ä¹‰ã€ç»„åˆé€»è¾‘ï¼Œåˆ™éœ€è¦è®¾è®¡ä¸€äº›è¿‡ç¨‹æ¥è¾…åŠ© AI ç³»ç»Ÿå»åˆ†è§£å¤æ‚çš„ä»»åŠ¡ï¼Œ<a href="https://link.zhihu.com/?target=http%3A//arxiv.org/abs/1904.12584" target="_blank" rel="noopener">ICLR 19</a> çš„ä¸€ç¯‡ oral å°±æ˜¯åšçš„ç±»ä¼¼çš„äº‹æƒ…ã€‚å› ä¸ºå½’çº³åå¥½çš„è®¾è®¡æ›´å¤šçš„æ˜¯ ä»»åŠ¡ç›¸å…³çš„ï¼Œå¤æ‚çš„è¿‡ç¨‹éœ€è¦éå¸¸ç²¾å¿ƒçš„è®¾è®¡ï¼Œæ‰€ä»¥å¾ˆå¤šå·¥ä½œéƒ½å¼€å§‹å…³æ³¨åˆ°è¡¨ç¤ºå­¦ä¹ ä¸Šï¼ŒNLP æœ€è¿‘å¤§ç«çš„é¢„è®­ç»ƒæ¨¡å‹ï¼Œä¾‹å¦‚ BERTï¼Œå°±æ˜¯åˆ©ç”¨å¤§è§„æ¨¡çš„è¯­æ–™é¢„è®­ç»ƒå¾—åˆ°æ–‡æœ¬çš„å¥½çš„è¡¨ç¤ºã€‚é‚£ä¹ˆï¼ŒCV é¢†åŸŸçš„ BERT æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿç­”æ¡ˆå·²ç»å‘¼ä¹‹æ¬²å‡ºï¼Œå°±æ˜¯å¯¹æ¯”å­¦ä¹ ã€‚</p>
<p>åŸºäºæ­¤ï¼Œä¹Ÿå°±æ„å‘³ç€<strong>è¡¨ç¤ºå­¦ä¹ ç®—æ³•å¹¶ä¸ä¸€å®šè¦å…³æ³¨åˆ°æ ·æœ¬çš„æ¯ä¸€ä¸ªç»†èŠ‚ï¼Œåªè¦å­¦åˆ°çš„ç‰¹å¾èƒ½å¤Ÿä½¿å…¶å’Œå…¶ä»–æ ·æœ¬åŒºåˆ«å¼€æ¥å°±è¡Œ</strong>ï¼Œè¿™å°±æ˜¯å¯¹æ¯”å­¦ä¹ å’Œå¯¹æŠ—ç”Ÿæˆç½‘ç»œï¼ˆGANï¼‰çš„ä¸€ä¸ªä¸»è¦ä¸åŒæ‰€åœ¨ã€‚</p>
<ul>
<li>å¦‚ä½•å®šä¹‰ç›®æ ‡å‡½æ•°ï¼Ÿæœ€ç®€å•çš„ä¸€ç§å°±æ˜¯ä¸Šé¢æåˆ°çš„å†…ç§¯å‡½æ•°ï¼Œå¦å¤–ä¸€ä¸­ triplet çš„å½¢å¼å°±æ˜¯ <img src="https://www.zhihu.com/equation?tex=l+%3D+max%280%2C+%CE%B7+%2B+s+%28x%2C+x%5E%2B%29+%E2%88%92+s+%28x%2C+x%5E%E2%88%92%29%29" alt="[å…¬å¼]"> ï¼Œç›´è§‚ä¸Šç†è§£ï¼Œå°±æ˜¯å¸Œæœ›æ­£ä¾‹ pair å’Œè´Ÿä¾‹ pair éš”å¼€è‡³å°‘ <img src="https://www.zhihu.com/equation?tex=%5Ceta" alt="[å…¬å¼]"> çš„è·ç¦»ï¼Œè¿™ä¸€å‡½æ•°åŒæ ·å¯ä»¥å†™æˆå¦å¤–ä¸€ç§å½¢å¼ï¼Œè®©æ­£ä¾‹ pair å’Œè´Ÿä¾‹ pair é‡‡ç”¨ä¸åŒçš„ <img src="https://www.zhihu.com/equation?tex=s" alt="[å…¬å¼]"> å‡½æ•°ï¼Œä¾‹å¦‚ï¼Œ<img src="https://www.zhihu.com/equation?tex=s%28x%2C+x%5E%2B%29+%3D+%5C%7C+%5Cmax+%280%2C+f%28x%29-f%28x%5E%2B%29%5C%7C" alt="[å…¬å¼]"> ï¼Œ<img src="https://www.zhihu.com/equation?tex=s%28x%2C+x%5E%2B%29+%3D+%5C%7C+%5Cmax+%28%5Ceta%2C+f%28x%29-f%28x%5E-%29%5C%7C" alt="[å…¬å¼]">ã€‚</li>
<li>å¦‚ä½•æ„å»ºæ­£ä¾‹å’Œè´Ÿä¾‹ï¼Ÿé’ˆå¯¹ä¸åŒç±»å‹æ•°æ®ï¼Œä¾‹å¦‚å›¾åƒã€æ–‡æœ¬å’ŒéŸ³é¢‘ï¼Œå¦‚ä½•åˆç†çš„å®šä¹‰å“ªäº›æ ·æœ¬åº”è¯¥è¢«è§†ä½œæ˜¯ <img src="https://www.zhihu.com/equation?tex=x%5E%2B" alt="[å…¬å¼]">ï¼Œå“ªäº›è¯¥è¢«è§†ä½œæ˜¯ <img src="https://www.zhihu.com/equation?tex=x%5E-" alt="[å…¬å¼]">ï¼Œï¼›å¦‚ä½•å¢åŠ è´Ÿä¾‹æ ·æœ¬çš„æ•°é‡ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢å¼å­é‡Œçš„ <img src="https://www.zhihu.com/equation?tex=N" alt="[å…¬å¼]">ï¼Ÿè¿™ä¸ªé—®é¢˜æ˜¯ç›®å‰å¾ˆå¤š paper å…³æ³¨çš„ä¸€ä¸ªæ–¹å‘ï¼Œå› ä¸ºè™½ç„¶è‡ªç›‘ç£çš„æ•°æ®æœ‰å¾ˆå¤šï¼Œä½†æ˜¯<strong>è®¾è®¡å‡ºåˆç†çš„æ­£ä¾‹å’Œè´Ÿä¾‹ pairï¼Œå¹¶ä¸”å°½å¯èƒ½æå‡ pair èƒ½å¤Ÿ cover çš„ semantic relationï¼Œæ‰èƒ½è®©å¾—åˆ°çš„è¡¨ç¤ºåœ¨ downstream task è¡¨ç°çš„æ›´å¥½</strong>ã€‚</li>
</ul>
<p><br></p>
<p>æ¥ä¸‹æ¥ï¼Œå°±ä¼šä»‹ç»ä¸€ä¸‹ MoCoã€SimCLR ä»¥åŠ Contrasitve Predictive Codingï¼ˆCPCï¼‰ è¿™ä¸‰ç¯‡æ–‡ç« ï¼Œåœ¨æ„å»ºå¯¹æ¯”æ ·ä¾‹ä¸­çš„ä¸€äº›æ ¸å¿ƒè§‚ç‚¹ã€‚<a id="more"></a></p>
<h2 id="Contrastive-Pair"><a href="#Contrastive-Pair" class="headerlink" title="Contrastive Pair"></a><strong>Contrastive Pair</strong></h2><h3 id="MoCo"><a href="#MoCo" class="headerlink" title="MoCo"></a><strong>MoCo</strong></h3><p><img src="https://pic2.zhimg.com/80/v2-2c7e1ebab1ef558f5e1cb04817f96d51_720w.jpg" alt="img"></p>
<p>è®ºæ–‡æ ‡é¢˜ï¼šMomentum Contrast for Unsupervised Visual Representation Learning</p>
<p>è®ºæ–‡æ¥æºï¼šCVPR 2020</p>
<p>è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.zhihu.com/?target=https%3A//arxiv.org/abs/1911.05722" target="_blank" rel="noopener">https://arxiv.org/abs/1911.05722</a></p>
<p>ä»£ç é“¾æ¥ï¼š<a href="https://link.zhihu.com/?target=https%3A//github.com/facebookresearch/moco" target="_blank" rel="noopener">https://github.com/facebookresearch/moco</a></p>
<p><img src="https://pic4.zhimg.com/80/v2-bfb035f24f9d0f8f2f7dd38bdab2a703_720w.jpg" alt="img"></p>
<p>å‰é¢æåˆ°äº†ï¼Œæ ·æœ¬æ•°é‡å¯¹äºå­¦ä¹ åˆ°çš„æ ·æœ¬è´¨é‡æœ‰å¾ˆå¤§çš„å½±å“ã€‚MoCo åšçš„äº‹æƒ…å¾ˆç®€å•ï¼Œå°±æ˜¯æŠŠè´Ÿä¾‹æ ·æœ¬çš„ encoder <img src="https://www.zhihu.com/equation?tex=f%28%5Ccdot%29" alt="[å…¬å¼]">å’Œ mini-batch å¤§å°è§£è€¦ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸå…ˆåœ¨ç®—ç›®æ ‡å‡½æ•°çš„æ—¶å€™ï¼Œè´Ÿä¾‹æ ·æœ¬å¯¹ä¹Ÿä¼šä¸º loss äº§ç”Ÿè´¡çŒ®ï¼Œå› ä¸ºä¹Ÿå°±ä¼šæœ‰æ¢¯åº¦å›ä¼ ç»™å¯¹åº”çš„ encoderï¼Œé‚£ä¹ˆè¿™æ ·åœ¨å®ç°çš„æ—¶å€™ï¼Œæ ·æœ¬æ•°é‡å¿…ç„¶ä¼šå—åˆ° batch size çš„é™åˆ¶ï¼Œä»è€Œå½±å“å­¦ä¹ åˆ°è¡¨ç¤ºçš„è´¨é‡ã€‚</p>
<p>ä¸ºæ­¤ï¼ŒMemory Bank æå‡ºæˆ‘æŠŠæ‰€æœ‰æ ·æœ¬çš„è¡¨ç¤ºéƒ½å­˜èµ·æ¥ï¼Œç„¶åæ¯æ¬¡éšæœºé‡‡æ ·ï¼Œè¿™æ ·å°±å¯ä»¥è®¤ä¸ºæˆ‘çš„è´Ÿä¾‹æ ·æœ¬ç†è®ºä¸Šå¯ä»¥è¾¾åˆ°æ‰€æœ‰æ ·æœ¬çš„æ•°é‡ï¼Œå…·ä½“çš„åšæ³•å°±æ˜¯æ¯ä¸€è½®æ¥ encode ä¸€æ¬¡æ‰€æœ‰çš„å˜é‡ï¼Œæ˜¾ç„¶ï¼Œè¿™æ ·å¾ˆåƒå†…å­˜ï¼Œå¹¶ä¸”å¾—åˆ°çš„è¡¨ç¤ºä¹Ÿå’Œå‚æ•°æ›´æ–°å­˜åœ¨ä¸€å®šçš„æ»åã€‚</p>
<p>MoCo åˆ™æ”¹å–„äº†ä¸Šè¿°çš„ä¸¤ä¸ªç¼ºç‚¹ï¼Œä¸€æ–¹é¢ï¼Œç”¨ä¸€ä¸ª queue æ¥ç»´æŠ¤å½“å‰çš„ negative candidates poolï¼Œqueue æœ‰ç€è¿›å‡ºçš„åŠ¨æ€æ›´æ–°æœºåˆ¶ï¼Œä¸€æ–¹é¢èƒ½å¤Ÿå’Œ Mini-batch è§£è€¦ï¼Œqueue size å¯ä»¥è®¾ç½®çš„æ¯”è¾ƒå¤§ï¼Œå¦å¤–ä¸€æ–¹é¢ä¹Ÿå°±ä¸ç”¨å¯¹æ‰€æœ‰æ ·æœ¬åšç±»ä¼¼é¢„å¤„ç†çš„è¿›è¡Œç¼–ç ï¼›å¯¹äºè´Ÿä¾‹æ ·æœ¬çš„å‚æ•°ï¼Œé‡‡ç”¨ Momentum update çš„æ–¹å¼ï¼Œæ¥æŠŠæ­£ä¾‹ encoder çš„å‚æ•°<img src="https://www.zhihu.com/equation?tex=%5Ctheta_q" alt="[å…¬å¼]"> copy ç»™è´Ÿä¾‹ encoder <img src="https://www.zhihu.com/equation?tex=%5Ctheta_k" alt="[å…¬å¼]">ï¼š</p>
<p><img src="https://www.zhihu.com/equation?tex=%5Ctheta_k+%3D+m+%5Ctheta_k+%2B+%281-m%29+%5Ctheta_q+%5C%5C" alt="[å…¬å¼]"></p>
<p>ä¸‰ç§æ–¹å¼çš„ç¤ºæ„å›¾ä¹Ÿåœ¨è¿™ä¸€å°èŠ‚çš„å¼€å¤´ç»™å‡ºäº†ï¼Œå¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°ä¸‰ç§æ–¹å¼çš„åŒºåˆ«ã€‚<strong>è¿™ç§å¯¹æ¯”ç”»å›¾çš„æ–¹å¼å¯¹äºè¯´æ˜é—®é¢˜å¾ˆæœ‰å¸®åŠ©ï¼Œå¯ä»¥åœ¨è®ºæ–‡ä¸­è¿›è¡Œå°è¯•</strong>ã€‚</p>
<h3 id="SimCLR"><a href="#SimCLR" class="headerlink" title="SimCLR"></a><strong>SimCLR</strong></h3><p><img src="https://pic4.zhimg.com/80/v2-b86b329fbbde88a83d9af0eb686950b3_720w.jpg" alt="img"></p>
<p>è®ºæ–‡æ ‡é¢˜ï¼šA Simple Framework for Contrastive Learning of Visual Representations</p>
<p>è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.zhihu.com/?target=https%3A//arxiv.org/abs/2002.05709" target="_blank" rel="noopener">https://arxiv.org/abs/2002.05709</a></p>
<p>ä»£ç é“¾æ¥ï¼š<a href="https://link.zhihu.com/?target=https%3A//github.com/google-research/simclr" target="_blank" rel="noopener">https://github.com/google-research/simclr</a></p>
<p>MoCo åˆšè¯´å®Œæ ·æœ¬æ•°é‡å¯¹äºå¯¹æ¯”å­¦ä¹ å¾ˆé‡è¦ï¼Œè¿™è¾¹ SimCLR å°±ä»å¦å¤–ä¸€ä¸ªè§’åº¦ï¼Œè¯´æ„å»ºè´Ÿä¾‹çš„æ–¹å¼ï¼ˆå›¾åƒä¸Šï¼Œå°±æ˜¯å¯¹äºå›¾åƒçš„ transformationï¼‰ä¹Ÿå¾ˆé‡è¦ï¼Œæ¢ç©¶äº† transformation ã€batch-size å¤§å°ç­‰å¯¹äºå­¦ä¹ åˆ°çš„è¡¨ç¤ºçš„å½±å“ï¼Œå¹¶ä¸”æŠŠè¿™ä¸ªæ¡†æ¶ç”¨ä¸‹é¢è¿™å¼ å›¾æ¥è¯´æ˜ï¼š</p>
<p><img src="https://pic1.zhimg.com/80/v2-79f91dcbda0e03df0c386bf9a93d1ba8_720w.jpg" alt="img"></p>
<p>æ–‡ç« ä¸»è¦å¾—å‡ºäº†ä¸‹é¢å‡ ä¸ªç»“è®ºï¼š</p>
<ul>
<li>å¯¹äºæ ·æœ¬è¿›è¡Œå˜åŒ–ï¼Œå³æ„å»ºæ­£ä¾‹å’Œè´Ÿä¾‹çš„ transformation å¯¹äºç»“æœè‡³å…³é‡è¦ï¼›</li>
<li>ç”¨ entropy loss çš„ Contrastive Learningï¼Œå¯ä»¥é€šè¿‡ normalize representation embedding ä»¥åŠ temperature adjustment æç‚¹ï¼›</li>
<li>åœ¨è®¡ç®— loss ä¹‹å‰ï¼Œè®©è¡¨ç¤ºå†è¿‡ä¸€ä¸ª non-linear hard èƒ½å¤§å¹…æå‡æ•ˆæœï¼Œå³ä¸Šé¢æ¡†æ¶å›¾ä¸­çš„ <img src="https://www.zhihu.com/equation?tex=g%28%5Ccdot%29" alt="[å…¬å¼]">ï¼›</li>
<li>å¤§ batch-size å¯¹äº CL çš„å¢ç›Šæ¯” Supervised Learning æ›´å¤§ã€‚</li>
</ul>
<p>å…¶ä¸­æœ€åä¸€ä¸ªç»“è®ºï¼Œå’Œ MoCo çš„åˆè¡·æ˜¯ç¬¦åˆçš„ï¼Œå¹¶ä¸”ä½œè€…è™½è¯´ä¸ç”¨ Memory-bankï¼Œä½†æ˜¯ SimCLR å°è¯•çš„ bsz ä¹Ÿè¾¾åˆ°äº†ä»¤äººå‘æŒ‡çš„ 8192ï¼Œç”¨äº† 128 å— TPUï¼Œåˆæ˜¯ç®—åŠ›å…šçš„ä¸€å¤§èƒœåˆ©ã€‚MoCo v2 ä¹Ÿæ˜¯åˆ©ç”¨äº†ä¸Šé¢çš„ç¬¬ä¸€ç‚¹å’Œç¬¬ä¸‰ç‚¹ï¼Œåœ¨ MoCo åŸºç¡€ä¸Šå¾—åˆ°äº†è¿›ä¸€æ­¥çš„æå‡ï¼Œç„¶åä½œè€…è¿˜ä¹Ÿæ˜ç¡®çš„ç‚¹åäº† SimCLRï¼Œç§°ä¸éœ€è¦ä½¿ç”¨é‚£ä¹ˆå¤§çš„ batch size ä¹Ÿèƒ½è¶…è¿‡å®ƒï¼Œå¯èƒ½è¿™å°±æ˜¯ç¥ä»™æ‰“æ¶å§ã€‚</p>
<h3 id="CPC"><a href="#CPC" class="headerlink" title="CPC"></a><strong>CPC</strong></h3><p><img src="https://pic1.zhimg.com/80/v2-155b87baf119fcb3e4f7fcf45c1d1de0_720w.jpg" alt="img"></p>
<p>è®ºæ–‡æ ‡é¢˜ï¼šRepresentation Learning with Contrastive Predictive Coding</p>
<p>è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.zhihu.com/?target=https%3A//arxiv.org/abs/1807.03748" target="_blank" rel="noopener">https://arxiv.org/abs/1807.03748</a></p>
<p>ä»£ç é“¾æ¥ï¼š<a href="https://link.zhihu.com/?target=https%3A//github.com/davidtellez/contrastive-predictive-coding" target="_blank" rel="noopener">https://github.com/davidtellez/contrastive-predictive-coding</a></p>
<p>å‰é¢è®¨è®ºçš„ä¸¤ç¯‡æ–‡ç« ä¸»è¦é›†ä¸­åœ¨å›¾åƒæ•°æ®ä¸Šï¼Œé‚£ä¹ˆå¯¹äºæ–‡æœ¬ã€éŸ³é¢‘è¿™æ ·çš„æ•°æ®ï¼Œå¸¸è§çš„è£å‰ªã€æ—‹è½¬ç­‰å˜æ¢æ“ä½œå°±æ— æ³•é€‚ç”¨äº†ï¼Œå¹¶ä¸”ï¼Œå› ä¸ºå…¶æ•°æ®æœ¬èº«çš„æ—¶åºæ€§ï¼Œè®¾è®¡åˆç†çš„æ–¹æ³•æ¥æŠŠè¿™ä¸€ç‚¹è€ƒè™‘è¿›å»æ˜¯è‡³å…³é‡è¦çš„ã€‚Contrastive Predictive Codingï¼ˆCPCï¼‰ è¿™ç¯‡æ–‡ç« å°±æå‡ºï¼Œå¯ä»¥åˆ©ç”¨ä¸€å®šçª—å£å†…çš„ <img src="https://www.zhihu.com/equation?tex=x_t" alt="[å…¬å¼]"> å’Œ <img src="https://www.zhihu.com/equation?tex=x_%7Bt%2Bk%7D" alt="[å…¬å¼]"> ä½œä¸º Positive pairï¼Œå¹¶ä»è¾“å…¥åºåˆ—ä¹‹ä¸­éšæœºé‡‡æ ·ä¸€ä¸ªè¾“å…¥ <img src="https://www.zhihu.com/equation?tex=x_%7Bt%2A%7D" alt="[å…¬å¼]"> ä½œä¸ºè´Ÿä¾‹ï¼Œä¸‹å›¾è¯´æ˜äº† CPC çš„å·¥ä½œè¿‡ç¨‹ï¼š</p>
<p><img src="https://pic2.zhimg.com/80/v2-795d7581c01c2d35ae154b34a80b2e3d_720w.jpg" alt="img"></p>
<p>ä¸ºäº†æŠŠå†å²çš„ä¿¡æ¯ä¹ŸåŠ å…¥è¿›å»ï¼Œä½œè€…æå‡ºå¯ä»¥åœ¨ <img src="https://www.zhihu.com/equation?tex=z_t" alt="[å…¬å¼]"> ä¸Šé¢å¤–å¢åŠ ä¸€ä¸ªè‡ªé€’å½’æ¨¡å‹ï¼Œä¾‹å¦‚ GRUï¼Œæ¥åœ¨è¡¨ç¤ºä¹‹ä¸­èå…¥æ—¶åºå…³ç³»ï¼Œå¾—åˆ°ç›¸åº”çš„ <img src="https://www.zhihu.com/equation?tex=c_t" alt="[å…¬å¼]"> æ¥è¿›è¡Œå¯¹æ¯”å­¦ä¹ ã€‚åœ¨ä¸‹æ¸¸ä»»åŠ¡ä¸­ï¼Œæ—¢å¯ä»¥ä½¿ç”¨ <img src="https://www.zhihu.com/equation?tex=z_t" alt="[å…¬å¼]"> ä¹Ÿå¯ä»¥ä½¿ç”¨ <img src="https://www.zhihu.com/equation?tex=c_t" alt="[å…¬å¼]"> ï¼Œåˆæˆ–è€…æ˜¯äºŒè€…çš„èåˆï¼Œå¯ä»¥æ ¹æ®ä»»åŠ¡éœ€è¦æ¥è¿›è¡Œçµæ´»çš„é€‰æ‹©ã€‚</p>
<h2 id="Theory-amp-Application"><a href="#Theory-amp-Application" class="headerlink" title="Theory &amp; Application"></a><strong>Theory &amp; Application</strong></h2><p>æ¥ä¸‹æ¥ï¼Œä¼šç®€è¦çš„è®¨è®ºå‡ ç¯‡å…³äºå¯¹æ¯”å­¦ä¹ çš„ç†è®ºå’Œåº”ç”¨ç±»çš„æ–‡ç« ï¼š</p>
<h3 id="ICML-2019"><a href="#ICML-2019" class="headerlink" title="ICML 2019"></a><strong>ICML 2019</strong></h3><p><img src="https://pic3.zhimg.com/80/v2-307760d8dd68b99f6e40a2f7d36c62f2_720w.jpg" alt="img"></p>
<p>è®ºæ–‡æ ‡é¢˜ï¼šA Theoretical Analysis of Contrastive Unsupervised Representation Learning</p>
<p>è®ºæ–‡æ¥æºï¼šICML 2019</p>
<p>è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.zhihu.com/?target=https%3A//arxiv.org/abs/1902.09229" target="_blank" rel="noopener">https://arxiv.org/abs/1902.09229</a></p>
<p>è¿™ç¯‡æ–‡ç« å‘è¡¨åœ¨ ICML 2019 ä¸Šï¼Œå¯¹æ¯”å­¦ä¹ è¿™ä¸€æ¡†æ¶è™½ç„¶åœ¨ç›´è§‰ä¸Šéå¸¸ make senseï¼Œä½†æ˜¯ç†è®ºä¸Šä¸ºä»€ä¹ˆå¾—åˆ°çš„è¡¨ç¤ºå°±èƒ½å¤Ÿåœ¨ downstream ä¾‹å¦‚ classification ä¸Šè¡¨ç°è‰¯å¥½ï¼Ÿ</p>
<p>è¿™ç¯‡æ–‡ç« é€šè¿‡å®šä¹‰ latent class ä»¥åŠæ ·æœ¬å’Œ latent class çš„è·ç¦»å…¥æ‰‹ï¼Œæ¨å¯¼å‡ºäº†äºŒåˆ†ç±»æƒ…å†µä¸‹çš„ loss boundï¼Œä¿è¯äº†å…¶çš„æ³›åŒ–æ€§èƒ½ã€‚æ–‡ç« æå‡ºäº†ä¸€ä¸ªæ”¹è¿›ç®—æ³•å°±æ˜¯è¿›è¡Œ block å¤„ç†ï¼Œä¸å†ç›´æ¥ä¼˜åŒ–å„ä¸ª pair çš„ inner productï¼Œè€Œæ˜¯è½¬è€Œä¼˜åŒ– positive blockä»¥åŠ negative block çš„å†…ç§¯ï¼š</p>
<p><img src="https://www.zhihu.com/equation?tex=+%5Cbegin%7Barray%7D%7Bl%7D+L%5E%7Bb+l+o+c+k%7D%28f%29%3A%3D+%5C%5C+%5Cmathbb%7BE%7D%5Cleft%5B%5Cell%5Cleft%28f%28x%29%5E%7BT%7D%5Cleft%28%5Cfrac%7B%5Csum_%7Bi%7D+f%5Cleft%28x_%7Bi%7D%5E%7B%2B%7D%5Cright%29%7D%7Bb%7D-%5Cfrac%7B%5Csum_%7Bi%7D+f%5Cleft%28x_%7Bi%7D%5E%7B-%7D%5Cright%29%7D%7Bb%7D%5Cright%29%5Cright%29%5Cright%5D+%5Cend%7Barray%7D%5C%5C" alt="[å…¬å¼]"></p>
<p>æ–‡ç« åœ¨åç»­çš„å®éªŒä¸Šä¹ŸéªŒè¯äº†è¿™ä¸€æ–¹æ³•ä¼šä¼˜äºå†…ç§¯æ–¹æ³•ã€‚</p>
<h3 id="NIPS-2017"><a href="#NIPS-2017" class="headerlink" title="NIPS 2017"></a><strong>NIPS 2017</strong></h3><p><img src="https://pic3.zhimg.com/80/v2-3e09dd4db86352a77c0589dd21fea066_720w.jpg" alt="img"></p>
<p>è®ºæ–‡æ ‡é¢˜ï¼šContrastive Learning for Image Captioning</p>
<p>è®ºæ–‡æ¥æºï¼šNIPS 2017</p>
<p>è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.zhihu.com/?target=https%3A//arxiv.org/abs/1710.02534" target="_blank" rel="noopener">https://arxiv.org/abs/1710.02534</a></p>
<p>ä»£ç é“¾æ¥ï¼š<a href="https://link.zhihu.com/?target=https%3A//github.com/doubledaibo/clcaption_nips2017" target="_blank" rel="noopener">https://github.com/doubledaibo/clcaption_nips2017</a></p>
<p>è¿™ç¯‡æ–‡ç« å¸Œæœ›é€šè¿‡ä½¿ç”¨å¯¹æ¯”å­¦ä¹ æ¥è§£å†³ image captioning ä¸­æ ‡é¢˜æ–‡æœ¬<strong>å¯åŒºåˆ«æ€§</strong>çš„é—®é¢˜ï¼Œå³å°½å¯èƒ½è®©æ ‡é¢˜æè¿°å’Œå”¯ä¸€çš„ä¸€å¼ å›¾ç‰‡å¯¹åº”ï¼Œè€Œä¸æ˜¯ç¬¼ç»Ÿè€Œåˆæ¨¡ç³Šçš„å¯èƒ½å’Œå¤šå¼ å›¾ç‰‡å¯¹åº”ã€‚ä½œè€…å¼•å…¥å¯¹æ¯”å­¦ä¹ ï¼ŒæŠŠå¯¹åº”çš„å›¾åƒå’Œæ ‡é¢˜ä½œä¸ºæ­£ä¾‹ pair <img src="https://www.zhihu.com/equation?tex=%28c%2C+I%5E%2B%29" alt="[å…¬å¼]">ï¼Œå¹¶æŠŠå…¶ä¸­çš„å›¾åƒéšæœºé‡‡æ ·å¾—åˆ°è´Ÿä¾‹ pair <img src="https://www.zhihu.com/equation?tex=%28c%2C+I%5E-%29" alt="[å…¬å¼]">ï¼Œå¹¶ä¸”åœ¨å·²æœ‰çš„ sota æ¨¡å‹ä¸Šä¼˜åŒ– <img src="https://www.zhihu.com/equation?tex=p%28c%7CI%5E%2B%29+-+p%28c%7CI%5E-%29" alt="[å…¬å¼]">ï¼Œæå‡ç”Ÿæˆçš„ caption çš„æ•ˆæœã€‚</p>
<h3 id="ICLR-2020"><a href="#ICLR-2020" class="headerlink" title="ICLR 2020"></a><strong>ICLR 2020</strong></h3><p><img src="https://pic4.zhimg.com/80/v2-e0a52b992f6424411deba5bd5341f2fb_720w.jpg" alt="img"></p>
<p>è®ºæ–‡æ ‡é¢˜ï¼šContrastive Learning of Structured World Models</p>
<p>è®ºæ–‡æ¥æºï¼šICLR 2020</p>
<p>è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.zhihu.com/?target=https%3A//arxiv.org/abs/1911.12247" target="_blank" rel="noopener">https://arxiv.org/abs/1911.12247</a></p>
<p>ä»£ç é“¾æ¥ï¼š<a href="https://link.zhihu.com/?target=https%3A//github.com/tkipf/c-swm" target="_blank" rel="noopener">https://github.com/tkipf/c-swm</a></p>
<p>å‰é¢æåˆ°ï¼Œè¡¨ç¤ºå­¦ä¹ èƒ½å¤Ÿè¾ƒå¥½çš„è§£å†³ä¸€äº›ç®€å•çš„ä»»åŠ¡ï¼Œä½†æ˜¯ç†è§£ç‰©ä½“ä¹‹é—´çš„å…³ç³»ä»¥åŠå»ºæ¨¡å…¶é—´çš„äº¤äº’å…³ç³»ä¸å•å•éœ€è¦å¥½çš„è¡¨ç¤ºï¼ŒåŒæ ·éœ€è¦ä¸€ä¸ªå¥½çš„å½’çº³åå¥½ã€‚è¿™ç¯‡æ–‡ç« å°±æ˜¯é€šè¿‡åˆ©ç”¨ state set æ¥è¡¨ç¤ºä¸–ç•Œä¸­å„ä¸ªç‰©ä½“çš„çŠ¶æ€ï¼Œå¹¶ä¸”åˆ©ç”¨å›¾ç¥ç»ç½‘ç»œæ¥å»ºæ¨¡å…¶ä¹‹é—´çš„äº¤äº’ï¼Œå†è¿›ä¸€æ­¥åœ°åˆ©ç”¨å¯¹æ¯”å­¦ä¹ æ¥æå‡æ€§èƒ½ï¼Œä¸‹å›¾ç»™å‡ºäº†æ¨¡å‹çš„ç¤ºæ„å›¾ï¼š</p>
<p><img src="https://pic3.zhimg.com/80/v2-a349c7e19a4f2690073a6fefde343de6_720w.jpg" alt="img"></p>
<p>è¿™é‡Œçš„å¯¹æ¯”å­¦ä¹ æ˜¯ä» TransE æ¶æ„è¿ç§»è€Œæ¥ï¼Œå…·ä½“åœ°ï¼Œåœ¨ TransE ä¸­ï¼Œæˆ‘ä»¬ä¼šå¸Œæœ›ä¸€ä¸ªä¸‰å…ƒç»„ <img src="https://www.zhihu.com/equation?tex=%28e_t%2C+r_t%2C+o_t%29" alt="[å…¬å¼]"> çš„èƒ½å¤Ÿè®© <img src="https://www.zhihu.com/equation?tex=H+%3D+d%28+f%28e_t%29+%2B+g%28r_t%29%2C+f%28o_t%29%29" alt="[å…¬å¼]"> å°½å¯èƒ½çš„å°ï¼Œå³ <img src="https://www.zhihu.com/equation?tex=e_t" alt="[å…¬å¼]"> çš„è¡¨ç¤ºåŠ ä¸Š relation <img src="https://www.zhihu.com/equation?tex=r_t" alt="[å…¬å¼]"> çš„è¡¨ç¤ºå’Œ <img src="https://www.zhihu.com/equation?tex=o_t" alt="[å…¬å¼]"> çš„è¡¨ç¤ºå°½å¯èƒ½åœ°æ¥è¿‘ï¼Œè€Œè¿ç§»åˆ°ä¸–ç•Œæ¨¡å‹ä¸­ï¼Œå°±æ˜¯è¦å°† entity æ¢æˆç‰©ä½“çš„ stateï¼Œrelation æ¢æˆ actionï¼Œå³ç»è¿‡å›¾å·ç§¯åçš„å¾—åˆ°çš„æ–°çš„è¡¨ç¤ºï¼Œé€šè¿‡ä¸‹é¢çš„å¼å­è¿›è¡Œä¼˜åŒ–ï¼š</p>
<p><img src="https://www.zhihu.com/equation?tex=%5CDelta+z_%7Bt%7D%3DT%5Cleft%28z_%7Bt%7D%2C+a_%7Bt%7D%5Cright%29%3D%5Coperatorname%7BGNN%7D%5Cleft%28%5Cleft%5C%7B%5Cleft%28z_%7Bt%7D%5E%7Bk%7D%2C+a_%7Bt%7D%5E%7Bk%7D%5Cright%29%5Cright%5C%7D_%7Bk%3D1%7D%5E%7BK%7D%5Cright%29+%5C%5C" alt="[å…¬å¼]"><img src="https://www.zhihu.com/equation?tex=d%5Cleft%28z_%7Bt%7D%2BT%5Cleft%28z_%7Bt%7D%2C+a_%7Bt%7D%5Cright%29%2C+z_%7Bt%2B1%7D%5Cright%29%2B%5Cmax+%5Cleft%280%2C+%5Cgamma-d%5Cleft%28%5Ctilde%7Bz%7D_%7Bt%7D%2C+z_%7Bt%2B1%7D%5Cright%29%5Cright%29+%5C%5C" alt="[å…¬å¼]"></p>
<p>è¿™é‡Œçš„ <img src="https://www.zhihu.com/equation?tex=%5Ctilde+z_t" alt="[å…¬å¼]"> æ˜¯ä» experience buffer ä¸­é‡‡æ ·å¾—åˆ°çš„è´Ÿä¾‹æ ·æœ¬ï¼Œæ–‡ç« åœ¨åç»­å¤šç‰©ä½“äº¤äº’ç¯å¢ƒçš„æ¨¡æ‹Ÿå®éªŒä¸­éªŒè¯äº†å…¶æ–¹æ³•çš„ä¼˜è¶Šæ€§ã€‚</p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a><strong>Summary</strong></h2><p>æœ¬æ–‡ä»‹ç»äº†å…³äºå¯¹æ¯”å­¦ä¹ èƒŒåçš„åŠ¨æœºï¼Œä»¥åŠä¸€ç³»åˆ—åœ¨å›¾åƒã€æ–‡æœ¬ä¸Šçš„ä¸€äº›å·¥ä½œï¼Œåœ¨è®¡ç®—æœºè§†è§‰é¢†åŸŸï¼Œå…¶ä¹ å¾—çš„è¡¨ç¤ºèƒ½å¤Ÿå¾ˆå¥½åœ°åœ¨ä¸‹æ¸¸ä»»åŠ¡æ³›åŒ–ï¼Œç”šè‡³èƒ½å¤Ÿè¶…è¿‡ç›‘ç£å­¦ä¹ çš„æ–¹æ³•ã€‚</p>
<p>å›è¿‡å¤´æ¥çœ‹ï¼Œé¢„è®­ç»ƒæ¨¡å‹ä» ImageNet å¼€å§‹ï¼Œåæ¥è¿™ä¸€æ€æƒ³è¿ç§»åˆ° NLPï¼Œæœ‰äº† BERT ç­‰ä¸€ç³»åˆ—é€šè¿‡è‡ªç›‘ç£çš„é¢„è®­ç»ƒæ–¹æ³•æ¥å­¦ä¹ è¡¨ç¤ºï¼Œåæ¥è¿™ä¸€æƒ³æ³•åˆåå“ºäº†è®¡ç®—æœºè§†è§‰é¢†åŸŸï¼Œå¼•å‡ºäº†è¯¸å¦‚ MoCoã€SimCLR ç­‰å·¥ä½œï¼Œåœ¨ä¸€ç³»åˆ—åˆ†å‰²ã€åˆ†ç±»ä»»åŠ¡ä¸Šéƒ½å–å¾—äº†æƒŠäººçš„è¡¨ç°ã€‚é‚£ä¹ˆï¼Œè¿™ä¸€æ€æƒ³ä¼šä¸ä¼šåˆå†æ¬¡å’Œ NLP ç»“åˆï¼Œç¢°æ’å‡ºæ–°çš„ç«èŠ±å‘¢ï¼Œè®©æˆ‘ä»¬æ‹­ç›®ä»¥å¾…ã€‚</p>
]]></content>
      <categories>
        <category>Algorithms</category>
      </categories>
      <tags>
        <tag>NLP</tag>
        <tag>Machine Learning</tag>
        <tag>Contrastive Learning</tag>
        <tag>CV</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»€ä¹ˆæ˜¯å¯¹æ¯”å­¦ä¹  (Constrastive Learning) ?</title>
    <url>/2020/11/14/%E4%BB%80%E4%B9%88%E6%98%AF%E5%AF%B9%E6%AF%94%E5%AD%A6%E4%B9%A0-Constrastive-Learning/</url>
    <content><![CDATA[<p>è¿‘å¹´æ¥ï¼Œè‡ªæˆ‘ç›‘ç£æ¨¡å¼çš„æˆåŠŸå¯ä»¥å½’å› äºç ”ç©¶è€…å¯¹å¯¹æ¯”å­¦ä¹ è¿™ä¸€è‡ªæˆ‘ç›‘ç£å­¦ä¹ èŒƒå¼çš„é‡æ–°å…´è¶£ã€‚ä¾‹å¦‚ï¼Œäººç±»å¯ä»¥è¾¨è®¤å‡ºé‡å¤–çš„ç‰©ä½“ï¼Œå³ä½¿æˆ‘ä»¬ä¸è®°å¾—ç‰©ä½“çš„ç¡®åˆ‡æ ·å­ã€‚ æˆ‘ä»¬é€šè¿‡è®°ä½é«˜å±‚ç‰¹å¾è€Œå¿½ç•¥å¾®è§‚å±‚é¢çš„ç»†èŠ‚æ¥åšåˆ°è¿™ç‚¹ã€‚æ‰€ä»¥ï¼Œç°åœ¨çš„é—®é¢˜æ˜¯ï¼Œ<strong>æˆ‘ä»¬æ˜¯å¦å¯ä»¥å»ºç«‹ä¸€ä¸ªä¸å…³æ³¨åƒç´ çº§ç»†èŠ‚ï¼Œåªç¼–ç è¶³ä»¥åŒºåˆ†ä¸åŒå¯¹è±¡çš„é«˜çº§ç‰¹å¾çš„è¡¨ç¤ºå­¦ä¹ ç®—æ³•</strong>ï¼Ÿé€šè¿‡å¯¹æ¯”å­¦ä¹ ï¼Œç ”ç©¶äººå‘˜æ­£è¯•å›¾è§£å†³è¿™ä¸€é—®é¢˜ã€‚ æœ€è¿‘ï¼Œç”šè‡³è¿Googleçš„<font color="orange"><strong>SimCLR</strong></font>ä¹Ÿå±•ç¤ºäº†å¯¹æ¯”å­¦ä¹ çš„å«ä¹‰ï¼Œæˆ‘ä»¬å°†åœ¨æœ¬æ–‡çš„æœ€åç®€è¦ä»‹ç»è¿™ä¸€ç‚¹ã€‚</p>
<h1 id="å¯¹æ¯”å­¦ä¹ çš„åŸºæœ¬åŸåˆ™"><a href="#å¯¹æ¯”å­¦ä¹ çš„åŸºæœ¬åŸåˆ™" class="headerlink" title="å¯¹æ¯”å­¦ä¹ çš„åŸºæœ¬åŸåˆ™"></a>å¯¹æ¯”å­¦ä¹ çš„åŸºæœ¬åŸåˆ™</h1><p><div align="center"> <img src="/images/blog/2020/constrastive.png" alt></div></p>
<p>å¯¹æ¯”å­¦ä¹ æ˜¯ä¸€ç§ä¸ºMLæ¨¡å‹æè¿°ç›¸ä¼¼å’Œä¸åŒäº‹ç‰©çš„ä»»åŠ¡çš„æ–¹æ³•ã€‚åˆ©ç”¨è¿™ç§æ–¹æ³•ï¼Œå¯ä»¥è®­ç»ƒæœºå™¨å­¦ä¹ æ¨¡å‹æ¥åŒºåˆ†ç›¸ä¼¼å’Œä¸åŒçš„å›¾åƒã€‚ å¯¹æ¯”å­¦ä¹ çš„å†…éƒ¨å·¥ä½œå¯ä»¥è¡¨è¿°ä¸ºä¸€ä¸ªåˆ†æ•°å‡½æ•°ï¼Œå®ƒæ˜¯è¡¡é‡ä¸¤ä¸ªç‰¹å¾ä¹‹é—´ç›¸ä¼¼åº¦çš„ä¸€ä¸ªå°ºåº¦ã€‚</p>
<script type="math/tex; mode=display">
\mathrm{score}(f(x), f(x^+)) >> \mathrm{score}(f(x), f(x^-))</script><ul>
<li>x+æ˜¯ä¸xç›¸ä¼¼çš„æ•°æ®ç‚¹ï¼Œç§°ä¸ºé˜³æ€§æ ·æœ¬</li>
<li>xâˆ’æ˜¯ä¸xä¸åŒçš„æ•°æ®ç‚¹ï¼Œç§°ä¸ºé˜´æ€§æ ·æœ¬ </li>
</ul>
<p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¯ä»¥æ„å»ºä¸€ä¸ªsoftmaxåˆ†ç±»å™¨æ¥æ­£ç¡®åœ°å¯¹æ­£æ ·æœ¬å’Œè´Ÿæ ·æœ¬è¿›è¡Œåˆ†ç±»ã€‚åœ¨æœ€è¿‘å¼•å…¥çš„<a href="https://ai.googleblog.com/2020/04/advancing-self-supervised-and-semi.html" target="_blank" rel="noopener">SimCLR</a>æ¡†æ¶ä¸­ä¹Ÿå¯ä»¥æ‰¾åˆ°è¿™ç§æŠ€æœ¯çš„ç±»ä¼¼åº”ç”¨ã€‚</p>
<font color="blue">PS: SimCLRæ˜¯Hintonåœ¨2019å¹´æå‡ºçš„å·¥ä½œï¼Œæœ€è¿‘åœ¨ä¸åŒçš„åœ°æ–¹åå¤çœ‹åˆ°å››äº”æ¬¡äº†ï¼Œä¸€å®šè¦æ‰¾ä¸ªæ—¶é—´äº†è§£ä¸€ä¸‹ã€‚</font>

<a id="more"></a>
<h1 id="åº”ç”¨å¯¹æ¯”å­¦ä¹ "><a href="#åº”ç”¨å¯¹æ¯”å­¦ä¹ " class="headerlink" title="åº”ç”¨å¯¹æ¯”å­¦ä¹ "></a>åº”ç”¨å¯¹æ¯”å­¦ä¹ </h1><p>è°·æ­Œæ¨å‡ºäº†ä¸€ä¸ªåä¸ºâ€œSimCLRâ€çš„æ¡†æ¶ï¼Œä½¿ç”¨å¯¹æ¯”å­¦ä¹ ã€‚è¯¥æ¡†æ¶é¦–å…ˆå­¦ä¹ æœªæ ‡è®°æ•°æ®é›†ä¸Šå›¾åƒçš„ä¸€èˆ¬è¡¨ç¤ºï¼Œç„¶åé’ˆå¯¹ç»™å®šçš„åˆ†ç±»ä»»åŠ¡ï¼Œä½¿ç”¨å¸¦æ ‡ç­¾å›¾åƒçš„å°æ•°æ®é›†å¯¹å…¶è¿›è¡Œå¾®è°ƒã€‚ <strong>é€šè¿‡åŒæ—¶æœ€å¤§åŒ–åŒä¸€å›¾åƒçš„ä¸åŒç‰ˆæœ¬æˆ–è§†å›¾ä¹‹é—´çš„ä¸€è‡´æ€§ï¼Œå¹¶é€šè¿‡å¯¹æ¯”å­¦ä¹ ç¼©å°å·®å¼‚æ¥å­¦ä¹ åŸºæœ¬è¡¨å¾ã€‚</strong> å½“ä½¿ç”¨è¿™ä¸ªå¯¹æ¯”ç›®æ ‡æ›´æ–°ç¥ç»ç½‘ç»œçš„å‚æ•°æ—¶ï¼Œç›¸åº”è§†å›¾çš„è¡¨ç¤ºç›¸äº’â€œå¸å¼•â€ï¼Œè€Œéå¯¹åº”è§†å›¾çš„è¡¨ç¤ºç›¸äº’â€œæ’æ–¥â€ã€‚ åœ¨<a href="https://amitness.com/2020/03/illustrated-simclr/" target="_blank" rel="noopener">è¿™ä¸ªåšå®¢</a>ä¸­ï¼Œå¯¹åŸå§‹è®ºæ–‡ä½œäº†æ›´ç»†è‡´çš„è§£é‡Šã€‚</p>
<p>ç¨‹åºå¦‚ä¸‹ï¼š </p>
<ol>
<li>é¦–å…ˆï¼Œä»åŸå§‹å›¾åƒç”Ÿæˆä¸€å®šå¤§å°çš„æ‰¹å¤„ç†æ•°æ®ï¼ˆBatchï¼‰ï¼Œæ¯”å¦‚N </li>
<li>å¯¹äºè¿™ä¸ªæ‰¹å¤„ç†ä¸­çš„æ¯ä¸ªå›¾åƒï¼Œåº”ç”¨ä¸€ä¸ªéšæœºå˜æ¢å‡½æ•°æ¥è·å¾—ä¸€å¯¹ä¸¤ä¸ªå›¾åƒ </li>
<li>ä¸€å¯¹å›¾åƒä¸­çš„æ¯ä¸ªå¢å¼ºå›¾åƒéƒ½é€šè¿‡ä¸€ä¸ªç¼–ç å™¨æ¥è·å¾—å›¾åƒè¡¨ç¤ºã€‚</li>
<li>ä¸¤ä¸ªå¢å¼ºå›¾åƒçš„è¡¨ç¤ºç„¶åé€šè¿‡ä¸€ä¸ªéçº¿æ€§å¯†é›†å±‚ï¼Œç„¶åæ˜¯ä¸€ä¸ªReLUï¼Œç„¶åæ˜¯å¦ä¸€ä¸ªå¯†é›†å±‚ã€‚è¿™äº›å›¾åƒè¢«ä¼ é€’åˆ°ä¸€ç³»åˆ—è¿™äº›å±‚ä¸Šï¼Œä»¥åº”ç”¨éçº¿æ€§å˜æ¢å¹¶å°†å…¶æŠ•å½±åˆ°è¡¨ç¤ºä¸­ </li>
<li>å¯¹äºæ‰¹å¤„ç†ä¸­çš„æ¯ä¸ªå¢å¼ºå›¾åƒï¼Œè·å–ä¸€ä¸ªåµŒå…¥å‘é‡ã€‚</li>
</ol>
<p>ç°åœ¨ï¼Œå›¾åƒçš„ä¸¤ä¸ªå¢å¼ºç‰ˆæœ¬ä¹‹é—´çš„ç›¸ä¼¼æ€§æ˜¯ç”¨ä½™å¼¦ç›¸ä¼¼æ€§æ¥è®¡ç®—çš„ã€‚SimCLRä½¿ç”¨â€œNT-XentæŸå¤±â€ï¼ˆæ ‡å‡†åŒ–çš„æ¸©åº¦æ ‡åº¦äº¤å‰ç†µæŸå¤±ï¼‰ï¼Œå³æ‰€è°“çš„å¯¹æ¯”æŸå¤±</p>
<p><img src="/images/blog/2020/pair.png" alt></p>
<p>é¦–å…ˆï¼Œé€ä¸ªè·å–æ‰¹å¤„ç†ä¸­çš„å¢å¹¿å¯¹ã€‚ç„¶ååº”ç”¨ä¸€ä¸ªsoftmaxå‡½æ•°æ¥è®¡ç®—è¿™ä¸¤ä¸ªå›¾åƒç›¸ä¼¼çš„æ¦‚ç‡ã€‚</p>
<p><img src="/images/blog/2020/softmax.png" alt></p>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œsoftmaxå‡½æ•°å¯ç”¨äºè®¡ç®—ä¸¤ä¸ªå¢å¼ºcatå›¾åƒçš„ç›¸ä¼¼æ€§ï¼Œå¹¶å°†æ‰¹å¤„ç†ä¸­çš„æ‰€æœ‰å‰©ä½™å›¾åƒä½œä¸ºä¸åŒçš„å›¾åƒï¼ˆè´Ÿå¯¹ï¼‰è¿›è¡Œé‡‡æ ·ã€‚ </p>
<p>åŸºäºè¿™ç§æŸå¤±ï¼Œç¼–ç å™¨å’ŒæŠ•å½±å¤´çš„è¡¨ç¤ºä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œæ”¹è¿›ï¼Œå¹¶ä¸”å¾—åˆ°çš„è¡¨ç¤ºå°†ç›¸ä¼¼çš„å›¾åƒæ”¾åœ¨æ›´è¿‘çš„ç©ºé—´ä¸­ã€‚ SimCLRçš„å®éªŒç»“æœè¡¨æ˜ï¼Œå®ƒåœ¨ImageNetä¸Šçš„æ€§èƒ½ä¼˜äºä»¥å¾€çš„è‡ªç›‘ç£å­¦ä¹ æ–¹æ³•ã€‚</p>
<h1 id="è‡ªç›‘ç£å­¦ä¹ "><a href="#è‡ªç›‘ç£å­¦ä¹ " class="headerlink" title="è‡ªç›‘ç£å­¦ä¹ "></a>è‡ªç›‘ç£å­¦ä¹ </h1><p><strong>è‡ªç›‘ç£å­¦ä¹ æœ‰ä»€ä¹ˆä¼˜åŠ¿å‘¢ï¼Ÿ</strong></p>
<p>ç›®å‰æœºå™¨å­¦ä¹ ä¸»æµçš„æ–¹æ³•å¤§å¤šæ˜¯ç›‘ç£å­¦ä¹ æ–¹æ³•ï¼Œè¿™ç±»æ–¹æ³•ä¾èµ–äººå·¥æ ‡æ³¨çš„æ ‡ç­¾ï¼Œè¿™ä¼šå¸¦æ¥ä¸€äº›ç¼ºé™·ï¼š</p>
<ul>
<li><strong>æ•°æ®æœ¬èº«æä¾›çš„ä¿¡æ¯è¿œæ¯”ç¨€ç–çš„æ ‡ç­¾æ›´åŠ ä¸°å¯Œ</strong>ï¼Œå› æ­¤ä½¿ç”¨æœ‰ç›‘ç£å­¦ä¹ æ–¹æ³•è®­ç»ƒæ¨¡å‹éœ€è¦å¤§é‡çš„æ ‡ç­¾æ•°æ®ï¼Œå¹¶ä¸”å¾—åˆ°çš„æ¨¡å‹æœ‰æ—¶å€™æ˜¯â€œè„†å¼±â€çš„</li>
<li>æœ‰ç›‘ç£å­¦ä¹ é€šè¿‡æ ‡ç­¾è®­ç»ƒå¾—åˆ°çš„æ¨¡å‹å¾€å¾€åªèƒ½å­¦åˆ°ä¸€äº›ä»»åŠ¡ç‰¹å®šçš„çŸ¥è¯†ï¼Œè€Œä¸èƒ½å­¦ä¹ åˆ°ä¸€ç§é€šç”¨çš„çŸ¥è¯†ï¼Œå› æ­¤æœ‰ç›‘ç£å­¦ä¹ å­¦åˆ°çš„ç‰¹å¾è¡¨ç¤º<strong>éš¾ä»¥è¿ç§»</strong>åˆ°å…¶ä»–ä»»åŠ¡</li>
</ul>
<p>è€Œè‡ªç›‘ç£å­¦ä¹ èƒ½å¤Ÿå¾ˆå¥½åœ°é¿å…ä¸Šé¢çš„é—®é¢˜ï¼Œå› ä¸ºè‡ªç›‘ç£å­¦ä¹ ç›´æ¥ä½¿ç”¨æ•°æ®æœ¬èº«æ¥æä¾›ç›‘ç£ä¿¡æ¯æ¥æŒ‡å¯¼å­¦ä¹ ã€‚</p>
<p>å½“å‰è‡ªç›‘ç£å­¦ä¹ å¯ä»¥è¢«å¤§è‡´åˆ†ä¸ºä¸¤ç±»ï¼š</p>
<ol>
<li>Generative Methods</li>
<li>Contrastive Methods</li>
</ol>
<p>Generative Methodsï¼ˆç”Ÿæˆå¼æ–¹æ³•ï¼‰è¿™ç±»æ–¹æ³•ä»¥è‡ªç¼–ç å™¨ä¸ºä»£è¡¨ï¼Œä¸»è¦å…³æ³¨pixel labelçš„lossã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨è‡ªç¼–ç å™¨ä¸­å¯¹æ•°æ®æ ·æœ¬ç¼–ç æˆç‰¹å¾å†è§£ç é‡æ„ï¼Œè¿™é‡Œè®¤ä¸ºé‡æ„çš„æ•ˆæœæ¯”è¾ƒå¥½åˆ™è¯´æ˜æ¨¡å‹å­¦åˆ°äº†æ¯”è¾ƒå¥½çš„ç‰¹å¾è¡¨è¾¾ï¼Œè€Œé‡æ„çš„æ•ˆæœé€šè¿‡pixel labelçš„lossæ¥è¡¡é‡ã€‚</p>
<p>Contrastive Methodsï¼ˆå¯¹æ¯”å¼æ–¹æ³•ï¼‰è¿™ç±»æ–¹æ³•åˆ™æ˜¯é€šè¿‡å°†æ•°æ®åˆ†åˆ«ä¸æ­£ä¾‹æ ·æœ¬å’Œè´Ÿä¾‹æ ·æœ¬åœ¨ç‰¹å¾ç©ºé—´è¿›è¡Œå¯¹æ¯”ï¼Œæ¥å­¦ä¹ æ ·æœ¬çš„ç‰¹å¾è¡¨ç¤ºã€‚Contrastive Methodsä¸»è¦çš„éš¾ç‚¹åœ¨äºå¦‚ä½•æ„é€ æ­£è´Ÿæ ·æœ¬ã€‚</p>
<p><strong>é‚£ä¹ˆï¼ŒContrastive Methodsæœ‰ä»€ä¹ˆä¼˜åŠ¿å‘¢ï¼Ÿ</strong></p>
<p>è¿™é‡Œä¸¾ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜ï¼ŒEpsteinåœ¨2016å¹´åšäº†ä¸€ä¸ªå®éªŒï¼šè®©å—è¯•è€…ç”»å‡ºç¾å…ƒçš„å›¾åƒï¼Œè¶Šè¯¦ç»†è¶Šå¥½ï¼Œä¸‹å›¾æ˜¯å—è¯•è€…ç”»å‡ºæ¥çš„ç¾å…ƒå›¾åƒã€‚</p>
<p><img src="/images/blog/2020/dollar.jpg" alt></p>
<p>å·¦å›¾æ˜¯å—è¯•è€…æ ¹æ®å°è±¡ç”»å‡ºæ¥çš„ç¾å…ƒï¼Œå³å›¾åˆ™æ˜¯è®©å—è¯•è€…ç…§ç€ç¾å…ƒç”»å‡ºæ¥çš„ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå·¦å›¾ç”»å‡ºæ¥çš„ç¾å…ƒå›¾è™½ç„¶ä¸å¤Ÿè¯¦ç»†ï¼Œä½†å·²ç»å……åˆ†å…·å¤‡ä¸€å¼ ç¾å…ƒçš„åˆ¤åˆ«æ€§ä¿¡æ¯ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠå®ƒè¯†åˆ«æˆç¾å…ƒã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦è§åˆ°ä¸€å¼ ç¾å…ƒæ‰€æœ‰è¯¦ç»†çš„ä¿¡æ¯ï¼Œè€Œä»…ä»…é€šè¿‡ä¸€äº›å…³é”®çš„ç‰¹å¾å°±å¯ä»¥è¯†åˆ«å‡ºæ¥ã€‚</p>
<p>åŒç†ï¼Œç›¸æ¯”èµ·Generative Methodséœ€è¦å¯¹åƒç´ ç»†èŠ‚è¿›è¡Œé‡æ„æ¥å­¦ä¹ åˆ°æ ·æœ¬ç‰¹å¾ï¼ŒContrastive Methodsåªéœ€è¦åœ¨ç‰¹å¾ç©ºé—´ä¸Šå­¦ä¹ åˆ°åŒºåˆ†æ€§ã€‚å› æ­¤Contrastive Methodsä¸ä¼šè¿‡åˆ†å…³æ³¨åƒç´ ç»†èŠ‚ï¼Œè€Œèƒ½å¤Ÿå…³æ³¨æŠ½è±¡çš„è¯­ä¹‰ä¿¡æ¯ï¼Œå¹¶ä¸”ç›¸æ¯”äºåƒç´ çº§åˆ«çš„é‡æ„ï¼Œä¼˜åŒ–ä¹Ÿå˜å¾—æ›´åŠ ç®€å•ã€‚</p>
<h3 id="å¯¹æ¯”å­¦ä¹ ä¸€èˆ¬æ³›å¼"><a href="#å¯¹æ¯”å­¦ä¹ ä¸€èˆ¬æ³›å¼" class="headerlink" title="å¯¹æ¯”å­¦ä¹ ä¸€èˆ¬æ³›å¼"></a>å¯¹æ¯”å­¦ä¹ ä¸€èˆ¬æ³›å¼</h3><p>å¯¹ä»»æ„æ•°æ® <img src="https://www.zhihu.com/equation?tex=x" alt="[å…¬å¼]"> ï¼Œå¯¹æ¯”å­¦ä¹ çš„ç›®æ ‡æ˜¯å­¦ä¹ ä¸€ä¸ªç¼–ç å™¨ <img src="https://www.zhihu.com/equation?tex=f+" alt="[å…¬å¼]"> ä½¿å¾—ï¼š</p>
<p><img src="https://www.zhihu.com/equation?tex=score%28f%28x%29%2Cf%28x%5E%7B%2B%7D%29%29%3E%3Escore%28f%28x%29%2Cf%28x%5E%7B-%7D%29%29" alt="[å…¬å¼]"></p>
<p>å…¶ä¸­ <img src="https://www.zhihu.com/equation?tex=x%5E%7B%2B%7D" alt="[å…¬å¼]"> æ˜¯å’Œ <img src="https://www.zhihu.com/equation?tex=x" alt="[å…¬å¼]"> ç›¸ä¼¼çš„æ­£æ ·æœ¬ï¼Œ <img src="https://www.zhihu.com/equation?tex=x%5E%7B-%7D" alt="[å…¬å¼]"> æ˜¯å’Œ <img src="https://www.zhihu.com/equation?tex=x" alt="[å…¬å¼]"> ä¸ç›¸ä¼¼çš„è´Ÿæ ·æœ¬ï¼Œscoreæ˜¯ä¸€ä¸ªåº¦é‡å‡½æ•°æ¥è¡¡é‡æ ·æœ¬é—´çš„ç›¸ä¼¼åº¦ã€‚</p>
<p>å¦‚æœç”¨å‘é‡å†…ç§¯æ¥è®¡ç®—ä¸¤ä¸ªæ ·æœ¬çš„ç›¸ä¼¼åº¦ï¼Œåˆ™å¯¹æ¯”å­¦ä¹ çš„æŸå¤±å‡½æ•°å¯ä»¥è¡¨ç¤ºæˆï¼š</p>
<p><img src="https://www.zhihu.com/equation?tex=L_%7BN%7D%3D-%5Cmathbb%7BE%7D_%7BX%7D%5Cleft%5B+%5Clog%5Cfrac%7B%5Cexp%5Cleft%28+f%28x%29%5E%7BT%7Df%28x%5E%7B%2B%7D%29+%5Cright%29%7D%7B%5Cexp%5Cleft%28+f%28x%29%5E%7BT%7Df%28x%5E%7B%2B%7D%29+%5Cright%29%2B%5Csum_%7Bj%3D1%7D%5E%7BN-1%7D%7B%5Cexp%5Cleft%28+f%28x%29%5E%7BT%7Df%28x_%7Bj%7D%5E%7B-%7D%29+%5Cright%29%7D%7D+%5Cright%5D" alt="[å…¬å¼]"></p>
<p>å…¶ä¸­å¯¹åº”æ ·æœ¬ <img src="https://www.zhihu.com/equation?tex=x" alt="[å…¬å¼]"> æœ‰1ä¸ªæ ·æœ¬å’ŒN-1ä¸ªè´Ÿæ ·æœ¬ã€‚å¯ä»¥å‘ç°ï¼Œè¿™ä¸ªå½¢å¼ç±»ä¼¼äºäº¤å‰ç†µæŸå¤±å‡½æ•°ï¼Œå­¦ä¹ çš„ç›®æ ‡å°±æ˜¯è®© <img src="https://www.zhihu.com/equation?tex=x" alt="[å…¬å¼]"> çš„ç‰¹å¾å’Œæ­£æ ·æœ¬çš„ç‰¹å¾æ›´ç›¸ä¼¼ï¼ŒåŒæ—¶å’ŒN-1ä¸ªè´Ÿæ ·æœ¬çš„ç‰¹å¾æ›´ä¸ç›¸ä¼¼ã€‚</p>
<p>åœ¨å¯¹æ¯”å­¦ä¹ çš„ç›¸å…³æ–‡çŒ®ä¸­æŠŠè¿™ä¸€æŸå¤±å‡½æ•°ç§°ä½œInfoNCEæŸå¤±ã€‚ä¹Ÿæœ‰ä¸€äº›å…¶ä»–çš„å·¥ä½œæŠŠè¿™ä¸€æŸå¤±å‡½æ•°ç§°ä¸º<a href="https://link.zhihu.com/?target=https%3A//papers.nips.cc/paper/6200-improved-deep-metric-learning-with-multi-class-n-pair-loss-objective" target="_blank" rel="noopener">multi-class n-pair loss</a>æˆ–è€…<a href="https://link.zhihu.com/?target=https%3A//arxiv.org/abs/1809.01812" target="_blank" rel="noopener">ranking-based NCE</a>ã€‚</p>
]]></content>
      <categories>
        <category>Algorithms</category>
      </categories>
      <tags>
        <tag>Machine Learning</tag>
        <tag>Constrative Learning</tag>
        <tag>Constrative</tag>
      </tags>
  </entry>
  <entry>
    <title>Contrastive Loss</title>
    <url>/2020/11/13/Contrastive-Loss/</url>
    <content><![CDATA[<blockquote>
<p>éƒ¨åˆ†å†…å®¹å‚è€ƒä»¥ä¸‹æ–‡ç« ï¼š</p>
<p><a href="https://zhuanlan.zhihu.com/p/93917636" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/93917636</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/149748513" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/149748513</a></p>
</blockquote>
<p><br></p>
<h1 id="1-ä»€ä¹ˆæ˜¯å¯¹æ¯”æŸå¤±ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯å¯¹æ¯”æŸå¤±ï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯å¯¹æ¯”æŸå¤±ï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯å¯¹æ¯”æŸå¤±ï¼Ÿ</h1><p>æœ€è¿‘Kaiming He, Haoqi Fan, Yuxin Wu, Saining Xie ä¸ Ross Girshickåœ¨å›¾åƒå¤„ç†ä»»åŠ¡ä¸Šä½¿ç”¨è‡ªç›‘ç£é¢„è®­ç»ƒä»å›¾åƒä¸­æå–ç‰¹å¾ï¼Œåœ¨7ä¸ªä¸‹æ¸¸ä»»åŠ¡ä¸­è¶…è¿‡ç›‘ç£å­¦ä¹ çš„ç‰¹å¾æå–è¡¨ç°ã€‚ä½¿ç”¨çš„æ ¸å¿ƒæŠ€æœ¯æ˜¯å¯¹æ¯”æŸå¤±(Contrastive Loss Function)ï¼Œå¦‚ä½•ç†è§£è¿™ä¸ªå¯¹æ¯”æŸå¤±å‘¢ï¼Ÿè¿™ç¯‡æ–‡ç« è®°å½•ä¸ªäººçš„ç›´è§‚ç†è§£ã€‚</p>
<p>å…ˆè¯´å¤§å®¶ç†Ÿæ‚‰çš„æŸå¤±å‡½æ•°ï¼Œcategorical crossentropy, å®ƒè®¡ç®—äº†ç±»æ¦‚ç‡ä¸æ ‡å‡†ç­”æ¡ˆçš„è·ç¦»ã€‚softmax ç”¨ä½œæœ€åä¸€å±‚çš„æ¿€æ´»å‡½æ•°ï¼Œè®¡ç®—å½’ä¸€åŒ–çš„ç±»æ¦‚ç‡ã€‚æ¯ä¸ªç±»çš„æ ‡å‡†ç­”æ¡ˆæ˜¯ one-hot è¡¨ç¤ºã€‚æ¯”å¦‚åœ¨çŒ«ï¼Œç‹—ï¼ŒçŒªä¸‰åˆ†ç±»ä»»åŠ¡ä¸­, one-hot è¡¨ç¤ºä¸ºï¼Œ</p>
<p>=(1, 0, 0)</p>
<p>=(0, 1, 0)</p>
<p>=(0, 0, 1)</p>
<p>è¿™å¯¹åº”3ç»´ç©ºé—´æ²¿ x-è½´ï¼Œ y-è½´ï¼Œz-è½´çš„3ä¸ªå•ä½åŸºå‘é‡ã€‚</p>
<p>è¿™æ ·åšæ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬æ·»åŠ æ›´å¤šç±»åˆ«ï¼Œæ¯”å¦‚é¢å¤–æ·»åŠ  æ ‘ï¼ŒèŠ±å’Œè‰ï¼Œå°†è¿™6ç§ç”Ÿç‰©æ”¾åœ¨6ç»´ç©ºé—´çš„å•ä½åŸºå‘é‡ä¸Šï¼Œsoftmax å‡½æ•°ä¼šå°†ä»–ä»¬ä¸€è§†åŒä»ï¼Œä¸ä¼šè®¤ä¸ºçŒ«å’Œç‹—ä¹‹é—´çš„è·ç¦»åº”è¯¥å°äºçŒ«ä¸è‰çš„è·ç¦»ï¼Œè™½ç„¶å‰2è€…åŒå±åŠ¨ç‰©ã€‚</p>
<p>æœ€ç›´æ¥çš„æƒ³æ³•æ˜¯æˆ‘ä»¬å‡è®¾å­˜åœ¨ä¸€ä¸ªæŸå¤±å‡½æ•°ï¼Œå®ƒæ»¡è¶³å¦‚ä¸‹çš„åŸºæœ¬å‡†åˆ™</p>
<ol>
<li>è¿‘ä¼¼æ ·æœ¬ä¹‹é—´çš„è·ç¦»è¶Šå°è¶Šå¥½</li>
<li>ä¸ä¼¼æ ·æœ¬ä¹‹é—´çš„è·ç¦»è¶Šå¤§è¶Šå¥½</li>
</ol>
<p>å¦‚æœä¸€ä¸ªæŸå¤±å‡½æ•°åªè¦æ±‚æ»¡è¶³æ¡ä»¶ 1ï¼Œé‚£ä¹ˆç›¸å½“äºè¯´æˆ‘åªè¦åŒä¸€ä¸ªç±»çš„æ ·æœ¬éƒ½æ”¾åœ¨åŒä¸€ä¸ªç‚¹å³å¯ã€‚ç¥ç»ç½‘ç»œå°†çŒ«éƒ½æ”¾åœ¨(1, 0, 0)ä¹‹åï¼Œå°±ç®—å°†ç‹—å’ŒçŒªä¹Ÿæ”¾åœ¨ï¼ˆ1ï¼Œ0ï¼Œ 0ï¼‰ï¼Œä»ç„¶ä¸ä¼šç ´åæ¡ä»¶1ã€‚è¿™æ ·ï¼Œç¥ç»ç½‘ç»œåªè¦å¯¹æ‰€æœ‰æ ·æœ¬ä½œå‡ºä¸€æ ·çš„é¢„æµ‹å°±å¯ä»¥äº†ã€‚</p>
<p>å¦‚æœå†åŠ ä¸Šæ¡ä»¶2ï¼Œæ˜¯ä¸æ˜¯å°±å¥½äº†å‘¢ï¼Ÿä¼˜åŒ–çš„æ—¶å€™ï¼Œç¥ç»ç½‘ç»œå°†çŒ«æ”¾åœ¨(1, 0, 0)ï¼Œç¬¬ä¸€è½®å°†ç‹—æ”¾åœ¨ï¼ˆ0ï¼Œ1ï¼Œ 0ï¼‰ï¼Œç¬¬äºŒè½®å°†ç‹—æ”¾åœ¨ï¼ˆ0ï¼Œ2ï¼Œ 0ï¼‰ï¼Œç„¶åä¸€è½®è½®è®­ç»ƒä¸‹å»ï¼Œç‹—çš„åæ ‡è¢«æ”¾çš„è¶Šæ¥è¶Šè¿œï¼Œä¸ç›¸ä¼¼æ ·æœ¬ä¹‹é—´çš„è·ç¦»è¶Šæ¥è¶Šå¤§ï¼Œä½†è®­ç»ƒçš„ç›®æ ‡å´ä»¿ä½›æ°¸è¿œæ— æ³•è¾¾åˆ° ã€‚ã€‚ã€‚</p>
<p><strong>è¿™æ˜¯å› ä¸ºè®­ç»ƒç›®æ ‡æ²¡æœ‰è¾¹ç•Œã€‚</strong>æ¥åˆ° <strong>LeCun å’Œä»–çš„åˆä½œè€…ä»¬åœ¨2006å¹´æå‡ºçš„å¯¹æ¯”æŸå¤±ï¼ˆContrastive Loss Function)</strong>ã€‚è¿™ä¸ªæŸå¤±å‡½æ•°å®šä¸‹çš„åŸºæœ¬å‡†åˆ™æ˜¯ï¼š<a id="more"></a></p>
<ol>
<li>è¿‘ä¼¼æ ·æœ¬ä¹‹é—´çš„è·ç¦»è¶Šå°è¶Šå¥½ã€‚</li>
<li>ä¸ä¼¼æ ·æœ¬ä¹‹é—´çš„è·ç¦»å¦‚æœå°äºmï¼Œåˆ™é€šè¿‡äº’æ–¥ä½¿å…¶è·ç¦»æ¥è¿‘mã€‚</li>
</ol>
<p>ç¬¬ä¸€ä¸ªå‡†åˆ™ä¸å˜ï¼Œç¬¬äºŒä¸ªå‡†åˆ™é‡ŒåŠ å…¥ä¸€ä¸ªè¶…å‚æ•° mï¼Œä½¿å¾—è®­ç»ƒç›®æ ‡æœ‰äº†è¾¹ç•Œã€‚æ–‡ç« å¯¹ç¬¬äºŒä¸ªå‡†åˆ™æœ‰ä¸ªå½¢è±¡çš„è§£é‡Šï¼Œå°±åƒé•¿åº¦ä¸ºmçš„å¼¹ç°§ï¼Œå¦‚æœå®ƒè¢«å‹ç¼©ï¼Œåˆ™ä¼šå› ä¸ºæ–¥åŠ›æ¢å¤åˆ°é•¿åº¦mã€‚</p>
<p>å†™æˆå…¬å¼å°±æ˜¯ï¼š</p>
<script type="math/tex; mode=display">
L(W,Y,\hat{X_1}, \hat{X}_2) = (1-Y)\frac{1}{2}(D_W)^2 + (Y)\frac{1}{2}\{\max(0, m-D_w)\}^2</script><font color="gray">å…¶ä¸­ W æ˜¯ç½‘ç»œæƒé‡ï¼›Yæ˜¯æˆå¯¹æ ‡ç­¾ï¼Œå¦‚æœX1ï¼ŒX2è¿™å¯¹æ ·æœ¬å±äºåŒä¸€ä¸ªç±»ï¼ŒY=0ï¼Œå±äºä¸åŒç±»åˆ™ Y=1ã€‚Dw æ˜¯ X1 ä¸ X2 åœ¨æ½œå˜é‡ç©ºé—´çš„æ¬§å‡ é‡Œå¾·è·ç¦»ã€‚å½“Y=0ï¼Œè°ƒæ•´å‚æ•°æœ€å°åŒ–X1ä¸X2ä¹‹é—´çš„è·ç¦»ã€‚å½“Y=1ï¼Œå¦‚æœX1ä¸X2ä¹‹é—´è·ç¦»å¤§äºmï¼Œåˆ™ä¸åšä¼˜åŒ–ï¼ˆçœæ—¶çœåŠ›ï¼‰ï¼›å¦‚æœ X1 ä¸ X2 ä¹‹é—´çš„è·ç¦»å°äº m, åˆ™å¢å¤§ä¸¤è€…è·ç¦»åˆ°mã€‚</font>

<font color="orange">æ„Ÿè§‰è¿™é‡Œæœ‰ç‚¹åƒHinge Lossï¼Œéƒ½æ˜¯ç»™æŸå¤±å¢åŠ äº†ä¸€ä¸ªé˜ˆå€¼é™åˆ¶</font>

<p>æ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯é‚£äº›å±äºä¸åŒç±»ï¼Œä½†ä¸¤ä¸¤è·ç¦»å¤©ç”Ÿå¤§äºmçš„æ ·æœ¬å¯¹ã€‚ LeCun çš„å¯¹æ¯”æŸå¤±å®Œå…¨å¿½è§†è¿™äº›æ ·æœ¬å¯¹ï¼Œå¤§å¤§å‡å°‘äº†è®¡ç®—é‡ã€‚å¦ä¸€æ–¹é¢ï¼Œå› ä¸ºæœªå¯¹é‚£äº›æ ·æœ¬åšé™åˆ¶ï¼Œåœ¨å¯¹ç›¸ä¼¼æ ·æœ¬åšèšç±»çš„æ—¶å€™ï¼Œä¸åŒçš„ç±»æ”¶ç¼©åˆ°çš„é«˜ç»´ç©ºé—´ç‚¹æ²¡æœ‰å—åˆ°å¤ªå¤šäººä¸ºé™åˆ¶çš„å½±å“ã€‚è‡³äºè¿™äº›è¢«æ”¶ç¼©åˆ°ä¸€èµ·ä»¥åŠè¢«æ¨å¼€çš„æ ·æœ¬ç‚¹ï¼Œå®ƒä»¬åœ¨æ½œå˜é‡ç©ºé—´çš„åˆ†å¸ƒæ˜¯å¦èƒ½åæ˜ æ•°æ®æœ¬èº«çš„ç»Ÿè®¡è§„å¾‹ï¼Œå¯èƒ½è¿˜éœ€è¦é¢å¤–çš„è€ƒè™‘ã€‚</p>
<p>å¯¹æ¯”æŸå¤±æä¾›äº†ä¸€ä¸ªä¸åŒç±»åˆ«æ ·æœ¬ç‚¹ä¹‹é—´è·ç¦»çš„ä¸‹ç•Œ mã€‚å¦‚æœæƒ³è®©ç¥ç»ç½‘ç»œå­¦ä¹ åˆ°åŠ¨ç‰©æ˜¯åŒä¸€ä¸ªå¤§ç±»ï¼Œæ¤ç‰©æ˜¯å¦ä¸€ä¸ªå¤§ç±»ï¼Œèµ°ç›‘ç£å­¦ä¹ è·¯çº¿å¯èƒ½éœ€è¦è®¾è®¡ <strong>Hierarchical Contrastive Loss</strong>ã€‚ç›®å‰çš„éç›‘ç£å­¦ä¹ ï¼Œä¸çŸ¥é“æ˜¯å¦å·²ç»åšåˆ°äº†è¿™ä¸€ç‚¹ã€‚</p>
<h1 id="2-å¯¹æ¯”æŸå¤±ä¸äº¤å‰ç†µæŸå¤±"><a href="#2-å¯¹æ¯”æŸå¤±ä¸äº¤å‰ç†µæŸå¤±" class="headerlink" title="2. å¯¹æ¯”æŸå¤±ä¸äº¤å‰ç†µæŸå¤±"></a>2. å¯¹æ¯”æŸå¤±ä¸äº¤å‰ç†µæŸå¤±</h1><p>ç°æœ‰çš„åˆ†ç±»æ¨¡å‹ï¼Œæœ€åä¸€å±‚ä¸€èˆ¬ä¸ºlinear + softmaxï¼Œè‹¥å°†ä¹‹å‰çš„ç‰¹å¾è§†ä¸º$f(X_i)$ï¼Œlinearæƒé‡è§†ä¸º$W$ï¼Œåˆ™äº¤å‰ç†µæŸå¤±å…¬å¼ä¸ºï¼š</p>
<script type="math/tex; mode=display">
P(y=c|X_i) = \frac{\exp(W_c^T f(X_i))}{\sum_p \exp(W_p^Tf(X_i))}</script><p>è¿™é‡Œçš„$W_c, W_p$å¯ä»¥çœ‹ä½œ$W$çŸ©é˜µçš„ä¸åŒè¡Œã€‚</p>
<p>åœ¨ä»‹ç»å¯¹æ¯”æŸå¤±ä¹‹å‰ï¼Œå…ˆä»‹ç»non-parametric classificationï¼ˆéå‚æ•°åˆ†ç±»ï¼‰é—®é¢˜ï¼Œå¯¹äºä¸Šå¼ï¼Œ<strong>æ¯ä¸ªæƒé‡å‘é‡äº‹å®ä¸Šä»£è¡¨äº†æ¯ä¸€ç±»æ ·æœ¬å…¶ç‰¹å¾å€¼çš„æ¨¡æ¿</strong>ï¼ˆæ ¹æ®å‘é‡ä¹˜æ³•æˆ‘ä»¬çŸ¥é“è¶Šç›¸ä¼¼çš„ä¸¤ä¸ªå‘é‡å…¶å†…ç§¯è¶Šå¤§ï¼‰ã€‚åˆ°è¿™é‡Œï¼Œå®é™…ä¸Šæˆ‘ä»¬å‘ç°ï¼Œç°æœ‰çš„åˆ†ç±»é—®é¢˜å®é™…ä¸Šå¯ä»¥çœ‹ä½œ<strong>é€šè¿‡ä¸€ç³»åˆ—æ·±åº¦ç½‘ç»œæå–ç‰¹å¾ï¼Œç„¶åä¾æ®å¤§é‡çš„æ ·æœ¬å­¦ä¹ åˆ°æ¯ä¸€ç±»æ ·æœ¬çš„æ¨¡æ¿ã€‚åœ¨æµ‹è¯•çš„é˜¶æ®µåˆ™å°†è¿™ä¸ªå­¦åˆ°çš„ç‰¹å¾æ¨¡æ¿å»åšæ¯”å¯¹ã€‚</strong><font color="orange">æœ‰è¶£çš„è§‚ç‚¹ï¼</font></p>
<p>æ‰€è°“éå‚æ•°æ ·æœ¬åˆ†ç±»ï¼Œåˆ™æ˜¯å°†æ¯ä¸ªè®¡ç®—å‡ºçš„æ ·æœ¬ç‰¹å¾ä½œä¸ºæ¨¡æ¿ï¼Œ</p>
<script type="math/tex; mode=display">
P(y=c|X_i) = \frac{\exp(f(X_c)^T f(X_i))}{\sum_p \exp(f(X_p)^Tf(X_i))}</script><p>ç†è§£å°±æ˜¯<font color="purple"><strong>è®¡ç®—æ ·æœ¬ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼ˆè·ç¦»ï¼‰ä½œä¸ºæŸå¤±</strong></font>ã€‚</p>
<p>å½“ä¸‹å¯¹æ¯”æŸå¤±åœ¨éç›‘ç£å­¦ä¹ ä¸­åº”ç”¨å¾ˆå¹¿æ³›ï¼ŒåŒæ ·å¯¹äºæ•°æ®é›†Dï¼Œæ­¤æ—¶æˆ‘ä»¬æ²¡æœ‰æ ‡ç­¾ï¼Œåœ¨å¯¹æ¯”å­¦ä¹ æ¡†æ¶ä¸‹ï¼Œé€šå¸¸å¤§å®¶ä»¥æ¯å¼ å›¾ç‰‡ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„è¯­ä¹‰ç±»åˆ«ï¼Œå¹¶ä¸”æœ‰ä»¥ä¸‹å‡è®¾ï¼š</p>
<p>å¯¹äºåŸå§‹å›¾ç‰‡Xï¼Œåšä¸åŒçš„å˜æ¢å¾—åˆ°A(X), B(X)ï¼Œæ­¤æ—¶å¯¹æ¯”æŸå¤±å¸Œæœ›A(X), B(X)ä¹‹é—´çš„è·ç¦»å°äºä¸å…¶ä»–å›¾ç‰‡é—´çš„è·ç¦»ã€‚</p>
<script type="math/tex; mode=display">
\mathrm{dist}(A(X), B(X)) < \mathrm{dist}(A(X), X^{'})</script><p>åœ¨å®é™…æ“ä½œä¸­ï¼Œå‡è®¾ä½¿ç”¨cosineè·ç¦»ï¼Œå¹¶ä¸”å·²ç»ç‰¹å¾å½’ä¸€åŒ–ï¼Œåˆ™ä¼˜åŒ–ä¸Šå¼ç­‰ä»·äºä¼˜åŒ–ä¸‹å¼ä¸­çš„softmaxè·ç¦»:</p>
<script type="math/tex; mode=display">
P = \frac{\exp(f(A(X))^T f(B(X))}{\sum_i \exp(f(A(X))^Tf(X_i))}</script><p>ä¸éš¾å‘ç°ï¼Œè¿™ä¸äº¤å‰ç†µæŸå¤±æœ‰ç€ç›¸ä¼¼çš„å½¢å¼ï¼Œ<em>å¯¹æ¯”æŸå¤±å¯ä»¥çœ‹ä½œæ·»åŠ äº†å˜æ¢ä¸ç¡®å®šæ€§çš„éå‚æ•°åˆ†ç±»æŸå¤±</em>ã€‚è¿™é‡Œçš„éå‚æ•°ï¼Œä¸ªäººç†è§£å¯èƒ½æ˜¯æŒ‡æ²¡æœ‰ä¸Šé¢çš„$W$çŸ©é˜µã€‚</p>
]]></content>
      <categories>
        <category>Algorithms</category>
      </categories>
      <tags>
        <tag>Contrastive Loss</tag>
        <tag>CrossEntropy Loss</tag>
        <tag>Loss Function</tag>
      </tags>
  </entry>
  <entry>
    <title>IJCAI 2021 æŠ•ç¨¿å®‰æ’</title>
    <url>/2020/11/13/IJCAI-2021-%E6%8A%95%E7%A8%BF%E5%AE%89%E6%8E%92/</url>
    <content><![CDATA[<p>IJCAIï¼ˆå›½é™…äººå·¥æ™ºèƒ½è”åˆä¼šè®®ï¼‰æ›¾è¢«èª‰ä¸ºäººå·¥æ™ºèƒ½ç•Œçš„å¥³ç¥ï¼Œä½†å› è¿‘å‡ å¹´çš„å®¡ç¨¿ç¿»è½¦äº‹ä»¶ï¼Œå¥³ç¥é«˜ä¸å¯æ”€çš„å½¢è±¡ï¼Œä¼¼ä¹è·Œè½äº†ä¸€äº›ï¼Œ<strong>ç»„å§”ä¼šä¸å¾—ä¸åšå‡ºç´§æ€¥ååº”</strong>ï¼Œå¼€å§‹æ”¹é©ã€‚IJCAIæ–°æå‡ºçš„å¿«é€Ÿæ·˜æ±°æœºåˆ¶ï¼Œ2020ç¬¬ä¸€è½®å®¡ç¨¿å°±æ‹’ç»äº†å°†è¿‘ä¸€åŠï¼Œæœ€åçš„å½•å–ç‡åˆä¸€æ¬¡æ¢äº†åº•ï¼Œç›´é™åˆ°<strong>12.6%</strong>ï¼Œè¢«ç§°ä¸ºâ€œç­éœ¸å¼å®¡ç¨¿â€ä¹Ÿä¸ä¸ºè¿‡ã€‚</p>
<p>æ›´è®©äººæ„Ÿæ…¨å”å˜˜çš„æ˜¯ï¼Œä¸€åœºçªæ¥çš„å…¨çƒç–«æƒ…ï¼Œä½¿å¾—æœ¬è¯¥çº¿ä¸‹äº¤æµçš„å¤§ä¼šï¼Œè¢«è¿«å»¶æœŸåˆ°2021å¹´1æœˆï¼Œå¤§å®¶éƒ½ä¸ç¦çŒœæµ‹ï¼Œç»„å§”ä¼šåœ¨æ­¤å½¢åŠ¿ä¸‹ï¼Œä¼šä¸ä¼šå¹²è„†å–æ¶ˆä¸‹ä¸€å±Šçš„ä¸¾åŠã€‚ä½†å°±åœ¨è¿‘æ—¥ï¼Œå®˜ç½‘æ›´æ–°äº†IJCAI 2021çš„ä¼šè®®å®‰æ’ï¼Œç»ˆäºæ‰“æ¶ˆäº†å¤§å®¶çš„ç–‘è™‘ã€‚</p>
<p>æ ¹æ®å®˜æ–¹å£°æ˜ï¼Œ<strong>è¿™æ¬¡ä¼šè®®è®¡åˆ’äº2021.8.21-26æœŸé—´ï¼Œåœ¨åŠ æ‹¿å¤§è’™ç‰¹åˆ©å°”å¬å¼€</strong>ï¼Œæœ€å—æŠ•ç¨¿è€…å…³æ³¨çš„è®ºæ–‡æ¥æ”¶æµç¨‹ï¼Œä¹Ÿå·²ç»å…¬å¸ƒï¼Œä¸‹é¢å°†ä»‹ç»ä¸€ä¸‹è¡Œç¨‹å®‰æ’ã€‚</p>
<p><strong>ã€IJCAI 2021é‡è¦æ—¶é—´èŠ‚ç‚¹ã€‘</strong></p>
<font color="orange">*ä»¥ä¸‹ä¸ºå®˜æ–¹æ—¶é—´ï¼ˆUTC-12ï¼‰ï¼ŒéåŒ—äº¬æ—¶é—´ï¼ˆUTC+8ï¼‰ï¼Œä¸¤è€…ç›¸å·®20ä¸ªå°æ—¶*</font>

<p><div align="center"> <img src="/images/blog/2020/ijcai.jpg" alt></div></p>
<p>å¯¹åº”äºåŒ—äº¬æ—¶é—´ï¼š<a id="more"></a></p>
<ul>
<li>è®ºæ–‡æäº¤å¼€æ”¾ï¼š2021.1.1</li>
<li>æ‘˜è¦æäº¤æˆªæ­¢ï¼š2021.1.13 19:59</li>
<li>æŠ•ç¨¿è€…ä¿¡æ¯æˆªæ­¢ï¼š2021.1.15 19:59</li>
<li>å®Œæ•´è®ºæ–‡æäº¤æˆªæ­¢ï¼š2021.1.19 19:59</li>
<li>æ‘˜è¦æ‹’ç»é€šçŸ¥ï¼š2021.2.6</li>
<li>æŠ•ç¨¿è€…åé¦ˆæœŸé™ï¼š2021.3.21-25</li>
<li>è®ºæ–‡æ¥æ”¶é€šçŸ¥ï¼š2021.4.26</li>
</ul>
<p>å…³äºè®ºæ–‡æ ¼å¼ã€æ’ç‰ˆå’Œæ¨¡ç‰ˆç­‰ï¼Œå¯å‚è€ƒå®˜æ–¹æŒ‡å¼•ï¼š<a href="https://www.ijcai.org/authors_kit" target="_blank" rel="noopener">https://www.ijcai.org/authors_kit</a></p>
<p>è®ºæ–‡æäº¤åœ°å€ï¼š<a href="https://cmt3.research.microsoft.com/User/Login?ReturnUrl=%2FIJCAI2021" target="_blank" rel="noopener">https://cmt3.research.microsoft.com/User/Login?ReturnUrl=%2FIJCAI2021</a></p>
<p><strong>æ›´å¤šä¿¡æ¯å¤§å®¶å¯ä»¥è¿›å…¥å®˜ç½‘è¿›ä¸€æ­¥äº†è§£</strong>ï¼š<a href="https://ijcai-21.org/cfp/" target="_blank" rel="noopener">https://ijcai-21.org/cfp/</a></p>
<p><br></p>
<h1 id="æœ€åï¼Œå¸Œæœ›èƒ½æˆåŠŸæŠŠå¥³ç¥æŠ±å›å®¶ï½"><a href="#æœ€åï¼Œå¸Œæœ›èƒ½æˆåŠŸæŠŠå¥³ç¥æŠ±å›å®¶ï½" class="headerlink" title="æœ€åï¼Œå¸Œæœ›èƒ½æˆåŠŸæŠŠå¥³ç¥æŠ±å›å®¶ï½"></a>æœ€åï¼Œå¸Œæœ›èƒ½æˆåŠŸæŠŠå¥³ç¥æŠ±å›å®¶ï½</h1>]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>IJCAI</tag>
        <tag>conference</tag>
        <tag>AI</tag>
      </tags>
  </entry>
  <entry>
    <title>fastTextåŸç†åŠå®è·µ</title>
    <url>/2020/11/12/fastText%E5%8E%9F%E7%90%86%E5%8F%8A%E5%AE%9E%E8%B7%B5/</url>
    <content><![CDATA[<h1 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h1><p><a href="https://github.com/facebookresearch/fastText" target="_blank" rel="noopener">fastText</a>æ˜¯ä¸€ä¸ªå¿«é€Ÿæ–‡æœ¬åˆ†ç±»ç®—æ³•ï¼Œä¸åŸºäºç¥ç»ç½‘ç»œçš„åˆ†ç±»ç®—æ³•ç›¸æ¯”æœ‰ä¸¤å¤§ä¼˜ç‚¹ï¼š<br>1ã€fastTextåœ¨ä¿æŒé«˜ç²¾åº¦çš„æƒ…å†µä¸‹åŠ å¿«äº†è®­ç»ƒé€Ÿåº¦å’Œæµ‹è¯•é€Ÿåº¦<br>2ã€fastTextä¸éœ€è¦é¢„è®­ç»ƒå¥½çš„è¯å‘é‡ï¼ŒfastTextä¼šè‡ªå·±è®­ç»ƒè¯å‘é‡<br>3ã€fastTextä¸¤ä¸ªé‡è¦çš„ä¼˜åŒ–ï¼šHierarchical Softmaxã€N-gram</p>
<h1 id="2-æ¨¡å‹æ¶æ„"><a href="#2-æ¨¡å‹æ¶æ„" class="headerlink" title="2. æ¨¡å‹æ¶æ„"></a>2. æ¨¡å‹æ¶æ„</h1><p>word2vecå°†ä¸Šä¸‹æ–‡å…³ç³»è½¬åŒ–ä¸ºå¤šåˆ†ç±»ä»»åŠ¡ï¼Œè¿›è€Œè®­ç»ƒé€»è¾‘å›å½’æ¨¡å‹ï¼Œè¿™é‡Œçš„ç±»åˆ«æ•°é‡|V|è¯åº“å¤§å°ã€‚é€šå¸¸çš„æ–‡æœ¬æ•°æ®ä¸­ï¼Œè¯åº“å°‘åˆ™æ•°ä¸‡ï¼Œå¤šåˆ™ç™¾ä¸‡ï¼Œåœ¨è®­ç»ƒä¸­ç›´æ¥è®­ç»ƒå¤šåˆ†ç±»é€»è¾‘å›å½’å¹¶ä¸ç°å®ã€‚word2vecä¸­æä¾›äº†ä¸¤ç§é’ˆå¯¹å¤§è§„æ¨¡å¤šåˆ†ç±»é—®é¢˜çš„ä¼˜åŒ–æ‰‹æ®µï¼Œ negative sampling å’Œhierarchical softmaxã€‚åœ¨ä¼˜åŒ–ä¸­ï¼Œnegative sampling åªæ›´æ–°å°‘é‡è´Ÿé¢ç±»ï¼Œä»è€Œå‡è½»äº†è®¡ç®—é‡ã€‚hierarchical softmax å°†è¯åº“è¡¨ç¤ºæˆå‰ç¼€æ ‘ï¼Œä»æ ‘æ ¹åˆ°å¶å­çš„è·¯å¾„å¯ä»¥è¡¨ç¤ºä¸ºä¸€ç³»åˆ—äºŒåˆ†ç±»å™¨ï¼Œä¸€æ¬¡å¤šåˆ†ç±»è®¡ç®—çš„å¤æ‚åº¦ä»|V|é™ä½åˆ°äº†æ ‘çš„é«˜åº¦<a id="more"></a></p>
<h1 id="3-å±‚æ¬¡åŒ–softmax"><a href="#3-å±‚æ¬¡åŒ–softmax" class="headerlink" title="3. å±‚æ¬¡åŒ–softmax"></a>3. å±‚æ¬¡åŒ–softmax</h1><p>åœ¨æ ‡å‡†çš„softmaxä¸­ï¼Œè®¡ç®—ä¸€ä¸ªç±»åˆ«çš„softmaxæ¦‚ç‡æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ‰€æœ‰ç±»åˆ«æ¦‚ç‡åšå½’ä¸€åŒ–ï¼Œåœ¨è¿™ç±»åˆ«å¾ˆå¤§æƒ…å†µä¸‹éå¸¸è€—æ—¶ï¼Œå› æ­¤æå‡ºäº†åˆ†å±‚softmax(Hierarchical Softmax),æ€æƒ³æ˜¯æ ¹æ®ç±»åˆ«çš„é¢‘ç‡æ„é€ éœå¤«æ›¼æ ‘æ¥ä»£æ›¿æ ‡å‡†softmaxï¼Œé€šè¿‡åˆ†å±‚softmaxå¯ä»¥å°†å¤æ‚åº¦ä»Né™ä½åˆ°logNï¼Œä¸‹å›¾ç»™å‡ºåˆ†å±‚softmaxç¤ºä¾‹ï¼š</p>
<p><div align="center"> <img src="/images/blog/2020/hsoftmax.png" alt></div></p>
<p>åœ¨å±‚æ¬¡softmaxæ¨¡å‹ä¸­ï¼Œå¶å­ç»“ç‚¹çš„è¯æ²¡æœ‰ç›´æ¥è¾“å‡ºçš„å‘é‡ï¼Œè€Œéå¶å­èŠ‚ç‚¹éƒ½æœ‰ç›¸åº”çš„è¾“å‡ºåœ¨æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œé€šè¿‡Huffmanç¼–ç ï¼Œæ„é€ äº†ä¸€é¢—åºå¤§çš„Huffmanæ ‘ï¼ŒåŒæ—¶ä¼šç»™éå¶å­ç»“ç‚¹èµ‹äºˆå‘é‡ã€‚æˆ‘ä»¬è¦è®¡ç®—çš„æ˜¯ç›®æ ‡è¯wçš„æ¦‚ç‡ï¼Œè¿™ä¸ªæ¦‚ç‡çš„å…·ä½“å«ä¹‰ï¼Œæ˜¯æŒ‡ä»rootç»“ç‚¹å¼€å§‹éšæœºèµ°ï¼Œèµ°åˆ°ç›®æ ‡è¯wçš„æ¦‚ç‡ã€‚å› æ­¤åœ¨é€”ä¸­è·¯è¿‡éå¶å­ç»“ç‚¹ï¼ˆåŒ…æ‹¬rootï¼‰æ—¶ï¼Œéœ€è¦åˆ†åˆ«çŸ¥é“å¾€å·¦èµ°å’Œå¾€å³èµ°çš„æ¦‚ç‡ã€‚ä¾‹å¦‚åˆ°è¾¾éå¶å­èŠ‚ç‚¹nçš„æ—¶å€™å¾€å·¦è¾¹èµ°å’Œå¾€å³è¾¹èµ°çš„æ¦‚ç‡åˆ†åˆ«æ˜¯ï¼š</p>
<script type="math/tex; mode=display">
p(n, left) = \sigma (\theta_n^T \cdot h) \\
p(n, right) = 1 - \sigma(\theta_n^T \cdot h)</script><p>å…¶ä¸­$\theta$æ˜¯éå¶å­èŠ‚ç‚¹çš„å‘é‡è¡¨ç¤ºï¼Œhæ˜¯éšè—å±‚ã€‚é€å±‚ç´¯ä¹˜å¾—åˆ°å¯¹åº”å•è¯(å¶å­èŠ‚ç‚¹)çš„æ¦‚ç‡ã€‚</p>
<h1 id="4-n-gramç‰¹å¾"><a href="#4-n-gramç‰¹å¾" class="headerlink" title="4. n-gramç‰¹å¾"></a>4. n-gramç‰¹å¾</h1><p>ä½¿ç”¨n-gramæœ‰å¦‚ä¸‹ä¼˜ç‚¹<br>1ã€ä¸ºç½•è§çš„å•è¯ç”Ÿæˆæ›´å¥½çš„å•è¯å‘é‡ï¼šæ ¹æ®å­—ç¬¦çº§åˆ«çš„n-gramæ¥è¯´ï¼Œå³æ˜¯è¿™ä¸ªå•è¯å‡ºç°çš„æ¬¡æ•°å¾ˆå°‘ï¼Œä½†æ˜¯ç»„æˆå•è¯çš„å­—ç¬¦å’Œå…¶ä»–å•è¯æœ‰å…±äº«çš„éƒ¨åˆ†ï¼Œå› æ­¤è¿™ä¸€ç‚¹å¯ä»¥ä¼˜åŒ–ç”Ÿæˆçš„å•è¯å‘é‡<br>2ã€åœ¨è¯æ±‡å•è¯ä¸­ï¼Œå³ä½¿å•è¯æ²¡æœ‰å‡ºç°åœ¨è®­ç»ƒè¯­æ–™åº“ä¸­ï¼Œä»ç„¶å¯ä»¥ä»å­—ç¬¦çº§n-gramä¸­æ„é€ å•è¯çš„è¯å‘é‡<br>3ã€n-gramå¯ä»¥è®©æ¨¡å‹å­¦ä¹ åˆ°å±€éƒ¨å•è¯é¡ºåºçš„éƒ¨åˆ†ä¿¡æ¯, å¦‚æœä¸è€ƒè™‘n-gramåˆ™ä¾¿æ˜¯å–æ¯ä¸ªå•è¯ï¼Œè¿™æ ·æ— æ³•è€ƒè™‘åˆ°è¯åºæ‰€åŒ…å«çš„ä¿¡æ¯ï¼Œå³ä¹Ÿå¯ç†è§£ä¸ºä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå› æ­¤é€šè¿‡n-gramçš„æ–¹å¼å…³è”ç›¸é‚»çš„å‡ ä¸ªè¯ï¼Œè¿™æ ·ä¼šè®©æ¨¡å‹åœ¨è®­ç»ƒçš„æ—¶å€™ä¿æŒè¯åºä¿¡æ¯</p>
<h1 id="5-fastTextå®è·µ"><a href="#5-fastTextå®è·µ" class="headerlink" title="5. fastTextå®è·µ"></a>5. fastTextå®è·µ</h1><p>æ¨èå®˜ç½‘æ•™ç¨‹ <a href="https://fasttext.cc/docs/en/unsupervised-tutorial.html" target="_blank" rel="noopener">https://fasttext.cc/docs/en/unsupervised-tutorial.html</a></p>
<h2 id="5-1-è®­ç»ƒè¯å‘é‡"><a href="#5-1-è®­ç»ƒè¯å‘é‡" class="headerlink" title="5.1. è®­ç»ƒè¯å‘é‡"></a>5.1. è®­ç»ƒè¯å‘é‡</h2><p>ä¸ºäº†è®¡ç®—è¯å‘é‡ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¤§çš„æ–‡æœ¬è¯­æ–™åº“ï¼Œæ ¹æ®è¯­æ–™åº“çš„ä¸åŒï¼Œå•è¯å‘é‡ä¹Ÿå°†æ•æ‰åˆ°ä¸åŒçš„ä¿¡æ¯ï¼Œåœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å…³æ³¨Wikipediaçš„æ–‡ç« ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è€ƒè™‘å…¶ä»–è¯­æ–™åº“æ¥æºï¼Œä¾‹å¦‚æ–°é—»æ´»ç€Webcrawlï¼Œä¸‹è½½Wikipediaè¯­æ–™åº“æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget https://dumps.wikimedia.org/enwiki/latest/enwiki-latest-pages-articles.xml.bz2</span><br></pre></td></tr></table></figure>
<p>æ•°æ®é›†å·²ç»å–åˆ°äº†ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„ç®€å•å‘½ä»¤åœ¨ä¸Šè¿°æ•°æ®é›†ä¸Šè®­ç»ƒæˆ‘ä»¬çš„è¯å‘é‡</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mkdir result</span><br><span class="line">$ ./fasttext skipgram -input data/fil9 -output result/fil9</span><br></pre></td></tr></table></figure>
<p>åˆ†è§£ä¸Šè¿°å‘½ä»¤ï¼š./fasttextä½¿ç”¨skipgramæ¨¡å‹è°ƒç”¨äºŒè¿›åˆ¶fastTextå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨cbowæ¨¡å‹ï¼Œ-inputè¡¨ç¤ºè¾“å…¥æ•°æ®è·¯å¾„ï¼Œ-outputè¡¨ç¤ºè®­ç»ƒçš„è¯å‘é‡æ¨¡å‹æ‰€åœ¨è·¯å¾„ï¼Œå½“fastTextè¿è¡Œæ—¶ï¼Œå±å¹•ä¼šæ˜¾ç¤ºè¿›åº¦å’Œä¼°è®¡çš„å®Œæˆæ—¶é—´ã€‚</p>
<p>fil9.binæ–‡ä»¶æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå®ƒå­˜å‚¨äº†æ•´ä¸ªfastTextæ¨¡å‹ï¼Œéšåå¯ä»¥è¿›è¡ŒåŠ è½½ï¼Œfil9.vecæ–‡ä»¶æ˜¯ä¸€ä¸ªåŒ…å«å•è¯å‘é‡çš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ¯ä¸€è¡Œå¯¹åº”è¯æ±‡è¡¨ä¸­çš„æ¯ä¸ªå•è¯ï¼Œå¯é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹fil9.vecä¸­çš„ä¿¡æ¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ head -n 4 result/fil9.vec</span><br><span class="line">218316 100</span><br><span class="line">the -0.10363 -0.063669 0.032436 -0.040798 0.53749 0.00097867 0.10083 0.24829 ...</span><br><span class="line">of -0.0083724 0.0059414 -0.046618 -0.072735 0.83007 0.038895 -0.13634 0.60063 ...</span><br><span class="line">one 0.32731 0.044409 -0.46484 0.14716 0.7431 0.24684 -0.11301 0.51721 0.73262 ...</span><br></pre></td></tr></table></figure>
<h1 id="6-å…¶ä»–"><a href="#6-å…¶ä»–" class="headerlink" title="6. å…¶ä»–"></a>6. å…¶ä»–</h1><p>ç›®å‰fastTextä»…ä»…å¯è¿è¡Œåœ¨CPUä¸Šï¼Œä½†è¿™ä¹Ÿæ˜¯å…¶ä¼˜åŠ¿æ‰€åœ¨ï¼ŒfastTextçš„ç›®çš„ä¾¿æ˜¯è¦æˆä¸ºä¸€ä¸ªé«˜æ•ˆçš„CPUä¸Šçš„åˆ†ç±»æ¨¡å‹ï¼Œå¯ä»¥å…è®¸æ¨¡å‹åœ¨æ²¡æœ‰GPUçš„æƒ…å†µä¸‹æ„å»º</p>
]]></content>
      <categories>
        <category>NLP</category>
      </categories>
      <tags>
        <tag>fastText</tag>
        <tag>embedding</tag>
      </tags>
  </entry>
  <entry>
    <title>å…³ç³»æŠ½å–æ•°æ®é›†</title>
    <url>/2020/11/11/%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96%E6%95%B0%E6%8D%AE%E9%9B%86/</url>
    <content><![CDATA[<blockquote>
<p>æœ¬ç¯‡æ–‡ç« éƒ¨åˆ†å¼•ç”¨ä»¥ä¸‹åšå®¢ï¼š</p>
<p><a href="https://blog.csdn.net/qq_41372972/article/details/104677655" target="_blank" rel="noopener">https://blog.csdn.net/qq_41372972/article/details/104677655</a></p>
<p><a href="https://blog.csdn.net/CSDN_wujian/article/details/100136621" target="_blank" rel="noopener">https://blog.csdn.net/CSDN_wujian/article/details/100136621</a></p>
</blockquote>
<p><br></p>
<p>æœ€è¿‘ç”±äºå®éªŒéœ€è¦ï¼Œæ”¶é›†æ•´ç†äº†å…³ç³»æŠ½å–æ–¹å‘çš„æ•°æ®é›†ï¼Œä¸»è¦åŒ…æ‹¬SemEvalã€Wiki80ã€NYT10ã€‚ç›®å‰æ¥è¯´å…¨ç›‘ç£çš„å…³ç³»æŠ½å–ä»»åŠ¡ä¸€èˆ¬åœ¨SemEvalä¸Šåšï¼Œè¿œç¨‹ç›‘ç£çš„å…³ç³»æŠ½å–ä»»åŠ¡ä¸€èˆ¬åœ¨NYT10ä¸Šåšã€‚</p>
<h1 id="SemEval"><a href="#SemEval" class="headerlink" title="SemEval"></a>SemEval</h1><h2 id="æ•°æ®é›†æ¥æº"><a href="#æ•°æ®é›†æ¥æº" class="headerlink" title="æ•°æ®é›†æ¥æº"></a>æ•°æ®é›†æ¥æº</h2><p>SemEvalæ•°æ®é›†æ¥è‡ªäº2010å¹´çš„å›½é™…è¯­ä¹‰è¯„æµ‹å¤§ä¼šä¸­Task 8:â€ Multi-Way Classification of Semantic Relations Between Pairs of Nominals â€œ</p>
<h2 id="æ•°æ®é›†ä»‹ç»"><a href="#æ•°æ®é›†ä»‹ç»" class="headerlink" title="æ•°æ®é›†ä»‹ç»"></a>æ•°æ®é›†ä»‹ç»</h2><p>ä»»åŠ¡ï¼šå¯¹äºç»™å®šäº†çš„å¥å­å’Œä¸¤ä¸ªåšäº†æ ‡æ³¨çš„åè¯ï¼Œä»ç»™å®šçš„å…³ç³»æ¸…å•ä¸­é€‰å‡ºæœ€åˆé€‚çš„å…³ç³»ã€‚<br>æ•°æ®é›†ä¸­ä¸€å…±åŒ…å«9+1ä¸ªå…³ç³»ï¼Œå„ç±»æ•°æ®çš„å æ¯”å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/images/blog/2020/semeval.png" alt></p>
<p>æ•°æ®å®˜ç½‘ï¼š<a href="http://semeval2.fbk.eu/semeval2.php?location=tasks#T11" target="_blank" rel="noopener">http://semeval2.fbk.eu/semeval2.php?location=tasks#T11</a></p>
<a id="more"></a>
<h1 id="Wiki80"><a href="#Wiki80" class="headerlink" title="Wiki80"></a>Wiki80</h1><h2 id="æ•°æ®é›†æ¥æº-1"><a href="#æ•°æ®é›†æ¥æº-1" class="headerlink" title="æ•°æ®é›†æ¥æº"></a>æ•°æ®é›†æ¥æº</h2><p>æ ¹æ®OpenNREä¸Šçš„åŸæ–‡ï¼ˆWe also provide a new dataset Wiki80, which is derived from FewRel.ï¼‰æ¥çœ‹Wiki80æ˜¯ç”±æ¸…åå‘å¸ƒçš„æ•°æ®é›†FewRelä¸Šæå–çš„ã€‚</p>
<h2 id="æ•°æ®é›†ä»‹ç»-1"><a href="#æ•°æ®é›†ä»‹ç»-1" class="headerlink" title="æ•°æ®é›†ä»‹ç»"></a>æ•°æ®é›†ä»‹ç»</h2><p>ä»»åŠ¡ï¼šå¯¹äºç»™å®šäº†çš„å¥å­å’Œä¸¤ä¸ªåšäº†æ ‡æ³¨çš„åè¯ï¼Œä»ç»™å®šçš„å…³ç³»æ¸…å•ä¸­é€‰å‡ºæœ€åˆé€‚çš„å…³ç³»ã€‚<br>æ•°æ®é›†ä¸­ä¸€å…±åŒ…å«80ä¸­å…³ç³»ï¼Œç»ç»Ÿè®¡å„ä¸ªå…³ç³»ä¸ªæ•°å‡ä¸º700ï¼Œåˆè®¡56000ä¸ªæ ·æœ¬ã€‚</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>å…³ç³»</th>
<th>ä¸ªæ•°</th>
</tr>
</thead>
<tbody>
<tr>
<td>place served by transport hub</td>
<td>700</td>
</tr>
<tr>
<td>mountain range</td>
<td>700</td>
</tr>
<tr>
<td>religion</td>
<td>700</td>
</tr>
<tr>
<td>participating team</td>
<td>700</td>
</tr>
<tr>
<td>contains administrative territorial entity</td>
<td>700</td>
</tr>
<tr>
<td>head of government</td>
<td>700</td>
</tr>
<tr>
<td>country of citizenship</td>
<td>700</td>
</tr>
<tr>
<td>original network</td>
<td>700</td>
</tr>
<tr>
<td>heritage designation</td>
<td>700</td>
</tr>
<tr>
<td>performer</td>
<td>700</td>
</tr>
<tr>
<td>participant of</td>
<td>700</td>
</tr>
<tr>
<td>position held</td>
<td>700</td>
</tr>
<tr>
<td>has part</td>
<td>700</td>
</tr>
<tr>
<td>location of formation</td>
<td>700</td>
</tr>
<tr>
<td>located on terrain feature</td>
<td>700</td>
</tr>
<tr>
<td>architect</td>
<td>700</td>
</tr>
<tr>
<td>country of origin</td>
<td>700</td>
</tr>
<tr>
<td>publisher</td>
<td>700</td>
</tr>
<tr>
<td>director</td>
<td>700</td>
</tr>
<tr>
<td>father</td>
<td>700</td>
</tr>
<tr>
<td>developer</td>
<td>700</td>
</tr>
<tr>
<td>military branch</td>
<td>700</td>
</tr>
<tr>
<td>mouth of the watercourse</td>
<td>700</td>
</tr>
<tr>
<td>nominated for</td>
<td>700</td>
</tr>
<tr>
<td>movement</td>
<td>700</td>
</tr>
<tr>
<td>successful candidate</td>
<td>700</td>
</tr>
<tr>
<td>followed by</td>
<td>700</td>
</tr>
<tr>
<td>manufacturer</td>
<td>700</td>
</tr>
<tr>
<td>instance of</td>
<td>700</td>
</tr>
<tr>
<td>after a work by</td>
<td>700</td>
</tr>
<tr>
<td>member of political party</td>
<td>700</td>
</tr>
<tr>
<td>licensed to broadcast to</td>
<td>700</td>
</tr>
<tr>
<td>headquarters location</td>
<td>700</td>
</tr>
<tr>
<td>sibling</td>
<td>700</td>
</tr>
<tr>
<td>instrument</td>
<td>700</td>
</tr>
<tr>
<td>country</td>
<td>700</td>
</tr>
<tr>
<td>occupation</td>
<td>700</td>
</tr>
<tr>
<td>residence</td>
<td>700</td>
</tr>
<tr>
<td>work location</td>
<td>700</td>
</tr>
<tr>
<td>subsidiary</td>
<td>700</td>
</tr>
<tr>
<td>participant</td>
<td>700</td>
</tr>
<tr>
<td>operator</td>
<td>700</td>
</tr>
<tr>
<td>characters</td>
<td>700</td>
</tr>
<tr>
<td>occupant</td>
<td>700</td>
</tr>
<tr>
<td>genre</td>
<td>700</td>
</tr>
<tr>
<td>operating system</td>
<td>700</td>
</tr>
<tr>
<td>owned by</td>
<td>700</td>
</tr>
<tr>
<td>platform</td>
<td>700</td>
</tr>
<tr>
<td>tributary</td>
<td>700</td>
</tr>
<tr>
<td>winner</td>
<td>700</td>
</tr>
<tr>
<td>said to be the same as</td>
<td>700</td>
</tr>
<tr>
<td>composer</td>
<td>700</td>
</tr>
<tr>
<td>league</td>
<td>700</td>
</tr>
<tr>
<td>record label</td>
<td>700</td>
</tr>
<tr>
<td>distributor</td>
<td>700</td>
</tr>
<tr>
<td>screenwriter</td>
<td>700</td>
</tr>
<tr>
<td>sports season of league or competition</td>
<td>700</td>
</tr>
<tr>
<td>taxon rank</td>
<td>700</td>
</tr>
<tr>
<td>location</td>
<td>700</td>
</tr>
<tr>
<td>field of work</td>
<td>700</td>
</tr>
<tr>
<td>language of work or name</td>
<td>700</td>
</tr>
<tr>
<td>applies to jurisdiction</td>
<td>700</td>
</tr>
<tr>
<td>notable work</td>
<td>700</td>
</tr>
<tr>
<td>located in the administrative territorial entity</td>
<td>700</td>
</tr>
<tr>
<td>crosses</td>
<td>700</td>
</tr>
<tr>
<td>original language of film or TV show</td>
<td>700</td>
</tr>
<tr>
<td>competition class</td>
<td>700</td>
</tr>
<tr>
<td>part of</td>
<td>700</td>
</tr>
<tr>
<td>sport</td>
<td>700</td>
</tr>
<tr>
<td>constellation</td>
<td>700</td>
</tr>
<tr>
<td>position played on team / speciality</td>
<td>700</td>
</tr>
<tr>
<td>located in or next to body of water</td>
<td>700</td>
</tr>
<tr>
<td>voice type</td>
<td>700</td>
</tr>
<tr>
<td>follows</td>
<td>700</td>
</tr>
<tr>
<td>spouse</td>
<td>700</td>
</tr>
<tr>
<td>military rank</td>
<td>700</td>
</tr>
<tr>
<td>mother</td>
<td>700</td>
</tr>
<tr>
<td>member of</td>
<td>700</td>
</tr>
<tr>
<td>child</td>
<td>700</td>
</tr>
<tr>
<td>main subject</td>
<td>700</td>
</tr>
<tr>
<td>åˆè®¡</td>
<td>56000</td>
</tr>
</tbody>
</table>
</div>
<p>Ps:è¿™é‡Œ56000ä¸ªæ˜¯valä¸trainä¸€èµ·ç»Ÿè®¡çš„</p>
<p>Wiki80 æ–‡ä»¶å¤¹ä¸­å…±åŒ…å«3ä¸ªæ–‡ä»¶:</p>
<p>Wiki80_rel2id.json : å…³ç³»åŠå…¶ç´¢å¼•çš„å¯¹ç…§è¡¨ï¼Œåˆè®¡80ä¸ªå…³ç³»ï¼Œå’ŒSemevalä¸­çš„ä¸åŒï¼Œè¿™é‡Œé¢çš„å…³ç³»ä¸åŒ…å«å®ä½“çš„å‰åå…³ç³»ã€‚</p>
<p>Wiki80_train.txt &amp; wiki80_val.txt : trian(50400ä¸ªæ ·æœ¬)ã€val(5600ä¸ªæ ·æœ¬)åˆè®¡56000ä¸ªæ ·æœ¬ã€‚</p>
<p>æ•°æ®é›†ä¸­ä¸åŒ…å«æµ‹è¯•é›†</p>
<p>æ ·æœ¬æ ¼å¼ï¼š<br>ä¾‹å­ï¼š{â€œtokenâ€: [â€œVahitahiâ€, â€œhasâ€, â€œaâ€, â€œterritorialâ€, â€œairportâ€, â€œ.â€], â€œhâ€: {â€œnameâ€: â€œterritorial airportâ€, â€œidâ€: â€œQ16897548â€, â€œposâ€: [3, 5]}, â€œtâ€: {â€œnameâ€: â€œvahitahiâ€, â€œidâ€: â€œQ1811472â€, â€œposâ€: [0, 1]}, â€œrelationâ€: â€œplace served by transport hubâ€}</p>
<p>æ ·æœ¬çš„æ ¼å¼åŒsemevalä¸­çš„å‡ ä¹ä¸€è‡´ï¼Œä½†æ˜¯åœ¨å¤´å®ä½“å’Œå°¾å®ä½“ä¸­åŠ å…¥äº†idè¿™ä¸€å±æ€§ã€‚</p>
<p><strong><em>Wiki80æ•°æ®é›†é‡‡ç”¨äººå·¥ç²¾æ ‡ï¼Œä¸åŒ…å«å™ªå£°</em></strong></p>
<p>æ•°æ®æ¥æºï¼š<a href="https://github.com/thunlp/OpenNRE/tree/master/benchmark" target="_blank" rel="noopener">https://github.com/thunlp/OpenNRE/tree/master/benchmark</a><br>æ•°æ®å‚è€ƒï¼š<a href="https://opennre-docs.readthedocs.io/en/latest/get_started/benchmark" target="_blank" rel="noopener">https://opennre-docs.readthedocs.io/en/latest/get_started/benchmark</a></p>
<h1 id="NYT10"><a href="#NYT10" class="headerlink" title="NYT10"></a>NYT10</h1><h2 id="æ•°æ®é›†æ¥æºï¼š"><a href="#æ•°æ®é›†æ¥æºï¼š" class="headerlink" title="æ•°æ®é›†æ¥æºï¼š"></a>æ•°æ®é›†æ¥æºï¼š</h2><p>NYT10æ˜¯åœ¨åŸºäºè¿œç¨‹ç›‘ç£çš„å…³ç³»æŠ½å–ä»»åŠ¡ä¸Šæœ€å¸¸ç”¨çš„æ•°æ®é›†ï¼ŒNYT10æ•°æ®é›†æ¥è‡ªäº10å¹´çš„è®ºæ–‡Modeling Relations and Their Mentions withoutLabeled Textï¼Œæ˜¯ç”±NYT corpus åŒFreebaseè¿œç¨‹ç›‘ç£å¾—åˆ°ï¼š</p>
<p><img src="/images/blog/2020/NYT.png" alt></p>
<h2 id="æ•°æ®é›†ä»‹ç»-2"><a href="#æ•°æ®é›†ä»‹ç»-2" class="headerlink" title="æ•°æ®é›†ä»‹ç»"></a>æ•°æ®é›†ä»‹ç»</h2><p>ä»»åŠ¡ï¼šå¯¹äºç»™å®šäº†çš„å¥å­å’Œä¸¤ä¸ªåšäº†æ ‡æ³¨çš„åè¯ï¼Œä»ç»™å®šçš„å…³ç³»æ¸…å•ä¸­é€‰å‡ºæœ€åˆé€‚çš„å…³ç³»ã€‚<br>æ•°æ®é›†ä¸­ä¸€å…±åŒ…å«52+1ï¼ˆåŒ…æ‹¬NAï¼‰ä¸ªå…³ç³»ï¼Œå„ä¸ªå…³ç³»åœ¨æ ·æœ¬ä¸­çš„åˆ†å¸ƒå¦‚ä¸‹ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>relations</th>
<th>size_of_train</th>
<th>size_of_test</th>
</tr>
</thead>
<tbody>
<tr>
<td>/location/fr_region/capital</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>/location/cn_province/capital</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>/location/in_state/administrative_capital</td>
<td>4</td>
<td>0</td>
</tr>
<tr>
<td>/base/locations/countries/states_provinces_within</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>/business/company/founders</td>
<td>901</td>
<td>95</td>
</tr>
<tr>
<td>/people/person/place_of_birth</td>
<td>4053</td>
<td>162</td>
</tr>
<tr>
<td>/people/deceased_person/place_of_death</td>
<td>2422</td>
<td>68</td>
</tr>
<tr>
<td>/location/it_region/capital</td>
<td>22</td>
<td>0</td>
</tr>
<tr>
<td>/people/family/members</td>
<td>4</td>
<td>0</td>
</tr>
<tr>
<td>/people/profession/people_with_this_profession</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>/location/neighborhood/neighborhood_of</td>
<td>9275</td>
<td>68</td>
</tr>
<tr>
<td>NA</td>
<td>385664</td>
<td>166004</td>
</tr>
<tr>
<td>/location/in_state/legislative_capital</td>
<td>4</td>
<td>0</td>
</tr>
<tr>
<td>/sports/sports_team/location</td>
<td>294</td>
<td>10</td>
</tr>
<tr>
<td>/people/person/religion</td>
<td>202</td>
<td>6</td>
</tr>
<tr>
<td>/location/in_state/judicial_capital</td>
<td>3</td>
<td>0</td>
</tr>
<tr>
<td>/business/company_advisor/companies_advised</td>
<td>2</td>
<td>8</td>
</tr>
<tr>
<td>/people/family/country</td>
<td>6</td>
<td>0</td>
</tr>
<tr>
<td>/time/event/locations</td>
<td>4</td>
<td>4</td>
</tr>
<tr>
<td>/business/company/place_founded</td>
<td>648</td>
<td>20</td>
</tr>
<tr>
<td>/location/administrative_division/country</td>
<td>7286</td>
<td>424</td>
</tr>
<tr>
<td>/people/ethnicity/included_in_group</td>
<td>7</td>
<td>0</td>
</tr>
<tr>
<td>/location/br_state/capital</td>
<td>4</td>
<td>2</td>
</tr>
<tr>
<td>/location/mx_state/capital</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>/location/province/capital</td>
<td>39</td>
<td>11</td>
</tr>
<tr>
<td>/people/person/nationality</td>
<td>9733</td>
<td>723</td>
</tr>
<tr>
<td>/business/person/company</td>
<td>7336</td>
<td>302</td>
</tr>
<tr>
<td>/business/shopping_center_owner/shopping_centers_owned</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>/business/company/advisors</td>
<td>9</td>
<td>8</td>
</tr>
<tr>
<td>/business/shopping_center/owner</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>/location/country/languages_spoken</td>
<td>0</td>
<td>3</td>
</tr>
<tr>
<td>/people/deceased_person/place_of_burial</td>
<td>24</td>
<td>9</td>
</tr>
<tr>
<td>/location/us_county/county_seat</td>
<td>110</td>
<td>23</td>
</tr>
<tr>
<td>/people/ethnicity/geographic_distribution</td>
<td>86</td>
<td>136</td>
</tr>
<tr>
<td>/people/person/place_lived</td>
<td>8907</td>
<td>450</td>
</tr>
<tr>
<td>/business/company/major_shareholders</td>
<td>328</td>
<td>46</td>
</tr>
<tr>
<td>/broadcast/producer/location</td>
<td>71</td>
<td>0</td>
</tr>
<tr>
<td>/location/us_state/capital</td>
<td>798</td>
<td>39</td>
</tr>
<tr>
<td>/broadcast/content/location</td>
<td>8</td>
<td>0</td>
</tr>
<tr>
<td>/business/business_location/parent_company</td>
<td>19</td>
<td>0</td>
</tr>
<tr>
<td>/location/jp_prefecture/capital</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>/film/film/featured_film_locations</td>
<td>18</td>
<td>2</td>
</tr>
<tr>
<td>/people/place_of_interment/interred_here</td>
<td>24</td>
<td>9</td>
</tr>
<tr>
<td>/location/de_state/capital</td>
<td>7</td>
<td>0</td>
</tr>
<tr>
<td>/people/person/profession</td>
<td>10</td>
<td>0</td>
</tr>
<tr>
<td>/business/company/locations</td>
<td>19</td>
<td>0</td>
</tr>
<tr>
<td>/location/country/capital</td>
<td>8883</td>
<td>553</td>
</tr>
<tr>
<td>/location/location/contains</td>
<td>66721</td>
<td>2793</td>
</tr>
<tr>
<td>/people/person/ethnicity</td>
<td>148</td>
<td>13</td>
</tr>
<tr>
<td>/location/country/administrative_divisions</td>
<td>7286</td>
<td>424</td>
</tr>
<tr>
<td>/people/person/children</td>
<td>622</td>
<td>30</td>
</tr>
<tr>
<td>/film/film_location/featured_in_films</td>
<td>18</td>
<td>2</td>
</tr>
<tr>
<td>/film/film_festival/location</td>
<td>4</td>
<td>0</td>
</tr>
<tr>
<td>åˆè®¡</td>
<td>522043</td>
<td>172448</td>
</tr>
</tbody>
</table>
</div>
<p>NYT10æ–‡ä»¶å¤¹ä¸­åŒ…å«4ä¸ªæ–‡ä»¶ï¼š</p>
<p>Nyt10_rel2id.json : åŒ…å«53ä¸ªå…³ç³»åŠå…¶å„è‡ªå¯¹åº”çš„ç´¢å¼•</p>
<p>Nyt10_train.txt : åŒ…å«466876ä¸ªæ ·æœ¬</p>
<p>Nyt10_val.txt : åŒ…å«55167ä¸ªæ ·æœ¬</p>
<p>Nyt10_test.txt : åŒ…å«172448ä¸ªæ ·æœ¬</p>
<p><strong><em>Ps:NYT10çš„æ•°æ®é›†æ˜¯é€šè¿‡è¿œç¨‹ç›‘ç£å¾—åˆ°çš„ï¼Œæ‰€ä»¥æ ·æœ¬çš„æ˜¯æ ¹æ®åŒ…çš„å½¢å¼åˆ†å¸ƒçš„åŠå«æœ‰ç›¸åŒå®ä½“çš„æ•°æ®é›†åˆ†å¸ƒåœ¨ä¸€èµ·ã€‚</em></strong></p>
<p>æ ·æœ¬æ ¼å¼ï¼š<br>ä¾‹å­ï¼š<br>{â€œtextâ€: â€œHundreds of bridges were added to the statewide inventory after an earthquake in 1994 in Northridge , a suburb of Los Angeles .â€, â€œrelationâ€: â€œ/location/neighborhood/neighborhood_ofâ€,â€œhâ€:{â€œidâ€:â€/guid/9202a8c04000641f800000000008fe6dâ€, â€œnameâ€: â€œNorthridgeâ€, â€œposâ€: [89, 99]}, â€œtâ€: {â€œidâ€: â€œ/guid/9202a8c04000641f80000000060b2879â€, â€œnameâ€: â€œLos Angelesâ€, â€œposâ€: [114, 125]}}</p>
<p>ä¸Wiki80çš„æ ·æœ¬æ ¼å¼ç›¸ä¼¼ï¼ŒåŒºåˆ«åœ¨äºNYT10çš„æ–‡æœ¬æ²¡æœ‰è¿›è¡Œæ ‡è®°å¤„ç†ã€‚</p>
<p><strong><em>NYT10æ•°æ®é›†é‡‡ç”¨è¿œç¨‹ç›‘ç£å¾—åˆ°ï¼ŒåŒ…å«å™ªå£°ã€‚</em></strong></p>
<p>æ•°æ®æ¥æºï¼š<a href="https://github.com/thunlp/OpenNRE/tree/master/benchmark" target="_blank" rel="noopener">https://github.com/thunlp/OpenNRE/tree/master/benchmark</a></p>
<p><br></p>
<h1 id="å¦å¤–æ¯”è¾ƒå¸¸ç”¨çš„æ•°æ®é›†ï¼šTACREDã€ACE-2005å®˜ç½‘ä¸Šä¸‹è½½å‡éœ€è¦LDCè´¦å·ã€‚å¦‚æœ‰å¤§ä½¬æ„¿æ„æä¾›ï¼Œä¸èƒœæ„Ÿè°¢ï¼"><a href="#å¦å¤–æ¯”è¾ƒå¸¸ç”¨çš„æ•°æ®é›†ï¼šTACREDã€ACE-2005å®˜ç½‘ä¸Šä¸‹è½½å‡éœ€è¦LDCè´¦å·ã€‚å¦‚æœ‰å¤§ä½¬æ„¿æ„æä¾›ï¼Œä¸èƒœæ„Ÿè°¢ï¼" class="headerlink" title="å¦å¤–æ¯”è¾ƒå¸¸ç”¨çš„æ•°æ®é›†ï¼šTACREDã€ACE 2005å®˜ç½‘ä¸Šä¸‹è½½å‡éœ€è¦LDCè´¦å·ã€‚å¦‚æœ‰å¤§ä½¬æ„¿æ„æä¾›ï¼Œä¸èƒœæ„Ÿè°¢ï¼"></a><font color="orange">å¦å¤–æ¯”è¾ƒå¸¸ç”¨çš„æ•°æ®é›†ï¼šTACREDã€ACE 2005å®˜ç½‘ä¸Šä¸‹è½½å‡éœ€è¦LDCè´¦å·ã€‚å¦‚æœ‰å¤§ä½¬æ„¿æ„æä¾›ï¼Œä¸èƒœæ„Ÿè°¢ï¼</font></h1><p><br></p>
<h1 id="å…³ç³»æŠ½å–å®æ—¶SOTAæ¨¡å‹æ¦œå•"><a href="#å…³ç³»æŠ½å–å®æ—¶SOTAæ¨¡å‹æ¦œå•" class="headerlink" title="å…³ç³»æŠ½å–å®æ—¶SOTAæ¨¡å‹æ¦œå•"></a>å…³ç³»æŠ½å–å®æ—¶SOTAæ¨¡å‹æ¦œå•</h1><p><a href="http://nlpprogress.com/english/relationship_extraction.html" target="_blank" rel="noopener">http://nlpprogress.com/english/relationship_extraction.html</a></p>
]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
      </categories>
      <tags>
        <tag>Relation Extraction</tag>
        <tag>NYT</tag>
        <tag>RE</tag>
        <tag>SemEval</tag>
        <tag>TACRED</tag>
        <tag>FewRel</tag>
        <tag>Wiki80</tag>
        <tag>ACE2005</tag>
        <tag>DocRED</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode-2-åŠ¨æ€è§„åˆ’ä¸èƒŒåŒ…é—®é¢˜</title>
    <url>/2020/11/10/LeetCode-2-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E4%B8%8E%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h2 id="1-å°†ä¸€ä¸ªæ•°åˆ†è§£ä¸º2çš„å¹‚æ¬¡"><a href="#1-å°†ä¸€ä¸ªæ•°åˆ†è§£ä¸º2çš„å¹‚æ¬¡" class="headerlink" title="1. å°†ä¸€ä¸ªæ•°åˆ†è§£ä¸º2çš„å¹‚æ¬¡"></a>1. å°†ä¸€ä¸ªæ•°åˆ†è§£ä¸º2çš„å¹‚æ¬¡</h2><p>å³å°†ä¸€ä¸ªæ•°è¡¨ç¤ºä¸º1, 2, 4, â€¦ çš„å’Œçš„å½¢å¼ã€‚</p>
<p><strong>åˆ†æ</strong>: </p>
<ol>
<li>è‹¥nä¸ºå¥‡æ•°ï¼Œåˆ™nçš„è¡¨ç¤ºå½¢å¼ä¸­å¿…ç„¶å«æœ‰ä¸€ä¸ª+1ï¼Œé™¤å»+1åå‰©ä¸‹çš„å³ä¸ºn-1çš„è¡¨ç¤ºå½¢å¼ï¼Œå³f(n) = f(n-1)</li>
<li>è‹¥nä¸ºå¶æ•°ï¼Œç¬¬ä¸€ï¼Œè‹¥nçš„è¡¨ç¤ºå½¢å¼ä¸­å«æœ‰1ï¼Œåˆ™å«æœ‰è‡³å°‘ä¸¤ä¸ª1ï¼Œé™¤å»è¿™ä¸¤ä¸ª+1ï¼Œåˆ™ä¸ºf(n-2)ï¼›è‹¥nçš„è¡¨ç¤ºå½¢å¼ä¸­ä¸å«æœ‰1ï¼Œåˆ™å‡ä¸ºå¶æ•°ï¼Œå› æ­¤ï¼Œç­‰ä»·äºé™¤ä»¥2çš„å½¢å¼ï¼Œå³f(n/2)</li>
</ol>
<p>ç»¼ä¸Šï¼ŒåŠ¨æ€è§„åˆ’å…¬å¼ä¸ºï¼š</p>
<script type="math/tex; mode=display">
f(n) = \left \{
\begin{align}
f(n-1) & \quad & nä¸ºå¥‡æ•°\\ 
f(n-2) + f(n/2) & \quad & nä¸ºå¶æ•°
\end{align}
\right.</script><p>ç”¨C++å®ç°ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> dp[<span class="number">1000001</span>];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    dp[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    dp[<span class="number">2</span>] = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">3</span>; i &lt;= <span class="number">1000000</span>; i ++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(i&amp;<span class="number">1</span>) <span class="comment">// æŒ‰ä½æ“ä½œ</span></span><br><span class="line">            dp[i] = dp[i<span class="number">-1</span>];</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            dp[i] = dp[i<span class="number">-2</span>] + dp[i/<span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, dp[n]%<span class="number">1000000000</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="2-åˆ†é‡‘å¸é—®é¢˜"><a href="#2-åˆ†é‡‘å¸é—®é¢˜" class="headerlink" title="2. åˆ†é‡‘å¸é—®é¢˜"></a>2. åˆ†é‡‘å¸é—®é¢˜</h2><p><strong>é—®é¢˜æè¿°ï¼š</strong></p>
<p>æœ‰ä¸€å †å„ç§é¢å€¼çš„ç¡¬å¸ï¼Œå°†æ‰€æœ‰ç¡¬å¸åˆ†æˆä¸¤å †ï¼Œä½¿å¾—ä¸¤å †çš„æ€»å€¼ä¹‹å·®å°½å¯èƒ½å°ã€‚</p>
<p><strong>åˆ†æï¼š</strong></p>
<p>å°±æ˜¯0/1èƒŒåŒ…é—®é¢˜ã€‚å°†ç»™å‡ºä¸ªnä¸ªç¡¬å¸çš„é¢å€¼ä¹‹å’Œè®°ä½œsumï¼Œä»¥sum/2ä¸ºä½“ç§¯ï¼Œæ±‚å‡ºsum/2ä¸‹èƒŒåŒ…çš„æœ€å¤§å€¼ã€‚</p>
<p>ç”¨C++å®ç°ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> dp[maxm],a[maxm];</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> t; <span class="built_in">cin</span>&gt;&gt;t;</span><br><span class="line">    <span class="keyword">while</span>(t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">        <span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line">        <span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">cin</span>&gt;&gt;a[i],sum+=a[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=sum/<span class="number">2</span>;j&gt;=a[i];j--)</span><br><span class="line">            &#123;</span><br><span class="line">                dp[j] = max(dp[j],dp[j-a[i]]+a[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt; sum - <span class="number">2</span>*dp[sum/<span class="number">2</span>] &lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Algorithms</category>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>DP</tag>
        <tag>Algorithms</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
        <tag>èƒŒåŒ…é—®é¢˜</tag>
        <tag>Dynamic Programming</tag>
      </tags>
  </entry>
  <entry>
    <title>pytorchçš„å‡ ç§åæ ‡é€‰æ‹©å‡½æ•°</title>
    <url>/2020/11/09/pytorch%E7%9A%84%E5%87%A0%E7%A7%8D%E5%9D%90%E6%A0%87%E9%80%89%E6%8B%A9%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<p>åœ¨pytorchä¸­ï¼Œæœ‰å¤šç§é€‰æ‹©å‡½æ•°ï¼Œèƒ½å¤Ÿæ˜ç¡®åŒºåˆ†å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ï¼Œæ‰èƒ½æ›´å¥½çš„è¿ç”¨âœ…</p>
<h2 id="1-torch-masked-select"><a href="#1-torch-masked-select" class="headerlink" title="1. torch.masked_select()"></a>1. torch.masked_select()</h2><blockquote>
<p>Returns a new 1-D tensor which indexes the <code>input</code> tensor according to the boolean mask <code>mask</code> which is a BoolTensor.</p>
</blockquote>
<p>è¿”å›çš„æ˜¯1ç»´çš„å‘é‡ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">vectors = torch.tensor([</span><br><span class="line">    [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],</span><br><span class="line">    [<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>],</span><br><span class="line">    [<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>]</span><br><span class="line">])</span><br><span class="line"><span class="comment"># æƒ³è¦é€‰æ‹©ç¬¬ä¸€ä¸ªå’Œç¬¬ä¸‰ä¸ªå‘é‡</span></span><br><span class="line">masks = torch.tensor([<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>], dtype=torch.bool).unsqueeze(<span class="number">1</span>)</span><br><span class="line">r = torch.masked_select(vectors, masks)</span><br><span class="line">print(r)</span><br><span class="line">print(r.shape)</span><br><span class="line"></span><br><span class="line">================================================================</span><br><span class="line">tensor([<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>])</span><br><span class="line">torch.Size([<span class="number">6</span>])</span><br></pre></td></tr></table></figure>
<h2 id="2-torch-index-select"><a href="#2-torch-index-select" class="headerlink" title="2. torch.index_select()"></a>2. torch.index_select()</h2><p>æ²¿ç€å¼ é‡çš„æŸä¸ª<code>dim</code>æ–¹å‘ï¼ŒæŒ‰ç…§<code>index</code>è§„å®šçš„é€‰å–æŒ‡å®šçš„ä½ä¸€ç»´åº¦å¼ é‡å…ƒç´ æ•´ä½“ï¼Œåœ¨æ‹¼æ¥æˆä¸€ä¸ªå¼ é‡ã€‚</p>
<p>å…ˆç®€å•çœ‹ä¸¤ä¸ªç¤ºä¾‹ï¼š<br><strong>ç¤ºä¾‹1</strong>ï¼šæ²¿ç€<code>dim=0</code>çš„æ–¹å‘è¿›è¡Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line">a = torch.tensor([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]])</span><br><span class="line"><span class="comment"># aä¸ºtensor([[1, 2, 3],</span></span><br><span class="line"><span class="comment">#        [4, 5, 6]])</span></span><br><span class="line"></span><br><span class="line">b = torch.index_select(a, dim=<span class="number">0</span>, index=torch.tensor([<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>]))</span><br><span class="line"><span class="comment"># bä¸ºtensor([[1, 2, 3],</span></span><br><span class="line"><span class="comment">#        [4, 5, 6],</span></span><br><span class="line"><span class="comment">#        [1, 2, 3],</span></span><br><span class="line"><span class="comment">#        [4, 5, 6]])</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/blog/2020/select/1.png" alt></p>
<p>æ˜¾ç„¶ï¼Œå¯¹äºäºŒç»´å¼ é‡ï¼Œ<code>dim=0</code>æ„å‘³ç€æŒ‰ç…§<code>index</code>çš„ç¼–å·é€‰å–æŒ‡å®šçš„è¡Œï¼Œæ‹¼æ¥æˆç›®æ ‡å¼ é‡ã€‚å…¶è¿”å›å€¼ä»ä¿æŒå’ŒåŸå§‹å¼ é‡ç›¸åŒçš„<code>ndim</code>ã€‚<a id="more"></a></p>
<p><strong>ç¤ºä¾‹2</strong>ï¼šæ²¿ç€<code>dim=1</code>çš„æ–¹å‘è¿›è¡Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line">a = torch.tensor([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]])</span><br><span class="line"><span class="comment"># aä¸ºtensor([[1, 2, 3],</span></span><br><span class="line"><span class="comment">#        [4, 5, 6]])</span></span><br><span class="line"></span><br><span class="line">b = torch.index_select(a, dim=<span class="number">1</span>, index=torch.tensor([<span class="number">1</span>,<span class="number">1</span>]))</span><br><span class="line"><span class="comment"># bä¸ºtensor([[2, 2],</span></span><br><span class="line"><span class="comment">#          [5, 5]])</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/blog/2020/select/2.png" alt></p>
<p>å¯¹äºäºŒç»´å¼ é‡ï¼Œ<code>dim=1</code>æ„å‘³ç€æŒ‰ç…§<code>index</code>çš„ç¼–å·é€‰å–æŒ‡å®šçš„åˆ—ï¼Œæ‹¼æ¥æˆç›®æ ‡å¼ é‡ã€‚å…¶è¿”å›å€¼ä»ä¿æŒå’ŒåŸå§‹å¼ é‡ç›¸åŒçš„<code>ndim</code>ã€‚</p>
<p>æ ¹æ®ä¸Šè¿°ä¸¤ä¸ªä¾‹å­ï¼Œå¯è§<code>index_select</code>çš„ä½œç”¨é—´æ¥æ˜äº†ï¼Œå³é€‰å–æŸä¸ª<code>dim</code>ä¸Šçš„è‹¥å¹²ä¸ªå…ƒç´ ï¼Œå°†å…¶æ‹¼æ¥ä¸ºç›®æ ‡å¼ é‡ã€‚å…¶ä¸­<code>index</code>ä¸ºä¸€ä¸ªä¸€ç»´å¼ é‡ï¼Œè¡¨æ˜è¯¥<code>dim</code>ä¸Šåšé€‰å–çš„å…·ä½“å…ƒç´ ï¼Œè¿”å›å¼ é‡ä¸åŸå¼ é‡çš„<code>ndim</code>ä¸€è‡´ã€‚</p>
<h2 id="3-torch-gather"><a href="#3-torch-gather" class="headerlink" title="3. torch.gather()"></a>3. torch.gather()</h2><p>ç›¸è¾ƒäº<code>index_select</code>ï¼Œ<code>gather</code>å°±æ˜¾å¾—è®©äººéš¾ä»¥ç†è§£çš„å¤šã€‚ä¸ªäººç†è§£ï¼Œå…¶æ“ä½œç›¸å½“äºç”¨äºæ²¿ç€å¼ é‡çš„æŸä¸ª<code>dim</code>æ–¹å‘ï¼ŒæŒ‰ç…§<code>index</code>è§„å®šçš„é€‰å–æŒ‡å®šå…ƒç´ ï¼Œæ„æˆè¯¥ä¸ºç»´åº¦ä¸Šçš„æ¯ä¸ªå­å¼ é‡ï¼Œæœ€åæ‹¼æ¥æˆä¸€ä¸ªå¼ é‡ã€‚</p>
<p>æ˜¯ä¸æ˜¯è¿˜æ˜¯ä»¤äººè´¹è§£ï¼Ÿæˆ‘ä»¬å…ˆä»¥ä¸¤ä¸ª2ç»´å¼ é‡çš„ä¾‹å­æ¥è¯´æ˜ï¼š</p>
<p><strong>ç¤ºä¾‹1</strong>ï¼šæ²¿ç€<code>dim=1</code>çš„æ–¹å‘è¿›è¡Œé€‰æ‹©</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line">a = torch.tensor([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]])</span><br><span class="line"><span class="comment"># aä¸ºtensor([[1, 2, 3],</span></span><br><span class="line"><span class="comment">#        [4, 5, 6]])</span></span><br><span class="line"></span><br><span class="line">b = torch.gather(input=a, dim=<span class="number">1</span>, index=torch.tensor([[<span class="number">2</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>], [<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>]]))</span><br><span class="line"><span class="comment"># è¿”å›å€¼ä¸º tensor([[3, 1, 3, 2],</span></span><br><span class="line"><span class="comment">#         [5, 5, 4, 4]])</span></span><br></pre></td></tr></table></figure>
<p>å…¶æ“ä½œè¿‡ç¨‹å¯å‚ç…§ä¸‹å›¾ï¼š</p>
<p><img src="/images/blog/2020/select/3.png" alt></p>
<p>ç”±ä¸Šå›¾å¯è§ï¼Œ<code>dim=1</code>è¡¨ç¤ºåœ¨äºŒç»´å¼ é‡ä¸­ï¼Œä»¥è¡Œä¸ºå•ä½ï¼Œå¯¹æ¯è¡Œä¸­çš„å…ƒç´ ï¼ŒæŒ‰ç…§<code>index</code>çš„ç´¢å¼•å·è¿›è¡Œé€‰å–ï¼Œå†æ‹¼æ¥åˆ°ä¸€èµ·ã€‚ä»å¼ é‡<code>shape</code>ä¸Šçœ‹ï¼Œå…¶åœ¨<code>dim=0</code>ä¸Šä¿æŒä¸€è‡´ï¼Œå¯¹<code>dim=1</code>è¿›è¡Œäº†æ”¾å¤§æˆ–ç¼©å°ã€‚</p>
<p>å¯¹äºæ›´ä¸€èˆ¬çš„å¼ é‡ï¼Œ<code>gather</code>çš„è¿‡ç¨‹å¯ç†è§£ä¸ºæ²¿ç€<code>dim</code>ç»´çš„<code>size</code>ï¼Œå¯¹å„ä¸ªå­å¼ é‡è¿›è¡Œé€‰å–å’Œé‡æ–°çš„æ‹¼æ¥ï¼Œå› æ­¤å…¶è¿”å›å€¼å’ŒåŸå§‹å¼ é‡çš„<code>ndim</code>æ˜¯ç›¸åŒçš„ã€‚</p>
<p><strong>ç¤ºä¾‹2</strong>ï¼šæ²¿ç€<code>dim=0</code>çš„æ–¹å‘è¿›è¡Œé€‰æ‹©</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line">a = torch.tensor([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]])</span><br><span class="line"><span class="comment"># aä¸ºtensor([[1, 2, 3],</span></span><br><span class="line"><span class="comment">#        [4, 5, 6]])</span></span><br><span class="line"></span><br><span class="line">b = torch.gather(input=a, dim=<span class="number">0</span>, index=torch.tensor([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>], [<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>]]))</span><br><span class="line"><span class="comment"># è¿”å›å€¼ä¸º tensor([[1, 5, 3],</span></span><br><span class="line"><span class="comment">#        [4, 2, 6],</span></span><br><span class="line"><span class="comment">#        [1, 2, 3],</span></span><br><span class="line"><span class="comment">#        [4, 5, 6]])</span></span><br></pre></td></tr></table></figure>
<p>å…¶æ“ä½œè¿‡ç¨‹å¯å‚ç…§ä¸‹å›¾ï¼š</p>
<p><img src="/images/blog/2020/select/4.png" alt></p>
<p>å¯¹äºäºŒç»´å¼ é‡ï¼Œå…¶æ“ä½œè¿‡ç¨‹ä¸<code>dim=1</code>ç›¸åï¼Œå³ä»¥è¡Œä¸ºå•ä½ï¼Œå¯¹æ¯åˆ—ä¸­çš„å…ƒç´ ï¼ŒæŒ‰ç…§<code>index</code>çš„ç´¢å¼•å·è¿›è¡Œé€‰å–ï¼Œå†æ‹¼æ¥åˆ°ä¸€èµ·ã€‚ä»å¼ é‡<code>shape</code>ä¸Šçœ‹ï¼Œå…¶åœ¨<code>dim=1</code>ä¸Šä¿æŒä¸€è‡´ï¼Œå¯¹<code>dim=0</code>è¿›è¡Œäº†æ”¾å¤§æˆ–ç¼©å°ã€‚</p>
<p><strong>ç¤ºä¾‹3</strong>ï¼šä¸‰ç»´å¼ é‡çš„ä¾‹å­</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = torch.arange(<span class="number">24</span>).reshape(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="comment"># aä¸ºtensor([[[ 0,  1,  2,  3],</span></span><br><span class="line"><span class="comment">#         [ 4,  5,  6,  7],</span></span><br><span class="line"><span class="comment">#        [ 8,  9, 10, 11]],</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#        [[12, 13, 14, 15],</span></span><br><span class="line"><span class="comment">#         [16, 17, 18, 19],</span></span><br><span class="line"><span class="comment">#         [20, 21, 22, 23]]])</span></span><br><span class="line"></span><br><span class="line">b = torch.gather(a, dim=<span class="number">2</span>, index=torch.tensor([[[<span class="number">2</span>], [<span class="number">1</span>], [<span class="number">0</span>]], [[<span class="number">1</span>], [<span class="number">2</span>], [<span class="number">3</span>]]]))</span><br><span class="line"></span><br><span class="line"><span class="comment"># bä¸ºtensor([[[ 2],</span></span><br><span class="line"><span class="comment">#            [5],</span></span><br><span class="line"><span class="comment">#            [8]],</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#        [[13],</span></span><br><span class="line"><span class="comment">#        [18],</span></span><br><span class="line"><span class="comment">#        [23]]])</span></span><br></pre></td></tr></table></figure>
<p>ç®€å•è§£é‡Šä¸‹ï¼Œå…¶é€‰å–çš„<code>dim=2</code>ï¼Œå³æ²¿ç€ä¸‰ç»´å¼ é‡æœ€å†…å±‚çš„å¼ é‡è¿›è¡Œå…ƒç´ é€‰å–å’Œæ‹¼æ¥ï¼Œå…¶åªé€‰å–äº†ä¸€æ¬¡ã€‚å› æ­¤ï¼Œä¸Šè¿°æ“ä½œå¯ç†è§£ä¸ºæ¯ä¸ªæœ€å†…å±‚é€‰å–ä¸€ä¸ªå…ƒç´ ã€‚</p>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>tensor</tag>
        <tag>pytorch</tag>
        <tag>gather</tag>
        <tag>masked_select</tag>
        <tag>index_select</tag>
      </tags>
  </entry>
  <entry>
    <title>PyTorchä¸­expand()ä¸repeat()çš„åŒºåˆ«</title>
    <url>/2020/11/09/PyTorch%E4%B8%ADexpand-%E4%B8%8Erepeat-%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    <content><![CDATA[<p>äºŒè€…éƒ½æ˜¯ç”¨æ¥æ‰©å±•æŸç»´çš„æ•°æ®çš„å°ºå¯¸ã€‚</p>
<p><strong>ä¸€ã€expand()</strong><br>       è¿”å›å½“å‰å¼ é‡åœ¨æŸç»´æ‰©å±•æ›´å¤§åçš„å¼ é‡ã€‚æ‰©å±•ï¼ˆexpandï¼‰å¼ é‡ä¸ä¼šåˆ†é…æ–°çš„å†…å­˜ï¼Œåªæ˜¯åœ¨å­˜åœ¨çš„å¼ é‡ä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„è§†å›¾ï¼ˆviewï¼‰ï¼Œ<strong>åªèƒ½æ‰©å±•ä¸º1çš„ç»´åº¦</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = torch.tensor([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line">print(<span class="string">'æ‰©å±•å‰açš„shape:'</span>, a.shape)</span><br><span class="line">a = a.expand(<span class="number">8</span>, <span class="number">4</span>)</span><br><span class="line">print(<span class="string">'æ‰©å±•åaçš„shape:'</span>, a.shape)</span><br><span class="line">print(a)</span><br><span class="line"></span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line">æ‰©å±•å‰açš„shape: torch.Size([<span class="number">4</span>])</span><br><span class="line">æ‰©å±•åaçš„shape: torch.Size([<span class="number">8</span>, <span class="number">4</span>])</span><br><span class="line">tensor([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]])</span><br></pre></td></tr></table></figure>
<p><br></p>
<p><strong>äºŒã€repeat()</strong> <a id="more"></a><br>       æ²¿ç€ç‰¹å®šçš„ç»´åº¦é‡å¤è¿™ä¸ªå¼ é‡ï¼Œå’Œexpand()ä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªå‡½æ•°æ‹·è´å¼ é‡çš„æ•°æ®:</p>
<pre><code>     &lt;font color=&#39;green&#39;&gt;å‚æ•°æ˜¯æŒ‡æ¯ä¸ªç»´åº¦é‡å¤çš„æ¬¡æ•°ï¼Œä¾‹å¦‚(1, 3, 1)è¡¨ç¤ºç¬¬äºŒç»´é‡å¤ä¸‰æ¬¡ï¼Œå…¶ä½™ç»´åº¦ä¸å˜ã€‚&lt;/font&gt;
</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = torch.tensor([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line">print(<span class="string">'repeatå‰açš„shape:'</span>, a.shape)</span><br><span class="line">a = a.repeat(<span class="number">3</span>, <span class="number">2</span>)</span><br><span class="line">print(<span class="string">'repeatåaçš„shape:'</span>, a.shape)</span><br><span class="line">print(a)</span><br><span class="line"></span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line">repeatå‰açš„shape: torch.Size([<span class="number">4</span>])</span><br><span class="line">repeatåaçš„shape: torch.Size([<span class="number">3</span>, <span class="number">8</span>])</span><br><span class="line">tensor([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]])</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>tensor</tag>
        <tag>pytorch</tag>
        <tag>expand</tag>
        <tag>repeat</tag>
      </tags>
  </entry>
  <entry>
    <title>Python randomæ¨¡å—çš„éšæœºé‡‡æ ·å‡½æ•°</title>
    <url>/2020/11/08/Python-random%E6%A8%A1%E5%9D%97%E7%9A%84%E9%9A%8F%E6%9C%BA%E9%87%87%E6%A0%B7%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<p>choice(seq): ä»seqåºåˆ—ä¸­ï¼ˆå¯ä»¥æ˜¯åˆ—è¡¨ï¼Œå…ƒç»„ï¼Œå­—ç¬¦ä¸²ï¼‰éšæœºå–ä¸€ä¸ªå…ƒç´ è¿”å›</p>
<p><code>choices</code>(<em>population</em>, <em>weights=None</em>, ***, <em>cum_weights=None</em>, <em>k=1</em>)ï¼šä»populationä¸­è¿›è¡Œkæ¬¡<strong>æœ‰æ”¾å›éšæœºé€‰å–</strong>ï¼Œæ¯æ¬¡é€‰å–ä¸€ä¸ªå…ƒç´ ï¼ˆæ³¨æ„ä¼šå‡ºç°åŒä¸€ä¸ªå…ƒç´ å¤šæ¬¡è¢«é€‰ä¸­çš„æƒ…å†µï¼‰ï¼Œweightsæ˜¯ç›¸å¯¹æƒé‡å€¼ï¼Œpopulationä¸­æœ‰å‡ ä¸ªå…ƒç´ å°±è¦æœ‰ç›¸å¯¹åº”çš„weightså€¼ï¼Œcum_weightsæ˜¯ç´¯åŠ æƒé‡å€¼ï¼Œä¾‹å¦‚ï¼Œç›¸å¯¹æƒé‡ã€”10, 5, 30, 5ã€•ç›¸å½“äºç´¯ç§¯æƒé‡ã€”10, 15, 45, 50ã€•ã€‚åœ¨å†…éƒ¨ï¼Œåœ¨è¿›è¡Œé€‰æ‹©ä¹‹å‰ï¼Œç›¸å¯¹æƒé‡è¢«è½¬æ¢ä¸ºç´¯ç§¯æƒé‡ï¼Œå› æ­¤æä¾›ç´¯ç§¯æƒé‡èŠ‚çœäº†å·¥ä½œã€‚è¿”å›ä¸€ä¸ªåˆ—è¡¨ã€‚</p>
<p>sample(<em>population</em>, <em>k</em>)ï¼šä»populationä¸­<strong>æ— æ”¾å›å–æ ·</strong>ï¼Œä¸€æ¬¡å–kä¸ªï¼Œè¿”å›ä¸€ä¸ªké•¿çš„åˆ—è¡¨ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">å¯ä»¥åƒè¿™æ ·ä½¿ç”¨ï¼šsample(range(<span class="number">10000000</span>), k=<span class="number">60</span>)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>random</tag>
        <tag>python</tag>
        <tag>éšæœº</tag>
        <tag>choice</tag>
        <tag>sample</tag>
        <tag>é‡‡æ ·</tag>
      </tags>
  </entry>
  <entry>
    <title>Hinge Loss ç†è§£</title>
    <url>/2020/11/07/Hinge-Loss-%E7%90%86%E8%A7%A3/</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡è½¬è½½è‡ª<a href="https://blog.csdn.net/hustqb/article/details/78347713" target="_blank" rel="noopener">https://blog.csdn.net/hustqb/article/details/78347713</a></p>
</blockquote>
<p>åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œ<strong>hinge loss</strong>ä½œä¸ºä¸€ä¸ª<strong>æŸå¤±å‡½æ•°(loss function)</strong>ï¼Œé€šå¸¸è¢«ç”¨äº<strong>æœ€å¤§é—´éš”ç®—æ³•(maximum-margin)</strong>ï¼Œè€Œæœ€å¤§é—´éš”ç®—æ³•åˆæ˜¯SVM(æ”¯æŒå‘é‡æœº support vector machines)ç”¨åˆ°çš„é‡è¦ç®—æ³•(æ³¨æ„ï¼šSVMçš„å­¦ä¹ ç®—æ³•æœ‰ä¸¤ç§è§£é‡Šï¼š1. é—´éš”æœ€å¤§åŒ–ä¸æ‹‰æ ¼æœ—æ—¥å¯¹å¶ï¼›2. Hinge Loss)ã€‚</p>
<p>â€ƒâ€ƒ<strong>Hinge lossä¸“ç”¨äºäºŒåˆ†ç±»é—®é¢˜</strong>ï¼Œæ ‡ç­¾å€¼y=Â±1ï¼Œé¢„æµ‹å€¼$\hat y \in R$ã€‚è¯¥äºŒåˆ†ç±»é—®é¢˜çš„ç›®æ ‡å‡½æ•°çš„è¦æ±‚å¦‚ä¸‹ï¼š<br>â€ƒâ€ƒ<font color="orange">å½“$\hat y$å¤§äºç­‰äº+1æˆ–è€…å°äºç­‰äº-1æ—¶ï¼Œéƒ½æ˜¯åˆ†ç±»å™¨ç¡®å®šçš„åˆ†ç±»ç»“æœï¼Œæ­¤æ—¶çš„æŸå¤±å‡½æ•°lossä¸º0ï¼›</font>è€Œå½“é¢„æµ‹å€¼$\hat y$ âˆˆ(âˆ’1,1)æ—¶ï¼Œåˆ†ç±»å™¨å¯¹åˆ†ç±»ç»“æœä¸ç¡®å®šï¼Œlossä¸ä¸º0ã€‚æ˜¾ç„¶ï¼Œ$\hat y$ =0æ—¶ï¼Œlossè¾¾åˆ°æœ€å¤§å€¼ã€‚</p>
<p>â€ƒâ€ƒå¦‚æœä½ æƒ³åˆ°äº†ä¸€ä¸ªå¯ä»¥å®šä¹‰è¿™ç§lossçš„å‡½æ•°ï¼Œé‚£è¯´æ˜æœ‰æˆä¸ºæ•°å­¦å®¶çš„æ½œè´¨ã€‚æƒ³ä¸åˆ°çš„è¯å°±ä¹–ä¹–çš„å¾€ä¸‹çœ‹ï¼šhinge losså‡ºåœºã€‚</p>
<p>â€‹        <strong>å¯¹äºè¾“å‡ºy=Â±1ï¼Œå½“å‰$\hat y$ çš„æŸå¤±ä¸º</strong>ï¼š</p>
<script type="math/tex; mode=display">
l(y) = \max(0, 1-y \cdot \hat y)</script><p>ä¸Šå¼æ˜¯Hinge lossåœ¨äºŒåˆ†ç±»é—®é¢˜çš„çš„å˜ä½“ï¼Œå¯ä»¥çœ‹åšåŒå‘Hinge lossã€‚éš¾ä»¥ç†è§£çš„è¯ï¼Œå¯ä»¥å…ˆçœ‹å•æ–¹å‘çš„hinge lossã€‚ä»¥y=+1ï¼Œä¸ºä¾‹ã€‚å½“yâ©¾1æ—¶ï¼Œlossä¸º0ï¼Œå¦åˆ™lossçº¿æ€§å¢å¤§ã€‚å‡½æ•°å›¾åƒå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><div align="center"> <img src="/images/blog/2020/hinge1.png" alt></div></p>
<p><br></p>
<h2 id="hinge-loss-åœ¨SVMä¸­çš„åº”ç”¨"><a href="#hinge-loss-åœ¨SVMä¸­çš„åº”ç”¨" class="headerlink" title="hinge loss åœ¨SVMä¸­çš„åº”ç”¨"></a>hinge loss åœ¨SVMä¸­çš„åº”ç”¨<a id="more"></a></h2><p>SVMåœ¨ç®€å•æƒ…å†µä¸‹ï¼ˆçº¿æ€§å¯åˆ†æƒ…å†µä¸‹ï¼‰ä½¿ç”¨çš„å°±æ˜¯ä¸€ä¸ªæœ€å¤§é—´éš”ç®—æ³•ã€‚å‡ ä½•æ„ä¹‰å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆå®å¿ƒçš„æ•°æ®ç‚¹å°±æ˜¯è¯¥ç±»åˆ«çš„æ”¯æŒå‘é‡ï¼‰ï¼Œæœ€å¤§åŒ–åˆ†ç¦»è¶…å¹³é¢åˆ°ä¸¤ä¸ªç±»åˆ«çš„æ”¯æŒå‘é‡ä¹‹é—´çš„è·ç¦» ã€‚</p>
<p><div align="center"> <img src="/images/blog/2020/hinge2.jpg" alt></div></p>
<p>â€‹        çº¿æ€§å¯åˆ†SVMçš„é¢„æµ‹å€¼ï¼Œå…¶ä¸­å’Œbéƒ½æ˜¯åˆ†ç±»å™¨é€šè¿‡æ ·æœ¬å­¦ä¹ åˆ°çš„å‚æ•°ã€‚æ­£å¦‚å‰é¢æ‰€è¯´ï¼Œy^âˆˆRã€‚å¦‚æœåˆ†ç¦»è¶…å¹³é¢åœ¨å¦‚ä¸Šå›¾æ‰€ç¤ºçš„ä½ç½®ï¼ˆè¿™æ˜¯æœ€å¤§åˆ†å‰²æƒ…å†µï¼‰å¹¶ä¸”æ”¯æŒå‘é‡ä¸åˆ†å‰²å¹³é¢ä¹‹é—´çš„è·ç¦»=1ï¼Œæ¯ä¸ªy=1çš„æ ·æœ¬å…¶ï¼Œæ¯ä¸ªy=âˆ’1çš„æ ·æœ¬å…¶ï¼Œæ¯ä¸ªç‚¹çš„Hinge lossä¸º0ï¼Œæ•´ä½“lossä½œä¸ºå¹³å‡å€¼ï¼Œä¹Ÿç­‰äº0ã€‚ å¦‚æœåˆ†å‰²è¶…å¹³é¢è¯¯åˆ†ç±»ï¼Œåˆ™Hinge losså¤§äº0ã€‚Hinge lossé©±åŠ¨åˆ†å‰²è¶…å¹³é¢ä½œå‡ºè°ƒæ•´ã€‚ å¦‚æœåˆ†å‰²è¶…å¹³é¢è·ç¦»æ”¯æŒå‘é‡çš„è·ç¦»å°äº1ï¼Œåˆ™Hinge losså¤§äº0ï¼Œä¸”å°±ç®—åˆ†ç¦»è¶…å¹³é¢æ»¡è¶³æœ€å¤§é—´éš”ï¼ŒHinge lossä»å¤§äº0</p>
<h2 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h2><p>Hinge Lossæ˜¯ä¸€ä¸ªå‡¸å‡½æ•°(convex function)ï¼Œé€‚ç”¨æ‰€æœ‰çš„æœºå™¨å­¦ä¹ å‡¸ä¼˜åŒ–æ–¹æ³•ã€‚</p>
<p><strong>å¹³æ»‘</strong></p>
<p>ä¸ºäº†è§£å†³Hinge Lossçš„ä¼˜åŒ–é—®é¢˜ï¼Œç°åœ¨æœ‰ä¸¤ç§å¹³æ»‘ç­–ç•¥ï¼š</p>
<script type="math/tex; mode=display">
l(y) =  \left \{
\begin {aligned}
\frac{1}{2} - ty  \quad ty \leq 0 \\
\frac{1}{2}(1-ty)^2 \quad  0 < ty < 1 \\
0 \quad 1 \leq ty
\end {aligned}
\right.</script><p>ç¬¬äºŒç§ï¼š</p>
<script type="math/tex; mode=display">
l(y) = \frac{1}{2\gamma} \max(0, 1-ty)^2</script><p>å…¶ä¸­é€šå¸¸å–$\gamma = 2$</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å†å¼ºè°ƒä¸€ä¸‹ï¼Œä½¿ç”¨Hinge lossçš„åˆ†ç±»å™¨çš„$\hat y$âˆˆRã€‚|$\hat y$ |è¶Šå¤§ï¼Œè¯´æ˜æ ·æœ¬ç‚¹ç¦»åˆ†å‰²è¶…å¹³é¢è¶Šè¿œï¼Œå³è¯¥æ ·æœ¬ç‚¹å¾ˆå®¹æ˜“è¢«åˆ†ç±»ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬åœ¨é€‰æ‹©åˆé€‚çš„æŸå¤±å‡½æ•°è¿›è¡Œä¼˜åŒ–æ—¶ï¼Œæ²¡å¿…è¦å…³æ³¨é‚£äº›ç¦»è¶…å¹³é¢å¾ˆè¿œçš„æ ·æœ¬ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹è·åˆ†ç¦»è¶…å¹³é¢çš„è·ç¦»é€‰æ‹©ä¸€ä¸ªé˜ˆå€¼ï¼Œæ¥è¿‡æ»¤è¿™äº›ç¦»è¶…å¹³é¢å¾ˆè¿œçš„æ ·æœ¬ã€‚<strong>è¿™å°±æ˜¯Hinge lossçš„ç²¾é«“ï¼Œå¼ä¸­çš„1å°±æ˜¯æˆ‘ä»¬é€‰æ‹©çš„é˜ˆå€¼ï¼Œè¿™ä¸ªå¯ä»¥ä½œä¸ºä¸€ä¸ªè¶…å‚æ•°ã€‚é€šè¿‡ä¸€ä¸ªmax(0, )å‡½æ•°ï¼Œå¿½ç•¥å€¼è¿‡é«˜çš„æƒ…å†µ</strong>ã€‚</p>
<p><font color="orange"><strong>å³å¯¹äºç®€å•çš„æ ·æœ¬ï¼ŒæŸå¤±ä¸º0ï¼›å¯¹äºå›°éš¾æ ·æœ¬ï¼Œæ‰æœ‰æŸå¤±ã€‚è€Œéš¾æ˜“ç¨‹åº¦æ˜¯ä»¥æŒ‡å®šçš„hingeæ§åˆ¶çš„ã€‚</strong></font> å¯å‚è€ƒè¥¿ç“œä¹¦130é¡µã€‚</p>
]]></content>
      <categories>
        <category>Algorithms</category>
      </categories>
      <tags>
        <tag>æŸå¤±å‡½æ•°</tag>
        <tag>Hinge Loss</tag>
        <tag>æœ€å¤§é—´éš”ç®—æ³•</tag>
        <tag>maximum-margin</tag>
      </tags>
  </entry>
  <entry>
    <title>èšç±»æŸå¤±çš„å®ç°</title>
    <url>/2020/11/05/%E8%81%9A%E7%B1%BB%E6%8D%9F%E5%A4%B1%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<p>åœ¨æœ€è¿‘çš„å®éªŒä¸­ï¼Œéœ€è¦æ·»åŠ èšç±»æŸå¤±ï¼Œå°è¯•å°†ä¸åŒç±»åˆ«æ ·æœ¬åœ¨ç‰¹å¾ç©ºé—´ä¸­çš„è·ç¦»æ‹‰è¿œï¼›åŒç±»æ ·æœ¬ä¹‹é—´è·ç¦»æ‹‰è¿‘ã€‚å¦‚ä½•ä½¿ç”¨PyTorchå®ç°è¿™ä¸€æŸå¤±ï¼Œæˆ‘å€Ÿé‰´äº†<a href="https://github.com/INK-USC/NERO" target="_blank" rel="noopener">NERO</a>ä¸­çš„å®ç°ã€‚</p>
<p>åæ§½ï¼šç”¨æƒ¯äº†pytorchï¼Œä½¿ç”¨tensorflowå…ˆå®šä¹‰è®¡ç®—å›¾ï¼Œå†ç”¨tf.Session()è¿è¡Œæ˜¯çœŸçš„ä¸ä¹ æƒ¯ï¼Œè€Œä¸”éº»çƒ¦â€¦â€¦</p>
<p><br></p>
<p>é¦–å…ˆå®šä¹‰ç›¸ä¼¼åº¦çŸ©é˜µï¼Œshape=(batch, batch)ï¼Œè¿™é‡Œç›´æ¥ç»™å‡ºæ¥ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line">tau = <span class="number">1.</span></span><br><span class="line">sim = tf.constant([</span><br><span class="line">    [<span class="number">0.8</span>, <span class="number">0.3</span>, <span class="number">0.6</span>],</span><br><span class="line">    [<span class="number">0.3</span>, <span class="number">0.9</span>, <span class="number">0.5</span>],</span><br><span class="line">    [<span class="number">0.6</span>, <span class="number">0.5</span>, <span class="number">0.8</span>]</span><br><span class="line">], dtype=tf.float64)</span><br></pre></td></tr></table></figure>
<p>ç„¶åå®šä¹‰å…³ç³»ï¼Œä½¿ç”¨one-hotè¡¨ç¤ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">rels = tf.constant([</span><br><span class="line">    [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">    [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">    [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">], dtype=tf.float64)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">neg_idxs = tf.matmul(rels, tf.transpose(rels, [<span class="number">1</span>, <span class="number">0</span>]))  <span class="comment"># neg_idxs[i][j] = 1 è¡¨ç¤ºä¸¤ä¸ªæ ·æœ¬ç±»åˆ«ç›¸åŒ</span></span><br><span class="line">pat_pos = tf.square(tf.maximum(tau - sim, <span class="number">0.</span>))  <span class="comment"># (batch, batch)</span></span><br><span class="line">pat_pos = tf.reduce_max(pat_pos - (<span class="number">1</span> - neg_idxs) * <span class="number">1e30</span>, axis=<span class="number">1</span>)  <span class="comment"># æ‰¾åˆ°äº†æœ€ä¸ç›¸ä¼¼çš„æ­£é‚»å±…</span></span><br><span class="line">pat_neg = tf.square(tf.maximum(sim, <span class="number">0.</span>))</span><br><span class="line">pat_neg = tf.reduce_max(pat_neg - <span class="number">1e30</span> * neg_idxs, axis=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># l_sim = tf.reduce_sum(self.weight * (pat_pos + pat_neg), axis=0)</span></span><br><span class="line">l_sim = tf.reduce_sum(pat_pos + pat_neg, axis=<span class="number">0</span>)  <span class="comment"># èšç±»æŸå¤±</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<blockquote>
<p>neg_idxs:</p>
<p>[[1, 0, 1]</p>
<p>[0, 1, 0]</p>
<p>[1, 0, 1]]</p>
<p>pat_pos:</p>
<p>[[0.04, 0.49, 0.16],</p>
<p>[0.49, 0.01, 0.25],</p>
<p>[0.16, 0.25, 0.04]]</p>
<p>pat_pos:</p>
<p>[0.16, 0.01, 0.16]</p>
<p>pat_negåŒç†ä¸pat_pos</p>
</blockquote>
<p>èšç±»æŸå¤±ï¼šï¼ˆå¯ä»¥åŠ æƒæ±‚å’Œï¼‰</p>
<blockquote>
<p>l_sim=0.92</p>
</blockquote>
]]></content>
      <categories>
        <category>Algorithms</category>
      </categories>
      <tags>
        <tag>æŸå¤±å‡½æ•°</tag>
        <tag>cluster loss</tag>
        <tag>metric loss</tag>
        <tag>èšç±»æŸå¤±</tag>
        <tag>tensorflow</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode-1-ç´ æ•°åˆ†è§£</title>
    <url>/2020/11/04/LeetCode-1-%E7%B4%A0%E6%95%B0%E5%88%86%E8%A7%A3/</url>
    <content><![CDATA[<h2 id="1-é—®é¢˜æè¿°"><a href="#1-é—®é¢˜æè¿°" class="headerlink" title="1. é—®é¢˜æè¿°"></a>1. é—®é¢˜æè¿°</h2><p>æœ‰10^8ä¸ªæ‘åº„æ’åœ¨ä¸€æ¡å…¬è·¯ä¸Šï¼Œä¾æ¬¡ç¼–å·ä¸º0~10^8-1ï¼Œç›¸é‚»æ‘åº„è·ç¦»ä¸º1ï¼Œå…¶ä¸­æœ‰nä¸ªæ‘åº„å±…ä½ç€ç‰›ç‰›ï¼Œå±…ä½ç‰›ç‰›çš„æ‘åº„ä¾æ¬¡ä¸ºa0~an-1ï¼Œä¿è¯a0=0.</p>
<p>ç°åœ¨éœ€è¦ å»ºè®¾è½¦ç«™ï¼Œæœ‰ä¸¤ä¸ªè¦æ±‚ï¼š</p>
<ol>
<li>æ¯ä¸ªæœ‰ç‰›ç‰›çš„æ‘åº„å¿…é¡»ä¿®å»ºè½¦ç«™</li>
<li>ç›¸é‚»è½¦ç«™è·ç¦»å¿…é¡»ä¸º1æˆ–è€…æŸä¸ªè´¨æ•°</li>
</ol>
<p>ç°ç»™å‡ºnå’Œaæ•°ç»„ï¼Œæ±‚éœ€è¦å»ºè®¾çš„è½¦ç«™çš„æœ€å°æ•°é‡ã€‚</p>
<h2 id="2-åˆ†æ"><a href="#2-åˆ†æ" class="headerlink" title="2. åˆ†æ"></a>2. åˆ†æ</h2><p>éœ€è¦è§£å†³ä¸¤ä¸ªå…³é”®é—®é¢˜ï¼š</p>
<ol>
<li>ç»™å‡ºä¸€ä¸ªæ•°çš„æœ€å°‘çš„ç´ æ•°åˆ†è§£</li>
<li>åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦ä¸ºç´ æ•°</li>
</ol>
<h2 id="3-è§£å†³"><a href="#3-è§£å†³" class="headerlink" title="3. è§£å†³"></a>3. è§£å†³</h2><h3 id="3-1-é—®é¢˜1"><a href="#3-1-é—®é¢˜1" class="headerlink" title="3.1 é—®é¢˜1"></a>3.1 é—®é¢˜1</h3><p>å“¥å¾·å·´èµ«çŒœæƒ³ï¼šä»»ä¸€å¤§äº2çš„æ•´æ•°éƒ½å¯ä»¥å†™ä½œä¸‰ä¸ªè´¨æ•°ä¹‹å’Œã€‚</p>
<p><a href="https://baike.baidu.com/item/%E5%93%A5%E5%BE%B7%E5%B7%B4%E8%B5%AB%E7%8C%9C%E6%83%B3/72364?fr=aladdin" target="_blank" rel="noopener">å“¥å¾·å·´èµ«çŒœæƒ³çš„æ¬§æ‹‰ç‰ˆæœ¬</a>ï¼šä»»ä¸€å¤§äº2çš„å¶æ•°éƒ½å¯ä»¥å†™æˆä¸¤ä¸ªè´¨æ•°ä¹‹å’Œã€‚</p>
<p>å…¶å®ï¼Œä¹Ÿæœ‰ä¸€éƒ¨åˆ†å¥‡æ•°å¯ä»¥ç”¨ä¸¤ä¸ªç´ æ•°çš„å’Œè¡¨ç¤ºï¼Œå¤§å¤šæ•°çš„å¥‡æ•°æ— æ³•ç”¨ä¸¤ä¸ªç´ æ•°çš„å’Œè¡¨ç¤ºï¼Œä¾‹å¦‚15=2+13ï¼Œè€Œ23ã€25ç­‰åˆ™æ— æ³•ç”¨ä¸¤ç´ æ•°çš„å’Œè¡¨ç¤ºã€‚</p>
<p><br></p>
<p><font color="orange">emmmï¼Œè¿™æ ·çœ‹æ¥ï¼Œä¸èƒ½ç›´æ¥åˆ©ç”¨å“¥å¾·å·´èµ«çŒœæƒ³è§£å†³é—®é¢˜ã€‚</font>ä½†æ˜¯ï¼Œç”±äº<strong>å“¥å¾·å·´èµ«çŒœæƒ³çš„æ¬§æ‹‰ç‰ˆæœ¬</strong>å·²ç»è¢«è®¡ç®—æœºéªŒè¯åˆ°äº†å¾ˆå¤§çš„å¤©æ–‡æ•°å­—ï¼Œæ‰€ä»¥å¯ä»¥å‡å°‘æˆ‘ä»¬ä¸€åŠçš„å·¥ä½œé‡ã€‚å¦‚æœä¸¤ä¸ªç›¸é‚»è½¦ç«™é—´è·ç¦»ä¸ºå¶æ•°ï¼Œæˆ‘ä»¬æœ‰ç†ç”±ç›¸ä¿¡åªéœ€è¦åœ¨å…¶ä¸­å®‰æ’ä¸€ä¸ªè½¦ç«™ï¼Œå°±å¯ä»¥æŠŠè·ç¦»å˜ä¸ºä¸¤ä¸ªè´¨æ•°ï¼›å› æ­¤ï¼Œåªéœ€è¦è€ƒè™‘ä¸¤ä¸ªç›¸é‚»è½¦ç«™é—´è·ç¦»ä¸ºå¥‡æ•°çš„æƒ…å†µã€‚</p>
<p><br></p>
<p>æ ¹æ®å“¥å¾·å·´èµ«çŒœæƒ³ï¼Œå¥‡æ•°å¯ä»¥æœ€å°‘å¯ä»¥è¢«æ‹†åˆ†ä¸ºä¸¤ä¸ªæˆ–ä¸‰ä¸ªè´¨æ•°çš„å’Œã€‚æ²¡æœ‰æ›´å¥½çš„åŠæ³•ï¼Œ<strong>åªèƒ½é€šè¿‡éå†çš„æ–¹å¼ï¼Œçœ‹èƒ½å¦è¢«åˆ†ä¸ºä¸¤ä¸ªè´¨æ•°ä¹‹å’Œ</strong>ï¼Œå¦‚æœä¸èƒ½ï¼Œåˆ™å¿…ç„¶å¯ä»¥è¢«åˆ†ä¸ºä¸‰ä¸ªè´¨æ•°ä¹‹å’Œã€‚è€Œåˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¦ä¸ºç´ æ•°ï¼Œå°±è¦é€šè¿‡3.2èŠ‚çš„æ–¹æ³•ã€‚<a id="more"></a></p>
<h3 id="3-2-é—®é¢˜2"><a href="#3-2-é—®é¢˜2" class="headerlink" title="3.2 é—®é¢˜2"></a>3.2 é—®é¢˜2</h3><p>å…·ä½“ä¸ºï¼ŒæŠŠè¯¥æ•°å­—1/2ä»¥å†…çš„æ•°å­—éƒ½å’Œè‡ªå·±æ•´é™¤ä¸€ä¸‹ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰å…¶ä»–å› å­ã€‚</p>
<p>ä½†æ˜¯è¿™ç§æ€è·¯è™½ç„¶ç®€å•ï¼Œåœ¨å®è·µæ—¶å´å‡ºç°äº†è¶…æ—¶é—®é¢˜ï¼š</p>
<p><img src="/images/blog/2020/leetcode/timeout.PNG" alt></p>
<p>æ˜¾ç„¶ï¼Œéœ€è¦ä¸€ç§æ›´åŠ æœ‰æŠ€å·§çš„ç®—æ³•ï¼Œè¿™æ—¶ï¼Œå°±æ˜¯éœ€è¦â€œç´ æ•°ç­›é€‰æ³•â€å‘æŒ¥ä½œç”¨çš„æ—¶å€™äº†ã€‚</p>
<p><br></p>
<h4 id="ç´ æ•°ç­›é€‰æ³•"><a href="#ç´ æ•°ç­›é€‰æ³•" class="headerlink" title="ç´ æ•°ç­›é€‰æ³•"></a>ç´ æ•°ç­›é€‰æ³•</h4><p>å¼€ä¸€ä¸ªå¤§å°ä¸ºnçš„æ•°ç»„ï¼Œä¾æ¬¡ç”¨2ç­›æ‰4,6,8,10â€¦ï¼Œç”¨3ç­›æ‰6,9,12,â€¦ï¼Œä¾æ¬¡è¿›è¡Œï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–rangeèŒƒå›´å†…çš„æ‰€æœ‰ç´ æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span>* <span class="title">get_prime</span><span class="params">(<span class="keyword">int</span> range)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">bool</span> *flags = <span class="keyword">new</span> <span class="keyword">bool</span>[range]; <span class="comment">// true means not prime</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; range; ++i) &#123;</span><br><span class="line">		flags[i] = <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; range; ++i) &#123;</span><br><span class="line">		<span class="keyword">if</span> (flags[i])</span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = i + i; j &lt; range; j += i) &#123;</span><br><span class="line">			flags[j] = <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> flags;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä¸»ä½“ç¨‹åº"><a href="#ä¸»ä½“ç¨‹åº" class="headerlink" title="ä¸»ä½“ç¨‹åº"></a>ä¸»ä½“ç¨‹åº</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> station = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">bool</span> *primes = get_prime(<span class="number">10000000</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">	station += <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">if</span> (i + <span class="number">1</span> &lt; n) &#123;</span><br><span class="line">		<span class="keyword">int</span> distance = a[i + <span class="number">1</span>] - a[i];</span><br><span class="line">		<span class="keyword">if</span> (distance &lt;= <span class="number">2</span>);  </span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (!primes[distance]); <span class="comment">// è´¨æ•°</span></span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (distance % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">			station += <span class="number">1</span>; <span class="comment">// å“¥å¾·å·´èµ«çŒœæƒ³:å¶æ•°</span></span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">bool</span> split2 = <span class="literal">false</span>;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">2</span>; j &lt;= distance / <span class="number">2</span>; ++j) &#123;  <span class="comment">// å“¥å¾·å·´èµ«çŒœæƒ³:å¥‡æ•°</span></span><br><span class="line">				<span class="keyword">if</span> (!primes[j] &amp;&amp; !primes[distance - j]) &#123;</span><br><span class="line">					split2 = <span class="literal">true</span>;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> (split2)</span><br><span class="line">				station += <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				station += <span class="number">2</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; station &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>
<p>å†æ¬¡æäº¤ï¼Œå‘ç°ä¾ç„¶è¶…æ—¶ï¼ŒğŸ˜¥ï¼Œç™¾æ€ä¸å¾—å…¶è§£ï¼Œåœ¨ç½‘ä¸ŠæŸ¥é˜…åï¼Œå‘ç°è‡ªå·±å¯¹å¥‡æ•°çš„å¤„ç†è¿‡äºå¤æ‚ï¼Œ<strong>å¥‡æ•°å¦‚æœè¡¨ç¤ºä¸ºä¸¤ä¸ªæ•°ä¹‹å’Œï¼Œåˆ™å¿…ç„¶ä¸ºå¥‡+å¶ï¼Œè‹¥æƒ³è¦åªæœ‰ä¸¤ä¸ªè´¨æ•°ç›¸åŠ ï¼Œåˆ™å¶æ•°å¿…ç„¶ä¸º2ï¼Œå› æ­¤åªéœ€è¦åˆ¤æ–­å‡å»2åæ˜¯å¦ä¸ºè´¨æ•°</strong>ã€‚</p>
<p>ä¿®æ”¹<code>å“¥å¾·å·´èµ«çŒœæƒ³ï¼šå¥‡æ•°</code>éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> (!primes[distance - <span class="number">2</span>]) <span class="comment">// å“¥å¾·å·´èµ«çŒœæƒ³:å¥‡æ•°</span></span><br><span class="line">		station += <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		station += <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯è¿˜æ˜¯æ²¡é€šè¿‡â€¦â€¦ğŸ˜­</p>
<p>åœ¨ç½‘ä¸ŠæŸ¥åˆ°äº†ä¸€ä¸ªï¼Œçœ‹èµ·æ¥å¾ˆç®€å•ï¼Œå¯èƒ½æ˜¯æˆ‘æƒ³çš„å¤æ‚äº†ï¼Ÿ</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">is_prime</span><span class="params">(<span class="keyword">int</span> a)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; a; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a % i == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">work</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span>* a, <span class="keyword">int</span> aLen)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">0</span> &amp;&amp; n==<span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            aLen = n;</span><br><span class="line">            <span class="keyword">return</span> aLen;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n<span class="number">-1</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> len = a[i+<span class="number">1</span>]-a[i];</span><br><span class="line">            <span class="keyword">if</span>(is_prime(len) == <span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                result++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(len % <span class="number">2</span> == <span class="number">0</span> || is_prime(len<span class="number">-2</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                result+=<span class="number">2</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                result+=<span class="number">3</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        aLen = result;</span><br><span class="line">        <span class="keyword">return</span> aLen;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ã€‚å¦å¤–ï¼Œè¡¥å……ä¸€ä¸ªé¢˜å¤–è¯ï¼Œåœ¨C++ä¸­è®¡æ—¶ï¼Œè§‚å¯Ÿç¨‹åºè¿è¡Œæ—¶é—´ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="keyword">clock_t</span> time_start = clock();</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">clock_t</span> time_end = clock();</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"time use:"</span> &lt;&lt; <span class="number">1000</span> * (<span class="keyword">long</span> <span class="keyword">long</span>)(time_end - time_start) / (<span class="keyword">double</span>)CLOCKS_PER_SEC &lt;&lt; <span class="string">"ms"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>
<p>ä»Šå¤©å°±å­¦åˆ°è¿™é‡Œï¼Œä¸‹ç­äº†ä¸‹ç­äº†å˜»å˜»ğŸ¤­ğŸ˜„</p>
]]></content>
      <categories>
        <category>Algorithms</category>
        <category>LeetCode</category>
      </categories>
      <tags>
        <tag>LeetCode</tag>
        <tag>DP</tag>
        <tag>åŠ¨æ€è§„åˆ’</tag>
        <tag>èƒŒåŒ…é—®é¢˜</tag>
        <tag>Algothrim</tag>
        <tag>ç´ æ•°</tag>
        <tag>å“¥å¾·å·´èµ«çŒœæƒ³</tag>
      </tags>
  </entry>
  <entry>
    <title>å‘é‡å¯è§†åŒ–</title>
    <url>/2020/11/02/%E5%90%91%E9%87%8F%E5%8F%AF%E8%A7%86%E5%8C%96/</url>
    <content><![CDATA[<p>è¿‘æœŸåœ¨å®éªŒä¸­ï¼Œéœ€è¦å¯¹ç‰¹å¾ç©ºé—´çš„å‘é‡è¿›è¡Œå¯è§†åŒ–ï¼Œè§‚å¯Ÿå‘é‡çš„ç©ºé—´åˆ†å¸ƒæ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œå¯¹å‘é‡å¯è§†åŒ–è¿›è¡Œäº†ä¸€äº›ç®€å•çš„æ¢ç´¢ã€‚</p>
<h2 id="1-ä½¿ç”¨tensorboard"><a href="#1-ä½¿ç”¨tensorboard" class="headerlink" title="1. ä½¿ç”¨tensorboard"></a>1. ä½¿ç”¨tensorboard</h2><p>ä½¿ç”¨tensorboardå¯ä»¥å¯¹å‘é‡è¿›è¡Œå¯è§†åŒ–ï¼Œå¯ä»¥åŠ¨æ€çš„æ‹–æ‹½ã€ç¼©æ”¾ï¼Œéå¸¸çš„æ–¹ä¾¿ã€‚ä½¿ç”¨tensorboardå¯è§†åŒ–ä¸»è¦ç”¨åˆ°ä¸‹é¢çš„å‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">visualisation</span><span class="params">(words, embeddings, log_path)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    :param words: è¯list</span></span><br><span class="line"><span class="string">    :param embeddings: np.array è¯å‘é‡çŸ©é˜µ</span></span><br><span class="line"><span class="string">    :param log_path:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="comment"># Set up a logs directory, so Tensorboard knows where to look for files</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(log_path):</span><br><span class="line">        os.makedirs(log_path)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Save Labels separately on a line-by-line manner.</span></span><br><span class="line">    <span class="keyword">with</span> open(os.path.join(log_path, <span class="string">'metadata.tsv'</span>), <span class="string">"w"</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> subwords <span class="keyword">in</span> words:</span><br><span class="line">            f.write(<span class="string">"&#123;&#125;\n"</span>.format(subwords))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Save the weights we want to analyse as a variable. Note that the first</span></span><br><span class="line">    <span class="comment"># value represents any unknown word, which is not in the metadata, so</span></span><br><span class="line">    <span class="comment"># we will remove that value.</span></span><br><span class="line">    weights = tf.Variable(embeddings)</span><br><span class="line">    <span class="comment"># Create a checkpoint from embedding, the filename and key are</span></span><br><span class="line">    <span class="comment"># name of the tensor.</span></span><br><span class="line">    checkpoint = tf.train.Checkpoint(embedding=weights)</span><br><span class="line">    checkpoint.save(os.path.join(log_path, <span class="string">"embedding.ckpt"</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Set up config</span></span><br><span class="line">    config = projector.ProjectorConfig()</span><br><span class="line">    embedding = config.embeddings.add()</span><br><span class="line">    <span class="comment"># The name of the tensor will be suffixed by `/.ATTRIBUTES/VARIABLE_VALUE`</span></span><br><span class="line">    embedding.tensor_name = <span class="string">'embedding/.ATTRIBUTES/VARIABLE_VALUE'</span></span><br><span class="line">    embedding.metadata_path = <span class="string">'metadata.tsv'</span></span><br><span class="line">    projector.visualize_embeddings(log_path, config)</span><br></pre></td></tr></table></figure>
<p>ä¸»è¦å‚è€ƒäº†TensorFlowçš„å®˜æ–¹æŒ‡å—<a href="https://www.tensorflow.org/tensorboard/tensorboard_projector_plugin" target="_blank" rel="noopener">https://www.tensorflow.org/tensorboard/tensorboard_projector_plugin</a></p>
<p>è¿™é‡Œ<code>embedding.tensor_name = &#39;embedding/.ATTRIBUTES/VARIABLE_VALUE&#39;</code>æ˜¯ä¸èƒ½éšæ„æ”¹åŠ¨çš„ï¼Œä¸æ˜ç™½ä¸ºä»€ä¹ˆâ€¦ä¸è¿‡æš‚æ—¶ä¸å†æ·±å…¥æ¢ç©¶äº†ï¼Œä¸æ˜¯å…³é”®é—®é¢˜ã€‚</p>
<p><br></p>
<p>è¡¥å……ï¼šå…³äº<code>/.ATTRIBUTES/VARIABLE_VALUE/</code>é—®é¢˜ï¼Œ<a href="https://github.com/tensorflow/tensorboard/issues/2471" target="_blank" rel="noopener">https://github.com/tensorflow/tensorboard/issues/2471</a></p>
<blockquote>
<p>The tensor name change is a bit trickier. I looked into this a bit, and<br>itâ€™s due to changes in the TensorFlow checkpoint code itself, as you<br>suggest; the tokens <a href="https://github.com/tensorflow/tensorflow/blob/5b4fe5470852d1aea737b194e03727cdedddebca/tensorflow/python/training/tracking/graph_view.py#L45-L48" target="_blank" rel="noopener"><code>.ATTRIBUTES</code></a> and <a href="https://github.com/tensorflow/tensorflow/blob/5b4fe5470852d1aea737b194e03727cdedddebca/tensorflow/python/training/tracking/base.py#L40-L44" target="_blank" rel="noopener"><code>VARIABLE_VALUE</code></a> are<br>hard-coded, and you need to supply them on any checkpoint-related<br>methods (e.g., <code>read_tensor</code>).</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç”±äºTensorFlowçš„ä¸€äº›åŸå› ï¼Œå¿…é¡»åŠ ä¸Šè¿™ä¸ªåç§°åç¼€ï¼Œå°±è¿™æ ·åšå°±æ˜¯äº†ï¼Œæ²¡æœ‰ä»€ä¹ˆå€¼å¾—æ¢ç©¶ã€‚</p>
<p><br></p>
<p>å¯è§†åŒ–æ•ˆæœå¦‚å›¾ï¼š</p>
<p><img src="/images/blog/2020/visual/feature_space.png" alt></p>
<p>å¹¶ä¸åƒé¢„æœŸçš„é‚£æ ·ä¸åŒçš„ç±»åˆ«æ³¾æ¸­åˆ†æ˜ğŸ˜¥ç”šè‡³çœ‹ä¸å‡ºæ˜æ˜¾çš„ç•Œé™ï¼Œå…¨éƒ¨æ··æ‚åœ¨äº†ä¸€èµ·ã€‚çŒœæƒ³åŸå› å¯èƒ½æ˜¯æœ‰ä¸¤ä¸ªï¼š</p>
<ul>
<li>è®­ç»ƒä¸å……åˆ†ï¼Œå­¦ä¹ æ•ˆæœä¸å¤Ÿå¥½</li>
<li>å¯è§†åŒ–çš„æ•°æ®å¤ªå¤š<a id="more"></a></li>
</ul>
<p><strong>é’ˆå¯¹ç¬¬ä¸€ç‚¹ï¼Œå¯ä»¥é‡‡å–çš„åšæ³•æ˜¯è°ƒæ•´ç¥ç»ç½‘ç»œï¼Œå¢åŠ è®­ç»ƒè½®æ•°ï¼›ä¿®æ”¹Losså‡½æ•°ï¼Œå¢åŠ èšç±»æŸå¤±ï¼Œè¿«ä½¿ç‰¹å¾ç©ºé—´ä¸­ä¸åŒç±»åˆ«çš„å‘é‡è·ç¦»æ‹‰è¿œï¼ŒåŒç±»åˆ«çš„å‘é‡è·ç¦»æ‹‰è¿‘ã€‚</strong>è¿™é‡Œç•™åœ¨åç»­çš„å®éªŒè¿›è¡Œå°è¯•æ¢ç´¢ã€‚</p>
<p>é’ˆå¯¹ç¬¬äºŒç‚¹ï¼Œæ¯ä¸ªç±»åˆ«éšæœºç­›é€‰10ä¸ªæ ·æœ¬ï¼Œå†æ¬¡æŸ¥çœ‹ç‰¹å¾ç©ºé—´ï¼š</p>
<p><img src="/images/blog/2020/visual/feature_10.png" alt></p>
<p>å·¦ä¾§æ˜¯çœŸå®æ•°æ®çš„åˆ†å¸ƒï¼Œå³ä¾§æ˜¯ç”Ÿæˆçš„ä¼ªæ•°æ®çš„åˆ†å¸ƒï¼Œåœ¨ä¸Šæ–¹ï¼Œè¿˜æœ‰ä¸€äº›æ•°æ®ç‚¹ï¼Œå¯ä»¥çœ‹ä½œå¼‚å¸¸æ•°æ®ã€‚å¯¹å…¶è¿›è¡Œåˆ†æï¼Œå¯ä»¥å¾—åˆ°ä»¥ä¸‹å‡ ä¸ªç»“è®ºï¼š</p>
<font color="green">

* çœŸå®æ•°æ®çš„åˆ†å¸ƒä¸­ï¼Œæœ‰äº›ç±»åˆ«å­¦ä¹ æ•ˆæœè¾ƒå¥½ï¼Œä¾‹å¦‚å¤©è“è‰²çš„ç‚¹ï¼Œå‡ ä¹éƒ½é›†ä¸­åœ¨å·¦ä¸‹æ–¹ã€‚ä½†æ˜¯æ•´ä½“ä»ç„¶æ²¡æœ‰è¾¾åˆ°é¢„æœŸçš„æ•ˆæœï¼Œä¸åŒç±»åˆ«ä¹‹é—´é‡å ä¾ç„¶è¿‡å¤§ã€‚
* åœ¨ç”Ÿæˆçš„ä¼ªæ•°æ®ä¸Šï¼Œåˆ†å¸ƒä¸å¦‚çœŸå®æ•°æ®ï¼Œæ›´åŠ æŒ¤åœ¨ä¸€å›¢ã€‚
* çœŸå®æ•°æ®å’Œä¼ªæ•°æ®ä¹‹é—´æ³¾æ¸­åˆ†æ˜ï¼Œä¸çŸ¥é“æ˜¯å¦æ˜¯ä¸€ç§å¥½ç°è±¡ï¼ŸæŒ‰ç…§ç†è®ºåˆ†æï¼Œç”Ÿæˆçš„ä¼ªæ•°æ®åº”è¯¥å¯ä»¥é€¼è¿‘çœŸå®æ•°æ®çš„åˆ†å¸ƒï¼Œæ˜¯åªéœ€è¦å½¢ä¼¼ï¼Ÿè¿˜æ˜¯éœ€è¦ä¸¤ä¸ªç‰¹å¾ç©ºé—´èƒ½å¤Ÿç³…åˆåœ¨ä¸€èµ·å‘¢ï¼Ÿ

</font>

<p><br></p>
<p>é™¤å»ä¸Šè¿°å®éªŒï¼Œæˆ‘è¿˜å¯¹é€šç”¨çš„gloveè¯å‘é‡è¿›è¡Œäº†å®éªŒï¼Œç”¨PCAé™ç»´åˆ°3Dç©ºé—´åï¼Œä¸åŒè¯­ä¹‰çš„è¯èƒ½å¤Ÿå¾ˆå¥½åœ°åˆ’åˆ†å¼€ç•Œé™ã€‚</p>
<p><img src="/images/blog/2020/visual/3d.png" alt></p>
<h2 id="2-ä½¿ç”¨matplotlib"><a href="#2-ä½¿ç”¨matplotlib" class="headerlink" title="2. ä½¿ç”¨matplotlib"></a>2. ä½¿ç”¨matplotlib</h2><p>ç›´æ¥ä¸Šä»£ç ï¼Œç®€å•ç²—æš´ğŸ˜€ï¼Œä¸»è¦æ˜¯ç”¨åˆ°sklearnä¸­çš„PCAé™ç»´ï¼Œç„¶åç”¨pyplotç»˜åˆ¶å‡ºç‚¹å›¾ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.decomposition <span class="keyword">import</span> PCA</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">wanted_word = [<span class="string">'man'</span>, <span class="string">'woman'</span>, <span class="string">'human'</span>, <span class="string">'boy'</span>, <span class="string">'girl'</span>, <span class="string">'son'</span>, <span class="string">'daughter'</span>, <span class="string">'child'</span>,</span><br><span class="line">         <span class="string">'car'</span>, <span class="string">'plane'</span>, <span class="string">'railway'</span>, <span class="string">'boat'</span>,</span><br><span class="line">         <span class="string">'tree'</span>, <span class="string">'flower'</span>, <span class="string">'grass'</span>, <span class="string">'leaf'</span>,</span><br><span class="line">         <span class="string">'cow'</span>, <span class="string">'sheep'</span>, <span class="string">'dog'</span>, <span class="string">'cat'</span>, <span class="string">'frog'</span>, <span class="string">'puppy'</span>, <span class="string">'pussy'</span>, <span class="string">'horse'</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">word2id = <span class="string">'word2id_semeval.json'</span></span><br><span class="line">embedding = <span class="string">'glove_mat_semeval.npy'</span></span><br><span class="line">word2id = json.load(open(word2id, encoding=<span class="string">'utf-8'</span>))</span><br><span class="line">matrix = np.load(embedding)</span><br><span class="line">key = []</span><br><span class="line">value = []</span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> word2id:</span><br><span class="line">    <span class="keyword">if</span> word <span class="keyword">in</span> wanted_word:</span><br><span class="line">        key.append(word)</span><br><span class="line">        value.append(matrix[word2id[word]].tolist())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pca = PCA(n_components=<span class="number">2</span>)</span><br><span class="line">result = pca.fit_transform(value)</span><br><span class="line"><span class="comment"># å¯è§†åŒ–å±•ç¤º</span></span><br><span class="line">pyplot.scatter(result[:, <span class="number">0</span>], result[:, <span class="number">1</span>])</span><br><span class="line"><span class="keyword">for</span> i, word <span class="keyword">in</span> enumerate(key):</span><br><span class="line">    pyplot.annotate(word, xy=(result[i, <span class="number">0</span>], result[i, <span class="number">1</span>]))</span><br><span class="line">pyplot.show()</span><br></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹å¦‚æ‰€ç¤ºï¼Œå¾ˆç›´è§‚å§ï¼ŸğŸ¤­</p>
<p><img src="/images/blog/2020/visual/glove_embedding.png" alt></p>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>tensor</tag>
        <tag>embedding</tag>
        <tag>tensorboard</tag>
        <tag>visualisation</tag>
        <tag>PCA</tag>
        <tag>T-SNE</tag>
      </tags>
  </entry>
  <entry>
    <title>pytorch loss.backward()çš„ç†è§£</title>
    <url>/2020/11/01/pytorch-loss-backward-%E7%9A%84%E7%90%86%E8%A7%A3/</url>
    <content><![CDATA[<blockquote>
<p>éƒ¨åˆ†å¼•ç”¨ä»¥ä¸‹æ–‡ç« ï¼š</p>
<p><a href="https://blog.csdn.net/douhaoexia/article/details/78821428" target="_blank" rel="noopener">https://blog.csdn.net/douhaoexia/article/details/78821428</a></p>
<p><a href="https://blog.csdn.net/a845717607/article/details/104598278" target="_blank" rel="noopener">https://blog.csdn.net/a845717607/article/details/104598278</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/84890656" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/84890656</a></p>
</blockquote>
<p><br></p>
<p>æœ€è¿‘ä¸€ç›´åœ¨ç”¨pytorchåšGANç›¸å…³çš„å®éªŒã€‚<br>è¿™ä¸¤å¤©é‡åˆ°äº†ä¸€äº›æ¨¡å‹å‚æ•°å¯»ä¼˜çš„é—®é¢˜ï¼Œæ‰å‘ç°è‡ªå·±å¯¹pytorchçš„è‡ªåŠ¨æ±‚å¯¼å’Œå¯»ä¼˜åŠŸèƒ½æ²¡æœ‰æ·±åˆ»ç†è§£ï¼Œå¯¼è‡´æ— æ³•çµæ´»çš„è¿›è¡Œå®éªŒã€‚äºæ˜¯æŸ¥é˜…èµ„æ–™ï¼ŒåŒæ—¶è‡ªå·±åšäº†ä¸€ç‚¹å°å®éªŒï¼Œåšäº†ä¸€äº›æ€»ç»“ï¼Œè™½ç„¶å¥½åƒéƒ½æ˜¯ä¸€äº›æ˜¾è€Œæ˜“è§çš„ç»“è®ºï¼Œä½†æ˜¯å¦‚æœä¸èƒ½æ¸…æ™°çš„ç†è§£ï¼Œå¯¹äºå®éªŒå¤æ‚çš„ç½‘ç»œæ¨¡å‹ç¨‹åºä¼šé€ æˆå›°æ‰°ã€‚</p>
<ul>
<li><p>ç›¸å…³æ ‡å¿—ä½/å‡½æ•°</p>
<ul>
<li>1<ul>
<li>requires_grad</li>
<li>volatile</li>
<li>detach()/detach_()</li>
</ul>
</li>
<li>2<ul>
<li>retain_graph</li>
<li>retain_variables</li>
<li>create_graph</li>
</ul>
</li>
</ul>
<p>å‰ä¸‰ä¸ªæ ‡å¿—ä½ä¸­ï¼Œæœ€å…³é”®çš„å°±æ˜¯ requires_gradï¼Œå¦å¤–ä¸¤ä¸ªéƒ½å¯ä»¥è½¬åŒ–ä¸º requires_grad æ¥ç†è§£ã€‚<br>åä¸‰ä¸ªæ ‡å¿—ä½ï¼Œä¸è®¡ç®—å›¾çš„ä¿æŒä¸å»ºç«‹æœ‰å…³ç³»ã€‚å…¶ä¸­ retain_variables ä¸ retain_graphç­‰ä»·ï¼Œretain_variables åœ¨pytorch æ–°ç‰ˆæœ¬ä¸­è¢«å–æ¶ˆæ‰ã€‚</p>
</li>
<li><p>requires_grad çš„å«ä¹‰åŠæ ‡å¿—ä½è¯´æ˜</p>
<ul>
<li>å¦‚æœå¯¹äºæŸVariable å˜é‡ x ï¼Œå…¶ <code>x.requires_grad == True</code> , åˆ™è¡¨ç¤º å®ƒå¯ä»¥å‚ä¸æ±‚å¯¼ï¼Œä¹Ÿå¯ä»¥ä»å®ƒå‘åæ±‚å¯¼ã€‚<br>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªæ–°çš„Variables çš„ requires_grad å’Œ volatile éƒ½ç­‰äº False ã€‚</li>
<li><code>requires_grad == True</code> å…·æœ‰ä¼ é€’æ€§ï¼Œå¦‚æœï¼š<br><code>x.requires_grad == True</code> ï¼Œ<code>y.requires_grad == False</code> ï¼Œ <code>z=f(x,y)</code><br>åˆ™ï¼Œ <code>z.requires_grad == True</code></li>
<li>å‡¡æ˜¯å‚ä¸è¿ç®—çš„å˜é‡ï¼ˆåŒ…æ‹¬ è¾“å…¥é‡ï¼Œä¸­é—´è¾“å‡ºé‡ï¼Œè¾“å‡ºé‡ï¼Œç½‘ç»œæƒé‡å‚æ•°ç­‰ï¼‰ï¼Œéƒ½å¯ä»¥è®¾ç½® requires_grad ã€‚</li>
<li><code>volatile==True</code> å°±ç­‰ä»·äº <code>requires_grad==False</code> ã€‚ <code>volatile==True</code> åŒæ ·å…·æœ‰ä¼ é€’æ€§ã€‚ä¸€èˆ¬åªç”¨åœ¨inferenceè¿‡ç¨‹ä¸­ã€‚è‹¥æ˜¯æŸä¸ªè¿‡ç¨‹ï¼Œä» x å¼€å§‹ éƒ½åªéœ€åšé¢„æµ‹ï¼Œä¸éœ€åä¼ æ¢¯åº¦çš„è¯ï¼Œé‚£ä¹ˆåªéœ€è®¾ç½®<code>x.volatile=True</code> ,é‚£ä¹ˆ x ä»¥åçš„è¿ç®—è¿‡ç¨‹çš„è¾“å‡ºå‡ä¸º <code>volatile==True</code> ,å³ <code>requires_grad==False</code> ã€‚<br>è™½ç„¶inference è¿‡ç¨‹ä¸å¿…backward(),æ‰€ä»¥requires_grad çš„å€¼ä¸ºFalse æˆ– Trueï¼Œå¯¹ç»“æœæ˜¯æ²¡æœ‰å½±å“çš„ï¼Œä½†æ˜¯å¯¹ç¨‹åºçš„è¿ç®—æ•ˆç‡æœ‰ç›´æ¥å½±å“ï¼›æ‰€ä»¥ä½¿ç”¨<code>volatile=True</code> ,å°±ä¸å¿…æŠŠè¿ç®—è¿‡ç¨‹ä¸­æ‰€æœ‰å‚æ•°éƒ½æ‰‹åŠ¨è®¾ä¸€é<code>requires_grad=False</code> äº†ï¼Œæ–¹ä¾¿å¿«æ·ã€‚</li>
<li><code>detach()</code> ï¼Œå¦‚æœ x ä¸ºä¸­é—´è¾“å‡ºï¼Œ<code>x&#39; = x.detach</code> è¡¨ç¤ºåˆ›å»ºä¸€ä¸ªä¸ x ç›¸åŒï¼Œä½†<code>requires_grad==False</code> çš„variable, (å®é™…ä¸Šæ˜¯æŠŠxâ€™ ä»¥å‰çš„è®¡ç®—å›¾ grad<em>fn éƒ½æ¶ˆé™¤äº†)ï¼Œxâ€™ ä¹Ÿå°±æˆäº†å¶èŠ‚ç‚¹ã€‚åŸå…ˆåå‘ä¼ æ’­æ—¶ï¼Œå›ä¼ åˆ°xæ—¶è¿˜ä¼šç»§ç»­ï¼Œè€Œç°åœ¨å›åˆ°xâ€™å¤„åï¼Œå°±ç»“æŸäº†ï¼Œä¸ç»§ç»­å›ä¼ æ±‚åˆ°äº†ã€‚å¦å¤–å€¼å¾—æ³¨æ„, x (variableç±»å‹) å’Œ xâ€™ (variableç±»å‹)éƒ½æŒ‡å‘åŒä¸€ä¸ªTensor ,å³ x.data<br>è€Œ`detach</em>()` è¡¨ç¤ºä¸åˆ›å»ºæ–°å˜é‡ï¼Œè€Œæ˜¯ç›´æ¥ä¿®æ”¹ x æœ¬èº«ã€‚</li>
<li><code>retain_graph</code> ï¼Œæ¯æ¬¡ backward() æ—¶ï¼Œé»˜è®¤ä¼šæŠŠæ•´ä¸ªè®¡ç®—å›¾freeæ‰ã€‚ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯æ¯æ¬¡è¿­ä»£ï¼Œåªéœ€ä¸€æ¬¡ forward() å’Œä¸€æ¬¡ backward() ,å‰å‘è¿ç®—forward() å’Œåå‘ä¼ æ’­backward()æ˜¯æˆå¯¹å­˜åœ¨çš„ï¼Œä¸€èˆ¬ä¸€æ¬¡backward()ä¹Ÿæ˜¯å¤Ÿç”¨çš„ã€‚ä½†æ˜¯ä¸æ’é™¤ï¼Œç”±äºè‡ªå®šä¹‰lossç­‰çš„å¤æ‚æ€§ï¼Œéœ€è¦ä¸€æ¬¡forward()ï¼Œå¤šä¸ªä¸åŒlossçš„backward()æ¥ç´¯ç§¯åŒä¸€ä¸ªç½‘ç»œçš„grad,æ¥æ›´æ–°å‚æ•°ã€‚äºæ˜¯ï¼Œè‹¥åœ¨å½“å‰backward()åï¼Œä¸æ‰§è¡Œforward() è€Œå¯ä»¥æ‰§è¡Œå¦ä¸€ä¸ªbackward()ï¼Œéœ€è¦åœ¨å½“å‰backward()æ—¶ï¼ŒæŒ‡å®šä¿ç•™è®¡ç®—å›¾ï¼Œå³backward(retain_graph)ã€‚</li>
<li>create_graph ï¼Œè¿™ä¸ªæ ‡å¿—ä½ç”¨äºè‡ªåŠ¨å¢åŠ æ¢¯åº¦å¯¹åº”çš„è®¡ç®—å›¾ï¼Œå¯ç”¨äºè®¡ç®—äºŒé˜¶å¯¼æ•°ä»¥åŠæ›´é«˜é˜¶å¯¼æ•°ã€‚<a id="more"></a></li>
</ul>
</li>
<li>åå‘æ±‚å¯¼ å’Œ æƒé‡æ›´æ–°<ul>
<li>æ±‚å¯¼å’Œä¼˜åŒ–ï¼ˆæƒé‡æ›´æ–°ï¼‰æ˜¯ä¸¤ä¸ª<strong>ç‹¬ç«‹</strong>çš„è¿‡ç¨‹ï¼Œåªä¸è¿‡ä¼˜åŒ–æ—¶ä¸€å®šéœ€è¦å¯¹åº”çš„å·²æ±‚å–çš„æ¢¯åº¦å€¼ã€‚æ‰€ä»¥æ±‚å¾—æ¢¯åº¦å€¼å¾ˆå…³é”®ï¼Œè€Œä¸”ï¼Œç»å¸¸ä¼šç´¯ç§¯å¤šç§losså¯¹æŸç½‘ç»œå‚æ•°é€ æˆçš„æ¢¯åº¦ï¼Œä¸€å¹¶æ›´æ–°ç½‘ç»œã€‚</li>
<li>åå‘ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œè‚¯å®šéœ€è¦æ•´ä¸ªè¿‡ç¨‹éƒ½é“¾å¼æ±‚å¯¼ã€‚è™½ç„¶ä¸­é—´å‚æ•°å‚ä¸æ±‚å¯¼ï¼Œä½†æ˜¯å´å¯ä»¥ä¸ç”¨äºæ›´æ–°è¯¥å¤„çš„ç½‘ç»œå‚æ•°ã€‚å‚æ•°æ›´æ–°å¯ä»¥åªæ›´æ–°æƒ³è¦æ›´æ–°çš„ç½‘ç»œçš„å‚æ•°ã€‚</li>
<li>å¦‚æœobjæ˜¯å‡½æ•°è¿ç®—ç»“æœï¼Œä¸”æ˜¯æ ‡é‡ï¼Œåˆ™ obj.backward() ï¼ˆæ³¨æ„ï¼Œbackward()å‡½æ•°ä¸­æ²¡æœ‰å¡«å…¥ä»»ä½•tensorå€¼, å°±ç›¸å½“äº <code>backward(torch.tensor([1]))</code> ï¼‰ã€‚</li>
<li>å¯¹äºç»§æ‰¿è‡ª nn.Module çš„æŸä¸€ç½‘ç»œ net æˆ–ç½‘ç»œå±‚ï¼Œå®šä¹‰å¥½å,å‘ç° é»˜è®¤æƒ…å†µä¸‹ï¼Œnet.paramters çš„ requires_grad å°±æ˜¯ True çš„ï¼ˆè™½ç„¶åªæ˜¯å®éªŒè¯æ˜çš„ï¼Œè¿˜æœªä»æºç å¤„æ‰¾åˆ°è¯æ®ï¼‰ï¼Œè¿™è·Ÿæ™®é€šçš„Variableå¼ é‡ä¸åŒã€‚å› æ­¤ï¼Œå½“<code>x.requires_grad == False</code> , <code>y = net(x)</code> å, æœ‰ <code>y.requires_grad == True</code> ;ä½†å€¼å¾—æ³¨æ„ï¼Œè™½ç„¶nn.xxlosså’Œæ¿€æ´»å±‚å‡½æ•°ï¼Œæ˜¯ç»§æ‰¿nn.Moduleçš„ï¼Œä½†æ˜¯è¿™ä¸¤ç§å¹¶æ²¡æœ‰ç½‘ç»œå‚æ•°ï¼Œå°±æ›´è°ˆä¸ä¸Š paramters.requires_grad çš„å€¼äº†ã€‚æ‰€ä»¥ç±»ä¼¼è¿™ä¸¤ç§å‡½æ•°çš„è¾“å‡ºï¼Œå…¶requires_gradåªè·Ÿè¾“å…¥æœ‰å…³ï¼Œä¸ä¸€å®šæ˜¯ True .</li>
</ul>
</li>
<li>è®¡ç®—å›¾ç›¸å…³<ul>
<li>è®¡ç®—å›¾å°±æ˜¯æ¨¡å‹ å‰å‘forward() å’Œåå‘æ±‚æ¢¯åº¦backward() çš„æµç¨‹å‚ç…§ã€‚</li>
<li>èƒ½è·å–å›ä¼ æ¢¯åº¦(grad)çš„åªæœ‰è®¡ç®—å›¾çš„å¶èŠ‚ç‚¹ã€‚æ³¨æ„æ˜¯è·å–ï¼Œè€Œä¸æ˜¯æ±‚å–ã€‚ä¸­é—´èŠ‚ç‚¹çš„æ¢¯åº¦åœ¨è®¡ç®—æ±‚å–å¹¶å›ä¼ ä¹‹åå°±ä¼šè¢«é‡Šæ”¾æ‰ï¼Œæ²¡åŠæ³•è·å–ã€‚æƒ³è¦è·å–ä¸­é—´èŠ‚ç‚¹æ¢¯åº¦ï¼Œå¯ä»¥ä½¿ç”¨ register_hook ï¼ˆé’©å­ï¼‰å‡½æ•°å·¥å…·ã€‚å½“ç„¶ï¼Œ register_hook ä¸ä»…ä»…åªæœ‰è¿™ä¸ªä½œç”¨ã€‚</li>
<li>åªæœ‰æ ‡é‡æ‰èƒ½ç›´æ¥ä½¿ç”¨ backward()ï¼Œå³<code>loss.backward()</code> , pytorch æ¡†æ¶ä¸­çš„å„ç§nn.xxLoss()ï¼Œå¾—å‡ºçš„éƒ½æ˜¯minibatch ä¸­å„ç»“æœ å¹³å‡/æ±‚å’Œ åçš„å€¼ã€‚å¦‚æœä½¿ç”¨è‡ªå®šä¹‰çš„å‡½æ•°ï¼Œå¾—åˆ°çš„ä¸æ˜¯æ ‡é‡ï¼Œåˆ™backward()æ—¶éœ€è¦ä¼ å…¥ grad_variable å‚æ•°ï¼Œè¿™ä¸€ç‚¹è¯¦è§åšå®¢ <a href="https://sherlockliao.github.io/2017/07/10/backward/" target="_blank" rel="noopener">https://sherlockliao.github.io/2017/07/10/backward/</a> ã€‚</li>
<li>ç»å¸¸ä¼šæœ‰è¿™æ ·çš„æƒ…å†µï¼š<br>x1 â€”&gt; |net1| â€”&gt; y1 â€”&gt; |net2| â€”&gt; z1 , net1å’Œnet2æ˜¯ä¸¤ä¸ªä¸åŒçš„ç½‘ç»œã€‚x1 ä¾æ¬¡é€šè¿‡ ä¸¤ä¸ªç½‘ç»œè¿ç®—ï¼Œç”Ÿæˆ z1 ã€‚æ¯”è¾ƒæ‹…å¿ƒä¸€æ¬¡æ€§è¿ç®—åï¼Œå†backward(),æ˜¯ä¸æ˜¯åªæ›´æ–°net1 è€Œä¸æ˜¯net1ã€net2éƒ½æ›´æ–°å‘¢ï¼Ÿ<br>ç±»æ¯” x2 â€”&gt; |f1| â€”&gt; y2 â€”&gt; |f2| â€”&gt; z2 , f1 ã€f2 æ˜¯ä¸¤ä¸ªæ™®é€šçš„å‡½æ•°ï¼Œ<code>z2=f2(y2)</code> , <code>y2=f1(x2)</code> ã€‚<br>æŒ‰ç…§ä»¥ä¸‹ä»£ç å®éªŒ</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">w1 = torch.Tensor([<span class="number">2</span>]) <span class="comment">#è®¤ä¸ºw1 ä¸ w2 æ˜¯å‡½æ•°f1 ä¸ f2çš„å‚æ•°</span></span><br><span class="line">w1 = Variable(w1,requires_grad=<span class="literal">True</span>)</span><br><span class="line">w2 = torch.Tensor([<span class="number">2</span>])</span><br><span class="line">w2 = Variable(w2,requires_grad=<span class="literal">True</span>)</span><br><span class="line">x2 = torch.rand(<span class="number">1</span>)</span><br><span class="line">x2 = Variable(x2,requires_grad=<span class="literal">True</span>)</span><br><span class="line">y2 = x2**w1            <span class="comment"># f1 è¿ç®—</span></span><br><span class="line">z2 = w2*y2+<span class="number">1</span>           <span class="comment"># f2 è¿ç®—</span></span><br><span class="line">z2.backward()</span><br><span class="line">print(x2.grad)</span><br><span class="line">print(y2.grad)</span><br><span class="line">print(w1.grad)</span><br><span class="line">print(w2.grad)</span><br></pre></td></tr></table></figure>
<p>å‘ç° x2.gradï¼Œw1.gradï¼Œw2.grad æ˜¯ä¸ªå€¼ ï¼Œä½†æ˜¯ y2.grad å´æ˜¯ <code>None</code>, è¯´æ˜x2,w1,w2çš„æ¢¯åº¦ä¿ç•™äº†ï¼Œy2 çš„æ¢¯åº¦è·å–ä¸åˆ°ã€‚å®é™…ä¸Šï¼Œä»”ç»†æƒ³ä¸€æƒ³ä¼šå‘ç°ï¼Œx2,w1,w2å‡ä¸ºå¶èŠ‚ç‚¹ã€‚<strong>åœ¨è¿™æ£µè®¡ç®—æ ‘ä¸­ ï¼Œx2 ä¸w1 æ˜¯åŒä¸€æ·±åº¦(åº•å±‚)çš„å¶èŠ‚ç‚¹ï¼Œy2ä¸w2 æ˜¯åŒä¸€æ·±åº¦ï¼Œw2 æ˜¯å•ç‹¬çš„å¶èŠ‚ç‚¹ï¼Œè€Œy2 æ˜¯x2 ä¸ w1 çš„çˆ¶èŠ‚ç‚¹ï¼Œæ‰€ä»¥åªæœ‰y2æ²¡æœ‰ä¿ç•™æ¢¯åº¦å€¼ï¼Œ</strong> å°è¯äº†ä¹‹å‰çš„è¯´æ³•ã€‚åŒæ ·è¿™ä¹Ÿè¯´æ˜ï¼Œ<strong>è®¡ç®—å›¾æœ¬è´¨å°±æ˜¯ä¸€ä¸ªç±»ä¼¼äºŒå‰æ ‘çš„ç»“æ„ã€‚</strong></p>
<p><img src="/images/blog/2020/gradtree.png" alt></p>
<p>é‚£ä¹ˆå¯¹äº ä¸¤ä¸ªç½‘ç»œï¼Œä¼šæ˜¯æ€ä¹ˆæ ·å‘¢ï¼Ÿ æˆ‘ä½¿ç”¨pytorch çš„cifar10 ä¾‹ç¨‹ï¼Œç¨ä½œæ”¹åŠ¨åšäº†å®éªŒã€‚æŠŠä¾‹ç¨‹ä¸­ä½¿ç”¨çš„ä¸€ä¸ª Alexnet æ‹†æˆäº†ä¸¤ä¸ªnet â€”â€”â€” net1 å’Œ net2 ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">optimizer = torch.optim.SGD(itertools.chain(net1.parameters(), 					net2.parameters()),lr=<span class="number">0.001</span>, momentum=<span class="number">0.9</span>) <span class="comment"># è¿™é‡Œ net1 å’Œnet2 ä¼˜åŒ–çš„å…ˆåæ²¡æœ‰åŒºåˆ« ï¼ï¼</span></span><br><span class="line">   <span class="comment">#</span></span><br><span class="line">   optimizer.zero_grad() <span class="comment">#å°†å‚æ•°çš„gradå€¼åˆå§‹åŒ–ä¸º0</span></span><br><span class="line">   <span class="comment">#</span></span><br><span class="line">   <span class="comment"># forward + backward + optimize</span></span><br><span class="line">   outputs1 = net1(inputs)            <span class="comment">#input æœªç½®requires_gradä¸ºTrueï¼Œä½†ä¸å½±å“</span></span><br><span class="line">   outputs2 = net2(outputs1)</span><br><span class="line">   loss = criterion(outputs2, labels) <span class="comment">#è®¡ç®—æŸå¤±</span></span><br><span class="line">   loss.backward()                    <span class="comment">#åå‘ä¼ æ’­      </span></span><br><span class="line">   <span class="comment">#     </span></span><br><span class="line">   print(<span class="string">"inputs.requires_grad:"</span>)</span><br><span class="line">   print(inputs.requires_grad)        <span class="comment"># False</span></span><br><span class="line">   print(<span class="string">"the grad of inputs:"</span>)</span><br><span class="line">   print(inputs.grad)                 <span class="comment"># None</span></span><br><span class="line">   </span><br><span class="line">   print(<span class="string">"outputs1.requires_grad:"</span>)</span><br><span class="line">   print(outputs1.requires_grad)      <span class="comment"># True</span></span><br><span class="line">   print(<span class="string">"the grad of outputs1:"</span>)        </span><br><span class="line">   print(outputs1.grad)               <span class="comment"># None     </span></span><br><span class="line">   <span class="comment"># </span></span><br><span class="line">   print(<span class="string">"the grad of net1:"</span>)</span><br><span class="line">   print(net1.conv1.bias.grad)        <span class="comment"># no-None</span></span><br><span class="line">   print(<span class="string">"the grad of net2:"</span>)</span><br><span class="line">   print(net2.fc3.bias.grad)          <span class="comment"># no-None</span></span><br><span class="line">   <span class="comment">#</span></span><br><span class="line">   optimizer.step() <span class="comment">#ç”¨SGDæ›´æ–°å‚æ•°</span></span><br></pre></td></tr></table></figure>
<p>åç¼€æ³¨é‡Šå°±æ˜¯æ‰“å°çš„ç»“æœã€‚å¯ä»¥çœ‹å‡ºï¼Œåªæœ‰ç½‘ç»œå‚æ•°çš„gradæ˜¯ç›´æ¥å¯è·å–çš„ã€‚<em>è€Œä¸”æ˜¯ä¸¤ä¸ªç½‘ç»œéƒ½å¯ä»¥è·å–grad å€¼</em>ï¼Œè·å–gradåï¼Œå½“ç„¶å°±å¯ä»¥æ›´æ–°ç½‘ç»œçš„å‚æ•°äº†ï¼Œä¸¤ä¸ªç½‘ç»œéƒ½æ˜¯å¯ä»¥æ›´æ–°çš„ã€‚</p>
<p>ç±»æ¯”ä¸Šè¾¹ä¾‹å­çš„è§£é‡Šï¼Œ<strong>ä¸¤ä¸ªç½‘ç»œå…¶å®å°±æ˜¯å¤„åœ¨å¶èŠ‚ç‚¹çš„ä½ç½®ï¼Œåªä¸è¿‡æ·±åº¦ä¸åŒã€‚åŒç†ï¼Œç½‘ç»œå†…éƒ¨çš„è¿ç®—ï¼Œæ¯ä¸€å±‚ç½‘ç»œæƒé‡å‚æ•°å…¶å®ä¹Ÿæ˜¯å¤„åœ¨å¶èŠ‚ç‚¹ä¸Šï¼Œåªä¸è¿‡åœ¨æ ‘ä¸­çš„æ·±åº¦ä¸åŒç½¢äº†ï¼Œå‰å‘è¿ç®—æ—¶æŒ‰ç…§äºŒå‰æ ‘çš„ç»“æ„ï¼Œä¸æ–­ç”Ÿæˆçˆ¶èŠ‚ç‚¹ã€‚</strong></p>
<p>(äº‹å®ä¸Šï¼ŒåŸå…ˆæ˜¯ä»¥ä¸º <em>ç½‘ç»œ</em> ä¸ æ™®é€šå‡½æ•°ä¸åŒï¼Œå› ä¸ºå®ƒå…·æœ‰register_xx_hook()è¿™ä¸ªç±»å‡½æ•°å·¥å…·ï¼Œæ‰€ä»¥è®¤ä¸ºå®ƒå¯ä»¥é»˜è®¤ä¿å­˜æƒé‡å‚æ•°çš„gradæ¥ç”¨äºæ›´æ–°ï¼Œåæ¥æ‰æ˜ç™½ï¼Œæœ¬è´¨ä¸Šä¸æ™®é€šå‡½æ•°çš„å‚æ•°ä¸€æ ·ï¼Œéƒ½æ˜¯å¤„åœ¨å¶èŠ‚ç‚¹ï¼Œå°±å¯ä»¥ä¿å­˜å‚æ•°çš„gradï¼Œè‡³äºregister_xx_hook()ï¼Œçœ‹æ¥æ˜¯å¦åšå®ƒç”¨ï¼Œæˆ–è€…è¯´ç”¨register_xx_hook()å¯ä»¥è®°å½•ç”šè‡³æ›´æ”¹ä¸­é—´èŠ‚ç‚¹çš„gradå€¼ï¼‰</p>
<p>ä¸€äº›ç‰¹æ®Šçš„æƒ…å†µï¼š</p>
<ul>
<li>æŠŠç½‘ç»œæŸä¸€éƒ¨åˆ†å‚æ•°ï¼Œå›ºå®šï¼Œä¸è®©å…¶è¢«è®­ç»ƒã€‚å¯ä»¥ä½¿ç”¨requires_grad.</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> p <span class="keyword">in</span> sub_module.parameters():</span><br><span class="line">	p.requires_grad = <span class="literal">False</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥è¿™æ ·ç†è§£ï¼Œå› ä¸ºæ˜¯å¶èŠ‚ç‚¹ï¼ˆè€Œä¸æ˜¯ä¸­é—´èŠ‚ç‚¹ï¼‰ï¼Œæ‰€ä»¥ä¸æ±‚gradï¼ˆgradä¸ºâ€™Noneâ€™ï¼‰ï¼Œä¹Ÿä¸ä¼šå½±å“ç½‘ç»œçš„æ­£å¸¸åå‘ä¼ æ’­ã€‚</p>
<p>ä½†æ˜¯è¦æ³¨æ„ï¼Œå¦‚æœä½ æ˜¯è¿™æ ·å†™çš„ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">optimizer.zero_grad() æ¸…ç©ºè¿‡å¾€æ¢¯åº¦ï¼›</span><br><span class="line">   loss1.backward(retain_graph=<span class="literal">True</span>) åå‘ä¼ æ’­ï¼Œè®¡ç®—å½“å‰æ¢¯åº¦ï¼›</span><br><span class="line">   loss2.backward(retain_graph=<span class="literal">True</span>) åå‘ä¼ æ’­ï¼Œè®¡ç®—å½“å‰æ¢¯åº¦ï¼›</span><br><span class="line">   optimizer.step() æ ¹æ®æ¢¯åº¦æ›´æ–°ç½‘ç»œå‚æ•°</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆä½ å¯èƒ½ä¼šå‡ºç°å†…å­˜æº¢å‡ºçš„æƒ…å†µï¼Œå¹¶ä¸”ï¼Œæ¯ä¸€æ¬¡è¿­ä»£ä¼šæ¯”ä¸Šä¸€æ¬¡æ›´æ…¢ï¼Œè¶Šå¾€åè¶Šæ…¢ï¼ˆå› ä¸ºä½ çš„æ¢¯åº¦éƒ½ä¿å­˜äº†ï¼Œæ²¡æœ‰freeï¼‰<br>è§£å†³çš„æ–¹æ³•ï¼Œå½“ç„¶æ˜¯è¿™æ ·ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">optimizer.zero_grad() æ¸…ç©ºè¿‡å¾€æ¢¯åº¦ï¼›</span><br><span class="line">   loss1.backward(retain_graph=<span class="literal">True</span>) åå‘ä¼ æ’­ï¼Œè®¡ç®—å½“å‰æ¢¯åº¦ï¼›</span><br><span class="line">   loss2.backward() åå‘ä¼ æ’­ï¼Œè®¡ç®—å½“å‰æ¢¯åº¦ï¼›</span><br><span class="line">   optimizer.step() æ ¹æ®æ¢¯åº¦æ›´æ–°ç½‘ç»œå‚æ•°</span><br></pre></td></tr></table></figure>
<p>å³ï¼šæœ€åä¸€ä¸ªbackward()ä¸è¦åŠ retain_graphå‚æ•°ï¼Œè¿™æ ·æ¯æ¬¡æ›´æ–°å®Œæˆåä¼šé‡Šæ”¾å ç”¨çš„å†…å­˜ï¼Œä¹Ÿå°±ä¸ä¼šå‡ºç°è¶Šæ¥è¶Šæ…¢çš„æƒ…å†µäº†ã€‚</p>
<p>è¿™é‡Œæœ‰äººå°±ä¼šé—®äº†ï¼Œæˆ‘åˆæ²¡æœ‰è¿™ä¹ˆå¤š lossï¼Œæ€ä¹ˆè¿˜ä¼šå‡ºç°è¿™ç§é”™è¯¯å‘¢ï¼Ÿè¿™é‡Œå¯èƒ½æ˜¯å› ä¸ºï¼Œä½ ç”¨çš„æ¨¡å‹æœ¬èº«æœ‰é—®é¢˜ï¼ŒLSTMå’ŒGRUéƒ½ä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜ï¼Œé—®é¢˜å­˜åœ¨ä¸hidden unitï¼Œè¿™ä¸ªä¸œä¸œä¹Ÿå‚ä¸äº†åå‘ä¼ æ’­ï¼Œæ‰€ä»¥å¯¼è‡´äº†æœ‰å¤šä¸ªbackward()ï¼Œ<br>è¿™é‡Œå…¶å®æˆ‘ä¹ŸæŒºè´¹è§£ï¼Œä¸ºä»€ä¹ˆå­˜åœ¨å¤šä¸ªbackward()å‘¢ï¼Ÿéš¾é“æ˜¯ï¼Œæˆ‘çš„LSTMç½‘ç»œæ˜¯N to Nï¼Œå³è¾“å…¥Nå’Œï¼Œè¾“å‡ºNä¸ªï¼Œç„¶åå’ŒNä¸ªlabelè¿›è¡Œè®¡ç®—lossï¼Œå†è¿›è¡Œå›ä¼ ï¼Œè¿™é‡Œï¼Œå¯ä»¥æ€è€ƒä¸€ä¸‹BPTTï¼Œå³ï¼Œå¦‚æœæ˜¯N to 1ï¼Œé‚£ä¹ˆæ¢¯åº¦æ›´æ–°éœ€è¦æ—¶é—´åºåˆ—æ‰€æœ‰çš„è¾“å…¥ä»¥åŠéšè—å˜é‡è®¡ç®—æ¢¯åº¦ï¼Œç„¶åä»æœ€åä¸€ä¸ªå‘å‰ä¼ ï¼Œæ‰€ä»¥åªæœ‰ä¸€ä¸ªbackward()ï¼Œ è€ŒN to N ä»¥åŠ N to M éƒ½ä¼šå‡ºç°å¤šä¸ªlosséœ€è¦è¿›è¡Œbackward()çš„æƒ…å†µï¼Œå¦‚æœè¿˜æ˜¯ä¸¤ä¸ªæ–¹å‘ï¼ˆä¸€ä¸ªä»è¾“å‡ºåˆ°è¾“å…¥ï¼Œä¸€ä¸ªæ²¿ç€æ—¶é—´ï¼‰ä¸€ç›´è¿›è¡Œä¼ æ’­ï¼Œé‚£ä¹ˆå…¶å®ä¼šæœ‰é‡å çš„éƒ¨åˆ†ã€‚</p>
<p>ä¸ºäº†æ›´å¥½çš„ç†è§£æ¢¯åº¦å›ä¼ çš„å®ç°ï¼Œå‡†å¤‡æ‰¾ä¸ªæ—¶é—´è¯»ä¸€ä¸‹pytorchä¸­CNNå±‚å’ŒLSTMå±‚çš„æºä»£ç ğŸ’ªï¼Œä¸‹ä¸€ç¯‡åšå®¢å†åšè®°å½•~ï¼Œå¯å‚è€ƒ <a href="https://zhuanlan.zhihu.com/p/97045053" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/97045053</a></p>
]]></content>
      <categories>
        <category>Neural Networks</category>
        <category>GAN</category>
      </categories>
      <tags>
        <tag>Neural Networks</tag>
        <tag>PyTorch</tag>
        <tag>grad</tag>
        <tag>æ¢¯åº¦</tag>
        <tag>é«˜é˜¶å¯¼æ•°</tag>
        <tag>äºŒæ¬¡æ±‚å¯¼</tag>
        <tag>å¤æ‚ç½‘ç»œ</tag>
        <tag>higher order derivative</tag>
      </tags>
  </entry>
  <entry>
    <title>PyTorchä¹‹requires_grad</title>
    <url>/2020/10/27/PyTorch%E4%B9%8Brequires-grad/</url>
    <content><![CDATA[<p>requires_gradæ˜¯Pytorchä¸­é€šç”¨æ•°æ®ç»“æ„Tensorçš„ä¸€ä¸ªå±æ€§ï¼Œç”¨äºè¯´æ˜å½“å‰é‡æ˜¯å¦éœ€è¦åœ¨è®¡ç®—ä¸­ä¿ç•™å¯¹åº”çš„æ¢¯åº¦ä¿¡æ¯ï¼Œä»¥çº¿æ€§å›å½’ä¸ºä¾‹ï¼Œå®¹æ˜“çŸ¥é“æƒé‡wå’Œåå·®bä¸ºéœ€è¦è®­ç»ƒçš„å¯¹è±¡ï¼Œä¸ºäº†å¾—åˆ°æœ€åˆé€‚çš„å‚æ•°å€¼ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€ä¸ªç›¸å…³çš„æŸå¤±å‡½æ•°ï¼Œæ ¹æ®æ¢¯åº¦å›ä¼ çš„æ€è·¯è¿›è¡Œè®­ç»ƒã€‚</p>
<p>å®˜æ–¹æ–‡æ¡£ä¸­çš„è¯´æ˜å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>If thereâ€™s a single input to an operation that requires gradient, its output will also require gradient.</p>
</blockquote>
<p>åªè¦æŸä¸€ä¸ªè¾“å…¥éœ€è¦ç›¸å…³æ¢¯åº¦å€¼ï¼Œåˆ™è¾“å‡ºä¹Ÿéœ€è¦ä¿å­˜ç›¸å…³æ¢¯åº¦ä¿¡æ¯ï¼Œè¿™æ ·å°±ä¿è¯äº†è¿™ä¸ªè¾“å…¥çš„æ¢¯åº¦å›ä¼ ã€‚<br>è€Œåä¹‹ï¼Œè‹¥æ‰€æœ‰çš„è¾“å…¥éƒ½ä¸éœ€è¦ä¿å­˜æ¢¯åº¦ï¼Œé‚£ä¹ˆè¾“å‡ºçš„requires_gradä¼šè‡ªåŠ¨è®¾ç½®ä¸ºFalseã€‚æ—¢ç„¶æ²¡æœ‰äº†ç›¸å…³çš„æ¢¯åº¦å€¼ï¼Œè‡ªç„¶è¿›è¡Œåå‘ä¼ æ’­æ—¶ä¼šå°†è¿™éƒ¨åˆ†å­å›¾ä»è®¡ç®—ä¸­å‰”é™¤ã€‚</p>
<p>å¯¹äºé‚£äº›è¦æ±‚æ¢¯åº¦çš„tensorï¼ŒPyTorchä¼šå­˜å‚¨ä»–ä»¬ç›¸å…³æ¢¯åº¦ä¿¡æ¯å’Œäº§ç”Ÿä»–ä»¬çš„æ“ä½œï¼Œè¿™äº§ç”Ÿé¢å¤–å†…å­˜æ¶ˆè€—ï¼Œä¸ºäº†ä¼˜åŒ–å†…å­˜ä½¿ç”¨ï¼Œé»˜è®¤äº§ç”Ÿçš„tensoræ˜¯ä¸éœ€è¦æ¢¯åº¦çš„ã€‚<br>è€Œæˆ‘ä»¬åœ¨ä½¿ç”¨ç¥ç»ç½‘ç»œæ—¶ï¼Œè¿™äº›<strong>å…¨è¿æ¥å±‚å·ç§¯å±‚ç­‰ç»“æ„çš„å‚æ•°éƒ½æ˜¯é»˜è®¤éœ€è¦æ¢¯åº¦çš„ã€‚</strong><a id="more"></a></p>
<p><br></p>
<p>è€Œæ‰“å°å‚æ•°åå’Œå‚æ•°å€¼ï¼Œä½¿ç”¨</p>
<ul>
<li>state_dict():æ‰“å°modelæ‰€æœ‰å‚æ•°å</li>
<li>named_parameters():æ‰“å°modelæ‰€æœ‰å‚æ•°åå’Œå‚æ•°å€¼ï¼ˆåŒ…æ‹¬ä»çˆ¶ç±»ç»§æ‰¿çš„å‚æ•°ï¼‰è¿”å›çš„æ˜¯è¿­ä»£å™¨</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> d <span class="keyword">in</span> self.model.named_parameters():</span><br><span class="line">    print(d[<span class="number">0</span>], d[<span class="number">1</span>].requires_grad)</span><br></pre></td></tr></table></figure>
<p><br></p>
<p><div align="center"> <img src="/images/blog/2020/parameters.png" alt></div></p>
<center>æ¨¡å‹å‚æ•°æ‰“å°ç»“æœ</center>

]]></content>
      <categories>
        <category>Neural Networks</category>
      </categories>
      <tags>
        <tag>PyTorch</tag>
        <tag>requires_grad</tag>
        <tag>parameters</tag>
      </tags>
  </entry>
  <entry>
    <title>Pytorchå®æˆ˜ è®¡ç®—Wassersteinè·ç¦»</title>
    <url>/2020/10/26/Pytorch%E5%AE%9E%E6%88%98-%E8%AE%A1%E7%AE%97Wasserstein%E8%B7%9D%E7%A6%BB/</url>
    <content><![CDATA[<blockquote>
<p>ç¼–è¯‘ï¼šæœºå™¨ä¹‹å¿ƒï¼Œ ä½œè€…ï¼š Daniel Daza</p>
<p>æœ€ä¼˜ä¼ è¾“ç†è®ºåŠ Wasserstein è·ç¦»æ˜¯å¾ˆå¤šè¯»è€…éƒ½å¸Œæœ›äº†è§£çš„åŸºç¡€ï¼Œæœ¬æ–‡ä¸»è¦é€šè¿‡ç®€å•æ¡ˆä¾‹å±•ç¤ºäº†å®ƒä»¬çš„åŸºæœ¬æ€æƒ³ï¼Œå¹¶é€šè¿‡ PyTorch ä»‹ç»å¦‚ä½•å®æˆ˜ W è·ç¦»ã€‚</p>
</blockquote>
<p><br></p>
<p>æœºå™¨å­¦ä¹ ä¸­çš„è®¸å¤šé—®é¢˜éƒ½æ¶‰åŠåˆ°ä»¤ä¸¤ä¸ªåˆ†å¸ƒå°½å¯èƒ½æ¥è¿‘çš„æ€æƒ³ï¼Œä¾‹å¦‚åœ¨ GAN ä¸­ä»¤ç”Ÿæˆå™¨åˆ†å¸ƒæ¥è¿‘åˆ¤åˆ«å™¨åˆ†å¸ƒå°±èƒ½ä¼ªé€ å‡ºé€¼çœŸçš„å›¾åƒã€‚ä½†æ˜¯ KL æ•£åº¦ç­‰åˆ†å¸ƒçš„åº¦é‡æ–¹æ³•æœ‰å¾ˆå¤šå±€é™æ€§ï¼Œæœ¬æ–‡åˆ™ä»‹ç»äº† Wasserstein è·ç¦»åŠ Sinkhorn è¿­ä»£æ–¹æ³•ï¼Œå®ƒä»¬åœ¨ GAN åŠä¼—å¤šä»»åŠ¡ä¸Šéƒ½å±•ç¤ºäº†æ°å‡ºçš„æ€§èƒ½ã€‚</p>
<p>åœ¨ç®€å•çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å‡è®¾ä»æœªçŸ¥æ•°æ®åˆ†å¸ƒ p(x) ä¸­è§‚æµ‹åˆ°ä¸€äº›éšæœºå˜é‡ xï¼ˆä¾‹å¦‚ï¼ŒçŒ«çš„å›¾ç‰‡ï¼‰ï¼Œæˆ‘ä»¬æƒ³è¦æ‰¾åˆ°ä¸€ä¸ªæ¨¡å‹ q(x|Î¸)ï¼ˆä¾‹å¦‚ä¸€ä¸ªç¥ç»ç½‘ç»œï¼‰èƒ½ä½œä¸º p(x) çš„ä¸€ä¸ªå¾ˆå¥½çš„è¿‘ä¼¼ã€‚å¦‚æœ p å’Œ q çš„åˆ†å¸ƒå¾ˆç›¸è¿‘ï¼Œé‚£ä¹ˆå°±è¡¨æ˜æˆ‘ä»¬çš„æ¨¡å‹å·²ç»å­¦ä¹ åˆ°å¦‚ä½•è¯†åˆ«çŒ«ã€‚</p>
<p>å› ä¸º KL æ•£åº¦å¯ä»¥åº¦é‡ä¸¤ä¸ªåˆ†å¸ƒçš„è·ç¦»ï¼Œæ‰€ä»¥åªéœ€è¦æœ€å°åŒ– KL(qâ€–p) å°±å¯ä»¥äº†ã€‚å¯ä»¥è¯æ˜ï¼Œæœ€å°åŒ– KL(qâ€–p) ç­‰ä»·äºæœ€å°åŒ–ä¸€ä¸ªè´Ÿå¯¹æ•°ä¼¼ç„¶ï¼Œè¿™æ ·çš„åšæ³•åœ¨æˆ‘ä»¬è®­ç»ƒä¸€ä¸ªåˆ†ç±»å™¨æ—¶å¾ˆå¸¸è§ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå˜åˆ†è‡ªç¼–ç å™¨æ¥è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›åéªŒåˆ†å¸ƒèƒ½å¤Ÿæ¥è¿‘äºæŸç§å…ˆéªŒåˆ†å¸ƒï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬é€šè¿‡æœ€å°åŒ–å®ƒä»¬ä¹‹é—´çš„ KL æ•£åº¦æ¥å®ç°çš„ã€‚</p>
<p>å°½ç®¡ KL æ•£åº¦æœ‰å¾ˆå¹¿æ³›çš„åº”ç”¨ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒKL æ•£åº¦åˆ™ä¼šå¤±æ•ˆã€‚ä¸å¦¨è€ƒè™‘ä¸€ä¸‹å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ç¦»æ•£åˆ†å¸ƒï¼š</p>
<p><img src="/images/blog/2020/wasserstein/distribution.png" alt></p>
<p><br></p>
<p>KL æ•£åº¦å‡è®¾è¿™ä¸¤ä¸ªåˆ†å¸ƒå…±äº«ç›¸åŒçš„æ”¯æ’‘é›†ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬è¢«å®šä¹‰åœ¨åŒä¸€ä¸ªç‚¹é›†ä¸Šï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¸èƒ½ä¸ºä¸Šé¢çš„ä¾‹å­è®¡ç®— KL æ•£åº¦ã€‚ç”±äºè¿™ä¸€ä¸ªé™åˆ¶å’Œå…¶ä»–è®¡ç®—æ–¹é¢çš„å› ç´ ä¿ƒä½¿ç ”ç©¶äººå‘˜å¯»æ‰¾ä¸€ç§æ›´é€‚åˆäºè®¡ç®—ä¸¤ä¸ªåˆ†å¸ƒä¹‹é—´å·®å¼‚çš„æ–¹æ³•ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œä½œè€…å°†ï¼š</p>
<ul>
<li>ç®€å•ä»‹ç»æœ€ä¼˜ä¼ è¾“é—®é¢˜</li>
<li>å°† Sinkhorn è¿­ä»£æè¿°ä¸ºå¯¹è§£æ±‚è¿‘ä¼¼</li>
<li>ä½¿ç”¨ PyTorch è®¡ç®— Sinkhorn è·ç¦»</li>
<li>æè¿°ç”¨äºè®¡ç®— mini-batch ä¹‹é—´çš„è·ç¦»çš„å¯¹è¯¥å®ç°çš„æ‰©å±•<a id="more"></a></li>
</ul>
<p><br></p>
<p><center><font color="red">ç§»åŠ¨æ¦‚ç‡è´¨é‡å‡½æ•°</font></center><br>æˆ‘ä»¬ä¸å¦¨æŠŠç¦»æ•£çš„æ¦‚ç‡åˆ†å¸ƒæƒ³è±¡æˆç©ºé—´ä¸­åˆ†æ•£çš„ç‚¹çš„è´¨é‡ã€‚æˆ‘ä»¬å¯ä»¥è§‚æµ‹è¿™äº›å¸¦è´¨é‡çš„ç‚¹ä»ä¸€ä¸ªåˆ†å¸ƒç§»åŠ¨åˆ°å¦ä¸€ä¸ªåˆ†å¸ƒéœ€è¦åšå¤šå°‘åŠŸï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/images/blog/2020/wasserstein/move.png" alt></p>
<p>æ¥ç€ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰å¦ä¸€ä¸ªåº¦é‡æ ‡å‡†ï¼Œç”¨ä»¥è¡¡é‡ç§»åŠ¨æ‰€æœ‰ç‚¹æ‰€éœ€è¦åšçš„åŠŸã€‚è¦æƒ³å°†è¿™ä¸ªç›´è§‚çš„æ¦‚å¿µå½¢å¼åŒ–å®šä¹‰ä¸‹æ¥ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥ä¸€ä¸ª<font color="orange"><strong>è€¦åˆçŸ©é˜µ</strong></font> Pï¼ˆcoupling matrixï¼‰ï¼Œå®ƒè¡¨ç¤ºè¦ä» p(x) æ”¯æ’‘é›†ä¸­çš„ä¸€ä¸ªç‚¹ä¸Šåˆ° q(x) æ”¯æ’‘é›†ä¸­çš„ä¸€ä¸ªç‚¹éœ€è¦åˆ†é…å¤šå°‘æ¦‚ç‡è´¨é‡ã€‚å¯¹äºå‡åŒ€åˆ†å¸ƒï¼Œæˆ‘ä»¬è§„å®šæ¯ä¸ªç‚¹éƒ½å…·æœ‰ 1/4 çš„æ¦‚ç‡è´¨é‡ã€‚å¦‚æœæˆ‘ä»¬å°†æœ¬ä¾‹æ”¯æ’‘é›†ä¸­çš„ç‚¹ä»å·¦åˆ°å³æ’åˆ—ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸Šè¿°çš„è€¦åˆçŸ©é˜µå†™ä½œï¼š</p>
<script type="math/tex; mode=display">
P = 
\left [
\begin{matrix} 
0 & 0 & 0 & \frac{1}{4} \\
0 & 0 & \frac{1}{4} & 0 \\
0 & \frac{1}{4} & 0 & 0 \\
\frac{1}{4} & 0 & 0 & 0 \\
\end{matrix} 
\right ]</script><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œp(x) æ”¯æ’‘é›†ä¸­ç‚¹ 1 çš„è´¨é‡è¢«åˆ†é…ç»™äº† q(x) æ”¯æ’‘é›†ä¸­çš„ç‚¹ 4ï¼Œp(x) æ”¯æ’‘é›†ä¸­ç‚¹ 2 çš„è´¨é‡è¢«åˆ†é…ç»™äº† q(x) æ”¯æ’‘é›†ä¸­çš„ç‚¹ 3ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<p>ä¸ºäº†ç®—å‡ºè´¨é‡åˆ†é…çš„è¿‡ç¨‹éœ€è¦åšå¤šå°‘åŠŸï¼Œæˆ‘ä»¬å°†å¼•å…¥ç¬¬äºŒä¸ªçŸ©é˜µï¼š<font color="orange"><strong>è·ç¦»çŸ©é˜µ</strong></font>ã€‚è¯¥çŸ©é˜µä¸­çš„æ¯ä¸ªå…ƒç´  C_ij è¡¨ç¤ºå°† p(x) æ”¯æ’‘é›†ä¸­çš„ç‚¹ç§»åŠ¨åˆ° q(x) æ”¯æ’‘é›†ä¸­çš„ç‚¹ä¸Šçš„æˆæœ¬ã€‚ç‚¹ä¸ç‚¹ä¹‹é—´çš„æ¬§å‡ é‡Œå¾—è·ç¦»æ˜¯å®šä¹‰è¿™ç§æˆæœ¬çš„ä¸€ç§æ–¹å¼ï¼Œå®ƒä¹Ÿè¢«ç§°ä¸ºã€Œground distanceã€ã€‚å¦‚æœæˆ‘ä»¬å‡è®¾ p(x) çš„æ”¯æ’‘é›†å’Œ q(x) çš„æ”¯æ’‘é›†åˆ†åˆ«ä¸º {1,2,3,4} å’Œ {5,6,7,8}ï¼Œæˆæœ¬çŸ©é˜µå³ä¸ºï¼š</p>
<script type="math/tex; mode=display">
C = 
\left [
\begin{matrix} 
4 & 5 & 6 & 7 \\
3 & 4 & 5 & 6 \\
2 & 3 & 4 & 5 \\
1 & 2 & 3 & 4 \\
\end{matrix} 
\right ]</script><p>æ ¹æ®ä¸Šè¿°å®šä¹‰ï¼Œæ€»çš„æˆæœ¬å¯ä»¥é€šè¿‡ P å’Œ C ä¹‹é—´çš„ Frobenius å†…ç§¯æ¥è®¡ç®—ï¼š</p>
<script type="math/tex; mode=display">
<C, P> \quad = \quad \sum_{ij}C_{ij}P_{ij}</script><p>ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†ï¼Œå®é™…ä¸Šæœ‰å¾ˆå¤šç§æ–¹æ³•å¯ä»¥æŠŠç‚¹ä»ä¸€ä¸ªæ”¯æ’‘é›†ç§»åŠ¨åˆ°å¦ä¸€ä¸ªæ”¯æ’‘é›†ä¸­ï¼Œæ¯ä¸€ç§æ–¹å¼éƒ½ä¼šå¾—åˆ°ä¸åŒçš„æˆæœ¬ã€‚ä¸Šé¢ç»™å‡ºçš„åªæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œä½†æ˜¯æˆ‘ä»¬æ„Ÿå…´è¶£çš„æ˜¯æœ€ç»ˆèƒ½å¤Ÿè®©æˆæœ¬è¾ƒå°çš„åˆ†é…æ–¹å¼ã€‚è¿™å°±æ˜¯ä¸¤ä¸ªç¦»æ•£åˆ†å¸ƒä¹‹é—´çš„ã€Œæœ€ä¼˜ä¼ è¾“ã€é—®é¢˜ï¼Œè¯¥é—®é¢˜çš„è§£æ˜¯æ‰€æœ‰è€¦åˆçŸ©é˜µä¸Šçš„æœ€ä½æˆæœ¬ L_Cã€‚</p>
<p>ç”±äºä¸æ˜¯æ‰€æœ‰çŸ©é˜µéƒ½æ˜¯æœ‰æ•ˆçš„è€¦åˆçŸ©é˜µï¼Œæœ€åä¸€ä¸ªæ¡ä»¶ä¼šå¼•å…¥äº†ä¸€ä¸ªçº¦æŸã€‚å¯¹äºä¸€ä¸ªè€¦åˆçŸ©é˜µæ¥è¯´ï¼Œå…¶æ‰€æœ‰åˆ—éƒ½å¿…é¡»è¦åŠ åˆ°å¸¦æœ‰ q(x) æ¦‚ç‡è´¨é‡çš„å‘é‡ä¸­ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œè¯¥å‘é‡åŒ…å« 4 ä¸ªå€¼ä¸º 1/4 çš„å…ƒç´ ã€‚æ›´ä¸€èˆ¬åœ°ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸¤ä¸ªå‘é‡åˆ†åˆ«è®°ä¸º a å’Œ bï¼Œå› æ­¤æœ€ä¼˜è¿è¾“é—®é¢˜å¯ä»¥è¢«å†™ä½œï¼š</p>
<script type="math/tex; mode=display">
L_C = \min_P \quad < C, P> \\
s.t. P_1 = a \\
\quad P^T_1 = b</script><p>å½“è·ç¦»çŸ©é˜µåŸºäºä¸€ä¸ªæœ‰æ•ˆçš„è·ç¦»å‡½æ•°æ„å»ºæ—¶ï¼Œæœ€å°æˆæœ¬å³ä¸ºæˆ‘ä»¬æ‰€è¯´çš„ã€ŒWasserstein è·ç¦»ã€ã€‚</p>
<font color="blue">å…³äºè¯¥é—®é¢˜çš„è§£ä»¥åŠå°†å…¶æ‰©å±•åˆ°è¿ç»­æ¦‚ç‡åˆ†å¸ƒä¸­è¿˜æœ‰å¤§é‡é—®é¢˜éœ€è¦è§£å†³ã€‚å¦‚æœæƒ³è¦è·å–æ›´æ­£å¼ã€æ›´å®¹æ˜“ç†è§£çš„è§£é‡Šï¼Œè¯»è€…å¯ä»¥å‚é˜… Gabriel PeyrÃ© å’Œ Marco Cuturi ç¼–å†™çš„ã€ŒComputational Optimal Transportã€ä¸€ä¹¦ï¼Œæ­¤ä¹¦ä¹Ÿæ˜¯æœ¬æ–‡å†™ä½œçš„ä¸»è¦å‚è€ƒæ¥æºä¹‹ä¸€ã€‚</font>

<p>è¿™é‡Œçš„åŸºæœ¬è®¾å®šæ˜¯ï¼Œ<strong>æˆ‘ä»¬å·²ç»æŠŠæ±‚ä¸¤ä¸ªåˆ†å¸ƒä¹‹é—´è·ç¦»çš„é—®é¢˜å®šä¹‰ä¸ºæ±‚æœ€ä¼˜è€¦åˆçŸ©é˜µçš„é—®é¢˜</strong>ã€‚äº‹å®è¯æ˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªå°çš„ä¿®æ”¹è®©æˆ‘ä»¬ä»¥è¿­ä»£å’Œå¯å¾®åˆ†çš„æ–¹å¼è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™å°†è®©æˆ‘ä»¬å¯ä»¥å¾ˆå¥½åœ°ä½¿ç”¨æ·±åº¦å­¦ä¹ è‡ªåŠ¨å¾®åˆ†æœºåˆ¶å®Œæˆè¯¥å·¥ä½œã€‚</p>
<p><center><font color="red">ç†µæ­£åˆ™åŒ–å’Œ Sinkhorn è¿­ä»£</font></center><br>é¦–å…ˆï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªçŸ©é˜µçš„ç†µå®šä¹‰å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
H(P) = -\sum_{ij} P_{ij} \log P_{ij}</script><p>æ­£å¦‚ä¿¡æ¯è®ºä¸­æ¦‚ç‡åˆ†å¸ƒçš„ç†µä¸€æ ·ï¼Œä¸€ä¸ªç†µè¾ƒä½çš„çŸ©é˜µå°†ä¼šæ›´ç¨€ç–ï¼Œå®ƒçš„å¤§éƒ¨åˆ†éé›¶å€¼é›†ä¸­åœ¨å‡ ä¸ªç‚¹å‘¨å›´ã€‚ç›¸åï¼Œä¸€ä¸ªå…·æœ‰é«˜ç†µçš„çŸ©é˜µå°†ä¼šæ›´å¹³æ»‘ï¼Œå…¶æœ€å¤§ç†µæ˜¯åœ¨å‡åŒ€åˆ†å¸ƒçš„æƒ…å†µä¸‹è·å¾—çš„ã€‚æˆ‘ä»¬å¯ä»¥å°†æ­£åˆ™åŒ–ç³»æ•° Îµ å¼•å…¥æœ€ä¼˜ä¼ è¾“é—®é¢˜ï¼Œä»è€Œå¾—åˆ°æ›´å¹³æ»‘çš„è€¦åˆçŸ©é˜µï¼š</p>
<script type="math/tex; mode=display">
L_C = \min_P \quad < C, P>  - \epsilon H(P)\\
s.t. P_1 = a \\
\quad P^T_1 = b</script><p>é€šè¿‡å¢å¤§ Îµï¼Œæœ€ç»ˆå¾—åˆ°çš„è€¦åˆçŸ©é˜µå°†ä¼šå˜å¾—æ›´åŠ å¹³æ»‘ï¼›è€Œå½“ Îµ è¶‹è¿‘äºé›¶æ—¶ï¼Œè€¦åˆçŸ©é˜µä¼šæ›´åŠ ç¨€ç–ï¼ŒåŒæ—¶æœ€ç»ˆçš„è§£ä¼šæ›´åŠ è¶‹è¿‘äºåŸå§‹æœ€ä¼˜è¿è¾“é—®é¢˜ã€‚</p>
<p>é€šè¿‡å¼•å…¥è¿™ç§ç†µæ­£åˆ™åŒ–ï¼Œè¯¥é—®é¢˜å˜æˆäº†ä¸€ä¸ªå‡¸ä¼˜åŒ–é—®é¢˜ï¼Œå¹¶ä¸”å¯ ä»¥é€šè¿‡ä½¿ç”¨ã€ŒSinkhorn iterationã€æ±‚è§£ã€‚è§£å¯ä»¥è¢«å†™ä½œ P=diag(u)Kdiag(v)ï¼Œåœ¨è¿­ä»£è¿‡ç¨‹ä¸­äº¤æ›¿æ›´æ–° u å’Œ vï¼š</p>
<script type="math/tex; mode=display">
u^{(k+1)} = \frac{a}{Kv^{(k)}} \\
v ^{(k+1)} = \frac{b}{K^Tu^{(k+1)}}</script><p>å…¶ä¸­ K æ˜¯ä¸€ä¸ªç”¨ C è®¡ç®—çš„æ ¸çŸ©é˜µï¼ˆkernel matrixï¼‰ã€‚ç”±äºè¿™äº›è¿­ä»£è¿‡ç¨‹æ˜¯åœ¨å¯¹åŸå§‹é—®é¢˜çš„æ­£åˆ™åŒ–ç‰ˆæœ¬æ±‚è§£ï¼Œå› æ­¤å¯¹åº”äº§ç”Ÿçš„ Wasserstein è·ç¦»æœ‰æ—¶è¢«ç§°ä¸º Sinkhorn è·ç¦»ã€‚è¯¥è¿­ä»£è¿‡ç¨‹ä¼šå½¢æˆä¸€ä¸ªçº¿æ€§æ“ä½œçš„åºåˆ—ï¼Œå› æ­¤å¯¹äºæ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œé€šè¿‡è¿™äº›è¿­ä»£è¿›è¡Œåå‘ä¼ æ’­æ˜¯éå¸¸ç®€å•çš„ã€‚</p>
<p><br></p>
<p><center><font color="red">é€šè¿‡pytorchå®ç°Sinkhornè¿­ä»£</font></center><br>ä¸ºäº†æå‡ Sinkhorn è¿­ä»£çš„æ”¶æ•›æ€§å’Œç¨³å®šæ€§ï¼Œè¿˜å¯ä»¥åŠ å…¥å…¶å®ƒçš„æ­¥éª¤ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ GitHub ä¸Šæ‰¾åˆ° Gabriel Peyre å®Œæˆçš„è¯¦ç»†å®ç°ã€‚</p>
<p>é¡¹ç›®é“¾æ¥ï¼š<a href="https://github.com/gpeyre/SinkhornAutoDiffã€‚" target="_blank" rel="noopener">https://github.com/gpeyre/SinkhornAutoDiffã€‚</a></p>
<p>è®©æˆ‘ä»¬å…ˆç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œç°åœ¨æˆ‘ä»¬å°†ç ”ç©¶äºŒç»´ç©ºé—´ï¼ˆè€Œä¸æ˜¯ä¸Šé¢çš„ä¸€ç»´ç©ºé—´ï¼‰ä¸­çš„ç¦»æ•£å‡åŒ€åˆ†å¸ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†åœ¨å¹³é¢ä¸Šç§»åŠ¨æ¦‚ç‡è´¨é‡ã€‚è®©æˆ‘ä»¬é¦–å…ˆå®šä¹‰ä¸¤ä¸ªç®€å•çš„åˆ†å¸ƒï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">%matplotlib inline</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">np.random.seed(<span class="number">42</span>)</span><br><span class="line"></span><br><span class="line">n_points = <span class="number">5</span></span><br><span class="line">a = np.array([[i, <span class="number">0</span>] <span class="keyword">for</span> i <span class="keyword">in</span> range(n_points)])</span><br><span class="line">b = np.array([[i, <span class="number">1</span>] <span class="keyword">for</span> i <span class="keyword">in</span> range(n_points)])</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">6</span>, <span class="number">3</span>))</span><br><span class="line">plt.scatter(a[:, <span class="number">0</span>], a[:, <span class="number">1</span>], label=<span class="string">'supp($p(x)$)'</span>)</span><br><span class="line">plt.scatter(b[:, <span class="number">0</span>], b[:, <span class="number">1</span>], label=<span class="string">'supp($q(x)$)'</span>)</span><br><span class="line">plt.legend();</span><br></pre></td></tr></table></figure>
<p><img src="/images/blog/2020/wasserstein/pic.png" alt></p>
<p>æˆ‘ä»¬å¾ˆå®¹æ˜“çœ‹å‡ºï¼Œæœ€ä¼˜ä¼ è¾“å¯¹åº”äºå°† p(x) æ”¯æ’‘é›†ä¸­çš„æ¯ä¸ªç‚¹åˆ†é…åˆ° q(x) æ”¯æ’‘é›†ä¸Šçš„ç‚¹ã€‚å¯¹äºæ‰€æœ‰çš„ç‚¹æ¥è¯´ï¼Œè·ç¦»éƒ½æ˜¯ 1ï¼ŒåŒæ—¶ç”±äºåˆ†å¸ƒæ˜¯å‡åŒ€çš„ï¼Œæ¯ç‚¹ç§»åŠ¨çš„æ¦‚ç‡è´¨é‡æ˜¯ 1/5ã€‚å› æ­¤ï¼ŒWasserstein è·ç¦»æ˜¯ 5Ã—1/5= 1ã€‚ç°åœ¨æˆ‘ä»¬ç”¨ Sinkhorn è¿­ä»£æ¥è®¡ç®—è¿™ä¸ªè·ç¦»ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> layers <span class="keyword">import</span> SinkhornDistance</span><br><span class="line"></span><br><span class="line">x = torch.tensor(a, dtype=torch.float)</span><br><span class="line">y = torch.tensor(b, dtype=torch.float)</span><br><span class="line"></span><br><span class="line">sinkhorn = SinkhornDistance(eps=<span class="number">0.1</span>, max_iter=<span class="number">100</span>, reduction=<span class="literal">None</span>)</span><br><span class="line">dist, P, C = sinkhorn(x, y)</span><br><span class="line">print(<span class="string">"Sinkhorn distance: &#123;:.3f&#125;"</span>.format(dist.item()))</span><br><span class="line"></span><br><span class="line">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">Sinkhorn distance: <span class="number">1.000</span></span><br></pre></td></tr></table></figure>
<p>ç»“æœæ­£å¦‚æˆ‘ä»¬æ‰€è®¡ç®—çš„é‚£æ ·ï¼Œè·ç¦»ä¸º 1ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹ã€ŒSinkhorn( )ã€æ–¹æ³•è¿”å›çš„çŸ©é˜µï¼Œå…¶ä¸­ P æ˜¯è®¡ç®—å‡ºçš„è€¦åˆçŸ©é˜µï¼ŒC æ˜¯è·ç¦»çŸ©é˜µã€‚è·ç¦»çŸ©é˜µå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.imshow(C)</span><br><span class="line">plt.title(<span class="string">'Distance matrix'</span>)</span><br><span class="line">plt.colorbar();</span><br><span class="line">plt.imshow(C)plt.title(<span class="string">'Distance matrix'</span>)plt.colorbar();</span><br></pre></td></tr></table></figure>
<p><img src="/images/blog/2020/wasserstein/matrix.png" alt></p>
<p>å…ƒç´ C[0, 0]è¯´æ˜äº†å°†ï¼ˆ0,0ï¼‰ç‚¹çš„è´¨é‡ç§»åŠ¨åˆ°ï¼ˆ0,1ï¼‰æ‰€éœ€è¦çš„æˆæœ¬ 1 æ˜¯å¦‚ä½•äº§ç”Ÿçš„ã€‚åœ¨è¯¥è¡Œçš„å¦ä¸€ç«¯ï¼Œå…ƒç´ C[0, 4]åŒ…å«äº†å°†ç‚¹ï¼ˆ0,0ï¼‰çš„è´¨é‡ç§»åŠ¨åˆ°ç‚¹ï¼ˆ4,1ï¼‰æ‰€éœ€è¦çš„æˆæœ¬ï¼Œè¿™ä¸ªæˆæœ¬æ˜¯æ•´ä¸ªçŸ©é˜µä¸­æœ€å¤§çš„ï¼š</p>
<p>ç”±äºæˆ‘ä»¬ä¸ºè·ç¦»çŸ©é˜µä½¿ç”¨çš„æ˜¯å¹³æ–¹åçš„ â„“2 èŒƒæ•°ï¼Œè®¡ç®—ç»“æœå¦‚ä¸Šæ‰€ç¤ºã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹è®¡ç®—å‡ºçš„è€¦åˆçŸ©é˜µå§ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.imshow(P)</span><br><span class="line">plt.title(<span class="string">'Coupling matrix'</span>);</span><br><span class="line">plt.imshow(P)plt.title(<span class="string">'Coupling matrix'</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/images/blog/2020/wasserstein/coupling.png" alt></p>
<p>è¯¥å›¾å¾ˆå¥½åœ°å‘æˆ‘ä»¬å±•ç¤ºäº†ç®—æ³•æ˜¯å¦‚ä½•æœ‰æ•ˆåœ°å‘ç°æœ€ä¼˜è€¦åˆï¼Œå®ƒä¸æˆ‘ä»¬å‰é¢ç¡®å®šçš„è€¦åˆçŸ©é˜µæ˜¯ç›¸åŒçš„ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† 0.1 çš„æ­£åˆ™åŒ–ç³»æ•°ã€‚å¦‚æœå°†è¯¥å€¼å¢åŠ åˆ° 1 ä¼šæ€æ ·ï¼Ÿ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sinkhorn = SinkhornDistance(eps=<span class="number">1</span>, max_iter=<span class="number">100</span>, reduction=<span class="literal">None</span>)</span><br><span class="line">dist, P, C = sinkhorn(x, y)</span><br><span class="line">print(<span class="string">"Sinkhorn distance: &#123;:.3f&#125;"</span>.format(dist.item()))</span><br><span class="line">plt.imshow(P);</span><br><span class="line"></span><br><span class="line">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">Sinkhorn distance: <span class="number">1.408</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/blog/2020/wasserstein/coupling1.png" alt></p>
<p>æ­£å¦‚æˆ‘ä»¬å‰é¢è®¨è®ºè¿‡çš„ï¼ŒåŠ å¤§ Îµ æœ‰å¢å¤§è€¦åˆçŸ©é˜µç†µçš„ä½œç”¨ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹çœ‹ P æ˜¯å¦‚ä½•å˜å¾—æ›´åŠ å¹³æ»‘çš„ã€‚ä½†æ˜¯ï¼Œè¿™æ ·åšä¹Ÿä¼šä¸ºè®¡ç®—å‡ºçš„è·ç¦»å¸¦æ¥ä¸€ä¸ªä¸å¥½çš„å½±å“ï¼Œå¯¼è‡´å¯¹ Wasserstein è·ç¦»çš„è¿‘ä¼¼æ•ˆæœå˜å·®ã€‚</p>
<p><br></p>
<p>å¯è§†åŒ–æ”¯æ’‘é›†çš„ç©ºé—´åˆ†é…ä¹Ÿå¾ˆæœ‰æ„æ€ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show_assignments</span><span class="params">(a, b, P)</span>:</span>    </span><br><span class="line">    norm_P = P/P.max()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(a.shape[<span class="number">0</span>]):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(b.shape[<span class="number">0</span>]):</span><br><span class="line">            plt.arrow(a[i, <span class="number">0</span>], a[i, <span class="number">1</span>], b[j, <span class="number">0</span>]-a[i, <span class="number">0</span>], b[j, <span class="number">1</span>]-a[i, <span class="number">1</span>],</span><br><span class="line">                     alpha=norm_P[i,j].item())</span><br><span class="line">    plt.title(<span class="string">'Assignments'</span>)</span><br><span class="line">    plt.scatter(a[:, <span class="number">0</span>], a[:, <span class="number">1</span>])</span><br><span class="line">    plt.scatter(b[:, <span class="number">0</span>], b[:, <span class="number">1</span>])</span><br><span class="line">    plt.axis(<span class="string">'off'</span>)</span><br><span class="line"></span><br><span class="line">show_assignments(a, b, P)</span><br></pre></td></tr></table></figure>
<p><img src="/images/blog/2020/wasserstein/support.png" alt></p>
<p>è®©æˆ‘ä»¬åœ¨ä¸€ä¸ªæ›´æœ‰è¶£çš„åˆ†å¸ƒï¼ˆMoons æ•°æ®é›†ï¼‰ä¸Šå®Œæˆè¿™é¡¹å·¥ä½œã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> make_moons</span><br><span class="line"></span><br><span class="line">X, Y = make_moons(n_samples = <span class="number">30</span>)</span><br><span class="line">a = X[Y==<span class="number">0</span>]</span><br><span class="line">b = X[Y==<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">x = torch.tensor(a, dtype=torch.float)</span><br><span class="line">y = torch.tensor(b, dtype=torch.float)</span><br><span class="line"></span><br><span class="line">sinkhorn = SinkhornDistance(eps=<span class="number">0.1</span>, max_iter=<span class="number">100</span>, reduction=<span class="literal">None</span>)</span><br><span class="line">dist, P, C = sinkhorn(x, y)</span><br><span class="line">print(<span class="string">"Sinkhorn distance: &#123;:.3f&#125;"</span>.format(dist.item()))</span><br><span class="line">show_assignments(a, b, P)</span><br><span class="line"></span><br><span class="line">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">Sinkhorn distance: <span class="number">1.714</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/blog/2020/wasserstein/moon.png" alt></p>
<p><br></p>
<p>åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸å¯¹ä½¿ç”¨ mini-batch æ¥åŠ é€Ÿè®¡ç®—ååˆ†æ„Ÿå…´è¶£ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨é¢å¤–çš„æ‰¹å¤„ç†ç»´åº¦ä¿®æ”¹ Sinkhorn è¿­ä»£æ¥æ»¡è¶³è¯¥è®¾å®šã€‚å°†æ­¤æ›´æ”¹æ·»åŠ åˆ°å…·ä½“å®ç°ä¸­åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ª mini-batch ä¸­è®¡ç®—å¤šä¸ªåˆ†å¸ƒçš„ Sinkhorn è·ç¦»ã€‚ä¸‹é¢æˆ‘ä»¬å°†é€šè¿‡å¦ä¸€ä¸ªå®¹æ˜“è¢«éªŒè¯çš„ä¾‹å­è¯´æ˜è¿™ä¸€ç‚¹ã€‚</p>
<p>ä»£ç ï¼š<a href="https://github.com/dfdazac/wassdistance/blob/master/layers.py" target="_blank" rel="noopener">https://github.com/dfdazac/wassdistance/blob/master/layers.py</a></p>
<p>æˆ‘ä»¬å°†è®¡ç®—åŒ…å« 5 ä¸ªæ”¯æ’‘ç‚¹çš„ 4 å¯¹å‡åŒ€åˆ†å¸ƒçš„ Sinkhorn è·ç¦»ï¼Œå®ƒä»¬å‚ç›´åœ°è¢« 1ï¼ˆå¦‚ä¸Šæ‰€ç¤ºï¼‰ã€2ã€3 å’Œ 4 ä¸ªå•å…ƒåˆ†éš”å¼€ã€‚è¿™æ ·ï¼Œå®ƒä»¬ä¹‹é—´çš„ Wasserstein è·ç¦»å°†åˆ†åˆ«ä¸º 1ã€4ã€9 å’Œ 16ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">n = <span class="number">5</span></span><br><span class="line">batch_size = <span class="number">4</span></span><br><span class="line">a = np.array([[[i, <span class="number">0</span>] <span class="keyword">for</span> i <span class="keyword">in</span> range(n)] <span class="keyword">for</span> b <span class="keyword">in</span> range(batch_size)])</span><br><span class="line">b = np.array([[[i, b + <span class="number">1</span>] <span class="keyword">for</span> i <span class="keyword">in</span> range(n)] <span class="keyword">for</span> b <span class="keyword">in</span> range(batch_size)])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Wrap with torch tensors</span></span><br><span class="line">x = torch.tensor(a, dtype=torch.float)</span><br><span class="line">y = torch.tensor(b, dtype=torch.float)</span><br><span class="line"></span><br><span class="line">sinkhorn = SinkhornDistance(eps=<span class="number">0.1</span>, max_iter=<span class="number">100</span>, reduction=<span class="literal">None</span>)</span><br><span class="line">dist, P, C = sinkhorn(x, y)</span><br><span class="line">print(<span class="string">"Sinkhorn distances: "</span>, dist)</span><br><span class="line"></span><br><span class="line">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">Sinkhorn distances:  tensor([ <span class="number">1.0001</span>,  <span class="number">4.0001</span>,  <span class="number">9.0000</span>, <span class="number">16.0000</span>])</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·åšç¡®å®æœ‰æ•ˆï¼åŒæ—¶ï¼Œä¹Ÿè¯·æ³¨æ„ï¼Œç°åœ¨ P å’Œ C ä¸º 3 ç»´å¼ é‡ï¼Œå®ƒåŒ…å« mini-batch ä¸­æ¯å¯¹åˆ†å¸ƒçš„è€¦åˆçŸ©é˜µå’Œè·ç¦»çŸ©é˜µï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(<span class="string">'P.shape = &#123;&#125;'</span>.format(P.shape))</span><br><span class="line">print(<span class="string">'C.shape = &#123;&#125;'</span>.format(C.shape))</span><br><span class="line"></span><br><span class="line">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br><span class="line">P.shape = torch.Size([<span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>])</span><br><span class="line">C.shape = torch.Size([<span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>])</span><br></pre></td></tr></table></figure>
<p><center><font color="red">ç»“è¯­</font></center><br>åˆ†å¸ƒä¹‹é—´çš„ Wasserstein è·ç¦»åŠå…¶é€šè¿‡ Sinkhorn è¿­ä»£å®ç°çš„è®¡ç®—æ–¹æ³•ä¸ºæˆ‘ä»¬å¸¦æ¥äº†è®¸å¤šå¯èƒ½æ€§ã€‚è¯¥æ¡†æ¶ä¸ä»…æä¾›äº†å¯¹ KL æ•£åº¦ç­‰è·ç¦»çš„æ›¿ä»£æ–¹æ³•ï¼Œè€Œä¸”åœ¨å»ºæ¨¡è¿‡ç¨‹ä¸­æä¾›äº†æ›´å¤§çš„çµæ´»æ€§ï¼Œæˆ‘ä»¬ä¸å†è¢«è¿«è¦é€‰æ‹©ç‰¹å®šçš„å‚æ•°åˆ†å¸ƒã€‚è¿™äº›è¿­ä»£è¿‡ç¨‹å¯ä»¥åœ¨ GPU ä¸Šé«˜æ•ˆåœ°æ‰§è¡Œï¼Œå¹¶ä¸”æ˜¯å®Œå…¨å¯å¾®åˆ†çš„ï¼Œè¿™ä½¿å¾—å®ƒå¯¹äºæ·±åº¦å­¦ä¹ æ¥è¯´æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚è¿™äº›ä¼˜ç‚¹åœ¨æœºå™¨å­¦ä¹ é¢†åŸŸçš„æœ€æ–°ç ”ç©¶ä¸­å¾—åˆ°äº†å……åˆ†çš„åˆ©ç”¨ï¼ˆå¦‚è‡ªç¼–ç å™¨å’Œè·ç¦»åµŒå…¥ï¼‰ï¼Œä½¿å…¶åœ¨è¯¥é¢†åŸŸçš„åº”ç”¨å‰æ™¯æ›´åŠ å¹¿é˜”ã€‚</p>
<p><em>åŸæ–‡é“¾æ¥ï¼š<a href="https://dfdazac.github.io/sinkhorn.html" target="_blank" rel="noopener">https://dfdazac.github.io/sinkhorn.html</a></em></p>
]]></content>
      <categories>
        <category>Algorithms</category>
      </categories>
      <tags>
        <tag>GAN</tag>
        <tag>pytorch</tag>
        <tag>Wasserstein</tag>
        <tag>æ¦‚ç‡åˆ†å¸ƒ</tag>
      </tags>
  </entry>
  <entry>
    <title>ReLUå®¶æ—</title>
    <url>/2020/10/25/ReLU%E5%AE%B6%E6%97%8F/</url>
    <content><![CDATA[<p>ReLUæ˜¯å¸¸ç”¨çš„æ¿€æ´»å‡½æ•°ï¼Œä¹Ÿæœ‰å¾ˆå¤šå˜ç§ï¼Œæ¯”å¦‚ï¼š<a href="https://pytorch.org/docs/stable/generated/torch.nn.ReLU.html#torch.nn.ReLU" target="_blank" rel="noopener">relu</a>, <a href="https://pytorch.org/docs/stable/generated/torch.nn.LeakyReLU.html#torch.nn.LeakyReLU" target="_blank" rel="noopener">leaky_relu</a>, <a href="https://pytorch.org/docs/stable/nn.functional.html#gelu" target="_blank" rel="noopener">gelu</a>, <a href="https://pytorch.org/docs/stable/generated/torch.nn.CELU.html#torch.nn.CELU" target="_blank" rel="noopener">celu</a>, ç­‰ç­‰ï¼Œä¸‹é¢é€‰å–å‡ ç§å…¸å‹çš„ã€å¸¸ç”¨çš„ä»‹ç»ã€‚</p>
<h2 id="1-ReLU"><a href="#1-ReLU" class="headerlink" title="1. ReLU"></a>1. ReLU</h2><script type="math/tex; mode=display">
ReLU(x) = \max (0, x)</script><p><img src="/images/blog/2020/relu/relu.png" alt></p>
<h2 id="2-LeakyReLU"><a href="#2-LeakyReLU" class="headerlink" title="2. LeakyReLU"></a>2. LeakyReLU</h2><script type="math/tex; mode=display">
LeakyReLU(x) = \max(0, x) + \gamma * \min (0,x)</script><p>å…¶ä¸­$\gamma$ä¸ºè´Ÿæ–œç‡ï¼Œä¸‹å›¾å¯ä»¥çœ‹å‡ºï¼Œä½†æ˜¯è´Ÿæ–œç‡å¤ªå°äº†ï¼Œä¸å¤ªæ˜æ˜¾ã€‚</p>
<p><img src="/images/blog/2020/relu/leakyrelu.png" alt></p>
<p>åœ¨æˆ‘ä¸ªäººçš„PCNNå®éªŒä¸­ï¼Œä½¿ç”¨leaky_reluä½œä¸ºæ¿€æ´»å‡½æ•°ï¼Œé€Ÿåº¦æ¯”tanhå¿«äº†è¿‘ä¸‰å€ã€‚<a id="more"></a></p>
<h2 id="3-Gelu"><a href="#3-Gelu" class="headerlink" title="3. Gelu"></a>3. Gelu</h2><p>Applies element-wise function GELU(x) = x * $\phi$(x)</p>
<p>$\phi$(x) is the Cumulative Distribution Function for Gaussian Distribution.</p>
<p><a href="https://pytorch.org/docs/stable/nn.functional.html#gelu" target="_blank" rel="noopener">https://pytorch.org/docs/stable/nn.functional.html#gelu</a></p>
<p>åœ¨PCNNå®éªŒä¸­ï¼Œä½¿ç”¨Geluæ•ˆæœéå¸¸ç¨³å®šï¼Œè¾¾åˆ°æœ€ä¼˜F1å€¼åï¼Œèƒ½å¤Ÿå§‹ç»ˆç¨³å®šåœ¨æœ€ä¼˜å€¼é™„è¿‘ã€‚ä½¿ç”¨å…¶ä»–æ¿€æ´»å‡½æ•°ï¼Œå¦‚ReLUï¼Œtanhå¾ˆå¿«éƒ½ä¼šå› ä¸ºè¿‡æ‹Ÿåˆf1è¿…é€Ÿä¸‹é™ã€‚</p>
<h2 id="4-Celu"><a href="#4-Celu" class="headerlink" title="4. Celu"></a>4. Celu</h2><script type="math/tex; mode=display">
CELU(x) = \max(0, x) + \min (0,  \alpha * (\exp(\frac{x}{\alpha}) - 1))</script><p><img src="/images/blog/2020/relu/celu.png" alt></p>
]]></content>
      <categories>
        <category>Algorithms</category>
      </categories>
      <tags>
        <tag>ReLU</tag>
        <tag>gelu</tag>
        <tag>celu</tag>
        <tag>leaky_relu</tag>
      </tags>
  </entry>
  <entry>
    <title>Glove word embeddingæ·»åŠ ç‰¹æ®Šå­—ç¬¦</title>
    <url>/2020/10/22/Glove-word-embedding%E6%B7%BB%E5%8A%A0%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6/</url>
    <content><![CDATA[<h2 id="1-é—®é¢˜å¼•å…¥"><a href="#1-é—®é¢˜å¼•å…¥" class="headerlink" title="1. é—®é¢˜å¼•å…¥"></a>1. é—®é¢˜å¼•å…¥</h2><p>å¯¹äºä¸€äº›ç‰¹æ®Šå­—ç¬¦ï¼Œä¾‹å¦‚[CLS], [SEP], [PAD], [UNK]ç­‰ï¼Œåœ¨GLOVEè¯å‘é‡ä¸­æ²¡æœ‰å¯¹åº”çš„å€¼ã€‚å¦å¤–ï¼Œåœ¨è¿›è¡Œè¯åµŒå…¥æ—¶ï¼Œéš¾å…ä¼šæœ‰OOV (out of vocabulary) çš„ç°è±¡ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†ã€‚</p>
<p>åœ¨é˜…è¯»<a href="https://github.com/INK-USC/NERO" target="_blank" rel="noopener">NERO</a>æºç æ—¶ï¼Œæ³¨æ„åˆ°ä½œè€…åœ¨å¯¹æœªç™»å½•è¯å¤„ç†æ—¶ï¼Œå¹¶æ²¡æœ‰æŒ‰ç…§å…¶ä»–è¯çš„åˆ†å¸ƒæ¥ç”Ÿæˆï¼Œé€šè¿‡ç»Ÿè®¡ï¼ŒGLOVEè¯å‘é‡å‡å€¼åº”è¯¥ä¸º0é™„è¿‘ï¼Œ<strong>ä½†æ˜¯ä½œè€…é‡‡ç”¨çš„æ˜¯$N(-1., 1.)$çš„æ­£æ€åˆ†å¸ƒï¼Œå‡å€¼æ˜¯-1</strong>ï¼Œä¸æ˜ç™½è¿™æ ·åšæ˜¯å‡ºäºä»€ä¹ˆç‰¹æ®Šçš„åŸå› å—ï¼Ÿ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">token2id</span><span class="params">(config, counter, embedding_dict)</span>:</span></span><br><span class="line">    <span class="string">"""æ·»åŠ  &lt;PAD&gt;, &lt;UNK&gt;, å®ä½“é®ç½© çš„è¯åµŒå…¥"""</span></span><br><span class="line">    vec_size = len(list(embedding_dict.values())[<span class="number">0</span>])</span><br><span class="line">    masks = entity_masks()</span><br><span class="line">    token2idx_dict = &#123;&#125;</span><br><span class="line">    token2idx_dict[constant.PAD_TOKEN] = constant.PAD_ID</span><br><span class="line">    token2idx_dict[constant.UNK_TOKEN] = constant.UNK_ID</span><br><span class="line">    embedding_dict[constant.PAD_TOKEN] = [<span class="number">0.</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(vec_size)]  <span class="comment"># åˆå§‹åŒ–ä¸ºé›¶å‘é‡</span></span><br><span class="line">    embedding_dict[constant.UNK_TOKEN] = [<span class="number">0.</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(vec_size)]</span><br><span class="line">    <span class="keyword">for</span> token <span class="keyword">in</span> list(embedding_dict.keys()) + masks:</span><br><span class="line">        <span class="keyword">if</span> token <span class="keyword">not</span> <span class="keyword">in</span> token2idx_dict:</span><br><span class="line">            token2idx_dict[token] = len(token2idx_dict)</span><br><span class="line">        <span class="keyword">if</span> token <span class="keyword">not</span> <span class="keyword">in</span> embedding_dict:</span><br><span class="line">            embedding_dict[token] = [np.random.normal(<span class="number">-1.</span>, <span class="number">1.</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(vec_size)]  <span class="comment"># <span class="doctag">TODO:</span> why loc = -1.</span></span><br><span class="line">    idx2emb_dict = &#123;idx: embedding_dict[token] <span class="keyword">for</span> token, idx <span class="keyword">in</span> token2idx_dict.items()&#125;</span><br><span class="line">    word_emb = np.array([idx2emb_dict[idx] <span class="keyword">for</span> idx <span class="keyword">in</span> range(len(token2idx_dict))], dtype=np.float32)</span><br><span class="line">    <span class="keyword">return</span> token2idx_dict, word_emb</span><br></pre></td></tr></table></figure>
<h2 id="2-é˜…è¯»æºç "><a href="#2-é˜…è¯»æºç " class="headerlink" title="2. é˜…è¯»æºç "></a>2. é˜…è¯»æºç </h2><p>pytorchä¸­nn.Embedding.weightåˆå§‹åŒ–åˆ†å¸ƒæ˜¯æ»¡è¶³$N(0., 1.)$çš„ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/weixin_30788619/article/details/99645247" target="_blank" rel="noopener">https://blog.csdn.net/weixin_30788619/article/details/99645247</a> ï¼Œpytorchæºç ï¼š<a id="more"></a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">## class Embeddingå…·ä½“å®ç°ï¼ˆåœ¨æ­¤åªå±•ç¤ºéƒ¨åˆ†ä»£ç ï¼‰</span></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch.nn.parameter <span class="keyword">import</span> Parameter </span><br><span class="line"><span class="keyword">from</span> .module <span class="keyword">import</span> Module </span><br><span class="line"><span class="keyword">from</span> .. <span class="keyword">import</span> functional <span class="keyword">as</span> F </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Embedding</span><span class="params">(Module)</span>:</span> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, num_embeddings, embedding_dim, padding_idx=None, max_norm=None,                   norm_type=<span class="number">2</span>, scale_grad_by_freq=False, sparse=False, _weight=None)</span>:</span> </span><br><span class="line">        <span class="keyword">if</span> _weight <span class="keyword">is</span> <span class="literal">None</span>: </span><br><span class="line">            self.weight = Parameter(torch.Tensor(num_embeddings, embedding_dim)) </span><br><span class="line">            self.reset_parameters()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">assert</span> list(_weight.shape) == [num_embeddings, embedding_dim]</span><br><span class="line">            self.weight = Parameter(_weight) </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">reset_parameters</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.weight.data.normal_(<span class="number">0</span>, <span class="number">1</span>)  <span class="comment"># N(0., 1.) æ­£æ€åˆ†å¸ƒ</span></span><br><span class="line">        <span class="keyword">if</span> self.padding_idx <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>: </span><br><span class="line">            self.weight.data[self.padding_idx].fill_(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h2 id="3-æŸ¥è¯¢åšå®¢"><a href="#3-æŸ¥è¯¢åšå®¢" class="headerlink" title="3. æŸ¥è¯¢åšå®¢"></a>3. æŸ¥è¯¢åšå®¢</h2><p>å› æ­¤å¯¹ä½œè€…çš„æ“ä½œæ›´åŠ ä¸è§£ï¼Œå»<font color="blue">G</font><font color="red">o</font><font color="#ffee00">o</font><font color="blue">g</font><font color="#33ff00">l</font><font color="red">e</font>ä¸€ä¸‹åï¼Œåœ¨çŸ¥ä¹ä¸Šæœ‰æ¯”è¾ƒå¥½çš„è§£é‡Šï¼Œæ„Ÿè°¢<a href="https://www.zhihu.com/people/tsxiyao" target="_blank" rel="noopener">å¤•å°ç‘¶</a>çš„å›ç­”ï¼Œ</p>
<p><br></p>
<blockquote>
<p>å…¶å®å¤§éƒ¨åˆ†NLPåœºæ™¯å¯¹OOVéƒ½ä¸ä¼šå¤ªæ•æ„Ÿï¼Œä¸€èˆ¬èƒ½å¸¦æ¥çš„ç¨³å®šæ”¶ç›Šå¾ˆå°ã€‚</p>
<p>è‡³äºä½¿ç”¨é›¶å‘é‡è¿˜æ˜¯éšæœºé‡‡æ ·åˆå§‹åŒ–ï¼Œä¸€èˆ¬åœ¨æ•°æ®é›†levelä¸Šçœ‹ä¸å‡ºæ˜æ˜¾çš„åŒºåˆ«ï¼ˆé™¤éè®­ç»ƒæ—¶æŠŠå®ƒfixä½äº†ï¼‰ï¼Œå½“ç„¶ï¼Œå¦‚æœæŠŠOOVå’ŒPADå‚æ•°å…±äº«çš„è¯ï¼Œ<strong>æœ‰æ—¶å€™å½±å“å°±ä¼šè®©äººæ€€ç–‘äººç”Ÿäº†</strong>ï¼ŒæåŠ›ä¸å»ºè®®è¿™ä¿©åŠŸèƒ½æ€§tokenåˆå¹¶ã€‚æ€»ä¹‹ï¼Œæ‰“å‡ºæ¥OOVä¹‹åï¼Œæ‰«ä¸€çœ¼ï¼Œåªè¦ä¸æ˜¯è·Ÿä»»åŠ¡ç‰¹åˆ«ç›¸å…³ï¼Œå°±åˆ«å¤ªçº ç»“äº†ã€‚å…ˆæŠŠå…¶ä»–äº‹å¤„ç†å¥½å›å¤´å†ç…§é¡¾ä¸€ä¸‹OOVå°±å¥½ã€‚</p>
</blockquote>
<p><br></p>
<p><br></p>
<blockquote>
<p>Word Embedding å¦‚ä½•å¤„ç†æœªç™»å½•è¯ï¼Ÿï¼š</p>
<p>â€‹    <a href="https://www.zhihu.com/question/308543084" target="_blank" rel="noopener">https://www.zhihu.com/question/308543084</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Algorithms</category>
      </categories>
      <tags>
        <tag>word embedding</tag>
        <tag>OOV</tag>
        <tag>pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title>Piecewise CNN</title>
    <url>/2020/10/21/Piecewise-CNN/</url>
    <content><![CDATA[<p>PCNNæ˜¯<a href="https://www.aclweb.org/anthology/D15-1203.pdf" target="_blank" rel="noopener">Zeng et al. 2015</a>æå‡ºçš„ç®—æ³•ï¼Œç†è§£èµ·æ¥å¾ˆå®¹æ˜“ï¼Œä½†æ˜¯å®ç°å´æœ‰é—®é¢˜ã€‚</p>
<p>é¦–å…ˆç»™å‡ºè‡ªå·±çš„å®ç°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_piecewise_pool</span><span class="params">(self, x, mask)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    :param x: (batch_size, cur_max_len, filters)</span></span><br><span class="line"><span class="string">    :param mask: (batch_size, cur_max_len)</span></span><br><span class="line"><span class="string">    :return: </span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    mask_part1 = (mask == <span class="number">1</span>).float().unsqueeze(<span class="number">2</span>)  <span class="comment"># (batch_size, cur_max_len, 1)</span></span><br><span class="line">    mask_part2 = (mask == <span class="number">2</span>).float().unsqueeze(<span class="number">2</span>)</span><br><span class="line">    mask_part3 = (mask == <span class="number">3</span>).float().unsqueeze(<span class="number">2</span>)</span><br><span class="line">    x1 = (x * mask_part1).transpose(<span class="number">1</span>, <span class="number">2</span>)  <span class="comment"># (batch_size, filters, cur_max_len)</span></span><br><span class="line">    x2 = (x * mask_part2).transpose(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    x3 = (x * mask_part3).transpose(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    x1 = self.pool(x1)  <span class="comment"># (batch_size, filters, 1)</span></span><br><span class="line">    x2 = self.pool(x2)</span><br><span class="line">    x3 = self.pool(x3)</span><br><span class="line">    x = torch.cat((x1, x2, x3), dim=<span class="number">1</span>).squeeze()</span><br><span class="line">    <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„maskæŒ‰ç…§å¥å­çš„ä¸åŒä½ç½®åˆ†ä¸º[1, 1, 1, 2, 2, 3, 3, 3, 0, 0, 0]çš„å‘é‡ã€‚<a id="more"></a></p>
<p>ä½†æ˜¯åœ¨å®è·µä¸­ï¼Œæ•ˆæœä¸å¦‚fast_piecewiseï¼Œä¸æ˜ç™½åŸå› æ˜¯ä»€ä¹ˆã€‚è€Œä¸”fast_piecewiseå¾ˆéš¾æƒ³åˆ°å•Šï¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fast_piecewise_pool</span><span class="params">(self, x, mask)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    :param x: (batch_size, cur_max_len, filters)</span></span><br><span class="line"><span class="string">    :param mask: (batch_size, cur_max_len)</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    x = x.transpose(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">    x = x.unsqueeze(<span class="number">-1</span>).permute(<span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">-1</span>)</span><br><span class="line">    masks = self.mask_embedding(mask).unsqueeze(<span class="number">-2</span>) * <span class="number">100</span></span><br><span class="line">    x = masks.float() + x</span><br><span class="line">    x = torch.max(x, <span class="number">1</span>)[<span class="number">0</span>] - torch.tensor([<span class="number">100</span>]).cuda().float()</span><br><span class="line">    x = x.reshape(x.size(<span class="number">0</span>), <span class="number">-1</span>)</span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># mask_embedding</span></span><br><span class="line">        self.mask_embedding = nn.Embedding.from_pretrained(</span><br><span class="line">        torch.tensor([</span><br><span class="line">            [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">            [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">            [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">            [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line">        ]).float()</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<p>è‡ªå·±å†™ä»£ç çš„åŠŸåŠ›è¿˜æ˜¯ä¸å¤Ÿï¼Œå¤šå€Ÿé‰´åˆ«äººçš„æºç ï¼Œä¸æ–­å­¦ä¹ æ‰æ˜¯çœŸç† ğŸ˜­</p>
]]></content>
      <categories>
        <category>Algorithms</category>
      </categories>
      <tags>
        <tag>PCNN</tag>
        <tag>CNN</tag>
        <tag>å·ç§¯ç¥ç»ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>Text Adversarial Training</title>
    <url>/2020/10/20/Text-Adversarial-Training/</url>
    <content><![CDATA[<p>æœ¬æ–‡æ˜¯å¯¹ä¸€ä¸ªå¥½äººğŸ˜ (Ian Goodfellow) ï¼Œå¤§åé¼é¼çš„GANçš„æå‡ºè€…ï¼Œçš„è®ºæ–‡ <a href="https://arxiv.org/abs/1605.07725" target="_blank" rel="noopener">ADVERSARIAL TRAINING METHODS FOR SEMI-SUPERVISED TEXT CLASSIFICATION</a> æ ¸å¿ƒéƒ¨åˆ†çš„ç†è§£ä»¥åŠå®ç°ã€‚</p>
<h2 id="1-è®ºæ–‡æ ¸å¿ƒæ€æƒ³"><a href="#1-è®ºæ–‡æ ¸å¿ƒæ€æƒ³" class="headerlink" title="1. è®ºæ–‡æ ¸å¿ƒæ€æƒ³"></a>1. è®ºæ–‡æ ¸å¿ƒæ€æƒ³</h2><p>å¯¹æŠ—è®­ç»ƒæ˜¯ä¸€ç§æ–°é¢–çš„æ­£åˆ™åŒ–æ–¹æ³•ï¼Œç”¨ä»¥æé«˜åˆ†ç±»å™¨å¯¹å¾®å°æ‰°åŠ¨çš„é²æ£’æ€§ã€‚ä»¤$\mathbf{x}$ä»£è¡¨è¾“å…¥ï¼Œ$\mathbf{\theta}$ä»£è¡¨åˆ†ç±»å™¨çš„å‚æ•°ï¼Œå¯¹æŠ—è®­ç»ƒæ˜¯åœ¨æŸå¤±å‡½æ•°ä¸Šæ·»åŠ ä¸€é¡¹ï¼š</p>
<script type="math/tex; mode=display">
-\log p(y| \mathbf{x + r_{adv}}; \mathbf{\theta}) \quad where \quad \mathbf{r_{adv}} = \arg  \min _ {\mathbf{r}, \mathbf{||r||} \leq \epsilon } \log p(y | \mathbf{x + r}; \mathbf{\hat{\theta}})</script><p>å³æ·»åŠ å½“å‰çŠ¶æ€ä¸‹ä½¿æŸå¤±æœ€å¤§çš„æ‰°åŠ¨é¡¹ã€‚ä½†æ˜¯ï¼Œåœ¨å®é™…æ“ä½œä¸­ï¼Œå¯»æ‰¾æœ€ä¼˜é¡¹æ˜¯NPéš¾é—®é¢˜ï¼›äºæ˜¯ä½œè€…æå‡ºäº†ä¸€ç§çº¿æ€§è¿‘ä¼¼æ–¹æ³•ï¼Œå³ï¼š</p>
<script type="math/tex; mode=display">
\mathbf{r_{adv}} = -\epsilon \mathbf{g} / ||\mathbf{g}||_2 \quad where \quad \mathbf{g} = \nabla _ \mathbf{x} \log p(y|\mathbf{x};\hat{\mathbf{\theta}})</script><p>å¦‚ä½•ç†è§£ä¸Šå¼å‘¢ï¼Ÿ<font color="orange"><strong>å¯¹å½“å‰æŸå¤±å‡½æ•°æ±‚å¯¼åå–è´Ÿæ•°</strong></font>ï¼Œæ˜¯ä½¿å¾—æŸå¤±å¢å¤§çš„æœ€å¿«æ–¹å‘ã€‚é€šè¿‡æ¢¯åº¦åå‘ä¼ æ’­å¾ˆå®¹æ˜“è®¡ç®—ã€‚$\epsilon$ç”¨äºæ§åˆ¶æ‰°åŠ¨é¡¹çš„èŒƒæ•°ï¼Œå°†æ‰°åŠ¨çš„å¤§å°é™åˆ¶åœ¨åˆç†èŒƒå›´å†…ã€‚</p>
<h2 id="2-å®ç°"><a href="#2-å®ç°" class="headerlink" title="2. å®ç°"></a>2. å®ç°</h2><p>ä½¿ç”¨pytorchè¿›è¡Œå®ç°ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_add_perturbation</span><span class="params">(self, embedded, loss)</span>:</span></span><br><span class="line">    <span class="string">"""Adds gradient to embedding and recomputes classification loss."""</span></span><br><span class="line">    grad, = tf.gradients(</span><br><span class="line">        loss,</span><br><span class="line">        embedded,</span><br><span class="line">        aggregation_method=tf.AggregationMethod.EXPERIMENTAL_ACCUMULATE_N)</span><br><span class="line">    grad = tf.stop_gradient(grad)</span><br><span class="line">    <span class="comment"># L2 norm constraint</span></span><br><span class="line">    perturb = scale_l2(grad, self.epsilon)</span><br><span class="line">    <span class="keyword">return</span> embedded + perturb</span><br></pre></td></tr></table></figure>
<p>scale_l2ç”¨äº$L_2$ norm constraintã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">scale_l2</span><span class="params">(x, norm_length)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    L2 normalization</span></span><br><span class="line"><span class="string">    :param x:</span></span><br><span class="line"><span class="string">    :param norm_length: èŒƒæ•°é•¿åº¦</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="comment"># shape(x) = (batch, num_timesteps, d)</span></span><br><span class="line">    <span class="comment"># Divide x by max(abs(x)) for a numerically stable L2 norm.</span></span><br><span class="line">    <span class="comment"># 2norm(x) = a * 2norm(x/a)</span></span><br><span class="line">    <span class="comment"># Scale over the full sequence, dims (1, 2)</span></span><br><span class="line">    alpha = tf.reduce_max(tf.abs(x), (<span class="number">1</span>, <span class="number">2</span>), keepdims=<span class="literal">True</span>) + <span class="number">1e-12</span></span><br><span class="line">    l2_norm = alpha * tf.sqrt(</span><br><span class="line">        tf.reduce_sum(tf.pow(x / alpha, <span class="number">2</span>), (<span class="number">1</span>, <span class="number">2</span>), keepdims=<span class="literal">True</span>) + <span class="number">1e-6</span>)</span><br><span class="line">    x_unit = x / l2_norm</span><br><span class="line">    <span class="keyword">return</span> norm_length * x_unit</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Algorithms</category>
      </categories>
      <tags>
        <tag>Normalization</tag>
        <tag>Adversarial Training</tag>
        <tag>Text Classification</tag>
        <tag>Data Augmentation</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Šç™¾é¢æ·±åº¦å­¦ä¹ ã€‹ç¬”è®°3 - å›¾ç¥ç»ç½‘ç»œ</title>
    <url>/2020/10/19/%E3%80%8A%E7%99%BE%E9%9D%A2%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%8B%E7%AC%94%E8%AE%B03-%E5%9B%BE%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/</url>
    <content><![CDATA[<h2 id="1-ä»€ä¹ˆæ˜¯å›¾è°±å’Œå‚…é‡Œå¶å˜æ¢ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯å›¾è°±å’Œå‚…é‡Œå¶å˜æ¢ï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯å›¾è°±å’Œå‚…é‡Œå¶å˜æ¢ï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯å›¾è°±å’Œå‚…é‡Œå¶å˜æ¢ï¼Ÿ</h2><p>å›¾è°±æ˜¯å›¾çš„æ‹‰æ™®æ‹‰æ–¯çŸ©é˜µçš„ç‰¹å¾å€¼ã€‚å…·ä½“æ¥è¯´ï¼Œç»™å®šå›¾G(V, E)ï¼Œç‚¹é›†å¤§å°ä¸ºnï¼Œè¾¹é›†å¤§å°ä¸ºmã€‚å›¾Gçš„é‚»æ¥çŸ©é˜µAä¸ºä¸€ä¸ªnÃ—nçš„çŸ©é˜µï¼Œå¦‚æœi, jä¹‹é—´æœ‰è¾¹ç›¸è¿ï¼Œåˆ™$A_{ij}$ä¸º1ï¼Œå¦åˆ™ä¸º0ã€‚å›¾çš„åº¦çŸ©é˜µä¸º$D=diag (d_1, d_2, â€¦, d_n)$ï¼Œå…¶ä¸­$d_i$æ˜¯ç¬¬iä¸ªèŠ‚ç‚¹åœ¨å›¾ä¸­çš„åº¦æ•°ã€‚å®šä¹‰<font color="orange">å›¾çš„æ‹‰æ™®æ‹‰æ–¯çŸ©é˜µä¸ºL=D-A</font>ï¼Œå¯¹å…¶è¿›è¡Œç‰¹å¾å€¼åˆ†è§£ï¼š</p>
<script type="math/tex; mode=display">
L = U \Lambda U^T</script><p>å…¶ä¸­ï¼Œ$\Lambda = diag(\lambda _1, \lambda _2, â€¦, \lambda _n)$æ˜¯æŒ‰ç…§ç‰¹å¾å€¼<strong>ä»å°åˆ°å¤§</strong>çš„é¡ºåºæ’åˆ—çš„ï¼Œ$U = [\mathbf{u_1}, u_2, â€¦, u_n]$æ˜¯å¯¹åº”çš„ç‰¹å¾å‘é‡ç»„æˆçš„æ­£äº¤çŸ©é˜µã€‚ä¸Šè¿°ç‰¹å¾å€¼é›†åˆ$\Lambda$ å³ä¸ºå›¾Gçš„å›¾è°±ã€‚å°½ç®¡Aä¼šéšç€GèŠ‚ç‚¹ç¼–å·çš„æ”¹å˜è€Œæ”¹å˜ï¼Œä½†æ˜¯$\Lambda$ä¸ä¼šï¼Œå®ƒåªä¸å›¾çš„æŠ½è±¡ç»“æ„æœ‰å…³ã€‚</p>
<p>å›¾ç¥ç»ç½‘ç»œæœ‰ä¸¤ä¸ªæ´¾ç³»ï¼Œä¸€ä¸ªæ˜¯åŸºäºé¢‘è°±åŸŸï¼Œä¾‹å¦‚GCNï¼›ä¸€ä¸ªæ˜¯åŸºäºç©ºé—´åŸŸï¼Œä¾‹å¦‚GATå’ŒGraphSAGEã€‚ä¸è¿‡ä¸¤è€…æ®Šé€”åŒå½’ï¼Œåœ¨å®é™…çš„ä½¿ç”¨ä¸­ï¼Œå›¾ç¥ç»ç½‘ç»œæ›´å¸¸è§çš„æ¡†æ¶æ˜¯ï¼š</p>
<script type="math/tex; mode=display">
\mathbf{Y} = \sigma(\mathbf{\hat{D}^{-1}\hat{A}XW})</script><p>å…¶ä¸­ï¼Œ$\mathbf{X}$å’Œ$\mathbf{Y}$åˆ†åˆ«æ˜¯è¾“å…¥å’Œè¾“å‡ºçŸ©é˜µï¼Œ$\mathbf{\hat{A}}$æ˜¯æ·»åŠ äº†è‡ªç¯è¾¹çš„å›¾é‚»æ¥çŸ©é˜µï¼Œ$\mathbf{\hat{D}}$æ˜¯å¯¹åº”çš„åº¦æ•°çŸ©é˜µï¼Œ$\mathbf{W}$æ˜¯å¾…è®­ç»ƒçš„å‚æ•°çŸ©é˜µã€‚å°†æ¡†æ¶åˆ†è§£æ¥çœ‹ï¼š</p>
<p>(1) $\mathbf{XW}$å°†èŠ‚ç‚¹çš„ç‰¹å¾å‘é‡è¿›è¡Œçº¿æ€§å˜åŒ–ã€‚</p>
<p>(2) $\mathbf{\hat{A}XW}$å°†å˜æ¢åçš„èŠ‚ç‚¹ç‰¹å¾ä¼ æ’­åˆ°é‚»å±…èŠ‚ç‚¹ï¼ˆåŒ…æ‹¬è‡ªèº«ï¼‰ã€‚</p>
<p>(3) $\mathbf{\hat{D}^{-1}\hat{A}XW}$å°†æ¯ä¸ªèŠ‚ç‚¹æ”¶åˆ°çš„ç‰¹å¾ï¼ˆæ¥è‡ªé‚»å±…èŠ‚ç‚¹å’Œè‡ªèº«ï¼‰è¿›è¡Œå½’ä¸€åŒ–ã€‚</p>
<p>(4) $\sigma(\mathbf{\hat{D}^{-1}\hat{A}XW})$å°†å½’ä¸€åŒ–åçš„ç‰¹å¾é€šè¿‡éçº¿æ€§æ¿€æ´»å•å…ƒã€‚<a id="more"></a></p>
<h2 id="2-å›¾ç¥ç»ç½‘ç»œçš„æ¨ç†èƒ½åŠ›"><a href="#2-å›¾ç¥ç»ç½‘ç»œçš„æ¨ç†èƒ½åŠ›" class="headerlink" title="2. å›¾ç¥ç»ç½‘ç»œçš„æ¨ç†èƒ½åŠ›"></a>2. å›¾ç¥ç»ç½‘ç»œçš„æ¨ç†èƒ½åŠ›</h2><p>å›¾ç¥ç»ç½‘ç»œå¯ä»¥çœ‹ä½œç¬¦å·ä¸»ä¹‰å’Œæ•°å€¼ä¸»ä¹‰çš„ç»“åˆï¼Œå…¶å°†è§„åˆ™ã€çŸ¥è¯†å¼•å…¥ç¥ç»ç½‘ç»œï¼Œä½¿å¾—ç¥ç»ç½‘ç»œå…·å¤‡äº†å¯è§£é‡Šæ€§å’Œæ¨ç†èƒ½åŠ›ã€‚</p>
<font color="purple">æ²¡æœ‰å¯¹å¤æ‚å…³ç³»çš„å‡†ç¡®åˆ»ç”»ï¼Œç¥ç»ç½‘ç»œçš„ç»„åˆæ³›åŒ–èƒ½åŠ›å‡ ä¹ä¸ºé›¶ã€‚äº‹å®ä¸Šï¼Œè¿ç§»å­¦ä¹ ã€å…ƒå­¦ä¹ ã€å°‘æ¬¡å­¦ä¹ ç­‰ä»»åŠ¡å…³æ³¨çš„éƒ½æ˜¯ç¥ç»ç½‘ç»œçš„ç»„åˆæ³›åŒ–èƒ½åŠ›ã€‚</font>

<p>åœ¨ä¹¦ä¸­ï¼Œä½œè€…æå‡ºäº†ä¸€ä¸ªæƒ³æ³•ï¼Œæˆ‘è§‰å¾—éå¸¸æœ‰è¶£ä¹Ÿéå¸¸æœ‰åˆ›è§ã€‚ä½œè€…å°†è‡ªæ³¨æ„åŠ›æœºåˆ¶å’ŒåŸºäºåº¦é‡çš„å…ƒå­¦ä¹ ç»Ÿä¸€åˆ°äº†å›¾ç¥ç»ç½‘ç»œçš„æ¡†æ¶ä¸‹ã€‚è‡ªæ³¨æ„åŠ›æœºåˆ¶ $\iff$ å®Œå…¨å›¾ã€‚åŸºäºåº¦é‡çš„å…ƒå­¦ä¹  $\iff$ äºŒéƒ¨å›¾ã€‚</p>
]]></content>
      <categories>
        <category>Others</category>
        <category>Interview</category>
      </categories>
      <tags>
        <tag>GNN</tag>
        <tag>å›¾ç¥ç»ç½‘ç»œ</tag>
        <tag>ç™¾é¢æ·±åº¦å­¦ä¹ </tag>
        <tag>å›¾è°±</tag>
        <tag>GCN</tag>
        <tag>GAT</tag>
        <tag>GraphSAGE</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Šç™¾é¢æ·±åº¦å­¦ä¹ ã€‹ç¬”è®°2 - å¾ªç¯ç¥ç»ç½‘ç»œ</title>
    <url>/2020/10/17/%E3%80%8A%E7%99%BE%E9%9D%A2%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%8B%E7%AC%94%E8%AE%B02-%E5%BE%AA%E7%8E%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/</url>
    <content><![CDATA[<h2 id="1-å…¬å¼æ¨å¯¼"><a href="#1-å…¬å¼æ¨å¯¼" class="headerlink" title="1. å…¬å¼æ¨å¯¼"></a>1. å…¬å¼æ¨å¯¼</h2><p>è®°ç½‘ç»œçš„è¾“å…¥ä¸º$x_1, x_2, â€¦ ,x_n$ï¼Œåˆ™ç½‘ç»œå±•å¼€åå¯ä»¥çœ‹ä½œä¸€ä¸ª$n$å±‚çš„å‰é¦ˆç¥ç»ç½‘ç»œï¼Œç¬¬$t$å±‚å¯¹åº”ç€$t$æ—¶åˆ»çš„çŠ¶æ€ ($t = 1,2, â€¦, n$) ã€‚è®°ç¬¬$t$å±‚ï¼ˆæ—¶åˆ»ï¼‰çš„è¾“å…¥çŠ¶æ€ã€éšè—çŠ¶æ€ã€è¾“å‡ºçŠ¶æ€åˆ†åˆ«ä¸º$x_t$ã€$h_t$ã€$o_t$ï¼Œè®­ç»ƒæ—¶çš„ç›®æ ‡è¾“å‡ºå€¼ä¸º$y_t$ï¼Œåˆ™æœ‰ï¼š</p>
<ul>
<li>$h<em>t = \sigma (Ux_t + Wh</em>{t-1} + b)$ï¼Œ$\sigma$é€šå¸¸é‡‡ç”¨Tanhå‡½æ•°</li>
<li><p>$o_t = g(Vh_t + c)$</p>
</li>
<li><p>åœ¨è®­ç»ƒæ—¶ï¼Œç½‘ç»œåœ¨æ•´ä¸ªåºåˆ—ä¸Šçš„æŸå¤±å¯ä»¥å®šä¹‰ä¸ºä¸åŒæ—¶åˆ»çš„æŸå¤±ä¹‹å’Œï¼š$L = \sum _t L_t = \sum _t Loss(o_t, y_t)$</p>
</li>
</ul>
<p>åœ¨å¾ªç¯ç¥ç»ç½‘ç»œä¸­ï¼Œ<font color="pink">æ‰€æœ‰å¾ªç¯æˆ–é‡å¤çš„ç»“æ„éƒ½å…±äº«å‚æ•°ã€‚</font><a id="more"></a></p>
<p>å¾ªç¯ç¥ç»ç½‘ç»œåœ¨è®­ç»ƒæ—¶ï¼Œä¹Ÿæ˜¯åˆ©ç”¨æ¢¯åº¦ä¸‹é™æ³•å’Œåå‘ä¼ æ’­ç®—æ³•è¿›è¡Œä¸€è½®è½®çš„è¿­ä»£ã€‚å°†å¾ªç¯ç¥ç»ç½‘ç»œæŒ‰ç…§æ—¶é—´å±•å¼€ï¼Œåˆ™æœ‰å¦‚ä¸‹å…¬å¼ï¼š</p>
<script type="math/tex; mode=display">
\frac{\partial L}{\partial U} = \sum_t \frac{\partial L}{\partial h_t} \frac{\partial h_t}{\partial U}</script><script type="math/tex; mode=display">
\frac{\partial L}{\partial W} = \sum_t \frac{\partial L}{\partial h_t} \frac{\partial h_t}{\partial W}</script><script type="math/tex; mode=display">
\frac{\partial L}{\partial V} = \sum_t \frac{\partial L}{\partial o_t} \frac{\partial o_t}{\partial V}</script><p>å…¶ä¸­ï¼Œç¬¦å·$\frac{\partial y}{\partial x}$è¡¨ç¤ºé›…å¯æ¯”çŸ©é˜µï¼ˆJacobian matrixï¼‰ï¼Œå®ƒçš„å°ºå¯¸ä¸º$d_y \times d_x$ï¼ŒçŸ©é˜µçš„ç¬¬$i$è¡Œç¬¬$j$åˆ—å…ƒç´ ä¸º$\frac{\partial y_i}{\partial x_j}$ã€‚</p>
<p>åœ¨ä¸Šè¿°å…¬å¼ä¸­ï¼Œ$\frac{\partial h_t}{\partial U}$ã€$\frac{\partial h_t}{\partial W}$ã€$\frac{\partial o_t}{\partial V}$ã€$\frac{\partial L}{\partial o_t}$ã€éƒ½å¯ä»¥ç›´æ¥è®¡ç®—å‡ºæ¥ï¼Œåªæœ‰$\frac{\partial L}{\partial h_t}$çš„è®¡ç®—ç›¸å¯¹å¤æ‚ï¼Œå…¬å¼ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\frac{\partial L}{\partial h_t} = \frac{\partial L}{\partial h_{t+1}} \frac{\partial h_{t+1}}{\partial h_{t}} + \frac{\partial L}{\partial o_t} \frac{\partial o_t}{\partial h_{t}}</script><font color="purple">ä¸Šå¼å…¶å®æ˜¯ä¸€ä¸ªé€’æ¨å…¬å¼ï¼Œ</font>å…ˆè®¡ç®—$\frac{\partial L}{\partial h_t}$ï¼Œå†è®¡ç®—$\frac{\partial L}{\partial h_{t-1}}$ï¼Œä¾æ¬¡é€’æ¨ã€‚ä¸Šè¿°æ–¹æ³•å°±æ˜¯åŸºäºæ—¶é—´çš„åå‘ä¼ æ’­ç®—æ³•ã€‚

## 2. é•¿çŸ­æœŸè®°å¿†ç½‘ç»œ (LSTM)

<font color="orange">æƒ³æ³•ï¼šå¯ä»¥å°†é—å¿˜é—¨$f_t (t=1,2,...,n)$çŠ¶æ€å¯è§†åŒ–ï¼Œå¢å¼ºç¥ç»ç½‘ç»œçš„è§£é‡Šæ€§ï¼Ÿ</font>

]]></content>
      <categories>
        <category>Others</category>
        <category>Interview</category>
      </categories>
      <tags>
        <tag>ç™¾é¢æ·±åº¦å­¦ä¹ </tag>
        <tag>RNN</tag>
        <tag>LSTM</tag>
        <tag>GRU</tag>
        <tag>å¾ªç¯ç¥ç»ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€Šç™¾é¢æ·±åº¦å­¦ä¹ ã€‹ç¬”è®°1 - å·ç§¯ç¥ç»ç½‘ç»œçš„åŸºç¡€æ¨¡å—</title>
    <url>/2020/10/17/%E3%80%8A%E7%99%BE%E9%9D%A2%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%8B%E7%AC%94%E8%AE%B01-%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E7%9A%84%E5%9F%BA%E7%A1%80%E6%A8%A1%E5%9D%97/</url>
    <content><![CDATA[<h2 id="1-æ‰¹å½’ä¸€åŒ–åœ¨ç½‘ç»œä¸­çš„ä½ç½®"><a href="#1-æ‰¹å½’ä¸€åŒ–åœ¨ç½‘ç»œä¸­çš„ä½ç½®" class="headerlink" title="1. æ‰¹å½’ä¸€åŒ–åœ¨ç½‘ç»œä¸­çš„ä½ç½®"></a>1. æ‰¹å½’ä¸€åŒ–åœ¨ç½‘ç»œä¸­çš„ä½ç½®</h2><p>æ‰¹å½’ä¸€åŒ–åœ¨ç½‘ç»œä¸­çš„ä½ç½®ï¼Œä»ç›´è§‰ä¸Šçœ‹æ— è®ºæ˜¯æ”¾åœ¨æ¿€æ´»å±‚å‰è¿˜æ˜¯æ¿€æ´»å±‚åéƒ½æœ‰ä¸€å®šé“ç†ï¼š</p>
<ul>
<li>æŠŠæ‰¹å½’ä¸€åŒ–æ”¾åœ¨æ¿€æ´»å±‚ä¹‹å‰ï¼Œå¯ä»¥æœ‰æ•ˆé¿å…æ‰¹å½’ä¸€åŒ–ç ´åéçº¿æ€§ç‰¹å¾çš„åˆ†å¸ƒï¼›å¦å¤–ï¼Œæ‰¹å½’ä¸€åŒ–è¿˜å¯ä»¥ä½¿æ•°æ®ç‚¹å°½é‡ä¸è½å…¥æ¿€æ´»å‡½æ•°çš„é¥±å’ŒåŒºåŸŸï¼Œç¼“è§£æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚</li>
<li>ç”±äºç°åœ¨å¸¸ç”¨çš„æ¿€æ´»å‡½æ•°æ˜¯ReLUï¼Œå®ƒæ²¡æœ‰Sigmoidã€Tanhå‡½æ•°çš„é‚£äº›é—®é¢˜ï¼Œå› æ­¤ä¹Ÿå¯ä»¥æŠŠæ‰¹å½’ä¸€åŒ–æ”¾åœ¨æ¿€æ´»å±‚ä¹‹åï¼Œé¿å…æ•°æ®åœ¨æ¿€æ´»å±‚ä¹‹å‰è¢«è½¬å…¥ç›¸ä¼¼çš„æ¨¡å¼ä»è€Œä½¿å¾—éçº¿æ€§ç‰¹å¾åˆ†å¸ƒè¶‹äºåŒåŒ–ã€‚</li>
</ul>
<p>åœ¨å…·ä½“å®è·µä¸­ï¼ŒåŸå§‹è®ºæ–‡æ˜¯å°†æ‰¹å½’ä¸€åŒ–æ”¾åœ¨æ¿€æ´»å±‚ä¹‹å‰çš„ï¼Œä½†å­¦æœ¯ç•Œå’Œå·¥ä¸šç•Œä¹Ÿæœ‰ä¸å°‘äººè¡¨ç¤ºå€¾å‘äºå°†æ‰¹å½’ä¸€åŒ–æ”¾åœ¨æ¿€æ´»å±‚ä¹‹åã€‚æ‰¹å½’ä¸€åŒ–ç©¶ç«Ÿåº”è¯¥æ”¾åœ¨ä»€ä¹ˆä½ç½®ï¼Œä»æ˜¯ä¸€ä¸ªå­˜åœ¨äº‰è®®çš„é—®é¢˜ã€‚</p>
<h2 id="2-åˆ†ç±»å±‚"><a href="#2-åˆ†ç±»å±‚" class="headerlink" title="2. åˆ†ç±»å±‚"></a>2. åˆ†ç±»å±‚</h2><p>æœ€è¿‘å‡ å¹´ï¼Œåˆ†ç±»ç½‘ç»œåœ¨å·ç§¯å±‚ä¹‹åï¼Œæœ€åä¸€å±‚ä¹‹å‰é€šå¸¸é‡‡ç”¨å…¨å±€å¹³å‡æ± åŒ–ï¼Œå®ƒä¸å…¨è¿æ¥ç½‘ç»œæœ‰ç€ç›¸ä¼¼çš„æ•ˆæœï¼ˆå¯ä»¥æå–å…¨å±€ä¿¡æ¯ï¼‰ï¼Œå¹¶ä¸”å…·æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š</p>
<ul>
<li>å‚æ•°é‡å’Œè®¡ç®—é‡å¤§å¤§é™ä½ã€‚</li>
<li>å…·æœ‰è¾ƒå¥½çš„å¯è§£é‡Šæ€§ï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ç‰¹å¾å›¾ä¸Šå“ªäº›ç‚¹å¯¹æœ€åçš„åˆ†ç±»è´¡çŒ®æœ€å¤§ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>Others</category>
        <category>Interview</category>
      </categories>
      <tags>
        <tag>CNN</tag>
        <tag>å·ç§¯ç¥ç»ç½‘ç»œ</tag>
        <tag>ç™¾é¢æ·±åº¦å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>Softmaxæ¸©åº¦ç³»æ•°</title>
    <url>/2020/10/15/Softmax%E6%B8%A9%E5%BA%A6%E7%B3%BB%E6%95%B0/</url>
    <content><![CDATA[<p>softmax temperatureæ˜¯åœ¨softmaxå±‚ä¸ŠåŠ äº†ä¸€ä¸ªè¶…å‚æ•°ï¼Œä¸€èˆ¬softmaxè®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
P_t(w) = \frac{\exp (s_w)}{\sum_{w^{'} \in V} \exp(s_{w^{'}})}</script><p>åŠ å…¥æ¸©åº¦ç³»æ•°è®¡ç®—è¿‡ç¨‹ä¸ºï¼š</p>
<script type="math/tex; mode=display">
P_t(w) = \frac{\exp (\sigma s_w)}{\sum_{w^{'} \in V} \exp(\sigma s_{w^{'}})}</script><p>$\sigma$è¶Šå°æ¦‚ç‡åˆ†å¸ƒå°±è¶Šæ¥è¿‘äºuniformï¼Œæ¦‚ç‡å€¼åœ¨æ•´ä¸ªè¯è¡¨ä¸Šåšäº†å¹³æ»‘ï¼Œå¯ä»¥ç”Ÿæˆæ›´åŠ diverseçš„å¥å­ï¼›$\sigma$è¶Šå¤§æ¦‚ç‡å¯†åº¦å°±è¶Šé›†ä¸­åœ¨æŸå‡ ä¸ªtokenä¸Šï¼Œå¯ä»¥ç”Ÿæˆå…·æœ‰æ›´å°diverseçš„å¥å­ã€‚</p>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>softmax</tag>
      </tags>
  </entry>
  <entry>
    <title>NERO A Neural Rule Grounding Framework for Label-Efficient Relation Extraction</title>
    <url>/2020/10/15/NERO-A-Neural-Rule-Grounding-Framework-for-Label-Efficient-Relation-Extraction/</url>
    <content><![CDATA[<p><img src="/images/blog/2020/NERO/å¹»ç¯ç‰‡1.PNG" alt></p>
<p><img src="/images/blog/2020/NERO/å¹»ç¯ç‰‡2.PNG" alt></p>
<p><img src="/images/blog/2020/NERO/å¹»ç¯ç‰‡3.PNG" alt></p>
<a id="more"></a>
<p><img src="/images/blog/2020/NERO/å¹»ç¯ç‰‡4.PNG" alt></p>
<p><img src="/images/blog/2020/NERO/å¹»ç¯ç‰‡5.PNG" alt></p>
<p><img src="/images/blog/2020/NERO/å¹»ç¯ç‰‡6.PNG" alt></p>
<p><img src="/images/blog/2020/NERO/å¹»ç¯ç‰‡7.PNG" alt></p>
<p><img src="/images/blog/2020/NERO/å¹»ç¯ç‰‡8.PNG" alt></p>
<p><img src="/images/blog/2020/NERO/å¹»ç¯ç‰‡9.PNG" alt></p>
<p><img src="/images/blog/2020/NERO/å¹»ç¯ç‰‡10.PNG" alt></p>
<p><img src="/images/blog/2020/NERO/å¹»ç¯ç‰‡11.PNG" alt></p>
<p><img src="/images/blog/2020/NERO/å¹»ç¯ç‰‡12.PNG" alt></p>
<p><img src="/images/blog/2020/NERO/å¹»ç¯ç‰‡13.PNG" alt></p>
<p><img src="/images/blog/2020/NERO/å¹»ç¯ç‰‡14.PNG" alt></p>
<p><img src="/images/blog/2020/NERO/å¹»ç¯ç‰‡15.PNG" alt></p>
<p><img src="/images/blog/2020/NERO/å¹»ç¯ç‰‡16.PNG" alt></p>
<p><img src="/images/blog/2020/NERO/å¹»ç¯ç‰‡17.PNG" alt></p>
<p><img src="/images/blog/2020/NERO/å¹»ç¯ç‰‡18.PNG" alt></p>
]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
        <category>Distant Supervision</category>
      </categories>
      <tags>
        <tag>paper</tag>
        <tag>WWW</tag>
        <tag>Relation Extraction</tag>
        <tag>Low Resource</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¹ç† - äº”åº¦ç›¸ç”Ÿå¾‹ã€çº¯å¾‹ä¸åäºŒå¹³å‡å¾‹</title>
    <url>/2020/10/11/%E4%B9%90%E7%90%86-%E4%BA%94%E5%BA%A6%E7%9B%B8%E7%94%9F%E5%BE%8B%E3%80%81%E7%BA%AF%E5%BE%8B%E4%B8%8E%E5%8D%81%E4%BA%8C%E5%B9%B3%E5%9D%87%E5%BE%8B/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç”±äºæä¸æ˜ç™½â€œå¤§äºŒåº¦â€ä¸â€œå‡ä¸‰åº¦â€çš„åŒºåˆ«å’Œå…³ç³»ï¼Œä»ç½‘ä¸Šæ‰¾äº†ä¸€äº›ç›¸å…³ä¹ç†æ•™æï¼Œç»ˆäºå¼„æ‡‚äº†ï¼ğŸ˜Š</p>
<p>éšç€å¹´é¾„å¢é•¿ï¼Œè¶Šæ¥è¶Šè§‰å¾—å­¦æ— æ­¢å¢ƒ~è€Œä¸”ï¼Œæ›´å¤šçš„æ˜¯è¦å­¦ä¼šå­¦ä¹ ã€ä¸»åŠ¨å­¦ä¹ ï¼Œå“ˆå“ˆå“ˆä¸æ„Ÿå¹äº†ï¼Œå¼€å§‹å§~</p>
<h2 id="äº”åº¦ç›¸ç”Ÿå¾‹"><a href="#äº”åº¦ç›¸ç”Ÿå¾‹" class="headerlink" title="äº”åº¦ç›¸ç”Ÿå¾‹"></a>äº”åº¦ç›¸ç”Ÿå¾‹</h2><p>é¦–å…ˆåº”è¯¥æ˜ç™½ä»€ä¹ˆæ˜¯â€œäº”åº¦å¾ªç¯åœˆâ€ï¼Œå¦‚æœä¸æ˜ç™½ï¼Œå¯ä»¥å‚è€ƒçŸ¥ä¹ä¸Šçš„å¾ˆå¥½çš„ä¹ç†ä¸“æ ï¼š</p>
<p><a href="https://zhuanlan.zhihu.com/p/23125945" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/23125945</a></p>
<p><img src="/images/blog/2020/music/äº”åº¦åœˆ.jpg" alt></p>
<p><br></p>
<a id="more"></a>
<p>äº”åº¦ç›¸ç”Ÿå¾‹å°±æ˜¯åˆ©ç”¨æ³›éŸ³ç”Ÿæˆï¼Œå…¶ä¸­åªæœ‰ä¸¤ä¸ªé¢‘ç‡æ¯”ï¼Œå…«åº¦ä¸º$\frac{1}{2}$ï¼Œäº”åº¦ä¸º$\frac{3}{2}$ã€‚</p>
<p>æŒ‰ç…§äº”åº¦åœˆï¼Œ<font color="orange">é¡ºæ—¶é’ˆæ—‹è½¬æ—¶ï¼Œé¢‘ç‡ä¹˜ä»¥$\frac{3}{2}$ï¼›é€†æ—¶é’ˆæ—‹è½¬æ—¶ï¼Œé¢‘ç‡é™¤ä»¥$\frac{3}{2}$ï¼Œ</font>è¿™æ ·å°±å¯ä»¥å¾—åˆ°æ‰€æœ‰éŸ³çš„é¢‘ç‡å€¼ã€‚</p>
<p>ä»¥ä¸­å¤®Cé¢‘ç‡ä¸º1ï¼Œå°è¯•æ¨å¯¼å…¶ä»–éŸ³ï¼š</p>
<script type="math/tex; mode=display">
G = C \times \frac{3}{2} = \frac{3}{2}</script><p><br></p>
<script type="math/tex; mode=display">
D = G \times \frac{3}{2} = \frac{9}{4}</script><p>ç”±äºDæ¯”Gä½ï¼Œæ‰€ä»¥è¦é™å…«åº¦ï¼Œå†ä¹˜$\frac{1}{2}$ï¼Œå³ï¼š</p>
<script type="math/tex; mode=display">
D = \frac{9}{4} \times \frac{1}{2} = \frac{9}{8}</script><p><br></p>
<p>ä»¥æ­¤ç±»æ¨ï¼Œå¯ä»¥å¾—åˆ°è¡¨æ ¼ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">C</th>
<th style="text-align:center">D</th>
<th style="text-align:center">E</th>
<th style="text-align:center">F</th>
<th style="text-align:center">G</th>
<th style="text-align:center">A</th>
<th style="text-align:center">B</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">$\frac{9}{8}$</td>
<td style="text-align:center">$\frac{81}{64}$</td>
<td style="text-align:center">$\frac{4}{3}$</td>
<td style="text-align:center">$\frac {3}{2}$</td>
<td style="text-align:center">$\frac{27}{16}$</td>
<td style="text-align:center">$\frac{243}{128}$</td>
</tr>
<tr>
<td style="text-align:center"><strong>bD</strong></td>
<td style="text-align:center"><strong>bE</strong></td>
<td style="text-align:center"><strong>#F</strong></td>
<td style="text-align:center"><strong>bG</strong></td>
<td style="text-align:center"><strong>bA</strong></td>
<td style="text-align:center"><strong>bB</strong></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">$\frac{256}{243}$</td>
<td style="text-align:center">$\frac{32}{27}$</td>
<td style="text-align:center">$\frac{729}{512}$</td>
<td style="text-align:center">$\frac{1024}{729}$</td>
<td style="text-align:center">$\frac{128}{81}$</td>
<td style="text-align:center">$\frac{16}{9}$</td>
</tr>
</tbody>
</table>
</div>
<p><br></p>
<p>ä½†æ˜¯å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨å¾ªç¯åœˆé‡Œè½¬ä¸€åœˆå<strong>ä¸èƒ½å¾—åˆ°ä¸¤ä¸ªç›¸åŒçš„éŸ³</strong>ï¼Œä¾‹å¦‚å¯¹äº#Få’ŒbGä¸¤ä¸ªéŸ³ï¼š</p>
<script type="math/tex; mode=display">
\frac{\# F}{bG} = \frac{729/ 512}{1024 / 729} = \frac{531441}{524288}</script><p>è¿™è¯´æ˜åœ¨äº”åº¦ç›¸ç”Ÿå¾‹ä¸­<strong>å‡Fä¸ç­‰äºé™G</strong>ï¼</p>
<p>è¿™ä¸€ç‚¹å¦‚æœæƒ³æ˜ç™½äº†ï¼Œå°±èƒ½ç†è§£ä¸ºä»€ä¹ˆéŸ³ç¨‹è¦åˆ†<strong>å¢å››åº¦</strong>å’Œ<strong>å‡äº”åº¦</strong>äº†ï¼Œå› ä¸ºCåˆ°å‡Få°±æ˜¯å¢å››åº¦ï¼ŒCåˆ°é™Gå°±æ˜¯å‡äº”åº¦ï¼Œè€Œè¿™ä¸¤ä¸ªéŸ³ç¨‹æ˜¯ä¸ä¸€æ ·çš„ã€‚</p>
<blockquote>
<p>å‚è€ƒï¼š</p>
<p><a href="https://oeis.org/DUNNE/TEMPERAMENT.HTML" target="_blank" rel="noopener">https://oeis.org/DUNNE/TEMPERAMENT.HTML</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/27028014" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/27028014</a></p>
</blockquote>
<p>ç”±äºå’Œå£°çš„åº”ç”¨ä»¥åŠå¤è°ƒéŸ³ä¹çš„å…´èµ·ï¼Œç”±äº”åº¦ç›¸ç”Ÿå¾‹å¾—åˆ°çš„ä¸‰å’Œå¼¦ä¸­çš„ä¸‰éŸ³éå¸¸ä¸åå’Œï¼Œæ¯”å€¼æ•°å­—è¾¾åˆ°äº†$\frac{81}{64}$ï¼Œä¸ºäº†å’Œå£°æ•ˆæœæ›´å¥½ï¼Œè®¸å¤šå¤šå£°éƒ¨éŸ³ä¹å¼€å§‹ä½¿ç”¨<strong>çº¯å¾‹</strong>ã€‚</p>
<p><br></p>
<h2 id="çº¯å¾‹"><a href="#çº¯å¾‹" class="headerlink" title="çº¯å¾‹"></a>çº¯å¾‹</h2><p><strong>çº¯å¾‹</strong>æ˜¯ä¸€ç§ç”±<strong>äº”åº¦ç›¸ç”Ÿå¾‹</strong>æ”¹è¿›è€Œæ¥çš„å¾‹åˆ¶ï¼Œå®ƒä»¥å¤§ä¸‰å’Œå¼¦ä¸ºåŸºç¡€ï¼Œä¸ºäº†è§£å†³å’Œå£°ä¸­å’Œå¼¦ä¸‰éŸ³å¬èµ·æ¥ä¸â€œåå’Œâ€çš„é—®é¢˜ã€‚<strong>çº¯å¾‹</strong>å…¶å®å°±æ˜¯åœ¨<strong>äº”åº¦ç›¸ç”Ÿå¾‹</strong>çš„åŸºç¡€ä¸Šï¼Œæ’å…¥ä¸€ä¸ª<strong>å¤§ä¸‰åº¦</strong>å½¢æˆçš„ä¸€ç§å¾‹åˆ¶ã€‚</p>
<p><img src="/images/blog/2020/music/change.PNG" alt></p>
<p><br></p>
<p>ä½†æ˜¯çº¯å¾‹ä¹Ÿæš´éœ²å‡ºäº†è®¸å¤šç¼ºç‚¹ï¼š</p>
<ol>
<li><p><strong>å…¨éŸ³</strong>æœ‰å¤§ã€å°ä¹‹åˆ†</p>
</li>
<li><p>çº¯å¾‹ä¸­å°äºŒåº¦æ¯”äº”åº¦ç›¸ç”Ÿå¾‹è¦å¤§ï¼Œç§°ä¸º<strong>å¤§åŠéŸ³</strong></p>
</li>
<li>çº¯å¾‹ä¸­å­˜åœ¨<strong>ç‹­äº”åº¦</strong></li>
</ol>
<p><strong>äº”åº¦ç›¸ç”Ÿå¾‹</strong>å’Œ<strong>çº¯å¾‹</strong>è¿˜æœ‰ä¸€ä¸ªå…±åŒçš„ç¼ºç‚¹ï¼Œå°±æ˜¯<strong>æ— æ³•è½¬è°ƒ</strong>ï¼Œå½“ä¸€é¦–ä¹æ›²è¦è½¬åˆ°å…¶å®ƒè°ƒä¸Šæ¼”å¥æ—¶ï¼Œå¬èµ·æ¥å±…ç„¶å’ŒåŸè°ƒæœ‰å¾ˆå¤§å·®å¼‚ï¼Œè¿™ä¹Ÿä½¿å¾—æ— æ³•å†™ä½œè½¬è°ƒçš„ä¹æ›²ã€‚</p>
<p><br></p>
<blockquote>
<p>å‚è€ƒï¼š</p>
<p><a href="https://zhuanlan.zhihu.com/p/27150865" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/27150865</a></p>
</blockquote>
<p><br></p>
<h2 id="åäºŒå¹³å‡å¾‹"><a href="#åäºŒå¹³å‡å¾‹" class="headerlink" title="åäºŒå¹³å‡å¾‹"></a>åäºŒå¹³å‡å¾‹</h2><p>ç®€å•ç²—æš´ï¼Œç›´æ¥ä¸Šå›¾ï¼š</p>
<p><img src="/images/blog/2020/music/åäºŒå¹³å‡å¾‹.jpg" alt></p>
<p><br></p>
<p>åœ¨åäºŒå¹³å‡å¾‹é‡Œ<strong>é»‘é”®</strong>ä¸Šçš„éŸ³ä¸ç®¡æ˜¯ç”¨<strong>å‡å·</strong>è¿˜æ˜¯<strong>é™å·</strong>è¡¨ç¤ºï¼Œä»–ä»¬çš„é¢‘ç‡æ˜¯ä¸€æ ·çš„ã€‚<font color="#00d000">è¿™ä¹Ÿæ˜¯å¾ˆå¤šéŸ³ä¹ç†è®ºç§¯ç´¯ä¸å¤Ÿçš„åˆå­¦è€…å®¹æ˜“å¯¹<strong>å¤§äºŒåº¦ã€å‡ä¸‰åº¦</strong>äº§ç”Ÿè¿·æƒ‘çš„åŸå› ã€‚</font></p>
<p>ä»æ­¤å¼€å§‹ï¼Œä»¥<strong>åäºŒéŸ³</strong>ä¸ºåŸºç¡€çš„éŸ³ä¹å¼€å§‹æ™®åŠï¼Œç»å†äº†<strong>å·´æ´›å…‹</strong>æ—¶æœŸã€<strong>å¤å…¸</strong>æ—¶æœŸã€<strong>æµªæ¼«</strong>æ—¶æœŸã€<strong>å°è±¡</strong>æ—¶æœŸã€<strong>ç°ä»£</strong>æ—¶æœŸï¼Œå¤å…¸éŸ³ä¹è“¬å‹ƒå‘å±•ï¼Œè¿™äº›æ—¶ä»£çš„ä½œæ›²å®¶ç»™æˆ‘ä»¬ç•™ä¸‹äº†å®è´µçš„éŸ³ä¹è´¢å¯Œï¼Œæ¢å¥è¯è¯´ï¼Œæ²¡æœ‰åäºŒå¹³å‡å¾‹ï¼Œå°±æ²¡æœ‰ä»Šå¤©æˆ‘ä»¬å¬åˆ°çš„è¿™ä¹ˆå¤šéŸ³ä¹ã€‚</p>
<blockquote>
<p>å‚è€ƒï¼š</p>
<p><a href="https://zhuanlan.zhihu.com/p/27647079" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/27647079</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Others</category>
        <category>Music</category>
      </categories>
      <tags>
        <tag>ä¹ç†</tag>
        <tag>åäºŒå¹³å‡å¾‹</tag>
        <tag>äº”åº¦ç›¸ç”Ÿå¾‹</tag>
        <tag>çº¯å¾‹</tag>
        <tag>music</tag>
      </tags>
  </entry>
  <entry>
    <title>Conditional GAN</title>
    <url>/2020/10/10/Conditional-GAN/</url>
    <content><![CDATA[<p>Conditional GANå¯ä»¥æ§åˆ¶ç”Ÿæˆçš„å›¾åƒç±»åˆ«ï¼Œæ˜¯éå¸¸å®ç”¨çš„ä¸€ç§æ¨¡å‹ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œå…ˆä¸Šæ•ˆæœå›¾ï¼š</p>
<p><img src="/images/blog/2020/CGAN/101.png" alt></p>
<p>ä½¿ç”¨MNISTæ•°æ®é›†ï¼Œç”Ÿæˆçš„å‡ä¸ºæ•°å­—7ç±»åˆ«ã€‚</p>
<h2 id="TensorFlowä»£ç "><a href="#TensorFlowä»£ç " class="headerlink" title="TensorFlowä»£ç "></a>TensorFlowä»£ç </h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">from</span> tensorflow.examples.tutorials.mnist <span class="keyword">import</span> input_data</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line">matplotlib.use(<span class="string">'Agg'</span>)</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib.gridspec <span class="keyword">as</span> gridspec</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mnist = input_data.read_data_sets(<span class="string">'../../MNIST_data'</span>, one_hot=<span class="literal">True</span>)</span><br><span class="line">mb_size = <span class="number">64</span></span><br><span class="line">Z_dim = <span class="number">100</span></span><br><span class="line">X_dim = mnist.train.images.shape[<span class="number">1</span>]</span><br><span class="line">y_dim = mnist.train.labels.shape[<span class="number">1</span>]</span><br><span class="line">h_dim = <span class="number">128</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">xavier_init</span><span class="params">(size)</span>:</span></span><br><span class="line">    in_dim = size[<span class="number">0</span>]</span><br><span class="line">    xavier_stddev = <span class="number">1.</span> / tf.sqrt(in_dim / <span class="number">2.</span>)</span><br><span class="line">    <span class="keyword">return</span> tf.random_normal(shape=size, stddev=xavier_stddev)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">""" Discriminator Net model """</span></span><br><span class="line">X = tf.placeholder(tf.float32, shape=[<span class="literal">None</span>, <span class="number">784</span>])</span><br><span class="line">y = tf.placeholder(tf.float32, shape=[<span class="literal">None</span>, y_dim])</span><br><span class="line"></span><br><span class="line">D_W1 = tf.Variable(xavier_init([X_dim + y_dim, h_dim]))</span><br><span class="line">D_b1 = tf.Variable(tf.zeros(shape=[h_dim]))</span><br><span class="line"></span><br><span class="line">D_W2 = tf.Variable(xavier_init([h_dim, <span class="number">1</span>]))</span><br><span class="line">D_b2 = tf.Variable(tf.zeros(shape=[<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line">theta_D = [D_W1, D_W2, D_b1, D_b2]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">discriminator</span><span class="params">(x, y)</span>:</span></span><br><span class="line">    inputs = tf.concat(axis=<span class="number">1</span>, values=[x, y])  <span class="comment"># 1. D æ·»åŠ ç›‘ç£ä¿¡æ¯</span></span><br><span class="line">    D_h1 = tf.nn.relu(tf.matmul(inputs, D_W1) + D_b1)</span><br><span class="line">    D_logit = tf.matmul(D_h1, D_W2) + D_b2</span><br><span class="line">    D_prob = tf.nn.sigmoid(D_logit)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> D_prob, D_logit</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">""" Generator Net model """</span></span><br><span class="line">Z = tf.placeholder(tf.float32, shape=[<span class="literal">None</span>, Z_dim])</span><br><span class="line"></span><br><span class="line">G_W1 = tf.Variable(xavier_init([Z_dim + y_dim, h_dim]))</span><br><span class="line">G_b1 = tf.Variable(tf.zeros(shape=[h_dim]))</span><br><span class="line"></span><br><span class="line">G_W2 = tf.Variable(xavier_init([h_dim, X_dim]))</span><br><span class="line">G_b2 = tf.Variable(tf.zeros(shape=[X_dim]))</span><br><span class="line"></span><br><span class="line">theta_G = [G_W1, G_W2, G_b1, G_b2]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">generator</span><span class="params">(z, y)</span>:</span></span><br><span class="line">    inputs = tf.concat(axis=<span class="number">1</span>, values=[z, y])  <span class="comment"># 2. G æ·»åŠ ç›‘ç£ä¿¡æ¯</span></span><br><span class="line">    G_h1 = tf.nn.relu(tf.matmul(inputs, G_W1) + G_b1)</span><br><span class="line">    G_log_prob = tf.matmul(G_h1, G_W2) + G_b2</span><br><span class="line">    G_prob = tf.nn.sigmoid(G_log_prob)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> G_prob</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sample_Z</span><span class="params">(m, n)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> np.random.uniform(<span class="number">-1.</span>, <span class="number">1.</span>, size=[m, n])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">plot</span><span class="params">(samples)</span>:</span></span><br><span class="line">    fig = plt.figure(figsize=(<span class="number">4</span>, <span class="number">4</span>))</span><br><span class="line">    gs = gridspec.GridSpec(<span class="number">4</span>, <span class="number">4</span>)</span><br><span class="line">    gs.update(wspace=<span class="number">0.05</span>, hspace=<span class="number">0.05</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i, sample <span class="keyword">in</span> enumerate(samples):</span><br><span class="line">        ax = plt.subplot(gs[i])</span><br><span class="line">        plt.axis(<span class="string">'off'</span>)</span><br><span class="line">        ax.set_xticklabels([])</span><br><span class="line">        ax.set_yticklabels([])</span><br><span class="line">        ax.set_aspect(<span class="string">'equal'</span>)</span><br><span class="line">        plt.imshow(sample.reshape(<span class="number">28</span>, <span class="number">28</span>), cmap=<span class="string">'Greys_r'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> fig</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">G_sample = generator(Z, y)</span><br><span class="line">D_real, D_logit_real = discriminator(X, y)</span><br><span class="line">D_fake, D_logit_fake = discriminator(G_sample, y)</span><br><span class="line"></span><br><span class="line">D_loss_real = tf.reduce_mean(tf.nn.sigmoid_cross_entropy_with_logits(logits=D_logit_real, labels=tf.ones_like(D_logit_real)))</span><br><span class="line">D_loss_fake = tf.reduce_mean(tf.nn.sigmoid_cross_entropy_with_logits(logits=D_logit_fake, labels=tf.zeros_like(D_logit_fake)))</span><br><span class="line">D_loss = D_loss_real + D_loss_fake</span><br><span class="line">G_loss = tf.reduce_mean(tf.nn.sigmoid_cross_entropy_with_logits(logits=D_logit_fake, labels=tf.ones_like(D_logit_fake)))</span><br><span class="line"></span><br><span class="line">D_solver = tf.train.AdamOptimizer().minimize(D_loss, var_list=theta_D)</span><br><span class="line">G_solver = tf.train.AdamOptimizer().minimize(G_loss, var_list=theta_G)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sess = tf.Session()</span><br><span class="line">sess.run(tf.global_variables_initializer())</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">'out/'</span>):</span><br><span class="line">    os.makedirs(<span class="string">'out/'</span>)</span><br><span class="line"></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> it <span class="keyword">in</span> range(<span class="number">1000000</span>):</span><br><span class="line">    <span class="keyword">if</span> it % <span class="number">1000</span> == <span class="number">0</span>:</span><br><span class="line">        n_sample = <span class="number">16</span></span><br><span class="line"></span><br><span class="line">        Z_sample = sample_Z(n_sample, Z_dim)</span><br><span class="line">        y_sample = np.zeros(shape=[n_sample, y_dim])</span><br><span class="line">        y_sample[:, <span class="number">7</span>] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        samples = sess.run(G_sample, feed_dict=&#123;Z: Z_sample, y:y_sample&#125;)</span><br><span class="line"></span><br><span class="line">        fig = plot(samples)</span><br><span class="line">        plt.savefig(<span class="string">'out/&#123;&#125;.png'</span>.format(str(i).zfill(<span class="number">3</span>)), bbox_inches=<span class="string">'tight'</span>)</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">        plt.close(fig)</span><br><span class="line"></span><br><span class="line">    X_mb, y_mb = mnist.train.next_batch(mb_size)</span><br><span class="line"></span><br><span class="line">    Z_sample = sample_Z(mb_size, Z_dim)</span><br><span class="line">    _, D_loss_curr = sess.run([D_solver, D_loss], feed_dict=&#123;X: X_mb, Z: Z_sample, y:y_mb&#125;)</span><br><span class="line">    _, G_loss_curr = sess.run([G_solver, G_loss], feed_dict=&#123;Z: Z_sample, y:y_mb&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> it % <span class="number">1000</span> == <span class="number">0</span>:</span><br><span class="line">        print(<span class="string">'Iter: &#123;&#125;'</span>.format(it))</span><br><span class="line">        print(<span class="string">'D loss: &#123;:.4&#125;'</span>. format(D_loss_curr))</span><br><span class="line">        print(<span class="string">'G_loss: &#123;:.4&#125;'</span>.format(G_loss_curr))</span><br><span class="line">        print()</span><br></pre></td></tr></table></figure>
<h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p><img src="/images/blog/2020/CGAN/000.png" alt></p>
<p>0ä¸ªstep</p>
<p><img src="/images/blog/2020/CGAN/010.png" alt></p>
<p>10 * 1000ä¸ªstep</p>
<p><img src="/images/blog/2020/CGAN/028.png" alt></p>
<p>28 * 1000ä¸ªstep</p>
<p><img src="/images/blog/2020/CGAN/999.png" alt></p>
<p>999 * 1000ä¸ªstep</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Conditional GANçš„æ€æƒ³ä»¥åŠå®ç°éƒ½æ˜¯å¾ˆç®€å•çš„ï¼Œå€¼å¾—å€Ÿé‰´ã€‚å¾€å¾€ç»å…¸çš„æ¨¡å‹éƒ½æ˜¯ç®€å•ä¼˜é›…çš„ã€‚</p>
]]></content>
      <categories>
        <category>Neural Networks</category>
        <category>GAN</category>
      </categories>
      <tags>
        <tag>Conditional GAN</tag>
        <tag>GAN</tag>
        <tag>CGAN</tag>
        <tag>ç”Ÿæˆå¯¹æŠ—ç½‘ç»œ</tag>
        <tag>ç”Ÿæˆæ¨¡å‹</tag>
      </tags>
  </entry>
  <entry>
    <title>WGANä½¿ç”¨Pytorchç®€å•å®ç°</title>
    <url>/2020/10/09/WGAN%E4%BD%BF%E7%94%A8Pytorch%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<p>ä¸Šä¸€ç¯‡æ–‡ç« ä»‹ç»äº† WGAN çš„åŸç†ï¼Œè¿™ç¯‡æ–‡ç« ç»™å‡ºä½¿ç”¨Pytorchçš„ç®€å•å®ç°ï¼š</p>
<h2 id="ç¯å¢ƒé…ç½®ï¼š"><a href="#ç¯å¢ƒé…ç½®ï¼š" class="headerlink" title="ç¯å¢ƒé…ç½®ï¼š"></a>ç¯å¢ƒé…ç½®ï¼š</h2><figure class="highlight"><table><tr><td class="code"><pre><span class="line">tensorflow: &gt;= 2.0.0</span><br><span class="line">pytorch: &gt;= 1.5.0</span><br><span class="line">numpy</span><br><span class="line">matplotlib</span><br></pre></td></tr></table></figure>
<h2 id="ä»£ç ï¼š"><a href="#ä»£ç ï¼š" class="headerlink" title="ä»£ç ï¼š"></a>ä»£ç ï¼š</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch.nn</span><br><span class="line"><span class="keyword">import</span> torch.optim <span class="keyword">as</span> optim</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line">matplotlib.use(<span class="string">'Agg'</span>)</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib.gridspec <span class="keyword">as</span> gridspec</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> torch.autograd <span class="keyword">import</span> Variable</span><br><span class="line"><span class="keyword">import</span> tensorflow</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mnist, _ = tensorflow.keras.datasets.mnist.load_data(path=<span class="string">'mnist.npz'</span>)</span><br><span class="line">mb_size = <span class="number">32</span></span><br><span class="line">z_dim = <span class="number">10</span></span><br><span class="line">X_dim = int(pow(mnist[<span class="number">0</span>][<span class="number">0</span>].shape[<span class="number">1</span>], <span class="number">2</span>))</span><br><span class="line">y_dim = <span class="number">10</span>  <span class="comment"># æ‰‹å†™æ•°å­— 0~9</span></span><br><span class="line">h_dim = <span class="number">128</span></span><br><span class="line">cnt = <span class="number">0</span></span><br><span class="line">lr = <span class="number">1e-4</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">G = torch.nn.Sequential(</span><br><span class="line">    torch.nn.Linear(z_dim, h_dim),</span><br><span class="line">    torch.nn.ReLU(),</span><br><span class="line">    torch.nn.Linear(h_dim, X_dim),</span><br><span class="line">    torch.nn.Sigmoid()</span><br><span class="line">).float()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">D = torch.nn.Sequential(</span><br><span class="line">    torch.nn.Linear(X_dim, h_dim),</span><br><span class="line">    torch.nn.ReLU(),</span><br><span class="line">    torch.nn.Linear(h_dim, <span class="number">1</span>),  <span class="comment"># 1. ä¸ç”¨ sigmoid</span></span><br><span class="line">).float()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">reset_grad</span><span class="params">()</span>:</span></span><br><span class="line">    G.zero_grad()</span><br><span class="line">    D.zero_grad()</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">G_solver = optim.RMSprop(G.parameters(), lr=lr)  <span class="comment"># 2. é‡‡ç”¨ RMSprop ä¼˜åŒ–å™¨</span></span><br><span class="line">D_solver = optim.RMSprop(D.parameters(), lr=lr)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sample_batch</span><span class="params">(mb_size)</span>:</span></span><br><span class="line">    rand_indexes = np.random.randint(<span class="number">0</span>, mnist[<span class="number">0</span>].shape[<span class="number">0</span>], mb_size)</span><br><span class="line">    <span class="keyword">return</span> mnist[<span class="number">0</span>][rand_indexes]</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p><br></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> it <span class="keyword">in</span> range(<span class="number">1000000</span>):</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">5</span>):  <span class="comment"># 5. è®­ç»ƒ D æ›´å¤šæ¬¡</span></span><br><span class="line">        <span class="comment"># Sample data</span></span><br><span class="line">        z = Variable(torch.randn(mb_size, z_dim))</span><br><span class="line">        X = sample_batch(mb_size)</span><br><span class="line">        X = Variable(torch.from_numpy(X)).float()</span><br><span class="line">        X = X.reshape(mb_size, <span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line">        G_sample = G(z)</span><br><span class="line">        D_real = D(X)</span><br><span class="line">        D_fake = D(G_sample)</span><br><span class="line"></span><br><span class="line">        D_loss = -(torch.mean(D_real) - torch.mean(D_fake))  <span class="comment"># 3. æŸå¤±å‡½æ•° - æ¬åœŸè·ç¦»</span></span><br><span class="line"></span><br><span class="line">        D_loss.backward()</span><br><span class="line">        D_solver.step()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Weight clipping</span></span><br><span class="line">        <span class="keyword">for</span> p <span class="keyword">in</span> D.parameters():</span><br><span class="line">            p.data.clamp_(<span class="number">-0.01</span>, <span class="number">0.01</span>)  <span class="comment"># 4. weight clipping or gradient penalty</span></span><br><span class="line"></span><br><span class="line">        reset_grad()</span><br><span class="line"></span><br><span class="line">    X = sample_batch(mb_size)</span><br><span class="line">    X = Variable(torch.from_numpy(X)).float()</span><br><span class="line">    X = X.reshape(mb_size, <span class="number">-1</span>)</span><br><span class="line">    z = Variable(torch.randn(mb_size, z_dim))</span><br><span class="line"></span><br><span class="line">    G_sample = G(z)</span><br><span class="line">    D_fake = D(G_sample)</span><br><span class="line"></span><br><span class="line">    G_loss = -torch.mean(D_fake)</span><br><span class="line"></span><br><span class="line">    G_loss.backward()</span><br><span class="line">    G_solver.step()</span><br><span class="line"></span><br><span class="line">    reset_grad()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> it % <span class="number">1000</span> == <span class="number">0</span>:</span><br><span class="line">        print(<span class="string">'Iter-&#123;&#125;; D_loss: &#123;&#125;; G_loss: &#123;&#125;'</span></span><br><span class="line">              .format(it, D_loss.data.numpy(), G_loss.data.numpy()))</span><br><span class="line"></span><br><span class="line">        samples = G(z).data.numpy()[:<span class="number">16</span>]</span><br><span class="line"></span><br><span class="line">        fig = plt.figure(figsize=(<span class="number">4</span>, <span class="number">4</span>))</span><br><span class="line">        gs = gridspec.GridSpec(<span class="number">4</span>, <span class="number">4</span>)</span><br><span class="line">        gs.update(wspace=<span class="number">0.05</span>, hspace=<span class="number">0.05</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i, sample <span class="keyword">in</span> enumerate(samples):</span><br><span class="line">            ax = plt.subplot(gs[i])</span><br><span class="line">            plt.axis(<span class="string">'off'</span>)</span><br><span class="line">            ax.set_xticklabels([])</span><br><span class="line">            ax.set_yticklabels([])</span><br><span class="line">            ax.set_aspect(<span class="string">'equal'</span>)</span><br><span class="line">            plt.imshow(sample.reshape(<span class="number">28</span>, <span class="number">28</span>), cmap=<span class="string">'Greys_r'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">'out/'</span>):</span><br><span class="line">            os.makedirs(<span class="string">'out/'</span>)</span><br><span class="line"></span><br><span class="line">        plt.savefig(<span class="string">'out/&#123;&#125;.png'</span>.format(str(cnt).zfill(<span class="number">3</span>)), bbox_inches=<span class="string">'tight'</span>)</span><br><span class="line">        cnt += <span class="number">1</span></span><br><span class="line">        plt.close(fig)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Neural Networks</category>
        <category>GAN</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
        <tag>GAN</tag>
        <tag>Wasserstein</tag>
        <tag>WGAN</tag>
      </tags>
  </entry>
  <entry>
    <title>Wasserstein GAN implementation in TensorFlow and Pytorch</title>
    <url>/2020/10/08/Wasserstein-GAN-implementation-in-TensorFlow-and-Pytorch/</url>
    <content><![CDATA[<blockquote>
<p>æœ¬æ–‡è¯‘è‡ªï¼š<a href="https://wiseodd.github.io/techblog/2017/02/04/wasserstein-gan/" target="_blank" rel="noopener">https://wiseodd.github.io/techblog/2017/02/04/wasserstein-gan/</a></p>
</blockquote>
<p>GANç°åœ¨æ˜¯æœºå™¨å­¦ä¹ ä¸­éå¸¸å—æ¬¢è¿çš„ç ”ç©¶ä¸»é¢˜ã€‚ GANæœ‰ä¸¤ç§ç±»å‹çš„ç ”ç©¶ï¼Œä¸€ç§å°†GANåº”ç”¨åˆ°æœ‰è¶£çš„é—®é¢˜ä¸­ï¼Œå¦ä¸€ç§è¯•å›¾ç¨³å®šè®­ç»ƒã€‚</p>
<p>ç¡®å®ï¼Œç¨³å®šGANåŸ¹è®­åœ¨è¯¥é¢†åŸŸéå¸¸é‡è¦ã€‚åŸå§‹GANé‡åˆ°è®¸å¤šå›°éš¾ï¼Œä¾‹å¦‚æ¨¡å¼å´©æºƒï¼Œå³ç”Ÿæˆå™¨é™·å…¥éå¸¸ç‹­çª„çš„åˆ†å¸ƒï¼Œä»…æ¶µç›–æ•°æ®åˆ†å¸ƒä¸­çš„å•ä¸ªæ¨¡å¼ã€‚æ¨¡å¼å´©æºƒçš„å«ä¹‰æ˜¯ï¼Œç”Ÿæˆå™¨åªèƒ½ç”Ÿæˆéå¸¸ç›¸ä¼¼çš„æ ·æœ¬ï¼ˆä¾‹å¦‚MNISTä¸­çš„ä¸€ä½æ•°å­—ï¼‰ï¼Œå³ç”Ÿæˆçš„æ ·æœ¬åŒºåˆ«ä¸å¤§ã€‚è¿™ä¸ªé—®é¢˜å½“ç„¶è¿åäº†GANçš„ç²¾ç¥ã€‚</p>
<p>GANä¸­çš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæ²¡æœ‰åº¦é‡æ ‡å‡†å¯ä»¥å‘Šè¯‰æˆ‘ä»¬æœ‰å…³æ”¶æ•›çš„ä¿¡æ¯ã€‚ç”Ÿæˆå™¨å’Œé‰´åˆ«å™¨çš„æŸå¤±å¹¶æ²¡æœ‰å‘Šè¯‰æˆ‘ä»¬ä»»ä½•æœ‰å…³æ­¤çš„ä¿¡æ¯ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸æ—¶æŸ¥çœ‹å‘ç”Ÿå™¨ç”Ÿæˆçš„æ•°æ®æ¥ç›‘è§†åŸ¹è®­è¿›åº¦ã€‚ä½†æ˜¯ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸¥æ ¼çš„æ‰‹åŠ¨è¿‡ç¨‹ã€‚å› æ­¤ï¼Œæ‹¥æœ‰ä¸€ä¸ªå¯è§£é‡Šçš„æŒ‡æ ‡æ¥å‘Šè¯‰æˆ‘ä»¬æœ‰å…³åŸ¹è®­è¿›åº¦çš„ä¿¡æ¯å°†éå¸¸æ£’ã€‚</p>
<p>Note, code could be found here: <a href="https://github.com/wiseodd/generative-models" target="_blank" rel="noopener">https://github.com/wiseodd/generative-models</a></p>
<h2 id="Wasserstein-GAN"><a href="#Wasserstein-GAN" class="headerlink" title="Wasserstein GAN"></a>Wasserstein GAN</h2><p>Wasserstein GAN (WGAN) æ˜¯æ–°æå‡ºçš„ GAN ç®—æ³•æ—¨åœ¨è§£å†³ä¸Šé¢æåˆ°çš„ä¸¤ä¸ªé—®é¢˜ã€‚</p>
<p>For the intuition and theoritical background behind WGAN, redirect to <a href="https://paper.dropbox.com/doc/Wasserstein-GAN-GvU0p2V9ThzdwY3BbhoP7" target="_blank" rel="noopener">this excellent summary</a> (credits to the author).</p>
<p>ç®—æ³•å¦‚ä¸‹ï¼š</p>
<p><img src="/images/blog/2020/WGAN.PNG" alt></p>
<p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªç®—æ³•éå¸¸æ¥è¿‘åŸå§‹çš„ GANã€‚ä½†æ˜¯ï¼Œå€¼å¾—æ³¨æ„ä¸‹é¢å‡ ç‚¹ï¼š</p>
<ol>
<li>Loss å‡½æ•°ä¸­æ²¡æœ‰ logï¼Œ$D$ (åˆ¤åˆ«å™¨) çš„è¾“å‡ºä¸å†æ˜¯æ¦‚ç‡ï¼Œå› æ­¤åœ¨è¾“å‡ºå±‚ä¸ä½¿ç”¨ sigmoid å‡½æ•°</li>
<li>Clip the weight of $D$</li>
<li>Train $D$ more than $G$</li>
<li>Use RMSProp instead of ADAM</li>
<li>Lower learning rate, the paper uses $\alpha = 0.00005$<a id="more"></a></li>
</ol>
<p><br></p>
<h2 id="WGAN-TensorFlow-implementation"><a href="#WGAN-TensorFlow-implementation" class="headerlink" title="WGAN TensorFlow implementation"></a>WGAN TensorFlow implementation</h2><p>The base implementation of GAN could be found in <a href="https://wiseodd.github.io/techblog/2016/09/17/gan-tensorflow/" target="_blank" rel="noopener">the past post</a>. We need only to modify traditional GAN with respect to those items above. So first, letâ€™s update our $D$:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">""" Vanilla GAN """</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">discriminator</span><span class="params">(x)</span>:</span></span><br><span class="line">    D_h1 = tf.nn.relu(tf.matmul(x, D_W1) + D_b1)</span><br><span class="line">    out = tf.matmul(D_h1, D_W2) + D_b2</span><br><span class="line">    <span class="keyword">return</span> tf.nn.sigmoid(out)</span><br><span class="line"></span><br><span class="line"><span class="string">""" WGAN """</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">discriminator</span><span class="params">(x)</span>:</span></span><br><span class="line">    D_h1 = tf.nn.relu(tf.matmul(x, D_W1) + D_b1)</span><br><span class="line">    out = tf.matmul(D_h1, D_W2) + D_b2</span><br><span class="line">    <span class="keyword">return</span> out</span><br></pre></td></tr></table></figure>
<p>Next, we modify our loss by simply removing the <strong>log</strong>:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">""" Vanilla GAN """</span></span><br><span class="line">D_loss = -tf.reduce_mean(tf.log(D_real) + tf.log(<span class="number">1.</span> - D_fake))</span><br><span class="line">G_loss = -tf.reduce_mean(tf.log(D_fake))</span><br><span class="line"></span><br><span class="line"><span class="string">""" WGAN """</span></span><br><span class="line">D_loss = tf.reduce_mean(D_real) - tf.reduce_mean(D_fake)</span><br><span class="line">G_loss = -tf.reduce_mean(D_fake)</span><br></pre></td></tr></table></figure>
<p>We then clip the weight of $D$ after each gradient descent update:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># theta_D is list of D's params</span></span><br><span class="line">clip_D = [p.assign(tf.clip_by_value(p, <span class="number">-0.01</span>, <span class="number">0.01</span>)) <span class="keyword">for</span> p <span class="keyword">in</span> theta_D]</span><br></pre></td></tr></table></figure>
<p>Lastly, we train $D$ more:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">D_solver = (tf.train.RMSPropOptimizer(learning_rate=<span class="number">5e-5</span>)</span><br><span class="line">            .minimize(-D_loss, var_list=theta_D))</span><br><span class="line">G_solver = (tf.train.RMSPropOptimizer(learning_rate=<span class="number">5e-5</span>)</span><br><span class="line">            .minimize(G_loss, var_list=theta_G))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> it <span class="keyword">in</span> range(<span class="number">1000000</span>):</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">        X_mb, _ = mnist.train.next_batch(mb_size)</span><br><span class="line"></span><br><span class="line">        _, D_loss_curr, _ = sess.run(</span><br><span class="line">            [D_solver, D_loss, clip_D],</span><br><span class="line">            feed_dict=&#123;X: X_mb, z: sample_z(mb_size, z_dim)&#125;</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    _, G_loss_curr = sess.run(</span><br><span class="line">        [G_solver, G_loss],</span><br><span class="line">        feed_dict=&#123;z: sample_z(mb_size, z_dim)&#125;</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<p>And that is it.</p>
<p><br></p>
<h2 id="WGAN-Pytorch-implementation"><a href="#WGAN-Pytorch-implementation" class="headerlink" title="WGAN Pytorch implementation"></a>WGAN Pytorch implementation</h2><p>The base implementation of original GAN could be found in <a href="https://wiseodd.github.io/techblog/2017/01/20/gan-pytorch/" target="_blank" rel="noopener">the past post</a>. Similar to the TensorFlow version, the modifications are quite straight forward. Note the codes below are inside each training iteration.</p>
<p>First, update $D$:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">""" Vanilla GAN """</span></span><br><span class="line">D = torch.nn.Sequential(</span><br><span class="line">    torch.nn.Linear(X_dim, h_dim),</span><br><span class="line">    torch.nn.ReLU(),</span><br><span class="line">    torch.nn.Linear(h_dim, <span class="number">1</span>),</span><br><span class="line">    torch.nn.Sigmoid()</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="string">""" WGAN """</span></span><br><span class="line">D = torch.nn.Sequential(</span><br><span class="line">    torch.nn.Linear(X_dim, h_dim),</span><br><span class="line">    torch.nn.ReLU(),</span><br><span class="line">    torch.nn.Linear(h_dim, <span class="number">1</span>),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>Modifying loss:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">""" Vanilla GAN """</span></span><br><span class="line"><span class="comment"># During discriminator forward-backward-update</span></span><br><span class="line">D_loss = torch.mean(torch.log(D_real) - torch.log(<span class="number">1</span>- D_fake))</span><br><span class="line"><span class="comment"># During generator forward-backward-update</span></span><br><span class="line">G_loss = -torch.mean(torch.log(D_fake))</span><br><span class="line"></span><br><span class="line"><span class="string">""" WGAN """</span></span><br><span class="line"><span class="comment"># During discriminator forward-backward-update</span></span><br><span class="line">D_loss = -(torch.mean(D_real) - torch.mean(D_fake))</span><br><span class="line"><span class="comment"># During generator forward-backward-update</span></span><br><span class="line">G_loss = -torch.mean(D_fake)</span><br></pre></td></tr></table></figure>
<p>Weight clipping:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">D_loss.backward()</span><br><span class="line">D_solver.step()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> p <span class="keyword">in</span> D.parameters():</span><br><span class="line">    p.data.clamp_(<span class="number">-0.01</span>, <span class="number">0.01</span>)</span><br></pre></td></tr></table></figure>
<p>Train $D$ more:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">G_solver = optim.RMSprop(G.parameters(), lr=<span class="number">5e-5</span>)</span><br><span class="line">D_solver = optim.RMSprop(D.parameters(), lr=<span class="number">5e-5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> it <span class="keyword">in</span> range(<span class="number">1000000</span>):</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">        <span class="string">""" Dicriminator forward-loss-backward-update """</span></span><br><span class="line"></span><br><span class="line">    <span class="string">""" Generator forward-loss-backward-update """</span></span><br></pre></td></tr></table></figure>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ol>
<li><a href="https://arxiv.org/abs/1701.07875" target="_blank" rel="noopener">https://arxiv.org/abs/1701.07875</a></li>
<li><a href="https://paper.dropbox.com/doc/Wasserstein-GAN-GvU0p2V9ThzdwY3BbhoP7" target="_blank" rel="noopener">https://paper.dropbox.com/doc/Wasserstein-GAN-GvU0p2V9ThzdwY3BbhoP7</a></li>
</ol>
]]></content>
      <categories>
        <category>Neural Networks</category>
        <category>GAN</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
        <tag>GAN</tag>
        <tag>Loss Function</tag>
        <tag>Neural Networks</tag>
        <tag>WGAN</tag>
        <tag>Wasserstein Loss</tag>
        <tag>TensorFlow</tag>
      </tags>
  </entry>
  <entry>
    <title>DCGANçš„å®ç°åŠæ•ˆæœ</title>
    <url>/2020/10/06/DCGAN%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8F%8A%E6%95%88%E6%9E%9C/</url>
    <content><![CDATA[<p><a href="https://arxiv.org/abs/1511.06434" target="_blank" rel="noopener">DCGAN (Deep Convolutional Generative Adversarial Networks)</a> æ˜¯æœ€ç®€å•çš„GANæ¨¡å‹äº†ï¼Œä¹Ÿæ˜¯åœ¨GANä¹‹åæœ€æ—©å‡ºç°çš„å˜ç§ï¼Œåªæ˜¯æŠŠGANä¸­çš„MLPæ¢ä½œäº†å·ç§¯å±‚ä»¥åŠè½¬ç½®å·ç§¯å±‚ (Tranposed Convolution)ï¼Œä¸€ä»½ç®€æ´çš„ï¼Œä½¿ç”¨<a href="https://github.com/tensorlayer/tensorlayer" target="_blank" rel="noopener">TensorLayer</a> å®ç°çš„ç½‘ç»œç»“æ„ä¸ºï¼š</p>
<h3 id="1-ä»£ç "><a href="#1-ä»£ç " class="headerlink" title="1. ä»£ç "></a>1. ä»£ç </h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> tensorlayer <span class="keyword">as</span> tl</span><br><span class="line"><span class="keyword">from</span> tensorlayer.layers <span class="keyword">import</span> Input, Dense, DeConv2d, Reshape, BatchNorm2d, Conv2d, Flatten</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_generator</span><span class="params">(shape, gf_dim=<span class="number">64</span>)</span>:</span> <span class="comment"># Dimension of gen filters in first conv layer. [64]</span></span><br><span class="line">    image_size = <span class="number">64</span></span><br><span class="line">    s16 = image_size // <span class="number">16</span></span><br><span class="line">    <span class="comment"># w_init = tf.glorot_normal_initializer()</span></span><br><span class="line">    w_init = tf.random_normal_initializer(stddev=<span class="number">0.02</span>)  <span class="comment"># æ­£æ€åˆå§‹åŒ–</span></span><br><span class="line">    gamma_init = tf.random_normal_initializer(<span class="number">1.</span>, <span class="number">0.02</span>)</span><br><span class="line">    </span><br><span class="line">    ni = Input(shape)</span><br><span class="line">    nn = Dense(n_units=(gf_dim * <span class="number">8</span> * s16 * s16), W_init=w_init, b_init=<span class="literal">None</span>)(ni)</span><br><span class="line">    nn = Reshape(shape=[<span class="number">-1</span>, s16, s16, gf_dim*<span class="number">8</span>])(nn)</span><br><span class="line">    nn = BatchNorm2d(decay=<span class="number">0.9</span>, act=tf.nn.relu, gamma_init=gamma_init, name=<span class="literal">None</span>)(nn)</span><br><span class="line">    <span class="comment"># n_filter, filter_size, strides</span></span><br><span class="line">    nn = DeConv2d(gf_dim * <span class="number">4</span>, (<span class="number">5</span>, <span class="number">5</span>), (<span class="number">2</span>, <span class="number">2</span>), W_init=w_init, b_init=<span class="literal">None</span>)(nn)</span><br><span class="line">    nn = BatchNorm2d(decay=<span class="number">0.9</span>, act=tf.nn.relu, gamma_init=gamma_init)(nn)</span><br><span class="line">    nn = DeConv2d(gf_dim * <span class="number">2</span>, (<span class="number">5</span>, <span class="number">5</span>), (<span class="number">2</span>, <span class="number">2</span>), W_init=w_init, b_init=<span class="literal">None</span>)(nn)</span><br><span class="line">    nn = BatchNorm2d(decay=<span class="number">0.9</span>, act=tf.nn.relu, gamma_init=gamma_init)(nn)</span><br><span class="line">    nn = DeConv2d(gf_dim, (<span class="number">5</span>, <span class="number">5</span>), (<span class="number">2</span>, <span class="number">2</span>), W_init=w_init, b_init=<span class="literal">None</span>)(nn)</span><br><span class="line">    nn = BatchNorm2d(decay=<span class="number">0.9</span>, act=tf.nn.relu, gamma_init=gamma_init)(nn)</span><br><span class="line">    nn = DeConv2d(<span class="number">3</span>, (<span class="number">5</span>, <span class="number">5</span>), (<span class="number">2</span>, <span class="number">2</span>), act=tf.nn.tanh, W_init=w_init)(nn)</span><br><span class="line">    <span class="keyword">return</span> tl.models.Model(inputs=ni, outputs=nn, name=<span class="string">'generator'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_discriminator</span><span class="params">(shape, df_dim=<span class="number">64</span>)</span>:</span> <span class="comment"># Dimension of discrim filters in first conv layer. [64]</span></span><br><span class="line">    <span class="comment"># w_init = tf.glorot_normal_initializer()</span></span><br><span class="line">    w_init = tf.random_normal_initializer(stddev=<span class="number">0.02</span>)</span><br><span class="line">    gamma_init = tf.random_normal_initializer(<span class="number">1.</span>, <span class="number">0.02</span>)</span><br><span class="line">    lrelu = <span class="keyword">lambda</span> x : tf.nn.leaky_relu(x, <span class="number">0.2</span>)</span><br><span class="line"></span><br><span class="line">    ni = Input(shape)</span><br><span class="line">    nn = Conv2d(df_dim, (<span class="number">5</span>, <span class="number">5</span>), (<span class="number">2</span>, <span class="number">2</span>), act=lrelu, W_init=w_init)(ni)</span><br><span class="line">    nn = Conv2d(df_dim*<span class="number">2</span>, (<span class="number">5</span>, <span class="number">5</span>), (<span class="number">2</span>, <span class="number">2</span>), W_init=w_init, b_init=<span class="literal">None</span>)(nn)</span><br><span class="line">    nn = BatchNorm2d(decay=<span class="number">0.9</span>, act=lrelu, gamma_init=gamma_init)(nn)</span><br><span class="line">    nn = Conv2d(df_dim*<span class="number">4</span>, (<span class="number">5</span>, <span class="number">5</span>), (<span class="number">2</span>, <span class="number">2</span>), W_init=w_init, b_init=<span class="literal">None</span>)(nn)</span><br><span class="line">    nn = BatchNorm2d(decay=<span class="number">0.9</span>, act=lrelu, gamma_init=gamma_init)(nn)</span><br><span class="line">    nn = Conv2d(df_dim*<span class="number">8</span>, (<span class="number">5</span>, <span class="number">5</span>), (<span class="number">2</span>, <span class="number">2</span>), W_init=w_init, b_init=<span class="literal">None</span>)(nn)</span><br><span class="line">    nn = BatchNorm2d(decay=<span class="number">0.9</span>, act=lrelu, gamma_init=gamma_init)(nn)</span><br><span class="line">    nn = Flatten()(nn)</span><br><span class="line">    nn = Dense(n_units=<span class="number">1</span>, act=tf.identity, W_init=w_init)(nn)  </span><br><span class="line">    <span class="keyword">return</span> tl.models.Model(inputs=ni, outputs=nn, name=<span class="string">'discriminator'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="2-å®éªŒè®¾ç½®"><a href="#2-å®éªŒè®¾ç½®" class="headerlink" title="2. å®éªŒè®¾ç½®"></a>2. å®éªŒè®¾ç½®</h3><p>ä½¿ç”¨celebaæ•°æ®é›†ï¼Œæ˜¯åäºº (celebrity) äººè„¸å›¾ç‰‡æ•°æ®é›†ï¼Œå¯ä»¥åœ¨Google Driverä¸­ä¸‹è½½ï¼š</p>
<p><a href="https://drive.google.com/drive/folders/0B7EVK8r0v71pWEZsZE9oNnFzTm8" target="_blank" rel="noopener">https://drive.google.com/drive/folders/0B7EVK8r0v71pWEZsZE9oNnFzTm8</a></p>
<p>ä½¿ç”¨Nvidia TITAN RTXæ˜¾å¡ï¼Œæ˜¾å­˜ä¸º24Gï¼Œbatch_sizeè®¾ä¸º64ï¼›æ¯ä¸ªepochæœ‰3165 stepsï¼Œå…±è®­ç»ƒ25ä¸ªepochï¼Œæ¯ä¸ªepochè€—æ—¶284ç§’ï¼Œè®­ç»ƒå…±è€—æ—¶2h 3minã€‚<a id="more"></a></p>
<h3 id="3-å®éªŒæ•ˆæœ"><a href="#3-å®éªŒæ•ˆæœ" class="headerlink" title="3. å®éªŒæ•ˆæœ"></a>3. å®éªŒæ•ˆæœ</h3><p>éšæœºåˆå§‹åŒ–ç½‘ç»œå‚æ•°ï¼Œæœªç»è®­ç»ƒæ•ˆæœä¸ºï¼š</p>
<p><img src="/images/blog/2020/DCGAN/train_00.png" alt></p>
<p>è®­ç»ƒä¸€ä¸ªepochåï¼š</p>
<p><img src="/images/blog/2020/DCGAN/train_01.png" alt></p>
<p>è®­ç»ƒäº”ä¸ªepochåï¼š</p>
<p><img src="/images/blog/2020/DCGAN/train_05.png" alt></p>
<p>è®­ç»ƒç»“æŸæ—¶çš„æ•ˆæœï¼š</p>
<p><img src="/images/blog/2020/DCGAN/train_24.png" alt></p>
<h3 id="4-ç»“è®º"><a href="#4-ç»“è®º" class="headerlink" title="4. ç»“è®º"></a>4. ç»“è®º</h3><p>è®­ç»ƒæ˜¯æœ‰æ•ˆçš„ï¼Œæ¯ä¸ªepochäººè„¸é€æ¸å˜å¾—æ¸…æ™°ã€‚ä½†æœ€åçš„æ•ˆæœçœ‹èµ·æ¥ä¹Ÿä¸æ˜¯å¾ˆå¥½ğŸ˜“æˆ‘ä¸ªäººè§‰å¾—ï¼Œå¯èƒ½è¿˜æ˜¯ç½‘ç»œæ¯”è¾ƒæ—©æœŸï¼Œç›¸æ¯”äº2019å¹´çš„styleGANå·®çš„ä¸æ˜¯ä¸€ç‚¹ç‚¹ï¼ŒDCGANæ˜¯2015å¹´æå‡ºçš„ã€‚ä¸è¿‡ï¼Œè¿˜æ˜¯æœ‰æ‰€æ”¶è·çš„ï¼</p>
]]></content>
      <tags>
        <tag>GAN</tag>
        <tag>ç”Ÿæˆæ¨¡å‹</tag>
        <tag>DCGAN</tag>
      </tags>
  </entry>
  <entry>
    <title>æœåŠ¡å™¨CuDNNç‰ˆæœ¬å‡çº§</title>
    <url>/2020/10/05/%E6%9C%8D%E5%8A%A1%E5%99%A8CuDNN%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7/</url>
    <content><![CDATA[<p>æœ€è¿‘åœ¨ç”¨åˆ°tensorlayerè·‘ä»£ç æ—¶ï¼Œé‡åˆ°äº†CuDNNç‰ˆæœ¬é—®é¢˜ï¼Œç¼–è¯‘æ—¶çš„ç‰ˆæœ¬ä¸è¿è¡Œæ—¶ç‰ˆæœ¬ä¸åŒï¼Œå¯¼è‡´æŠ¥é”™ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2019-12-24 05:34:15.862520: E tensorflow/stream_executor/cuda/cuda_dnn.cc:319] Loaded runtime CuDNN library: 7.4.1 but source was compiled with: 7.6.0. CuDNN library major and minor version needs to match or have higher minor version in case of CuDNN 7.0 or later version. If using a binary install, upgrade your CuDNN library. If building from sources, make sure the library loaded at runtime is compatible with the version specified during compile configuration.</span><br></pre></td></tr></table></figure>
<p>åœ¨æœåŠ¡å™¨ä¸Šï¼Œ<strong>æ²¡æœ‰rootæƒé™</strong>ï¼Œä¹Ÿå¯ä»¥å‡çº§CuDNNç‰ˆæœ¬ï¼Œå…·ä½“æ“ä½œä¸‹é¢ç»™å‡ºã€‚</p>
<h3 id="1-ä¸‹è½½CuDNN"><a href="#1-ä¸‹è½½CuDNN" class="headerlink" title="1. ä¸‹è½½CuDNN"></a>1. ä¸‹è½½CuDNN</h3><p>ç½‘å€ä¸ºï¼š<a href="https://developer.nvidia.com/cudnn" target="_blank" rel="noopener">https://developer.nvidia.com/cudnn</a></p>
<p>éœ€è¦å…ˆæ³¨å†Œï¼Œä¹‹åé€‰æ‹©<font color="#4fff60">cnDNN Library for Linux</font></p>
<h3 id="2-è§£å‹å®‰è£…"><a href="#2-è§£å‹å®‰è£…" class="headerlink" title="2. è§£å‹å®‰è£…"></a>2. è§£å‹å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -xzvf cudnn*</span><br></pre></td></tr></table></figure>
<p>å¾—åˆ°ä¸€ä¸ªåä¸ºcudaçš„æ–‡ä»¶å¤¹</p>
<h3 id="3-é…ç½®ç¯å¢ƒå˜é‡"><a href="#3-é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="3. é…ç½®ç¯å¢ƒå˜é‡"></a>3. é…ç½®ç¯å¢ƒå˜é‡</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim ~/.bashrc</span><br></pre></td></tr></table></figure>
<p>åœ¨æœ«å°¾åŠ ä¸Šï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:/home/xxx/cuda/lib64"</span><br></pre></td></tr></table></figure>
<p>æœ€åæ¿€æ´»ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure>
<p>åˆ°è¿™é‡Œå°±å¤§åŠŸå‘Šæˆäº†ï¼</p>
<h3 id="4-éªŒè¯"><a href="#4-éªŒè¯" class="headerlink" title="4. éªŒè¯"></a>4. éªŒè¯</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo $LD_LIBRARY_PATH</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºä¸­åŒ…å«<code>/home/xxx/cuda/lib64</code>ï¼Œè¯æ˜æ¿€æ´»æˆåŠŸã€‚</p>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>cuda</tag>
        <tag>cudnn</tag>
        <tag>NVIDIA</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥ç†è§£Batch Normalization</title>
    <url>/2020/10/03/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Batch-Normalization/</url>
    <content><![CDATA[<p>Batch Normalizationå…·æœ‰å¯ä»¥å¢å¼ºç¥ç»ç½‘ç»œçš„ç¨³å®šæ€§ï¼ŒåŠ é€Ÿç¥ç»ç½‘ç»œè®­ç»ƒç­‰ä¼˜ç‚¹ï¼Œä½†ä¸€ç›´æ²¡æœ‰æ·±å…¥è¯¦ç»†åœ°äº†è§£è¿‡å…¶åŸç†ä¸å®ç°ã€‚é€šè¿‡<a href>coursera</a>çš„<font color="#0077dd">Generative Adversarial Networks (GANs)</font>ä¸“é¡¹è¯¾ç¨‹ï¼Œè¾ƒä¸ºæ·±å…¥çš„å­¦ä¹ äº†Batch Normalizationï¼Œåœ¨æ­¤è®°å½•ã€‚</p>
<p>&lt;/br&gt;</p>
<h3 id="1-åŸç†"><a href="#1-åŸç†" class="headerlink" title="1. åŸç†"></a>1. åŸç†</h3><p>å‡è®¾æœ‰ä¸€ä¸ªå¾ˆç®€å•çš„ç¥ç»ç½‘ç»œï¼Œè¾“å…¥ä¸ºå‘é‡$[x_1, x_2]$ï¼Œè¾“å‡ºä¸ºä¸€åªçŒ«çš„æ¦‚ç‡ã€‚</p>
<p><img src="/images/blog/2020/BN/network.PNG" alt></p>
<p>è€Œ$x_1,x_2$ä¸¤ä¸ªç»´åº¦çš„åˆ†å¸ƒæ˜¯ä¸åŒçš„ï¼Œå‡è®¾ä¸¤è€…å‡æœä»æ­£æ€åˆ†å¸ƒï¼Œ$x_2$çš„$\mu$å€¼æ›´å¤§ï¼Œ$\sigma$æ›´å°ï¼š</p>
<p><img src="/images/blog/2020/BN/x1.PNG" alt></p>
<p>è¿™å¯¼è‡´æŸå¤±å‡½æ•°è¢«æ‹‰é•¿ï¼Œ</p>
<blockquote>
<p>So that changes to the weights relating to each of the inputs will have kind of </p>
<p>a different effect of varying impact on this cost function.</p>
</blockquote>
<p>å¹¶ä¸”å¯¼è‡´è®­ç»ƒå˜å¾—å›°éš¾ï¼Œç½‘ç»œæ”¶æ•›æ›´æ…¢è€Œä¸”æ›´ä¾èµ–å‚æ•°åˆå§‹åŒ–çš„æ•ˆæœã€‚</p>
<p><img src="/images/blog/2020/BN/costfunction.PNG" alt></p>
<hr>
<p>å¦å¤–ï¼Œç”±äºæµ‹è¯•é›†ä¸è®­ç»ƒé›†å¯èƒ½å­˜åœ¨æ•°æ®åˆ†å¸ƒçš„ä¸ä¸€è‡´ï¼Œå³ï¼š</p>
<p><img src="/images/blog/2020/BN/shift.PNG" alt></p>
<p>ä¼šå¯¼è‡´æŸå¤±å‡½æ•°çš„å˜åŒ–ï¼š</p>
<p><img src="/images/blog/2020/BN/costshift.PNG" alt></p>
<p>è¿™ç§ç°è±¡å«åš<strong>covariate shift</strong>ã€‚<font color="orange">å¦‚æœå¯¹$[x_1, x_2]$è¿›è¡Œè§„èŒƒåŒ–ï¼Œé‚£ä¹ˆæ•°æ®åˆ†å¸ƒä¼šè¾ƒä¸ºå¹³è¡¡ï¼Œå¹¶ä¸”æŸå¤±å‡½æ•°æ›´é¡ºæ»‘ï¼Œè®­ç»ƒç¥ç»ç½‘ç»œä¼šæ›´ç®€å•ã€æ›´å¿«é€Ÿã€‚</font><a id="more"></a></p>
<p><img src="/images/blog/2020/BN/norm.PNG" alt></p>
<p>&lt;/br&gt;</p>
<h3 id="2-Training-Procedure"><a href="#2-Training-Procedure" class="headerlink" title="2. Training Procedure"></a>2. Training Procedure</h3><font color="#ff0077">Batch Normalizationæ˜¯é’ˆå¯¹**ç‰¹å¾**è¿›è¡Œçš„ã€‚</font>

<p><img src="/images/blog/2020/BN/training.PNG" alt></p>
<p>è®¡ç®—å‡ºå¹³å‡å€¼$\mu$å’Œæ ‡å‡†å·®$\sigma$ï¼ŒæŒ‰ç…§ä»¥ä¸‹å…¬å¼è§„èŒƒåŒ–ï¼š</p>
<script type="math/tex; mode=display">
\hat{z}_i^{[l]} = \frac{z_i^{[l]} - \mu _ {z_i^{[l]}}} {\sqrt{\sigma _ {z_i^{[l]}}^{2} + \epsilon}}</script><blockquote>
<p>After you get the normalized value z-hat, you have learned perimeters </p>
<p>in the batch normalization layer. What that means is that you will </p>
<p>have a value called Beta, which will be the shift factor and Gamma, </p>
<p>which will be the scale factor. These parameters are learned during training to ensure that </p>
<p>the distribution to which youâ€™re transforming z is the optimal one for your task.</p>
</blockquote>
<script type="math/tex; mode=display">
y_i^{[l]} = \gamma \hat{z}_i ^{[l]} + \beta</script><p><strong>è¿™æ˜¯æ™®é€šçš„è§„èŒƒåŒ–ä¸Batch Normalizationçš„æ ¹æœ¬åŒºåˆ«ã€‚</strong></p>
<p>&lt;/br&gt;</p>
<h3 id="3-Testing-Procedure"><a href="#3-Testing-Procedure" class="headerlink" title="3. Testing Procedure"></a>3. Testing Procedure</h3><p>åœ¨æµ‹è¯•æ—¶ï¼ŒæŒ‰ç…§åŒæ ·çš„æ–¹æ³•è®¡ç®—å¹³å‡å€¼$\mu$å’Œæ ‡å‡†å·®$\sigma$ï¼Œ<strong>ä½†æ˜¯$\gamma$å’Œ$\beta$æ˜¯å›ºå®šçš„</strong>ï¼Œæ˜¯è®­ç»ƒæ—¶çš„æœ€ä¼˜å€¼ã€‚</p>
]]></content>
      <categories>
        <category>Neural Networks</category>
      </categories>
      <tags>
        <tag>Neural Networks</tag>
        <tag>è§„èŒƒåŒ–</tag>
        <tag>Batch Normalization</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¨¡æ‹Ÿé€€ç«ç®—æ³•</title>
    <url>/2020/10/03/%E6%A8%A1%E6%8B%9F%E9%80%80%E7%81%AB%E7%AE%97%E6%B3%95/</url>
    <content><![CDATA[<p>æ€»æ˜¯åœ¨ä¸€äº›æ·±åº¦å­¦ä¹ ç›¸å…³çš„åšå®¢ã€æ–‡ç« ä¸­çœ‹åˆ°<strong>æ¨¡æ‹Ÿé€€ç«</strong>ç®—æ³•ï¼Œè¿™ä¸ªåå­—è®©äººæ„Ÿè§‰äº‘é‡Œé›¾é‡Œï¼Œä¸æ˜ç™½æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä»Šå¤©æŸ¥è¯¢äº†ä¸€ä¸‹ï¼Œåšä¸€ä¸ªè®°å½•ï¼Œä»¥å¤‡ä»¥åç”¨åˆ°ã€‚<font color="orange">ç®€å•ç²—æš´ï¼Œç›´æ¥ç»™å‡ºä¼ªä»£ç </font>ï¼š</p>
<hr>
<p>å¯»æ‰¾èƒ½é‡$E(s)$æœ€ä½çš„çŠ¶æ€$s$</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = s0, e = E(s)  <span class="comment"># è®¾å®šç›®å‰çŠ¶æ€ä¸ºs0ï¼Œèƒ½é‡ä¸ºE(s0)</span></span><br><span class="line">k = <span class="number">0</span>  <span class="comment"># è¯„ä¼°æ¬¡æ•°k</span></span><br><span class="line"><span class="keyword">while</span> k &lt; kmax <span class="keyword">and</span> e &gt; emin:  <span class="comment"># è‹¥è¿˜æœ‰æ—¶é—´ (k &gt; kmax) è€Œä¸”ç»“æœè¿˜ä¸å¤Ÿå¥½ (e &gt; emin) åˆ™ï¼š</span></span><br><span class="line">    sn = neighbour(s)  <span class="comment"># éšæœºé€‰å–ä¸€ä¸´è¿‘çŠ¶æ€sn</span></span><br><span class="line">    en = E(sn)  <span class="comment"># snçš„èƒ½é‡ä¸ºE(sn)</span></span><br><span class="line">    <span class="keyword">if</span> random() &lt; P(e, en, temp(k / kmax)):  <span class="comment"># å†³å®šæ˜¯å¦ç§»è‡³ä¸´è¿‘çŠ¶æ€sn</span></span><br><span class="line">        s = sn  <span class="comment"># ç§»è‡³ä¸´è¿‘çŠ¶æ€sn</span></span><br><span class="line">        e = en</span><br><span class="line">    k = k + <span class="number">1</span>  <span class="comment"># è¯„ä¼°å®Œæˆï¼Œæ¬¡æ•°kåŠ ä¸€</span></span><br><span class="line"><span class="keyword">return</span> s  <span class="comment"># å›ä¼ çŠ¶æ€s</span></span><br></pre></td></tr></table></figure>
<hr>
<p>é‡ç‚¹åº”è¯¥æ˜¯$neighbor()$å‡½æ•°ã€$temp()$å‡½æ•°ä»¥åŠ$P(e, en , temp(k / kmax))$æ¦‚ç‡åˆ†å¸ƒå‡½æ•°ã€‚</p>
]]></content>
      <categories>
        <category>Algorithms</category>
      </categories>
      <tags>
        <tag>Algorithms</tag>
        <tag>æ¨¡æ‹Ÿé€€ç«</tag>
        <tag>ç®—æ³•</tag>
        <tag>Simulated Annealing</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ©ç”¨Freebaseè¿œç¨‹ç›‘ç£-SPARQLæŸ¥è¯¢</title>
    <url>/2020/09/26/%E5%88%A9%E7%94%A8Freebase%E8%BF%9C%E7%A8%8B%E7%9B%91%E7%9D%A3-SPARQL%E6%9F%A5%E8%AF%A2/</url>
    <content><![CDATA[<p>åœ¨DisFebå®éªŒä¸­ï¼Œéœ€è¦åˆ©ç”¨è¿œç¨‹ç›‘ç£ç”Ÿæˆæ•°æ®ï¼Œå› æ­¤è®°å½•ä¸€ä¸‹<a href>Freebase</a>çš„æŸ¥è¯¢æ–¹æ³•ï¼š</p>
<p>åœ¨ä¸ªäººå®éªŒä¸­ï¼Œé‡‡ç”¨ä¸‹é¢5ç§å…³ç³»ä½œä¸ºdemoï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/business/company/place_founded</span><br><span class="line">/location/administrative_division/country</span><br><span class="line">/location/country/capital</span><br><span class="line">/people/deceased_person/place_of_death</span><br><span class="line">/people/person/children</span><br></pre></td></tr></table></figure>
<p>ä»¥<code>/location/country/capital</code>ä¸ºä¾‹ï¼Œä»‹ç»æŸ¥è¯¢è¿‡ç¨‹ï¼š</p>
<h4 id="1-æŸ¥è¯¢å¤´å°¾å®ä½“"><a href="#1-æŸ¥è¯¢å¤´å°¾å®ä½“" class="headerlink" title="1. æŸ¥è¯¢å¤´å°¾å®ä½“"></a>1. æŸ¥è¯¢å¤´å°¾å®ä½“</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select *</span><br><span class="line">where</span><br><span class="line">&#123;</span><br><span class="line">	?s &lt;http://rdf.freebase.com/ns/location.country.capital&gt; ?o</span><br><span class="line">&#125;</span><br><span class="line">limit 100</span><br></pre></td></tr></table></figure>
<p>å¾—åˆ°ç»“æœï¼š</p>
<p><img src="/images/blog/2020/head_tail.PNG" alt></p>
<a id="more"></a>
<h4 id="2-æŸ¥è¯¢å­—é¢é‡"><a href="#2-æŸ¥è¯¢å­—é¢é‡" class="headerlink" title="2. æŸ¥è¯¢å­—é¢é‡"></a>2. æŸ¥è¯¢å­—é¢é‡</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select *</span><br><span class="line">where</span><br><span class="line">&#123;</span><br><span class="line">	&lt;http://rdf.freebase.com/ns/m.02psqkz&gt; </span><br><span class="line">	&lt;http://rdf.freebase.com/ns/type.object.name&gt; </span><br><span class="line">	?o</span><br><span class="line">&#125;</span><br><span class="line">limit 100</span><br></pre></td></tr></table></figure>
<p>æŸ¥è¯¢ç»“æœä¸ºï¼š</p>
<p><img src="/images/blog/2020/head_name.jpg" alt></p>
<p>å¤´å®ä½“å¯¹åº”çš„ä¸­æ–‡åç§°ä¸ºâ€œæ„å¤§åˆ©ç‹å›½â€ã€‚å°¾å®ä½“å­—é¢é‡çš„æŸ¥è¯¢ä¸å¤´å®ä½“åŒç†ï¼ŒæŸ¥è¯¢ç»“æœä¸ºï¼š</p>
<p><img src="/images/blog/2020/tail_name.PNG" alt></p>
<p>å¾—åˆ°äº†ä¸€ä¸ªæ­£ç¡®çš„ä¸‰å…ƒç»„$(æ„å¤§åˆ©ï¼Œ/location/country/capitalï¼Œä½›ç½—ä¼¦è¨)$ï¼Œæ¥ä¸‹æ¥å¯ä»¥ç”¨ <em>æ„å¤§åˆ©</em> å’Œ <em>ä½›ç½—ä¼¦è¨</em> åšè¿œç¨‹ç›‘ç£äº†ã€‚</p>
<h4 id="é™„è¡¨"><a href="#é™„è¡¨" class="headerlink" title="é™„è¡¨"></a>é™„è¡¨</h4><p>åœ¨NYT10æ•°æ®é›†ä¸­ï¼Œåˆ©ç”¨çš„è¿œç¨‹ç›‘ç£<font color="green">å…³ç³»ç±»åˆ«</font>åŠ<font color="green">æ•°é‡ç»Ÿè®¡</font>ä¸ºï¼š</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">('/broadcast/content/location', 8)</span><br><span class="line">('/broadcast/producer/location', 71)</span><br><span class="line">('/business/business_location/parent_company', 19)</span><br><span class="line">('/business/company/advisors', 9)</span><br><span class="line">('/business/company/founders', 901)</span><br><span class="line">('/business/company/locations', 19)</span><br><span class="line">('/business/company/major_shareholders', 328)</span><br><span class="line">('/business/company/place_founded', 648)</span><br><span class="line">('/business/company_advisor/companies_advised', 2)</span><br><span class="line">('/business/person/company', 7336)</span><br><span class="line">('/business/shopping_center/owner', 1)</span><br><span class="line">('/business/shopping_center_owner/shopping_centers_owned', 1)</span><br><span class="line">('/film/film/featured_film_locations', 18)</span><br><span class="line">('/film/film_festival/location', 4)</span><br><span class="line">('/film/film_location/featured_in_films', 18)</span><br><span class="line">('/location/administrative_division/country', 7286)</span><br><span class="line">('/location/br_state/capital', 4)</span><br><span class="line">('/location/cn_province/capital', 2)</span><br><span class="line">('/location/country/administrative_divisions', 7286)</span><br><span class="line">('/location/country/capital', 8883)</span><br><span class="line">('/location/de_state/capital', 7)</span><br><span class="line">('/location/fr_region/capital', 1)</span><br><span class="line">('/location/in_state/administrative_capital', 4)</span><br><span class="line">('/location/in_state/judicial_capital', 3)</span><br><span class="line">('/location/in_state/legislative_capital', 4)</span><br><span class="line">('/location/it_region/capital', 22)</span><br><span class="line">('/location/jp_prefecture/capital', 2)</span><br><span class="line">('/location/location/contains', 66721)</span><br><span class="line">('/location/mx_state/capital', 1)</span><br><span class="line">('/location/neighborhood/neighborhood_of', 9275)</span><br><span class="line">('/location/province/capital', 39)</span><br><span class="line">('/location/us_county/county_seat', 110)</span><br><span class="line">('/location/us_state/capital', 798)</span><br><span class="line">('/people/deceased_person/place_of_burial', 24)</span><br><span class="line">('/people/deceased_person/place_of_death', 2422)</span><br><span class="line">('/people/ethnicity/geographic_distribution', 86)</span><br><span class="line">('/people/ethnicity/included_in_group', 7)</span><br><span class="line">('/people/family/country', 6)</span><br><span class="line">('/people/family/members', 4)</span><br><span class="line">('/people/person/children', 622)</span><br><span class="line">('/people/person/ethnicity', 148)</span><br><span class="line">('/people/person/nationality', 9733)</span><br><span class="line">('/people/person/place_lived', 8907)</span><br><span class="line">('/people/person/place_of_birth', 4053)</span><br><span class="line">('/people/person/profession', 10)</span><br><span class="line">('/people/person/religion', 202)</span><br><span class="line">('/people/place_of_interment/interred_here', 24)</span><br><span class="line">('/people/profession/people_with_this_profession', 2)</span><br><span class="line">('/sports/sports_team/location', 294)</span><br><span class="line">('/time/event/locations', 4)</span><br><span class="line">('NA', 385664)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
      </categories>
      <tags>
        <tag>Freebase</tag>
        <tag>SPARQL</tag>
        <tag>Relation Extraction</tag>
        <tag>Distant Supervision</tag>
        <tag>å…³ç³»æŠ½å–</tag>
        <tag>è¿œç¨‹ç›‘ç£</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”Ÿæˆå¯¹æŠ—ç½‘ç»œ(GAN)åˆæ¢</title>
    <url>/2020/09/23/%E7%94%9F%E6%88%90%E5%AF%B9%E6%8A%97%E7%BD%91%E7%BB%9C-GAN-%E5%88%9D%E6%8E%A2/</url>
    <content><![CDATA[<p>ä¸€ç›´å¯¹GANå³ç”Ÿæˆå¯¹æŠ—ç½‘ç»œå¾ˆæ„Ÿå…´è¶£ï¼Œéšç€ç§‘ç ”çš„è¿›å±•ï¼Œè¿‘æœŸå¯èƒ½ä¼šç”¨åˆ°GANæ¥åšæ–‡æœ¬æ•°æ®çš„å¢å¼ºå’Œå»å™ªï¼Œæ‰€ä»¥ç®€å•å°è¯•äº†ä¸€ä¸‹ï¼ŒçœŸçš„å¾ˆæœ‰æ„æ€ï¼ğŸ˜„</p>
<p>æ¨èä¸¤ä¸ªGANçš„GitHubä»£ç åº“ï¼š</p>
<p><a href="https://github.com/eriklindernoren/PyTorch-GAN" target="_blank" rel="noopener">https://github.com/eriklindernoren/PyTorch-GAN</a></p>
<p><a href="https://github.com/eriklindernoren/Keras-GAN" target="_blank" rel="noopener">https://github.com/eriklindernoren/Keras-GAN</a></p>
<p>ä¸‹é¢ç”¨<strong>MNIST</strong>æ¥åšå®éªŒï¼Œä½¿ç”¨çš„æ˜¯generatorå’Œdiscriminatorå‡ä¸ºå¤šå±‚æ„ŸçŸ¥æœºçš„æœ€ç®€å•çš„GANç½‘ç»œï¼Œä»£ç éå¸¸æ˜“è¯»ï¼Œå°±ä¸è¿‡å¤šè§£é‡Šäº†ï¼š<a id="more"></a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function, division</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> keras.datasets <span class="keyword">import</span> mnist</span><br><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> Input, Dense, Reshape, Flatten, Dropout</span><br><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> BatchNormalization, Activation, ZeroPadding2D</span><br><span class="line"><span class="keyword">from</span> keras.layers.advanced_activations <span class="keyword">import</span> LeakyReLU</span><br><span class="line"><span class="keyword">from</span> keras.layers.convolutional <span class="keyword">import</span> UpSampling2D, Conv2D</span><br><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> Sequential, Model</span><br><span class="line"><span class="keyword">from</span> keras.optimizers <span class="keyword">import</span> Adam</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GAN</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.img_rows = <span class="number">28</span></span><br><span class="line">        self.img_cols = <span class="number">28</span></span><br><span class="line">        self.channels = <span class="number">1</span></span><br><span class="line">        self.img_shape = (self.img_rows, self.img_cols, self.channels)</span><br><span class="line">        self.latent_dim = <span class="number">100</span></span><br><span class="line"></span><br><span class="line">        optimizer = Adam(<span class="number">0.0002</span>, <span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Build and compile the discriminator</span></span><br><span class="line">        self.discriminator = self.build_discriminator()</span><br><span class="line">        self.discriminator.compile(loss=<span class="string">'binary_crossentropy'</span>,</span><br><span class="line">            optimizer=optimizer,</span><br><span class="line">            metrics=[<span class="string">'accuracy'</span>])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Build the generator</span></span><br><span class="line">        self.generator = self.build_generator()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># The generator takes noise as input and generates imgs</span></span><br><span class="line">        z = Input(shape=(self.latent_dim,))</span><br><span class="line">        img = self.generator(z)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># For the combined model we will only train the generator</span></span><br><span class="line">        self.discriminator.trainable = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># The discriminator takes generated images as input and determines validity</span></span><br><span class="line">        validity = self.discriminator(img)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># The combined model  (stacked generator and discriminator)</span></span><br><span class="line">        <span class="comment"># Trains the generator to fool the discriminator</span></span><br><span class="line">        self.combined = Model(z, validity)</span><br><span class="line">        self.combined.compile(loss=<span class="string">'binary_crossentropy'</span>, optimizer=optimizer)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">build_generator</span><span class="params">(self)</span>:</span></span><br><span class="line"></span><br><span class="line">        model = Sequential()</span><br><span class="line"></span><br><span class="line">        model.add(Dense(<span class="number">256</span>, input_dim=self.latent_dim))</span><br><span class="line">        model.add(LeakyReLU(alpha=<span class="number">0.2</span>))</span><br><span class="line">        model.add(BatchNormalization(momentum=<span class="number">0.8</span>))</span><br><span class="line">        model.add(Dense(<span class="number">512</span>))</span><br><span class="line">        model.add(LeakyReLU(alpha=<span class="number">0.2</span>))</span><br><span class="line">        model.add(BatchNormalization(momentum=<span class="number">0.8</span>))</span><br><span class="line">        model.add(Dense(<span class="number">1024</span>))</span><br><span class="line">        model.add(LeakyReLU(alpha=<span class="number">0.2</span>))</span><br><span class="line">        model.add(BatchNormalization(momentum=<span class="number">0.8</span>))</span><br><span class="line">        model.add(Dense(np.prod(self.img_shape), activation=<span class="string">'tanh'</span>))</span><br><span class="line">        model.add(Reshape(self.img_shape))</span><br><span class="line"></span><br><span class="line">        model.summary()</span><br><span class="line"></span><br><span class="line">        noise = Input(shape=(self.latent_dim,))</span><br><span class="line">        img = model(noise)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Model(noise, img)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">build_discriminator</span><span class="params">(self)</span>:</span></span><br><span class="line"></span><br><span class="line">        model = Sequential()</span><br><span class="line"></span><br><span class="line">        model.add(Flatten(input_shape=self.img_shape))</span><br><span class="line">        model.add(Dense(<span class="number">512</span>))</span><br><span class="line">        model.add(LeakyReLU(alpha=<span class="number">0.2</span>))</span><br><span class="line">        model.add(Dense(<span class="number">256</span>))</span><br><span class="line">        model.add(LeakyReLU(alpha=<span class="number">0.2</span>))</span><br><span class="line">        model.add(Dense(<span class="number">1</span>, activation=<span class="string">'sigmoid'</span>))</span><br><span class="line">        model.summary()</span><br><span class="line"></span><br><span class="line">        img = Input(shape=self.img_shape)</span><br><span class="line">        validity = model(img)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Model(img, validity)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">train</span><span class="params">(self, epochs, batch_size=<span class="number">128</span>, sample_interval=<span class="number">50</span>)</span>:</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Load the dataset</span></span><br><span class="line">        (X_train, _), (_, _) = mnist.load_data()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Rescale -1 to 1</span></span><br><span class="line">        X_train = X_train / <span class="number">127.5</span> - <span class="number">1.</span></span><br><span class="line">        X_train = np.expand_dims(X_train, axis=<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Adversarial ground truths</span></span><br><span class="line">        valid = np.ones((batch_size, <span class="number">1</span>))</span><br><span class="line">        fake = np.zeros((batch_size, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> epoch <span class="keyword">in</span> range(epochs):</span><br><span class="line"></span><br><span class="line">            <span class="comment"># ---------------------</span></span><br><span class="line">            <span class="comment">#  Train Discriminator</span></span><br><span class="line">            <span class="comment"># ---------------------</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># Select a random batch of images</span></span><br><span class="line">            idx = np.random.randint(<span class="number">0</span>, X_train.shape[<span class="number">0</span>], batch_size)</span><br><span class="line">            imgs = X_train[idx]</span><br><span class="line"></span><br><span class="line">            noise = np.random.normal(<span class="number">0</span>, <span class="number">1</span>, (batch_size, self.latent_dim))</span><br><span class="line"></span><br><span class="line">            <span class="comment"># Generate a batch of new images</span></span><br><span class="line">            gen_imgs = self.generator.predict(noise)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># Train the discriminator</span></span><br><span class="line">            d_loss_real = self.discriminator.train_on_batch(imgs, valid)</span><br><span class="line">            d_loss_fake = self.discriminator.train_on_batch(gen_imgs, fake)</span><br><span class="line">            d_loss = <span class="number">0.5</span> * np.add(d_loss_real, d_loss_fake)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># ---------------------</span></span><br><span class="line">            <span class="comment">#  Train Generator</span></span><br><span class="line">            <span class="comment"># ---------------------</span></span><br><span class="line"></span><br><span class="line">            noise = np.random.normal(<span class="number">0</span>, <span class="number">1</span>, (batch_size, self.latent_dim))</span><br><span class="line"></span><br><span class="line">            <span class="comment"># Train the generator (to have the discriminator label samples as valid)</span></span><br><span class="line">            g_loss = self.combined.train_on_batch(noise, valid)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># Plot the progress</span></span><br><span class="line">            <span class="keyword">print</span> (<span class="string">"%d [D loss: %f, acc.: %.2f%%] [G loss: %f]"</span> % (epoch, d_loss[<span class="number">0</span>], <span class="number">100</span>*d_loss[<span class="number">1</span>], g_loss))</span><br><span class="line"></span><br><span class="line">            <span class="comment"># If at save interval =&gt; save generated image samples</span></span><br><span class="line">            <span class="keyword">if</span> epoch % sample_interval == <span class="number">0</span>:</span><br><span class="line">                self.sample_images(epoch)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sample_images</span><span class="params">(self, epoch)</span>:</span></span><br><span class="line">        r, c = <span class="number">5</span>, <span class="number">5</span></span><br><span class="line">        noise = np.random.normal(<span class="number">0</span>, <span class="number">1</span>, (r * c, self.latent_dim))</span><br><span class="line">        gen_imgs = self.generator.predict(noise)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Rescale images 0 - 1</span></span><br><span class="line">        gen_imgs = <span class="number">0.5</span> * gen_imgs + <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line">        fig, axs = plt.subplots(r, c)</span><br><span class="line">        cnt = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(r):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(c):</span><br><span class="line">                axs[i,j].imshow(gen_imgs[cnt, :,:,<span class="number">0</span>], cmap=<span class="string">'gray'</span>)</span><br><span class="line">                axs[i,j].axis(<span class="string">'off'</span>)</span><br><span class="line">                cnt += <span class="number">1</span></span><br><span class="line">        fig.savefig(<span class="string">"images/%d.png"</span> % epoch)</span><br><span class="line">        plt.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    gan = GAN()</span><br><span class="line">    gan.train(epochs=<span class="number">30000</span>, batch_size=<span class="number">32</span>, sample_interval=<span class="number">200</span>)</span><br></pre></td></tr></table></figure>
<p>GANå¯ä»¥åˆ©ç”¨è¾“å…¥çš„é«˜æ–¯åˆ†å¸ƒçš„å™ªå£°æ•°æ®ç”Ÿæˆå›¾ç‰‡ï¼Œæƒ³æƒ³éƒ½æ˜¯å¾ˆç¥å¥‡çš„äº‹æƒ…~</p>
<font color="orange">å®éªŒæ•ˆæœå¾ˆæ˜æ˜¾ï¼š</font>



<p>æ²¡æœ‰è®­ç»ƒæ—¶ç”Ÿæˆçš„å›¾ç‰‡ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯ä¸€ç‰‡å™ªå£°ï¼Œåƒæ˜¯ç”µè§†æ²¡ä¿¡å·æ—¶çš„é›ªèŠ±æ–‘ç‚¹ï¼š</p>
<p><img src="/images/blog/2020/0.png" alt></p>
<p>ç”±äºMNISTæ•°æ®é›†å¾ˆå°ï¼Œæˆ‘åœ¨cpuä¸Šè®­ç»ƒï¼Œå¹³å‡<code>35.7 steps/s</code></p>
<p>ç»è¿‡1000ä¸ªstepåï¼Œç”Ÿæˆçš„å›¾ç‰‡ï¼š</p>
<p><img src="/images/blog/2020/1000.png" alt></p>
<font color="green">ç»è¿‡3000ä¸ªstepåï¼Œç”Ÿæˆçš„å›¾ç‰‡ï¼Œå·²ç»å¯ä»¥çœ‹å‡ºæ•°å­—äº†ï¼š</font>

<p><img src="/images/blog/2020/3000.png" alt></p>
<p>ç»è¿‡10000ä¸ªstepåï¼Œç”Ÿæˆçš„å›¾ç‰‡ï¼š</p>
<p><img src="/images/blog/2020/10000.png" alt></p>
<p>ç»è¿‡20000ä¸ªstepåï¼Œç”Ÿæˆçš„å›¾ç‰‡ï¼š</p>
<p><img src="/images/blog/2020/20000.png" alt></p>
<font color="orange">ç»è¿‡30000ä¸ªstepåï¼Œç”Ÿæˆçš„å›¾ç‰‡ï¼Œå·²ç»æ˜¯éå¸¸æ¥è¿‘real imageäº†ï¼ŒğŸ˜€æ•ˆæœå¾ˆå¥½ï¼š</font>

<p><img src="/images/blog/2020/29800.png" alt></p>
<p>ç”±äºå›¾åƒå¯ä»¥ç›´æ¥ç”¨æ•°å­—çŸ©é˜µè¡¨ç¤ºï¼Œè€Œæ–‡æœ¬æ•°æ®éœ€è¦é¦–å…ˆè½¬åŒ–ä¸ºå‘é‡ï¼Œç„¶åå†è¿›è¡Œè®¡ç®—ï¼Œæ‰€ä»¥å­˜åœ¨ä¸€ä¸ªå¤©ç„¶çš„gapï¼Œè¿˜éœ€è¦ä»”ç»†æ€è€ƒå¦‚ä½•å°†GANå¦‚æ­¤å¼ºå¤§çš„åˆ©å™¨ç”¨åˆ°NLPä¸­~</p>
]]></content>
      <categories>
        <category>Neural Networks</category>
        <category>GAN</category>
      </categories>
      <tags>
        <tag>GAN</tag>
        <tag>ç”Ÿæˆå¯¹æŠ—ç½‘ç»œ</tag>
        <tag>ç”Ÿæˆæ¨¡å‹</tag>
        <tag>Generative Adversarial Networks</tag>
        <tag>MNIST</tag>
      </tags>
  </entry>
  <entry>
    <title>tensorboard projector ä¸æ˜¾ç¤ºé—®é¢˜</title>
    <url>/2020/09/21/tensorboard-projector-%E4%B8%8D%E6%98%BE%E7%A4%BA%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h2 id="1-é—®é¢˜"><a href="#1-é—®é¢˜" class="headerlink" title="1. é—®é¢˜"></a>1. é—®é¢˜</h2><p>ä½¿ç”¨Pytorchçš„è¿‡ç¨‹ä¸­ï¼Œæƒ³è¦å°†å¾—åˆ°çš„å¥å­å‘é‡å¯è§†åŒ–æ˜¾ç¤ºï¼ŒæŸ¥çœ‹ç‰¹å¾å‘é‡åœ¨ç‰¹å¾ç©ºé—´ä¸­çš„åˆ†å¸ƒæƒ…å†µï¼Œä½†æ˜¯åœ¨ä½¿ç”¨tensorboardå¯è§†åŒ–è¿‡ç¨‹ä¸­ï¼Œå´æ˜¾ç¤ºç©ºç™½ã€‚</p>
<h2 id="2-è§£å†³æ–¹æ¡ˆ"><a href="#2-è§£å†³æ–¹æ¡ˆ" class="headerlink" title="2. è§£å†³æ–¹æ¡ˆ"></a>2. è§£å†³æ–¹æ¡ˆ</h2><h3 id="2-1-ç‰ˆæœ¬é—®é¢˜"><a href="#2-1-ç‰ˆæœ¬é—®é¢˜" class="headerlink" title="2.1 ç‰ˆæœ¬é—®é¢˜"></a>2.1 ç‰ˆæœ¬é—®é¢˜</h3><p>å¯èƒ½æ˜¯å› ä¸ºtensorboardç‰ˆæœ¬é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰å†™çš„ä¸€ç¯‡æ–‡ç« <a href="https://haokailong.top/2020/09/05/tensorboard%E6%98%BE%E7%A4%BA%E7%A9%BA%E7%99%BD%E9%97%AE%E9%A2%98/">tensorboardæ˜¾ç¤ºç©ºç™½</a>ï¼Œå°è¯•å°†tensorboardé™çº§ä¸º2.0.0ç‰ˆæœ¬ã€‚</p>
<h3 id="2-2-Windowsæ³¨å†Œè¡¨é—®é¢˜"><a href="#2-2-Windowsæ³¨å†Œè¡¨é—®é¢˜" class="headerlink" title="2.2 Windowsæ³¨å†Œè¡¨é—®é¢˜"></a>2.2 Windowsæ³¨å†Œè¡¨é—®é¢˜</h3><p>åœ¨Linuxä¸‹ï¼Œæ²¡æœ‰é—®é¢˜ï¼›ä½†åœ¨Windowsä¸‹ï¼Œä¸€äº›å…¶ä»–ç¨‹åºä¼šä¿®æ”¹æ³¨å†Œè¡¨ï¼Œå¯¼è‡´tensorboardæ˜¾ç¤ºå¼‚å¸¸ã€‚</p>
<p>åœ¨Githubä¸­æœ‰ç›¸å…³issueï¼š<a href="https://github.com/tensorflow/tensorboard/issues/3077" target="_blank" rel="noopener">https://github.com/tensorflow/tensorboard/issues/3077</a></p>
<p>ä½†ç›´æ¥çœ‹æˆ‘çš„æ–‡ç« å¯ä»¥æ›´å¿«é€Ÿåœ°è§£å†³é—®é¢˜ğŸ˜„</p>
<h4 id="2-2-1-ä¿®æ”¹æ³¨å†Œè¡¨"><a href="#2-2-1-ä¿®æ”¹æ³¨å†Œè¡¨" class="headerlink" title="2.2.1 ä¿®æ”¹æ³¨å†Œè¡¨"></a>2.2.1 ä¿®æ”¹æ³¨å†Œè¡¨</h4><p>é¦–å…ˆï¼Œæ‰“å¼€æ³¨å†Œè¡¨ç¼–è¾‘å™¨</p>
<p><code>win + R</code> ç„¶åè¾“å…¥<code>regedit</code>ï¼Œä¾æ¬¡ç‚¹å‡»<code>HKEY_CLASSES_ROOT\.js</code>ï¼Œå¦‚æœæ³¨å†Œè¡¨è¢«ä¿®æ”¹è¿‡ ï¼Œå¯ä»¥çœ‹åˆ°<font color="green">Content Type</font>å¯¹åº”â€œæ•°æ®â€è¢«æ”¹æˆäº†<font color="red">text/plain</font> </p>
<p>ç‚¹å‡»<font color="green">Content Type</font>ï¼Œå¹¶å°†å¯¹åº”æ•°æ®ä¿®æ”¹ä¸º<font color="blue">application/javascript</font>ï¼Œä¿®æ”¹åæ³¨å†Œè¡¨ä¸ºï¼š</p>
<p><img src="/images/blog/2020/regedit.PNG" alt></p>
<a id="more"></a>
<h4 id="2-2-2-é‡å¯tensorboard"><a href="#2-2-2-é‡å¯tensorboard" class="headerlink" title="2.2.2 é‡å¯tensorboard"></a>2.2.2 é‡å¯tensorboard</h4><p><code>Ctrl + C</code>ç»ˆæ­¢tensorboardå¹¶é‡æ–°è¿è¡Œï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tensorboard --logdir runs</span><br></pre></td></tr></table></figure>
<p>æ˜¾ç¤ºæ­£å¸¸ï¼šğŸ˜Š</p>
<p><img src="/images/blog/2020/projector.PNG" alt></p>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>tensorboard</tag>
        <tag>projector</tag>
        <tag>å¯è§†åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title>EMNLP-2020 å®¡ç¨¿æŒ‡å—</title>
    <url>/2020/09/21/EMNLP-2020-%E5%AE%A1%E7%A8%BF%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[<p>å¯¹äºå®¡ç¨¿æ ‡å‡†ï¼Œ<a href="https://2020.emnlp.org/blog/2020-05-17-write-good-reviews" target="_blank" rel="noopener">EMNLP-2020</a>ç»™å‡ºäº†å®¡ç¨¿æŒ‡å—ï¼Œè¦æ±‚é™¤SOTAä»¥å¤–ï¼Œè¦æ›´æ³¨é‡åˆ›æ–°æ€§ã€å®åœ¨è´¡çŒ®ç­‰æ–¹é¢ã€‚å¯¹äºæˆ‘ä»¬å¼€å±•ç§‘ç ”å·¥ä½œä¹Ÿæœ‰ä¸€å®šçš„æŒ‡å¯¼ï¼Œä¸‹é¢æ˜¯å®˜æ–¹è¯´æ˜ï¼š</p>
<p>The intention for this post is to provide some advice to reviewers, such that we can identify the best research to be presented in the conference, and provide constructive feedback in order for authors to further improve their papers. We recognize and appreciate the amount of efforts reviewers have contributed, and hope to make that more beneficial. We want all the authors to feel the delight when they read the peer reviews for their papers.</p>
<p>This is not the first attempt to educate reviewers. Many major conferences have included advice to reviewers, in NLP and in other fields, and thereâ€™s also plentiful advice relating to journal reviewing. Within the field of NLP, we would highlight:</p>
<ul>
<li><a href="https://acl2017.wordpress.com/2017/02/23/last-minute-reviewing-advice/" target="_blank" rel="noopener">Discursive advice</a> in ACL 2017 from leading lights in the field: Mirella Lapata, Marco Baroni, Yoav Artzi, Emily Bender, Joel Tetreault, Ani Nenkova, and Tim Baldwin</li>
<li><a href="https://naacl2018.wordpress.com/2018/01/20/a-review-form-faq/" target="_blank" rel="noopener">Two example good reviews</a> from NAACL 2018 presented in their reviewing form</li>
<li><a href="https://soundcloud.com/nlp-highlights/77-on-writing-quality-peer-reviews-with-noah-a-smith" target="_blank" rel="noopener">A podcast by Noah Smith</a> about peer reviews</li>
</ul>
<p>Please take the time to look through these excellent resources.</p>
<p>We hope reiterating some dos and donâ€™ts here can help reviewers as well as authors.</p>
<p>First, evaluate the paperâ€™s contributions. This is where you will use your NLP domain knowledge. We advise that you should not accept papers just because their reported results are better, or that they appear to be mathematically sophisticated. These are not sufficient or necessary to constitute contributions. And we advise that you should not reject papers just because their results are not better than state-of-the-art. In the previous <em>ACL conferences, some reviewers placed too much emphasis on SOTA performance, giving low scores to any systems that failed to reach that. While we aim to publish the very best work, a more constructive question to ask is â€œ<em>*state of which art?</em></em>â€œ. As discussed in <a href="https://hackingsemantics.xyz/2020/reviewing-models/" target="_blank" rel="noopener">this blog post</a>, a paper could offer a step forward in terms of efficiency, generalizability, interpretability, and many other criteria. A convincing contribution of any kind should not be rejected only for not topping the leaderboards.</p>
<p>Regarding different kinds of contributions, hereâ€™s what Prof. Philip Resnik at University of Maryland says:</p>
<blockquote>
<p>I think there would be significant value in encouraging reviewers to think explicitly about the nature of the contribution, and what questions then need to be asked. As a first pass for consideration/discussion:</p>
<ul>
<li>Is this research making a <strong>scientific</strong> contribution? If so:<ul>
<li>What is the phenomenon in the world that the authors are seeking to improve our understanding of?</li>
<li>What do we now know about this phenomenon that we did not know before?</li>
</ul>
</li>
<li>Is this research making an <strong>engineering</strong> contribution? If so:<ul>
<li>What is the real-world problem (or set of problems) that this work is making progress on solving?</li>
<li>Alternatively, if itâ€™s not targeting a current real-world problem, what real-world problem(s) will this work help <em>enable</em> solutions of?</li>
</ul>
</li>
<li>Is this research making a <strong>theoretical</strong> (e.g. mathematical) contribution? If so:<ul>
<li>What do we know now that we did not know before?</li>
<li>How does this theoretical or mathematical advance connect to either scientific or engineering goals? (See above.)</li>
</ul>
</li>
</ul>
<p>Work in computational linguistics might include a mixture of scientific, engineering, and theoretical contributions, rather than just one. But, I am suggesting, if a paper does not make a contribution in <em>any</em> of those three categories, with the sub-bullets having understandable answers, one should seriously consider whether it belongs at the conference.</p>
</blockquote>
<a id="more"></a>
<p>Second, consider these other important points when reading the paper and writing your review:</p>
<ul>
<li>Check what the paperâ€™s claims are, and how the content of the paper supports that claim. If the paper claims X and there is a performance increase, is that really because of X?</li>
<li>Be specific in your comments. For example, if you think the authors have neglected to cite key papers, then provide these references in your review. It might be obvious to you, but itâ€™s often less clear to the authors. Being specific will help the authors to formulate a cogent response to the review, and to fix these problems in their paper. And it is worth noting that the authors are <strong>not</strong> obliged to cite or draw comparisons with contemporaneous work (i.e. appearing within 3 months of submission), especially if it is not published in a peer-reviewed venue.</li>
<li>Be constructive in your advice. Stating that some aspect of the paper is done badly can be helpful in the gatekeeping aspect of review (providing grounds for rejection), but it tends to be less helpful to the authors. Some suggestions of how the authors might improve these problematic aspects can allow them to develop the work into something considerably better.</li>
<li>Be kind in your language, even when being critical. Itâ€™s easy to get carried away, and write something nasty that you would never say to someoneâ€™s face. Try to be polite in your feedback.</li>
</ul>
<p>Finally, itâ€™s becoming more common for people to share reviews on social media, especially when the reviews reject the work on spurious grounds. These lead us to advise that the following are often invalid bases for rejecting a paper:</p>
<ul>
<li>The paperâ€™s language or writing style. Please focus on the paperâ€™s substance. We understand that there may be times when the language or writing style is so poor that reviewers can not understand the paperâ€™s content and substance. In that case, it is fine to reject the paper, however you should only do so after making a concerted effort to understand the paper.</li>
<li>The paperâ€™s work is on a language other than English. We care about NLP for any language.</li>
<li>The paperâ€™s results are not better than SOTA. Please look at the paperâ€™s contributions and findings, as discussed above and in <a href="https://hackingsemantics.xyz/2020/reviewing-models/" target="_blank" rel="noopener">this blog post</a>.</li>
<li>The paper does not use a particular method (e.g., deep learning). No one particular method is a requirement for good work. Please justify why that method is needed. Think about what the paperâ€™s contributions are, and bear in mind that having a diversity of methods used is not a bad thing.</li>
<li>The paperâ€™s method is too simple. Our goal is not to design the most complex method. Again, think what the paperâ€™s contributions and findings are. Often the papers with the simplest methods are the most cited. If a simple method outperforms more complex methods from prior work, then this is often an important finding.</li>
<li>The paperâ€™s topic is narrow or outdated. Please be open minded. We do not want the whole community to chase a trendy topic. Look at the paperâ€™s contributions and consider what impact it may have on our community.</li>
<li>The paperâ€™s topic is completely new, such that thereâ€™s no prior art or all the prior art has been done in another field. We are interested in papers that tread new ground.</li>
<li>The paper is a resource paper. In a field that relies on supervised machine learning as much as NLP, development of datasets is as important as modeling work. This <a href="https://hackingsemantics.xyz/2020/reviewing-data/" target="_blank" rel="noopener">blog post</a> discusses what can and cannot be grounds for dismissing a resource paper.</li>
</ul>
<p>Please refrain from using the reasons above as primary grounds for rejection when writing your reviews. We will ensure authors are aware of these guidelines and can reference them during the author rebuttal period. ACs will be checking reviews carefully based on the above criteria, and may ask that you revise your review, or that you provide objective reasons to justify your positions.</p>
<p>We hope these tips are helpful to reviewers, and hope there will be more authors that appreciate the insightful feedback they get from the reviews, and fewer frustrating authors that complain about review quality.</p>
<p>Thank you all for helping to review papers, and letâ€™s make a great EMNLP 2020 together!</p>
<h2 id="Additional-Resources"><a href="#Additional-Resources" class="headerlink" title="Additional Resources"></a>Additional Resources</h2><p>To read more about the general advice on reviewing, we recommend the following resources:</p>
<ul>
<li>NeurIPS not only instructs reviewers as to what to include in their reviews, but also gives examples of useful reviewer comments in their <a href="https://nips.cc/Conferences/2019/PaperInformation/ReviewerGuidelines" target="_blank" rel="noopener">Reviewer Guidelines</a>, organized by evaluation criterion, such as â€œ<em>Contributions of the submission</em>â€œ, â€œ<em>Quality of the submission</em>â€œ, â€œ<em>Clarity</em>â€œ, â€œ<em>Originality</em>â€œ, and â€œ<em>Significance</em>â€œ. This will be particularly useful for new reviewers, and also for authors.</li>
<li>ICML gives some examples of good reviews. Please refer to the Part 2 of their <a href="https://icml.cc/Conferences/2020/ReviewerGuidelines" target="_blank" rel="noopener">Reviewer Guidelines</a>.</li>
<li>A blog <a href="https://patthomson.net/2019/10/14/reviewing-your-first-paper/" target="_blank" rel="noopener">article</a> by Pat Thomson about journal review, which shares a broadly similar procedure to conference review. The article is split into three parts, covering how to read the paper critically, how to decide on revisions required and recommendations to the PC, and how to write constructive feedback.</li>
<li>Wiley Publishing has a cute video with <a href="https://players.brightcove.net/3806881048001/rFXiCa5uY_default/index.html?videoId=4518165477001" target="_blank" rel="noopener">10 tips for first-time reviewers</a>. A list of those tips can be found in the <a href="https://authorservices.wiley.com/asset/photos/reviewers.html/journal-reviewers.html/Top_Tips_for_Peer_Review.pdf" target="_blank" rel="noopener">pdf document</a>. One tip that is useful for EVERYONE is tip 8: â€œLook at the Conclusion Firstâ€. Wiley advocates doing so because the Conclusion will give you a good idea whether the research is an exciting development within its own field. But another reason for doing so is to see what the paper is claiming to have done: This often differs from the Abstract and Introduction, which may make more impressive claims than the work actually supports.</li>
<li>Elsevierâ€™s â€œResearcher Academyâ€ has produced a video about â€œ<a href="https://researcheracademy.elsevier.com/navigating-peer-review/certified-peer-reviewer-course/31-write-helpful-peer-review-report" target="_blank" rel="noopener">How to write a helpful peer review report</a>â€œ, presented by ZoÃ« Mullan, Founding editor and Editor-in-chief of the open access journal â€œThe Lancet Global Healthâ€. To watch the video, you have to sign in to join the academy (which is free).</li>
<li>Some interesting findings about paper reviews can be found in an early article published in the Journal of the American Medical Association (JAMA), â€œ<a href="https://jamanetwork.com/journals/jama/fullarticle/187762" target="_blank" rel="noopener">What Makes a Good Reviewer and a Good Review for a General Medical Journal?</a>â€.</li>
</ul>
<p>What any of the articles and videos indicated above will give you is CONFIDENCE that youâ€™re doing the right thing. (Early Career reviewers will be happy to hear that one of the conclusions of the JAMA paper is that <em>â€œYounger age also was an independent predictor for editorsâ€™ quality assessments</em>â€œ)</p>
]]></content>
      <categories>
        <category>NLP</category>
      </categories>
      <tags>
        <tag>EMNLP</tag>
        <tag>NLP</tag>
        <tag>å®¡ç¨¿</tag>
        <tag>ç§‘ç ”</tag>
        <tag>è®ºæ–‡</tag>
      </tags>
  </entry>
  <entry>
    <title>SemEval-2020è‡ªç”±æ–‡æœ¬å…³ç³»æŠ½å–å† å†›æ–¹æ¡ˆè§£è¯»</title>
    <url>/2020/09/20/SemEval-2020%E8%87%AA%E7%94%B1%E6%96%87%E6%9C%AC%E5%85%B3%E7%B3%BB%E6%8A%BD%E5%8F%96%E5%86%A0%E5%86%9B%E6%96%B9%E6%A1%88%E8%A7%A3%E8%AF%BB/</url>
    <content><![CDATA[<blockquote>
<p>ä»¥ä¸‹æ–‡ç« æ¥è‡ªäºå¹³å®‰å¯¿é™©PAIï¼Œä½œè€…è°¢èˆ’ç¿¼</p>
</blockquote>
<h2 id="1-å…¨æ–‡æ¡†æ¶æ¦‚è§ˆ"><a href="#1-å…¨æ–‡æ¡†æ¶æ¦‚è§ˆ" class="headerlink" title="1. å…¨æ–‡æ¡†æ¶æ¦‚è§ˆ"></a>1. å…¨æ–‡æ¡†æ¶æ¦‚è§ˆ</h2><p><img src="/images/blog/2020/SemEval-2020/overview.webp" alt></p>
<h2 id="2-èµ›é¢˜ä»‹ç»"><a href="#2-èµ›é¢˜ä»‹ç»" class="headerlink" title="2. èµ›é¢˜ä»‹ç»"></a>2. èµ›é¢˜ä»‹ç»</h2><p><strong>SemEval</strong> ç”± ACLï¼ˆå›½é™…è®¡ç®—è¯­è¨€å­¦åä¼šï¼‰ä¸»åŠï¼Œæ˜¯å…¨çƒèŒƒå›´å½±å“åŠ›æœ€å¼ºã€è§„æ¨¡æœ€å¤§ã€å‚èµ›äººæ•°æœ€å¤šçš„è¯æ±‡ä¸è¯­ä¹‰è®¡ç®—é¢†åŸŸæƒå¨èµ›äº‹ï¼Œè¿„ä»Šå·²ä¸¾åŠ 14 å±Šï¼Œå†å±Šå¸å¼•äº†å¡å†…åŸºæ¢…éš†å¤§å­¦ã€TCS Researchã€ç™¾åº¦ã€ç¾å›¢ã€ç§‘å¤§è®¯é£ç­‰å›½å†…å¤–ä¸€æµé«˜æ ¡ã€é¡¶çº§ç§‘ç ”æœºæ„å’ŒçŸ¥åä¼ä¸šå‚ä¸ã€‚</p>
<h3 id="2-1-ä»»åŠ¡ç®€ä»‹"><a href="#2-1-ä»»åŠ¡ç®€ä»‹" class="headerlink" title="2.1 ä»»åŠ¡ç®€ä»‹"></a>2.1 ä»»åŠ¡ç®€ä»‹</h3><p>æœ¬æ¬¡æˆ‘ä»¬å‚èµ›ä»»åŠ¡ä¸ºDeftEval: Extracting term-definition pairs in free textï¼ˆè‡ªç”±æ–‡æœ¬å®šä¹‰æŠ½å–ï¼‰ã€‚åœ¨è¯¥ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬å›¢é˜Ÿä»¥æ»¡åˆ†æˆç»©å¤ºå¾—äº†å…³ç³»æŠ½å–èµ›é“å† å†›ã€‚ </p>
<p><img src="/images/blog/2020/SemEval-2020/2.1.webp" alt></p>
<p>ä¸»åŠæ–¹æä¾›äº†ä¸¤ä¸‡å¤šæ¡ä»ä¸“ä¸šå·¥å…·ä¹¦ç­›é€‰çš„å¥å­ï¼Œè¦†ç›–ç”Ÿç‰©ã€å†å²ã€ç‰©ç†ã€å¿ƒç†å­¦ã€é‡‘èã€ç¤¾ä¼šã€æ”¿æ²»ç­‰å¤šä¸ªä¸“ä¸šé¢†åŸŸã€‚è¯¥ä»»åŠ¡åŒ…å«ä»¥ä¸‹ä¸‰ä¸ªå­ä»»åŠ¡ï¼š</p>
<ul>
<li><strong>Subtask1ï¼š</strong>ç»™å®šä¸€ä¸ªå¥å­ï¼Œåˆ¤æ–­è¯¥å¥å­é‡Œæ˜¯å¦åŒ…å«å®šä¹‰</li>
<li><strong>Subtask2ï¼š</strong>åœ¨ç»™å®štag schemaä¸‹çš„è¯ç²’åº¦BIOæ ‡ç­¾é¢„æµ‹</li>
<li><strong>Subtask3ï¼š</strong>åœ¨ç»™å®šrelation schemaä¸‹çš„å…³ç³»æŠ½å–</li>
</ul>
<p>å…¶ä¸­ï¼ŒSubtask2çš„tag schemaåŒ…å«ä»¥ä¸‹å…­ç§ï¼š</p>
<ol>
<li><strong>Term:</strong> A primary term.</li>
<li><strong>Alias Term:</strong> A secondary or less common name for the primary term. Links to a term tag.</li>
<li><strong>Referential Term:</strong> A noun phrase(NP) reference to a previously mentioned term tag. Typically this/that/these + NP following a sentence boundary.</li>
<li><strong>Definition:</strong> A primary definition of a term. May not exist without a matching term.</li>
<li><strong>Referential Definition:</strong> NP reference to a previously mentioned definition tag. See Referential Term.</li>
<li><strong>Qualifier:</strong> A specific date, location, or other condition under which the definition holds true. Typically seen at the clause level.<a id="more"></a></li>
</ol>
<p>Subtask3çš„relation schemaåŒ…å«ä»¥ä¸‹äº”ç§ï¼š</p>
<ol>
<li><strong>Direct-defines:</strong> Links definition to term.</li>
<li><strong>Indirect-defines:</strong> Links definition to referential term or term to referential definition.</li>
<li><strong>Refers-to:</strong> Links referential term to term or referential definition to definition.</li>
<li><strong>AKA:</strong> Links alias term to term.</li>
<li><strong>Supplements :</strong> Links qualifier to term.</li>
</ol>
<h3 id="2-2-æ•°æ®é›†æ ¼å¼"><a href="#2-2-æ•°æ®é›†æ ¼å¼" class="headerlink" title="2.2 æ•°æ®é›†æ ¼å¼"></a>2.2 æ•°æ®é›†æ ¼å¼</h3><p>è®­ç»ƒæ•°æ®é›†å¦‚ä¸‹å›¾æ‰€ç¤ºæœ‰8åˆ—ï¼Œç”¨tabåˆ†éš”ï¼Œå¥å­ä¹‹é—´æœ‰ç©ºè¡Œï¼Œæ®µè½ç”¨2ä¸ªç©ºè¡Œåˆ†éš”ã€‚</p>
<ul>
<li>TOKENæ˜¯å¥å­é‡Œçš„å•è¯ï¼›</li>
<li>SOURCEæ ‡è¯†å½“å‰å¥å­æ¥æºäºå“ªç¯‡æ–‡ç« ï¼›</li>
<li>START/ENDæ˜¯å•è¯åœ¨æ–‡ç« ä¸­çš„èµ·å§‹ä½ç½®ï¼›</li>
<li>TAGåˆ™æ˜¯æ¥è‡ªäºå‰é¢æ‰€è¿°tag schemaé‡Œçš„æ ‡ç­¾ï¼Œç¬¦åˆBIOæ ‡æ³¨æ ¼å¼ï¼›</li>
<li>TAG_IDæ˜¯TAGæ ‡ç­¾çš„ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼Œå¦‚æœOæ ‡ç­¾åˆ™ä¸º-1ï¼›</li>
<li>ROOT_IDæ˜¯æŒ‡åœ¨å…³ç³»ä¸­å½“å‰TAG_IDæ‰€å…³è”çš„TAG_IDï¼Œä¸‹é¢è¡¨æ ¼ä¸­T10æ˜¯å¯¹T9çš„ä¸€ä¸ªå®šä¹‰ï¼Œæ‰€ä»¥T10çš„ROOT_IDä¸ºT9ï¼›</li>
<li>RELATIONåˆ™æ˜¯ä¸Šæ–‡relation schemaé‡Œä»‹ç»çš„å…³ç³»ï¼Œè¡¨ä¸­çš„ä¾‹å­ä¸ºDirect-Defineså…³ç³»ã€‚</li>
</ul>
<p><img src="/images/blog/2020/SemEval-2020/2.2.webp" alt></p>
<p>Subtask1åˆ¤æ–­ä¸€å¥è¯æ˜¯å¦åŒ…å«å®šä¹‰ï¼ŒSubtask2ï¼Œå·²çŸ¥å‰å››åˆ—ä¿¡æ¯ï¼Œé¢„æµ‹ç¬¬äº”åˆ—Tagï¼ŒSubtask3ï¼Œå·²çŸ¥å‰å…­åˆ—ä¿¡æ¯ï¼Œé¢„æµ‹ROOT_IDå’Œå…³ç³»ã€‚</p>
<h3 id="2-3-è¯„ä¼°æ–¹æ³•"><a href="#2-3-è¯„ä¼°æ–¹æ³•" class="headerlink" title="2.3 è¯„ä¼°æ–¹æ³•"></a>2.3 è¯„ä¼°æ–¹æ³•</h3><p>ä»¥ä¸‹æ˜¯æœ¬æ¬¡æ¯”èµ›ä¸‰ä¸ªä»»åŠ¡çš„è¯„æµ‹æ–¹æ¡ˆã€‚</p>
<ul>
<li><p><strong>Subtask 1:</strong> å¥å­åˆ†ç±»å®˜æ–¹å°†å¯¹æ­£è´Ÿæ ·æœ¬çš„å‡†ç¡®ç‡ï¼Œå¬å›ç‡å’ŒF1å€¼è¿›è¡Œè¯„ä¼°ï¼Œä½†å®˜æ–¹æ’ååªçœ‹æ­£æ ·æœ¬çš„F1å€¼ã€‚</p>
</li>
<li><p><strong>Subtask 2:</strong> åºåˆ—æ ‡æ³¨å®˜æ–¹å°†è¯„ä¼°æ¯ä¸ªæ ‡ç­¾ç±»åˆ«çš„å‡†ç¡®ç‡ï¼Œå¬å›ç‡å’ŒF1å€¼ï¼Œä»¥åŠæ‰€æœ‰ç±»åˆ«çš„æ•´ä½“macro- and micro-averaged F1 ã€‚ä½†å®˜æ–¹æ’ååªçœ‹æ‰€æœ‰è¯„ä¼°ç±»åˆ«çš„macro-averaged F1ã€‚è¢«è¯„ä¼°çš„ç±»åˆ«åŒ…æ‹¬ï¼šTerm, Alias-Term, Referential-Term, Definition, Referential-Definition, and Qualifierã€‚</p>
</li>
<li><p><strong>Subtask 3:</strong> å…³ç³»æŠ½å–å®˜æ–¹å°†è¯„ä¼°æ¯ä¸ªå…³ç³»ç±»åˆ«çš„å‡†ç¡®ç‡ï¼Œå¬å›ç‡å’ŒF1å€¼ï¼Œä»¥åŠæ‰€æœ‰å…³ç³»ç±»åˆ«çš„æ•´ä½“macro- and micro-averaged F1 ã€‚ä½†å®˜æ–¹æ’ååªçœ‹æ‰€æœ‰è¯„ä¼°å…³ç³»ç±»åˆ«çš„macro-averaged F1ã€‚è¢«è¯„ä¼°çš„å…³ç³»ç±»åˆ«åŒ…æ‹¬ï¼šDirect-defines, Indirect-defines, Refers-to, AKA, and Supplementsã€‚</p>
<p>ä¹Ÿå³ä»»åŠ¡1åªçœ‹æ­£æ ·æœ¬çš„F1å€¼ï¼Œä»»åŠ¡2ï¼Œ3åˆ™ä»¥æ‰€æœ‰ç±»åˆ«çš„Macro-F1ä¸ºè¯„ä»·æŒ‡æ ‡ï¼Œå…¶ä¸­Macro-F1æ˜¯æŒ‡åˆ†åˆ«è®¡ç®—æ¯ä¸ªç±»åˆ«çš„F1ï¼Œç„¶ååšå¹³å‡ï¼ˆå„ç±»åˆ«F1çš„æƒé‡ç›¸åŒï¼‰ï¼Œ<strong>æ­¤ç§è¯„ä»·æ ‡å‡†å¯¹å°æ ·æœ¬æ•°æ®ç±»åˆ«çš„å‡†ç¡®ç‡æœ‰è¾ƒé«˜çš„è¦æ±‚ã€‚</strong></p>
</li>
</ul>
<h2 id="3-ä»»åŠ¡åˆ†æ"><a href="#3-ä»»åŠ¡åˆ†æ" class="headerlink" title="3. ä»»åŠ¡åˆ†æ"></a>3. ä»»åŠ¡åˆ†æ</h2><h3 id="3-1-EDA-Exploratory-Data-Analysis"><a href="#3-1-EDA-Exploratory-Data-Analysis" class="headerlink" title="3.1 EDA (Exploratory Data Analysis)"></a>3.1 EDA (Exploratory Data Analysis)</h3><p>é€šè¿‡ç»Ÿè®¡çš„æ–¹æ³•ï¼Œåˆ†æè®­ç»ƒæ ·æœ¬å¥å¼ï¼Œå„ç±»æ ‡ç­¾å æ¯”ã€‚æˆ‘ä»¬å‘ç°40%å·¦å³çš„å¸¸è§å®šä¹‰å¥å¼éƒ½æ˜¯Term be Definitionå’ŒDefinition be called Termè¿™ä¸¤ç§æ ¼å¼ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<ol>
<li><p>Term is/are Definition åœ¨definitionå¥å­ä¸­å æ¯”çº¦ä¸º27.31%</p>
<p>ç¤ºä¾‹ï¼šThe small intestine is the organ where the digestion of protein , fats , and carbohydrates is completed.</p>
</li>
<li><p>Definition be called Term åœ¨definitionå¥å­ä¸­å æ¯”çº¦ä¸º13.12%</p>
<p>ç¤ºä¾‹ï¼šThe process by which capital ages and loses value is called depreciation.</p>
</li>
</ol>
<p><img src="/images/blog/2020/SemEval-2020/3.1.webp" alt></p>
<p>ç»è¿‡ç»Ÿè®¡å‘ç°ï¼ŒåŒ…å«å®šä¹‰çš„å¥å­åœ¨æ‰€æœ‰å¥å­é‡Œå æ¯”23%å·¦å³ï¼Œä¹Ÿå³ä»»åŠ¡1çš„æ­£æ ·æœ¬æ•°é‡ä¸åˆ°è´Ÿæ ·æœ¬çš„ä¸‰åˆ†ä¹‹ä¸€ï¼Œè¿™å¯¹æˆ‘ä»¬åé¢æ¨¡å‹æŸå¤±å‡½æ•°çš„è¶…å‚æ•°è®¾è®¡æœ‰ä¸€å®šæŒ‡å¯¼ä½œç”¨ã€‚å…³ç³»æ ‡ç­¾é‡Œå æ¯”æœ€å¤šçš„æ˜¯ç›´æ¥å®šä¹‰ï¼Œå åˆ°85-89%çš„æ¯”ä¾‹ï¼Œå…¶ä»–çš„å…³ç³»æ ‡ç­¾éƒ½å±äºå°æ ·æœ¬æ ‡ç­¾ï¼Œè¿™äº›éƒ½æ˜¯åç»­æ•°æ®å¢å¼ºé‡ç‚¹å…³æ³¨ç±»åˆ«ã€‚</p>
<p>å¦å¤–æˆ‘ä»¬è¿˜å¯¹å¥å­é•¿åº¦ï¼Œè·¨å¥å…³è”æ¯”ä¾‹ï¼Œæ®µè½å¥å­ä¸ªæ•°ï¼Œå™ªéŸ³æ–‡æœ¬ç­‰ç‰¹å¾è¿›è¡Œäº†ç»Ÿè®¡ã€‚å…¶ä¸­ä¸¤ä¸ªå…³è”æ ‡ç­¾åˆ†å¸ƒåœ¨ç›¸é‚»ä¸¤ä¸ªå¥å­çš„æƒ…å†µï¼Œæ˜¯æœ¬æ¬¡èµ›é¢˜çš„éš¾ç‚¹ã€‚</p>
<p>å¯¹train/dev/testç»Ÿè®¡åˆ†æå¦‚ä¸‹ï¼š</p>
<ol>
<li>train/devä¸­è·¨è·å…³è”è¯­å¥å æ¯”çº¦ä¸º0.02ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯æœ¬å¥å…³è”çš„</li>
<li>train/dev/testè¯­å¥é•¿åº¦çº¦åœ¨26ä¸ªå•è¯å·¦å³</li>
<li>train/dev/testä¸­æ¯ä¸ªæ®µè½å¤§çº¦ç”±4ä¸ªå¥å­ç»„æˆ</li>
<li>è®­ç»ƒé›†é‡Œæ®µè½å¼€å¤´çš„æ•°å­—å•å¥è¦æ¸…æ´—</li>
</ol>
<p><img src="/images/blog/2020/SemEval-2020/3.1.2.webp" alt></p>
<p>é’ˆå¯¹ä¸åŒé¢†åŸŸä¸­ä¸åŒæ ‡ç­¾å æ¯”è¿›è¡Œç»Ÿè®¡åˆ†æå‘ç°ï¼Œè®­ç»ƒé›†/éªŒè¯é›†/æµ‹è¯•é›†åœ¨ä¸åŒé¢†åŸŸå†…çš„ä¸åŒæ ‡ç­¾åˆ†å¸ƒåŸºæœ¬ç›¸åŒï¼ŒåŒæ—¶ç»Ÿè®¡æ¯ä¸ªé¢†åŸŸå†…æ¯ä¸ªæ ‡ç­¾çš„å æ¯”å¯çŸ¥ï¼Œgovernmenté¢†åŸŸä¸­åªæœ‰13.16%çš„æ•°æ®å¸¦æœ‰æ ‡ç­¾ï¼Œè€Œbiologyé¢†åŸŸä¸­å¤§çº¦æœ‰33.79%çš„æ•°æ®å¸¦æœ‰æ ‡ç­¾ï¼Œè¿œå¤§äºgovernmentã€‚ä¸”biologyé¢†åŸŸå†…Qualifieræ ‡ç­¾è¿œå¤§äºå…¶ä»–é¢†åŸŸï¼Œå æ¯”çº¦ä¸º0.73%ï¼Œå…¶ä»–é¢†åŸŸå‡å°äº0.2%ã€‚è¿™äº›æ˜¯ç¬¦åˆå¸¸ç†è®¤çŸ¥çš„ã€‚</p>
<p>é€šè¿‡ç»Ÿè®¡åˆ†æï¼Œæˆ‘ä»¬è¿˜å‘ç°å¥å­ä¹‹é—´çš„ä¸€äº›å…³è”æ€§</p>
<ul>
<li>ä¸€ä¸ªå¥å­å¦‚æœåŒ…å«å®šä¹‰ï¼Œåˆ™ä¸€å®šå«æœ‰Definitionæ ‡ç­¾</li>
<li>å„ç§å®ä½“ä¹‹é—´çš„å…³ç³»éƒ½æ˜¯å›´ç»•å®šä¹‰æˆ–è€…å®ä½“æœ¬èº«</li>
<li>å®ä½“å’Œå®šä¹‰å¯èƒ½ä¸åœ¨åŒä¸€å¥è¯é‡Œ</li>
<li>æŒ‡ä»£å®šä¹‰é€šå¸¸æ˜¯ä¸¤ä¸ªç›¸é‚»çš„å¥å­</li>
</ul>
<h3 id="3-2-æ•°æ®å¢å¼º"><a href="#3-2-æ•°æ®å¢å¼º" class="headerlink" title="3.2 æ•°æ®å¢å¼º"></a>3.2 æ•°æ®å¢å¼º</h3><p>é€šå¸¸æ¥è¯´ï¼Œè‹±æ–‡æ–‡æœ¬çš„æ•°æ®å¢å¼ºå¯ä»¥é‡‡ç”¨å•å¤æ•°ã€ç¼©å†™ã€ä¸Šä¸‹ä½è¯çš„æ›¿æ¢ï¼Œè¿˜å¯ä»¥é€šè¿‡éšæœºå¢åŠ ã€åˆ é™¤æˆ–è€…æ”¹å†™æ¥ç”Ÿæˆæ–°çš„æ ·æœ¬ã€‚å›è¯‘æ³•ä¹Ÿæ˜¯å¸¸ç”¨çš„æ–¹æ³•ï¼Œå°±æ˜¯å…ˆæŠŠè‹±æ–‡ç¿»è¯‘æˆå…¶ä»–è¯­è¨€å†å›è¯‘æˆè‹±æ–‡ã€‚è‹±æ–‡é‡Œä½¿ç”¨nltkï¼Œwordnetå¯ä»¥è·å–å•è¯çš„åŒä¹‰è¯ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°äº†Crafting Text Adversarial Samplesçš„æ€æƒ³ï¼š<strong>ä¸€ä¸ªå•è¯æœ‰é«˜è´¡çŒ®æ˜¯æŒ‡å»æ‰å®ƒåæ–‡æœ¬å°†è¢«åˆ†ä¸ºå½“å‰ç±»çš„æ¦‚ç‡å¤§å¹…å‡å°ã€‚</strong>ç”Ÿæˆæ‰©å……è¯­æ–™çš„ä¸€ä¸ªé‡è¦æ–¹é¢å°±æ˜¯è¦ä¿æŒæ ·æœ¬çš„è¯­ä¹‰ ã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„ä»»åŠ¡ä¸­å®šä¹‰ä¸“æœ‰åè¯ä¸èƒ½æ›¿æ¢ï¼Œå¥å­è¦ä¿æŒé€šé¡ºã€‚</p>
<p>Subtask1å¯ä»¥ç”¨å›è¯‘æ³•ï¼ŒSubtask2åªèƒ½ç”¨åŒä¹‰è¯æ›¿æ¢ä¿æŒå¥å­å•è¯æ•°ä¸€è‡´ã€‚ä¸‹å›¾ä¸­æ–°å¥å­é‡Œçº¢è‰²çš„å•è¯æ˜¯æˆ‘ä»¬ç»è¿‡æ›¿æ¢äº§ç”Ÿçš„ã€‚</p>
<p><img src="/images/blog/2020/SemEval-2020/3.2.webp" alt></p>
<h3 id="3-3-å®šä¹‰æŠ½å–å…³ç³»æŠ½å–ä¼ ç»Ÿæ–¹æ³•"><a href="#3-3-å®šä¹‰æŠ½å–å…³ç³»æŠ½å–ä¼ ç»Ÿæ–¹æ³•" class="headerlink" title="3.3 å®šä¹‰æŠ½å–å…³ç³»æŠ½å–ä¼ ç»Ÿæ–¹æ³•"></a>3.3 å®šä¹‰æŠ½å–å…³ç³»æŠ½å–ä¼ ç»Ÿæ–¹æ³•</h3><p>ä¼ ç»Ÿçš„å®šä¹‰æŠ½å–æ–¹æ³•ä¸€èˆ¬æœ‰è§„åˆ™æ¨¡ç‰ˆæ–¹æ³•å’ŒåŸºäºç‰¹å¾å·¥ç¨‹çš„æœºå™¨å­¦ä¹ æ–¹æ³•ã€‚æˆ‘ä»¬åŸºäºè§‚å¯Ÿå’Œç»Ÿè®¡ï¼Œä¼šå‘ç°å¾ˆå¤šå®šä¹‰éƒ½æ˜¯æœ‰å®šä¹‰è¿æ¥åŠ¨è¯çš„ï¼Œä½†æ˜¯æœ‰å®šä¹‰è¿æ¥åŠ¨è¯çš„patternåŒ¹é…åˆ°çš„ä¹Ÿæœªå¿…æ˜¯å®šä¹‰ã€‚å¦ä¸€æ–¹é¢ï¼Œç”¨è§„åˆ™æ¨¡ç‰ˆï¼Œç‰¹å¾å·¥ç¨‹çš„æ–¹æ³•å¹¶ä¸èƒ½åœ¨ä¿æŒå‡†ç¡®ç‡çš„åŒæ—¶å…·æœ‰è‰¯å¥½çš„æ³›åŒ–æ€§ã€‚</p>
<p><img src="/images/blog/2020/SemEval-2020/3.3.webp" alt></p>
<p>è€Œä¼ ç»Ÿçš„å…³ç³»æŠ½å–ä¸€èˆ¬åˆ†ä¸¤æ­¥èµ°ï¼Œå…ˆè¯†åˆ«å‡ºå®ä½“ï¼Œå†åˆ¤æ–­å‡ºå®ä½“ä¹‹é—´çš„å…³ç³»ã€‚å®ä½“è¯†åˆ«é€šå¸¸æœ‰åŒæŒ‡é’ˆæ–¹æ³•ä»¥åŠæ·±åº¦å­¦ä¹ æ¨¡å‹+CRFç­‰æ–¹æ³•ï¼Œå…³ç³»æŠ½å–å¯ä»¥è½¬åŒ–ä¸ºåˆ†ç±»é—®é¢˜ã€‚</p>
<p><img src="/images/blog/2020/SemEval-2020/3.3.2.webp" alt></p>
<h2 id="4-æ¨¡å‹æ„å»º"><a href="#4-æ¨¡å‹æ„å»º" class="headerlink" title="4. æ¨¡å‹æ„å»º"></a>4. æ¨¡å‹æ„å»º</h2><h3 id="4-1-å¤šä»»åŠ¡å­¦ä¹ "><a href="#4-1-å¤šä»»åŠ¡å­¦ä¹ " class="headerlink" title="4.1 å¤šä»»åŠ¡å­¦ä¹ "></a>4.1 å¤šä»»åŠ¡å­¦ä¹ </h3><p>æœ¬èµ›é¢˜å¤šä¸ªä»»åŠ¡å­˜åœ¨è¾ƒå¼ºçš„å…³è”æ€§ï¼ŒSubtask2ä¸­å¦‚æœé¢„æµ‹å‡ºä¸€äº›å•è¯ä¸ºDefinitionï¼Œåˆ™å¯¹åº”å¥å­åœ¨Subtask1ä¸­åº”å±äºæ­£æ ·æœ¬ã€‚ä¸ºè§£å†³ä¼ ç»Ÿæ–¹æ³•çš„ç´¯ç§¯è¯¯å·®ï¼Œæˆ‘ä»¬å¼•å…¥å¤šä»»åŠ¡è”åˆå­¦ä¹ æ¡†æ¶ã€‚å¤šä»»åŠ¡å­¦ä¹ æœ‰ä»¥ä¸‹ä¸‰ä¸ªå¥½å¤„ï¼š</p>
<ul>
<li><strong>éšå¼æ•°æ®å¢å¼ºï¼š</strong>æœ‰æ•ˆåœ°å¢åŠ äº†æˆ‘ä»¬ç”¨äºè®­ç»ƒæ¨¡å‹çš„æ ·æœ¬é‡ã€‚ç”±äºæ‰€æœ‰æ•°æ®éƒ½å­˜åœ¨å™ªå£°ï¼Œå› æ­¤åœ¨å¯¹æŸä¸ªä»»åŠ¡Aè¿›è¡Œæ¨¡å‹è®­ç»ƒæ—¶ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å­¦ä¹ ä»»åŠ¡Açš„è‰¯å¥½è¡¨ç¤ºå½¢å¼ï¼Œç†æƒ³æƒ…å†µä¸‹å¯ä»¥å¿½ç•¥ä¸æ•°æ®ç›¸å…³çš„å™ªå£°å¹¶å¾ˆå¥½åœ°è¿›è¡Œæ¦‚æ‹¬ã€‚ç”±äºä¸åŒçš„ä»»åŠ¡å…·æœ‰ä¸åŒçš„å™ªå£°æ¨¡å¼ï¼Œä»…å­¦ä¹ ä»»åŠ¡Aå¯èƒ½ä¼šè¿‡æ‹Ÿåˆä»»åŠ¡Aï¼Œè€Œå­¦ä¹ Aå’ŒBåˆ™å¯ä»¥ä½¿æ¨¡å‹é€šè¿‡å¹³å‡å™ªå£°æ¨¡å¼è·å¾—æ›´å¥½çš„è¡¨ç¤ºã€‚</li>
<li><strong>æ›´é€šç”¨çš„æ–‡æœ¬è¡¨è¾¾ï¼š</strong>è”åˆè®­ç»ƒæ¨¡å‹å€¾å‘äºå­¦åˆ°æ¯ä¸ªå­ä»»åŠ¡éƒ½èƒ½å­¦åˆ°çš„è¡¨è¾¾ï¼Œè¿™ä¹Ÿå°†æœ‰åŠ©äºè¯¥æ¨¡å‹å°†æ¥æ¨å¹¿åˆ°æ–°ä»»åŠ¡ï¼Œå› ä¸ºå¯¹äºè¶³å¤Ÿå¤šçš„è®­ç»ƒä»»åŠ¡è€Œè¨€è¡¨ç°è‰¯å¥½çš„å‡è®¾ç©ºé—´ï¼Œåªè¦å®ƒä»¬æ¥è‡ªåŒä¸€ç¯å¢ƒï¼Œå¯¹äºå­¦ä¹ æ–°é¢–ä»»åŠ¡ä¹Ÿå°†è¡¨ç°è‰¯å¥½ã€‚</li>
<li><strong>ç‰¹å¾é€‰æ‹©åŒé‡æ£€éªŒï¼š</strong>å¦‚æœä¸€ä¸ªfeatureå¯¹å¤šä¸ªä»»åŠ¡éƒ½éå¸¸é‡è¦ï¼Œåˆ™è¿™ä¸ªfeatureå¾ˆæœ‰å¯èƒ½å¯¹é€šç”¨æ–‡æœ¬è¡¨è¾¾éå¸¸é‡è¦ã€‚</li>
</ul>
<p>é€šå¸¸æ¥è¯´ï¼Œå¤šä»»åŠ¡å­¦ä¹ åˆ†ä¸ºhard parameter sharingå’Œsoft parameter sharing, å…¶ä¸­soft parameter sharingæ¯ä¸ªä»»åŠ¡æœ‰è‡ªå·±çš„å‚æ•°ï¼Œæœ€å<strong>é€šè¿‡å¯¹ä¸åŒä»»åŠ¡çš„å‚æ•°ä¹‹é—´çš„å·®å¼‚åŠ çº¦æŸ</strong>ï¼Œè¡¨è¾¾ç›¸ä¼¼æ€§ã€‚</p>
<p><img src="/images/blog/2020/SemEval-2020/4.1.webp" alt></p>
<font color="orange">æˆ‘ä»¬åœ¨å»ºæ¨¡è¿‡ç¨‹ä¸­é‡‡ç”¨hard parameter sharingçš„æ–¹å¼ï¼Œå®šä¹‰æŠ½å–ä»»åŠ¡å’Œåºåˆ—æ ‡æ³¨ä»»åŠ¡å…±äº«ä¸€ä¸ªShared Layerç”¨ä»¥å­¦ä¹ å¥å­å•è¯é€šç”¨çš„è¡¨è¾¾ï¼Œç„¶åä¸åŒçš„ä»»åŠ¡å„è‡ªæœ‰è‡ªå·±çš„Task Specific Layerã€‚</font>



<p><img src="/images/blog/2020/SemEval-2020/4.1.2.webp" alt></p>
<p>å…³äºæŸå¤±å‡½æ•°çš„è®¾è®¡ï¼Œæˆ‘ä»¬å®šä¹‰ï¼š</p>
<script type="math/tex; mode=display">
S(X, y_{tag}) = \sum_{i=0}^{n} P_{i, y_i} + \sum_{i=0}^{n} A_{y_{i-1},y_i}</script><p>å…¶ä¸­$P<em>{i, y_i}$æ˜¯ç¬¬iä¸ªå•è¯æ ‡ç­¾ä¸º$y_i$çš„æ¦‚ç‡ï¼Œ$A</em>{y<em>{i-1},y_i}$æ˜¯CRFé‡Œè½¬ç§»çŸ©é˜µæ ‡ç­¾$y</em>{i-1}$åˆ°$y_{i}$ çš„æ¦‚ç‡ï¼Œåºåˆ—æ ‡æ³¨çš„æŸå¤±å‡½æ•°ä¸ºæœ€å¤§è·¯å¾„å¾—åˆ†é™¤ä»¥æ‰€æœ‰è·¯å¾„å¾—åˆ†å†å–logçš„è´Ÿæ•°ã€‚ </p>
<p><img src="/images/blog/2020/SemEval-2020/4.1.3.webp" alt></p>
<p>åˆ†ç±»ä»»åŠ¡çš„æŸå¤±å‡½æ•°ä¸º</p>
<p><img src="/images/blog/2020/SemEval-2020/4.1.4.webp" alt></p>
<p>å…¶ä¸­yæ˜¯æ­£ç¡®æ ‡ç­¾ï¼Œæ˜¯é¢„æµ‹æ¦‚ç‡ï¼Œæˆ‘ä»¬åœ¨äº¤å‰ç†µçš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸¤ä¸ªè¶…å‚æ•°ï¼Œ<strong>ç”¨æ¥æ§åˆ¶æ­£è´Ÿæ ·æœ¬çš„æƒé‡å’Œå®¹æ˜“åˆ†ç±»æ ·æœ¬å¯¹æ•´ä½“æŸå¤±è´¡çŒ®çš„æƒé‡</strong>ã€‚å½“æ ·æœ¬ä¸ºæ­£çš„æ—¶å€™ï¼Œæ ‡ç­¾y=1ï¼ŒæŸå¤±å‡½æ•°ç¬¬äºŒé¡¹ä¸º0ï¼Œalphaçš„å¤§å°æ§åˆ¶ç€æ­£æ ·æœ¬çš„æƒé‡ï¼Œalphaè¶Šå¤§ï¼ŒæŠŠæ­£æ ·æœ¬åˆ†é”™äº§ç”Ÿçš„æŸå¤±ä¹Ÿè¶Šå¤§ã€‚å½“ä¸€ä¸ªæ­£æ ·æœ¬æ¯”è¾ƒå®¹æ˜“åˆ†ç±»ï¼Œé¢„æµ‹å€¼$p_t$ä¼šéå¸¸æ¥è¿‘1ï¼Œå½“gammaè¶Šå¤§çš„æ—¶å€™ï¼Œå®¹æ˜“åˆ†ç±»æ ·æœ¬è´¡çŒ®çš„æŸå¤±ä¹Ÿä¼šè¶Šå°ï¼Œéš¾åˆ†ç±»æ ·æœ¬è´¡çŒ®çš„æŸå¤±ä¼šè¶Šå¤§ã€‚</p>
<p><img src="/images/blog/2020/SemEval-2020/4.1.5.webp" alt></p>
<p>è®­ç»ƒè¿‡ç¨‹æˆ‘ä»¬é‡‡ç”¨å…ˆè®­ç»ƒSubtask2ï¼Œå†è®­ç»ƒSubtask1ï¼Œäº¤æ›¿è®­ç»ƒçš„æ–¹æ³•ã€‚ä¸ºè§£å†³è®­ç»ƒæ•°æ®ä¸è¶³ï¼Œ<strong>æˆ‘ä»¬å¼•å…¥Pseudo-Labelçš„æŠ€å·§ï¼Œä½†æ§åˆ¶æ•°é‡å æ¯”ä¸è¶…è¿‡æœ‰æ ‡ç­¾æ•°æ®çš„ååˆ†ä¹‹ä¸€</strong>ã€‚æ‰€è°“Pseudo-Labelï¼Œå°±æ˜¯å…ˆç”¨æœ‰æ ‡ç­¾æ•°æ®è®­ç»ƒä¸€ä¸ªæ¨¡å‹ï¼Œç„¶åé¢„æµ‹æ— æ ‡ç­¾æ•°æ®ï¼Œå°†æ¦‚ç‡è¾ƒé«˜çš„æ— æ ‡ç­¾æ•°æ®æ‰“ä¸Šä¼ªæ ‡ç­¾ï¼Œç„¶ååŠ å…¥åˆ°è®­ç»ƒæ•°æ®ä¸­é‡æ–°è®­ç»ƒæ¨¡å‹ã€‚</p>
<p><img src="/images/blog/2020/SemEval-2020/4.1.6.webp" alt></p>
<h3 id="4-2-å…³ç³»æŠ½å–æ¨¡å‹"><a href="#4-2-å…³ç³»æŠ½å–æ¨¡å‹" class="headerlink" title="4.2 å…³ç³»æŠ½å–æ¨¡å‹"></a><font color="orange">4.2 å…³ç³»æŠ½å–æ¨¡å‹</font></h3><p>æˆ‘ä»¬æå‡ºEnhancement Inference BERTæ¨¡å‹å¯¹å…³ç³»è¿›è¡ŒæŠ½å– ã€‚æ¨¡å‹è¾“å…¥ä¸¤ä¸ªå®ä½“ï¼Œå…¶ä¸­è¯å‘é‡å–BERTæœ€åå››å±‚hidden statesçš„token embeddingæ±‚å¹³å‡ã€‚è®¡ç®—ä¸¤ä¸ªå®ä½“ä¹‹é—´å•è¯çš„Attentionï¼Œç„¶åé€šè¿‡TextBé‡Œè¯å‘é‡ä¹˜ä»¥ä¸€ä¸ªå½’ä¸€åŒ–å‚æ•°å¾—åˆ°TextAçš„äº¤äº’è¡¨è¾¾$\widetilde{a}$ï¼ŒåŒæ ·çš„æ–¹å¼å¾—åˆ°TextBçš„äº¤äº’è¡¨è¾¾$\widetilde{b}$ï¼Œæœ€åé€šè¿‡å·®ç§¯ï¼Œç‚¹ç§¯ç­‰æ“ä½œï¼Œç»è¿‡MLPï¼ŒSoftmaxå±‚è¾“å‡ºå…³ç³»labelã€‚</p>
<p><img src="/images/blog/2020/SemEval-2020/4.2.webp" alt></p>
<p>æ¨¡å‹èåˆæ–¹é¢ï¼Œæˆ‘ä»¬é‡‡ç”¨äº”ä¸ªé¢„è®­ç»ƒæ¨¡å‹ï¼Œäº”æŠ˜äº¤å‰éªŒè¯å¾—åˆ°25ä¸ªé¢„æµ‹ç»“æœï¼Œç„¶åé‡‡ç”¨hard votingçš„æ–¹å¼è¾“å‡ºç»“æœã€‚å…¶ä¸­XLM-Robertaæ˜¯ä¸€ä¸ªå¤šè¯­è¨€è®­ç»ƒæ¨¡å‹ï¼Œä¸éœ€è¦ä¼ å…¥é¢å¤–çš„å‚æ•°æ¥æŒ‡å®šå½“å‰è¾“å…¥çš„è¯­è¨€ï¼Œæ¨¡å‹å¯ä»¥é€šè¿‡input_idè‡ªå·±è¯†åˆ«ã€‚</p>
<p><img src="/images/blog/2020/SemEval-2020/4.2.1.webp" alt></p>
<p>æ¨¡å‹èåˆä¹‹åï¼Œæˆ‘ä»¬ä¼šè¾…åŠ©ä¸€äº›å®ä½“çº æ­£è§„åˆ™ï¼Œç”¨æ¥è§£å†³ä¸€äº›åµŒå¥—NERï¼Œä¸€è¯å¤štagçš„æƒ…å†µã€‚</p>
<h2 id="5-æ€»ç»“"><a href="#5-æ€»ç»“" class="headerlink" title="5. æ€»ç»“"></a>5. æ€»ç»“</h2><h3 id="5-1-æ¯”èµ›æ€»ç»“"><a href="#5-1-æ¯”èµ›æ€»ç»“" class="headerlink" title="5.1 æ¯”èµ›æ€»ç»“"></a>5.1 æ¯”èµ›æ€»ç»“</h3><p>æœ¬æ¬¡æ¯”èµ›æˆ‘ä»¬ä½¿ç”¨å¤šä»»åŠ¡è”åˆè®­ç»ƒæ¡†æ¶ï¼Œå¯¹å®šä¹‰æŠ½å–å’Œè¯ç²’åº¦BIOæ ‡æ³¨ä¸¤é¡¹ä»»åŠ¡è¿›è¡Œè”åˆå»ºæ¨¡ã€‚æå‡ºEnhancement Inference BERTå¯¹å®ä½“å…³ç³»è¿›è¡Œåˆ†ç±»ï¼ŒåŠ ä¸Šè§„åˆ™è¾…åŠ©å¯¹å…³ç³»æŠ½å–ä»»åŠ¡è¿›è¡Œé¢„æµ‹ã€‚æœ€ç»ˆåœ¨å…³ç³»æŠ½å–ä»»åŠ¡ä¸­è·å¾—ç¬¬ä¸€ã€‚</p>
<p>æ•°æ®é›†å­˜åœ¨å¤šé‡å®šä¹‰ä»¥åŠé•¿è·ç¦»çš„æŒ‡ä»£å…³ç³»ï¼ŒåŒä¸€å¥è¯å­˜åœ¨ä¸åŒçš„å®ä½“æ ‡æ³¨å’Œå…³ç³»ï¼Œå½“å‰è®¨è®ºçš„å®ä½“åœ¨å‰æ–‡æˆ–åæ–‡ä¸­æè¿°è¿‡ï¼Œéœ€è¦ç»“åˆä¸Šä¸‹æ–‡ä¿¡æ¯æ‰èƒ½é¢„æµ‹å‡ºç»“æœï¼Œè¿™äº›éƒ½å¯¹å‡†ç¡®è¯†åˆ«æå‡ºäº†å¾ˆé«˜çš„è¦æ±‚ã€‚å…‰é æ¨¡å‹å¾ˆéš¾å­¦ä¹ åˆ°ä¸€å¥å¤šä¹‰çš„æƒ…å†µã€‚å› æ­¤æœ¬æ¬¡æ¯”èµ›é‡‡ç”¨å®ä½“è§„åˆ™å¯¹æ¨¡å‹é¢„æµ‹å®ä½“ç»“æœè¿›è¡Œçº æ­£ï¼Œå®éªŒç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="/images/blog/2020/SemEval-2020/5.1.webp" alt></p>
<h3 id="5-2-NLPç«èµ›å¸¸ç”¨è§£é¢˜æŠ€å·§æ€»ç»“"><a href="#5-2-NLPç«èµ›å¸¸ç”¨è§£é¢˜æŠ€å·§æ€»ç»“" class="headerlink" title="5.2 NLPç«èµ›å¸¸ç”¨è§£é¢˜æŠ€å·§æ€»ç»“"></a>5.2 NLPç«èµ›å¸¸ç”¨è§£é¢˜æŠ€å·§æ€»ç»“</h3><p>æ‹¿åˆ°èµ›é¢˜ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç†è§£é¢˜ç›®å’Œè¯„æµ‹ç›®æ ‡ï¼Œæµè§ˆè®­ç»ƒæ•°æ®æ ¼å¼ï¼Œåˆ†ææ•°æ®å„ä¸ªç±»åˆ«å æ¯”ï¼Œæ•°æ®é›†çš„å¤§å°ï¼Œä¼šå½±å“ Epoch çš„æ•°é‡ï¼Œè€Œå¾ˆå¤šå­¦ä¹ ç‡è¡°å‡ç­–ç•¥æ˜¯ç›´æ¥ä¸ Epoch ç›¸å…³çš„ã€‚å¼‚å¸¸ç‚¹æ£€æµ‹æœ‰3ÏƒåŸåˆ™ï¼ŒIsolation Forestç­‰æ–¹æ³• ã€‚1-2ä¸‡çš„æ•°æ®é‡ï¼Œç»éªŒè§„åˆ™é¢„è®­ç»ƒæ¨¡å‹Epoch 10-20æ¬¡ã€‚</p>
<p>å…ˆä¿è¯baselineçš„åˆç†æ€§ï¼ŒåæœŸå†åŠ å…¥æ•°æ®å¢å¼ºã€‚æ•ˆæœç¬¬ä¸€ï¼Œç”¨å¤§æ¨¡å‹ï¼ˆä¸­æ–‡BERTï¼ŒERNIEï¼ŒNEZHAï¼Œè‹±æ–‡BERTï¼ŒRobertaï¼ŒXLNETç­‰ï¼‰å»æ‹Ÿåˆå°æ•°æ®ï¼Œæ­£åˆ™åŒ–ï¼ŒBatchä¸ç”¨å¤ªå¤§ã€‚å›ºå®šéšæœº seedï¼Œå§‹ç»ˆä½¿ç”¨å›ºå®šçš„éšæœº seed èƒ½ä¿è¯å¾ˆå¤šå±æ€§ï¼Œä¾‹å¦‚åœ¨æˆ‘ä»¬ä¸¤æ¬¡è¿è¡Œç›¸åŒä»£ç æ—¶èƒ½å¾—åˆ°ç›¸åŒçš„è¾“å‡ºã€‚è¿™èƒ½æ¶ˆé™¤å˜åŒ–å› å­ï¼Œè¿›è¡Œåˆç†çš„åˆ¤æ–­ã€‚</p>
<p>æ„å»ºåˆç†çš„Local CVè‡³å…³é‡è¦ï¼Œåœ¨testæ•°æ®é›†æ”¾å‡ºæ¥ä¹‹å‰ï¼Œæˆ‘ä»¬é€šè¿‡äº”æŠ˜äº¤å‰éªŒè¯æ‹†åˆ†è®­ç»ƒé›†å’ŒéªŒè¯é›†ï¼ŒæŠŠdevæ•°æ®é›†ä½œä¸ºtestæ•°æ®é›†ã€‚æœ¬åœ°è¯„ä¼°ä½“ç³»æ˜¯éªŒè¯æ–°æ¨¡å‹ï¼Œæ–°æ–¹æ¡ˆçš„æœ‰æ•ˆæ‰‹æ®µã€‚</p>
<p><img src="/images/blog/2020/SemEval-2020/5.2.webp" alt></p>
<p>è¿‡æ‹Ÿåˆï¼Œå…¸å‹çš„è¡¨ç°ä¸ºè®­ç»ƒé›†æŸå¤±è¿œè¿œå°äºéªŒè¯é›†æŸå¤±ã€‚é™¤äº†å¸¸è§„çš„æ­£åˆ™åŒ–ï¼Œearly stopç­‰æ–¹æ³•å¤–ï¼Œè¿™é‡Œä»‹ç»ä¸€ç§<strong>Adversarial Training</strong>çš„æ–¹æ³•ï¼Œä¸€èˆ¬ç”¨äºtestæ•°æ®é›†å‘å¸ƒä¹‹åï¼Œè®­ç»ƒä¸€ä¸ªåˆ†ç±»å™¨ç”¨äºåŒºåˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œé€‰å–æœ€åƒæµ‹è¯•æ•°æ®çš„å‰kä¸ªè®­ç»ƒæ•°æ®ä½œä¸ºæœ€ç»ˆæ¨¡å‹çš„éªŒè¯æ•°æ®ã€‚</p>
<p>æ¨¡å‹è¾“å…¥ä¹Ÿæœ‰è®¸å¤šä¼˜åŒ–æ–¹æ³•ï¼ŒBPEï¼ˆByte-Pair Encodingï¼‰æ˜¯å…¶ä¸­ä¸€ç§ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥æ‰©å¤§è¯æ±‡è¡¨ï¼Œä½¿unknownå‡ºç°çš„å°‘ã€‚å¯¹äºå­—å‘é‡ä¸è¯å‘é‡å¦‚æœè¦é‡‡ç”¨ç›¸åŠ çš„å½¢å¼ç»„åˆåœ¨ä¸€èµ·ï¼Œå¯ä»¥æŠŠè¯å‘é‡é‡å¤næ¬¡ï¼Œnè¡¨ç¤ºçš„æ˜¯å½“å‰è¯æœ‰å¤šå°‘ä¸ªå­—ã€‚</p>
<p>Ensembleé‡Œå•æ¨¡å‹çš„Diversityè¶Šå¤§ï¼Œæœ€ç»ˆModelçš„Biaså°±è¶Šä½ã€‚åœ¨å®é™…ä¸­å¾ˆæœ‰å¯èƒ½è¡¨ç°ç›¸è¿‘çš„Modelåªæœ‰å¯¥å¯¥å‡ ä¸ªè€Œä¸”å®ƒä»¬ä¹‹é—´ç›¸å…³æ€§è¿˜ä¸ä½ï¼Œä½†æ˜¯å®è·µå‘Šè¯‰æˆ‘ä»¬å³ä½¿åœ¨è¿™ç§æƒ…å†µä¸‹Ensembleè¿˜æ˜¯èƒ½å¤§å¹…æé«˜æˆç»©ã€‚</p>
<p><img src="/images/blog/2020/SemEval-2020/5.2.1.webp" alt></p>
<p>æ‰“ NLP æ¯”èµ›åƒæ˜¯æœç´¢è§£ç©ºé—´ï¼Œä¸æ–­å¯»æ‰¾ä¸‹ä¸€ä¸ªæ›´ä¼˜è§£ï¼Œç›´åˆ°æ¯”èµ›ç»“æŸã€‚è¿™æ ·çœ‹æ¥ï¼Œå¿«é€Ÿæ„å»ºä¸€ä¸ª baselineï¼Œå»ºç«‹å¯é çš„ Local CV ç³»ç»Ÿï¼Œç„¶åä¸æ–­å°è¯•å¹¶éªŒè¯æ–°æƒ³æ³•ï¼Œæ”¶è·å¥½æˆç»©ä¼¼ä¹ä¹Ÿæœ‰è¿¹å¯å¾ªã€‚</p>
<h2 id="6-åº”ç”¨ä»·å€¼"><a href="#6-åº”ç”¨ä»·å€¼" class="headerlink" title="6. åº”ç”¨ä»·å€¼"></a><font color="grey">6. åº”ç”¨ä»·å€¼</font></h2><p>æ­¤æ¬¡å‚èµ›æ‰€åº”ç”¨åˆ°çš„åˆ›æ–°æŠ€æœ¯ï¼Œåœ¨å®é™…ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå¯æ”¯æŒä¿é™©ä¿¡æ¯æŠ½å–ã€ä¿é™©å®ä½“è¯†åˆ«ã€æ–‡æœ¬æŒ–æ˜ç­‰æŠ€æœ¯åº”ç”¨ï¼Œå¯¹æ­å»ºå¯¿é™©å‚ç›´é¢†åŸŸçš„çŸ¥è¯†å›¾è°±èµ·åˆ°é‡è¦æ¨åŠ¨ä½œç”¨ï¼Œèƒ½å¤§å¹…æå‡å¯¹è¯å¼æœºå™¨äººçš„å“åº”æ•ˆç‡å’ŒæœåŠ¡ä½“éªŒã€‚</p>
<p>ç›®å‰å¯¹è¯å¼æœºå™¨äººä½œä¸ºå¹³å®‰äººå¯¿æ™ºèƒ½è½¬å‹çš„åˆ©å™¨ä¹‹ä¸€ï¼Œåœ¨ä»£ç†äººèµ‹èƒ½å’Œå®¢æˆ·æœåŠ¡ä¸¤å¤§ä¸šåŠ¡ä½“ç³»ä¸­å·²å¤§è§„æ¨¡è½åœ°ï¼Œè¦†ç›–æ‹›è˜ã€åŸ¹è®­ã€é”€å”®æ”¯æŒã€å®¢æœç­‰ä¸šåŠ¡åœºæ™¯ï¼Œå¹¶å°†æŒç»­å‘æŒ¥ä»·å€¼ã€‚</p>
]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
      </categories>
      <tags>
        <tag>Relation Extraction</tag>
        <tag>å…³ç³»æŠ½å–</tag>
        <tag>SemEval</tag>
        <tag>æ¯”èµ›</tag>
      </tags>
  </entry>
  <entry>
    <title>å±€éƒ¨æ•æ„Ÿå“ˆå¸Œ(LSH)</title>
    <url>/2020/09/19/%E5%B1%80%E9%83%A8%E6%95%8F%E6%84%9F%E5%93%88%E5%B8%8C-LSH/</url>
    <content><![CDATA[<h2 id="1-å¼•å…¥"><a href="#1-å¼•å…¥" class="headerlink" title="1. å¼•å…¥"></a>1. å¼•å…¥</h2><p>â€‹        åœ¨åšå¾®åšæ–‡æœ¬æŒ–æ˜çš„æ—¶å€™ï¼Œä¼šå‘ç°å¾ˆå¤šå¾®åšæ˜¯é«˜åº¦ç›¸ä¼¼çš„ï¼Œå› ä¸ºå¤§é‡çš„å¾®åšéƒ½æ˜¯è½¬å‘å…¶ä»–äººçš„å¾®åšï¼Œå¹¶ä¸”æ²¡æœ‰æ·»åŠ è¯„è®ºï¼Œå¯¼è‡´å¾ˆå¤šæ•°æ®æ˜¯é‡å¤æˆ–è€…é«˜åº¦ç›¸ä¼¼çš„ã€‚è¿™ç»™æˆ‘ä»¬è¿›è¡Œæ•°æ®å¤„ç†å¸¦æ¥å¾ˆå¤§çš„å›°æ‰°ï¼Œæˆ‘ä»¬å¾—æƒ³åŠæ³•æŠŠæ‰¾å‡ºè¿™äº›ç›¸ä¼¼çš„å¾®åšï¼Œå†å¯¹å…¶è¿›è¡Œå»é‡å¤„ç†ã€‚</p>
<p>ã€€ã€€å¦‚æœåªæ˜¯è¦æ‰¾åˆ°é‡å¤çš„å¾®åšï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸¤ä¸¤æ¯”è¾ƒæ‰€æœ‰çš„å¾®åšï¼Œå¯¹ç›¸åŒçš„å¾®åšå€¼ä¿ç•™ä¸€æ¡å³å¯ï¼›ä½†è¿™åªèƒ½åœ¨æ•°æ®é‡å¾ˆå°çš„æƒ…å†µä¸‹æ‰æœ‰å¯èƒ½ï¼Œå½“æˆ‘ä»¬æœ‰1000ä¸‡æ¡å¾®åšæ—¶ï¼Œéœ€è¦ä¸¤ä¸¤æ¯”è¾ƒçš„å¾®åšæœ‰10^6äº¿ï¼ˆn*(n-1)/2ï¼‰å¯¹ï¼Œè¿™ä¸ªè®¡ç®—é‡æ˜¯æƒŠäººçš„ï¼Œå³ä¾¿ä½ ç”¨map-reduceï¼Œæ‹¥æœ‰å¼ºå¤§çš„é›†ç¾¤ï¼Œé‚£ä¹Ÿé¡¶ä¸ä½æ•°æ®å†å¢åŠ ä¸€ä¸¤ä¸ªæ•°é‡çº§ã€‚ä¸€ç§ç¨å¾®å¥½ä¸€ç‚¹çš„åŠæ³•æ˜¯å¯¹æ‰€ä»¥å¾®åšè¿›è¡Œä¸€æ¬¡hashï¼Œå†å¯¹æ¡¶å†…çš„å¾®åšè¿›è¡Œæ¯”è¾ƒï¼Œåˆ©ç”¨hashå¯ä»¥è¿‡æ»¤äº†ç»å¤§å¤šæ•°ä¸ç›¸åŒçš„å¾®åšï¼Œé¿å…äº†æ— è°“çš„æ¯”è¾ƒï¼Œæ—¶é—´å¤æ‚åº¦O(n)ï¼Œæ˜¾è‘—æé«˜æ•ˆç‡ã€‚Hashçš„ä¸€ä¸ªåŸºæœ¬ç‰¹æ€§å°±æ˜¯éšæœºæ€§ï¼Œå®ƒå°†ä¸€ä¸ªå­—ç¬¦ä¸²éšæœºçš„hashåˆ°ä¸€ä¸ªæ¡¶ä¸­ï¼Œå¯¹äºç›¸åŒçš„ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œhashå€¼æ€»æ˜¯ç›¸åŒçš„ï¼Œä½†ä¸¤ä¸ªhashå€¼åªè¦ç›¸å·®ä¸€ç‚¹ï¼Œhashå€¼å°±å°±å¯èƒ½å¤§ç›¸å¾„åº­ï¼Œå¯è°“å·®ä¹‹æ¯«å˜è°¬ä»¥åƒé‡Œï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; s1 = <span class="string">"æˆ‘æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²"</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; s2 = <span class="string">"æˆ‘æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²"</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; <span class="built_in">hash</span>(s1)</span></span><br><span class="line">2006838971</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; <span class="built_in">hash</span>(s2)</span></span><br><span class="line">2006838971</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; s3 = <span class="string">"æˆ‘å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²"</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; <span class="built_in">hash</span>(s3)</span></span><br><span class="line">-1823451294</span><br></pre></td></tr></table></figure>
<p>ã€€    å¦‚æœèƒ½æœ‰ä¸€ç§hashç®—æ³•ï¼Œèƒ½å°†ç›¸ä¼¼çš„å­—ç¬¦ä¸²hashå¾—åˆ°ç›¸ä¼¼çš„hashå€¼ï¼Œé‚£å°±èƒ½åœ¨æ¥è¿‘çº¿æ€§çš„æ—¶é—´è§£å†³æµ·é‡å¾®åšä¸­çš„å»é‡é—®é¢˜ã€‚å¹¸å¥½ï¼Œè¿™æ ·çš„hashå·²ç»æœ‰å¤§ç‰›å‘æ˜äº†ï¼Œå®ƒå«å±€éƒ¨æ•æ„Ÿå“ˆå¸Œï¼ˆLocality Sensitive Hashingï¼Œç®€ç§°LSHï¼‰ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡æµ·é‡å¾®åšæ–‡æœ¬ç›¸ä¼¼é¡¹å‘ç°çš„ä¾‹å­æ¥æ¢è®¨è¿™ä¸ªç¥å¥‡çš„hashã€‚<a id="more"></a></p>
<h2 id="2-æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—"><a href="#2-æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—" class="headerlink" title="2. æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—"></a>2. æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—</h2><p>â€‹        æŒ‰ç…§æ–‡æœ¬å¤„ç†çš„æœ¯è¯­ï¼Œæˆ‘ä»¬è®¤ä¸ºä¸€æ¡å¾®åšæ˜¯ä¸€ç¯‡æ–‡æ¡£ï¼Œåº¦é‡ä¸¤ç¯‡æ–‡æ¡£ç›¸ä¼¼åº¦æœ‰å¤šç§æ–¹æ³•ï¼Œæœ‰æ¬§å¼è·ç¦»ã€ç¼–è¾‘è·ç¦»ã€ä½™å¼¦è·ç¦»ã€Jaccardè·ç¦»ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨Jaccardè·ç¦»ã€‚è¿™é‡Œæ³¨æ„ä¸€ä¸‹ï¼Œè·ç¦»å’Œç›¸ä¼¼åº¦æ˜¯ä¸åŒçš„æ¦‚å¿µï¼Œè·ç¦»è¶Šè¿‘ç›¸ä¼¼åº¦åº”è¯¥è¶Šé«˜ï¼Œè·ç¦»è¶Šè¿œç›¸ä¼¼åº¦åº”è¯¥è¶Šä½ï¼Œå› æ­¤similar = 1-distaceã€‚</p>
<p>ã€€ã€€é›†åˆSå’ŒTçš„Jaccardç›¸è¯†åº¦ï¼š</p>
<script type="math/tex; mode=display">
SIM(S, T) = \frac{|S \cap T|}{ |S \cup T|}</script><p>â€‹        ä¸è€ƒè™‘å¾®åšä¸­é‡å¤å‡ºç°çš„è¯æ—¶ï¼Œä¸€æ¡å¾®åšå°±å¯ä»¥çœ‹æˆä¸€ä¸ªé›†åˆï¼Œé›†åˆçš„å…ƒç´ æ˜¯ä¸€ä¸ªä¸ªçš„è¯ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">s1 = '''ä» å†³å¿ƒ å‡è‚¥ çš„ è¿™ ä¸€åˆ» èµ· è¯· åš å¦‚ä¸‹ å° æ”¹å˜ ä½  åš å¾— åˆ° ä¹ˆ'''</span><br><span class="line">s2 = '''ä» å†³å¿ƒ å‡è‚¥ çš„ è¿™ ä¸€åˆ» èµ· è¯· åš å¦‚ä¸‹ å° æ”¹å˜'''</span><br></pre></td></tr></table></figure>
<p>â€‹        sim(s1,s2)=11/16=0.69.</p>
<h2 id="3-æ–‡æ¡£çš„Shingling"><a href="#3-æ–‡æ¡£çš„Shingling" class="headerlink" title="3. æ–‡æ¡£çš„Shingling"></a>3. æ–‡æ¡£çš„Shingling</h2><p>â€‹        ä¸ºäº†å­—é¢ä¸Šç›¸ä¼¼çš„æ–‡æ¡£ï¼Œå°†æ–‡æ¡£è¡¨ç¤ºæˆé›†åˆæœ€æœ‰æ•ˆçš„æ–¹æ³•æ˜¯æ„å»ºæ–‡æ¡£ä¸­çš„çŸ­å­—ç¬¦ä¸²é›†åˆï¼Œä¸€ä¸ªå¸¸ç”¨çš„æ–¹æ³•æ—¶Shinglingï¼ˆä¸çŸ¥é“ç¿»è¯‘æˆä»€ä¹ˆï¼Œå›§ï¼‰ï¼Œçœ‹å®šä¹‰å¾ˆç®€å•çš„ï¼šæ–‡æ¡£çš„k-shingleå®šä¹‰ä¸ºå…¶ä¸­é•¿åº¦ä¸ºkçš„å­ä¸²ã€‚å¯¹äºä¸Šé¢çš„å­—ç¬¦ä¸²s2ï¼Œé€‰æ‹©k=2ï¼Œè¿™s2ä¸­çš„æ‰€æœ‰2-singleç»„æˆçš„é›†åˆä¸º:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;"ä» å†³å¿ƒ","å†³å¿ƒ å‡è‚¥","å‡è‚¥ çš„","çš„ è¿™","è¿™ ä¸€åˆ»","ä¸€åˆ» èµ·","èµ· è¯·","è¯· åš","åš å¦‚ä¸‹","å¦‚ä¸‹ å°","å° æ”¹å˜"&#125;</span><br></pre></td></tr></table></figure>
<p>ã€€    kå€¼çš„é€‰å–å…·æœ‰ä¸€å®šçš„æŠ€å·§ï¼Œkè¶Šå¤§è¶Šèƒ½æ‰¾åˆ°çœŸæ­£ç›¸ä¼¼çš„æ–‡æ¡£ï¼Œè€Œkè¶Šå°å°±èƒ½å¬å›æ›´å¤šçš„æ–‡æ¡£ï¼Œä½†ä»–ä»¬å¯èƒ½ç›¸ä¼¼åº¦ä¸é«˜ï¼Œæ¯”å¦‚k=1ï¼Œå°±å˜æˆäº†åŸºæœ¬è¯çš„æ¯”è¾ƒäº†ã€‚æˆ‘è¿™é‡Œè¯ä½œä¸ºshingleçš„åŸºæœ¬å•ä½ï¼Œåœ¨è‹±æ–‡å¤„ç†ä¸­ï¼Œæ˜¯ä»¥å­—æ¯ä¸ºåŸºæœ¬å•ä½ï¼ŒåŸå› åœ¨äºæ±‰å­—æœ‰ä¸Šä¸‡ä¸ªï¼Œè€Œè‹±æ–‡å­—æ¯åªæœ‰27ä¸ªï¼Œä»¥æ±‰å­—ä¸ºå•ä½å°†é€ æˆshingleé›†åˆå·¨å¤§ã€‚</p>
<p>ã€€ã€€éå†æ‰€ç”¨æ–‡æ¡£ï¼Œå°±å¾—åˆ°äº†shingleå…¨é›†ã€‚</p>
<h2 id="4-ä¿æŒç›¸ä¼¼åº¦çŸ©é˜µè¡¨ç¤º"><a href="#4-ä¿æŒç›¸ä¼¼åº¦çŸ©é˜µè¡¨ç¤º" class="headerlink" title="4. ä¿æŒç›¸ä¼¼åº¦çŸ©é˜µè¡¨ç¤º"></a>4. ä¿æŒç›¸ä¼¼åº¦çŸ©é˜µè¡¨ç¤º</h2><p>1ã€é›†åˆçš„çŸ©é˜µè¡¨ç¤º</p>
<p>ã€€ã€€å‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·4ç¯‡æ–‡æ¡£ï¼ˆåˆ†è¯åï¼‰ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">s1 = "æˆ‘ å‡è‚¥"</span><br><span class="line">s2 = "è¦"</span><br><span class="line">s3 = "ä»– å‡è‚¥ æˆåŠŸ"</span><br><span class="line">s4 = "æˆ‘ è¦ å‡è‚¥"</span><br></pre></td></tr></table></figure>
<p>â€‹        ä¸ºæ–¹ä¾¿å™è¿°ï¼Œæˆ‘ä»¬å–k=1ï¼Œè¿™æ—¶shingleå…¨é›†ä¸º{æˆ‘ï¼Œä»–ï¼Œè¦ï¼Œå‡è‚¥ï¼ŒæˆåŠŸ}ï¼Œå°†æ–‡æ¡£è¡¨ç¤ºæˆç‰¹å¾çŸ©é˜µï¼Œè¡Œä»£è¡¨shingleå…ƒç´ ï¼Œåˆ—ä»£è¡¨æ–‡æ¡£ï¼Œåªæœ‰æ–‡æ¡£jå‡ºç°å…ƒç´ iæ—¶ï¼ŒçŸ©é˜µM[i][j]=1ï¼Œå¦åˆ™M[i][j] = 0.</p>
<p><img src="/images/blog/2020/hash1.PNG" alt></p>
<p>â€‹        å®é™…ä¸Šï¼ŒçœŸæ­£è®¡ç®—çš„è¿‡ç¨‹ä¸­çŸ©é˜µä¸æ˜¯è¿™æ ·è¡¨ç¤ºçš„ï¼Œå› ä¸ºæ•°æ®å¾ˆç¨€ç–ã€‚å¾—åˆ°çŸ©é˜µè¡¨ç¤ºåï¼Œæˆ‘ä»¬æ¥çœ‹æœ€å°hashçš„å®šä¹‰ã€‚</p>
<h2 id="5-æœ€å°å“ˆå¸Œï¼ˆmin-hashing"><a href="#5-æœ€å°å“ˆå¸Œï¼ˆmin-hashing" class="headerlink" title="5. æœ€å°å“ˆå¸Œï¼ˆmin-hashing)"></a>5. æœ€å°å“ˆå¸Œï¼ˆmin-hashing)</h2><p>â€‹        æœ€å°hashå®šä¹‰ä¸ºï¼šç‰¹å¾çŸ©é˜µæŒ‰è¡Œè¿›è¡Œä¸€ä¸ªéšæœºçš„æ’åˆ—åï¼Œç¬¬ä¸€ä¸ªåˆ—å€¼ä¸º1çš„è¡Œçš„è¡Œå·ã€‚ä¸¾ä¾‹è¯´æ˜å¦‚ä¸‹ï¼Œå‡è®¾ä¹‹å‰çš„ç‰¹å¾çŸ©é˜µæŒ‰è¡Œè¿›è¡Œçš„ä¸€ä¸ªéšæœºæ’åˆ—å¦‚ä¸‹ï¼š</p>
<p><img src="/images/blog/2020/hash2.PNG" alt></p>
<p>æœ€å°å“ˆå¸Œå€¼ï¼šh(S1)=3ï¼Œh(S2)=5ï¼Œh(S3)=1ï¼Œh(S4)=2.</p>
<p>ã€€ã€€ä¸ºä»€ä¹ˆå®šä¹‰æœ€å°hashï¼Ÿäº‹å®ä¸Šï¼Œä¸¤åˆ—çš„æœ€å°hashå€¼å°±æ˜¯è¿™ä¸¤åˆ—çš„Jaccardç›¸ä¼¼åº¦çš„ä¸€ä¸ªä¼°è®¡ï¼Œæ¢å¥è¯è¯´ï¼Œä¸¤åˆ—æœ€å°hashå€¼åŒç­‰çš„æ¦‚ç‡ä¸å…¶ç›¸ä¼¼åº¦ç›¸ç­‰ï¼Œå³P(h(Si)=h(Sj)) = sim(Si,Sj)ã€‚ä¸ºä»€ä¹ˆä¼šç›¸ç­‰ï¼Ÿæˆ‘ä»¬è€ƒè™‘Siå’ŒSjè¿™ä¸¤åˆ—ï¼Œå®ƒä»¬æ‰€åœ¨çš„è¡Œçš„æ‰€æœ‰å¯èƒ½ç»“æœå¯ä»¥åˆ†æˆå¦‚ä¸‹ä¸‰ç±»ï¼š</p>
<p>ã€€ã€€ï¼ˆ1ï¼‰Aç±»ï¼šä¸¤åˆ—çš„å€¼éƒ½ä¸º1ï¼›</p>
<p>ã€€ã€€ï¼ˆ2ï¼‰Bç±»ï¼šå…¶ä¸­ä¸€åˆ—çš„å€¼ä¸º0ï¼Œå¦ä¸€åˆ—çš„å€¼ä¸º1ï¼›</p>
<p>ã€€ã€€ï¼ˆ3ï¼‰Cç±»ï¼šä¸¤åˆ—çš„å€¼éƒ½ä¸º0.</p>
<p>ã€€ã€€ç‰¹å¾çŸ©é˜µç›¸å½“ç¨€ç–ï¼Œå¯¼è‡´å¤§éƒ¨åˆ†çš„è¡Œéƒ½å±äºCç±»ï¼Œä½†åªæœ‰Aã€Bç±»è¡Œçš„å†³å®šsim(Si,Sj)ï¼Œå‡å®šAç±»è¡Œæœ‰aä¸ªï¼ŒBç±»è¡Œæœ‰bä¸ªï¼Œé‚£ä¹ˆsim(si,sj)=a/(a+b)ã€‚ç°åœ¨æˆ‘ä»¬åªéœ€è¦è¯æ˜å¯¹çŸ©é˜µè¡Œè¿›è¡Œéšæœºæ’åˆ—ï¼Œä¸¤ä¸ªçš„æœ€å°hashå€¼ç›¸ç­‰çš„æ¦‚ç‡P(h(Si)=h(Sj))=a/(a+b)ï¼Œå¦‚æœæˆ‘ä»¬æŠŠCç±»è¡Œéƒ½åˆ æ‰ï¼Œé‚£ä¹ˆç¬¬ä¸€è¡Œä¸æ˜¯Aç±»è¡Œå°±æ˜¯Bç±»è¡Œï¼Œå¦‚æœç¬¬ä¸€è¡Œæ˜¯Aç±»è¡Œé‚£ä¹ˆh(Si)=h(Sj)ï¼Œå› æ­¤P(h(Si)=h(Sj))=P(åˆ æ‰Cç±»è¡Œåï¼Œç¬¬ä¸€è¡Œä¸ºAç±»)=Aç±»è¡Œçš„æ•°ç›®/æ‰€æœ‰è¡Œçš„æ•°ç›®=a/(a+b)ï¼Œè¿™å°±æ˜¯æœ€å°hashçš„ç¥å¥‡ä¹‹å¤„ã€‚</p>
<h2 id="6-æœ€å°hashç­¾å"><a href="#6-æœ€å°hashç­¾å" class="headerlink" title="6. æœ€å°hashç­¾å"></a>6. æœ€å°hashç­¾å</h2><p>â€‹        æœ‰äº†æœ€å°hashè¿˜ä¸å¤Ÿï¼Œä¸€æ¬¡æœ€å°hashåªæ˜¯ä¸€æ¬¡ç‹¬ç«‹çš„éšå³äº‹ä»¶ï¼Œä¸­å¿ƒæé™å®šç†å‘Šè¯‰æˆ‘ä»¬ï¼Œåªæœ‰å¤šæ¬¡é‡å¤éšæœºäº‹ä»¶æ‰èƒ½é€ å°±å¿…ç„¶ã€‚é€‰æ‹©nä¸ªéšæœºæ’åˆ—ä½œç”¨äºç‰¹å¾çŸ©é˜µï¼Œå¾—åˆ°nä¸ªæœ€å°hashå€¼ï¼Œh1,h2,â€¦,hnï¼Œè¿™nä¸ªæœ€å°hashå€¼ç»„æˆä¸€ä¸ªnç»´å‘é‡ï¼Œå³ä¸ºæœ€å°ç­¾åï¼Œä¸¤åˆ—çš„æœ€å°ç­¾åçš„ç›¸ä¼¼åº¦å³ä¸ºä¸¤åˆ—çš„Jaccardç›¸ä¼¼åº¦çš„ä¼°è®¡ã€‚</p>
<p>ã€€ã€€ç°åœ¨å°±çœ‹å¦‚ä½•è®¡ç®—æœ€å°ç­¾åäº†ã€‚å¯¹ä¸€ä¸ªå¾ˆå¤§çš„çŸ©é˜µæŒ‰è¡Œè¿›è¡Œéšæœºæ’åˆ—ï¼Œé¦–å…ˆéœ€è¦å¾—åˆ°ä¸€ä¸ªéšæœºæ’åˆ—ï¼Œç„¶åæŒ‰è¿™ä¸ªéšæœºæ’åˆ—å»æ’åºï¼Œè¿™å°†è€—è´¹å¾ˆé•¿çš„æ—¶é—´ã€‚æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥æ¨¡æ‹Ÿéšæœºæ’åˆ—çš„è¿‡ç¨‹ã€‚åˆæœ‰ä¸€ä¸ªç¥å¥‡çš„åŠæ³•æ˜¯ï¼šæ‰¾ä¸€ä¸ªå“ˆå¸Œå‡½æ•°hï¼Œå°†ç¬¬rè¡Œæ”¾åœ¨æ’åˆ—è½¬æ¢åçš„ç¬¬h(r)çš„ä½ç½®ä¸Šã€‚æˆ‘ä»¬ä¸å†æ˜¯é€‰æ‹©nä¸ªéšæœºæ’åˆ—ï¼Œè€Œæ˜¯é€‰æ‹©nä¸ªhashï¼Œh1,h2,â€¦,hnä½œç”¨äºè¡Œï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°ç­¾åçŸ©é˜µã€‚ä»¤SIG(i,c)ä¸ºç¬¬iä¸ªå“ˆå¸Œå‡½æ•°åœ¨ç¬¬cåˆ—ä¸Šçš„å…ƒç´ ã€‚ä¸€å¼€å§‹å¯¹æ‰€æœ‰çš„SIG(i,c)åˆå§‹åŒ–ä¸ºæ— ç©·å¤§ï¼Œç„¶åä»ä¸Šå¾€ä¸‹å¯¹åˆ—cè¿›è¡Œå¤„ç†ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ã€€ã€€<span class="keyword">if</span> ç‰¹å¾çŸ©é˜µä¸­çš„cåˆ—rè¡Œå€¼ä¸º<span class="number">1</span>:</span><br><span class="line">ã€€ã€€ã€€ã€€<span class="keyword">for</span> i <span class="keyword">in</span> xrange(n):<span class="comment">#å¯¹æ¯ä¸ªhashå‡½æ•°</span></span><br><span class="line">ã€€ã€€ã€€ã€€SIG(i,c)=min(SIG(i,C),hi(r))</span><br><span class="line">ã€€ã€€<span class="keyword">else</span>:</span><br><span class="line">ã€€ã€€ã€€ã€€<span class="keyword">continue</span></span><br></pre></td></tr></table></figure>
<p>ã€€ã€€æŒ‰ä¸Šé¢çš„æ–¹æ³•å¤„ç†æ¯ä¸€åˆ—ï¼Œå³å¾—åˆ°æœ€å°ç­¾åçŸ©é˜µã€‚</p>
<h2 id="7-åŸºäºæœ€å°hashçš„å±€éƒ¨æ•æ„Ÿå“ˆå¸Œ"><a href="#7-åŸºäºæœ€å°hashçš„å±€éƒ¨æ•æ„Ÿå“ˆå¸Œ" class="headerlink" title="7. åŸºäºæœ€å°hashçš„å±€éƒ¨æ•æ„Ÿå“ˆå¸Œ"></a>7. åŸºäºæœ€å°hashçš„å±€éƒ¨æ•æ„Ÿå“ˆå¸Œ</h2><p>â€‹        å‰é¢æˆ‘ä»¬è¾›è¾›è‹¦è‹¦çš„å·¥ä½œè²Œä¼¼åªæ˜¯å°†ä¸€ä¸ªæ–‡æ¡£çš„é›†åˆè½¬æ¢ä¸ºä¸€ä¸ªæœ€å°ç­¾åï¼Œè™½ç„¶è¿™ä¸ªç­¾åå¤§å¤§å‹ç¼©äº†é›†åˆçš„ç©ºé—´ï¼Œä½†è¦è®¡ç®—ä¸¤åˆ—çš„ç›¸ä¼¼åº¦è¿˜æ˜¯éœ€è¦ä¸¤ä¸¤æ¯”è¾ƒç­¾åçŸ©é˜µä¸¤åˆ—çš„ç›¸ä¼¼åº¦ï¼Œå¦‚æœæœ‰nç¯‡æ–‡æ¡£ï¼Œä¸¤ä¸ªæ¯”è¾ƒçš„æ¬¡æ•°æ˜¯n*(n-1)/2ã€‚æ¥ä¸‹æ¥å°±çœ‹å±€éƒ¨æ•æ„Ÿhashæ€ä¹ˆä¸ªæ•æ„Ÿæ³•ã€‚</p>
<p>ã€€ã€€æˆ‘ä»¬å¯¹ç­¾åçŸ©é˜µæŒ‰è¡Œè¿›è¡Œåˆ†ç»„ï¼Œå°†çŸ©é˜µåˆ†æˆbç»„ï¼Œæ¯ç»„ç”±rè¡Œç»„æˆï¼Œä¸‹é¢çš„å®åˆ—å°†ä¸€ä¸ªç­¾åçŸ©é˜µåˆ†æˆ6ç»„ï¼Œæ¯ç»„ç”±3è¡Œç»„æˆã€‚ </p>
<div class="table-container">
<table>
<thead>
<tr>
<th>ç»„1</th>
<th>â€¦</th>
<th>1 0 0 0 2<br>3 2 1 2 2<br>0 1 3 1 1</th>
<th>â€¦</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç»„2</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>ç»„3</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>ç»„4</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>ç»„5</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>ç»„6</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>â€‹    åˆ†ç»„ä¹‹åï¼Œæˆ‘ä»¬å¯¹æœ€å°ç­¾åå‘é‡çš„æ¯ä¸€ç»„è¿›è¡Œhashï¼Œå„ä¸ªç»„è®¾ç½®ä¸åŒçš„æ¡¶ç©ºé—´ã€‚åªè¦ä¸¤åˆ—æœ‰ä¸€ç»„çš„æœ€å°ç­¾åéƒ¨åˆ†ç›¸åŒï¼Œé‚£ä¹ˆè¿™ä¸¤åˆ—å°±ä¼šhashåˆ°åŒä¸€ä¸ªæ¡¶è€Œæˆä¸ºå€™é€‰ç›¸ä¼¼é¡¹ã€‚ç­¾åçš„åˆ†ææˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºæŸä¸ªå…·ä½“çš„è¡Œï¼Œä¸¤ä¸ªç­¾åç›¸åŒçš„æ¦‚ç‡p =ä¸¤åˆ—çš„ç›¸ä¼¼åº¦= sim(S1,S2)ï¼Œç„¶åï¼š</p>
<p>ã€€ã€€ï¼ˆ1ï¼‰åœ¨æŸä¸ªç»„ä¸­æ‰€æœ‰è¡Œçš„ä¸¤ä¸ªç­¾åå€¼éƒ½ç›¸ç­‰æ¦‚ç‡æ˜¯$p^r$;</p>
<p>ã€€ã€€ï¼ˆ2ï¼‰åœ¨æŸä¸ªç»„ä¸­è‡³å°‘æœ‰ä¸€å¯¹ç­¾åä¸ç›¸ç­‰çš„æ¦‚ç‡æ˜¯$1-p^r$;</p>
<p>ã€€ã€€ï¼ˆ3ï¼‰åœ¨æ¯ä¸€ç»„ä¸­è‡³å°‘æœ‰ä¸€å¯¹ç­¾åä¸ç›¸ç­‰çš„æ¦‚ç‡æ˜¯$(1-p^r)^b$;</p>
<p>ã€€ã€€ï¼ˆ4ï¼‰è‡³å°‘æœ‰ä¸€ä¸ªç»„çš„æ‰€æœ‰å¯¹çš„ç­¾åç›¸ç­‰çš„æ¦‚ç‡æ˜¯$1 - (1-p^r)^b$;</p>
<p>ã€€ã€€äºæ˜¯ä¸¤åˆ—æˆä¸ºå€™é€‰ç›¸ä¼¼å¯¹çš„æ¦‚ç‡æ˜¯$1 - (1-p^r)^b$ï¼Œå®ƒæ›²çº¿å¦‚ä¸‹ï¼š</p>
<p><img src="/images/blog/2020/hash3.PNG" alt></p>
<p>â€‹        å½“ä¸¤ç¯‡æ–‡æ¡£çš„ç›¸ä¼¼åº¦ä¸º0.8æ—¶ï¼Œå®ƒä»¬hashåˆ°åŒä¸€ä¸ªæ¡¶è€Œæˆä¸ºå€™é€‰å¯¹çš„æ¦‚ç‡æ˜¯0.9996ï¼Œè€Œå½“å®ƒä»¬çš„ç›¸ä¼¼åº¦åªæœ‰0.3æ—¶ï¼Œå®ƒä»¬æˆä¸ºå€™é€‰å¯¹çš„æ¦‚ç‡åªæœ‰0.0475ï¼Œå› æ­¤å±€éƒ¨æ•æ„Ÿhashè§£å†³äº†è®©ç›¸ä¼¼çš„å¯¹ä»¥è¾ƒé«˜çš„æ¦‚ç‡hashåˆ°åŒä¸€ä¸ªæ¡¶ï¼Œè€Œä¸ç›¸ä¼¼çš„é¡¹hashåˆ°ä¸åŒçš„æ¡¶çš„é—®é¢˜ã€‚</p>
<p>ã€€ã€€å¯¹äºæ¯ä¸ªæ¡¶å†…çš„æ–‡æ¡£ï¼Œä¼šæœ‰ä¸€éƒ¨åˆ†æ˜¯ä¸ç›¸ä¼¼çš„ï¼Œå› ä¸ºhashæœ‰å†²çªï¼Œéœ€è¦è¿›è¡Œæ¡¶å†…æ£€éªŒã€‚åŸºäºæœ€å°ç­¾åçš„LSHå¾ˆå®¹æ˜“è½¬åŒ–ä¸ºMap-reduceæ¥è®¡ç®—ã€‚</p>
<p>ã€€ã€€ä¸‹é¢æ˜¯æˆ‘å¯¹å¾®åšè¿›è¡Œå±€éƒ¨æ•æ„Ÿhashçš„ä¸€ä¸ªç»“æœï¼ˆåˆ†è¯å¹¶åˆ æ‰æ ‡ç‚¹ï¼‰ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1. "å¤–è¡¨ æ´»æ³¼ å†…å¿ƒ å­¤åƒ» çš„ äºº ä¼š åš çš„ äº‹ 1 æ‰‹æœº ä¸ ç¦» èº« 2 å¯¹å¾… ä¸åŒ çš„ äºº æœ‰ ä¸åŒ çš„ æ€§æ ¼ 3 ä» å° æ‡‚å¾— å¾ˆå¤š é“ç† 4 æœ‰ æ—¶å€™ å¾ˆ ç¥ç» æœ‰æ—¶å€™ å¾ˆ é•‡é™ 5 ä¼š å› ä¸º åˆ«äºº ä¸€ å¥ è¯ ä¼¤å¿ƒ ä½† ä¸ ä¼š è¢« å‘ç° 6 å®‰æ…° å¾ˆå¤š äºº ä½† è‡ªå·± å´ æ²¡ äºº å®‰æ…° 7 ä¼š æ€€å¿µ ä»å‰ è®¨åŒ ç°åœ¨ 8 æœ‰æ—¶å€™ ä¼š ç¬‘ çš„ æ²¡ å¿ƒ æ²¡ è‚º æœ‰ æ—¶ å´ å¾ˆ æ²‰é»˜"</span><br><span class="line">2. "å¤–è¡¨ æ´»æ³¼ å†…å¿ƒ å­¤åƒ» çš„ äºº ä¼š åš çš„ äº‹ 1. æ‰‹æœº ä¸ ç¦» èº« 2. å¯¹å¾… ä¸åŒ çš„ äºº æœ‰ ä¸åŒ çš„ æ€§æ ¼ 3. ä»å° æ‡‚å¾— å¾ˆå¤š é“ç† 4. æœ‰æ—¶å€™ å¾ˆ ç¥ç» æœ‰æ—¶å€™ å¾ˆ é•‡é™ 5. ä¼š å› ä¸º åˆ«äºº ä¸€ å¥ è¯ ä¼¤å¿ƒ ä½† ä¸ ä¼š è¢« å‘ç° 6. å®‰æ…° å¾ˆå¤š äºº ä½† è‡ªå·± å´ æ²¡ äºº å®‰æ…° 7. ä¼š æ€€å¿µ ä»å‰ è®¨åŒ ç°åœ¨ 8. æœ‰æ—¶å€™ ä¼š ç¬‘ çš„ æ²¡ å¿ƒ æ²¡ è‚º æœ‰æ—¶ å´ å¾ˆ æ²‰é»˜"</span><br><span class="line">3. "å°„æ‰‹ åº§ çš„ ç‰¹å¾ 1 æ‰‹æœº ä¸ ç¦» èº« 2 å¯¹å¾… ä¸åŒ çš„ äºº æœ‰ ä¸åŒ çš„ æ€§æ ¼ 3 ä» å° æ‡‚å¾— å¾ˆå¤š é“ç† 4 æœ‰ æ—¶å€™ å¾ˆ ç¥ç» æœ‰æ—¶å€™ å¾ˆ é•‡é™ 5 ä¼š å› ä¸º åˆ«äºº ä¸€ å¥ è¯ ä¼¤å¿ƒ ä½† ä¸ ä¼š è¢« å‘ç° 6 å®‰æ…° å¾ˆå¤š äºº ä½† è‡ªå·± å´ æ²¡ äºº å®‰æ…°"</span><br><span class="line">4. "å¤–è¡¨ æ´»æ³¼ å†…å¿ƒ å­¤åƒ» çš„ äºº ä¼š åš çš„ äº‹ 1 æ‰‹æœº ä¸ ç¦» èº« 2 å¯¹å¾… ä¸åŒ çš„ äºº æœ‰ ä¸åŒ çš„ æ€§æ ¼ 3 ä» å° æ‡‚å¾— å¾ˆå¤š é“ç† 4 æœ‰ æ—¶å€™ å¾ˆ ç¥ç» æœ‰æ—¶å€™ å¾ˆ é•‡é™ 5 ä¼š å› ä¸º åˆ«äºº ä¸€ å¥ è¯ ä¼¤å¿ƒ ä½† ä¸ ä¼š è¢« å‘ç° 6 å®‰æ…° å¾ˆå¤š äºº ä½† è‡ªå·± å´ æ²¡ äºº å®‰æ…° 7 ä¼š æ€€å¿µ ä»å‰ è®¨åŒ ç°åœ¨ 8 æœ‰æ—¶å€™ ä¼š ç¬‘ çš„ æ²¡ å¿ƒ æ²¡ è‚º æœ‰ æ—¶ å´ å¾ˆ æ²‰é»˜ ä½  æ˜¯ è¿™æ · å—"</span><br><span class="line">5. "é‡‘ç‰›åº§ ç‰¹å¾ 1 æ‰‹æœº ä¸ ç¦» èº« 2 å¯¹å¾… ä¸åŒ çš„ äºº æœ‰ ä¸åŒ çš„ æ€§æ ¼ 3 ä» å° æ‡‚å¾— å¾ˆå¤š é“ç† 4 æœ‰ æ—¶å€™ å¾ˆ ç¥ç» æœ‰æ—¶å€™ å¾ˆ é•‡é™ 5 ä¼š å› ä¸º åˆ«äºº ä¸€ å¥ è¯ ä¼¤å¿ƒ ä½† ä¸ ä¼š è¢« å‘ç° 6 å®‰æ…° å¾ˆå¤š äºº ä½† è‡ªå·± å´ æ²¡ äºº å®‰æ…° ä¼š æ€€å¿µ ä»å‰ è®¨åŒ ç°åœ¨ 8 æœ‰æ—¶å€™ ä¼š ç¬‘ çš„ æ²¡ å¿ƒ æ²¡ è‚º æœ‰æ—¶ å´ å¾ˆ æ²‰é»˜"</span><br><span class="line">6. "å¤–è¡¨ æ´»æ³¼ å†…å¿ƒ å­¤åƒ» çš„ äºº ä¼š åš çš„ äº‹ 1 æ‰‹æœº ä¸ ç¦» èº« 2 å¯¹å¾… ä¸åŒ çš„ äºº æœ‰ ä¸åŒ çš„ æ€§æ ¼ 3 ä» å° æ‡‚å¾— å¾ˆå¤š é“ç† 4 æœ‰ æ—¶å€™ å¾ˆ ç¥ç» æœ‰æ—¶å€™ å¾ˆ é•‡é™ 5 ä¼š å› ä¸º åˆ«äºº ä¸€ å¥ è¯ ä¼¤å¿ƒ ä½† ä¸ ä¼š è¢« å‘ç° 6 å®‰æ…° å¾ˆå¤š äºº ä½† è‡ªå·± å´ æ²¡ äºº å®‰æ…° 7 ä¼š æ€€å¿µ ä»å‰ è®¨åŒ ç°åœ¨ 8 æœ‰æ—¶å€™ ä¼š ç¬‘ çš„ æ²¡ å¿ƒ æ²¡ è‚º æœ‰ æ—¶ å´ å¾ˆ æ²‰é»˜ ä½  æ˜¯ è¿™æ · å—"</span><br><span class="line">7. "å¤©èåº§ ç‰¹å¾ 1 æ‰‹æœº ä¸ ç¦» èº« 2 å¯¹å¾… ä¸åŒ çš„ äºº æœ‰ ä¸åŒ çš„ æ€§æ ¼ 3 ä» å° æ‡‚å¾— å¾ˆå¤š é“ç† 4 æœ‰ æ—¶å€™ å¾ˆ ç¥ç» æœ‰æ—¶å€™ å¾ˆ é•‡é™ 5 ä¼š å› ä¸º åˆ«äºº ä¸€ å¥ è¯ ä¼¤å¿ƒ ä½† ä¸ ä¼š è¢« å‘ç° 6 å®‰æ…° å¾ˆå¤š äºº ä½† è‡ªå·± å´ æ²¡ äºº å®‰æ…° 7 ä¼š æ€€å¿µ ä»å‰ è®¨åŒ ç°åœ¨ 8 æœ‰æ—¶å€™ ä¼š ç¬‘ çš„ æ²¡ å¿ƒ æ²¡ è‚º æœ‰æ—¶ å´ å¾ˆ æ²‰é»˜"</span><br><span class="line">8. "åŒå­åº§ çš„ ä½  æ˜¯ è¿™æ · çš„ å— 1 æ‰‹æœº ä¸ ç¦» èº« ç¡è§‰ ä¸ å…³æœº 2 å¯¹å¾… ä¸åŒ çš„ äºº æœ‰ ä¸åŒ çš„ æ€§æ ¼ 3 ä» å° æ‡‚å¾— å¾ˆå¤š é“ç† ä½† çŸ¥ è¡Œ å¾€å¾€ éš¾ä»¥ åˆ ä¸€ 4 æœ‰ æ—¶å€™ å¾ˆ ç¥ç» æœ‰æ—¶å€™ å¾ˆ é•‡é™ 5 ä¼š å› ä¸º åˆ«äºº ä¸€ å¥ è¯ ä¼¤å¿ƒ ä½† ä¸ ä¼š è¢« å‘ç° 6 å¾ˆ ä¼š å®‰æ…° åˆ«äºº å´ ä¸ ä¼š å®‰æ…° è‡ªå·± 7 ä¼š ç»å¸¸ æ€€å¿µ ä» å‰"</span><br><span class="line">9. "å¤–è¡¨ æ´»æ³¼ å†…å¿ƒ å­¤åƒ» çš„ äºº ä¼š åš çš„ äº‹ 1 æ‰‹æœº ä¸ ç¦» èº« 2 å¯¹å¾… ä¸åŒ çš„ äºº æœ‰ ä¸åŒ çš„ æ€§æ ¼ 3 ä» å° æ‡‚å¾— å¾ˆå¤š é“ç† 4 æœ‰ æ—¶å€™ å¾ˆ ç¥ç» æœ‰æ—¶å€™ å¾ˆ é•‡é™ 5 ä¼š å› ä¸º åˆ«äºº ä¸€ å¥ è¯ ä¼¤å¿ƒ ä½† ä¸ ä¼š è¢« å‘ç° 6 å®‰æ…° å¾ˆå¤š äºº ä½† è‡ªå·± å´ æ²¡ äºº å®‰æ…° 7 ä¼š æ€€å¿µ ä»å‰ è®¨åŒ ç°åœ¨ 8 æœ‰æ—¶å€™ ä¼š ç¬‘ çš„ æ²¡ å¿ƒ æ²¡ è‚º æœ‰æ—¶ å´ å¾ˆ æ²‰é»˜ ä½  æ˜¯ è¿™æ · å—"</span><br><span class="line">10. "å¤–è¡¨ æ´»æ³¼ å†…å¿ƒ å­¤åƒ» çš„ äºº ä¼š åš çš„ äº‹ 1 æ‰‹æœº ä¸ ç¦» èº« 2 å¯¹å¾… ä¸åŒ çš„ äºº æœ‰ ä¸åŒ çš„ æ€§æ ¼ 3 ä» å° æ‡‚å¾— å¾ˆå¤š é“ç† 4 æœ‰ æ—¶å€™ å¾ˆ ç¥ç» æœ‰æ—¶å€™ å¾ˆ é•‡é™ 5 ä¼š å› ä¸º åˆ«äºº ä¸€ å¥ è¯ ä¼¤å¿ƒ ä½† ä¸ ä¼š è¢« å‘ç° 6 å®‰æ…° å¾ˆå¤š äºº ä½† è‡ªå·± å´ æ²¡ äºº å®‰æ…° 7 ä¼š æ€€å¿µ ä»å‰ è®¨åŒ ç°åœ¨ 8 æœ‰æ—¶å€™ ä¼š ç¬‘ çš„ æ²¡ å¿ƒ æ²¡ è‚º æœ‰ æ—¶ å´ å¾ˆ æ²‰é»˜ ä½  æ˜¯ è¿™æ · å— è½¬"</span><br><span class="line">11. "å¤–è¡¨ æ´»æ³¼ å†…å¿ƒ å­¤åƒ» çš„ äºº ä¼š åš çš„ äº‹ 1. æ‰‹æœº ä¸ ç¦» èº« 2. å¯¹å¾… ä¸åŒ çš„ äºº æœ‰ ä¸åŒ çš„ æ€§æ ¼ 3. ä»å° æ‡‚å¾— å¾ˆå¤š é“ç† 4. æœ‰æ—¶å€™ å¾ˆ ç¥ç» æœ‰æ—¶å€™ å¾ˆ é•‡é™ 5. ä¼š å› ä¸º åˆ«äºº ä¸€ å¥ è¯ ä¼¤å¿ƒ ä½† ä¸ ä¼š è¢« å‘ç° 6. å®‰æ…° å¾ˆå¤š äºº ä½† è‡ªå·± å´ æ²¡ äºº å®‰æ…° 7. ä¼š æ€€å¿µ ä»å‰ è®¨åŒ ç°åœ¨ 8. æœ‰æ—¶å€™ ä¼š ç¬‘ çš„ æ²¡ å¿ƒ æ²¡ è‚º æœ‰æ—¶ å´ å¾ˆ æ²‰é»˜"</span><br></pre></td></tr></table></figure>
<p>â€‹        çœ‹äº†è¿™ä¸ªï¼Œä½ è¿˜ç›¸ä¿¡æ˜Ÿåº§å—ï¼Ÿ</p>
<h2 id="8-å±€éƒ¨æ•æ„Ÿå“ˆå¸Œçš„ä¸€èˆ¬å®šä¹‰"><a href="#8-å±€éƒ¨æ•æ„Ÿå“ˆå¸Œçš„ä¸€èˆ¬å®šä¹‰" class="headerlink" title="8. å±€éƒ¨æ•æ„Ÿå“ˆå¸Œçš„ä¸€èˆ¬å®šä¹‰"></a>8. å±€éƒ¨æ•æ„Ÿå“ˆå¸Œçš„ä¸€èˆ¬å®šä¹‰</h2><p>ã€€ã€€å±€éƒ¨æ•æ„Ÿhashå®è´¨ä¸Šæ˜¯æ»¡è¶³ä¸€å®šæ¡ä»¶çš„å‡½æ•°ç°‡ï¼Œä¸Šé¢ä»‹ç»åªæ˜¯ä¸€ä¸ªåŸºäºJaccardçš„ä¾‹å­ï¼Œå®é™…ä¸Šè¿˜æœ‰é¢å‘å…¶ä»–è·ç¦»çš„LSHã€‚</p>
<p>ã€€ã€€ä»¤d1&lt;d2æ˜¯å®šä¹‰åœ¨è·ç¦»æµ‹å®šdä¸‹å¾—ä¸¤ä¸ªè·ç¦»å€¼ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°æ—çš„æ¯ä¸€ä¸ªå‡½æ•°fæ»¡è¶³ï¼š</p>
<p>ã€€ã€€ï¼ˆ1ï¼‰å¦‚æœd(x,y)&lt;=d1,åˆ™f(x)=f(y)çš„æ¦‚ç‡è‡³å°‘ä¸ºp1ï¼Œå³P(f(x)=f(y)) &gt;= p1;</p>
<p>ã€€ã€€ï¼ˆ2ï¼‰å¦‚æœd(x,y)&gt;=d2,åˆ™f(x)=f(y)çš„æ¦‚ç‡è‡³å¤šä¸ºp2ï¼Œå³p(f(x)=f(y)) &lt;= p2.</p>
<p>ã€€ã€€é‚£ä¹ˆç§°Fä¸º(d1,d2,p1,p2)-æ•æ„Ÿçš„å‡½æ•°æ—ã€‚å®é™…ä¸Šæˆ‘ä»¬ä¹‹å‰çš„æœ€å°hashå‡½æ•°æ—æ˜¯(d1,d2,1-d1,1-d2)-æ•æ„Ÿçš„ã€‚</p>
<p>ã€€ã€€å±€éƒ¨æ•æ„Ÿhashæ—è¿˜å¯ä»¥è¿›è¡Œæ”¾å¤§å¤„ç†ï¼Œå·²è·å¾—æ›´é«˜çš„å‡†ç¡®ç‡å’Œå¬å›ç‡ï¼Œå½“ç„¶ä¹Ÿæœ‰é¢å‘å…¶ä»–è·ç¦»çš„LSHã€‚æœ¬æ–‡çš„ä¸œè¥¿å…¨éƒ¨æºè‡ªå‚è€ƒæ–‡çŒ®çš„è¯¾æœ¬ï¼Œæœ‰å…´è¶£å¯ä»¥å¥½å¥½è¯»ä¸€ä¸‹è¿™æœ¬ä¹¦ã€‚</p>
<h2 id="9-å‚è€ƒæ–‡çŒ®"><a href="#9-å‚è€ƒæ–‡çŒ®" class="headerlink" title="9. å‚è€ƒæ–‡çŒ®"></a>9. å‚è€ƒæ–‡çŒ®</h2><blockquote>
<p>æœ¬æ–‡æ¥è‡ª<a href="http://www.cnblogs.com/fengfenggirl" target="_blank" rel="noopener">http://www.cnblogs.com/fengfenggirl</a></p>
</blockquote>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p><a href="http://www.stanford.edu/class/cs246/" target="_blank" rel="noopener">ã€ŠMining of Massive Datasetã€‹</a></p>
<p>ã€Šäº’è”ç½‘å¤§è§„æ¨¡æ•°æ®æŒ–æ˜ä¸åˆ†å¸ƒå¼å¤„ç†ã€‹</p>
]]></content>
      <categories>
        <category>Data Mining</category>
      </categories>
      <tags>
        <tag>å±€éƒ¨æ•æ„Ÿå“ˆå¸Œ</tag>
        <tag>Local Sensitive Hashing</tag>
        <tag>LSH</tag>
        <tag>Data Mining</tag>
        <tag>Algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>Freebase Search Cookbook</title>
    <url>/2020/09/15/Freebase-Search-Cookbook/</url>
    <content><![CDATA[<blockquote>
<p>å†…å®¹æ¥è‡ªäºï¼š<a href="https://developers.google.com/freebase/v1/search-cookbook" target="_blank" rel="noopener">https://developers.google.com/freebase/v1/search-cookbook</a></p>
</blockquote>
<h1 id="Search-Cookbook"><a href="#Search-Cookbook" class="headerlink" title="Search Cookbook"></a>Search Cookbook</h1><p>This page contains a list of recipes for different ways to constrain search queries using the <a href="https://developers.google.com/freebase/v1/search-overview" target="_blank" rel="noopener">Search Service</a>.</p>
<h2 id="Textual-constraints"><a href="#Textual-constraints" class="headerlink" title="Textual constraints"></a>Textual constraints</h2><p>Textual data for a Freebase entity comes first from its name and its aliases, then from its keys and other textual properties, and finally from its Wikipedia anchor data if it was reconciled with a language-specific Wikipedia topic.</p>
<p>Textual constraints are language-specific; currently, 18 languages are supported. English has by far the most coverage and is the default language.</p>
<p>For a list of all currently supported language codes, visit the following:</p>
<p><a href="https://www.googleapis.com/freebase/v1/search?help=langs&amp;indent=true" target="_blank" rel="noopener">https://www.googleapis.com/freebase/v1/search?help=langs&amp;indent=true</a></p>
<p>A textual constraint is specified with the <code>query</code> parameter. Its language is specified with the <code>lang</code> parameter. For example:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">query: &quot;gore&quot;</span><br><span class="line">query: &quot;gore&quot; lang: &quot;fr&quot;</span><br><span class="line">query: &quot;gore&quot; lang: &quot;de&quot;</span><br></pre></td></tr></table></figure>
<p>During indexing, <strong>textual data is normalized</strong> in a language-specific way. For example, in English, text is converted to lowercase and accents are removed. At query time, the same language-specific normalization is performed on the query text. For example:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">query: &quot;beyoncÃ©&quot;</span><br><span class="line">query: &quot;beyonce&quot;</span><br></pre></td></tr></table></figure>
<p>Several parameters control how a textual constraint is matched. Setting the <code>prefixed</code> parameter to <code>true</code> triggers a prefix match on name and aliases only (and a regular match on other textual data). For example:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">query: &quot;bob dy&quot; prefixed: true</span><br></pre></td></tr></table></figure>
<p>Setting <code>stemmed</code> to <code>true</code> triggers a stemmed match on name and aliases only (and a regular match on other textual data). Stemmed matches may be used to paste over language-specific suffix differences introduced by plurals or other grammatical forms. For example:<a id="more"></a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">query: &quot;potatos&quot; stemmed: true</span><br></pre></td></tr></table></figure>
<p>Surrounding the query text with double quotation marks (â€œâ€) triggers a phrase match. The text tokens in the query must appear next to each other in the matching entityâ€™s textual data. For example:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">query: &quot;\&quot;to be or not to be\&quot;&quot;</span><br></pre></td></tr></table></figure>
<p>Use the <code>name</code>, <code>alias</code>, and <code>type</code> parameters to match against people and person entities whose name contains the word you want to match. For example:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">filter: &quot;(all name:gore alias:gore type:/people/person)&quot;</span><br></pre></td></tr></table></figure>
<p>Similarly, the following example matches <code>/people/person</code> entities with a matching <code>alias</code> only and <em>not</em> their <code>name</code>:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">filter: &quot;(all (not name:gore) alias:gore type:/people/person)&quot;</span><br></pre></td></tr></table></figure>
<p>In addition to specifying what text fields should be matched, it is also possible to specify how the match should occur by inserting one of the following modifiers between the operand and the text field:</p>
<ul>
<li><code>{word}</code>: require that the words in the string match words in the corresponding text field in the document. <em>(default)</em></li>
<li><code>{phrase}</code>: require that the words occur next to each other in the same order in the corresponding text field in the document.</li>
<li><code>{full}</code>: like <code>{phrase}</code> but also require that the phrase completely match the text field, not just within the text field. In other words, a full match.</li>
</ul>
<p>For example, to find the musical single called Home by Marc Broussard, use a filter like the following:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">filter: &quot;(all type:/music/single name&#123;full&#125;:home /music/track/artist:&quot;Marc Broussard&quot;)&quot;</span><br></pre></td></tr></table></figure>
<h2 id="Language-constraints"><a href="#Language-constraints" class="headerlink" title="Language constraints"></a>Language constraints</h2><p>As described with textual constraints, the <code>lang</code> parameter is used to specify what language normalization rules to use to transform text into query tokens. The language of the query also conditions result ranking as freebase-search gets a language-specific relevance signal from the corresponding language Wikipedia.</p>
<p>Currently, nine languages are supported: English (en), Spanish (es), French (fr), German (de), Italian (it), Portuguese (pt), Chinese (zh), Japanese (ja) and Korean (ko). English has by far the most coverage and is the default language.</p>
<h3 id="Searching-with-multiple-languages-at-the-same-time"><a href="#Searching-with-multiple-languages-at-the-same-time" class="headerlink" title="Searching with multiple languages at the same time"></a>Searching with multiple languages at the same time</h3><p>The <code>lang</code> parameter accepts a comma-separated list of language codes that cause the search to be done in all the languages specified and the results to be ranked in the first language listed and displayed in the first language of the list that has a name for the entity.</p>
<p>For example:</p>
<p>The following searches for the German word â€œSonnenblumeâ€ in German and French. It ranks and displays the results in French:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">query: &quot;Sonnenblume&quot; lang: &quot;fr,de&quot;</span><br></pre></td></tr></table></figure>
<p>The following searches in English for movies whose language is Korean and displays their Korean name. The English part of the query is the word â€œkoreanâ€ in the <code>expressed_by</code> constraint:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">filter: &quot;(all expressed_by:korean type:/film/film)&quot; lang: &quot;ko,en&quot;</span><br></pre></td></tr></table></figure>
<h2 id="Schema-constraints"><a href="#Schema-constraints" class="headerlink" title="Schema constraints"></a>Schema constraints</h2><p>Schema constraints are specified with the <code>type</code> and the <code>domain</code> parameters. <code>type</code> corresponds to the <code>/type/object/type</code> property values of an entity.</p>
<p>For example, the following restricts a search to people only:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">query: &quot;gore&quot; type: &quot;/people/person&quot;</span><br></pre></td></tr></table></figure>
<p><code>domain</code> corresponds to the <code>/type/type/domain</code> values of all <code>/type/object/type</code> values of an entity.</p>
<p>For example, the following restricts a search to entities in French in the <code>/film</code> domain only:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">query: &quot;babar&quot; domain: &quot;/film&quot; lang: &quot;fr&quot;</span><br></pre></td></tr></table></figure>
<p>You can also use individual Freebase properties to filter a query. For example, the following restricts a search to people who are from Canada:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">query &quot;john&quot; filter: &quot;(all type:/people/person /people/person/nationality:&quot;Canada&quot;)&quot;</span><br></pre></td></tr></table></figure>
<h2 id="Metaschema-constraints"><a href="#Metaschema-constraints" class="headerlink" title="Metaschema constraints"></a>Metaschema constraints</h2><p><a href="https://developers.google.com/freebase/v1/search-metaschema" target="_blank" rel="noopener">Metaschema</a> constraints filter entities by semantic predicates. These predicates are higher level concepts built from collections of Freebase properties describing similar semantic relationships.</p>
<p>Metaschema constraints are specified using the <code>filter</code> parameter operands combined with an entity name or MID constraint.</p>
<h3 id="Supported-Metaschema-filter-operands"><a href="#Supported-Metaschema-filter-operands" class="headerlink" title="Supported Metaschema filter operands"></a>Supported Metaschema filter operands</h3><p>The following Metaschema filter operands are supported by Freebase Search. Try out each example by clicking on the link in the table, or by using the <a href="http://api-examples.freebaseapps.com/search" target="_blank" rel="noopener">Freebase Search Example App</a>.</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">Operand Name</th>
<th style="text-align:left">Example(s)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>abstraction</code></td>
<td style="text-align:left"><em>â€œfettuccine dishesâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;filter=(all+abstraction%3Afettuccine" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all abstraction:fettuccine)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>abstraction_of</code></td>
<td style="text-align:left"><em>â€œclass of the Western Bulwark locomotiveâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+abstraction_of%3A&quot;Western+Bulwark&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all abstraction_of:&quot;Western Bulwark&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>adaptation</code></td>
<td style="text-align:left"><em>â€œWorks La Traviata is an adaptation ofâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+adaptation_of%3A&quot;La+Traviata&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all adaptation_of:&quot;La Traviata&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>administered_by</code></td>
<td style="text-align:left"><em>â€œCannes awardsâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3Aawards+administered_by%3Acannes" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:awards administered_by:cannes)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>administers</code></td>
<td style="text-align:left"><em>â€œWho runs the Synapse newspaper?â€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+administers%3Asynapse" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all administers:synapse)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>appears_in</code></td>
<td style="text-align:left"><em>â€œcharacters in the Magic Fluteâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+appears_in%3A&quot;magic+flute&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all appears_in:&quot;magic flute&quot;)&quot;</code><em>â€œFiguren in der ZauberflÃ¶teâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+appears_in%3A&quot;Die+ZauberflÃ¶te&quot;" target="_blank" rel="noopener">Try it.</a>â€œ+lang%3A+â€deâ€&amp;indent=true))<code>filter: &quot;(all appears_in:&quot;Die ZauberflÃ¶te&quot;)&quot; lang: &quot;de&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>broader_than</code></td>
<td style="text-align:left"><em>â€œline of aircraft that the Airbus 319 belongs toâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+broader_than%3A&quot;Airbus+A319&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all broader_than:&quot;Airbus A319&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>category</code></td>
<td style="text-align:left"><em>â€œfrench actressesâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+category%3Afemale+origin%3Afrance+notable%3Aactor" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all category:female origin:france notable:actor)&quot;</code><em>â€œfrench actressesâ€ (variant)</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+category%3Afemale+origin%3Afrance+practitioner_of%3Aactor" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all category:female origin:france practitioner_of:actor)&quot;</code><em>â€œcalifornia or french volcanosâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+category%3Avolcano+(any+part_of%3Acalifornia+part_of%3Afrance" target="_blank" rel="noopener">Try it.</a>)&amp;indent=true))<code>filter: &quot;(all category:volcano (any part_of:california part_of:france))&quot;</code><em>â€œpasta dishesâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+category%3Apasta" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all category:pasta)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>center</code></td>
<td style="text-align:left"><em>â€œairlines with a hub in San Franciscoâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3Aairline+center%3A&quot;San+Francisco&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:airline center:&quot;San Francisco&quot;)&quot;</code><em>â€œairlines with hubs in San Francisco and Atlantaâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3Aairline+center%3A&quot;San+Francisco&quot;+center%3Aatlanta" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:airline center:&quot;San Francisco&quot; center:atlanta)&quot;</code><em>â€œnewspapers centered in San Franciscoâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3A%2Fbook%2Fnewspaper+center%3A%2Fm%2F0d6lp" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:/book/newspaper center:/m/0d6lp)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>center_for</code></td>
<td style="text-align:left"><em>â€œsports facilities for the San Francisco 49ersâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+center_for%3A&quot;san+francisco+49ers&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all center_for:&quot;san francisco 49ers&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>certification</code></td>
<td style="text-align:left"><em>â€œR-rated movies by Wim Wendersâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3A%2Ffilm%2Ffilm+contributor%3Awenders+certification%3Ar" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:/film/film contributor:wenders certification:r)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>character</code></td>
<td style="text-align:left"><em>â€œworks which have Papageno as characterâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+character%3Apapageno" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all character:papageno)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>child</code></td>
<td style="text-align:left"><em>â€œparents of Bill Clintonâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+child%3A&quot;bill+clinton&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all child:&quot;bill clinton&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>contributed_to</code></td>
<td style="text-align:left"><em>â€œWho contributed to Blade Runner?â€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+contributed_to%3A&quot;Blade+Runner&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all contributed_to:&quot;Blade Runner&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>contributor</code></td>
<td style="text-align:left"><em>â€œmovies by Steven Spielbergâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3A%2Ffilm%2Ffilm+contributor%3A&quot;Steven+Spielberg&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:/film/film contributor:&quot;Steven Spielberg&quot;)&quot;</code><em>â€œmovies by Steven Spielbergâ€</em> using the MID instead of the contributorâ€™s name. (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3A%2Ffilm%2Ffilm+contributor%3A%2Fm%2F06pj8" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:/film/film contributor:/m/06pj8)&quot;</code><em>â€œmovies with Harrison Fordâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3A%2Ffilm%2Ffilm+contributor%3A&quot;Harrison+Ford&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:/film/film contributor:&quot;Harrison Ford&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>created</code></td>
<td style="text-align:left"><em>â€œwho created â€˜for whom the bell tollsâ€™â€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+created%3A&quot;for+whom+the+bell+tolls&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all created:&quot;for whom the bell tolls&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>created_by</code></td>
<td style="text-align:left"><em>â€œsoftware by Googleâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+notable%3Asoftware+created_by%3Agoogle" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all notable:software created_by:google)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>discovered</code></td>
<td style="text-align:left"><em>â€œdiscoverers of radiumâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+discovered%3Aradium" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all discovered:radium)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>discovered_by</code></td>
<td style="text-align:left"><em>â€œdiscoveries by Curieâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+discovered_by%3Acurie" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all discovered_by:curie)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>distributed_by</code></td>
<td style="text-align:left"><em>â€œNPR showsâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3Ashow+distributed_by%3Anpr" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:show distributed_by:npr)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>exhibited</code></td>
<td style="text-align:left"><em>â€œwhere was â€˜down by lawâ€™ presented ?â€</em> (<a href="https://developers.google.com/freebase/v1/&amp;indent=true" target="_blank" rel="noopener">Try it.</a>)<code>filter: &quot;(all exhibited:&quot;down by law&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>exhibited_at</code></td>
<td style="text-align:left"><em>â€œnominated works shown at the 2010 Cannes Film Festivalâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3A&quot;nominated+work&quot;+exhibited_at%3A&quot;2010+Cannes+Film+festival&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:&quot;nominated work&quot; exhibited_at:&quot;2010 Cannes Film festival&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>expressed_by</code></td>
<td style="text-align:left"><em>â€œbooks in esperantoâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3Abook+expressed_by%3Aesperanto" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:book expressed_by:esperanto)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>fictional_link</code></td>
<td style="text-align:left"><em>â€œfictional characters related to Mickey Mouseâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3A%2Ffictional_universe%2Ffictional_character+fiction_link%3A&quot;mickey+mouse&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:/fictional_universe/fictional_character fiction_link:&quot;mickey mouse&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>genre</code></td>
<td style="text-align:left"><em>â€œgothic cathedralsâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+category%3Acathedral+genre%3Agothic" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all category:cathedral genre:gothic)&quot;</code><em>â€œgothic cathedrals by Viollet-le-ducâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+category%3Acathedral+genre%3Agothic+created_by%3Aviollet" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all category:cathedral genre:gothic created_by:viollet)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>identifies</code></td>
<td style="text-align:left"><em>â€œWhat identifies Southwest Airlines?â€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+identifies%3A&quot;Southwest+Airlines&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all identifies:&quot;Southwest Airlines&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>leader</code></td>
<td style="text-align:left"><em>â€œMitch Kapor companiesâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3Acompany+leader%3Akapor" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:company leader:kapor)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>leader_of</code></td>
<td style="text-align:left"><em>â€œParis mayorsâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+title%3Amayor+leader_of%3Aparis" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all title:mayor leader_of:paris)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>made_of</code></td>
<td style="text-align:left"><em>â€œwax paintingsâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3Apainting+made_of%3Awax" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:painting made_of:wax)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>means_of_demise</code></td>
<td style="text-align:left"><em>â€œexecuted politiciansâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3Apolitician+means_of_demise%3A&quot;capital+punishment&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:politician means_of_demise:&quot;capital punishment&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>member_of</code></td>
<td style="text-align:left"><em>â€œafrican monarchsâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3Amonarch+member_of%3Aafrica" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:monarch member_of:africa)&quot;</code><em>â€œDemocratic politicians and notable actorsâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3Apolitician+member_of%3Ademocratic+notable%3Aactor" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:politician member_of:democratic notable:actor)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>narrower_than</code></td>
<td style="text-align:left"><em>â€œexamples of v8 enginesâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3Aengine+narrower_than%3A&quot;v8+engine&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:engine narrower_than:&quot;v8 engine&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>occurs_in</code></td>
<td style="text-align:left"><em>â€œlanguages spoken in Romaniaâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3Alanguage+occurs_in%3Aromania" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:language occurs_in:romania)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>origin</code></td>
<td style="text-align:left"><em>â€œRepublican governors from Austriaâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+title%3Agovernor+member_of%3Arepublican+origin%3Aaustria" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all title:governor member_of:republican origin:austria)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>owner</code></td>
<td style="text-align:left"><em>â€œmakes owned by Fordâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3Amake+owner%3Aford" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:make owner:ford)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>owns</code></td>
<td style="text-align:left"><em>â€œWho owns the Mavericks?â€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+owns%3Amavericks" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all owns:mavericks)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>parent</code></td>
<td style="text-align:left"><em>â€œAl Goreâ€™s childrenâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+parent%3A&quot;al+gore&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all parent:&quot;al gore&quot;)&quot;</code><em>â€œdescendants of the Lisp programming languageâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3A%2Fcomputer%2Fprogramming_language+parent%3Alisp" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:/computer/programming_language parent:lisp)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>part_of</code></td>
<td style="text-align:left"><em>â€œswedish lakesâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3Alake+part_of%3Asweden" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:lake part_of:sweden)&quot;</code><em>â€œcompetitions at the 2008 summer olympicsâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3Acompetition+part_of%3A&quot;2008+summer+olympics&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:competition part_of:&quot;2008 summer olympics&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>participant</code></td>
<td style="text-align:left"><em>â€œBowie concertsâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+participant%3Abowie+type%3Aconcert" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all participant:bowie type:concert)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>participated_in</code></td>
<td style="text-align:left"><em>â€œNotable austrian skiers who participated in Olympicsâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+notable%3Askier+member_of%3Aaustria+participated_in%3Aolympics" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all notable:skier member_of:austria participated_in:olympics)&quot;&#39;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>peer_of</code></td>
<td style="text-align:left"><em>â€œpoliticians peers of Al Goreâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+notable%3Apolitician+peer_of%3Agore" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all notable:politician peer_of:gore)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>permits_use_of</code></td>
<td style="text-align:left"><em>â€œDiesel enginesâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+permits_use_of%3Adiesel" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all permits_use_of:diesel)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>portrayed</code></td>
<td style="text-align:left"><em>â€œactors who portrayed John Lennonâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+notable%3Aactor+portrayed%3A&quot;john+lennon&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all notable:actor portrayed:&quot;john lennon&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>portrayed_by</code></td>
<td style="text-align:left"><em>â€œcharacters portrayed by Harrison Fordâ€</em> (<a href="https://developers.google.com/freebase/v1/&amp;indent=true" target="_blank" rel="noopener">Try it.</a>)<code>filter: &quot;(all portrayed_by:&quot;Harrison Ford&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>practitioner_of</code></td>
<td style="text-align:left"><em>â€œfemale african american lawyersâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+category%3Afemale+category%3A&quot;african+american&quot;+practitioner_of%3Alawyer" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all category:female category:&quot;african american&quot; practitioner_of:lawyer)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>preceeding</code></td>
<td style="text-align:left"><em>â€œsequels to The Lord of the Rings, the two Towersâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3A%2Ffilm%2Ffilm+preceeding%3A&quot;The+Lord+of+the+Rings%2C+the+two+Towers&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:/film/film preceeding:&quot;The Lord of the Rings, the two Towers&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>produced_by</code></td>
<td style="text-align:left"><em>â€œApple computersâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3Acomputers+produced_by%3Aapple" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:computers produced_by:apple)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>publication</code></td>
<td style="text-align:left"><em>â€œwhich book has /m/0clw238 as first edition ?â€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+publication%3A%2Fm%2F0clw238" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all publication:/m/0clw238)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>publication_of</code></td>
<td style="text-align:left"><em>â€œreleases of La Traviataâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+publication_of%3A&quot;La+Traviata&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all publication_of:&quot;La Traviata&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>service_area</code></td>
<td style="text-align:left"><em>â€œCalifornia broadcastersâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3Abroadcaster+service_area%3Acalifornia" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:broadcaster service_area:california)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>status</code></td>
<td style="text-align:left"><em>â€œretreating swiss glaciersâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3Aglacier+status%3Aretreating+part_of%3Aswitzerland" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:glacier status:retreating part_of:switzerland)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>subclass_of</code></td>
<td style="text-align:left"><em>â€œkinds of swimwearâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+subclass_of%3Aswimwear" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all subclass_of:swimwear)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>subject</code></td>
<td style="text-align:left"><em>â€œmovies about the Holocaustâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3Afilm+subject%3Aholocaust" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:film subject:holocaust)&quot;</code><em>â€œbooks about mathematicsâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3Abook+subject%3Amathematics" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:book subject:mathematics)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>subsequent</code></td>
<td style="text-align:left"><em>â€œprequels to The Lord of the Rings, the two Towersâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3A%2Ffilm%2Ffilm+subsequent%3A&quot;The+Lord+of+the+Rings%2C+the+two+Towers&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:/film/film subsequent:&quot;The Lord of the Rings, the two Towers&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>succeeded_by</code></td>
<td style="text-align:left"><em>â€œWhich automotive platform was succeeded by the Ford B3 platform ?â€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+succeeded_by%3A&quot;ford+b3+platform&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all succeeded_by:&quot;ford b3 platform&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>succeeds</code></td>
<td style="text-align:left"><em>â€œWho succeeded the House of Stuart ?â€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+succeeds%3Astuart" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all succeeds:stuart)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>superclass_of</code></td>
<td style="text-align:left"><em>â€œClasses coronary heart disease belongs toâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+superclass_of%3A&quot;coronary+heart+disease&quot;" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all superclass_of:&quot;coronary heart disease&quot;)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>title</code></td>
<td style="text-align:left"><em>â€œGoogle engineersâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+title%3Aengineer+member_of%3Agoogle" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all title:engineer member_of:google)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>tookplace_at</code></td>
<td style="text-align:left"><em>â€œbattles that took place at Marengoâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3Abattles+tookplace_at%3Amarengo" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:battles tookplace_at:marengo)&quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>use_permitted_by</code></td>
<td style="text-align:left"><em>â€œFile formats supported on an iPhoneâ€</em> (<a href="https://www.googleapis.com/freebase/v1/search?query=&amp;limit=10&amp;filter=(all+type%3A&quot;file+format&quot;+use_permitted_by%3Aiphone" target="_blank" rel="noopener">Try it.</a>&amp;indent=true))<code>filter: &quot;(all type:&quot;file format&quot; use_permitted_by:iphone)&quot;</code></td>
</tr>
</tbody>
</table>
</div>
<h2 id="Scoring-and-ranking"><a href="#Scoring-and-ranking" class="headerlink" title="Scoring and ranking"></a>Scoring and ranking</h2><p>Freebase entities have an inherent relevance score (ranking) computed during indexing that is function of its inbound and outbound link counts in Freebase and Wikipedia. Some popular Freebase entities also have a popularity score computed by Google. By default, both scores are combined together during queries.</p>
<p>When a textual constraint is present, a textual match score is computed from the number of hits returned by the search index and is combined with the relevance score.</p>
<p>FreebaseSearch results are always sorted by the final score, highest score first.</p>
<p>The scoring parameter makes it possible to control what relevance score components are used to compute the final score:</p>
<p><strong>freebase</strong>: Use only the Freebase relevance score.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">query: &quot;beyoncÃ©&quot; scoring: freebase</span><br></pre></td></tr></table></figure>
<p><strong>entity</strong>: Use both relevance scores, which replaces any missing Google scores to 1.0. This is the default.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">query: &quot;beyoncÃ©&quot; scoring: entity</span><br></pre></td></tr></table></figure>
<p><strong>schema</strong>: Use when looking for schema entities like types, properties or domains. The link counts of schema entities is computed differently.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">query: &quot;performance&quot; scoring: schema</span><br></pre></td></tr></table></figure>
<h2 id="Other-constraints"><a href="#Other-constraints" class="headerlink" title="Other constraints"></a>Other constraints</h2><p>Entities can be filtered by index tag using the with or without parameters. Entities are tagged during indexing, each tag corresponding to one or several Freebase queries that would be too expensive to run during search:</p>
<p><code>commons</code> is a tag that can be used to restrict a schema search to returning only Freebase Commons schema. For example, Freebase Commons types matching the word â€œcolorâ€</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">query: &quot;color&quot; type: &quot;/type/type&quot; with: &quot;commons&quot;</span><br></pre></td></tr></table></figure>
<p><code>gg</code> is a tag that can be used to restrict a search to entities for which there is or isnâ€™t a Google popularity score.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">query: &quot;1923&quot; type: &quot;/people/person&quot; with: &quot;gg&quot;</span><br><span class="line">query: &quot;1923&quot; type: &quot;/people/person&quot; without: &quot;gg&quot;</span><br></pre></td></tr></table></figure>
<p>The <code>without</code> parameter is equivalent to the a negated with in a filter expression.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">query: &quot;color&quot; limit: 5 type: &quot;/type/type&quot; without: &quot;commons&quot; query: &quot;color&quot; limit: 5 type: &quot;/type/type&quot; filter: &quot;(not with:commons)&quot;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Knowledge Graph</category>
      </categories>
      <tags>
        <tag>Freebase</tag>
        <tag>Knowledge Graph</tag>
        <tag>çŸ¥è¯†å›¾è°±</tag>
        <tag>SPARQL</tag>
        <tag>search</tag>
      </tags>
  </entry>
  <entry>
    <title>Freebaseä»‹ç»</title>
    <url>/2020/09/15/Freebase%E4%BB%8B%E7%BB%8D/</url>
    <content><![CDATA[<blockquote>
<p>å†…å®¹æ¥è‡ªäºFreebaseå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://developers.google.com/freebase/guide/basic_concepts" target="_blank" rel="noopener">https://developers.google.com/freebase/guide/basic_concepts</a></p>
</blockquote>
<h1 id="Basic-Concepts"><a href="#Basic-Concepts" class="headerlink" title="Basic Concepts"></a>Basic Concepts</h1><p>If you are new to Freebase, this section covers the basic terminology and concepts required to understand how Freebase works.</p>
<h2 id="Graphs"><a href="#Graphs" class="headerlink" title="Graphs"></a>Graphs</h2><p>Freebase data is stored in a data structure called a <a href="http://en.wikipedia.org/wiki/Graph_(abstract_data_type" target="_blank" rel="noopener">graph</a>). A graph is composed on nodes connected by edges. In Freebase, the nodes are defined using <a href="http://www.freebase.com/type/object" target="_blank" rel="noopener">/type/object</a> and edges are defined using <a href="http://www.freebase.com/type/link" target="_blank" rel="noopener">/type/link</a>. By storing the data as a graph, Freebase can quickly traverse arbitrary connections between topics and easily add new schema without having to change structure of the data.</p>
<h2 id="Topics"><a href="#Topics" class="headerlink" title="Topics"></a>Topics</h2><p>Freebase has over 39 million topics about real-world entities like people, places and things. Since Freebase data is represented a graph, these topics correspond to the nodes in the graph. However, not every node is a topic. See the section on <a href="https://developers.google.com/freebase/guide/basic_concepts#cvts" target="_blank" rel="noopener">CVTs</a> to as an example of nodes that are not topics.</p>
<p>Examples of the types of topics found in Freebase:</p>
<ul>
<li>Physical entities, e.g., <a href="http://www.freebase.com/en/bob_dylan" target="_blank" rel="noopener">Bob Dylan</a>, <a href="http://www.freebase.com/en/louvre" target="_blank" rel="noopener">the Louvre Museum</a>, the <a href="http://www.freebase.com/en/saturn" target="_blank" rel="noopener">Saturn planet</a>, to</li>
<li>Artistic/media creations, e.g., <a href="http://www.freebase.com/en/the_dark_knight" target="_blank" rel="noopener">The Dark Knight (film)</a>, <a href="http://http//www.freebase.com/guid/9202a8c04000641f80000000002e46af" target="_blank" rel="noopener">Hotel California (song)</a>, to</li>
<li>Classifications, e.g., <a href="http://www.freebase.com/en/noble_gas" target="_blank" rel="noopener">noble gas</a>, <a href="http://www.freebase.com/en/chordate" target="_blank" rel="noopener">Chordate</a>, to</li>
<li>Abstract concepts, e.g., <a href="http://www.freebase.com/en/love" target="_blank" rel="noopener">love</a>, to</li>
<li>Schools of thoughts or artistic movements, e.g., <a href="http://www.freebase.com/en/impressionism" target="_blank" rel="noopener">Impressionism</a>.</li>
</ul>
<p>Some topics are notable because they hold a lot of data (e.g., <a href="http://www.freebase.com/en/wal-mart" target="_blank" rel="noopener">Wal-Mart</a>), and some are notable because they link to many other topics, potentially in different domains of information. For example, abstract topics like love, poverty, chivalry, etc. donâ€™t have many properties associated with them but they appear often as book subjects, poetry subjects, film subjects, etc. making them more notable.</p>
<h2 id="Types-and-Properties"><a href="#Types-and-Properties" class="headerlink" title="Types and Properties"></a>Types and Properties</h2><p>Any given topic can be seen for many different perspectives for example:</p>
<ul>
<li>Bob Dylan was a song writer, singer, performer, book author, and film actor;</li>
<li>Leonardo da Vinci was a painter, a sculptor, an anatomist, an architect, an engineer, â€¦;</li>
<li>Love is a book subject, film subject, play subject, poetry subject, â€¦;</li>
<li>Any city is a location, potentially a tourist destination, and an employer of civil servants.<a id="more"></a></li>
</ul>
<p>In order to capture this multi-faceted nature of many topics, we introduce the concept of <em>types</em> in Freebase. Topics in Freebase can have any number of types assigned to them. The topic about Bob Dylan is assigned several types: the song writer type, the music composer type, the music artist (singer) type, the book author type, etc. Each type carries a different set of <em>properties</em> germane to that type. For example,</p>
<ul>
<li>The music artist type contains a property that lists all the albums that Bob Dylan has produced as well as all the music instruments he was known to play;</li>
<li>The book author type contains a property that lists all the books Bob Dylan has written or edited, as well as his writing school of thoughts or movement;</li>
<li>The company type contains many property for listing a companyâ€™s founders, board members, parent company, divisions, employees, products, year-by-year revenue and profit records, etc.</li>
</ul>
<p>Thus, a type can be thought of as a conceptual container of properties that are most commonly needed for describing a particular aspect of information. (You can think of a type as analogous to a relational table, and each â€œtypeâ€ table has a foreign key into the one â€œidentityâ€ table that uniquely defines each topic.)</p>
<h2 id="Domains-and-IDs"><a href="#Domains-and-IDs" class="headerlink" title="Domains and IDs"></a>Domains and IDs</h2><p>Just as properties are grouped into types, types themselves are grouped into <em>domains</em>. Think of domains as the sections in your favorite newspaper: Business, Life Style, Arts and Entertainment, Politics, Economics, etc. Each domain is given an ID (identifier), e.g.,</p>
<ul>
<li><code>/business</code> is the ID of the Business domain</li>
<li><code>/music</code> - the Music domain</li>
<li><code>/film</code> - the Film domain</li>
<li><code>/medicine</code> - the Medicine domain</li>
</ul>
<p>The ID of a domain looks like a file path, or a path in a web address.</p>
<p>Each type is also given an ID, and its ID is based on the domain in which it belongs. For example, the Company type belongs in the Business domain, and itâ€™s given the ID <code>/business/company</code>. Here are some other examples:</p>
<ul>
<li><code>/music/album</code> is the ID of the (Music) Album type, belonging in the Music domain</li>
<li><code>/film/actor</code> - the Actor type in the Film domain</li>
<li><code>/medicine/disease</code> - the Disease type in the Medicine domain</li>
</ul>
<p>Just as a type inherits the beginning of its ID from its domain, a property also inherits the beginning of its ID from the type it belongs to. For example, the Industry property of the Company type (used for specifying which industry a company is in) is given the ID <code>/business/company/industry</code>. Here are some other examples:</p>
<ul>
<li><code>/automotive/engine/horsepower</code> is the ID of the Horsepower property of the (Automotive) Engine type</li>
<li><code>/astronomy/star/planet_s</code> is the ID of the Planets property of the Star type (used for listing planets around a star)</li>
<li><code>/language/human_language/writing_system</code> is the ID of the Writing System property of the Human Language type</li>
</ul>
<p>Thus, even though <strong>types are not arranged into hierarchies in Freebase</strong>; domains, types, and properties are given IDs conceptually arranged in a file directory-like hierarchy.</p>
<h2 id="Compound-Value-Types"><a href="#Compound-Value-Types" class="headerlink" title="Compound Value Types"></a>Compound Value Types</h2><p>A Compound Value Type is a Type within Freebase which is used to represent data where each entry consists of multiple fields. Compound value types, or CVTâ€™s are used in Freebase to represent complex data. It may be a little confusing at first, but CVTâ€™s are a very important part of the Freebase schema and allow it to more accurately model complex relationships between topics.</p>
<p><strong>Think about the following example: Population for a city is something that changes over time.</strong> That means, whenever you query Freebase for population, you are at least implicitly asking for a population at a certain date. Two Values are involved, a number of people, and the date. Hereâ€™s a situation where a CVT becomes extremely useful. Without one, to model population data, you would need to make a topic, and name it something like â€œVancouverâ€™s population in 1997â€, and submit the information over there.</p>
<p><strong>A CVT can be thought of as a topic that does not require you to make a display name.</strong> CVTâ€™s, like normal topics, have a GUID that can be referenced independently. However, the Freebase client treats them much differently than topics. In most cases, every property of the CVT should be a disambiguation property.</p>
<h2 id="Topic-MIDs"><a href="#Topic-MIDs" class="headerlink" title="Topic MIDs"></a>Topic MIDs</h2><p>While a topic might or might not be identifiable by namespace/key IDs, it can always be identified with a MID â€” a Machine Identifier, which consist <code>/m/</code> followed by a base-32 unique identifier. MIDs are assigned to topics at creation time, and are managed throughout the topicâ€™s lifetime. They play a critical role when topics are merged or split, allowing external applications to track the logical topic even though the physical Freebase identity (the topicâ€™s GUID) may change. Machine-generated ids differ from other human-readable Freebase ids (returned by the â€œidâ€ property) in that they are:</p>
<ul>
<li>Guaranteed to exist</li>
<li>Machine-generated</li>
<li>Designed to support offline comparison</li>
<li>Not designed to convey meaning to humans</li>
<li>Short (possibly fixed length)</li>
<li>Ideal for quick exchange of keys between external systems and components (external, exchange)</li>
</ul>
<p>MIDs are the recommended identifier to use to address topics in Freebase</p>
<h2 id="Namespaces-Keys-and-Topic-IDs"><a href="#Namespaces-Keys-and-Topic-IDs" class="headerlink" title="Namespaces, Keys, and Topic IDs"></a>Namespaces, Keys, and Topic IDs</h2><p>The <strong>file directory-like hierarchy of domain, type, and property IDs</strong> is just one application of a more general concept: <em>namespaces</em> and <em>keys</em>. A namespace is like a file directory, and a key is like a file name. Just as all file names within a particular file directory must be unique among themselves, all keys within a particular namespace must also be unique among themselves.</p>
<p>As a more specific example, <code>/business</code> is the namespace corresponding to the Business domain. Within it, Business-related types are given keys (e.g., <code>company</code>) that are unique among themselves. Each typeâ€™s ID is formed by appending its key to the namespaceâ€™s ID (e.g., <code>/business/company</code>).</p>
<p>There are several kinds of namespaces beside namespaces that correspond to domains and types. Most <strong>important and frequently encountered is the <code>/en</code> namespace</strong>. This is the English namespace in which most well-known topics can be given unique keys to form human-readable English IDs. For example, the prolific Bob Dylan is so well-known that his topic in Freebase is given the key <code>bob_dylan</code> in the <code>/en</code> namespace, and so the topicâ€™s ID is <code>/en/bob_dylan</code>. This ID allows you to access his topic in the web client with the simple URL</p>
<h2 id="More-on-Properties"><a href="#More-on-Properties" class="headerlink" title="More on Properties"></a>More on Properties</h2><p>The last basic concept to discuss involves a major difference between Freebase properties and their analogy in relational database technologies, namely relational table columns. For each row, a relational table column can only hold one value. For example, consider a typical â€œbookâ€ relational table with a column named â€œauthorâ€. For each row in the â€œbookâ€ table, the â€œauthorâ€ column can only hold one foreign key to an â€œauthorâ€ table. If a book happens to have several authors, then this simple relational schema design does not work, and we would have to make a new table to model the authorships. That is, we would need one â€œbookâ€ table, one â€œauthorâ€ table, and one â€œauthorshipâ€ table to store <strong>the n-to-n relationships between books and authors</strong>. And the way you retrieve data changes quite radically as you switch from one schema design to the other.</p>
<p>In contrast with conventional database technologies, <strong>Freebase considers multi-value properties to be so desirable in modeling real-life data that it supports multi-value properties by default</strong>. That is, when the <code>/book/written_work/author</code> property was created, it was assumed to allow for multiple authors per book, and you can query for a multi-value property and for a single-value property in exactly the same way. There is no need to think if you need to join with a third table that models the n-to-n relationship.</p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><ul>
<li>A type is a conceptual container of related properties commonly needed to describe a certain aspect of a topic.</li>
<li>A topic can be assigned one or more types (the default type being <code>/common/topic</code>)</li>
<li>As properties are grouped into types, types are grouped into domains.</li>
<li>Domains, types, and properties are given IDs in a namespace/key hierarchy.</li>
<li>Common well-known topics are given IDs in the <code>/en</code> namespace, which are human-readable English strings.</li>
<li>Topics are uniquely identified within Freebase by GUIDs.</li>
<li>Properties are multi-value by default, and multi-value properties and single-value properties can be queried in the same way.</li>
</ul>
<h1 id="Search-Overview"><a href="#Search-Overview" class="headerlink" title="Search Overview"></a>Search Overview</h1><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p><img src="https://developers.google.com/freebase/images/Search-Service.png" alt="img"></p>
<p>The Freebase Search API provides access to Freebase data given a free text query. The results of the query are ordered and have a numerical relevancy score.</p>
<p>Developers can apply filters to constrain the search results to certain types of data. See the <a href="https://developers.google.com/freebase/v1/search-cookbook" target="_blank" rel="noopener">Search Cookbook</a> for more information on how to construct detailed search queries.</p>
<p>Some examples of how developers may want to use the Search API include:</p>
<ul>
<li>Autosuggesting entities (e.g. <a href="https://developers.google.com/freebase/v1/suggest" target="_blank" rel="noopener">Freebase Suggest Widget</a>)</li>
<li>Getting a ranked list of the most notable entities with a given name.</li>
<li>Finding entities using <a href="https://developers.google.com/freebase/v1/search-metaschema" target="_blank" rel="noopener">Search Metaschema</a>.</li>
</ul>
<p>The following code in Python show how to perform a search for a musical artist that matches the text â€œCee Lo Greenâ€. An additional constraint is that they created something called â€œThe Lady Killerâ€.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> urllib</span><br><span class="line">api_key = open(<span class="string">".api_key"</span>).read()</span><br><span class="line">query = <span class="string">'blue bottle'</span></span><br><span class="line">service_url = <span class="string">'https://www.googleapis.com/freebase/v1/search'</span></span><br><span class="line">params = &#123; </span><br><span class="line">    <span class="string">'query'</span>: query, </span><br><span class="line">    <span class="string">'key'</span>: api_key</span><br><span class="line">&#125;</span><br><span class="line">url = service_url + <span class="string">'?'</span> + urllib.urlencode(params)</span><br><span class="line">response = json.loads(urllib.urlopen(url).read())</span><br><span class="line"><span class="keyword">for</span> result <span class="keyword">in</span> response[<span class="string">'result'</span>]:  </span><br><span class="line">    print(result[<span class="string">'name'</span>] + <span class="string">' ('</span> + str(result[<span class="string">'score'</span>]) + <span class="string">')'</span>)</span><br></pre></td></tr></table></figure>
<p>Also see the <a href="https://developers.google.com/freebase/v1/libraries" target="_blank" rel="noopener">Client Libraries</a> page to see if your favorite language is supported.</p>
<h3 id="Search-API-documentation"><a href="#Search-API-documentation" class="headerlink" title="Search API documentation"></a>Search API documentation</h3><p>Also see the following documentation:</p>
<ul>
<li>See the <a href="https://developers.google.com/freebase/v1/search" target="_blank" rel="noopener">Search reference documents</a> for details on how to use the API.</li>
<li>See the <a href="https://developers.google.com/freebase/v1/search-cookbook" target="_blank" rel="noopener">Search Cookbook</a> for more information on how to construct detailed search queries.</li>
<li>See the <a href="https://developers.google.com/freebase/v1/search-metaschema" target="_blank" rel="noopener">Search Metaschema document</a> for information on how the relationships between entities and properties are described.</li>
</ul>
<h2 id="Security-considerations"><a href="#Security-considerations" class="headerlink" title="Security considerations"></a>Security considerations</h2><p>The Search API indexes and searches user generated content stored in the Freebase graph. This means that you cannot directly use the content on a web page without safely escaping it first.</p>
<p>See <a href="https://developers.google.com/freebase/v1/getting-started#security" target="_blank" rel="noopener">Getting Started: Security</a> for more information.</p>
<h2 id="Advanced-filtering"><a href="#Advanced-filtering" class="headerlink" title="Advanced filtering"></a>Advanced filtering</h2><p>The Search API supports a large number of filter constraints to better aim the search at the correct entities.</p>
<p>For example, using a â€œtypeâ€ filter constraint, we can show a list of the most notable people in Freebase.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">filter=(any type:/people/person)</span><br></pre></td></tr></table></figure>
<p>Filter constraints accept a variety of inputs:</p>
<ul>
<li>Human readable IDs for schema entities or users, for example:<ul>
<li><code>/people/person</code> for a type constraint</li>
<li><code>/film</code> for a domain constraint</li>
</ul>
</li>
<li>Freebase MIDs, for example:<ul>
<li><code>/m/04kr</code> for the same <code>/people/person</code> type constraint</li>
<li><code>/m/010s</code> for the above <code>/film</code> domain constraint</li>
</ul>
</li>
<li>Entity names, for example:<ul>
<li><code>&quot;person&quot;</code> for a less precise <code>/people/person</code> type constraint</li>
<li><code>&quot;film&quot;</code> for a less precise <code>/film</code> domain constraint</li>
</ul>
</li>
</ul>
<p>Filter constraints can be classified into a few categories. See the <a href="https://developers.google.com/freebase/v1/search-cookbook" target="_blank" rel="noopener">Search Cookbook</a> for more details.</p>
<p>Filter constraints can be freely combined and repeated in the <code>SearchRequest</code> directly. Repeated filter constraint parameters are combined into an OR query. Different filter constraint parameters or groups are combined into an AND query.</p>
<p><strong>For example:</strong></p>
<p>To search for â€œpeople or cities named <em>Gore</em>â€œ, try:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">query=gore</span><br><span class="line">&amp;filter=(any type:/people/person type:/location/citytown)</span><br></pre></td></tr></table></figure>
<p>This combining behavior can be overriden and better controlled with the filter parameter which offers a richer interface to combining constraints. It is an s-expression, possibly arbitrarily nested, where the operator is one of:</p>
<ul>
<li><code>any</code>, logically an OR</li>
<li><code>all</code>, logically an AND</li>
<li><code>not</code></li>
<li><code>should</code>, which can only be used at the top level and which denotes that the constraint is optional. During scoring, matches that donâ€™t match optional constraints have their score divided in half for each optional constraint they donâ€™t match.</li>
</ul>
<p><strong>For example:</strong></p>
<p>To match on the <code>/people/person</code> type or the <code>/film</code> domain, try:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">query=gore &amp;filter=(any type:/people/person domain:/film)</span><br></pre></td></tr></table></figure>
<p>ä¸‹ä¸€ç¯‡æ–‡ç« ç»§ç»­ä»‹ç»Search Cookbook~</p>
]]></content>
      <categories>
        <category>Knowledge Graph</category>
      </categories>
      <tags>
        <tag>Freebase</tag>
        <tag>çŸ¥è¯†å›¾è°±</tag>
        <tag>SPARQL</tag>
        <tag>Knowledeg Graph</tag>
        <tag>ontology</tag>
      </tags>
  </entry>
  <entry>
    <title>Focal Loss</title>
    <url>/2020/09/07/Focal-Loss/</url>
    <content><![CDATA[<h2 id="1-æ€»è¿°"><a href="#1-æ€»è¿°" class="headerlink" title="1. æ€»è¿°"></a>1. æ€»è¿°</h2><p>Focal Lossæ˜¯ç”±ä½•æºæ˜å¤§ç¥åœ¨è®ºæ–‡<a href="https://arxiv.org/abs/1708.02002" target="_blank" rel="noopener">Focal Loss for Dense Object Detection</a>ä¸­æå‡ºçš„ã€‚</p>
<p>Focal Lossä¸»è¦æ˜¯ä¸ºäº†è§£å†³one-stageç›®æ ‡æ£€æµ‹ä¸­æ­£è´Ÿæ ·æœ¬æ¯”ä¾‹ä¸¥é‡å¤±è¡¡çš„é—®é¢˜ã€‚è¯¥æŸå¤±å‡½æ•°é™ä½äº†å¤§é‡è´Ÿæ ·æœ¬åœ¨è®­ç»ƒä¸­æ‰€å çš„æƒé‡ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºä¸€ç§å›°éš¾æ ·æœ¬æŒ–æ˜ã€‚</p>
<h2 id="2-æŸå¤±å‡½æ•°å½¢å¼"><a href="#2-æŸå¤±å‡½æ•°å½¢å¼" class="headerlink" title="2. æŸå¤±å‡½æ•°å½¢å¼"></a>2. æŸå¤±å‡½æ•°å½¢å¼</h2><p>Focal Lossæ˜¯åœ¨äº¤å‰ç†µæŸå¤±å‡½æ•°åŸºç¡€ä¸Šè¿›è¡Œçš„ä¿®æ”¹ï¼Œé¦–å…ˆå›é¡¾äºŒåˆ†ç±»äº¤å‰ç†µæŸå¤±ï¼š</p>
<script type="math/tex; mode=display">
Loss = - [y\log y^{'} + (1-y) \log (1-y^{'})] = 
\left\{\begin{aligned}
-\log y^{'}\quad \quad y=1 \\
-\log (1-y^{'}) \quad y=0
\end{aligned}
\right.</script><p>$y^{â€˜}$æ˜¯ç»è¿‡æ¿€æ´»å‡½æ•°çš„è¾“å‡ºï¼Œä»‹äº0-1ä¹‹é—´ã€‚å¯è§æ™®é€šçš„äº¤å‰ç†µå¯¹äºæ­£æ ·æœ¬è€Œè¨€ï¼Œè¾“å‡ºæ¦‚ç‡è¶Šå¤§æŸå¤±è¶Šå°ã€‚å¯¹äºè´Ÿæ ·æœ¬è€Œè¨€ï¼Œè¾“å‡ºæ¦‚ç‡è¶Šå°åˆ™æŸå¤±è¶Šå°ã€‚æ­¤æ—¶çš„æŸå¤±å‡½æ•°åœ¨å¤§é‡ç®€å•æ ·æœ¬çš„è¿­ä»£è¿‡ç¨‹ä¸­æ”¶æ•›æ¯”è¾ƒç¼“æ…¢è€Œä¸”å¯èƒ½æ— æ³•ä¼˜åŒ–åˆ°æœ€ä¼˜ã€‚é‚£ä¹ˆFocal Lossæ˜¯æ€ä¹ˆæ”¹è¿›çš„å‘¢ï¼Ÿ</p>
<script type="math/tex; mode=display">
Loss_{focal} = 
\left\{
\begin{aligned}
-(1-y^{'})^\gamma \log y^{'}  & \quad & y=1\\
-y^{'\gamma} \log (1-y^{'}) & \quad & y=0
\end{aligned}
\right.</script><p>é¦–å…ˆåœ¨åŸæœ‰çš„åŸºç¡€ä¸Šæ·»åŠ äº†$(1-y^{â€˜})$å’Œ$y^{â€˜}$é¡¹ï¼Œå¯ä»¥çœ‹ä½œå½“å‰æ ·æœ¬åœ¨æŸå¤±å‡½æ•°ä¸­æ‰€å çš„æƒé‡ã€‚å½“$y=1$æ—¶ï¼Œé¢„æµ‹ç»“æœ$y^{â€˜}$è¶Šæ¥è¿‘$1$ï¼Œè¯´æ˜å½“å‰æ ·æœ¬ç½®ä¿¡åº¦è¶Šé«˜ã€è¶Šå®¹æ˜“åˆ†ç±»ï¼Œå¯¹åº”çš„æƒé‡$(1-y^{â€˜})$å°±è¶Šä½ã€‚$y=0$æ—¶ç±»ä¼¼ã€‚</p>
<p>è€Œ$\gamma$ç”¨äºæ§åˆ¶æƒ©ç½šåŠ›åº¦ï¼Œ$\gamma$è¶Šå¤§ï¼Œæƒ©ç½šåŠ›åº¦è¶Šå°ï¼š</p>
<p><img src="/images/blog/2020/focalloss.png" alt></p>
<h2 id="3-è¡¥å……"><a href="#3-è¡¥å……" class="headerlink" title="3. è¡¥å……"></a>3. è¡¥å……</h2><p>å¯¹äºæ­£è´Ÿæ ·æœ¬ç±»åˆ«ä¸å¹³è¡¡ï¼Œå¯ä»¥åœ¨ä¸Šå¼åŸºç¡€ä¸Šç»§ç»­æ·»åŠ å¹³è¡¡å› å­$\alpha$ï¼Œå½¢å¼å˜ä¸ºï¼š</p>
<script type="math/tex; mode=display">
Loss_{focal} = 
\left\{
\begin{aligned}
-\alpha(1-y^{'})^\gamma \log y^{'} \quad & \quad & y=1\\
-(1-\alpha)y^{'\gamma} \log (1-y^{'}) & \quad & y=0
\end{aligned}
\right.</script><p>åœ¨æ–‡ä¸­è´Ÿæ ·æœ¬æ¯”é‡è¾ƒå¤§ï¼Œè®ºæ–‡ä¸­å–$\alpha=0.25$</p>
<p>åœ¨è®ºæ–‡ä¸­å®éªŒå‘ç°$\gamma$å–$2.0$æ•ˆæœæœ€ä¼˜</p>
<p>å¯¹äºä¸åŒçš„æ•°æ®é›†ï¼Œæœ€ä¼˜å‚æ•°ä¸åŒï¼Œå¯ä»¥é€šè¿‡grid-searchçš„æ–¹æ³•é€‰æ‹©é€‚åˆè‡ªå·±å®éªŒçš„å‚æ•°ã€‚<a id="more"></a></p>
<h2 id="4-è‡ªå®šä¹‰æŸå¤±å‡½æ•°"><a href="#4-è‡ªå®šä¹‰æŸå¤±å‡½æ•°" class="headerlink" title="4. è‡ªå®šä¹‰æŸå¤±å‡½æ•°"></a>4. è‡ªå®šä¹‰æŸå¤±å‡½æ•°</h2><p>åœ¨tensorflowä¸­è‡ªå®šä¹‰æŸå¤±å‡½æ•°ï¼Œæ–¹æ³•å¾ˆç®€å•ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">custom_loss</span><span class="params">(y_true, y_pred)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> tf.reduce_mean(tf.square(y_true - y_pred))</span><br></pre></td></tr></table></figure>
<p>MSEæŸå¤±å°±å¯ä»¥ç”¨ä¸Šé¢çš„å½¢å¼å®šä¹‰ã€‚å‡½æ•°å†™å¥½åï¼Œå°±å¯ä»¥äº¤ç»™æ¨¡å‹ç¼–è¯‘ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model.compile(loss=custom_loss)</span><br></pre></td></tr></table></figure>
<p>å¯¹äºFocal Lossï¼Œæˆ‘ç”¨tensorflowè‡ªå·±å®ç°äº†ä¸€ç‰ˆï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">focal_loss</span><span class="params">(logits, label, gamma, alpha)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    gamma: if gamma is 0, then same as BCELoss;</span></span><br><span class="line"><span class="string">    alpha: pos sample weight; if alpha is 0.5, then same as BCELoss;</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    epsilon = <span class="number">1e-9</span></span><br><span class="line">    BCELoss = -tf.math.log(tf.minimum(tf.abs(<span class="number">1</span> - label - logits) + epsilon, <span class="number">1.0</span>))</span><br><span class="line">    weight = tf.math.pow(tf.abs(label - logits), tf.constant([gamma], dtype=tf.float32))</span><br><span class="line">    balance = tf.abs(<span class="number">1</span> - label - alpha)</span><br><span class="line">    focal_loss = tf.math.multiply(weight, BCELoss)</span><br><span class="line">    balanced_focal_loss = tf.math.multiply(balance, focal_loss)</span><br><span class="line">    <span class="keyword">return</span> balanced_focal_loss</span><br></pre></td></tr></table></figure>
<p>å®éªŒæ•ˆæœä¸é”™ğŸ‘</p>
<p><img src="/images/blog/2020/casrel.PNG" alt></p>
]]></content>
      <categories>
        <category>Neural Networks</category>
      </categories>
      <tags>
        <tag>Loss</tag>
        <tag>æŸå¤±å‡½æ•°</tag>
        <tag>æ­£è´Ÿæ ·æœ¬å¹³è¡¡</tag>
        <tag>è°ƒå‚</tag>
        <tag>ç¥ç»ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>tensorboardæ˜¾ç¤ºç©ºç™½é—®é¢˜</title>
    <url>/2020/09/05/tensorboard%E6%98%BE%E7%A4%BA%E7%A9%BA%E7%99%BD%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œpytorchä»£ç è®­ç»ƒæ·±åº¦ç¥ç»ç½‘ç»œï¼Œç”¨<a href="https://github.com/huggingface/transformers/tree/master/examples/language-modeling" target="_blank" rel="noopener">run_language_modeling.py</a>åœ¨<code>bert-base-uncased</code>åŸºç¡€ä¸ŠåŸºäºAmazonæƒ…æ„Ÿåˆ†æè¯­æ–™è¿›è¡Œfine-tuningï¼ŒæœåŠ¡å™¨ä¸Šç‰ˆæœ¬ä¸ºï¼š</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">python==3.6.10</span><br><span class="line">tensorboard==2.1.1</span><br><span class="line">pytorch==1.5.1</span><br></pre></td></tr></table></figure>
<p>å¾—åˆ°ç»“æœè®°å½•ä¿å­˜åœ¨runsæ–‡ä»¶å¤¹ä¸­ï¼Œåœ¨ä¸ªäººç”µè„‘ä¸Šï¼Œæ‰§è¡Œï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tensorboard --logdir runs</span><br></pre></td></tr></table></figure>
<p>ç„¶åæ‰“å¼€æœ¬åœ°æœåŠ¡å™¨<a href="http://localhost:6006ï¼Œç»“æœé¡µé¢æ˜¾ç¤ºç©ºç™½ã€‚" target="_blank" rel="noopener">http://localhost:6006ï¼Œç»“æœé¡µé¢æ˜¾ç¤ºç©ºç™½ã€‚</a></p>
<p>åœ¨ç½‘ä¸ŠæŸ¥è¯¢äº†ç›¸å…³èµ„æ–™ï¼Œæœ€åé—®é¢˜å®šä½ä¸ºtensorboardç‰ˆæœ¬é—®é¢˜ï¼Œç”±äºtensorboardå‡çº§åå¯¹æŸäº›åŸæœ‰çš„APIä¸å†æ”¯æŒï¼Œæ‰€ä»¥ä½¿ç”¨pytorchçš„SummaryWriteræ—§APIå†™å¾—çš„è®°å½•æ–‡ä»¶ä¸èƒ½ç›´æ¥æ˜¾ç¤ºã€‚</p>
<h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>å°†tensorboardé™çº§ä¸º2.0.0ç‰ˆæœ¬ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pip install tensorboard==2.0.0</span><br></pre></td></tr></table></figure>
<p>å†æ¬¡å°è¯•ï¼Œçœ‹åˆ°é¡µé¢å¯ä»¥æ­£å¸¸æ˜¾ç¤ºäº†ã€‚</p>
<p><img src="/images/blog/2020/scalars.PNG" alt></p>
<a id="more"></a>
<p><img src="/images/blog/2020/text.PNG" alt></p>
<p><img src="/images/blog/2020/hparams.PNG" alt></p>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>tensorboard</tag>
        <tag>å¯è§†åŒ–</tag>
        <tag>visualisation</tag>
      </tags>
  </entry>
  <entry>
    <title>Pytorchå¤šGPUè®­ç»ƒ</title>
    <url>/2020/09/04/Pytorch%E5%A4%9AGPU%E8%AE%AD%E7%BB%83/</url>
    <content><![CDATA[<p>åœ¨æ•°æ®è¶Šæ¥è¶Šå¤šçš„æ—¶ä»£ï¼Œéšç€æ¨¡å‹å‚æ•°è§„æ¨¡å¢å¤šï¼Œä»¥åŠæ•°æ®é‡ä¸æ–­æå‡ï¼Œä½¿ç”¨å¤šGPUè®­ç»ƒæ˜¯ä¸å¯é¿å…çš„äº‹æƒ…ã€‚Pytorchåœ¨0.4.0åŠä»¥åçš„ç‰ˆæœ¬ä¸­æä¾›äº†å¤šGPUçš„è®­ç»ƒæ–¹å¼ï¼Œæœ¬æ–‡ç®€å•è®²è§£ä½¿ç”¨Pytorchå¤šGPUè®­ç»ƒçš„æ–¹å¼ä»¥åŠä¸€äº›æ³¨æ„çš„åœ°æ–¹ã€‚</p>
<p>åœ¨æ­¤æˆ‘ä»¬ä¸»è¦è®¨è®ºå•æœºå¤šGPUæ–¹å¼è®­ç»ƒï¼Œè€Œä¸æ˜¯å¤šæœºå¤šå¡åˆ†å¸ƒå¼è®­ç»ƒï¼Œåœ¨å®é™…çš„ä»»åŠ¡ä¸­ï¼Œä¸¤è€…å­˜åœ¨éƒ¨åˆ†äº¤é›†ã€‚</p>
<h2 id="1-ä½¿ç”¨æ–¹å¼"><a href="#1-ä½¿ç”¨æ–¹å¼" class="headerlink" title="1. ä½¿ç”¨æ–¹å¼"></a>1. ä½¿ç”¨æ–¹å¼</h2><p>åœ¨è®¾å¤‡å­˜åœ¨å¤šä¸ªæ˜¾å¡çš„æƒ…å†µä¸‹ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨<strong>torch.nn.DataParallel</strong>å°†æ¨¡å‹åŒ…è£…ä¸€ä¸‹å³å¯ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model = torch.nn.DataParallel(model)</span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶ï¼Œé»˜è®¤æ‰€æœ‰å­˜åœ¨çš„æ˜¾å¡éƒ½ä¼šè¢«ä½¿ç”¨ï¼Œå¦‚æœæƒ³è¦æŒ‡å®šæŸå‡ å¼ æ˜¾å¡ï¼Œå¯ä»¥ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model = torch.nn.DataParallel(model, device_ids=[<span class="number">0</span>, <span class="number">2</span>])</span><br></pre></td></tr></table></figure>
<p>å°±æŒ‡å®šäº†0å·å’Œ2å·æ˜¾å¡ä½œä¸ºè®­ç»ƒä½¿ç”¨ã€‚</p>
<h2 id="2-è¿›é˜¶æ–¹å¼"><a href="#2-è¿›é˜¶æ–¹å¼" class="headerlink" title="2. è¿›é˜¶æ–¹å¼"></a>2. è¿›é˜¶æ–¹å¼</h2><p>å¦ä¸€ç§æ–¹æ³•ï¼Œä½¿ç”¨<strong>torch.nn.parallel.DistributedDataParallel</strong>ï¼Œè™½ç„¶ç”¨äºåˆ†å¸ƒå¼è®­ç»ƒï¼Œä½†æ˜¯å•æœºè®­ç»ƒåŒæ ·å¯ä»¥ä½¿ç”¨ã€‚åªä¸è¿‡ä½¿ç”¨èµ·æ¥ç›¸å¯¹éº»çƒ¦ä¸€äº›ã€‚</p>
<p>åœ¨<a href="https://pytorch.org/docs/stable/generated/torch.nn.DataParallel.html#torch.nn.DataParallel" target="_blank" rel="noopener">Pytorchå®˜æ–¹æ–‡æ¡£</a>ä¸­ï¼Œæœ‰ä¸€æ®µå€¼å¾—æ³¨æ„çš„è¯ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/Pytorch%E5%A4%9AGPU%E8%AE%AD%E7%BB%83/warning.PNG" alt></p>
<p>Pytorchæ¨èä½¿ç”¨<strong>DistributedDataParallel</strong>ä»£æ›¿<strong>DataParallel</strong>ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/Pytorch%E5%A4%9AGPU%E8%AE%AD%E7%BB%83/instead.PNG" alt></p>
<p>æ¦‚æ‹¬æ¥è¯´ï¼Œå°±æ˜¯<strong>DistributedDataParallel</strong>ä½¿ç”¨å¤šè¿›ç¨‹ï¼Œæ¯ä¸ªGPUå•ç‹¬å æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼›<strong>DataParallel</strong>ä½¿ç”¨å¤šçº¿ç¨‹ï¼Œä¼šå—åˆ°Pythonè§£é‡Šå™¨ä¸­GILçš„å½±å“ï¼Œæ•ˆç‡è¾ƒä½ã€‚</p>
<p>ä¸‹é¢ä»‹ç»ä¸€ä¸‹å…·ä½“çš„ä½¿ç”¨æ–¹æ³•ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python -m torch.distributed.launch --nproc_per_node=ä½ çš„GPUæ•°é‡ YOUR_TRAINING_SCRIPT.py --arg1 --arg2 and all other arguments of your training script</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°å‘½ä»¤å’Œæˆ‘ä»¬å¹³å¸¸çš„å‘½ä»¤ç¨æœ‰åŒºåˆ«ï¼Œç”¨åˆ°äº†torch.distributed.launchè¿™ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬é€‰æ‹©çš„è¿è¡Œæ–¹å¼å˜ä¸º<code>python -m</code>ï¼Œç›¸å½“äºä½¿ç”¨torch.distributed.launch.pyå»è¿è¡Œæˆ‘ä»¬çš„YOUR_TRAINING_SCRIPT.pyï¼Œå…¶ä¸­torch.distributed.launchä¼šå‘æˆ‘ä»¬çš„è¿è¡Œç¨‹åºä¼ é€’ä¸€äº›å˜é‡ã€‚<a id="more"></a></p>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬çš„YOUR_TRAINING_SCRIPT.pyä¹Ÿå°±æ˜¯è®­ç»ƒä»£ç åº”è¯¥å¯¹åº”ä¿®æ”¹ä¸ºï¼ˆåªä¿ç•™æ ¸å¿ƒéƒ¨åˆ†ï¼‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch.distributed <span class="keyword">as</span> dist</span><br><span class="line"><span class="comment"># ç”±torch.distributed.launchä¼ é€’è¿‡æ¥ï¼Œæˆ‘ä»¬è®¾ç½®å‚æ•°æ¥æ¥æ”¶ï¼Œlocal_rankä»£è¡¨å½“å‰è¿›ç¨‹ä½¿ç”¨çš„GPUæ ‡å·</span></span><br><span class="line">parser.add_argument(<span class="string">'--local_rank'</span>, type=int, default=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">synchronize</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Helper function to synchronize (barrier) among all processes when using distributed</span></span><br><span class="line"><span class="string">    training</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> dist.is_available():</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> dist.is_initialized():</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    world_size = dist.get_world_size()</span><br><span class="line">    <span class="keyword">if</span> world_size == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    dist.barrier()</span><br><span class="line">    </span><br><span class="line"><span class="comment"># WORLD_SIZEç”±torch.distributed.launch.pyäº§ç”Ÿï¼Œå…·ä½“æ•°å€¼ä¸ºnproc_per_node * nodeï¼Œå•æœºnodeå€¼ä¸º1</span></span><br><span class="line">num_gpus = int(os.environ[<span class="string">'WORLD_SIZE'</span>]) <span class="keyword">if</span> <span class="string">'WORLD_SIZE'</span> <span class="keyword">in</span> os.environ <span class="keyword">else</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">is_distributed = num_gpus &gt; <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> is_distributed:</span><br><span class="line">    torch.cuda.set_device(args.local_rank)</span><br><span class="line">    torch.distributed.init_process_group(</span><br><span class="line">    	backend=<span class="string">'nccl'</span>, init_method=<span class="string">'env://'</span></span><br><span class="line">    )</span><br><span class="line">    synchronize()</span><br><span class="line">    </span><br><span class="line"><span class="comment"># å°†æ¨¡å‹è¿ç§»åˆ°DistributedDataParallelä¸­ï¼Œæ­¤æ—¶å°±å¯ä»¥è¿›è¡Œè®­ç»ƒäº†</span></span><br><span class="line"><span class="keyword">if</span> is_distributed:</span><br><span class="line">    model = torch.nn.parallel.DistributedDataParallel(</span><br><span class="line">    	model, device_ids=[args.local_rank], output_device=args.local_rank,</span><br><span class="line">        <span class="comment"># this should be removed if we update BatchNorm stats</span></span><br><span class="line">        broadcast_buffers=<span class="literal">False</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨æ„ï¼Œåœ¨æµ‹è¯•çš„æ—¶å€™éœ€è¦æ‰§è¡Œmodel = model.module</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬è¦æ³¨æ„ï¼Œä¸Šè¿°ä»£ç åœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­äº§ç”Ÿäº†å¾ˆå¤šä¸ªè¿›ç¨‹ï¼Œå…·ä½“å¤šå°‘ä¸ªå–å†³äºä½ çš„GPUæ•°é‡ï¼Œä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆä¸Šé¢éœ€è¦torch.cuda.set_device(args.local_rank)è®¾å®šé»˜è®¤çš„GPUï¼Œå› ä¸ºtorch.distributed.launchä¸ºæˆ‘ä»¬è§¦å‘äº†nä¸ªYOUR_TRAINING_SCRIPT.pyï¼Œnå°±æ˜¯æˆ‘ä»¬å°†è¦ä½¿ç”¨çš„GPUæ•°é‡ã€‚</p>
<h2 id="é‡åˆ°çš„å‘"><a href="#é‡åˆ°çš„å‘" class="headerlink" title="é‡åˆ°çš„å‘"></a>é‡åˆ°çš„å‘</h2><h3 id="1-åŒå¡æ•ˆæœä¸æ˜¾è‘—"><a href="#1-åŒå¡æ•ˆæœä¸æ˜¾è‘—" class="headerlink" title="1. åŒå¡æ•ˆæœä¸æ˜¾è‘—"></a>1. åŒå¡æ•ˆæœä¸æ˜¾è‘—</h3><p>æ¥è‡ª<a href="https://www.jianshu.com/p/bb28669018b3" target="_blank" rel="noopener">https://www.jianshu.com/p/bb28669018b3</a></p>
<p>æœ€è¿‘ä¸¤å¤©è®­ç»ƒä¸€ä¸ªé­”æ”¹çš„mobilenetv2+yolov3ï¼ŒåŒæ ·çš„ä¼˜åŒ–æ–¹æ³•åŒæ ·çš„å­¦ä¹ ç‡è¡°å‡ç‡ï¼Œæ‰€æœ‰çš„å‚æ•°éƒ½ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œå‘ç°å•æ˜¾å¡è®­ç»ƒçš„æ–¹å¼ç«Ÿç„¶æ¯”å¤šæ˜¾å¡è®­ç»ƒçš„æ–¹å¼æ”¶æ•›æ›´å¿«ã€‚</p>
<p>é…ç½®ä¸ºä¸¤å¼ 1080Tiï¼Œä½¿ç”¨Pytorchçš„ç‰ˆæœ¬ä¸º1.0.0ã€‚ä¸‹å›¾<strong>çº¢çº¿ä¸ºä½¿ç”¨ä¸€å¼ 1080Tiè®­ç»ƒçš„æƒ…å†µï¼Œè“çº¿ä¸ºä½¿ç”¨ä¸¤å¼ 1080Tiè®­ç»ƒçš„æƒ…å†µ</strong>ï¼Œbatchsizeæ¯å¼ æ˜¾å¡è®¾ç½®ä¸º10ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨ä¸¤å¼ æ˜¾å¡è®­ç»ƒæ—¶çš„batchsizeä¸ºå•å¼ æ˜¾å¡çš„ä¸¤å€ï¼ŒåŒä¸€ä¸ªstepæ—¶ï¼ŒåŒå¡èµ°çš„æ­¥æ•°ä¸ºå•å¡æ­¥æ•°çš„ä¸¤å€ã€‚è¿™é‡Œä½¿ç”¨çš„å¤šå¡è®­ç»ƒæ–¹å¼ä¸ºDataParallelã€‚</p>
<p>ä½†æ˜¯ä¸‹å›¾å¯ä»¥çœ‹åˆ°ï¼Œåœ¨åŒå¡ç›¸åŒstepçš„æƒ…å†µä¸‹ï¼Œè™½ç„¶çº¢è‰²æ›²çº¿çš„æŸå¤±ç›¸è¾ƒè“è‰²ä¸‹é™çš„ç¨å¾®æ…¢ä¸€äº›ï¼Œä½†æ˜¯åˆ°äº†ä¸€å®šæ—¶å€™ï¼Œä¸¤è€…çš„æŸå¤±å€¼ä¼šç›¸äº¤(æ­¤æ—¶æœªè¾¾åˆ°æœ€ä½æŸå¤±ç‚¹),<strong>ä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨åŒå¡å’Œå•å¡è®­ç»ƒæ—¶å€™lossæŸå¤±æ”¶æ•›çš„é€Ÿåº¦æ˜¯ä¸€æ ·çš„ã€‚</strong></p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/Pytorch%E5%A4%9AGPU%E8%AE%AD%E7%BB%83/loss1.webp" alt></p>
<p>æ›´å¥‡æ€ªçš„æ˜¯ï¼Œä¸‹å›¾ä¸­ï¼Œåœ¨éªŒè¯é›†ä¸­ï¼Œå•æ˜¾å¡è™½ç„¶æ²¡æœ‰åŒæ˜¾å¡çš„å‡†ç¡®åº¦æ›²çº¿å¢é•¿è¿…é€Ÿï¼Œä½†æ˜¯åˆ°äº†æŸä¸€ç‚¹ï¼Œå•æ˜¾å¡çš„æ›²çº¿ä¼šè¶…è¿‡åŒæ˜¾å¡è®­ç»ƒçš„ç²¾åº¦ï¼Œ<strong>ä¹Ÿå°±æ˜¯è¯´ï¼Œå•å¡è®­ç»ƒåœ¨å‰æœŸæ²¡æœ‰åŒå¡è®­ç»ƒæ•ˆæœæ˜¾è‘—ï¼Œä½†æ˜¯åˆ°äº†è®­ç»ƒä¸­æœŸæ•ˆæœå°±ä¼šä¼˜äºåŒå¡ã€‚</strong><br><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/Pytorch%E5%A4%9AGPU%E8%AE%AD%E7%BB%83/loss2.webp" alt></p>
<h3 id="2-BatchNormå®˜æ–¹å®ç°å­˜åœ¨é—®é¢˜"><a href="#2-BatchNormå®˜æ–¹å®ç°å­˜åœ¨é—®é¢˜" class="headerlink" title="2. BatchNormå®˜æ–¹å®ç°å­˜åœ¨é—®é¢˜"></a>2. BatchNormå®˜æ–¹å®ç°å­˜åœ¨é—®é¢˜</h3><p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/Pytorch%E5%A4%9AGPU%E8%AE%AD%E7%BB%83/batchnorm.PNG" alt></p>
<p>å½“ä½¿ç”¨å¤šå¡è®­ç»ƒæ—¶ï¼Œpytorchå®˜æ–¹å®ç°ä¸­çš„BatchNormåªä½¿ç”¨å•å¡ä¸Šçš„æ•°æ®è®¡ç®—normalizationï¼ŒçŒœæµ‹å¯èƒ½æ˜¯ä¸ºäº†åŠ é€Ÿå’Œå‡å°‘é€šä¿¡å¼€æ”¯ï¼Œä½†åŒæ—¶å¯èƒ½å¸¦æ¥ä¸ç¨³å®šã€ä¸å‡†ç¡®çš„é—®é¢˜ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨<a href="https://github.com/vacancy/Synchronized-BatchNorm-PyTorch" target="_blank" rel="noopener">Synchronized-BatchNorm-PyTorch</a>å¼€æºä»£ç ã€‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><p>[çŸ¥ä¹]  <a href="https://zhuanlan.zhihu.com/p/86441879" target="_blank" rel="noopener">pytorchå¤šgpuå¹¶è¡Œè®­ç»ƒ</a></p>
</li>
<li><p>[çŸ¥ä¹]  <a href="https://zhuanlan.zhihu.com/p/95700549" target="_blank" rel="noopener">å’Œnn.DataParallelè¯´å†è§</a></p>
</li>
<li><p>[pytorch]  <a href="https://github.com/pytorch/vision/tree/master/references/detection" target="_blank" rel="noopener">pytorchå®˜æ–¹example</a></p>
</li>
</ul>
]]></content>
      <categories>
        <category>Neural Networks</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
        <tag>Neural Networks</tag>
        <tag>Deep Learning</tag>
        <tag>å¹¶è¡Œ</tag>
        <tag>Parallel</tag>
      </tags>
  </entry>
  <entry>
    <title>pytorchä¼˜åŒ–å™¨ä¼ å…¥ä¸¤ä¸ªæ¨¡å‹çš„å‚æ•°</title>
    <url>/2020/09/01/pytorch%E4%BC%98%E5%8C%96%E5%99%A8%E4%BC%A0%E5%85%A5%E4%B8%A4%E4%B8%AA%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%8F%82%E6%95%B0/</url>
    <content><![CDATA[<h2 id="1-ä¼ å…¥ä¸¤ä¸ªæ¨¡å‹å‚æ•°"><a href="#1-ä¼ å…¥ä¸¤ä¸ªæ¨¡å‹å‚æ•°" class="headerlink" title="1. ä¼ å…¥ä¸¤ä¸ªæ¨¡å‹å‚æ•°"></a>1. ä¼ å…¥ä¸¤ä¸ªæ¨¡å‹å‚æ•°</h2><p>ä¸¾ä¾‹è¯´æ˜ï¼šmodel_oneåªæ˜¯ä¸€ä¸ªæå–ç‰¹å¾çš„ç½‘ç»œï¼Œå¾—åˆ°featuresï¼Œmodel_twoå¯¹featuresè¿›è¡Œå¤„ç†ï¼Œæ±‚lossï¼Œè€Œä¸”model_twoæœ‰éœ€è¦å­¦ä¹ çš„å‚æ•°ã€‚å¹³æ—¶æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨å¦‚ä¸‹çš„æ–¹å¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">optimizer = torch.optim.SGD(model.parameters(), lr)</span><br></pre></td></tr></table></figure>
<p>ä¼ å…¥ä¸¤ä¸ªæ¨¡å‹çš„å‚æ•°ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">optimizer = torch.optim.SGD([</span><br><span class="line">	&#123;<span class="string">'params'</span>: model.parameters()&#125;,</span><br><span class="line">	&#123;<span class="string">'params'</span>: lossnet.parameters(), <span class="string">'lr'</span>: <span class="number">1e-4</span>&#125;</span><br><span class="line">], lr, momentum=<span class="number">0.99</span>)</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="2-ä¿å­˜-è½½å…¥ä¸¤ä¸ªæ¨¡å‹çš„å‚æ•°"><a href="#2-ä¿å­˜-è½½å…¥ä¸¤ä¸ªæ¨¡å‹çš„å‚æ•°" class="headerlink" title="2. ä¿å­˜/è½½å…¥ä¸¤ä¸ªæ¨¡å‹çš„å‚æ•°"></a>2. ä¿å­˜/è½½å…¥ä¸¤ä¸ªæ¨¡å‹çš„å‚æ•°</h2><ul>
<li>ä¿å­˜</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">filename = <span class="string">'./models/vgg16/ocr.pth'</span></span><br><span class="line">state = &#123;</span><br><span class="line">	<span class="string">'model'</span>: model.state_dict(),</span><br><span class="line">	<span class="string">'lossnet'</span>: lossnet.state_dict()</span><br><span class="line">&#125;</span><br><span class="line">torch.save(state, filename)</span><br></pre></td></tr></table></figure>
<ul>
<li>è½½å…¥ï¼Œä½¿ç”¨torch.load()ï¼Œå¹¶ä½¿ç”¨å­—å…¸è¿›è¡Œç´¢å¼•</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">load_name = <span class="string">'./models/vgg16/ocr.pth'</span></span><br><span class="line">checkpoint = torch.load(load_name)</span><br><span class="line">model.load_state_dict(checkpoint[<span class="string">'model'</span>])</span><br><span class="line">lossnet.load_state_dict(checkpoint[<span class="string">'lossnet'</span>])</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å‚è€ƒ <a href="https://blog.csdn.net/u011622208/article/details/90698688" target="_blank" rel="noopener">https://blog.csdn.net/u011622208/article/details/90698688</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Neural Networks</category>
      </categories>
      <tags>
        <tag>ç¥ç»ç½‘ç»œ</tag>
        <tag>pytorch</tag>
        <tag>Neural Networks</tag>
        <tag>ä¼˜åŒ–</tag>
        <tag>optimization</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¼˜åŒ–æ–¹æ³•æ€»ç»“ï¼šSGD, Momentum, AdaGrad, RMSProp, Adam</title>
    <url>/2020/08/14/%E4%BC%98%E5%8C%96%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93%EF%BC%9ASGD-Momentum-AdaGrad-RMSProp-Adam/</url>
    <content><![CDATA[<h2 id="1-SGD"><a href="#1-SGD" class="headerlink" title="1. SGD"></a>1. SGD</h2><h3 id="Batch-Gradient-Descent"><a href="#Batch-Gradient-Descent" class="headerlink" title="Batch Gradient Descent"></a>Batch Gradient Descent</h3><p>åœ¨æ¯ä¸€è½®çš„è®­ç»ƒè¿‡ç¨‹ä¸­ï¼ŒBatch Gradient Descentç®—æ³•ç”¨æ•´ä¸ªè®­ç»ƒé›†çš„æ•°æ®è®¡ç®—cost functionçš„æ¢¯åº¦ï¼Œå¹¶ç”¨è¯¥æ¢¯åº¦å¯¹æ¨¡å‹å‚æ•°è¿›è¡Œæ›´æ–°ï¼š</p>
<script type="math/tex; mode=display">
\Theta = \Theta - \alpha \cdot \nabla _\Theta J(\Theta)</script><p><strong>ä¼˜ç‚¹:</strong></p>
<ul>
<li>cost fuctionè‹¥ä¸ºå‡¸å‡½æ•°ï¼Œèƒ½å¤Ÿä¿è¯æ”¶æ•›åˆ°å…¨å±€æœ€ä¼˜å€¼ï¼›è‹¥ä¸ºéå‡¸å‡½æ•°ï¼Œèƒ½å¤Ÿæ”¶æ•›åˆ°å±€éƒ¨æœ€ä¼˜å€¼</li>
</ul>
<p><strong>ç¼ºç‚¹:</strong></p>
<ul>
<li>ç”±äºæ¯è½®è¿­ä»£éƒ½éœ€è¦åœ¨æ•´ä¸ªæ•°æ®é›†ä¸Šè®¡ç®—ä¸€æ¬¡ï¼Œæ‰€ä»¥æ‰¹é‡æ¢¯åº¦ä¸‹é™å¯èƒ½éå¸¸æ…¢</li>
<li>è®­ç»ƒæ•°è¾ƒå¤šæ—¶ï¼Œéœ€è¦è¾ƒå¤§å†…å­˜</li>
<li>æ‰¹é‡æ¢¯åº¦ä¸‹é™ä¸å…è®¸åœ¨çº¿æ›´æ–°æ¨¡å‹ï¼Œä¾‹å¦‚æ–°å¢å®ä¾‹ã€‚<a id="more"></a></li>
</ul>
<h3 id="Stochastic-Gradient-Descent"><a href="#Stochastic-Gradient-Descent" class="headerlink" title="Stochastic Gradient Descent"></a><strong>Stochastic Gradient Descent</strong></h3><p>å’Œæ‰¹æ¢¯åº¦ä¸‹é™ç®—æ³•ç›¸åï¼ŒStochastic gradient descent ç®—æ³•æ¯è¯»å…¥ä¸€ä¸ªæ•°æ®ï¼Œä¾¿ç«‹åˆ»è®¡ç®—cost fuctionçš„æ¢¯åº¦æ¥æ›´æ–°å‚æ•°ï¼š</p>
<script type="math/tex; mode=display">
\Theta = \Theta - \alpha \cdot \nabla _\Theta J(\Theta;x^{(i)},y^{(i)})</script><p><strong>ä¼˜ç‚¹:</strong></p>
<ul>
<li>ç®—æ³•æ”¶æ•›é€Ÿåº¦å¿«(åœ¨Batch Gradient Descentç®—æ³•ä¸­, æ¯è½®ä¼šè®¡ç®—å¾ˆå¤šç›¸ä¼¼æ ·æœ¬çš„æ¢¯åº¦, è¿™éƒ¨åˆ†æ˜¯å†—ä½™çš„)</li>
<li>å¯ä»¥åœ¨çº¿æ›´æ–°</li>
<li>æœ‰å‡ ç‡è·³å‡ºä¸€ä¸ªæ¯”è¾ƒå·®çš„å±€éƒ¨æœ€ä¼˜è€Œæ”¶æ•›åˆ°ä¸€ä¸ªæ›´å¥½çš„å±€éƒ¨æœ€ä¼˜ç”šè‡³æ˜¯å…¨å±€æœ€ä¼˜</li>
</ul>
<p><strong>ç¼ºç‚¹:</strong></p>
<ul>
<li>å®¹æ˜“æ”¶æ•›åˆ°å±€éƒ¨æœ€ä¼˜ï¼Œå¹¶ä¸”å®¹æ˜“è¢«å›°åœ¨éç‚¹</li>
</ul>
<h3 id="Mini-batch-Gradient-Descent"><a href="#Mini-batch-Gradient-Descent" class="headerlink" title="Mini-batch Gradient Descent"></a><strong>Mini-batch Gradient Descent</strong></h3><p>mini-batch Gradient Descentçš„æ–¹æ³•æ˜¯åœ¨ä¸Šè¿°ä¸¤ä¸ªæ–¹æ³•ä¸­å–æŠ˜è¡·, æ¯æ¬¡ä»æ‰€æœ‰è®­ç»ƒæ•°æ®ä¸­å–ä¸€ä¸ªå­é›†ï¼ˆmini-batchï¼‰ ç”¨äºè®¡ç®—æ¢¯åº¦ï¼š</p>
<script type="math/tex; mode=display">
\Theta = \Theta - \alpha \cdot \nabla _\Theta J(\Theta;x^{(i:i+n)},y^{(i:i+n)})</script><p>Mini-batch Gradient Descentåœ¨æ¯è½®è¿­ä»£ä¸­ä»…ä»…è®¡ç®—ä¸€ä¸ªmini-batchçš„æ¢¯åº¦ï¼Œä¸ä»…è®¡ç®—æ•ˆç‡é«˜ï¼Œè€Œä¸”æ”¶æ•›è¾ƒä¸ºç¨³å®šã€‚è¯¥æ–¹æ³•æ˜¯ç›®å‰æ·±åº¦å­¦è®­ç»ƒä¸­çš„ä¸»æµæ–¹æ³•</p>
<p>ä¸Šè¿°ä¸‰ä¸ªæ–¹æ³•é¢ä¸´çš„ä¸»è¦<strong>æŒ‘æˆ˜</strong>å¦‚ä¸‹ï¼š</p>
<ul>
<li>é€‰æ‹©é€‚å½“çš„å­¦ä¹ ç‡$\alpha$è¾ƒä¸ºå›°éš¾ã€‚å¤ªå°çš„å­¦ä¹ ç‡ä¼šå¯¼è‡´æ”¶æ•›ç¼“æ…¢ï¼Œè€Œå­¦ä¹ é€Ÿåº¦å¤ªå—ä¼šé€ æˆè¾ƒå¤§æ³¢åŠ¨ï¼Œå¦¨ç¢æ”¶æ•›ã€‚</li>
<li>ç›®å‰å¯é‡‡ç”¨çš„æ–¹æ³•æ˜¯åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è°ƒæ•´å­¦ä¹ ç‡å¤§å°ï¼Œä¾‹å¦‚æ¨¡æ‹Ÿé€€ç«ç®—æ³•ï¼šé¢„å…ˆå®šä¹‰ä¸€ä¸ªè¿­ä»£æ¬¡æ•°mï¼Œæ¯æ‰§è¡Œå®Œmæ¬¡è®­ç»ƒä¾¿å‡å°å­¦ä¹ ç‡ï¼Œæˆ–è€…å½“cost functionçš„å€¼ä½äºä¸€ä¸ªé˜ˆå€¼æ—¶å‡å°å­¦ä¹ ç‡ã€‚ç„¶è€Œè¿­ä»£æ¬¡æ•°å’Œé˜ˆå€¼å¿…é¡»äº‹å…ˆå®šä¹‰ï¼Œå› æ­¤æ— æ³•é€‚åº”æ•°æ®é›†çš„ç‰¹ç‚¹ã€‚</li>
<li>ä¸Šè¿°æ–¹æ³•ä¸­, æ¯ä¸ªå‚æ•°çš„ learning rate éƒ½æ˜¯ç›¸åŒçš„ï¼Œè¿™ç§åšæ³•æ˜¯ä¸åˆç†çš„ï¼šå¦‚æœè®­ç»ƒæ•°æ®æ˜¯ç¨€ç–çš„ï¼Œå¹¶ä¸”ä¸åŒç‰¹å¾çš„å‡ºç°é¢‘ç‡å·®å¼‚è¾ƒå¤§ï¼Œé‚£ä¹ˆæ¯”è¾ƒåˆç†çš„åšæ³•æ˜¯å¯¹äºå‡ºç°é¢‘ç‡ä½çš„ç‰¹å¾è®¾ç½®è¾ƒå¤§çš„å­¦ä¹ é€Ÿç‡ï¼Œå¯¹äºå‡ºç°é¢‘ç‡è¾ƒå¤§çš„ç‰¹å¾æ•°æ®è®¾ç½®è¾ƒå°çš„å­¦ä¹ é€Ÿç‡ã€‚</li>
<li>è¿‘æœŸçš„çš„ç ”ç©¶è¡¨æ˜ï¼Œæ·±å±‚ç¥ç»ç½‘ç»œä¹‹æ‰€ä»¥æ¯”è¾ƒéš¾è®­ç»ƒï¼Œå¹¶ä¸æ˜¯å› ä¸ºå®¹æ˜“è¿›å…¥local minimumã€‚ç›¸åï¼Œç”±äºç½‘ç»œç»“æ„éå¸¸å¤æ‚ï¼Œåœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹å³ä½¿æ˜¯ local minimum ä¹Ÿå¯ä»¥å¾—åˆ°éå¸¸å¥½çš„ç»“æœã€‚è€Œä¹‹æ‰€ä»¥éš¾è®­ç»ƒæ˜¯å› ä¸ºå­¦ä¹ è¿‡ç¨‹å®¹æ˜“é™·å…¥åˆ°é©¬éé¢ä¸­ï¼Œå³åœ¨å¡é¢ä¸Šï¼Œä¸€éƒ¨åˆ†ç‚¹æ˜¯ä¸Šå‡çš„ï¼Œä¸€éƒ¨åˆ†ç‚¹æ˜¯ä¸‹é™çš„ã€‚è€Œè¿™ç§æƒ…å†µæ¯”è¾ƒå®¹æ˜“å‡ºç°åœ¨å¹³å¦åŒºåŸŸï¼Œåœ¨è¿™ç§åŒºåŸŸä¸­ï¼Œæ‰€æœ‰æ–¹å‘çš„æ¢¯åº¦å€¼éƒ½å‡ ä¹æ˜¯ 0ã€‚</li>
</ul>
<h2 id="2-Momentum"><a href="#2-Momentum" class="headerlink" title="2. Momentum"></a>2. Momentum</h2><p>SGDæ–¹æ³•çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯å…¶æ›´æ–°æ–¹å‘å®Œå…¨ä¾èµ–äºå½“å‰batchè®¡ç®—å‡ºçš„æ¢¯åº¦ï¼Œå› è€Œååˆ†ä¸ç¨³å®šã€‚Momentumç®—æ³•å€Ÿç”¨äº†ç‰©ç†ä¸­çš„åŠ¨é‡æ¦‚å¿µï¼Œå®ƒæ¨¡æ‹Ÿçš„æ˜¯ç‰©ä½“è¿åŠ¨æ—¶çš„æƒ¯æ€§ï¼Œå³æ›´æ–°çš„æ—¶å€™åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¿ç•™ä¹‹å‰æ›´æ–°çš„æ–¹å‘ï¼ŒåŒæ—¶åˆ©ç”¨å½“å‰batchçš„æ¢¯åº¦å¾®è°ƒæœ€ç»ˆçš„æ›´æ–°æ–¹å‘ã€‚è¿™æ ·ä¸€æ¥ï¼Œå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ ç¨³å®šæ€§ï¼Œä»è€Œå­¦ä¹ åœ°æ›´å¿«ï¼Œå¹¶ä¸”è¿˜æœ‰ä¸€å®šæ‘†è„±å±€éƒ¨æœ€ä¼˜çš„èƒ½åŠ›ï¼š</p>
<script type="math/tex; mode=display">
v_t = \gamma \cdot v_{t-1} + \alpha \cdot \nabla_{\Theta}J(\Theta)</script><script type="math/tex; mode=display">
\Theta = \Theta - v_t</script><p>Momentumç®—æ³•ä¼šè§‚å¯Ÿå†å²æ¢¯åº¦$v_{t-1}$ï¼Œè‹¥å½“å‰æ¢¯åº¦çš„æ–¹å‘ä¸å†å²æ¢¯åº¦ä¸€è‡´ï¼ˆè¡¨æ˜å½“å‰æ ·æœ¬ä¸å¤ªå¯èƒ½ä¸ºå¼‚å¸¸ç‚¹ï¼‰ï¼Œåˆ™ä¼šå¢å¼ºè¿™ä¸ªæ–¹å‘çš„æ¢¯åº¦ï¼Œè‹¥å½“å‰æ¢¯åº¦ä¸å†å²æ¢¯æ–¹å‘ä¸ä¸€è‡´ï¼Œåˆ™æ¢¯åº¦ä¼šè¡°å‡ã€‚<strong>ä¸€ç§å½¢è±¡çš„è§£é‡Šæ˜¯ï¼š</strong>æˆ‘ä»¬æŠŠä¸€ä¸ªçƒæ¨ä¸‹å±±ï¼Œçƒåœ¨ä¸‹å¡æ—¶ç§¯èšåŠ¨é‡ï¼Œåœ¨é€”ä¸­å˜å¾—è¶Šæ¥è¶Šå¿«ï¼ŒÎ³å¯è§†ä¸ºç©ºæ°”é˜»åŠ›ï¼Œè‹¥çƒçš„æ–¹å‘å‘ç”Ÿå˜åŒ–ï¼Œåˆ™åŠ¨é‡ä¼šè¡°å‡ã€‚</p>
<h2 id="3-Nesterov-Momentum"><a href="#3-Nesterov-Momentum" class="headerlink" title="3. Nesterov Momentum"></a>3. Nesterov Momentum</h2><p>åœ¨å°çƒå‘ä¸‹æ»šåŠ¨çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›å°çƒèƒ½å¤Ÿæå‰çŸ¥é“åœ¨å“ªäº›åœ°æ–¹å¡é¢ä¼šä¸Šå‡ï¼Œè¿™æ ·åœ¨é‡åˆ°ä¸Šå‡å¡é¢ä¹‹å‰ï¼Œå°çƒå°±å¼€å§‹å‡é€Ÿã€‚è¿™æ–¹æ³•å°±æ˜¯Nesterov Momentumï¼Œå…¶åœ¨å‡¸ä¼˜åŒ–ä¸­æœ‰è¾ƒå¼ºçš„ç†è®ºä¿è¯æ”¶æ•›ã€‚å¹¶ä¸”ï¼Œåœ¨å®è·µä¸­Nesterov Momentumä¹Ÿæ¯”å•çº¯çš„ Momentum çš„æ•ˆæœå¥½ï¼š</p>
<script type="math/tex; mode=display">
v_t = \gamma \cdot v_{t-1} + \alpha \cdot \nabla_{\Theta}J(\Theta - \gamma \cdot v_{t-1})</script><script type="math/tex; mode=display">
\Theta = \Theta - v_t</script><p>å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šæ³¨æ„åˆ° momentum æ–¹æ³•ï¼Œå¦‚æœåªçœ‹ Î³ <em> v é¡¹ï¼Œé‚£ä¹ˆå½“å‰çš„ Î¸ç»è¿‡ momentum çš„ä½œç”¨ä¼šå˜æˆ Î¸-Î³ </em> vã€‚å› æ­¤å¯ä»¥æŠŠ Î¸-Î³ <em> vè¿™ä¸ªä½ç½®çœ‹åšæ˜¯å½“å‰ä¼˜åŒ–çš„ä¸€ä¸ªâ€å±•æœ›â€ä½ç½®ã€‚æ‰€ä»¥ï¼Œå¯ä»¥åœ¨ Î¸-Î³ </em> væ±‚å¯¼, è€Œä¸æ˜¯åŸå§‹çš„Î¸ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/ä¼˜åŒ–æ–¹æ³•æ€»ç»“/Nesterov.PNG" alt></p>
<h2 id="4-Adagrad"><a href="#4-Adagrad" class="headerlink" title="4. Adagrad"></a>4. Adagrad</h2><p>ä¸Šè¿°æ–¹æ³•ä¸­ï¼Œå¯¹äºæ¯ä¸€ä¸ªå‚æ•°$\theta_i$çš„è®­ç»ƒéƒ½ä½¿ç”¨äº†ç›¸åŒçš„å­¦ä¹ ç‡Î±ã€‚Adagradç®—æ³•èƒ½å¤Ÿåœ¨è®­ç»ƒä¸­è‡ªåŠ¨çš„å¯¹learning rateè¿›è¡Œè°ƒæ•´ï¼Œå¯¹äºå‡ºç°é¢‘ç‡è¾ƒä½å‚æ•°é‡‡ç”¨è¾ƒå¤§çš„Î±æ›´æ–°ï¼›ç›¸åï¼Œå¯¹äºå‡ºç°é¢‘ç‡è¾ƒé«˜çš„å‚æ•°é‡‡ç”¨è¾ƒå°çš„Î±æ›´æ–°ã€‚å› æ­¤ï¼ŒAdagradéå¸¸é€‚åˆå¤„ç†ç¨€ç–æ•°æ®ã€‚</p>
<p>æˆ‘ä»¬è®¾$g<em>{t,i}$ä¸ºç¬¬tè½®ç¬¬iä¸ªå‚æ•°çš„æ¢¯åº¦ï¼Œå³$g</em>{t,i} = \nabla _{\Theta}J(\Theta_i)$ã€‚å› æ­¤ï¼ŒSGDä¸­å‚æ•°æ›´æ–°çš„è¿‡ç¨‹å¯å†™ä¸ºï¼š</p>
<script type="math/tex; mode=display">
\Theta _{t+1, i} = \Theta _{t,i} - \alpha \cdot g_{t,i}</script><p>Adagradåœ¨æ¯è½®è®­ç»ƒä¸­å¯¹æ¯ä¸ªå‚æ•°$\theta _i$çš„å­¦ä¹ ç‡è¿›è¡Œæ›´æ–°ï¼Œå‚æ•°æ›´æ–°å…¬å¼å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
\Theta _{t+1, i} = \Theta _{t,i} - \frac{\alpha}{\sqrt{G_{t,ii} + \epsilon}} \cdot g_{t,i}</script><p>å…¶ä¸­ï¼Œ$G_t \in \mathbb{R} ^{d \times d}$ä¸ºå¯¹è§’çŸ©é˜µï¼Œæ¯ä¸ªå¯¹è§’çº¿ä½ç½®$i,i$ä¸ºå¯¹åº”å‚æ•°$\theta_i$ä»ç¬¬1è½®åˆ°ç¬¬tè½®æ¢¯åº¦çš„å¹³æ–¹å’Œã€‚Ïµæ˜¯å¹³æ»‘é¡¹ï¼Œç”¨äºé¿å…åˆ†æ¯ä¸º0ï¼Œä¸€èˆ¬å–å€¼1eâˆ’8ã€‚Adagradçš„ç¼ºç‚¹æ˜¯åœ¨è®­ç»ƒçš„ä¸­åæœŸï¼Œåˆ†æ¯ä¸Šæ¢¯åº¦å¹³æ–¹çš„ç´¯åŠ å°†ä¼šè¶Šæ¥è¶Šå¤§ï¼Œä»è€Œæ¢¯åº¦è¶‹è¿‘äº0ï¼Œä½¿å¾—è®­ç»ƒæå‰ç»“æŸã€‚</p>
<h2 id="5-RMSprop"><a href="#5-RMSprop" class="headerlink" title="5. RMSprop"></a>5. RMSprop</h2><p>RMSpropæ˜¯Geoff Hintonæå‡ºçš„ä¸€ç§è‡ªé€‚åº”å­¦ä¹ ç‡æ–¹æ³•ã€‚Adagradä¼šç´¯åŠ ä¹‹å‰æ‰€æœ‰çš„æ¢¯åº¦å¹³æ–¹ï¼Œè€ŒRMSpropä»…ä»…æ˜¯è®¡ç®—å¯¹åº”çš„å¹³å‡å€¼ï¼Œå› æ­¤å¯ç¼“è§£Adagradç®—æ³•å­¦ä¹ ç‡ä¸‹é™è¾ƒå¿«çš„é—®é¢˜ã€‚</p>
<script type="math/tex; mode=display">
E[g^2]_t = 0.9E[g^2]_{t-1} + 0.1g_t^2</script><script type="math/tex; mode=display">
\Theta_{t+1} = \Theta_t - \frac{\alpha}{\sqrt{E[g^2]_t + \epsilon}} \cdot g_t</script><h2 id="6-Adam"><a href="#6-Adam" class="headerlink" title="6. Adam"></a>6. Adam</h2><p>Adam(Adaptive Moment Estimation)æ˜¯å¦ä¸€ç§è‡ªé€‚åº”å­¦ä¹ ç‡çš„æ–¹æ³•ã€‚å®ƒåˆ©ç”¨æ¢¯åº¦çš„ä¸€é˜¶çŸ©ä¼°è®¡å’ŒäºŒé˜¶çŸ©ä¼°è®¡åŠ¨æ€è°ƒæ•´æ¯ä¸ªå‚æ•°çš„å­¦ä¹ ç‡ã€‚Adamçš„ä¼˜ç‚¹ä¸»è¦åœ¨äºç»è¿‡åç½®æ ¡æ­£åï¼Œæ¯ä¸€æ¬¡è¿­ä»£å­¦ä¹ ç‡éƒ½æœ‰ä¸ªç¡®å®šèŒƒå›´ï¼Œä½¿å¾—å‚æ•°æ¯”è¾ƒå¹³ç¨³ã€‚å…¬å¼å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
m_t = \beta_1m_{t-1} + (1-\beta_1)g_t</script><script type="math/tex; mode=display">
v_t = \beta_2 v_{t-1} + (1-\beta_2)g_t^2</script><script type="math/tex; mode=display">
\hat{m}_t = \frac{m_t}{1-\beta_1^t}</script><script type="math/tex; mode=display">
\hat{v}_t = \frac{v_t}{1-\beta_2^t}</script><script type="math/tex; mode=display">
\Theta_{t+1} = \Theta_t - \frac{\alpha}{\sqrt{\hat{v}_t} + \epsilon} \hat{m}_t</script><p>å…¶ä¸­ï¼Œ$m_t, v_t$åˆ†åˆ«æ˜¯å¯¹æ¢¯åº¦çš„ä¸€é˜¶çŸ©ä¼°è®¡å’ŒäºŒé˜¶çŸ©ä¼°è®¡ï¼Œå¯ä»¥çœ‹ä½œå¯¹æœŸæœ›$E[g_t], E[g_t^2]$çš„è¿‘ä¼¼ï¼›$\hat{m}_t,\hat{v}_t$æ˜¯å¯¹$m_t, v_t$çš„çŸ«æ­£ï¼Œè¿™æ ·å¯ä»¥è¿‘ä¼¼ä¸ºå¯¹æœŸæœ›çš„æ— åä¼°è®¡ã€‚Adamç®—æ³•çš„æå‡ºè€…å»ºè®®$\beta_1$çš„é»˜è®¤å€¼ä¸º0.9ï¼Œ$\beta_2$çš„é»˜è®¤å€¼ä¸º0.999ï¼Œ$\epsilon$çš„é»˜è®¤å€¼ä¸º1e-8ã€‚å¦å¤–ï¼Œåœ¨æ•°æ®æ¯”è¾ƒç¨€ç–çš„æ—¶å€™ï¼Œadaptiveçš„æ–¹æ³•èƒ½å¾—åˆ°æ›´å¥½çš„æ•ˆæœï¼Œä¾‹å¦‚Adagradï¼ŒRMSpropï¼Œ Adamç­‰ã€‚Adamæ–¹æ³•æ¯”RMSpropæ–¹æ³•æ”¶æ•›çš„ç»“æœå¥½ä¸€äº›ï¼Œæ‰€ä»¥åœ¨å®é™…åº”ç”¨ä¸­ï¼ŒAdamæ˜¯æœ€ä¸ºå¸¸ç”¨çš„ç®—æ³•ï¼Œå¯ä»¥æ¯”è¾ƒå¿«çš„å¾—åˆ°ä¸€ä¸ªé¢„ä¼°ç»“æœã€‚</p>
<h2 id="7-æ€»ç»“"><a href="#7-æ€»ç»“" class="headerlink" title="7. æ€»ç»“"></a>7. æ€»ç»“</h2><p>æœ€åä¸¤å¼ åŠ¨å›¾ä»ç›´è§‚ä¸Šå±•ç°äº†ç®—æ³•çš„ä¼˜åŒ–è¿‡ç¨‹ã€‚ç¬¬ä¸€å¼ å›¾ä¸ºä¸åŒç®—æ³•åœ¨æŸå¤±å¹³é¢ç­‰é«˜çº¿ä¸Šéšæ—¶é—´çš„å˜åŒ–æƒ…å†µï¼Œç¬¬äºŒå¼ å›¾ä¸ºä¸åŒç®—æ³•åœ¨éç‚¹å¤„çš„è¡Œä¸ºæ¯”è¾ƒã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/ä¼˜åŒ–æ–¹æ³•æ€»ç»“/contours_evaluation_optimizers.gif" alt></p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/ä¼˜åŒ–æ–¹æ³•æ€»ç»“/saddle_point_evaluation_optimizers.gif" alt></p>
<blockquote>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p><a href="https://ruder.io/optimizing-gradient-descent/index.html" target="_blank" rel="noopener">An overview of gradient descent optimization algorithms</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Neural Networks</category>
      </categories>
      <tags>
        <tag>Neural Networks</tag>
        <tag>Deep Learning</tag>
        <tag>optimization</tag>
        <tag>SGD</tag>
        <tag>Adam</tag>
        <tag>Momentum</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±åº¦å­¦ä¹ debugæ²‰æ€å½•</title>
    <url>/2020/08/10/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0debug%E6%B2%89%E6%80%9D%E5%BD%95/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a><strong>å‰è¨€</strong></h2><p>æ¥è§¦æ·±åº¦å­¦ä¹ ä¹Ÿæœ‰ä¸€ä¸¤å¹´äº†ï¼Œä¸€ç›´æ²¡æœ‰å°†ä¸€äº›å®æˆ˜ç»éªŒæ•´ç†ä¸€ä¸‹å½¢æˆæ–‡å­—ã€‚æœ¬æ–‡æ‰“ç®—ç”¨æ¥è®°å½•ä¸€äº›<strong>åœ¨æ·±åº¦å­¦ä¹ å®è·µä¸­çš„è°ƒè¯•è¿‡ç¨‹</strong>ï¼Œè®°å½•ä¸€äº›ç»éªŒä¹‹è°ˆã€‚å› ä¸ºç›®å‰æ·±åº¦å­¦ä¹ ä¸šç•Œçš„ç†è®ºåŸºç¡€å°šä¸”è–„å¼±ï¼Œå¾ˆå¤šå·¥ç¨‹å®è·µä¸­çš„é—®é¢˜æ²¡æ³•ç”¨ç†è®ºè§£é‡Šå¾—å¾ˆå¥½ï¼Œè¿™é‡Œçš„åªæ˜¯å®è·µä¸­çš„ä¸€äº›ç»éªŒä¹‹è°ˆï¼Œä»¥ä¾›å‚è€ƒä»¥åŠæ’é”™ã€‚æœ¬æ–‡å°†æŒç»­æ›´æ–°ã€‚</p>
<p>éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œæœ¬æ–‡çš„å¾ˆå¤šå•çº¯åªæ˜¯ç»éªŒï¼Œåœ¨å°½å¯èƒ½åˆ—å‡ºå‚è€ƒæ–‡çŒ®çš„åŒæ—¶å´å¹¶æ— ä¸¥æ ¼ç†è®ºéªŒè¯ï¼Œå¸Œæœ›å¤§å®¶è§è°…ã€‚æ¬¢è¿å¤§å®¶é›†æ€å¹¿ç›Šï¼Œå…±åŒç»´æŠ¤è¿™ä¸ªç»éªŒé›†ï¼Œä¸ºæ•´ä¸ªç¤¾åŒºè´¡çŒ®å¾®å¼±åŠ›é‡ã€‚<a id="more"></a></p>
<h2 id="1ã€åœ¨åˆ†ç±»é—®é¢˜ä¸­ï¼ŒæŸå¤±å‡½æ•°åŠå…¶å¿«é€Ÿå¾—ä¸‹é™ä¸º0-0000"><a href="#1ã€åœ¨åˆ†ç±»é—®é¢˜ä¸­ï¼ŒæŸå¤±å‡½æ•°åŠå…¶å¿«é€Ÿå¾—ä¸‹é™ä¸º0-0000" class="headerlink" title="1ã€åœ¨åˆ†ç±»é—®é¢˜ä¸­ï¼ŒæŸå¤±å‡½æ•°åŠå…¶å¿«é€Ÿå¾—ä¸‹é™ä¸º0.0000"></a><strong>1ã€åœ¨åˆ†ç±»é—®é¢˜ä¸­ï¼ŒæŸå¤±å‡½æ•°åŠå…¶å¿«é€Ÿå¾—ä¸‹é™ä¸º0.0000</strong></h2><p>åœ¨åˆ†ç±»é—®é¢˜ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬é‡‡ç”¨çš„æ˜¯äº¤å‰ç†µ[1]ä½œä¸ºæŸå¤±å‡½æ•°ï¼Œå¦‚å¼(1.1)æ‰€ç¤º</p>
<script type="math/tex; mode=display">
L_{cls} = - \sum _{i=1} ^ n y_i\log \hat{y_i} = -\boldsymbol{y}^T\log \hat{\boldsymbol{y}}</script><p>å…¶ä¸­å’Œæ˜¯é¢„æµ‹ç»“æœï¼Œä»¥æ¦‚ç‡åˆ†å¸ƒçš„å½¢å¼è¡¨è¾¾ï¼Œå¦‚[0.2, 0.3, 0.3]ç­‰ï¼Œä¸€èˆ¬æ˜¯é€šè¿‡softmaxå±‚å®ç°ï¼Œå’Œæ˜¯æ ·æœ¬çœŸå®æ ‡ç­¾ï¼Œåœ¨å•åˆ†ç±»é—®é¢˜ä¸­ï¼Œé‡‡ç”¨çš„æ˜¯ç‹¬çƒ­ç¼–ç [2]ï¼Œåªæœ‰ä¸€ä¸ªåˆ†é‡æ˜¯ä¸º1çš„ï¼Œå¦‚[0, 1, 0]ã€‚ï¼ˆå…¬å¼ç¬¬äºŒè¡Œæ˜¯å‘é‡åŒ–è¡¨è¾¾ï¼‰</p>
<p><strong>æˆ‘ä»¬å‘ç°ï¼Œäº¤å‰ç†µæŸå¤±çš„ä¸‹ç¡®ç•Œæ˜¯0ï¼Œä½†æ˜¯æ°¸è¿œéƒ½ä¸å¯èƒ½è¾¾åˆ°0</strong>ï¼Œå› ä¸ºè¦è¾¾åˆ°0ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„é¢„æµ‹å‘é‡åˆ†å¸ƒå°±å¿…é¡»å®Œå…¨å’ŒçœŸå®æ ‡ç­¾ä¸€è‡´ï¼Œé€€åŒ–ä¸ºç‹¬çƒ­ç¼–ç ã€‚ä½†æ˜¯å®é™…ä¸Šåœ¨ç¥ç»ç½‘ç»œä¸­ï¼Œç»è¿‡äº†softmaxå±‚ä¹‹åï¼Œæ˜¯ä¸å¯èƒ½ä½¿å¾—é™¤äº†ç›®æ ‡åˆ†é‡çš„å…¶ä»–æ‰€æœ‰åˆ†é‡ä¸º0çš„ï¼ˆè¿™ä¸ªè¿™é‡Œåªæ˜¯æŠ›å‡ºäº†ç»“è®ºï¼Œè®¨è®ºéœ€è¦æ¯”è¾ƒé•¿çš„ç¯‡å¹…ã€‚ï¼‰ï¼Œå› æ­¤æ°¸è¿œä¸å¯èƒ½è¾¾åˆ°0çš„ï¼Œæ­£æ˜¯å› ä¸ºå¦‚æ­¤ï¼Œäº¤å‰ç†µæŸå¤±å¯ä»¥ä¸€ç›´ä¼˜åŒ–ï¼Œè¿™ä¹Ÿæ˜¯å…¶æ¯”MSEæŸå¤±ä¼˜çš„ä¸€ä¸ªç‚¹ä¹‹ä¸€ã€‚</p>
<p>æ—¢ç„¶æ³¨æ„åˆ°äº†ä¸å¯èƒ½ä¸º0ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ†æï¼Œè¿™è‚¯å®šæ˜¯è‡ªå·±ç¨‹åºé—®é¢˜ï¼Œæˆ‘ä»¬å°†ç»è¿‡softmaxä¹‹å‰çš„logitæ‰“å°å‡ºï¼Œå¦‚ï¼š</p>
<script type="math/tex; mode=display">
[1023, -201, 1021, 124]</script><p>å‘ç°äº†æ²¡æœ‰ï¼Œè¿™äº›å€¼éƒ½å¾ˆå¤§ï¼Œè€Œsoftmaxå‡½æ•°ä¸º:</p>
<script type="math/tex; mode=display">
P(x_i) = \frac{\exp (x_i)}{\sum _{i=1}^{n} \exp(x_i)}</script><p>æˆ‘ä»¬ä¼šå‘ç°ï¼Œè¿‡å¤§æˆ–è€…è¿‡å°çš„æŒ‡æ•°é¡¹ï¼Œæ¯”å¦‚1023ï¼Œä¼šæ¶‰åŠåˆ°è®¡ç®—ï¼Œè¿™ä¸ªæ•°å€¼åœ¨TensorFlowæˆ–è€…å¤§éƒ¨åˆ†æ¡†æ¶ä¸­æ˜¯æº¢å‡ºçš„ï¼Œæ˜¾ç¤ºä¸ºinfï¼Œå› æ­¤å°±ä¼šæŠŠè¯¥åˆ†é‡æ‹‰æˆ1ï¼Œè€Œå…¶ä»–å˜æˆäº†0ã€‚è¿™ç§æ“ä½œæ˜¯ä¼šå¯¼è‡´ä¸¥é‡çš„è¿‡æ‹Ÿåˆçš„ã€‚å› æ­¤ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œlogitå€¼ä¸èƒ½å¤ªå¤§ï¼Œå¦åˆ™å°†ä¼šå‡ºç°æ•°å€¼è®¡ç®—é—®é¢˜ã€‚</p>
<p><strong>é‚£ä¹ˆå¦‚ä½•è§£å†³ï¼Ÿ</strong> å‡ºç°è¿™ç§é—®é¢˜çš„æƒ…å†µå¾ˆå¤šæ—¶å€™æ˜¯å› ä¸º<strong>å‚æ•°åˆå§‹åŒ–</strong>å¯¼è‡´çš„æ•°å€¼è®¡ç®—é—®é¢˜ï¼Œæ¯”å¦‚éƒ½é‡‡ç”¨äº†æ–¹å·®è¿‡å°çš„é«˜æ–¯åˆ†å¸ƒè¿›è¡Œåˆå§‹åŒ–ï¼Œé‚£ä¹ˆå°±ä¼šæŠŠç½‘ç»œçš„è¾“å‡ºçš„èŒƒå›´æ‹‰çš„ç‰¹åˆ«å¤§ï¼Œå¯¼è‡´ä»¥ä¸Šçš„é—®é¢˜ã€‚å› æ­¤åœ¨å‚æ•°åˆå§‹åŒ–ä¸­ï¼Œç¡®ä¿æ¯ä¸€å±‚çš„åˆå§‹åŒ–éƒ½æ˜¯åœ¨ä¸€å®šèŒƒå›´å†…çš„ï¼Œå¯ä»¥è€ƒè™‘é‡‡ç”¨Xavieråˆå§‹åŒ–ï¼ŒKaimingåˆå§‹åŒ–ç­‰ã€‚ï¼ˆè¿™ä¸ªåˆå§‹åŒ–çš„å½±å“æˆ‘ä»¬å°†ä¼šä»¥åè®¨è®ºï¼Œè¿™æ˜¯ä¸€ä¸ªæ–°çš„è¯é¢˜ã€‚ï¼‰</p>
<h2 id="2ã€åœ¨æ­£åˆ™åŒ–çš„è¿‡ç¨‹ä¸­å¯¹ç¥ç»ç½‘ç»œçš„åç½®ä¹Ÿè¿›è¡Œäº†æ­£åˆ™"><a href="#2ã€åœ¨æ­£åˆ™åŒ–çš„è¿‡ç¨‹ä¸­å¯¹ç¥ç»ç½‘ç»œçš„åç½®ä¹Ÿè¿›è¡Œäº†æ­£åˆ™" class="headerlink" title="2ã€åœ¨æ­£åˆ™åŒ–çš„è¿‡ç¨‹ä¸­å¯¹ç¥ç»ç½‘ç»œçš„åç½®ä¹Ÿè¿›è¡Œäº†æ­£åˆ™"></a><strong>2ã€åœ¨æ­£åˆ™åŒ–çš„è¿‡ç¨‹ä¸­å¯¹ç¥ç»ç½‘ç»œçš„åç½®ä¹Ÿè¿›è¡Œäº†æ­£åˆ™</strong></h2><p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„æ˜¯äºŒèŒƒæ•°æ­£åˆ™ï¼Œä¹Ÿå³æ˜¯å²­å›å½’ï¼Œå¦‚å¼å­(2.1)</p>
<script type="math/tex; mode=display">
L = \gamma _w(y, \hat{y})  + \frac{1}{2} \boldsymbol{w}^T\boldsymbol{w}</script><p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬åªä¼šå¯¹ç¥ç»ç½‘ç»œçš„<strong>æƒå€¼</strong>è¿›è¡Œæ­£åˆ™æ“ä½œï¼Œä½¿å¾—æƒå€¼å…·æœ‰ä¸€å®šçš„ç¨€ç–æ€§[21]æˆ–è€…æ§åˆ¶å…¶å°ºå¯¸ï¼Œä½¿å¾—å…¶ä¸è‡³äºå¹…åº¦å¤ªå¤§[3]ï¼Œå‡å°‘æ¨¡å‹çš„å®¹é‡ä»¥å‡å°‘è¿‡æ‹Ÿåˆçš„é£é™©ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°ç¥ç»ç½‘ç»œä¸­æ¯ä¸€å±‚çš„æƒå€¼çš„ä½œç”¨æ˜¯<strong>è°ƒèŠ‚æ¯ä¸€å±‚è¶…å¹³é¢çš„æ–¹å‘</strong>ï¼ˆå› ä¸ºå°±æ˜¯å…¶æ³•å‘é‡ï¼‰ï¼Œå› æ­¤åªè¦æ¯”ä¾‹ä¸€è‡´ï¼Œä¸ä¼šå½±å“è¶…å¹³é¢çš„å½¢çŠ¶çš„ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¿…é¡»æ³¨æ„åˆ°ï¼Œæ¯ä¸€å±‚ä¸­çš„åç½®æ˜¯<strong>è°ƒèŠ‚æ¯ä¸€å±‚è¶…å¹³é¢çš„å¹³ç§»é•¿åº¦çš„</strong>ï¼Œå¦‚æœä½ å¯¹åç½®è¿›è¡Œäº†æ­£åˆ™ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„å¯èƒ½å°±ä¼šå˜å¾—å¾ˆå°ï¼Œæˆ–è€…å¾ˆç¨€ç–ï¼Œè¿™æ ·å°±å¯¼è‡´ä½ çš„æ¯ä¸€å±‚çš„è¶…å¹³é¢åªèƒ½å±€é™äºå¾ˆå°çš„ä¸€ä¸ªèŒƒå›´å†…ï¼Œä½¿å¾—æ¨¡å‹çš„å®¹é‡å¤§å¤§å‡å°‘ï¼Œä¸€èˆ¬ä¼šå¯¼è‡´æ¬ æ‹Ÿåˆ[7]çš„ç°è±¡ã€‚</p>
<p><strong>å› æ­¤ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¸ä¼šå¯¹åç½®è¿›è¡Œæ­£åˆ™çš„ï¼Œæ³¨æ„äº†ã€‚</strong></p>
<p>åœ¨Pytorchæ¡†æ¶ä¸­ï¼Œå¸¸ç”¨çš„æ–¹æ³•ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">param_optimizer = list(self.model.named_parameters())</span><br><span class="line">no_decay = [<span class="string">'bias'</span>, <span class="string">'LayerNorm.bias'</span>, <span class="string">'LayerNorm.weight'</span>]</span><br><span class="line">optimizer_grouped_parameters = [</span><br><span class="line">	&#123;<span class="string">'params'</span>: [p <span class="keyword">for</span> n, p <span class="keyword">in</span> param_optimizer <span class="keyword">if</span> <span class="keyword">not</span> any(nd <span class="keyword">in</span> n <span class="keyword">for</span> nd <span class="keyword">in</span> no_decay)], <span class="string">'weight_decay'</span>: config.weight_decay&#125;,</span><br><span class="line">   	&#123;<span class="string">'params'</span>: [p <span class="keyword">for</span> n, p <span class="keyword">in</span> param_optimizer <span class="keyword">if</span> any(nd <span class="keyword">in</span> n <span class="keyword">for</span> nd <span class="keyword">in</span> no_decay)], <span class="string">'weight_decay'</span>: <span class="number">0.0</span>&#125;</span><br><span class="line">]</span><br><span class="line">self.optimizer = AdamW(optimizer_grouped_parameters, config.lr)</span><br></pre></td></tr></table></figure>
<h2 id="3ã€å­¦ä¹ ç‡å¤ªå¤§å¯¼è‡´ä¸æ”¶æ•›"><a href="#3ã€å­¦ä¹ ç‡å¤ªå¤§å¯¼è‡´ä¸æ”¶æ•›" class="headerlink" title="3ã€å­¦ä¹ ç‡å¤ªå¤§å¯¼è‡´ä¸æ”¶æ•›"></a><strong>3ã€å­¦ä¹ ç‡å¤ªå¤§å¯¼è‡´ä¸æ”¶æ•›</strong></h2><p>ä¸æ”¶æ•›æ˜¯ä¸ªèŒƒå›´å¾ˆå¤§çš„é—®é¢˜ï¼Œæœ‰å¾ˆå¤šå¯èƒ½æ€§ï¼Œå…¶ä¸­æœ‰ä¸€ç§æ˜¯å’Œç½‘ç»œç»“æ„æ— å…³çš„åŸå› ï¼Œå°±æ˜¯å­¦ä¹ ç‡è®¾ç½®çš„å¤ªå¤§äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¤ªå¤§çš„å­¦ä¹ ç‡å°†ä¼šå¯¼è‡´ä¸¥é‡çš„æŠ–åŠ¨ï¼Œä½¿å¾—æ— æ³•æ”¶æ•›ï¼Œ<strong>ç”šè‡³åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½ä½¿å¾—æŸå¤±å˜å¾—è¶Šæ¥è¶Šå¤§ç›´åˆ°æ— ç©·</strong>ã€‚è¿™ä¸ªæ—¶å€™è¯·è°ƒæ•´ä½ çš„å­¦ä¹ ç‡ï¼Œå°è¯•æ˜¯å¦å¯ä»¥æ”¶æ•›ã€‚å½“ç„¶ï¼Œè¿™é‡Œçš„â€œå¤ªå¤§â€ç›®å‰æ²¡æœ‰ç†è®ºå¯ä»¥è¡¡é‡ï¼Œä¸è¿‡æˆ‘å–œæ¬¢ä»çš„Adamä¼˜åŒ–å™¨[4]å¼€å§‹è¿›è¡Œå°è¯•ä¼˜åŒ–ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/æ·±åº¦å­¦ä¹ debugæ²‰æ€å½•/3.1.PNG" alt="img"></p>
<p>ä¸‹å›¾å±•ç¤ºäº†è¿‡å¤§è¿‡å°çš„å­¦ä¹ ç‡å¯¹æ¨¡å‹æ€§èƒ½çš„å½±å“æ›²çº¿å›¾ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/æ·±åº¦å­¦ä¹ debugæ²‰æ€å½•/3.2.PNG" alt="img"></p>
<h2 id="4ã€åˆ«åœ¨softmaxå±‚å‰é¢çš„è¾“å…¥æ–½åŠ äº†æ¿€æ´»å‡½æ•°"><a href="#4ã€åˆ«åœ¨softmaxå±‚å‰é¢çš„è¾“å…¥æ–½åŠ äº†æ¿€æ´»å‡½æ•°" class="headerlink" title="4ã€åˆ«åœ¨softmaxå±‚å‰é¢çš„è¾“å…¥æ–½åŠ äº†æ¿€æ´»å‡½æ•°"></a><strong>4ã€åˆ«åœ¨softmaxå±‚å‰é¢çš„è¾“å…¥æ–½åŠ äº†æ¿€æ´»å‡½æ•°</strong></h2><p>å‡è®¾æˆ‘ä»¬çš„ç½‘ç»œæå–å‡ºæ¥çš„æœ€åçš„ç‰¹å¾å‘é‡æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æœ€åçš„åˆ†ç±»çš„ç±»åˆ«æœ‰ç±»ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¼šç”¨ä¸€ä¸ªå…¨è¿æ¥å±‚å°†å…¶æ˜ å°„åˆ°å¯¹åº”ç»´åº¦çš„ç©ºé—´é‡Œé¢ï¼Œå¦‚å¼(4.2)ã€‚</p>
<script type="math/tex; mode=display">
\boldsymbol{y} = g_w(\widetilde{\boldsymbol{y}})</script><p>é‚£ä¹ˆï¼Œè¿™ä¸ªå…¨è¿æ¥å±‚è™½ç„¶è¯´å¯ä»¥çœ‹æˆæ˜¯åˆ†ç±»å™¨ï¼Œä½†æ˜¯æˆ‘ä»¬æœ€å¥½æŠŠå®ƒçœ‹æˆæ˜¯ä¸Šä¸€å±‚çš„â€œè¿‘çº¿æ€§å¯åˆ†ç‰¹å¾â€çš„ä¸€ä¸ªç»´åº¦è½¬æ¢ï¼ˆæœ‰ç‚¹ç»•ï¼Œæ„æ€æ˜¯æˆ‘ä»¬è¿™é‡Œåªæ˜¯ä¸€ä¸ªç»´åº¦çš„è½¬æ¢ï¼Œè€Œä¸æ¶‰åŠåˆ°kernelï¼‰ï¼Œä¸ç®¡æ€ä¹ˆè¯´ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬çš„è¾“å‡ºæ˜¯ä¸èƒ½æœ‰æ¿€æ´»å‡½æ•°çš„ï¼Œå¦‚ä¸‹å¼æ˜¯<strong>ä¸å¯ä»¥çš„</strong>ï¼š</p>
<script type="math/tex; mode=display">
\boldsymbol{y} = \sigma( g_w(\widetilde{\boldsymbol{y}}))</script><p>è¿™æ—¶å€™çš„è¾“å‡ºï¼Œå…·æœ‰å’Œåˆ†ç±»ç±»åˆ«ç›¸åŒçš„ç»´åº¦ï¼Œåœ¨å¾ˆå¤šæ¡†æ¶ä¸­è¢«ç§°ä¹‹ä¸º<strong>logits</strong>å€¼ï¼Œè¿™ä¸ªå€¼ä¸€èˆ¬æ˜¯åœ¨å®æ•°èŒƒå›´å†…çš„ï¼Œä¸€èˆ¬ä¸ä¼šå¤ªå¤§ï¼Œå‚è€ƒç¬”è®°ç¬¬ä¸€ç‚¹çš„æƒ…å†µã€‚</p>
<h2 id="5ã€æ£€æŸ¥åŸæ•°æ®è¾“å…¥çš„å€¼èŒƒå›´"><a href="#5ã€æ£€æŸ¥åŸæ•°æ®è¾“å…¥çš„å€¼èŒƒå›´" class="headerlink" title="5ã€æ£€æŸ¥åŸæ•°æ®è¾“å…¥çš„å€¼èŒƒå›´"></a><strong>5ã€æ£€æŸ¥åŸæ•°æ®è¾“å…¥çš„å€¼èŒƒå›´</strong></h2><p>åŸå§‹æ•°æ®è¾“å…¥å¯èƒ½åƒå¥‡ç™¾æ€ªï¼Œæ¯ä¸ªç‰¹å¾ç»´çš„å€¼èŒƒå›´å¯èƒ½æœ‰ç€æ•°é‡çº§ä¸Šçš„å·®åˆ«ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœæˆ‘ä»¬ä¸å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œå°†ä¼šå¤§å¤§å¢å¤§è®¾è®¡ç½‘ç»œçš„è´Ÿæ‹…ã€‚ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬å¸Œæœ›è¾“å…¥çš„æ•°æ®æ˜¯ä¸­å¿ƒå¯¹é½çš„ï¼Œä¹Ÿå³æ˜¯<strong>0å‡å€¼</strong>çš„[5]ï¼Œå¯ä»¥åŠ é€Ÿç½‘ç»œæ”¶æ•›çš„é€Ÿåº¦ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›ä¸åŒç»´åº¦ä¸Šçš„æ•°å€¼èŒƒå›´æ˜¯ä¸€è‡´çš„ï¼Œå¯ä»¥é‡‡ç”¨ä¸€äº›å½’ä¸€åŒ–[6]çš„æ‰‹æ®µè¿›è¡Œå¤„ç†ï¼ˆè¿™ä¸ªæ—¶å€™å‡è®¾æ¯ä¸ªç»´åº¦é‡è¦æ€§æ˜¯ä¸€æ ·çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬å›¾ç‰‡çš„ä¸‰ä¸ªé€šé“ç­‰ï¼‰ã€‚</p>
<h2 id="6ã€åˆ«å¿˜äº†å¯¹ä½ çš„è®­ç»ƒæ•°æ®è¿›è¡Œæ‰“ä¹±"><a href="#6ã€åˆ«å¿˜äº†å¯¹ä½ çš„è®­ç»ƒæ•°æ®è¿›è¡Œæ‰“ä¹±" class="headerlink" title="6ã€åˆ«å¿˜äº†å¯¹ä½ çš„è®­ç»ƒæ•°æ®è¿›è¡Œæ‰“ä¹±"></a><strong>6ã€åˆ«å¿˜äº†å¯¹ä½ çš„è®­ç»ƒæ•°æ®è¿›è¡Œæ‰“ä¹±</strong></h2><p>ç»å¸¸ï¼Œä½ çš„è®­ç»ƒè¿‡ç¨‹éå¸¸å®Œç¾ï¼Œèƒ½å¤Ÿå¾ˆå¥½åœ°æ‹Ÿåˆè®­ç»ƒæ•°æ®ï¼Œä½†æ˜¯åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ç¡®å®ä¸€å¡Œç³Šæ¶‚ï¼Œæ˜¯çš„ï¼Œä½ çš„æ¨¡å‹è¿™ä¸ªæ—¶å€™è¿‡æ‹Ÿåˆ[7]äº†ã€‚è¿™ä¸ªæ—¶å€™ä½ ä¼šæ£€æŸ¥æ¨¡å‹çš„æœ‰æ•ˆæ€§ï¼Œä¸è¿‡åœ¨è¿›è¡Œè¿™ä¸€æ­¥ä¹‹å‰ï¼Œä¸å¦¨å…ˆæ£€æŸ¥ä¸‹ä½ çš„<strong>æ•°æ®åŠ è½½å™¨</strong>(Data Loader)æ˜¯å¦æ˜¯æ­£å¸¸è®¾è®¡çš„ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬çš„è®­ç»ƒæ•°æ®åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€ä¸ªepoch[8]ä¸­ï¼Œéƒ½æ˜¯éœ€è¦è¿›è¡Œ<strong>æ‰“ä¹±</strong>(shuffle)çš„ï¼Œå¾ˆå¤šæ¡†æ¶çš„æ•°æ®åŠ è½½å™¨å‚æ•°åˆ—è¡¨ä¸­éƒ½ä¼šæœ‰è¿™é¡¹é€‰é¡¹ï¼Œæ¯”å¦‚pytorchçš„DataLoaderç±»[9]ã€‚ä¸ºä»€ä¹ˆéœ€è¦æ‰“ä¹±å‘¢ï¼Ÿé‚£æ˜¯å› ä¸ºå¦‚æœä¸æ‰“ä¹±æˆ‘ä»¬çš„è®­ç»ƒæ•°æ®ï¼Œæˆ‘ä»¬çš„æ¨¡å‹å°±æœ‰å¯èƒ½å­¦ä¹ åˆ°è®­ç»ƒæ•°æ®çš„ä¸ªä½“ä¸ä¸ªä½“ä¹‹é—´ç‰¹å®šçš„æ’åˆ—é¡ºåºï¼Œè€Œè¿™ç§æ’åˆ—é¡ºåºï¼Œåœ¨å¾ˆå¤šæƒ…å†µä¸‹æ˜¯æ— ç”¨çš„ï¼Œä¼šå¯¼è‡´è¿‡æ‹Ÿåˆçš„ç³Ÿç³•ç°è±¡ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œåœ¨æ¯ä¸€ä¸ªepochè®­ç»ƒä¸­éƒ½å¯¹è®­ç»ƒé›†è¿›è¡Œæ‰“ä¹±ï¼Œä»¥ç¡®ä¿æ¨¡å‹ä¸èƒ½â€œè®°å¿†â€æ ·æœ¬ä¹‹é—´çš„ç‰¹å®šæ’åºã€‚è¿™å…¶å®ä¹Ÿæ˜¯<strong>æ­£åˆ™</strong>çš„ä¸€ç§æ‰‹æ®µã€‚</p>
<p>åœ¨è®­ç»ƒä¸­ï¼Œå¤§æ¦‚å¦‚ï¼š</p>
<script type="math/tex; mode=display">
epoch1 -> shuffle -> eposh2 -> shuffle ...</script><h2 id="7ã€ä¸€ä¸ªbatchä¸­ï¼Œlabelä¸è¦å…¨éƒ¨ç›¸åŒ"><a href="#7ã€ä¸€ä¸ªbatchä¸­ï¼Œlabelä¸è¦å…¨éƒ¨ç›¸åŒ" class="headerlink" title="7ã€ä¸€ä¸ªbatchä¸­ï¼Œlabelä¸è¦å…¨éƒ¨ç›¸åŒ"></a><strong>7ã€ä¸€ä¸ªbatchä¸­ï¼Œlabelä¸è¦å…¨éƒ¨ç›¸åŒ</strong></h2><p>è¿™ä¸ªæƒ…å†µæœ‰ç‚¹ç±»ä¼¼ä¸ç¬”è®°çš„ç¬¬å…­ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦å°½é‡ç»™è®­ç»ƒè¿‡ç¨‹ä¸­äººä¸ºå¼•å…¥ä¸ç¡®å®šæ€§ï¼Œè¿™æ˜¯å¾ˆå¤šæ­£åˆ™æ‰‹æ®µï¼ŒåŒ…æ‹¬dropoutï¼Œstochastic depthç­‰çš„æ€è·¯ï¼Œè¿™æ ·èƒ½å¤Ÿæœ‰æ•ˆåœ°å‡å°‘è¿‡æ‹Ÿåˆçš„é£é™©ã€‚å› æ­¤ï¼Œä¸€ä¸ªbatchä¸­ï¼Œå°½é‡ç¡®ä¿ä½ çš„æ ·æœ¬æ˜¯æ¥è‡ªäºå„ä¸ªç±»çš„ï¼ˆé’ˆå¯¹åˆ†ç±»é—®é¢˜è€Œè¨€ï¼‰ï¼Œè¿™æ ·ä½ çš„æ¨¡å‹ä¼šå‡å°‘æ‰§ç€ä¸æŸä¸ªç±»åˆ«çš„æ¦‚ç‡ï¼Œå‡å°‘è¿‡æ‹Ÿåˆé£é™©ï¼ŒåŒæ—¶ä¹Ÿä¼šåŠ å¿«æ”¶æ•›é€Ÿåº¦ã€‚</p>
<h2 id="8ã€å°‘ç”¨vanilla-SGDä¼˜åŒ–å™¨"><a href="#8ã€å°‘ç”¨vanilla-SGDä¼˜åŒ–å™¨" class="headerlink" title="8ã€å°‘ç”¨vanilla SGDä¼˜åŒ–å™¨"></a><strong>8ã€å°‘ç”¨vanilla SGDä¼˜åŒ–å™¨</strong></h2><p>åœ¨é«˜ç»´åº¦æƒ…å†µä¸‹çš„ä¼˜åŒ–ï¼Œå…¶ä¼˜åŒ–å¹³é¢ä¼šå‡ºç°å¾ˆå¤šéç‚¹ï¼ˆæ—¢æ˜¯æ¢¯åº¦ä¸º0ï¼Œä½†å´ä¸æ˜¯æç‚¹ï¼‰ï¼Œé€šå¸¸ï¼Œéç‚¹ä¼šæ¯”å±€éƒ¨æå€¼æ›´å®¹æ˜“å‡ºç°ï¼ˆç›´è§‚æ„Ÿå—å°±æ˜¯ï¼Œå› ä¸ºé«˜ç»´åº¦æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç‚¹å‘¨å›´æœ‰å¾ˆå¤šç»´åº¦ï¼Œå¦‚æœæ˜¯æå€¼ç‚¹ï¼Œé‚£ä¹ˆå°±éœ€è¦å…¶ä»–æ‰€æœ‰ç»´åº¦éƒ½æ˜¯æœå‘åŒä¸€ä¸ªæ–¹å‘â€œå¼¯æ›²â€çš„ï¼Œè€Œè¿™ä¸ªè¦æ¯”éç‚¹çš„å„ä¸ªæ–¹å‘â€œå¼¯æ›²â€çš„æƒ…å†µå¯èƒ½è¦å°ï¼‰ï¼Œå› æ­¤è¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ›´æ‹…å¿ƒé™·äºéç‚¹ï¼Œè€Œä¸æ˜¯å±€éƒ¨æå°å€¼ç‚¹ï¼ˆå½“ç„¶å±€éƒ¨æå°å€¼ç‚¹ä¹Ÿæ˜¯ä¸€ä¸ªå¤§éº»çƒ¦ï¼Œä¸è¿‡éç‚¹æ›´éº»çƒ¦ï¼‰ã€‚å¦‚æœé‡‡ç”¨æ™®é€šçš„SGDä¼˜åŒ–å™¨ï¼Œé‚£ä¹ˆå°±ä¼šé™·äºä»»ä½•ä¸€ä¸ªæ¢¯åº¦ä¸º0çš„ç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œææœ‰å¯èƒ½ä¼šé™·äºéç‚¹ã€‚å¦‚æœè¦ä½¿ç”¨SGDæ–¹æ³•ï¼Œå»ºè®®ä½¿ç”¨å¸¦æœ‰momentumçš„SGDæ–¹æ³•ï¼Œå¯ä»¥æœ‰æ•ˆé¿å…é™·å…¥éç‚¹çš„é£é™©ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/æ·±åº¦å­¦ä¹ debugæ²‰æ€å½•/8.1.PNG" alt="img"></p>
<p>ä¸‹å›¾æ˜¯æŸä¸ªå‡½æ•°çš„ä¸‰ç»´æ›²çº¿å›¾å’Œç­‰é«˜çº¿å›¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰è‹¥å¹²ä¸ªå±€éƒ¨æœ€ä¼˜ç‚¹å’Œéç‚¹ï¼Œè¿™äº›ç‚¹å¯¹äºvanilla SGDæ¥è¯´æ˜¯ä¸å®¹æ˜“å¤„ç†çš„ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/æ·±åº¦å­¦ä¹ debugæ²‰æ€å½•/8.2.PNG" alt="img"></p>
<h2 id="9ã€æ£€æŸ¥å„å±‚æ¢¯åº¦ï¼Œå¯¹æ¢¯åº¦çˆ†ç‚¸è¿›è¡Œæˆªæ–­"><a href="#9ã€æ£€æŸ¥å„å±‚æ¢¯åº¦ï¼Œå¯¹æ¢¯åº¦çˆ†ç‚¸è¿›è¡Œæˆªæ–­" class="headerlink" title="9ã€æ£€æŸ¥å„å±‚æ¢¯åº¦ï¼Œå¯¹æ¢¯åº¦çˆ†ç‚¸è¿›è¡Œæˆªæ–­"></a><strong>9ã€æ£€æŸ¥å„å±‚æ¢¯åº¦ï¼Œå¯¹æ¢¯åº¦çˆ†ç‚¸è¿›è¡Œæˆªæ–­</strong></h2><p>æœ‰äº›æ—¶å€™ï¼Œä½ ä¼šå‘ç°åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œä½ çš„æŸå¤±çªç„¶å˜å¾—ç‰¹åˆ«å¤§ï¼Œæˆ–è€…ç‰¹åˆ«å°ï¼Œè¿™ä¸ªæ—¶å€™ä¸å¦¨æ£€æŸ¥ä¸‹æ¯ä¸€å±‚çš„æ¢¯åº¦ï¼ˆç”¨tensorboardçš„distributionå¯ä»¥å¾ˆå¥½åœ°æ£€æŸ¥ï¼‰ï¼Œå¾ˆå¯èƒ½æ˜¯å‘ç”Ÿäº†<strong>æ¢¯åº¦çˆ†ç‚¸</strong>(gradient explosion)çš„æƒ…å†µï¼Œç‰¹åˆ«æ˜¯åœ¨å­˜åœ¨LSTMç­‰æ—¶åºçš„ç½‘ç»œä¸­ï¼Œå¾ˆå®¹æ˜“å‡ºç°è¿™ç§æƒ…å†µã€‚å› æ­¤ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä¼šç”¨æ¢¯åº¦æˆªæ–­è¿›è¡Œå¤„ç†ï¼Œæ“ä½œå¾ˆç®€å•ç²—æš´ï¼Œå°±æ˜¯è®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼ŒæŠŠè¶…è¿‡è¿™ä¸ªé˜ˆå€¼çš„æ¢¯åº¦å…¨éƒ¨æ‹‰åˆ°è¿™ä¸ªé˜ˆå€¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/æ·±åº¦å­¦ä¹ debugæ²‰æ€å½•/9.1.PNG" alt="img"></p>
<p>åœ¨tensorflowä¸­ä¹Ÿæä¾›äº†ç›¸åº”çš„APIä¾›æ¢¯åº¦æˆªæ–­ä½¿ç”¨[10]ï¼Œå¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tf.clip_by_value(    </span><br><span class="line">    t,    </span><br><span class="line">	clip_value_min, <span class="comment"># æŒ‡å®šæˆªæ–­æœ€å°å€¼    </span></span><br><span class="line">	clip_value_max, <span class="comment"># æŒ‡å®šæˆªæ–­æœ€å¤§å€¼    </span></span><br><span class="line">	name=<span class="literal">None</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>å…·ä½“ä½¿ç”¨è§[11]ï¼Œåœ¨åº”ç”¨æ¢¯åº¦ä¹‹å‰ï¼Œå¯¹æ¢¯åº¦æˆªæ–­è¿›è¡Œå¤„ç†ã€‚</p>
<h2 id="10ã€æ£€æŸ¥ä½ çš„æ ·æœ¬label"><a href="#10ã€æ£€æŸ¥ä½ çš„æ ·æœ¬label" class="headerlink" title="10ã€æ£€æŸ¥ä½ çš„æ ·æœ¬label"></a><strong>10ã€æ£€æŸ¥ä½ çš„æ ·æœ¬label</strong></h2><p>æœ‰äº›æ—¶å€™ï¼Œä½ çš„è®­ç»ƒè¿‡ç¨‹å¯ä»¥å¾ˆå¥½åœ°æ”¶æ•›ï¼Œå½“ä½¿ç”¨MSEæŸå¤±[12]çš„æ—¶å€™ç”šè‡³å¯èƒ½è¾¾åˆ°0.0000çš„æƒ…å†µã€‚ä½†æ˜¯ï¼Œå½“ä½ æŠŠæ¨¡å‹æ‹¿åˆ°æµ‹è¯•é›†ä¸­è¯„ä¼°çš„æ—¶å€™ï¼Œå´å‘ç°æ€§èƒ½æå·®ï¼Œä»¿ä½›æ²¡æœ‰è®­ç»ƒä¸€æ ·ã€‚è¿™æ˜¯è¿‡æ‹Ÿåˆå—ï¼Ÿæ˜¾ç„¶æ˜¯çš„ï¼Œä½†æ˜¯è¿™å¯èƒ½å¹¶ä¸æ˜¯ä½ çš„æ¨¡å‹çš„é—®é¢˜ï¼Œè¯·æ£€æŸ¥ä½ çš„æ•°æ®åŠ è½½ä¸­è®­ç»ƒé›†çš„æ ·æœ¬æ ‡ç­¾æ˜¯å¦æ­£ç¡®å¯¹åº”ã€‚</p>
<p>è¿™ä¸ªé—®é¢˜å¾ˆç™½ç—´ï¼Œä½†æ˜¯å´çœŸçš„å¾ˆå®¹æ˜“åœ¨æ•°æ®åŠ è½½è¿‡ç¨‹ä¸­å› ä¸ºç§ç§åŸå› æŠŠlabelä¿¡æ¯å’Œå¯¹åº”æ ·æœ¬ç»™æ··æ‰ã€‚æ ¹æ®æ–‡çŒ®[13]ä¸­çš„å®éªŒï¼Œç”¨MSEæŸå¤±çš„æƒ…å†µä¸‹ï¼Œå°±ç®—æ˜¯ä½ çš„labelå®Œå…¨éšæœºçš„ï¼Œå’Œæ ·æœ¬ä¸€ç‚¹å…³ç³»éƒ½æ²¡æœ‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åŸºäºSGDçš„ä¼˜åŒ–ç®—æ³•è¾¾åˆ°0.0000æŸå¤±çš„ã€‚<strong>å› æ­¤ï¼Œè¯·åŠ¡å¿…ç¡®ä¿ä½ çš„æ ·æœ¬labelæ˜¯æ­£ç¡®çš„ã€‚</strong></p>
<h2 id="11ã€åˆ†ç±»é—®é¢˜ä¸­çš„åˆ†ç±»ç½®ä¿¡åº¦é—®é¢˜"><a href="#11ã€åˆ†ç±»é—®é¢˜ä¸­çš„åˆ†ç±»ç½®ä¿¡åº¦é—®é¢˜" class="headerlink" title="11ã€åˆ†ç±»é—®é¢˜ä¸­çš„åˆ†ç±»ç½®ä¿¡åº¦é—®é¢˜"></a><strong>11ã€åˆ†ç±»é—®é¢˜ä¸­çš„åˆ†ç±»ç½®ä¿¡åº¦é—®é¢˜</strong></h2><p>åœ¨åˆ†ç±»é—®é¢˜ä¸­æˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯é‡‡ç”¨çš„æ˜¯äº¤å‰ç†µæŸå¤±ï¼Œå¦‚å¼å­(1.1)æ‰€ç¤ºï¼Œåœ¨ä¸€äº›å®éªŒä¸­ï¼Œå¦‚æœæˆ‘ä»¬ç»˜åˆ¶å‡ºè®­ç»ƒæŸå¤±å’Œåˆ†ç±»å‡†ç¡®åº¦çš„æ›²çº¿å›¾ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæœ‰ä¸‹å›¾è¿™ç§æƒ…å†µ[14]ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/æ·±åº¦å­¦ä¹ debugæ²‰æ€å½•/11.1.PNG" alt="img"></p>
<p>å…¶ä¸­ä¸Šå›¾ä¸ºåˆ†ç±»æŸå¤±ï¼Œç´«è‰²ä¸ºè®­ç»ƒæŸå¤±ï¼Œè“è‰²ä¸ºæµ‹è¯•æŸå¤±ï¼Œä¸‹å›¾ä¸ºåˆ†ç±»å‡†ç¡®åº¦ï¼Œç»¿è‰²ä¸ºè®­ç»ƒå‡†ç¡®åº¦ï¼Œè“è‰²ä¸ºæµ‹è¯•å‡†ç¡®åº¦ã€‚<strong>æˆ‘ä»¬ä¸éš¾å‘ç°ä¸€ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„ç°è±¡ï¼Œå°±æ˜¯å½“æµ‹è¯•æŸå¤±å¼€å§‹åˆ°æœ€ä½ç‚¹ï¼Œå¼€å§‹å‘ä¸Šåå¼¹çš„æ—¶å€™ï¼Œå…¶æµ‹è¯•å‡†ç¡®åº¦å´è¿˜æ˜¯ä¸Šå‡çš„ï¼Œè€Œä¸æ˜¯ä¸‹é™ã€‚</strong> è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿä¸ºä»€ä¹ˆåˆ†ç±»å‡†ç¡®åº¦ä¸ä¼šé¡ºç€åˆ†ç±»æŸå¤±çš„å¢å¤§è€Œå‡å°‘å‘¢ï¼Ÿ</p>
<p>è¿™ä¸ªæ¶‰åŠåˆ°äº†åˆ†ç±»è¿‡ç¨‹ä¸­å¯¹æŸä¸ªç±»çš„â€œç½®ä¿¡ç¨‹åº¦â€çš„å¤šå°‘ï¼Œæ¯”å¦‚ï¼š</p>
<script type="math/tex; mode=display">
[0.9, 0.01, 0.01, 0.07]</script><p>æ¨¡å‹æ˜¯å¯¹ç¬¬ä¸€ç±»ç›¸å½“ç¡®ä¿¡çš„ï¼Œä½†æ˜¯åœ¨ç¬¬äºŒç§æƒ…å†µï¼š</p>
<script type="math/tex; mode=display">
[0.5, 0.4, 0.05, 0.05]</script><p>è¿™å¯¹ç¬¬ä¸€ç±»çš„ç½®ä¿¡ç¨‹åº¦å°±å¾ˆä½äº†ï¼Œè™½ç„¶æŒ‰ç…§è´å¶æ–¯å†³ç­–ï¼Œè¿˜æ˜¯ä¼šé€‰æ‹©ç¬¬ä¸€ç±»ä½œä¸ºå†³ç­–ç»“æœã€‚å› æ­¤è¿™å°±æ˜¯å¯¼è‡´ä»¥ä¸Šç°è±¡çš„åŸå› ï¼Œ<strong>åœ¨é‚£ä¸ªæ‹ç‚¹åé¢ï¼Œè¿™ä¸ªæ¨¡å‹å¯¹äºåˆ†ç±»çš„ç½®ä¿¡ç¨‹åº¦å…¶å®å·²ç»å˜å¾—å¾ˆå·®äº†ï¼Œè™½ç„¶å¯¹äºå‡†ç¡®åº¦è€Œè¨€ï¼Œå…¶è¿˜èƒ½åˆ†ç±»æ­£ç¡®ã€‚</strong> ä½†æ˜¯è¿™å…¶å®æ­£æ˜¯è¿‡æ‹Ÿåˆçš„ä¸€ç§è¡¨ç°ï¼Œæ¨¡å‹å·²ç»å¯¹è‡ªå·±çš„åˆ†ç±»ç»“æœä¸ç¡®ä¿¡äº†ã€‚</p>
<h2 id="12ã€å°‘åœ¨å¤ªå°çš„æ‰¹æ¬¡ä¸­ä½¿ç”¨BatchNormå±‚"><a href="#12ã€å°‘åœ¨å¤ªå°çš„æ‰¹æ¬¡ä¸­ä½¿ç”¨BatchNormå±‚" class="headerlink" title="12ã€å°‘åœ¨å¤ªå°çš„æ‰¹æ¬¡ä¸­ä½¿ç”¨BatchNormå±‚"></a><strong>12ã€å°‘åœ¨å¤ªå°çš„æ‰¹æ¬¡ä¸­ä½¿ç”¨BatchNormå±‚</strong></h2><p>Batch Normalization[15]ï¼Œä¸­æ–‡è¯‘ä½œ<strong>æ‰¹è§„èŒƒåŒ–</strong>ï¼Œåœ¨æ·±åº¦å­¦ä¹ ä¸­æ˜¯ä¸€ç§åŠ å¿«æ”¶æ•›é€Ÿåº¦ï¼Œæé«˜æ€§èƒ½çš„ä¸€ä¸ªåˆ©å™¨ï¼Œå…¶æœ¬è´¨å’Œæˆ‘ä»¬å¯¹è¾“å…¥çš„åŸæ•°æ®è¿›è¡Œ0å‡å€¼å•ä½æ–¹å·®è§„èŒƒåŒ–å·®ä¸å¤šï¼Œæ˜¯ä»¥batchä¸ºå•ä½ï¼Œå¯¹ä¸­é—´å±‚çš„è¾“å‡ºè¿›è¡Œè§„èŒƒåŒ–ï¼Œå¯ä»¥ç¼“å’Œ<strong>å†…éƒ¨åæ–¹å·®åç§»</strong>(Internal Covariate Shift)çš„ç°è±¡ã€‚å…¶åŸºæœ¬å…¬å¼å¾ˆç®€å•ï¼Œå¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
\widetilde{x} = \frac{x_i - \mu}{\sigma_i}</script><script type="math/tex; mode=display">
x_i^{norm} = \gamma_i \cdot \widetilde{x} + \beta_i</script><p>ä¸è¿‡è¿™é‡Œå¹¶ä¸æ‰“ç®—å¯¹BNè¿›è¡Œè¯¦ç»†è®²è§£ï¼Œåªæ˜¯æƒ³å‘Šè¯‰å¤§å®¶ï¼Œå› ä¸ºBNæ“ä½œåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æ˜¯å¯¹æ¯ä¸ªbatchè¿›è¡Œå¤„ç†çš„ï¼Œä»æ¯ä¸ªbatchä¸­æ±‚å¾—å‡å€¼å’Œæ–¹å·®æ‰èƒ½è¿›è¡Œæ“ä½œã€‚å¦‚æœä½ çš„batchç‰¹åˆ«å°ï¼ˆæ¯”å¦‚æ˜¯å—é™äºç¡¬ä»¶æ¡ä»¶æˆ–è€…ç½‘ç»œè¦æ±‚å°batchï¼‰ï¼Œé‚£ä¹ˆBNå±‚çš„batchå‡å€¼å’Œæ–¹å·®å¯èƒ½å°±ä¼šä¸èƒ½å¾ˆå¥½ç¬¦åˆæ•´ä¸ªè®­ç»ƒé›†çš„ç»Ÿè®¡ç‰¹å¾ï¼Œå¯¼è‡´å·®çš„æ€§èƒ½ã€‚å®é™…ä¸Šï¼Œå®éªŒ[16]è¯´æ˜äº†è¿™ä¸ªå…³ç³»ï¼Œå½“batchå°äº16æ—¶ï¼Œæ€§èƒ½å¤§å¹…åº¦ä¸‹é™ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/æ·±åº¦å­¦ä¹ debugæ²‰æ€å½•/12.1.PNG" alt="img"></p>
<p><strong>å› æ­¤ï¼Œå°‘åœ¨å¤ªå°çš„batchä¸­ä½¿ç”¨BNå±‚ï¼Œå¦‚æœå®åœ¨è¦ä½¿ç”¨ï¼Œåœ¨å‘ç”Ÿæ€§èƒ½é—®é¢˜æ—¶ä¼˜å…ˆæ£€æŸ¥BNå±‚ã€‚</strong></p>
<h2 id="13ã€æ•°å€¼è®¡ç®—é—®é¢˜ï¼Œå‡ºç°Nan"><a href="#13ã€æ•°å€¼è®¡ç®—é—®é¢˜ï¼Œå‡ºç°Nan" class="headerlink" title="13ã€æ•°å€¼è®¡ç®—é—®é¢˜ï¼Œå‡ºç°Nan"></a><strong>13ã€æ•°å€¼è®¡ç®—é—®é¢˜ï¼Œå‡ºç°Nan</strong></h2><p>Nan(Not An Number)æ˜¯ä¸€ä¸ªåœ¨æ•°å€¼è®¡ç®—ä¸­å®¹æ˜“å‡ºç°çš„é—®é¢˜ï¼Œåœ¨æ·±åº¦å­¦ä¹ ä¸­å› ä¸ºæ¶‰åŠåˆ°å¾ˆå¤šæŸå¤±å‡½æ•°ï¼Œæœ‰äº›æŸå¤±å‡½æ•°çš„å®šä¹‰åŸŸå¹¶ä¸æ˜¯æ•´ä¸ªå®æ•°ï¼Œæ¯”å¦‚å¸¸ç”¨çš„å¯¹æ•°ï¼Œå› æ­¤ä¸€ä¸å°å¿ƒå°±ä¼šå‡ºç°Nanã€‚åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œå¦‚æœæŸä¸€å±‚å‡ºç°äº†Nanï¼Œé‚£ä¹ˆæ˜¯å…·æœ‰ä¼ é€’æ€§çš„ï¼Œåé¢çš„å±‚ä¹Ÿä¼šå‡ºç°Nanï¼Œå› æ­¤å¯ä»¥é€šè¿‡<strong>äºŒåˆ†æ³•</strong>å¯¹æ­¤è¿›è¡Œæ’é”™ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨æ·±åº¦å­¦ä¹ ä¸­å‡ºç°Nanæ˜¯ç”±äºé™¤0å¼‚å¸¸æˆ–è€…æ˜¯å› ä¸ºæŸå¤±å‡½æ•°ä¸­çš„ï¼ˆæ¯”å¦‚äº¤å‰ç†µï¼ŒKLæ•£åº¦ï¼‰å¯¹æ•°æ“ä½œä¸­ï¼Œè¾“å…¥å°äºæˆ–è€…ç­‰äº0äº†ï¼Œä¸€èˆ¬ç­‰äº0çš„æƒ…å†µæ¯”è¾ƒå¤šï¼Œå› æ­¤é€šå¸¸ä¼šï¼š</p>
<script type="math/tex; mode=display">
\log (x + \epsilon) \thickapprox \log(x)</script><p>è¿™é‡Œçš„æ˜¯ä¸ªå¾ˆå°çš„å€¼ï¼Œä¸€èˆ¬å–å³å¯ï¼Œå¯ä»¥é˜²æ­¢å› ä¸ºå¯¹æ•°æ“ä½œä¸­è¾“å…¥0å¯¼è‡´çš„Nanå¼‚å¸¸ã€‚</p>
<p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ‰äº›æ—¶å€™å› ä¸ºå‚æ•°åˆå§‹åŒ–æˆ–è€…å­¦ä¹ ç‡å¤ªå¤§ä¹Ÿä¼šå¯¼è‡´æ•°å€¼è®¡ç®—æº¢å‡ºï¼Œè¿™ä¹Ÿæ˜¯ä¼šå‡ºç°Nançš„ï¼Œä¸€èˆ¬è¿™æ ·ä¼šå‡ºç°åœ¨è¾ƒå‰é¢çš„å±‚é‡Œé¢ã€‚</strong></p>
<h2 id="14ã€BNå±‚æ”¾ç½®çš„ä½ç½®é—®é¢˜"><a href="#14ã€BNå±‚æ”¾ç½®çš„ä½ç½®é—®é¢˜" class="headerlink" title="14ã€BNå±‚æ”¾ç½®çš„ä½ç½®é—®é¢˜"></a><strong>14ã€BNå±‚æ”¾ç½®çš„ä½ç½®é—®é¢˜</strong></h2><p>BNå±‚æœ‰ä¸¤ç§å¸¸è§çš„æ”¾ç½®ä½ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<strong>ç¬¬ä¸€ä¸ªæ˜¯æ”¾åœ¨æ¿€æ´»å‡½æ•°ä¹‹å‰ï¼š</strong></p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/æ·±åº¦å­¦ä¹ debugæ²‰æ€å½•/14.1.PNG" alt="img"></p>
<p><strong>ç¬¬äºŒä¸ªæ˜¯æ”¾åœ¨æ¿€æ´»å‡½æ•°ä¹‹åï¼š</strong></p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/æ·±åº¦å­¦ä¹ debugæ²‰æ€å½•/14.2.PNG" alt="img"></p>
<p>åœ¨åŸå§‹BNçš„è®ºæ–‡[15]ä¸­ï¼ŒBatch Norm(BN)å±‚æ˜¯ä½äºæ¿€æ´»å±‚ä¹‹å‰çš„ï¼Œå› ä¸ºæ˜¯å¯¹åŸå§‹çš„ï¼Œæœªç»è¿‡æ¿€æ´»çš„logitæ•°æ®è¿›è¡Œæ•°æ®åˆ†å¸ƒçš„é‡æ•´ã€‚ç„¶è€Œï¼Œä¸å°‘å®éªŒè¯å®ä¼¼ä¹BNå±‚æ”¾åœ¨<strong>æ¿€æ´»å±‚ä¹‹åæ•ˆæœä¼šæ›´å¥½</strong>ï¼Œè¿™ä¸ªåŸå› ç›®å‰ä¸æ˜ã€‚<strong>Update 2020/5/18</strong>: åœ¨æ–°çš„æ–‡çŒ®[28]ä¸­ï¼Œä½œè€…å°è¯•è§£é‡Šäº†ä»¥ä¸‹BNç”¨æ³•çš„åŸå› ï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯ä»¥ç§»æ­¥å»ç»†è¯»ä¸‹ã€‚</p>
<p><strong>ä¼ ç»Ÿç”¨æ³•:</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">graph LR   </span><br><span class="line">	weights --&gt; BatchNorm   </span><br><span class="line">	BatchNorm --&gt; ReLU</span><br></pre></td></tr></table></figure>
<p><strong>[28]çš„ä½œè€…æå‡ºçš„ç”¨æ³•ï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">graph LR   </span><br><span class="line">	ReLU --&gt; BatchNorm+dropout 	</span><br><span class="line">	BatchNorm+dropout --&gt; weights</span><br></pre></td></tr></table></figure>
<h2 id="15ã€dropoutå±‚åº”ç”¨åœ¨å·ç§¯å±‚ä¸­å¯èƒ½å¯¼è‡´æ›´å·®çš„æ€§èƒ½"><a href="#15ã€dropoutå±‚åº”ç”¨åœ¨å·ç§¯å±‚ä¸­å¯èƒ½å¯¼è‡´æ›´å·®çš„æ€§èƒ½" class="headerlink" title="15ã€dropoutå±‚åº”ç”¨åœ¨å·ç§¯å±‚ä¸­å¯èƒ½å¯¼è‡´æ›´å·®çš„æ€§èƒ½"></a><strong>15ã€dropoutå±‚åº”ç”¨åœ¨å·ç§¯å±‚ä¸­å¯èƒ½å¯¼è‡´æ›´å·®çš„æ€§èƒ½</strong></h2><p>dropout[19]æ˜¯hintonå¤§ç¥ä¸2012å¹´æå‡ºçš„ä¸€ç§ç¥ç»ç½‘ç»œæ­£åˆ™æ‰‹æ®µï¼Œå…¶å¯ä»¥ç®€å•è§£é‡Šä¸º<strong>åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼ŒæŒ‰ä¸€å®šæ¦‚ç‡è®©ç¥ç»ç½‘ç»œä¸­çš„æŸäº›ç¥ç»å…ƒè¾“å‡ºä¸º0</strong>ï¼Œå…¶åŸå› å¯ä»¥æœ‰å‡ ä¸ªè§£é‡Šï¼Œä¸€ä¸ªæ˜¯ä½œä¸ºä¸€ç§é›†æˆæ¨¡å‹è¿›è¡Œè§£é‡Šï¼Œå¦ä¸€ä¸ªå¯ä»¥çœ‹æˆæ˜¯åœ¨ç‰¹å¾æå–å­¦ä¹ è¿‡ç¨‹ä¸­ç»™æ•°æ®åŠ å…¥å™ªå£°ï¼Œå¯ä»¥çœ‹æˆæ˜¯ä¸€ç§æ•°æ®å¢å¼ºçš„æ­£åˆ™æ‰‹æ®µã€‚</p>
<p>åœ¨åŸå§‹è®ºæ–‡ä¸­ï¼Œdropoutè¢«åº”ç”¨äºå…¨è¿æ¥å±‚ä¸­ï¼Œè€Œæ²¡æœ‰åº”ç”¨åœ¨å·ç§¯å±‚ä¸­ï¼ŒHintonçš„è§£é‡Šæ˜¯å› ä¸ºå·ç§¯å±‚å‚æ•°å¹¶ä¸å¤šï¼Œè¿‡æ‹Ÿåˆé£é™©è¾ƒå°ä¸é€‚åˆé‡‡ç”¨dropoutè¿™ç§å¤§æ€å™¨çš„æ­£åˆ™æ‰‹æ®µã€‚æœ‰äººä¹Ÿè®¤ä¸ºå› ä¸ºå·ç§¯ç½‘ç»œæ˜¯å±€éƒ¨æ„ŸçŸ¥çš„ï¼Œç”¨dropoutæ­£åˆ™å¯¹äºå…¶åœ¨åå±‚ä¸­å¯¹äºå…¨å±€ä¿¡æ¯çš„è·å–å¯èƒ½å…·æœ‰è´Ÿä½œç”¨[20]ã€‚</p>
<p>ä¸è¿‡åœ¨ä¸€äº›å·¥ä½œä¸­ï¼Œä¹Ÿæœ‰äººå°†dropoutå±‚åº”ç”¨åœ¨å·ç§¯å±‚ä¸­çš„[17-18]ï¼Œå…¶å±‚æ¬¡å®‰æ’ä¸º:$CONV -&gt; RELU -&gt; DROP$ï¼Œä¸è¿‡å…¶ä¸¢å¼ƒç‡éƒ½æ˜¯é€‰æ‹©çš„è¾ƒå°æ•°å¦‚0.1, 0.2ç­‰ï¼Œä¸ªäººè§‰å¾—è¿™é‡Œçš„ä½œç”¨å¤§æ¦‚æ˜¯å¯¹<strong>ä¸­é—´æ•°æ®è¿›è¡ŒåŠ å…¥å™ªå£°ï¼Œä»¥ä¾¿äºæ•°æ®å¢å¼ºçš„æ­£åˆ™æ‰‹æ®µã€‚</strong></p>
<p><strong>ä¸ªäººå»ºè®®æ˜¯å¯ä»¥å°è¯•åœ¨å·ç§¯å±‚ä¸­ä½¿ç”¨å°‘é‡çš„dropoutï¼Œç”¨è¾ƒå°çš„ä¸¢å¼ƒç‡ï¼Œä½†æ˜¯æœ€ååˆ«å¿˜äº†æ‰”æ‰è¿™äº›dropoutå†è¿›è¡Œä¸€äº›æ¢ç´¢ï¼Œä¹Ÿè®¸å¯ä»¥å…·æœ‰æ›´å¥½çš„æ•ˆæœã€‚</strong></p>
<h2 id="16ã€è¾ƒå°çš„batch-sizeå¯ä»¥æä¾›è¾ƒå¥½çš„æ³›åŒ–"><a href="#16ã€è¾ƒå°çš„batch-sizeå¯ä»¥æä¾›è¾ƒå¥½çš„æ³›åŒ–" class="headerlink" title="16ã€è¾ƒå°çš„batch sizeå¯ä»¥æä¾›è¾ƒå¥½çš„æ³›åŒ–"></a><strong>16ã€è¾ƒå°çš„batch sizeå¯ä»¥æä¾›è¾ƒå¥½çš„æ³›åŒ–</strong></h2><p>ç°ä»£çš„æ·±åº¦å­¦ä¹ ä¼˜åŒ–å™¨åŸºæœ¬ä¸Šéƒ½æ˜¯åŸºäºSGDç®—æ³•è¿›è¡Œä¿®æ”¹è€Œæˆçš„ï¼Œåœ¨æ¯ä¸€æ¬¡è®­ç»ƒä¸­éƒ½æ˜¯ä»¥ä¸€ä¸ªbatch sizeä¸ºå•ä½è¿›è¡Œè®­ç»ƒçš„ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ç›¸å½“äºåœ¨ç»Ÿè®¡è¿™ä¸ªbatchä¸­æ ·æœ¬çš„ä¸€äº›ç»Ÿè®¡ç‰¹æ€§ï¼Œå› æ­¤batch sizeæ˜¯ä¼šå½±å“æ¨¡å‹çš„è¶…æ›²çº¿å½¢çŠ¶çš„ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´è¾ƒå¤§çš„batch sizeæ¯”å¦‚128ï¼Œ256ä¼šå’Œæ•´ä¸ªè®­ç»ƒé›†çš„ç»Ÿè®¡æ€§è´¨æ›´ç›¸è¿‘ï¼Œä»è€Œä½¿å¾—å…·æœ‰è¾ƒå°‘çš„å¤šæ ·æ€§ï¼Œè€Œè¾ƒå°çš„batch size æ¯”å¦‚16ï¼Œ32ï¼Œå› ä¸ºbatch sizeè¾ƒå°ï¼Œä¸åŒbatchä¹‹é—´çš„å·®å¼‚æ€§è¾ƒå¤§ï¼Œè¿™ç§å·®å¼‚æ€§å¯ä»¥çœ‹æˆæ˜¯æ­£åˆ™æ‰‹æ®µï¼Œæœ‰æœºä¼šæé«˜æ¨¡å‹çš„æ³›åŒ–æ€§èƒ½ã€‚ï¼ˆä¸è¿‡æœ‰äº›æ–‡ç« ä¼¼ä¹ä¸åŒæ„è¿™ä¸ªè§‚ç‚¹ï¼Œè®¤ä¸ºè¾ƒå¤§batch sizeæœ‰è¾ƒå¥½æ€§èƒ½ï¼Œ<strong>ä¸ªäººå»ºè®®æ˜¯å¤§batch sizeå’Œå°batch sizeéƒ½å¯ä»¥è·‘è·‘ï¼Œæœ‰å¯èƒ½èƒ½æå‡æ€§èƒ½ã€‚</strong>ï¼‰</p>
<h2 id="17ã€åˆå§‹åŒ–æƒå€¼ä¸èƒ½åˆå§‹åŒ–ä¸ºå…¨0"><a href="#17ã€åˆå§‹åŒ–æƒå€¼ä¸èƒ½åˆå§‹åŒ–ä¸ºå…¨0" class="headerlink" title="17ã€åˆå§‹åŒ–æƒå€¼ä¸èƒ½åˆå§‹åŒ–ä¸ºå…¨0"></a><strong>17ã€åˆå§‹åŒ–æƒå€¼ä¸èƒ½åˆå§‹åŒ–ä¸ºå…¨0</strong></h2><p>è¿™ä¸ªåº”è¯¥æ˜¯è€ç”Ÿå¸¸è°ˆäº†ï¼Œä½†æ˜¯åˆå­¦è€…ç»å¸¸ä¼šå‡ºç°è¿™ç§é”™è¯¯ï¼Œåœ¨åˆå§‹åŒ–æƒå€¼çš„æ—¶å€™å°†æƒå€¼å…¨éƒ¨åˆå§‹åŒ–ä¸ºäº†0ï¼Œåœ¨åå‘ä¼ æ’­çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹äºæŸä¸ªæƒå€¼çš„æ›´æ–°å…¬å¼ä¸º[22]ï¼š</p>
<script type="math/tex; mode=display">
\frac{\partial C}{\partial w_{i,j}^l} = a_k^{l-1} * \delta_j^l = a_k^{l-1} * \sum (\delta_k^{l+1} * w_{k,j}^{l+1} * \sigma^{'}(z_j^l))</script><p>è¿™ä¸ªå…¬å¼æ¨å¯¼å…·ä½“å‚è§[22]ï¼Œè¿™é‡Œä¸ç´¯è¿°äº†ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå½“åˆå§‹åŒ–æƒå€¼å‚æ•°å…¨éƒ¨ä¸º0çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„å°†å…¨éƒ¨ä¸º0ï¼Œè¿™ä¸ªæ—¶å€™å¯¹äºæŸä¸ªæƒå€¼çš„æ¢¯åº¦ä¹Ÿå°±å˜ä¸ºäº†0ï¼Œ<strong>å› æ­¤æ•´ä¸ªç½‘ç»œçš„ä»»ä½•å‚æ•°éƒ½å¾—ä¸åˆ°æ›´æ–°ï¼Œå°†ä¼šå¯¼è‡´è®­ç»ƒæ— æ³•è¿›è¡Œã€‚</strong></p>
<p>è€Œ<strong>å¯¹äºåç½®çš„åˆå§‹åŒ–ä¸åŒ</strong>ï¼Œå¯¹äºåç½®çš„æ›´æ–°å…¬å¼å¦‚[22]ï¼š</p>
<script type="math/tex; mode=display">
\frac{\partial C}{\partial b_j^l} = \delta _j^l * 1 = \delta _j ^l</script><p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå¯¹äºåç½®çš„æ›´æ–°è€Œè¨€ï¼Œä¸ä¾èµ–ä¸åˆå§‹å€¼ï¼Œå› æ­¤<strong>åç½®çš„åˆå§‹åŒ–å¯ä»¥åˆå§‹åŒ–ä¸ºå…¨0</strong>ã€‚</p>
<h2 id="18ã€åˆ«å¿˜äº†ä½ çš„åç½®"><a href="#18ã€åˆ«å¿˜äº†ä½ çš„åç½®" class="headerlink" title="18ã€åˆ«å¿˜äº†ä½ çš„åç½®"></a><strong>18ã€åˆ«å¿˜äº†ä½ çš„åç½®</strong></h2><p>è¿™ä¸ªä¹Ÿæ˜¯åˆå­¦è€…å¾ˆå®¹æ˜“çŠ¯çš„é”™è¯¯ï¼Œå°±æ˜¯å¿˜è®°ç»™æ¯ä¸€å±‚æ·»åŠ åç½®ã€‚æˆ‘ä»¬åœ¨ç¬”è®°ç¬¬äºŒç‚¹ä¸­æåˆ°äº†ç¥ç»ç½‘ç»œä¸­åç½®çš„ä½œç”¨ï¼Œæ€»çš„æ¥è¯´å°±æ˜¯å¯¹è¶…å¹³é¢è¿›è¡Œå¹³ç§»çš„ï¼Œå› æ­¤ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬çš„ç¥ç»ç½‘ç»œéƒ½æ˜¯éœ€è¦æ·»åŠ åç½®çš„ï¼Œä¸ç„¶ä½ çš„è¶…å¹³é¢å°±åªèƒ½æ˜¯é€šè¿‡åŸç‚¹çš„äº†ï¼Œè¿™æ ·å¤§å¤§å‡å°‘äº†æ¨¡å‹çš„å®¹é‡ï¼Œç»å¸¸ä¼šä½¿å¾—æ¨¡å‹æ¬ æ‹Ÿåˆã€‚</p>
<h2 id="19ã€éªŒè¯å‡†ç¡®ç‡è¿œå¤§äºæµ‹è¯•å‡†ç¡®ç‡"><a href="#19ã€éªŒè¯å‡†ç¡®ç‡è¿œå¤§äºæµ‹è¯•å‡†ç¡®ç‡" class="headerlink" title="19ã€éªŒè¯å‡†ç¡®ç‡è¿œå¤§äºæµ‹è¯•å‡†ç¡®ç‡"></a><strong>19ã€éªŒè¯å‡†ç¡®ç‡è¿œå¤§äºæµ‹è¯•å‡†ç¡®ç‡</strong></h2><p>æœ‰äº›æ—¶å€™ï¼Œä½ å‘ç°ä½ çš„éªŒè¯é›†å‡†ç¡®ç‡è¿œå¤§äºæµ‹è¯•é›†çš„å‡†ç¡®ç‡ï¼Œåœ¨æ’é™¤äº†ä»£ç é—®é¢˜å’Œæ“ä½œé—®é¢˜ä¹‹åï¼Œå…¶å®ä¹Ÿå¯èƒ½æ˜¯å› ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†åˆ’åˆ†çš„é—®é¢˜ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä½ çš„éªŒè¯é›†æ˜¯ä»è®­ç»ƒé›†ä¸­åˆ’åˆ†å‡ºæ¥çš„[23]ï¼Œå› æ­¤ä½ çš„éªŒè¯é›†å’Œè®­ç»ƒé›†å¯ä»¥è§†ä¸ºæ˜¯åŒåˆ†å¸ƒçš„ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ç¡®ä¿ä½ çš„è®­ç»ƒé›†å’Œæµ‹è¯•é›†æ˜¯åŒåˆ†å¸ƒçš„ï¼Œå¦‚æœè®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„åˆ†å¸ƒå·®çš„æ¯”è¾ƒå¤§ï¼Œå°±å¯èƒ½å‡ºç°è¿™ç§æƒ…å†µã€‚è¿™ä¸ªæ—¶å€™ï¼Œå¯ä»¥è€ƒè™‘è¿ç§»å­¦ä¹ ä¸­çš„ä¸€äº›æ–¹æ³•ã€‚</p>
<h2 id="20ã€KLæ•£åº¦å‡ºç°è´Ÿæ•°"><a href="#20ã€KLæ•£åº¦å‡ºç°è´Ÿæ•°" class="headerlink" title="20ã€KLæ•£åº¦å‡ºç°è´Ÿæ•°"></a><strong>20ã€KLæ•£åº¦å‡ºç°è´Ÿæ•°</strong></h2><p>Kullbackâ€“Leibleræ•£åº¦ï¼Œç®€ç§°KLæ•£åº¦[24]ï¼Œä¹Ÿç§°ä¸ºç›¸å¯¹ç†µï¼Œæ˜¯ä¸€ç§ç”¨äº<strong>åº¦é‡ä¸¤ä¸ªåˆ†å¸ƒä¹‹é—´ç›¸ä¼¼æ€§</strong>çš„å¸¸ç”¨æ‰‹æ®µï¼Œå…¬å¼å¦‚(20.1)ï¼Œå…¶ä¸­ç¬¬äºŒè¡Œå½¢å¼çš„å˜å½¢æè¿°äº†ç›¸å¯¹ç†µçš„ç‰¹æ€§ã€‚</p>
<script type="math/tex; mode=display">
D_{KL} (P||Q) = \sum _i P(i)\log(\frac{P(i)}{Q(i)}) = \sum_i\{P(i)\log P(i) - P(i)\log Q(i)\}</script><p>æˆ‘ä»¬æ³¨æ„åˆ°KLæ•£åº¦æ˜¯ä¸å¯èƒ½ä¸ºè´Ÿæ•°çš„ï¼Œå…¶ä¸­P, Qæ˜¯å®šä¹‰åœ¨åŒä¸€ä¸ªæ¦‚ç‡ç©ºé—´[25]é‡Œé¢çš„åŒå‹çš„åˆ†å¸ƒï¼Œç»´åº¦ç›¸åŒã€‚ä»ç›¸å¯¹ç†µçš„å®šä¹‰æ¥çœ‹ï¼Œè¿™ä¸ªå…¬å¼æè¿°äº†ç”¨åˆ†å¸ƒå»è¿‘ä¼¼æ‰€é€ æˆçš„ä¸ä¸€è‡´æ€§çš„ç¨‹åº¦ã€‚åœ¨æ·±åº¦å­¦ä¹ å’Œæœºå™¨å­¦ä¹ ä¸­ï¼Œä¸€èˆ¬æ˜¯ç”¨æ¥æè¿°ä¸¤ä¸ªç»´åº¦ç›¸åŒçš„<strong>æ¦‚ç‡åˆ†å¸ƒ</strong>ä¹‹é—´çš„ç›¸ä¼¼åº¦ã€‚æ³¨æ„åˆ°ï¼Œè¿™é‡Œçš„P, Qéƒ½æ˜¯æ¦‚ç‡åˆ†å¸ƒï¼Œå› æ­¤æ˜¯éœ€è¦ç»è¿‡<code>softmax</code>å±‚çš„ï¼Œæ‰èƒ½ä¿è¯æ¦‚ç‡å’Œä¸º1ï¼Œä¸ç„¶å¯èƒ½ä¼šå‡ºç°KLæ•£åº¦ä¸ºè´Ÿæ•°çš„ç¬‘è¯ã€‚</p>
<p>è€Œä¸”ï¼Œåœ¨ä¸€äº›æ¡†æ¶å¦‚Pytorchä¸­ï¼Œå…¶è¾“å…¥å€¼éœ€è¦æ˜¯<code>log_softmax</code>è€Œç›®æ ‡å€¼éœ€è¦æ˜¯<code>softmax</code>å€¼ï¼Œä¹Ÿå°±è¯´è¾“å…¥å€¼éœ€è¦è¿›è¡Œå¯¹æ•°æ“ä½œåå†è½¬å˜ä¸ºæ¦‚ç‡åˆ†å¸ƒ[27]ã€‚</p>
<p><strong>å‚è€ƒèµ„æ–™</strong></p>
<p>[1] Janocha K, Czarnecki W M. On loss functions for deep neural networks in classification[J]. arXiv preprint arXiv:1702.05659, 2017.(Overview about loss function used in DNN)</p>
<p>[2] tf.one_hot()è¿›è¡Œç‹¬çƒ­ç¼–ç </p>
<p>[3] æ›²çº¿æ‹Ÿåˆé—®é¢˜ä¸L2æ­£åˆ™</p>
<p>[4] Kinga D, Adam J B. A method for stochastic optimization[C]//International Conference on Learning Representations (ICLR). 2015, 5.</p>
<p>[5] æ·±åº¦å­¦ä¹ ç³»åˆ—ï¼šæ·±åº¦å­¦ä¹ ä¸­æ¿€æ´»å‡½æ•°çš„é€‰æ‹©</p>
<p>[6] æœºå™¨å­¦ä¹ ä¹‹ç‰¹å¾å½’ä¸€åŒ–ï¼ˆnormalizationï¼‰</p>
<p>[7] æœºå™¨å­¦ä¹ æ¨¡å‹çš„å®¹é‡ï¼Œè¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆ</p>
<p>[8] åœ¨æœºå™¨å­¦ä¹ ä¸­epoch, iteration, batch_sizeçš„åŒºåˆ«</p>
<p>[9] Pytorch Dataloader doc</p>
<p>[10] tf.clip_by_value</p>
<p>[11] æ¢¯åº¦æˆªæ–­çš„tensorflowå®ç°</p>
<p>[12] å‡æ–¹è¯¯å·®(MSE)å’Œå‡æ–¹æ ¹è¯¯å·®(RMSE)å’Œå¹³å‡ç»å¯¹è¯¯å·®(MAE)</p>
<p>[13]. Du S S, Zhai X, Poczos B, et al. Gradient Descent Provably Optimizes Over-parameterized Neural Networks[J]. arXiv preprint arXiv:1810.02054, 2018.</p>
<p>[14] The inconsistency between the loss curve and metric curve?</p>
<p>[15] Ioffe S, Szegedy C. Batch normalization: accelerating deep network training by reducing internal covariate shift[C]// International Conference on International Conference on Machine Learning. JMLR.org, 2015:448-456.</p>
<p>[16] Wu Y, He K. Group normalization[J]. arXiv preprint arXiv:1803.08494, 2018.</p>
<p>[17] Park S, Kwak N. Analysis on the dropout effect in convolutional neural networks[C]//Asian Conference on Computer Vision. Springer, Cham, 2016: 189-204.</p>
<p>[18] Where should I place dropout layers in a neural network?</p>
<p>[19] Hinton G E, Srivastava N, Krizhevsky A, et al. Improving neural networks by preventing co-adaptation of feature detectors[J]. arXiv preprint arXiv:1207.0580, 2012.</p>
<p>[20] Why do I never see dropout applied in convolutional layers?</p>
<p>[21] L1æ­£åˆ™</p>
<p>[22] æ·±åº¦å­¦ä¹ ç³»åˆ—ï¼šåå‘ä¼ æ’­ç®—æ³•çš„å…¬å¼æ¨å¯¼</p>
<p>[23] è®­ç»ƒé›†ã€æµ‹è¯•é›†ã€æ£€éªŒé›†çš„åŒºåˆ«ä¸äº¤å‰æ£€éªŒ</p>
<p>[24] Kullbackâ€“Leibler divergence</p>
<p>[25] Probability space</p>
<p>[26] å¦‚ä½•ç†è§£K-Læ•£åº¦ï¼ˆç›¸å¯¹ç†µï¼‰</p>
<p>[27] KL Divergence produces negative values</p>
<p>[28] Chen G, Chen P, Shi Y, et al. Rethinking the Usage of Batch Normalization and Dropout in the Training of Deep Neural Networks[J]. arXiv preprint arXiv:1905.05928, 2019.</p>
<p>[29] <a href="https://forums.fast.ai/t/rethinking-batchnorm-dropout-combine-together-for-independent-component-layer/46232" target="_blank" rel="noopener">https://forums.fast.ai/t/rethinking-batchnorm-dropout-combine-together-for-independent-component-layer/46232</a></p>
<p>ä½œè€…ä¸¨åœŸè±†@çŸ¥ä¹</p>
<p>æ¥æºä¸¨<a href="https://zhuanlan.zhihu.com/p/158739701" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/158739701</a></p>
]]></content>
      <categories>
        <category>Neural Networks</category>
      </categories>
      <tags>
        <tag>è°ƒå‚</tag>
        <tag>ç¥ç»ç½‘ç»œ</tag>
        <tag>Neural Networks</tag>
        <tag>Deep Learning</tag>
        <tag>æ·±åº¦å­¦ä¹ </tag>
        <tag>ç‚¼ä¸¹</tag>
        <tag>ç»éªŒ</tag>
        <tag>æŠ€å·§</tag>
      </tags>
  </entry>
  <entry>
    <title>NLPæ•°æ®å¢å¼ºæŠ€æœ¯</title>
    <url>/2020/07/05/NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF/</url>
    <content><![CDATA[<p>å¯¹äºCVé¢†åŸŸï¼Œæ•°æ®å¢å¼ºæŠ€æœ¯å·²ç»æˆä¸ºä¸€ç§æ ‡å‡†æ“ä½œè¢«å¹¿æ³›ä½¿ç”¨ï¼Œä¾‹å¦‚æ—‹è½¬ã€é•œåƒã€æ·»åŠ é«˜æ–¯ç™½å™ªå£°ç­‰ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¯¹äºNLPé¢†åŸŸï¼Œæ•°æ®å¢å¼ºæŠ€æœ¯å´ä¸æ˜¯é‚£ä¹ˆå¤šè§ï¼Œå¾ˆå¤šCVé¢†åŸŸçš„æŠ€æœ¯ä¸èƒ½ç›´æ¥ç”¨äºæ–‡æœ¬æ•°æ®ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF/CVvsNLP.PNG" alt></p>
<p>å› æ­¤ï¼Œæœ¬æ–‡å¯¹å¸¸è§çš„NLPé¢†åŸŸæ•°æ®å¢å¼ºæŠ€æœ¯è¿›è¡Œæ±‡æ€»ã€‚<a id="more"></a></p>
<h2 id="1-è¯æ³•å±‚çº§æ›¿æ¢"><a href="#1-è¯æ³•å±‚çº§æ›¿æ¢" class="headerlink" title="1. è¯æ³•å±‚çº§æ›¿æ¢"></a>1. è¯æ³•å±‚çº§æ›¿æ¢</h2><h3 id="1-1-åŒä¹‰è¯æ›¿æ¢"><a href="#1-1-åŒä¹‰è¯æ›¿æ¢" class="headerlink" title="1.1 åŒä¹‰è¯æ›¿æ¢"></a>1.1 åŒä¹‰è¯æ›¿æ¢</h3><p>åœ¨æ–‡æœ¬ä¸­éšæœºæŠ½å–ä¸€ä¸ªå•è¯ï¼Œå°†å…¶æ›¿æ¢ä¸ºåŒä¹‰è¯ã€‚ä¾‹å¦‚ï¼Œåˆ©ç”¨WordNetæ•°æ®åº“ï¼Œå°†[awesome]æ›¿æ¢ä¸º[amazing]</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF/wordnet.PNG" alt></p>
<p>è¿™ä¸ªæŠ€æœ¯æ¯”è¾ƒå¸¸è§ï¼Œåœ¨ä»¥å¾€çš„å¾ˆå¤šè®ºæ–‡ä¸­éƒ½ç”¨åˆ°äº†è¿™ä¸ªæŠ€æœ¯ï¼Œä¾‹å¦‚ï¼š</p>
<p>Zhang et al. [Character-level Convolutional Networks for Text Classification]</p>
<blockquote>
<p><a href="https://arxiv.org/abs/1509.01626" target="_blank" rel="noopener">https://arxiv.org/abs/1509.01626</a></p>
</blockquote>
<p>Wei et al. ã€ŒEDA: Easy Data Augmentation Techniques for Boosting Performance on Text Classification Tasksã€</p>
<blockquote>
<p>è®ºæ–‡é“¾æ¥ï¼š<a href="https://arxiv.org/abs/1901.11196" target="_blank" rel="noopener">https://arxiv.org/abs/1901.11196</a></p>
</blockquote>
<p>å¦å¤–ï¼Œæœ‰ä¸€ä¸ª<a href="http://paraphrase.org/#/download" target="_blank" rel="noopener">PPDBæ•°æ®åº“</a>ï¼Œæ˜¯ä¸€ä¸ªåŒ…å«ç€æ•°ç™¾ä¸‡ä¸ªå•è¯çš„è¯åº“ï¼Œä½†é—æ†¾çš„æ˜¯ä¸æ”¯æŒä¸­æ–‡ã€‚</p>
<h3 id="1-2-è¯åµŒå…¥æ›¿æ¢"><a href="#1-2-è¯åµŒå…¥æ›¿æ¢" class="headerlink" title="1.2 è¯åµŒå…¥æ›¿æ¢"></a>1.2 è¯åµŒå…¥æ›¿æ¢</h3><p>è¿™ç§æ–¹æ³•æ˜¯ï¼Œé‡‡å–å·²ç»é¢„è®­ç»ƒå¥½çš„å•è¯åµŒå…¥ï¼Œå¦‚Word2Vecã€GloVeã€FastTextã€Sent2Vecç­‰ï¼Œå¹¶å°†åµŒå…¥ç©ºé—´ä¸­æœ€è¿‘çš„é‚»æ¥è¯ä½œä¸ºå¥å­ä¸­æŸäº›å•è¯çš„æ›¿æ¢ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF/embedding1.PNG" alt></p>
<p>è¿™æ ·ï¼Œå°±å¯ä»¥å°†å•è¯æ›¿æ¢æˆä¸´è¿‘çš„3ä¸ªå•è¯ï¼Œè·å¾—æ–‡æœ¬çš„3ç§å˜ä½“å½¢å¼ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF/embedd.PNG" alt></p>
<h3 id="1-3-æ©ç è¯­è¨€æ¨¡å‹ï¼ˆMLMï¼‰"><a href="#1-3-æ©ç è¯­è¨€æ¨¡å‹ï¼ˆMLMï¼‰" class="headerlink" title="1.3 æ©ç è¯­è¨€æ¨¡å‹ï¼ˆMLMï¼‰"></a>1.3 æ©ç è¯­è¨€æ¨¡å‹ï¼ˆMLMï¼‰</h3><p>ç±»ä¼¼äºBERTã€ROBERTAã€ALBERTï¼ŒTransformeræ¨¡å‹å·²ç»åœ¨å¤§é‡çš„æ–‡æœ¬è®­ç»ƒè¿‡ï¼Œä½¿ç”¨æ©ç è¯­è¨€æ¨¡å‹çš„å‰ç½®ä»»åŠ¡ã€‚åœ¨è¿™ä¸ªä»»åŠ¡ä¸­ï¼Œæ¨¡å‹å¿…é¡»ä¾ç…§ä¸Šä¸‹æ–‡æ¥é¢„æµ‹æ©ç çš„å•è¯ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œå¯¹æ–‡æœ¬è¿›è¡Œæ‰©å®¹ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF/bert1.PNG" alt></p>
<p>è·Ÿä¹‹å‰çš„æ–¹æ³•ç›¸æ¯”ï¼Œç”Ÿæˆçš„æ–‡æœ¬åœ¨è¯­æ³•ä¸Šä¼šæ›´åŠ è¿è´¯ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF/bert2.PNG" alt></p>
<p>ä½†æ˜¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå†³å®šæ©ç›–å“ªä¸€ä¸ªå•è¯å¹¶éæ˜“äº‹ï¼Œå®ƒå†³å®šäº†æ•ˆæœçš„æœ€ç»ˆå‘ˆç°ã€‚</p>
<h3 id="1-4-åŸºäºTF-IDFçš„å•è¯æ›¿æ¢"><a href="#1-4-åŸºäºTF-IDFçš„å•è¯æ›¿æ¢" class="headerlink" title="1.4 åŸºäºTF-IDFçš„å•è¯æ›¿æ¢"></a>1.4 åŸºäºTF-IDFçš„å•è¯æ›¿æ¢</h3><p>è¿™ä¸€æ–¹æ³•æœ€åˆæ˜¯å‡ºç°åœ¨Xie et al.ã€ŒUnsupervised Data Augmentation for Consistency Trainingã€ã€‚</p>
<blockquote>
<p>è®ºæ–‡é“¾æ¥ï¼š<a href="https://arxiv.org/abs/1904.12848" target="_blank" rel="noopener">https://arxiv.org/abs/1904.12848</a></p>
</blockquote>
<p>åŸºæœ¬æ€è·¯åœ¨äºTF-IDFå¾—åˆ†ä½çš„å•è¯æ˜¯æ²¡æœ‰ä¿¡æ¯é‡çš„çš„è¯ï¼Œå› æ­¤å¯ä»¥æ›¿æ¢ï¼Œè€Œä¸å½±å“å¥å­çš„åŸæœ¬å«ä¹‰ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF/tfidf.PNG" alt></p>
<p>é€šè¿‡è®¡ç®—æ•´ä¸ªæ–‡æ¡£ä¸­å•è¯çš„ TF - IDFå¾—åˆ†å¹¶å–æœ€ä½å¾—åˆ†æ¥é€‰æ‹©æ›¿æ¢åŸå§‹å•è¯çš„å•è¯ã€‚</p>
<h2 id="2-åå‘ç¿»è¯‘"><a href="#2-åå‘ç¿»è¯‘" class="headerlink" title="2. åå‘ç¿»è¯‘"></a>2. åå‘ç¿»è¯‘</h2><p>åå‘ç¿»è¯‘ï¼Œå°±æ˜¯å…ˆå°†å¥å­ç¿»è¯‘æˆå¦ä¸€ç§è¯­è¨€ï¼Œæ¯”å¦‚ï¼Œè‹±è¯­ç¿»è¯‘æˆæ³•è¯­ã€‚</p>
<p>ç„¶åå†ç¿»è¯‘å›åŸæ¥çš„è¯­è¨€ï¼Œä¹Ÿå°±æ˜¯å°†æ³•è¯­ç¿»è¯‘å›è‹±è¯­ã€‚</p>
<p>æ£€æŸ¥ä¸¤ä¸ªå¥å­ä¹‹é—´çš„ä¸åŒä¹‹å¤„ï¼Œç”±æ­¤å°†æ–°çš„å¥å­ä½œä¸ºå¢å¼ºæ–‡æœ¬ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF/machinetrans1.PNG" alt></p>
<p>è¿˜å¯ä»¥ä¸€æ¬¡ä½¿ç”¨å¤šç§è¯­è¨€è¿›è¡Œåå‘ç¿»è¯‘ï¼Œäº§ç”Ÿæ›´å¤šçš„å˜ä½“ã€‚</p>
<p>æ¯”å¦‚ï¼Œé™¤äº†æ³•è¯­ä»¥å¤–ï¼Œå†å°†å…¶ç¿»è¯‘ä¸ºæ±‰è¯­å’Œæ„å¤§åˆ©è¯­ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF/mt2.PNG" alt></p>
<p>è¦å®ç°åå‘ç¿»è¯‘ï¼Œå¯ä»¥ä½¿ç”¨TextBlobã€‚å¦å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨Google Sheetsï¼Œè¯´æ˜ä¹¦å·²é™„æ–‡æœ«ã€‚</p>
<h2 id="3-æ–‡æœ¬å½¢å¼è½¬æ¢"><a href="#3-æ–‡æœ¬å½¢å¼è½¬æ¢" class="headerlink" title="3. æ–‡æœ¬å½¢å¼è½¬æ¢"></a>3. æ–‡æœ¬å½¢å¼è½¬æ¢</h2><p>è¿™ä¸€æ–¹æ³•ä¸»è¦æ˜¯åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼åº”ç”¨çš„çš„ç®€å•æ¨¡å¼åŒ¹é…è½¬æ¢ï¼Œåœ¨Claude Coulombeçš„è®ºæ–‡ã€ŒText Data Augmentation Made Simple By Leveraging NLP Cloud APIsã€ä¸­æœ‰è¯¦ç»†ä»‹ç»ã€‚</p>
<blockquote>
<p>è®ºæ–‡é“¾æ¥ï¼š<a href="https://arxiv.org/abs/1812.04718" target="_blank" rel="noopener">https://arxiv.org/abs/1812.04718</a></p>
</blockquote>
<p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œå°†åŸæœ¬å½¢å¼è½¬æ¢ä¸ºç¼©å†™ï¼Œåä¹‹äº¦ç„¶ã€‚ä½†æ˜¯å°†ç¼©å†™æ‰©å……ï¼Œå®¹æ˜“å¸¦æ¥é”™è¯¯ï¼Œä¾‹å¦‚sheâ€™så¯ä»¥æ˜¯she hasï¼Œä¹Ÿå¯ä»¥æ˜¯she isï¼Œå¼•å…¥æ­§ä¹‰ã€‚æ‰€ä»¥ä¸€èˆ¬çš„åªå¯¹æ–‡æœ¬è¿›è¡Œç¼©å†™ï¼Œä¸åšæ‰©å……æ“ä½œã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF/textSurfaceTransformation.PNG" alt="img"></p>
<p>Pythonçš„æ–‡æœ¬å½¢å¼æ”¶ç¼©åº“å·²é™„æ–‡æœ«ã€‚</p>
<h2 id="3-éšæœºå™ªå£°æ³¨å…¥"><a href="#3-éšæœºå™ªå£°æ³¨å…¥" class="headerlink" title="3. éšæœºå™ªå£°æ³¨å…¥"></a>3. éšæœºå™ªå£°æ³¨å…¥</h2><p>é¡¾åæ€ä¹‰ï¼Œä¹Ÿå°±æ˜¯åœ¨æ–‡æœ¬ä¸­æ³¨å…¥å™ªå£°ï¼Œæ¥è®­ç»ƒæ¨¡å‹å¯¹æ‰°åŠ¨çš„é²æ£’æ€§ã€‚</p>
<p>æ¯”å¦‚ï¼Œæ‹¼å†™é”™è¯¯ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF/noise1.PNG" alt="img"></p>
<p>å¥å­æ”¹ç»„ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF/noise2.PNG" alt="img"></p>
<p>ç©ºç™½å™ªå£°ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF/noise3.PNG" alt="img"></p>
<p>éšæœºæ’å…¥ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF/noise4.PNG" alt="img"></p>
<p>éšæœºäº¤æ¢ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF/noise5.PNG" alt="img"></p>
<p>éšæœºåˆ é™¤ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF/noise6.PNG" alt="img"></p>
<h2 id="4-è¯­æ³•æ ‘"><a href="#4-è¯­æ³•æ ‘" class="headerlink" title="4. è¯­æ³•æ ‘"></a>4. è¯­æ³•æ ‘</h2><p>è¿™ä¸€æ–¹æ³•ä¹Ÿå‡ºç°åœ¨äº†Claude Coulombeçš„è®ºæ–‡ã€ŒText Data Augmentation Made Simple By Leveraging NLP Cloud APIsã€ä¸­ã€‚</p>
<blockquote>
<p>è®ºæ–‡é“¾æ¥ï¼š<a href="https://arxiv.org/abs/1812.04718" target="_blank" rel="noopener">https://arxiv.org/abs/1812.04718</a></p>
</blockquote>
<p>å…¶æ€è·¯æ˜¯è§£æå¹¶ç”ŸæˆåŸå¥çš„ä»å±æ ‘ï¼Œåˆ©ç”¨è§„åˆ™è¿›è¡Œè½¬æ¢ï¼Œç”Ÿæˆæ–°å¥å­ã€‚</p>
<p>æ¯”å¦‚ï¼Œå°†å¥å­çš„ä¸»åŠ¨è¯­æ°”è½¬æ¢ä¸ºè¢«åŠ¨è¯­æ°”ï¼Œåä¹‹äº¦ç„¶ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF/tree.PNG" alt="img"></p>
<h2 id="5-æ–‡æœ¬æ··åˆ"><a href="#5-æ–‡æœ¬æ··åˆ" class="headerlink" title="5. æ–‡æœ¬æ··åˆ"></a>5. æ–‡æœ¬æ··åˆ</h2><p>è¿™é¡¹æŠ€æœ¯çš„æƒ³æ³•æºäºä¸€é¡¹åä¸ºâ€œMixupâ€çš„å›¾åƒå¢å¼ºæŠ€æœ¯ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF/mix1.PNG" alt="img"></p>
<p>Guo et al.åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œäº†ä¿®æ”¹ï¼Œå°†å…¶åº”ç”¨åˆ°NLPã€‚</p>
<p>ã€ŒAugmenting Data with Mixup for Sentence Classification: An Empirical Studyã€</p>
<blockquote>
<p>è®ºæ–‡é“¾æ¥ï¼š<a href="https://arxiv.org/abs/1905.08941" target="_blank" rel="noopener">https://arxiv.org/abs/1905.08941</a></p>
</blockquote>
<p>ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ã€‚</p>
<h3 id="5-1-wordMixup"><a href="#5-1-wordMixup" class="headerlink" title="5.1 wordMixup"></a>5.1 wordMixup</h3><p>è¿™ä¸ªæ–¹æ³•åœ¨äºï¼ŒæŠ½å–ä¸¤ä¸ªéšæœºçš„å¥å­ï¼Œå°†å®ƒä»¬è¿›è¡Œé›¶å¡«å……ï¼Œä½¿å…¶é•¿åº¦ç›¸åŒã€‚ç„¶åï¼ŒæŒ‰ä¸€å®šæ¯”ä¾‹ç»„åˆåœ¨ä¸€èµ·ã€‚</p>
<p>æ‰€å¾—åˆ°çš„å•è¯åµŒå…¥é€šè¿‡CNN/LSTMç¼–ç å™¨ä¼ é€’åˆ°å¥å­åµŒå…¥ä¸­ï¼Œéšåè®¡ç®—äº¤å‰ç†µæŸå¤±ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF/mix2.PNG" alt="img"></p>
<h3 id="5-2-sentenceMixup"><a href="#5-2-sentenceMixup" class="headerlink" title="5.2 sentenceMixup"></a>5.2 sentenceMixup</h3><p><img src="https://raw.githubusercontent.com/Hao-Kailong/blog-image/master/NLP%E6%95%B0%E6%8D%AE%E5%A2%9E%E5%BC%BA%E6%8A%80%E6%9C%AF/mix3.PNG" alt="img"></p>
<p>å¯ä»¥çœ‹åˆ°è¿™ä¸€æ–¹æ³•ï¼Œä¸ä¸Šè¿°æ–¹æ³•ç±»ä¼¼ï¼Œåªä¸è¿‡åœ¨å…·ä½“æ­¥éª¤ä¸Šæœ‰æ‰€è°ƒæ•´ã€‚</p>
<h2 id="ä¼ é€é—¨"><a href="#ä¼ é€é—¨" class="headerlink" title="ä¼ é€é—¨"></a>ä¼ é€é—¨</h2><p><strong>åŸæ–‡åšå®¢åœ°å€ï¼š</strong><br><a href="https://amitness.com/2020/05/data-augmentation-for-nlp/" target="_blank" rel="noopener">https://amitness.com/2020/05/data-augmentation-for-nlp/</a></p>
<p>WordNetæ•°æ®é›†ï¼š<br><a href="https://www.nltk.org/howto/wordnet.html" target="_blank" rel="noopener">https://www.nltk.org/howto/wordnet.html</a></p>
<p>TextBlob APIï¼š<br><a href="https://textblob.readthedocs.io/en/dev/quickstart.html#wordnet-integration" target="_blank" rel="noopener">https://textblob.readthedocs.io/en/dev/quickstart.html#wordnet-integration</a></p>
<p>PPDBæ•°æ®é›†ï¼š<br><a href="http://paraphrase.org/#/download" target="_blank" rel="noopener">http://paraphrase.org/#/download</a></p>
<p>TF-IDFä»£ç ï¼š<br><a href="https://github.com/google-research/uda/blob/master/text/augmentation/word_level_augment.py" target="_blank" rel="noopener">https://github.com/google-research/uda/blob/master/text/augmentation/word_level_augment.py</a></p>
<p>ä½¿ç”¨Google Sheetså®ç°åå‘ç¿»è¯‘ï¼š<br><a href="https://amitness.com/2020/02/back-translation-in-google-sheets/" target="_blank" rel="noopener">https://amitness.com/2020/02/back-translation-in-google-sheets/</a></p>
<p>Pythonæ”¶ç¼©åº“ï¼š<br><a href="https://github.com/kootenpv/contractions" target="_blank" rel="noopener">https://github.com/kootenpv/contractions</a></p>
]]></content>
      <categories>
        <category>NLP</category>
      </categories>
      <tags>
        <tag>NLP</tag>
        <tag>data augmentation</tag>
        <tag>Mechine Learning</tag>
        <tag>æœºå™¨å­¦ä¹ </tag>
        <tag>æ•°æ®å¢å¼º</tag>
      </tags>
  </entry>
  <entry>
    <title>Normalizationç¥ç»ç½‘ç»œä¸­çš„æ­£åˆ™åŒ–</title>
    <url>/2020/04/20/Normalization%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E4%B8%AD%E7%9A%84%E6%AD%A3%E5%88%99%E5%8C%96/</url>
    <content><![CDATA[<p>åœ¨ç¥ç»ç½‘ç»œä¸­ç»å¸¸éœ€è¦ç”¨åˆ°æ­£åˆ™åŒ–æ–¹æ³•ï¼Œæ¥åŠ é€Ÿç¥ç»ç½‘ç»œçš„è®­ç»ƒä»¥åŠå‡å°‘éœ‡è¡ç­‰</p>
<h2 id="Batch-Normalization"><a href="#Batch-Normalization" class="headerlink" title="Batch Normalization"></a>Batch Normalization</h2><p>å¯¹æ¯ä¸ªbatchä¸­åŒä¸€ç»´åº¦çš„ç‰¹å¾åšnormalization</p>
<h2 id="Layer-Normalization"><a href="#Layer-Normalization" class="headerlink" title="Layer Normalization"></a>Layer Normalization</h2><p>é’ˆå¯¹å•ä¸ªè®­ç»ƒæ ·æœ¬çš„æ‰€æœ‰ç»´åº¦åšnormalizationã€‚ä¹‹å‰çš„BNæ˜¯çºµå‘è§„èŒƒåŒ–ï¼Œè€Œlayer normalizationæ˜¯æ¨ªå‘è§„èŒƒåŒ–</p>
<h2 id="Instance-Normalization"><a href="#Instance-Normalization" class="headerlink" title="Instance Normalization"></a>Instance Normalization</h2><p>ä¸BNåªæœ‰ä¸€ç‚¹ä¸åŒï¼ŒBNæ˜¯ä½œç”¨äºä¸€ä¸ªbatchï¼Œè€ŒINæ˜¯ä½œç”¨äºå•ä¸ªæ ·æœ¬</p>
<h2 id="Group-Normalization"><a href="#Group-Normalization" class="headerlink" title="Group Normalization"></a>Group Normalization</h2><p>åˆ’åˆ†åŒºåŸŸï¼Œç„¶åè¿›è¡Œnormalization<a id="more"></a></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç”¨ä¸€å¼ å›¾æ¦‚æ‹¬å¦‚ä¸‹ä¸ºï¼š</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/BlogImage/master/Normalization.webp" alt></p>
<p>Nä»£è¡¨batch_sizeï¼ŒCä»£è¡¨channelsï¼ŒH,Wåˆ†åˆ«ä»£è¡¨height, weightã€‚å¯¹äºNLPåº”ç”¨ä¸­ï¼Œåªéœ€è¦å°†H,Wä½œä¸ºseq_lenç†è§£å³å¯ã€‚</p>
]]></content>
      <categories>
        <category>Neural Networks</category>
      </categories>
      <tags>
        <tag>ç¥ç»ç½‘ç»œ</tag>
        <tag>æ­£åˆ™åŒ–</tag>
        <tag>Normalization</tag>
        <tag>Neural Networks</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨CCproxyä½¿å®éªŒå®¤æœåŠ¡å™¨è”ç½‘</title>
    <url>/2020/03/09/%E4%BD%BF%E7%94%A8CCproxy%E4%BD%BF%E5%AE%9E%E9%AA%8C%E5%AE%A4%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%81%94%E7%BD%91/</url>
    <content><![CDATA[<p>å®éªŒå®¤çš„æœåŠ¡å™¨æ˜¯ä¸èƒ½è”ç½‘çš„ï¼Œä½†æœ‰æ—¶éœ€è¦é€šè¿‡pip, condaå‘½ä»¤ä¸‹è½½ä¸€äº›åŒ…ã€‚ç»è¿‡å¸ˆå…„çš„å»ºè®®ï¼Œä½¿ç”¨CCproxyè½¯ä»¶ï¼Œç”¨è‡ªå·±çš„å¯ä»¥è”ç½‘çš„windowså°å¼æœºä½œä¸ºä»£ç†ï¼ŒæˆåŠŸçš„è®©æœåŠ¡å™¨å¯ä»¥ä½¿ç”¨conda install å‘½ä»¤äº†ï¼è¿™é‡Œè®°å½•ä¸€ä¸‹è¿‡ç¨‹ã€‚</p>
<p>é¦–å…ˆï¼Œä¸‹è½½å¹¶å®‰è£…CCproxyè½¯ä»¶ï¼Œå®˜ç½‘åœ°å€ä¸ºï¼š<a href="http://www.ccproxy.com/" target="_blank" rel="noopener">www.ccproxy.com</a><a id="more"></a></p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/BlogImage/master/CCproxy/ç•Œé¢.PNG" alt></p>
<p>ç„¶åï¼Œç‚¹å‡»è®¾ç½®ï¼Œè¿›è¡Œåè®®ç«¯å£çš„é…ç½®ã€‚æˆ‘ä»¬å®éªŒå®¤é‡Œçš„æœåŠ¡å™¨å¼€æ”¾äº†808ç«¯å£ï¼Œæ‰€ä»¥HTTPç«¯å£ä¿æŒä¸å˜å°±å¯ä»¥ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/BlogImage/master/CCproxy/%E8%AE%BE%E7%BD%AE.PNG" alt></p>
<p><strong>æ³¨æ„è‡ªåŠ¨æ£€æµ‹é‚£é‡Œ</strong>ï¼Œç”±äºæˆ‘çš„å°å¼æœºä¸Šå®‰è£…äº†docker, vmwareï¼Œæ‰€ä»¥è‡ªåŠ¨æ£€æµ‹çš„ipåœ°å€æ˜¯é”™è¯¯çš„ï¼Œè¿™è®©æˆ‘è‹¦æ¼äº†å¾ˆé•¿æ—¶é—´ï¼Œæœ€åæ‰å‘ç°æ˜¯è¿™é‡Œå‡ºäº†bugï¼å¯ä»¥å–æ¶ˆè‡ªåŠ¨æ£€æµ‹ï¼Œæ‰‹åŠ¨é€‰æ‹©æ­£ç¡®çš„åœ°å€ï¼Œå¯ä»¥é€šè¿‡ipconfigå‘½ä»¤æŸ¥çœ‹çœŸæ­£çš„ipåœ°å€ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/BlogImage/master/CCproxy/ipconfig.PNG" alt></p>
<p>é…ç½®å®Œæˆåï¼Œåœ¨æœåŠ¡å™¨ç«¯ï¼Œä½¿ç”¨exportå‘½ä»¤ä¸´æ—¶ä¿®æ”¹ä»£ç†åœ°å€ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export http_proxy=http://114.212.87.108:808</span><br><span class="line">export https_proxy=http://114.212.87.108:808</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œå°±å¯ä»¥ä¸Šç½‘äº†ï¼Œæ£€æµ‹ä¸€ä¸‹ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/BlogImage/master/CCproxy/wget.PNG" alt></p>
<p>æˆåŠŸï¼è¿™æ ·å°±å¯ä»¥é€šè¿‡condaã€pipæ–¹ä¾¿çš„å®‰è£…éœ€è¦çš„åŒ…äº†ã€‚CCproxyè¿˜æœ‰ä¸€äº›é«˜çº§çš„è®¾ç½®ï¼Œä½†æ˜¯æˆ‘è¿™é‡Œæ²¡æœ‰ç”¨åˆ°ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹çš„ç”¨æˆ·æ‰‹å†Œ<a href="http://www.ccproxy.com/manual.htm" target="_blank" rel="noopener">http://www.ccproxy.com/manual.htm</a>è¿›è¡Œé…ç½®ä¿®æ”¹</p>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>ä»£ç†</tag>
        <tag>æœåŠ¡å™¨</tag>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>æµ‹è¯•MathJaxæ˜¾ç¤ºæ•°å­¦å…¬å¼</title>
    <url>/2020/03/05/%E6%B5%8B%E8%AF%95MathJax%E6%98%BE%E7%A4%BA%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F/</url>
    <content><![CDATA[<script type="math/tex; mode=display">
y_t = softmax(W^{(a)}a_t)</script><script type="math/tex; mode=display">
a_t = GRU([y_{t-1}, q],a_{t-1})</script><script type="math/tex; mode=display">
o = \sum_ip_{h_i}A\theta_V(v_{h_i})</script><p>æ˜¯å¦å¯ä»¥æ­£å¸¸æ˜¾ç¤ºå¸¸ç”¨çš„æ•°å­¦ç¬¦å·ï¼Ÿ</p>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
  </entry>
  <entry>
    <title>è¯å½¢è¿˜åŸã€ä¸­æ–‡åˆ†è¯å’Œå¥æ³•åˆ†æDemo</title>
    <url>/2019/11/16/%E5%BD%A2%E6%80%81%E8%BF%98%E5%8E%9F%E3%80%81%E4%B8%AD%E6%96%87%E5%88%86%E8%AF%8D%E5%92%8C%E5%8F%A5%E6%B3%95%E5%88%86%E6%9E%90Demo/</url>
    <content><![CDATA[<p>åœ¨å­¦æ ¡çš„è‡ªç„¶è¯­è¨€å¤„ç†è¯¾ç¨‹ä¸­ï¼Œéœ€è¦å®Œæˆå‡ ä¸ªå°å®éªŒï¼Œé‡‡ç”¨ä¼ ç»Ÿæ–¹æ³•ï¼Œä¸‹é¢ç»™å‡ºè§£é‡Šï¼š</p>
<h2 id="è¯å½¢è¿˜åŸ"><a href="#è¯å½¢è¿˜åŸ" class="headerlink" title="è¯å½¢è¿˜åŸ"></a>è¯å½¢è¿˜åŸ</h2><p>ä½¿ç”¨<a href="http://nlp.nju.edu.cn/MT_Lecture/dic_ec.rar" target="_blank" rel="noopener">è¿™ä¸ªè¯å…¸</a>ï¼Œå¯¹è¾“å…¥çš„å•è¯è¿›è¡Œè¯å½¢è¿˜åŸï¼Œä¹Ÿå¯ä»¥å«åšæå–è¯å¹²</p>
<p>ç®—æ³•è®¾è®¡å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1.è¾“å…¥ä¸€ä¸ªå•è¯</span><br><span class="line">2.è¯å…¸ä¸­å«æœ‰è¯¥è¯ï¼Œè¾“å‡ºå…¶å±æ€§ï¼Œè½¬4</span><br><span class="line">3.å¦‚æœå«æœ‰è¯¥è¯çš„è¿˜åŸè§„åˆ™ï¼Œå¹¶ä¸”è¯å…¸ä¸­å«æœ‰è¿˜åŸåçš„è¯ï¼Œè¾“å‡ºå±æ€§ï¼›å¦åˆ™ï¼Œå¯»æ‰¾è¯¥è¯çš„æœ€è¿‘é‚»ï¼Œè¾“å‡ºå±æ€§</span><br><span class="line">4.è¾“å…¥ä¸­è¿˜æœ‰å•è¯ï¼Œè½¬1ï¼›å¦åˆ™ç»“æŸ</span><br></pre></td></tr></table></figure>
<p>å…·ä½“å®ç°å¯ä»¥å‚ç…§ä»¥ä¸‹è§„åˆ™ï¼Œé‡‡ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…ï¼š</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/BlogImage/master/nlp_traditional/å½¢æ€è¿˜åŸè§„åˆ™.PNG" alt></p>
<p>æ›´åŠ å…·ä½“è¯¦ç»†çš„è§„åˆ™å¯ä»¥å‚è€ƒï¼š<a href="https://wenku.baidu.com/view/4eec6eca326c1eb91a37f111f18583d048640f76.html" target="_blank" rel="noopener">ç™¾åº¦æ–‡åº“-è‹±è¯­å•è¯çš„å½¢æ€å˜åŒ–</a><a id="more"></a></p>
<h2 id="ä¸­æ–‡åˆ†è¯"><a href="#ä¸­æ–‡åˆ†è¯" class="headerlink" title="ä¸­æ–‡åˆ†è¯"></a>ä¸­æ–‡åˆ†è¯</h2><p>é‡‡ç”¨åŸºäºè¯å…¸çš„ä¸­æ–‡åˆ†è¯ï¼Œè¯å…¸åœ°å€ä¸º<a href="http://nlp.nju.edu.cn/MT_Lecture/dic_ce.rar" target="_blank" rel="noopener">è¿™é‡Œ</a></p>
<p>å®ç°äº†æ­£å‘æœ€å¤§åŒ¹é…(FMM)å’Œé€†å‘æœ€å¤§åŒ¹é…(RMM)ç®—æ³•</p>
<p><strong>æ­£å‘æœ€å¤§åŒ¹é…</strong>ï¼šä»å·¦åˆ°å³ï¼Œå–æœ€é•¿çš„è¯ä½œä¸ºåˆ‡åˆ†</p>
<p><strong>é€†å‘æœ€å¤§åŒ¹é…</strong>ï¼šä»å³åˆ°å·¦ï¼Œå–æœ€é•¿çš„è¯ä½œä¸ºåˆ‡åˆ†</p>
<p>ä¾‹å¦‚ï¼Œâ€œè®¨è®ºæˆ˜äº‰ä¸å’Œå¹³ç­‰é—®é¢˜â€ï¼Œé‡‡ç”¨FMMï¼Œä¼šè¢«åˆ†ä¸ºâ€è®¨è®º/æˆ˜äº‰/ä¸/å’Œå¹³/ç­‰/é—®é¢˜â€ï¼Œé‡‡ç”¨RMMï¼Œç»“æœä¸ºâ€œè®¨è®º/æˆ˜äº‰/ä¸/å’Œ/å¹³ç­‰/é—®é¢˜â€</p>
<p>ç®—æ³•è¾ƒä¸ºç®€å•ï¼Œå…·ä½“å®ç°å‚è§æ–‡æœ«githubé“¾æ¥</p>
<h2 id="å¥æ³•åˆ†æ"><a href="#å¥æ³•åˆ†æ" class="headerlink" title="å¥æ³•åˆ†æ"></a>å¥æ³•åˆ†æ</h2><p>é‡‡ç”¨è‡ªåº•å‘ä¸Šï¼ŒåŸºäºå›¾çš„å¥æ³•åˆ†ææŠ€æœ¯(Chart Parsing)</p>
<p>æ•°æ®ç»“æ„ä¸ºï¼š</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/BlogImage/master/nlp_traditional/å¥æ³•åˆ†ææ•°æ®ç»“æ„.PNG" alt></p>
<p>å…·ä½“çš„ç®—æ³•ä¸ºï¼š</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/BlogImage/master/nlp_traditional/å¥æ³•åˆ†æç®—æ³•.PNG" alt></p>
<h2 id="ä»¥ä¸Šä»£ç å®ç°å‚è§æˆ‘çš„githubé“¾æ¥nlp-traditional"><a href="#ä»¥ä¸Šä»£ç å®ç°å‚è§æˆ‘çš„githubé“¾æ¥nlp-traditional" class="headerlink" title="ä»¥ä¸Šä»£ç å®ç°å‚è§æˆ‘çš„githubé“¾æ¥nlp_traditional"></a><strong>ä»¥ä¸Šä»£ç å®ç°å‚è§æˆ‘çš„githubé“¾æ¥</strong><a href="https://github.com/Hao-Kailong/nlp_traditional" target="_blank" rel="noopener">nlp_traditional</a></h2><p>æ¬¢è¿å¤§å®¶å’Œæˆ‘äº¤æµ~</p>
]]></content>
      <categories>
        <category>NLP</category>
      </categories>
      <tags>
        <tag>NLP</tag>
        <tag>ä¸­æ–‡åˆ†è¯</tag>
        <tag>è¯å½¢è¿˜åŸ</tag>
        <tag>å¥æ³•åˆ†æ</tag>
        <tag>è‡ªç„¶è¯­è¨€å¤„ç†</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo Blog è¿ç§»</title>
    <url>/2019/10/22/Hexo-Blog-%E8%BF%81%E7%A7%BB/</url>
    <content><![CDATA[<h2 id="åšå®¢è¿ç§»"><a href="#åšå®¢è¿ç§»" class="headerlink" title="åšå®¢è¿ç§»"></a>åšå®¢è¿ç§»</h2><p>ä¹‹å‰çš„ç¬”è®°æœ¬ä¸ç”¨äº†ï¼Œä½†æ˜¯hexoåšå®¢å†…å®¹è¿˜åœ¨ä¸Šé¢ï¼Œè¦æŠŠå®ƒè¿ç§»åˆ°æ–°çš„ä¸»æœºä¸Šæ¥~</p>
<ol>
<li>æ‹·è´åŸæ–‡ä»¶å¤¹ä¸­ä»¥ä¸‹å‡ ä¸ªç›®å½•ï¼š</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">_config.yml</span><br><span class="line">package.json</span><br><span class="line">scaffolds/</span><br><span class="line">sources/</span><br><span class="line">themes/</span><br></pre></td></tr></table></figure>
<ol>
<li><p>åœ¨æ–°ä¸»æœºä¸Šå®‰è£…hexoï¼Œå¯å‚è€ƒ<a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">hexoå®˜æ–¹æ–‡æ¡£</a></p>
</li>
<li><p>è¿›å…¥hexoç›®å½•ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p>
</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install</span><br><span class="line">npm install hexo-deployer-git --save</span><br><span class="line">npm install hexo-generator-feed --save</span><br><span class="line">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<ol>
<li>éƒ¨ç½²</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><ol>
<li>ERROR Deployer not found: leancloud_counter_security_sync</li>
</ol>
<p>ç”±äºleancloudæ’ä»¶å‡ºäº†äº›é—®é¢˜ï¼Œleancloudæ’ä»¶ä¸»è¦ç”¨äºç»Ÿè®¡æ–‡ç« çš„è®¿é—®æ•°ï¼Œå¯¹æˆ‘æ¥è¯´ç”¨å¤„ä¸å¤§ï¼Œç´¢æ€§ç›´æ¥åœ¨_config.ymlä¸­æŠŠæ’ä»¶ç¦ç”¨äº†â€¦â€¦</p>
<p>å¦‚æœæƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ¨èä¸€ç¯‡åšå®¢ï¼š<a href="https://leaferx.online/2018/02/11/lc-security/" target="_blank" rel="noopener">Leancloudæ’ä»¶ä¿®å¤</a></p>
<p>leancloudæ’ä»¶å¯¹åº”çš„githubåœ°å€ä¸º<a href="https://github.com/theme-next/hexo-leancloud-counter-security" target="_blank" rel="noopener">https://github.com/theme-next/hexo-leancloud-counter-security</a></p>
<p><em>å‚è€ƒï¼š</em></p>
<p><em><a href="https://blog.csdn.net/eternity1118_/article/details/71194395?ref=myread&amp;tdsourcetag=s_pctim_aiomsg" target="_blank" rel="noopener">hexo: æ›´æ¢ç”µè„‘ï¼Œå¦‚ä½•ç»§ç»­å†™åšå®¢</a></em></p>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>æŠ€æœ¯</tag>
        <tag>ç½‘ç«™</tag>
        <tag>åšå®¢</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ©ç”¨Scrapyçˆ¬å–ç™¾åº¦ç™¾ç§‘ï¼Œäº’åŠ¨ç™¾ç§‘</title>
    <url>/2019/09/05/%E5%88%A9%E7%94%A8Scrapy%E7%88%AC%E5%8F%96%E7%99%BE%E5%BA%A6%E7%99%BE%E7%A7%91%EF%BC%8C%E4%BA%92%E5%8A%A8%E7%99%BE%E7%A7%91/</url>
    <content><![CDATA[<h2 id="é¡¹ç›®ç®€ä»‹"><a href="#é¡¹ç›®ç®€ä»‹" class="headerlink" title="é¡¹ç›®ç®€ä»‹"></a>é¡¹ç›®ç®€ä»‹</h2><p>ä¸­æ–‡ç™¾ç§‘æ•°æ®ä¸­è•´å«äº†å¤§é‡çš„çŸ¥è¯†ï¼Œåˆ©ç”¨Scrapyçˆ¬å–ç™¾ç§‘é¡µé¢ï¼Œä¸ºæ¥ä¸‹æ¥çš„ä¿¡æ¯æŠ½å–ç­‰æ‰“ä¸‹åŸºç¡€ã€‚</p>
<p>å…·ä½“å®è·µé‡‡ç”¨äº†Scrapyæ¡†æ¶ï¼Œè¿™å¯èƒ½æ˜¯pythonä¸­æœ€æˆç†Ÿçš„çˆ¬è™«æ¡†æ¶ï¼Œåˆ©ç”¨ä»£ç†ipæ± ç­‰æŠ€æœ¯ï¼Œçˆ¬å–å…¨éƒ¨çš„ç™¾ç§‘é¡µé¢ã€‚</p>
<h2 id="Scrapyæ¶æ„"><a href="#Scrapyæ¶æ„" class="headerlink" title="Scrapyæ¶æ„"></a>Scrapyæ¶æ„</h2><p>scrapyæ•´ä½“çš„ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/BlogImage/master/Scrapyæ¶æ„.jpg" alt></p>
<p>ç”±Spiderå‘é€Requestè¯·æ±‚ï¼ŒSchedulerè¿›è¡Œè¯·æ±‚è°ƒåº¦ï¼ŒDownloaderæ‰§è¡Œå…·ä½“çš„ä¸‹è½½ä»»åŠ¡ï¼Œå¹¶ç»è¿‡Pipelineå†™å…¥æ•°æ®åº“æˆ–ç£ç›˜ç­‰ã€‚ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰ä¸‹è½½å™¨ä¸­é—´ä»¶ï¼Œæ¯”å¦‚åœ¨ä¸­é—´ä»¶ä¸­æ›´æ¢ä»£ç†ipç­‰ï¼Œå…·æœ‰å¾ˆå¤§çš„ç®€ä¾¿æ€§å’Œçµæ´»æ€§ã€‚<a id="more"></a></p>
<h2 id="çˆ¬å–é€»è¾‘"><a href="#çˆ¬å–é€»è¾‘" class="headerlink" title="çˆ¬å–é€»è¾‘"></a>çˆ¬å–é€»è¾‘</h2><h3 id="ç™¾åº¦ç™¾ç§‘"><a href="#ç™¾åº¦ç™¾ç§‘" class="headerlink" title="ç™¾åº¦ç™¾ç§‘"></a>ç™¾åº¦ç™¾ç§‘</h3><h4 id="é€»è¾‘"><a href="#é€»è¾‘" class="headerlink" title="é€»è¾‘"></a>é€»è¾‘</h4><p>ç”±äºç™¾åº¦ç™¾ç§‘çš„æ‰€æœ‰é¡µé¢éƒ½æ˜¯è¿ç»­ç¼–ç çš„ï¼Œå…·æœ‰ä»¥ä¸‹çš„æ ¼å¼ï¼š</p>
<p><a href="http://baike.baidu.com/view/%s.html" target="_blank" rel="noopener">http://baike.baidu.com/view/%s.html</a></p>
<p>ä¾‹å¦‚ï¼Œ <a href="http://baike.baidu.com/view/1.html" target="_blank" rel="noopener">http://baike.baidu.com/view/1.html</a> ï¼Œä¼šè¢«é‡å®šå‘ä¸º <a href="https://baike.baidu.com/item/ç™¾åº¦ç™¾ç§‘" target="_blank" rel="noopener">https://baike.baidu.com/item/ç™¾åº¦ç™¾ç§‘</a> </p>
<p>æ‰€ä»¥ï¼Œåªéœ€è¦è¿ç»­çš„å‘é€Requestå°±å¯ä»¥çˆ¬å–åˆ°å…¨éƒ¨çš„ç™¾ç§‘é¡µé¢ã€‚</p>
<h4 id="ä»£ç†æ± "><a href="#ä»£ç†æ± " class="headerlink" title="ä»£ç†æ± "></a>ä»£ç†æ± </h4><p>ç™¾åº¦ç™¾ç§‘å…·æœ‰åçˆ¬è™«ç­–ç•¥ï¼Œå¤§é‡çš„è¯·æ±‚ä¼šå¯¼è‡´ipè¢«å°ï¼Œå› æ­¤éœ€è¦é‡‡ç”¨ä»£ç†ipæŠ€æœ¯</p>
<p>ä½¿ç”¨<a href="https://www.kuaidaili.com/" target="_blank" rel="noopener">å¿«ä»£ç†</a>è¿›è¡ŒAPIè°ƒç”¨ï¼Œè·å–ä»£ç†ipï¼Œå¹¶åœ¨ä¸‹è½½å™¨ä¸­é—´ä»¶ä¸­æ›´æ¢ä»£ç†ipï¼Œä»£ç ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProxyMiddleware</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_request</span><span class="params">(self, request, spider)</span>:</span></span><br><span class="line">        proxy = random.choice(util.proxies)</span><br><span class="line">        request.meta[<span class="string">'proxy'</span>] = <span class="string">"http://&#123;0&#125;"</span>.format(proxy)</span><br></pre></td></tr></table></figure>
<p>å½“ä¸‹è½½å‡ºç°å¼‚å¸¸æ—¶ï¼Œå¯¹ä»£ç†ipè¿›è¡Œæ›´æ¢ï¼Œå¹¶åˆ é™¤æ— æ•ˆä»£ç†ã€‚è¿™æ ·ï¼Œå¯ä»¥åŠ¨æ€çš„ä¿è¯ä»£ç†ipæ± å¤„äºé«˜è´¨é‡çš„çŠ¶æ€</p>
<h3 id="äº’åŠ¨ç™¾ç§‘"><a href="#äº’åŠ¨ç™¾ç§‘" class="headerlink" title="äº’åŠ¨ç™¾ç§‘"></a>äº’åŠ¨ç™¾ç§‘</h3><h4 id="é€»è¾‘-1"><a href="#é€»è¾‘-1" class="headerlink" title="é€»è¾‘"></a>é€»è¾‘</h4><p>äº’åŠ¨ç™¾ç§‘æ²¡æœ‰åƒç™¾åº¦ç™¾ç§‘é‚£æ ·çš„è¿ç»­ç¼–ç ï¼ˆåœ¨ç½‘ä¸Šæ²¡æœ‰æ‰¾åˆ°ï¼‰ï¼Œå› æ­¤åªèƒ½æ¢ä¸€ç§æ€è·¯ã€‚</p>
<p>åˆ©ç”¨ <a href="http://fenlei.baike.com" target="_blank" rel="noopener">http://fenlei.baike.com</a> ä½œä¸ºèµ·å§‹é¡µé¢ï¼Œåˆ©ç”¨beautifulsoupæå–æ‰€æœ‰çš„è¶…é“¾æ¥ï¼ŒæŒ‰ç…§è¶…é“¾å‘ç°çš„æ–¹å¼è¿›è¡Œå›¾éå†ï¼Œå¦‚æœé‡åˆ°æ»¡è¶³ <a href="http://www.baike.com/wiki/" target="_blank" rel="noopener">http://www.baike.com/wiki/</a> çš„é¡µé¢ï¼Œåˆ™ä¸‹è½½ä¸‹æ¥è¿›å…¥ç£ç›˜ï¼Œå¦åˆ™ç»§ç»­éå†ã€‚</p>
<p><em>äº’åŠ¨ç™¾ç§‘æ²¡æœ‰åçˆ¬è™«ç­–ç•¥ï¼Œæ— éœ€ä»£ç†æ± </em></p>
<h2 id="å®éªŒæ•ˆæœ"><a href="#å®éªŒæ•ˆæœ" class="headerlink" title="å®éªŒæ•ˆæœ"></a>å®éªŒæ•ˆæœ</h2><h3 id="ç™¾åº¦ç™¾ç§‘-1"><a href="#ç™¾åº¦ç™¾ç§‘-1" class="headerlink" title="ç™¾åº¦ç™¾ç§‘"></a>ç™¾åº¦ç™¾ç§‘</h3><p>åœ¨centosæœåŠ¡å™¨ä¸Šï¼Œé‡‡ç”¨å¤šè¿›ç¨‹åŒæ—¶çˆ¬å–ï¼ŒæœåŠ¡å™¨ä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">CPU: 8ä¸ª 8æ ¸ Intel(R) Xeon(R) CPU E7- 4820  @ 2.00GHz</span><br><span class="line">å†…å­˜: 174G</span><br><span class="line">ç¡¬ç›˜: 2T</span><br></pre></td></tr></table></figure>
<p>4è¿›ç¨‹åŒæ—¶çˆ¬å–ï¼Œæ¯å¤©å¯ä»¥çˆ¬å–1,500,000é¡µé¢</p>
<h3 id="äº’åŠ¨ç™¾ç§‘-1"><a href="#äº’åŠ¨ç™¾ç§‘-1" class="headerlink" title="äº’åŠ¨ç™¾ç§‘"></a>äº’åŠ¨ç™¾ç§‘</h3><p>æœåŠ¡å™¨ä¿¡æ¯åŒä¸Šï¼Œç›®å‰å·²ç»çˆ¬å–äº†3,000,000é¡µé¢ï¼Œè¯´æ˜è¦†ç›–ç‡è¿˜ä¸é”™ï¼Œä¸çŸ¥é“æœ€ç»ˆå¯ä»¥çˆ¬å–åˆ°å¤šå°‘é¡µé¢â€¦</p>
<h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><p>å…·ä½“çš„æºä»£ç å¯ä»¥åœ¨æˆ‘çš„Githubä¸Šæ‰¾åˆ°</p>
<p><a href="https://github.com/Hao-Kailong/baiduBaikeSpider" target="_blank" rel="noopener">ç™¾åº¦ç™¾ç§‘çˆ¬è™«github</a></p>
<p><a href="https://github.com/Hao-Kailong/hudongBaikeSpider" target="_blank" rel="noopener">äº’åŠ¨ç™¾ç§‘çˆ¬è™«github</a></p>
<h2 id="å†™åœ¨åé¢"><a href="#å†™åœ¨åé¢" class="headerlink" title="å†™åœ¨åé¢"></a>å†™åœ¨åé¢</h2><p>åœ¨å…·ä½“çš„å®è·µä¸­é‡åˆ°äº†ä¸å°‘å‘ï¼Œæ¯”å¦‚å¤šè¿›ç¨‹ä¹‹é—´çš„ååŒã€æœåŠ¡å™¨çš„é…ç½®ã€ä»£ç†é€»è¾‘ç­‰ï¼Œå¦‚æœå¤§å®¶é‡åˆ°é—®é¢˜ï¼Œæ¬¢è¿å’Œæˆ‘ç•™è¨€äº¤æµ~</p>
]]></content>
      <categories>
        <category>Data Mining</category>
      </categories>
      <tags>
        <tag>çˆ¬è™«</tag>
        <tag>Scrapy</tag>
        <tag>çŸ¥è¯†è·å–</tag>
      </tags>
  </entry>
  <entry>
    <title>Relation Inductive Biases, Deep Learning, and Graph Networks</title>
    <url>/2019/06/10/Relation-Inductive-Biases-Deep-Learning-and-Graph-Networks/</url>
    <content><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>è¿™æ˜¯è®ºæ–‡ <a href="https://arxiv.org/pdf/1806.01261.pdf" target="_blank" rel="noopener">Relation Inductive Biases, Deep Learning, and Graph Networks</a> çš„é˜…è¯»ç¬”è®°ã€‚</p>
<p>PearlæŒ‡å‡ºå½“å‰çš„æ·±åº¦å­¦ä¹ æ— æ³•è§£å†³æ¨ç†çš„é—®é¢˜ï¼Œæ‰€åšçš„ä¸è¿‡æ˜¯æ‹Ÿåˆæ›²çº¿ç½¢äº†ã€‚</p>
<p>æœºå™¨å­¦ä¹ ä¸»è¦æœ‰ä¸‰ä¸ªä¸»è¦å­¦æ´¾ï¼š</p>
<ul>
<li><p>ç¬¦å·ä¸»ä¹‰ (Symbolicism)</p>
<ul>
<li><p>ç¬¦å·ä¸»ä¹‰çš„èµ·æºï¼Œæ³¨é‡ç ”ç©¶çŸ¥è¯†è¡¨è¾¾å’Œé€»è¾‘æ¨ç†ã€‚ç»è¿‡å‡ åå¹´çš„ç ”ç©¶ï¼Œç›®å‰è¿™ä¸€å­¦æ´¾çš„ä¸»è¦æˆæœï¼Œä¸€ä¸ªæ˜¯è´å¶æ–¯å› æœç½‘ç»œï¼Œå¦ä¸€ä¸ªæ˜¯çŸ¥è¯†å›¾è°±ã€‚</p>
<p>è´å¶æ–¯å› æœç½‘ç»œçš„æ——æ‰‹æ˜¯ Judea Pearl æ•™æˆï¼Œ2011å¹´çš„å›¾çµå¥–è·å¾—è€…ã€‚ä½†æ˜¯æ®è¯´ 2017å¹´ NIPS å­¦æœ¯ä¼šè®®ä¸Šï¼Œè€çˆ·å­æ¼”è®²æ—¶ï¼Œå¬ä¼—å¯¥å¯¥ã€‚2018å¹´ï¼Œè€çˆ·å­å‡ºç‰ˆäº†ä¸€æœ¬æ–°ä¹¦ï¼Œâ€œThe Book of Whyâ€ï¼Œä¸ºå› æœç½‘ç»œè¾©æŠ¤ï¼ŒåŒæ—¶æ‰¹åˆ¤æ·±åº¦å­¦ä¹ ç¼ºä¹ä¸¥è°¨çš„é€»è¾‘æ¨ç†è¿‡ç¨‹ã€‚è€ŒçŸ¥è¯†å›¾è°±ä¸»è¦ç”±æœç´¢å¼•æ“å…¬å¸ï¼ŒåŒ…æ‹¬è°·æ­Œã€å¾®è½¯ã€ç™¾åº¦æ¨åŠ¨ï¼Œç›®æ ‡æ˜¯æŠŠæœç´¢å¼•æ“ï¼Œç”±å…³é”®è¯åŒ¹é…ï¼Œæ¨è¿›åˆ°è¯­ä¹‰åŒ¹é…ã€‚</p>
</li>
</ul>
</li>
<li><p>è¿æ¥ä¸»ä¹‰ (Connectionism)</p>
<ul>
<li>è¿æ¥ä¸»ä¹‰çš„èµ·æºæ˜¯ä»¿ç”Ÿå­¦ï¼Œç”¨æ•°å­¦æ¨¡å‹æ¥æ¨¡ä»¿ç¥ç»å…ƒã€‚Marvin Minsky æ•™æˆå› ä¸ºå¯¹ç¥ç»å…ƒç ”ç©¶çš„æ¨åŠ¨ï¼Œè·å¾—äº†1969å¹´å›¾çµå¥–ã€‚æŠŠå¤§é‡ç¥ç»å…ƒæ‹¼è£…åœ¨ä¸€èµ·ï¼Œå°±å½¢æˆäº†æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œæ·±åº¦å­¦ä¹ çš„æ——æ‰‹æ˜¯ Geoffrey Hinton æ•™æˆã€‚æ·±åº¦å­¦ä¹ æ¨¡å‹æœ€é­äººè¯Ÿç—…çš„ç¼ºé™·ï¼Œæ˜¯ä¸å¯è§£é‡Šã€‚ </li>
</ul>
</li>
<li><p>è¡Œä¸ºä¸»ä¹‰ (Actionism)</p>
<ul>
<li>è¡Œä¸ºä¸»ä¹‰æŠŠæ§åˆ¶è®ºå¼•å…¥æœºå™¨å­¦ä¹ ï¼Œæœ€è‘—åçš„æˆæœæ˜¯å¼ºåŒ–å­¦ä¹ ã€‚å¼ºåŒ–å­¦ä¹ çš„æ——æ‰‹æ˜¯ Richard Sutton æ•™æˆã€‚è¿‘å¹´æ¥Google DeepMind ç ”ç©¶å‘˜ï¼ŒæŠŠä¼ ç»Ÿå¼ºåŒ–å­¦ä¹ ï¼Œä¸æ·±åº¦å­¦ä¹ èåˆï¼Œå®ç°äº† AlphaGoï¼Œæˆ˜èƒœå½“ä»Šä¸–ç•Œæ‰€æœ‰äººç±»å›´æ£‹é«˜æ‰‹ã€‚ </li>
</ul>
</li>
</ul>
<p>è¿™ç¯‡è®ºæ–‡ï¼Œæè®®æŠŠä¼ ç»Ÿçš„è´å¶æ–¯å› æœç½‘ç»œå’ŒçŸ¥è¯†å›¾è°±ï¼Œä¸æ·±åº¦å¼ºåŒ–å­¦ä¹ èåˆï¼Œå¹¶æ¢³ç†äº†ä¸è¿™ä¸ªä¸»é¢˜ç›¸å…³çš„ç ”ç©¶è¿›å±•ã€‚ </p>
<h2 id="è®ºæ–‡é˜…è¯»"><a href="#è®ºæ–‡é˜…è¯»" class="headerlink" title="è®ºæ–‡é˜…è¯»"></a>è®ºæ–‡é˜…è¯»</h2><h3 id="Relation-Inductive-Biases"><a href="#Relation-Inductive-Biases" class="headerlink" title="Relation Inductive Biases"></a>Relation Inductive Biases</h3><p>An <em>inductive bias</em> allows a learning algorithm to prioritize one solution (or interpretation) over another, independent of the observed data.</p>
<p>å…¨è¿æ¥å±‚å‡ ä¹æ²¡æœ‰å½’çº³åå‘ï¼Œæ‰€æœ‰çš„è¾“å…¥å•å…ƒç›´æ¥å½±å“åˆ°è¾“å‡ºå•å…ƒï¼Œå¹¶ä¸”ç‹¬ç«‹ã€‚</p>
<p>å·ç§¯å±‚çš„å½’çº³åå‘ï¼šå±€éƒ¨æ€§å’ŒTranslation Invarianceã€‚Translation Invarianceè¡¨ç°ä¸ºå¯¹ä¸åŒçš„å±€éƒ¨é‡‡ç”¨åŒæ ·çš„å‡½æ•°ã€‚</p>
<p>å¾ªç¯å±‚çš„å½’çº³åå‘ï¼šå±€éƒ¨æ€§å’ŒTemporal Invarianceï¼Œå³æ—¶é—´ä¸å˜æ€§ï¼Œå¯¹ä¸åŒçš„stepé‡‡ç”¨ç›¸åŒçš„å‡½æ•°ã€‚</p>
]]></content>
      <categories>
        <category>GNN</category>
      </categories>
      <tags>
        <tag>çŸ¥è¯†å›¾è°±</tag>
        <tag>GNN</tag>
        <tag>å›¾ç¥ç»ç½‘ç»œ</tag>
        <tag>å…³ç³»æ¨ç†</tag>
        <tag>æ·±åº¦å­¦ä¹ </tag>
      </tags>
  </entry>
  <entry>
    <title>ç«¥å¹´-å‰ä»–è°±</title>
    <url>/2019/06/06/%E7%AB%A5%E5%B9%B4-%E5%90%89%E4%BB%96%E8%B0%B1/</url>
    <content><![CDATA[<p>æœ€è¿‘ï¼Œå…¶å®å·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼ŒæŠŠâ€œç«¥å¹´â€è¿™é¦–æ­Œçš„å¼¹å”±ç»ƒå¾—å·®ä¸å¤šäº†ï¼Œåˆšç”¨githubå»ºäº†ä¸€ä¸ªå›¾åºŠï¼Œå°±ç”¨æ¥æµ‹è¯•ä¸€ä¸‹æ•ˆæœã€‚</p>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/BlogImage/master/guitar/TongNian/1.png" alt></p>
<a id="more"></a>
<p><img src="https://raw.githubusercontent.com/Hao-Kailong/BlogImage/master/guitar/TongNian/2.png" alt></p>
]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>å‰ä»–è°±</tag>
        <tag>éŸ³ä¹</tag>
      </tags>
  </entry>
  <entry>
    <title>çŸ¥è¯†å›¾è°±-é™ˆåé’§-ç¬”è®°</title>
    <url>/2019/06/01/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1-%E9%99%88%E5%8D%8E%E9%92%A7-%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<p>æœ¬æ–‡ä¸»è¦è®°å½•åœ¨å­¦ä¹ çŸ¥è¯†å›¾è°±è¯¾ä»¶æ—¶çš„ä¸€äº›ç¬”è®°ï¼Œè¯¾ä»¶æ¥è‡ªäºæ˜¯æµ™æ±Ÿå¤§å­¦æ•™æˆ<a href="https://person.zju.edu.cn/huajun" target="_blank" rel="noopener">é™ˆåé’§</a></p>
<h2 id="çŸ¥è¯†å›¾è°±æ¦‚è§ˆ"><a href="#çŸ¥è¯†å›¾è°±æ¦‚è§ˆ" class="headerlink" title="çŸ¥è¯†å›¾è°±æ¦‚è§ˆ"></a>çŸ¥è¯†å›¾è°±æ¦‚è§ˆ</h2><p>çŸ¥è¯†å›¾è°±çš„æŠ€æœ¯ä½“ç³»å¯ä»¥æ€»ç»“ä¸ºä¸‹å›¾ã€‚</p>
<p><img src="/images/blog/201905/çŸ¥è¯†å›¾è°±çš„æŠ€æœ¯ä½“ç³».PNG" alt></p>
<a id="more"></a>
<p>åˆ©ç”¨SPARQLå¯ä»¥æŸ¥è¯¢çŸ¥è¯†å›¾è°±ï¼Œä¸¾ä¾‹ä¸ºï¼š</p>
<p><img src="/images/blog/201905/SPARQLæŸ¥è¯¢.PNG" alt></p>
<p>å…¶å¯¹åº”çš„ç»“æ„ä¸ºä¸‹é¢æ‰€ç¤ºï¼š</p>
<p><img src="/images/blog/201905/SPARQLæŸ¥è¯¢ç»“æ„å›¾.PNG" alt></p>
<p>é€šè¿‡è¿™ä¸ªæŸ¥è¯¢ï¼Œå¯ä»¥æ‰¾åˆ°å‡ºç”Ÿåœ¨æˆç«‹äº1718å¹´çš„åŸå¸‚ï¼ŒåŒæ—¶ä¸æ˜¯ç”Ÿäº1976å¹´çš„äººçš„åå­—ã€‚</p>
<p>åœ¨OpenKGä¸Šå­˜åœ¨ç±»ä¼¼äºWordNetçš„ä¸­æ–‡è¯å…¸ï¼Œå¯ä»¥åœ¨é¡¹ç›®ä¸­ç”¨äºè§£å†³ä¸€äº›åŒä¹‰è¯çš„é—®é¢˜~</p>
<h2 id="å†å²ä¸­çš„çŸ¥è¯†è¡¨ç¤ºæ–¹æ³•"><a href="#å†å²ä¸­çš„çŸ¥è¯†è¡¨ç¤ºæ–¹æ³•" class="headerlink" title="å†å²ä¸­çš„çŸ¥è¯†è¡¨ç¤ºæ–¹æ³•"></a>å†å²ä¸­çš„çŸ¥è¯†è¡¨ç¤ºæ–¹æ³•</h2><p>åœ¨å†å²ä¸Šï¼Œå‡ºç°è¿‡å¤šç§çŸ¥è¯†çš„è¡¨ç¤ºæ–¹å¼ã€‚</p>
<ul>
<li>ä¸€é˜¶è°“è¯é€»è¾‘</li>
<li>äº§ç”Ÿå¼ç³»ç»Ÿ</li>
<li>æ¡†æ¶ç³»ç»Ÿ</li>
<li>è¯­ä¹‰ç½‘ç»œ</li>
<li>é€»è¾‘ç¨‹åº</li>
<li>ç¼ºçœé€»è¾‘</li>
<li>æ¨¡æ€é€»è¾‘</li>
</ul>
<p>ä¸‰å…ƒç»„(Subject, Predicate, Object)ï¼Œå³ä¸»è°“å®¾ç»“æ„ã€‚</p>
<p>OWLæ˜¯ä¸€ç§ç”¨æ¥å®šä¹‰æ¦‚å¿µã€æè¿°å®¢è§‚äº‹ç‰©ä»¥åŠè¿™äº›äº‹ç‰©ä¹‹é—´å…³ç³»ï¼ˆå³æœ¬ä½“ï¼‰çš„è¯­è¨€ï¼Œæ˜¯ä¸€é˜¶è°“è¯é€»è¾‘çš„å¯åˆ¤å®šå­é›†ã€‚</p>
<p>æè¿°é€»è¾‘å¯ä»¥ä¸ºçŸ¥è¯†å›¾è°±çš„è¡¨ç¤ºä¸å»ºæ¨¡æä¾›ç†è®ºåŸºç¡€ã€‚</p>
<p>schema.orgæ˜¯é¢å‘Webçš„è¯­ä¹‰æ•°æ®æ ‡å‡†ã€‚</p>
<p><a href="https://protege.stanford.edu" target="_blank" rel="noopener">Protege</a>æ˜¯ä¸€ç§åŸºäºJavaè¯­è¨€å¼€å‘çš„æœ¬ä½“ç¼–è¾‘å’Œæœ¬ä½“å¼€å‘å·¥å…·ã€‚</p>
<p>domainå’Œrangeç±»ä¼¼äºæ•°å­¦ä¸­çš„å®šä¹‰åŸŸå’Œå€¼åŸŸã€‚</p>
<p>RDFä½œä¸ºâ¼€ç§çŸ¥è¯†å›¾è°±è¡¨ç¤ºæ¡†æ¶çš„å‚è€ƒæ ‡å‡†ï¼Œå‘ä¸Šå¯¹æ¥OWLç­‰æ›´ä¸°å¯Œçš„è¯­ä¹‰è¡¨â½°å’Œæ¨ç†èƒ½åŠ›ï¼Œå‘ä¸‹å¯¹æ¥ç®€åŒ–åçš„å±æ€§å›¾æ•°æ®åº“ä»¥åŠå›¾è®¡ç®—å¼•æ“ã€‚</p>
<h2 id="çŸ¥è¯†å›¾è°±çš„å­˜å‚¨ä¸å…³è”æŸ¥è¯¢"><a href="#çŸ¥è¯†å›¾è°±çš„å­˜å‚¨ä¸å…³è”æŸ¥è¯¢" class="headerlink" title="çŸ¥è¯†å›¾è°±çš„å­˜å‚¨ä¸å…³è”æŸ¥è¯¢"></a>çŸ¥è¯†å›¾è°±çš„å­˜å‚¨ä¸å…³è”æŸ¥è¯¢</h2><p>ä½¿ç”¨å…³ç³»å‹æ•°æ®åº“ï¼Œåœ¨è¿›è¡Œè”åˆæŸ¥è¯¢æ—¶ï¼Œè¡¨ä¹‹é—´çš„joinæ“ä½œä¼šè€—è´¹å¤§é‡çš„æ—¶é—´ï¼Œæ•ˆç‡ä½ä¸‹ã€‚</p>
<h3 id="å›¾æ•°æ®åº“çš„æ–‡ä»¶å­˜å‚¨ç»“æ„"><a href="#å›¾æ•°æ®åº“çš„æ–‡ä»¶å­˜å‚¨ç»“æ„" class="headerlink" title="å›¾æ•°æ®åº“çš„æ–‡ä»¶å­˜å‚¨ç»“æ„"></a>å›¾æ•°æ®åº“çš„æ–‡ä»¶å­˜å‚¨ç»“æ„</h3><p><img src="/images/blog/201905/Node.PNG" alt></p>
<ul>
<li>èŠ‚ç‚¹å­˜å‚¨äºç‹¬ç«‹çš„â€èŠ‚ç‚¹å­˜å‚¨æ–‡ä»¶â€œï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„å­˜å‚¨ç©ºé—´å›ºå®šï¼Œå¦‚14å­—èŠ‚ï¼Œä¾¿äºç›´æ¥é€šè¿‡IDç¼–å·è®¡ç®—è·å¾—è®¿é—®åœ°å€ï¼ŒåŸºäºè¿™ç§æ ¼å¼ï¼ŒèŠ‚ç‚¹å­˜å‚¨æˆæœ¬ä¸ºO(1)ï¼Œè€ŒéO(N)</li>
<li>æ¯ä¸ªèŠ‚ç‚¹é¦–å­—èŠ‚æ ‡æ˜æ˜¯å¦inUseï¼Œæ¥ä¸‹æ¥å››ä¸ªå­—èŠ‚å­˜å‚¨è¯¥èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå…³ç³»çš„IDï¼Œè€Œæ¥ä¸‹æ¥å››ä¸ªå­—èŠ‚å­˜å‚¨è¯¥èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå±æ€§çš„IDï¼Œå†æ¥ä¸‹æ¥å››ä¸ªå­—èŠ‚å­˜å‚¨è¯¥èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªLabel IDã€‚</li>
<li>èŠ‚ç‚¹çš„å±æ€§æ•°æ®ï¼ˆå¦‚å§“åã€å¹´é¾„ç­‰ï¼‰æ˜¯åˆ†å¼€å­˜å‚¨çš„ï¼ŒèŠ‚ç‚¹åªå­˜å‚¨å…¶ç¬¬ä¸€ä¸ªå±æ€§çš„IDï¼Œè¿™æ ·çš„è®¾è®¡æ˜¯ä¸ºäº†ä¿è¯èŠ‚ç‚¹éå†çš„é«˜æ•ˆæ€§ã€‚</li>
</ul>
<p><img src="/images/blog/201905/Relationship.PNG" alt></p>
<ul>
<li>å…³ç³»å­˜å‚¨äºç‹¬â½´çš„â€œå…³ç³»å­˜å‚¨â½‚ä»¶â€ï¼Œæ¯ä¸ªå…³ç³»çš„å­˜å‚¨ç©ºé—´å›ºå®šï¼Œå¦‚34å­—èŠ‚ï¼Œå’ŒèŠ‚ç‚¹â¼€ æ ·ï¼Œè¿™ç§è®¾è®¡ä¾¿äºç›´æ¥é€šè¿‡IDç¼–å·è®¡ç®—è·å¾—å…³ç³»çš„è®¿é—®åœ°å€ã€‚ </li>
<li>æ¯ä¸ªèŠ‚ç‚¹â¾¸å­—èŠ‚æ ‡æ˜æ˜¯å¦inUseï¼Œæ¥ä¸‹æ¥å››ä¸ªå­—èŠ‚å­˜å‚¨è¯¥å…³ç³»çš„å¤´èŠ‚ç‚¹IDï¼Œå†æ¥ä¸‹æ¥ å››ä¸ªå­—èŠ‚å­˜å‚¨è¯¥å…³ç³»çš„å°¾èŠ‚ç‚¹IDï¼Œå†æ¥ä¸‹æ¥å››ä¸ªå­—èŠ‚å­˜å‚¨å…³ç³»ç±»å‹IDï¼Œå†ä¸‹â¾¯å­˜å‚¨å¤´èŠ‚ç‚¹å’Œå°¾èŠ‚ç‚¹çš„ä¸Šâ¼€ä¸ªå…³ç³»IDï¼Œä»¥åŠå¤´å°¾èŠ‚ç‚¹çš„ä¸‹â¼€ä¸ªå…³ç³»IDã€‚</li>
</ul>
<h3 id="ç‰©æµæ•°æ®æ¨¡å‹"><a href="#ç‰©æµæ•°æ®æ¨¡å‹" class="headerlink" title="ç‰©æµæ•°æ®æ¨¡å‹"></a>ç‰©æµæ•°æ®æ¨¡å‹</h3><p>å¯ä»¥å°†ç‰©æµæ•°æ®å»ºæ¨¡ä¸ºåŠ¨æ€å›¾è°±ï¼Œåˆ©ç”¨å›¾è°±æŸ¥è¯¢æ“ä½œï¼Œè®¡ç®—æœ€çŸ­è·¯å¾„ã€‚</p>
<p>åŸâ½£å›¾å­˜å‚¨åœ¨å¤æ‚å…³è”æŸ¥è¯¢å’Œå›¾è®¡ç®—æ–¹é¢æœ‰æ€§èƒ½ä¼˜åŠ¿ï¼Œâ¾®åŸâ½£å›¾å­˜å‚¨å…¼å®¹å·²æœ‰â¼¯å…·é›†é€šå¸¸å­¦ä¹ å’Œåè°ƒæˆæœ¬ä¼šä½ã€‚  </p>
<p>å›¾æ•°æ®åº“æœ‰å®ƒå¼±å¤„ï¼Œå‡å¦‚ä½ çš„åº”â½¤åœºæ™¯ä¸åŒ…å«â¼¤é‡çš„å…³è”æŸ¥è¯¢ï¼Œå¯¹äºç®€å•æŸ¥è¯¢ï¼Œä¼ ç»Ÿå…³ç³»æ¨¡å‹ç›®å‰åœ¨æ€§èƒ½æ–¹é¢æ›´åŠ æœ‰ä¼˜åŠ¿ã€‚    </p>
<h2 id="çŸ¥è¯†å›¾è°±çš„è·å–ä¸è¯­ä¹‰å…³ç³»æŠ½å–"><a href="#çŸ¥è¯†å›¾è°±çš„è·å–ä¸è¯­ä¹‰å…³ç³»æŠ½å–" class="headerlink" title="çŸ¥è¯†å›¾è°±çš„è·å–ä¸è¯­ä¹‰å…³ç³»æŠ½å–"></a>çŸ¥è¯†å›¾è°±çš„è·å–ä¸è¯­ä¹‰å…³ç³»æŠ½å–</h2><p>çŸ¥è¯†å›¾è°±å·¥ç¨‹ä»ä¸åŒæ¥æºã€ä¸åŒç»“æ„çš„æ•°æ®ä¸­è¿›è¡ŒçŸ¥è¯†æå–ï¼Œå½¢æˆçŸ¥è¯†å­˜å…¥åˆ°çŸ¥è¯†å›¾è°±ã€‚æ–‡æœ¬ä¸€èˆ¬ä¸ä½œä¸ºçŸ¥è¯†å›¾è°±æ„å»ºçš„åˆå§‹æ¥æºï¼Œè€Œå¤šç”¨æ¥åšçŸ¥è¯†å›¾è°±è¡¥å…¨ã€‚</p>
<p><img src="/images/blog/201905/çŸ¥è¯†å›¾è°±å·¥ç¨‹.PNG" alt></p>
<p>Automatic Content Extraction (ACE)ï¼Œè‡ªåŠ¨å†…å®¹æŠ½å–ï¼Œä¸»è¦åŒ…å«äº”ç§ä»»åŠ¡ï¼š</p>
<ul>
<li>å®ä½“æ£€æµ‹ä¸è¯†åˆ«</li>
<li>æ•°å€¼æ£€æµ‹ä¸è¯†åˆ«</li>
<li>æ—¶é—´è¡¨è¾¾æ£€æµ‹ä¸è¯†åˆ«</li>
<li>å…³ç³»æ£€æµ‹ä¸è¯†åˆ«</li>
<li>äº‹ä»¶æ£€æµ‹ä¸è¯†åˆ«</li>
</ul>
<h3 id="å®ä½“è¯†åˆ«çš„å¸¸ç”¨æ–¹æ³•"><a href="#å®ä½“è¯†åˆ«çš„å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å®ä½“è¯†åˆ«çš„å¸¸ç”¨æ–¹æ³•"></a>å®ä½“è¯†åˆ«çš„å¸¸ç”¨æ–¹æ³•</h3><h4 id="åŸºäºæ¨¡æ¿å’Œè§„åˆ™çš„æ–¹æ³•"><a href="#åŸºäºæ¨¡æ¿å’Œè§„åˆ™çš„æ–¹æ³•" class="headerlink" title="åŸºäºæ¨¡æ¿å’Œè§„åˆ™çš„æ–¹æ³•"></a>åŸºäºæ¨¡æ¿å’Œè§„åˆ™çš„æ–¹æ³•</h4><h4 id="åŸºäºåºåˆ—æ ‡æ³¨çš„æœºå™¨å­¦ä¹ æ–¹æ³•"><a href="#åŸºäºåºåˆ—æ ‡æ³¨çš„æœºå™¨å­¦ä¹ æ–¹æ³•" class="headerlink" title="åŸºäºåºåˆ—æ ‡æ³¨çš„æœºå™¨å­¦ä¹ æ–¹æ³•"></a>åŸºäºåºåˆ—æ ‡æ³¨çš„æœºå™¨å­¦ä¹ æ–¹æ³•</h4><p>åˆ©ç”¨è¯æœ¬èº«çš„ç‰¹å¾ï¼Œå¦‚è¯æ€§ã€ä¾å­˜å…³ç³»ï¼›åˆ©ç”¨å‰åç¼€ç‰¹å¾ï¼Œå¦‚xxçœï¼›åˆ©ç”¨å­—æœ¬èº«çš„ç‰¹å¾ï¼Œå¦‚æ•°å­—ã€‚</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>å¥å­</th>
<th>ç”±</th>
<th>æµ™</th>
<th>æ±Ÿ</th>
<th>å¤§</th>
<th>å­¦</th>
<th>çš„</th>
<th>å¼ </th>
<th>ä¸‰</th>
<th>è¿</th>
<th>æˆ˜</th>
<th>æ¸…</th>
<th>å</th>
<th>å¤§</th>
<th>å­¦</th>
<th>çš„</th>
<th>æ</th>
<th>å››</th>
</tr>
</thead>
<tbody>
<tr>
<td>IOBæ ‡æ³¨</td>
<td>O</td>
<td>B-ORG</td>
<td>I-ORG</td>
<td>I-ORG</td>
<td>I-ORG</td>
<td>O</td>
<td>B-PER</td>
<td>I-PER</td>
<td>O</td>
<td>O</td>
<td>B-ORG</td>
<td>I-ORG</td>
<td>I-ORG</td>
<td>I-ORG</td>
<td>O</td>
<td>B-PER</td>
<td>I-PER</td>
</tr>
<tr>
<td>IOæ ‡æ³¨</td>
<td>O</td>
<td>I-ORG</td>
<td>I-ORG</td>
<td>I-ORG</td>
<td>I-ORG</td>
<td>O</td>
<td>I-PER</td>
<td>I-PER</td>
<td>O</td>
<td>O</td>
<td>I-ORG</td>
<td>I-ORG</td>
<td>I-ORG</td>
<td>I-ORG</td>
<td>O</td>
<td>I-PER</td>
<td>I-PER</td>
</tr>
</tbody>
</table>
</div>
<p><strong>HMM (éšé©¬å°”ç§‘å¤«æ¨¡å‹)</strong></p>
<p>é½æ¬¡é©¬å°”ç§‘å¤«é“¾å‡è®¾ï¼šä»»æ„æ—¶åˆ»çš„éšè—çŠ¶æ€åªä¾èµ–äºå®ƒå‰ä¸€ä¸ªéšè—æ€</p>
<p>è§‚æµ‹ç‹¬ç«‹æ€§å‡è®¾ï¼šä»»æ„æ—¶åˆ»çš„è§‚å¯ŸçŠ¶æ€ä»…ä»…ä¾èµ–äºå½“å‰æ—¶åˆ»çš„éšè—çŠ¶æ€</p>
<p><em>é²å§†-éŸ¦å°”å¥‡ç®—æ³•-EMç®—æ³•</em></p>
<p><em>ç»´ç‰¹æ¯”ç®—æ³•</em></p>
<p><strong>CRF (æ¡ä»¶éšæœºåœº)</strong></p>
<p>æ¡ä»¶éšæœºåœºæ˜¯é©¬å°”ç§‘å¤«éšæœºåœºçš„ç‰¹ä¾‹ã€‚</p>
<p>ä¾‹å¦‚ï¼šå®ä½“è¯†åˆ«ä»»åŠ¡è¦æ±‚å¯¹ä¸€å¥è¯ä¸­çš„åä¸ªè¯åšå®ä½“ç±»å‹æ ‡è®°ï¼Œè¿™åä¸ªè¯å¯ä»¥ä»å¯èƒ½å®ä½“ç±»å‹æ ‡ç­¾ä¸­é€‰æ‹©ï¼Œè¿™å°±å½¢æˆäº†ä¸€ä¸ªéšæœºåœºã€‚å¦‚æœå‡è®¾æŸä¸ªè¯çš„æ ‡ç­¾åªä¸å…¶ç›¸é‚»çš„è¯çš„æ ‡ç­¾æœ‰å…³ï¼Œåˆ™å½¢æˆé©¬å°”ç§‘å¤«éšæœºåœºï¼ŒåŒæ—¶ç”±äºè¿™ä¸ªéšæœºåœºåªæœ‰ä¸¤ç§å˜é‡ï¼Œä»¤Xä¸ºè¯ï¼ŒYä¸ºå®ä½“ç±»å‹æ ‡ç­¾ï¼Œåˆ™å½¢æˆä¸€ä¸ªæ¡ä»¶éšæœºåœºã€‚</p>
<h4 id="åŸºäºæ·±åº¦å­¦ä¹ "><a href="#åŸºäºæ·±åº¦å­¦ä¹ " class="headerlink" title="åŸºäºæ·±åº¦å­¦ä¹ "></a>åŸºäºæ·±åº¦å­¦ä¹ </h4><p><strong>BiLSTM + CRF</strong></p>
<p><img src="/images/blog/201905/BiLSTM_CRF.PNG" alt></p>
<h3 id="åœ¨WordNetä¸­çš„å…³ç³»å¯ä»¥æ€»ç»“å¦‚ä¸‹ï¼š"><a href="#åœ¨WordNetä¸­çš„å…³ç³»å¯ä»¥æ€»ç»“å¦‚ä¸‹ï¼š" class="headerlink" title="åœ¨WordNetä¸­çš„å…³ç³»å¯ä»¥æ€»ç»“å¦‚ä¸‹ï¼š"></a>åœ¨WordNetä¸­çš„å…³ç³»å¯ä»¥æ€»ç»“å¦‚ä¸‹ï¼š</h3><div class="table-container">
<table>
<thead>
<tr>
<th>Relation</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>Synonym åŒä¹‰è¯</td>
<td>day (sense 2) / time</td>
</tr>
<tr>
<td>Antonym åä¹‰è¯</td>
<td>day (sense 4) / night</td>
</tr>
<tr>
<td>Hypernym ä¸Šä½è¯</td>
<td>berry (sense 2) / fruit</td>
</tr>
<tr>
<td>Hyponym ä¸‹ä½è¯</td>
<td>fruit (sense 1) / berry</td>
</tr>
<tr>
<td>Member-of Holonym</td>
<td>Germany / NATO</td>
</tr>
<tr>
<td>Has-member meronym</td>
<td>Germany / Sorbian</td>
</tr>
<tr>
<td>Part-of holonym</td>
<td>Germany / Europe</td>
</tr>
<tr>
<td>Has-part meronym</td>
<td>Germany / Mannheim</td>
</tr>
<tr>
<td>Substance-of holonym</td>
<td>wood(sense 1) / lumber</td>
</tr>
<tr>
<td>Has-substance meronym</td>
<td>lumber(sense 1) / wood</td>
</tr>
<tr>
<td>Domain - TOPIC</td>
<td>line (sense 7) / military</td>
</tr>
<tr>
<td>Domain - USAGE</td>
<td>line (sense 21) / channel</td>
</tr>
<tr>
<td>Domain member - TOPIC</td>
<td>ship / porthole</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>Attribute</td>
<td>speed (sense 2) / fast</td>
</tr>
<tr>
<td>Derived form</td>
<td>speed (sense 2) / quick</td>
</tr>
<tr>
<td>Derived form</td>
<td>speed (sense 2) / accelerate</td>
</tr>
</tbody>
</table>
</div>
<h3 id="å®ä½“å…³ç³»æŠ½å–"><a href="#å®ä½“å…³ç³»æŠ½å–" class="headerlink" title="å®ä½“å…³ç³»æŠ½å–"></a>å®ä½“å…³ç³»æŠ½å–</h3><p>å®ä½“å…³ç³»æŠ½å–æ¦‚è§ˆå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/images/blog/201905/å®ä½“å…³ç³»æŠ½å–æ¦‚è§ˆ.PNG" alt></p>
<p>ç›‘ç£å­¦ä¹ çš„ç‰¹å¾å¯ä»¥åˆ†ä¸ºè½»é‡çº§ç‰¹å¾ï¼Œä¸­ç­‰é‡çº§ç‰¹å¾ï¼Œé‡é‡çº§ç‰¹å¾ã€‚è½»é‡çº§ç‰¹å¾æœ‰å®ä½“å‰åçš„è¯ï¼Œå®ä½“çš„ç±»å‹ï¼Œå®ä½“ä¹‹é—´çš„è·ç¦»ã€‚ä¸­ç­‰é‡çº§ç‰¹å¾å¦‚Chunkåºåˆ—ã€‚é‡é‡çº§ç‰¹å¾å¦‚å®ä½“é—´çš„ä¾å­˜å…³ç³»è·¯å¾„ï¼Œå®ä½“é—´æ ‘ç»“æ„çš„è·ç¦»ï¼Œç‰¹å®šçš„ç»“æ„ä¿¡æ¯ã€‚</p>
<p>åœ¨Bryan Rink et. al ACL 2016ä¸­ï¼Œä½¿ç”¨çš„ç›‘ç£å­¦ä¹ çš„ç‰¹å¾ï¼š</p>
<p><img src="/images/blog/201905/ç›‘ç£å­¦ä¹ ç‰¹å¾ä¸¾ä¾‹.PNG" alt></p>
<h4 id="æœ€å¤§ç†µæ¨¡å‹"><a href="#æœ€å¤§ç†µæ¨¡å‹" class="headerlink" title="æœ€å¤§ç†µæ¨¡å‹"></a>æœ€å¤§ç†µæ¨¡å‹</h4><p>æœ€å¤§ç†µåŸç†è®¤ä¸ºï¼Œå­¦ä¹ æ¦‚ç‡æ¨¡å‹æ—¶ï¼Œåœ¨æ‰€æœ‰å¯èƒ½çš„æ¦‚ç‡æ¨¡å‹ä¸­ï¼Œç†µæœ€å¤§çš„æ¨¡å‹æ˜¯æœ€å¥½çš„æ¨¡å‹ã€‚</p>
<h4 id="æ ¸å‡½æ•°"><a href="#æ ¸å‡½æ•°" class="headerlink" title="æ ¸å‡½æ•°"></a>æ ¸å‡½æ•°</h4><p>å®šä¹‰ï¼šç»™å®šä¸€ä¸ªå¯¹è±¡ç©ºé—´Xï¼Œæ ¸å‡½æ•°K: X * X  -&gt;  [0,$\infty$)è¡¨ç¤ºä¸€ä¸ªäºŒå…ƒå‡½æ•°ï¼Œè¯¥å‡½æ•°å¯ä»¥å°†Xä¸­ä»»æ„çš„ä¸¤ä¸ªå¯¹è±¡x, yä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›äºŒè€…ä¹‹é—´çš„ç›¸ä¼¼åº¦å¾—åˆ†K(x, y)ã€‚</p>
<p>æ ¸å‡½æ•°çš„æ–¹æ³•æ— éœ€äººå·¥æŒ‡å®šç‰¹å¾ã€‚</p>
<p>å¯¹åº”åˆ°å…³ç³»åˆ†ç±»ä»»åŠ¡ï¼Œç»™å®šè¾“å…¥æ–‡æœ¬Tä¸­çš„ä¸¤ä¸ªå®ä½“e1å’Œe2ï¼Œæ ¸å‡½æ•°æ–¹æ³•é‡‡ç”¨ä¸‹è¿°æ–¹æ³•è®¡ç®—è¿™ä¸¤ä¸ªå®ä½“é—´æ»¡è¶³å…³ç³»rçš„ç½®ä¿¡åº¦ï¼š</p>
<ul>
<li>é¦–å…ˆä»æ ‡æ³¨æ•°æ®ä¸­æ‰¾åˆ°æ–‡æœ¬Tâ€™ï¼Œä¸”Tâ€™ä¸­åŒ…å«æ»¡è¶³å…³ç³»rçš„e1â€™å’Œe2â€™ï¼Œç„¶ååŸºäºæ ¸å‡½æ•°è®¡ç®—Tå’ŒTâ€™ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œä½œä¸ºe1å’Œe2æ»¡è¶³å…³ç³»rçš„ç½®ä¿¡åº¦ã€‚</li>
<li>è¯¥åšæ³•èƒŒåçš„æ€æƒ³æ˜¯ï¼šå¦‚æœä¸¤ä¸ªå®ä½“å¯¹åŒæ—¶æ»¡è¶³æŸä¸ªå…³ç³»rï¼Œè¿™ä¸¤ä¸ªå®ä½“å¯¹åˆ†åˆ«æ‰€åœ¨çš„ä¸Šä¸‹æ–‡ä¹Ÿåº”è¯¥ç›¸ä¼¼ï¼Œè¯¥ç›¸ä¼¼é€šè¿‡æ ¸å‡½æ•°è®¡ç®—å¾—åˆ°ã€‚</li>
</ul>
<ol>
<li>å­—ç¬¦ä¸²æ ¸</li>
<li>åŸºäºShallow Parsingæ ¸å‡½æ•°</li>
<li>å¥æ³•æ ‘æ ¸å‡½æ•°</li>
<li>æœ€çŸ­ä¾èµ–è·¯å¾„æ ‘æ ¸å‡½æ•°</li>
<li>ä¸Šä¸‹æ–‡ç›¸å…³æœ€çŸ­è·¯å¾„ä¾èµ–æ ‘æ ¸å‡½æ•°</li>
</ol>
<h4 id="æ·±åº¦å­¦ä¹ "><a href="#æ·±åº¦å­¦ä¹ " class="headerlink" title="æ·±åº¦å­¦ä¹ "></a>æ·±åº¦å­¦ä¹ </h4><h5 id="åŸºäºé€’å½’ç¥ç»ç½‘ç»œRNN"><a href="#åŸºäºé€’å½’ç¥ç»ç½‘ç»œRNN" class="headerlink" title="åŸºäºé€’å½’ç¥ç»ç½‘ç»œRNN"></a>åŸºäºé€’å½’ç¥ç»ç½‘ç»œRNN</h5><p>å¯ä»¥å‚è€ƒè®ºæ–‡</p>
<p><a href="https://ai.stanford.edu/~ang/papers/emnlp12-SemanticCompositionalityRecursiveMatrixVectorSpaces.pdf" target="_blank" rel="noopener">Semantic Compositionality through Recursive Matrix-Vector Spaces</a></p>
<h5 id="åŸºäºCNN"><a href="#åŸºäºCNN" class="headerlink" title="åŸºäºCNN"></a>åŸºäºCNN</h5><p>å¯ä»¥å‚è€ƒè®ºæ–‡</p>
<p><a href="https://www.aclweb.org/anthology/C14-1220" target="_blank" rel="noopener">Relation Classification via Convolutional Deep Neural Network</a></p>
<p>é‡‡ç”¨Piecewise CNN:</p>
<p><a href="http://www.emnlp2015.org/proceedings/EMNLP/pdf/EMNLP203.pdf" target="_blank" rel="noopener">Distant Supervision for Relation Extraction via Piecewise Convolutional Neural Networks</a></p>
<p>é‡‡ç”¨Ranking CNN:</p>
<p><a href="https://www.aclweb.org/anthology/P15-1061" target="_blank" rel="noopener">Classifying Relations by Ranking with Convolutional Neural Networks</a></p>
<h5 id="Attention-BiLSTM"><a href="#Attention-BiLSTM" class="headerlink" title="Attention + BiLSTM"></a>Attention + BiLSTM</h5><p>å‚è€ƒè®ºæ–‡</p>
<p><a href="https://www.aclweb.org/anthology/P16-2034" target="_blank" rel="noopener">Attention-Based Bidirectional Long Short Term Memory Networks for Relation Classification</a></p>
<h5 id="è·¨å¥æ¨ç†"><a href="#è·¨å¥æ¨ç†" class="headerlink" title="è·¨å¥æ¨ç†"></a>è·¨å¥æ¨ç†</h5><p>å¯ä»¥å‚è€ƒè®ºæ–‡</p>
<p><a href="https://www.aclweb.org/anthology/D17-1186" target="_blank" rel="noopener">Incorporating Relation Paths in Neural Relation Extraction</a></p>
<h5 id="å¤šå…ƒå…³ç³»"><a href="#å¤šå…ƒå…³ç³»" class="headerlink" title="å¤šå…ƒå…³ç³»"></a>å¤šå…ƒå…³ç³»</h5><p>å¯ä»¥å‚è€ƒè®ºæ–‡</p>
<p><a href="https://arxiv.org/pdf/1708.03743.pdf" target="_blank" rel="noopener">Cross-Sentence N-ary Relation Extraction with Graph LSTMs</a></p>
<h5 id="è”åˆæŠ½å–"><a href="#è”åˆæŠ½å–" class="headerlink" title="è”åˆæŠ½å–"></a>è”åˆæŠ½å–</h5><p>åŸºäºåºåˆ—æ ‡æ³¨çš„ç«¯åˆ°ç«¯æ¨¡å‹</p>
<p><a href="https://arxiv.org/pdf/1706.05075.pdf" target="_blank" rel="noopener">Joint Extraction of Entities and Relations Based on a Novel Tagging Scheme</a></p>
<p>åŸºäºåºåˆ—å’Œæ ‘ç»“æ„çš„LSTMæ¨¡å‹</p>
<p><a href="https://www.aclweb.org/anthology/P16-1105" target="_blank" rel="noopener">End-to-End Relation Extraction using LSTMs on Sequences and Tree Structures</a></p>
<h5 id="è¿œç¨‹ç›‘ç£é™å™ª"><a href="#è¿œç¨‹ç›‘ç£é™å™ª" class="headerlink" title="è¿œç¨‹ç›‘ç£é™å™ª"></a>è¿œç¨‹ç›‘ç£é™å™ª</h5><p>ç»™bagä¸­çš„å¥å­ä¸åŒçš„attention</p>
<p><a href="https://www.aaai.org/ocs/index.php/AAAI/AAAI17/paper/view/14491/14078" target="_blank" rel="noopener">Distant Supervision for Relation Extraction with Sentence-Level Attention and Entity Descriptions</a></p>
<p>å¼ºåŒ–å­¦ä¹ è®­ç»ƒå¥å­é€‰æ‹©å™¨</p>
<p><a href="https://www.aaai.org/ocs/index.php/AAAI/AAAI18/paper/download/17151/16140" target="_blank" rel="noopener">Reinforcement Learning for Relation Classification from Noisy Data</a></p>
<h3 id="å¼€æ”¾åŸŸå…³ç³»æŠ½å–-Open-IE"><a href="#å¼€æ”¾åŸŸå…³ç³»æŠ½å–-Open-IE" class="headerlink" title="å¼€æ”¾åŸŸå…³ç³»æŠ½å– Open IE"></a>å¼€æ”¾åŸŸå…³ç³»æŠ½å– Open IE</h3><h4 id="åŸºäºæ¨¡æ¿ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰"><a href="#åŸºäºæ¨¡æ¿ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰" class="headerlink" title="åŸºäºæ¨¡æ¿ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰"></a>åŸºäºæ¨¡æ¿ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰</h4><h4 id="Bootstrapping"><a href="#Bootstrapping" class="headerlink" title="Bootstrapping"></a>Bootstrapping</h4><p>ç»™å®šç§å­é›†åˆï¼Œå¦‚&lt;å§šæ˜ï¼Œå¶è‰&gt;</p>
<p>ä»æ–‡æ¡£ä¸­æŠ½å–å‡ºåŒ…å«ç§å­å®ä½“çš„æ–°é—»ï¼Œå¦‚ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>å¥å­</th>
<th>æ¨¡æ¿</th>
</tr>
</thead>
<tbody>
<tr>
<td>å§šæ˜è€å©†å¶è‰ç®€å†æ›å…‰</td>
<td>Xè€å©†Yç®€å†æ›å…‰</td>
</tr>
<tr>
<td>å§šæ˜ä¸å¦»å­å¶è‰å¤–å‡ºèµ´çº¦</td>
<td>Xä¸å¦»å­Yå¤–å‡ºèµ´çº¦</td>
</tr>
<tr>
<td>å§šæ˜æºçˆ±å¦»å¶è‰å¤–å‡ºèµ´çº¦</td>
<td>Xæºçˆ±å¦»Yå¤–å‡ºèµ´çº¦</td>
</tr>
</tbody>
</table>
</div>
<p>å°†æŠ½å–å‡ºçš„Patternä¸æ–‡æ¡£é›†åŒ¹é…</p>
<ul>
<li>å°çŒªä¸å¦»å­ä¼Šä¸‡å¤–å‡ºèµ´çº¦</li>
</ul>
<p>æ ¹æ®PatternæŠ½å–å‡ºçš„æ–°æ–‡æ¡£åŠ å…¥ç§å­åº“ï¼Œè¿­ä»£å¤šè½®ç›´è‡³ä¸ç¬¦åˆæ¡ä»¶</p>
<h2 id="çŸ¥è¯†å›¾è°±ä¸å…³ç³»æ¨ç†"><a href="#çŸ¥è¯†å›¾è°±ä¸å…³ç³»æ¨ç†" class="headerlink" title="çŸ¥è¯†å›¾è°±ä¸å…³ç³»æ¨ç†"></a>çŸ¥è¯†å›¾è°±ä¸å…³ç³»æ¨ç†</h2><h3 id="Deductive-Reasoning-over-Konwledge-Graph"><a href="#Deductive-Reasoning-over-Konwledge-Graph" class="headerlink" title="Deductive Reasoning over Konwledge Graph"></a>Deductive Reasoning over Konwledge Graph</h3><p>RDFS: Simple Vocabulary and Schema</p>
<h4 id="OWLæœ¬ä½“æ¨ç†"><a href="#OWLæœ¬ä½“æ¨ç†" class="headerlink" title="OWLæœ¬ä½“æ¨ç†"></a>OWLæœ¬ä½“æ¨ç†</h4><p>åŸºäºTableauxè¿ç®—çš„æ–¹æ³•</p>
<h4 id="åŸºäºé€»è¾‘ç¼–ç¨‹æ”¹å†™çš„æ–¹æ³•"><a href="#åŸºäºé€»è¾‘ç¼–ç¨‹æ”¹å†™çš„æ–¹æ³•" class="headerlink" title="åŸºäºé€»è¾‘ç¼–ç¨‹æ”¹å†™çš„æ–¹æ³•"></a>åŸºäºé€»è¾‘ç¼–ç¨‹æ”¹å†™çš„æ–¹æ³•</h4><p>Datalogè¯­è¨€ï¼Œé¢å‘çŸ¥è¯†åº“å’Œæ•°æ®åº“è®¾è®¡çš„é€»è¾‘è¯­è¨€</p>
<h4 id="åŸºäºäº§ç”Ÿå¼è§„åˆ™çš„æ–¹æ³•"><a href="#åŸºäºäº§ç”Ÿå¼è§„åˆ™çš„æ–¹æ³•" class="headerlink" title="åŸºäºäº§ç”Ÿå¼è§„åˆ™çš„æ–¹æ³•"></a>åŸºäºäº§ç”Ÿå¼è§„åˆ™çš„æ–¹æ³•</h4><p>äº§ç”Ÿå¼ç³»ç»Ÿç”±äº‹å®é›†ï¼Œäº§ç”Ÿå¼é›†åˆï¼Œæ¨ç†å¼•æ“æ„æˆã€‚</p>
<h3 id="Inductive-Reasoning-over-Knowledge-Graph"><a href="#Inductive-Reasoning-over-Knowledge-Graph" class="headerlink" title="Inductive Reasoning over Knowledge Graph"></a>Inductive Reasoning over Knowledge Graph</h3><h4 id="è¯å‘é‡å­¦ä¹ æ¨¡å‹"><a href="#è¯å‘é‡å­¦ä¹ æ¨¡å‹" class="headerlink" title="è¯å‘é‡å­¦ä¹ æ¨¡å‹"></a>è¯å‘é‡å­¦ä¹ æ¨¡å‹</h4><p>è¯å‘é‡å­¦ä¹ æ¨¡å‹æœ‰CBoWï¼ŒSkip-gramç­‰</p>
<h4 id="çŸ¥è¯†å›¾è°±åµŒå…¥"><a href="#çŸ¥è¯†å›¾è°±åµŒå…¥" class="headerlink" title="çŸ¥è¯†å›¾è°±åµŒå…¥"></a>çŸ¥è¯†å›¾è°±åµŒå…¥</h4><p>ä¸ºçŸ¥è¯†å›¾è°±ä¸­çš„æ¯ä¸ªå®ä½“å’Œå…³ç³»éƒ½å­¦ä¹ ä¸€ä¸ªå‘é‡è¡¨ç¤ºï¼Œå°†ç¦»æ•£çš„ç¬¦å·è¡¨ç¤ºè½¬åŒ–ä¸ºè¿ç»­çš„å‘é‡è¡¨ç¤ºã€‚</p>
<h5 id="åµŒå…¥æ¨¡å‹ï¼šTransE"><a href="#åµŒå…¥æ¨¡å‹ï¼šTransE" class="headerlink" title="åµŒå…¥æ¨¡å‹ï¼šTransE"></a>åµŒå…¥æ¨¡å‹ï¼šTransE</h5><p>h + r = t</p>
<p>å‚è€ƒè®ºæ–‡</p>
<p><a href="https://www.utc.fr/~bordesan/dokuwiki/_media/en/transe_nips13.pdf" target="_blank" rel="noopener">Translating Embeddings for Modeling Multi-relational Data</a></p>
<h5 id="åµŒå…¥æ¨¡å‹ï¼šDistMult"><a href="#åµŒå…¥æ¨¡å‹ï¼šDistMult" class="headerlink" title="åµŒå…¥æ¨¡å‹ï¼šDistMult"></a>åµŒå…¥æ¨¡å‹ï¼šDistMult</h5><p>å‚è€ƒè®ºæ–‡</p>
<p><a href="https://arxiv.org/pdf/1412.6575.pdf" target="_blank" rel="noopener">Embedding Entities and Relations for Learning and Inference in Knowledge Bases</a></p>
<p>h * Mr = t</p>
<h5 id="åµŒå…¥æ¨¡å‹ï¼šTransH"><a href="#åµŒå…¥æ¨¡å‹ï¼šTransH" class="headerlink" title="åµŒå…¥æ¨¡å‹ï¼šTransH"></a>åµŒå…¥æ¨¡å‹ï¼šTransH</h5><p>å‚è€ƒè®ºæ–‡</p>
<p><a href="https://pdfs.semanticscholar.org/2a3f/862199883ceff5e3c74126f0c80770653e05.pdf" target="_blank" rel="noopener">Knowledge Graph Embedding by Translating on Hyperplanes</a></p>
<h5 id="åµŒå…¥æ¨¡å‹ï¼šTransR"><a href="#åµŒå…¥æ¨¡å‹ï¼šTransR" class="headerlink" title="åµŒå…¥æ¨¡å‹ï¼šTransR"></a>åµŒå…¥æ¨¡å‹ï¼šTransR</h5><p>å‚è€ƒè®ºæ–‡</p>
<p><a href="https://www.aaai.org/ocs/index.php/AAAI/AAAI15/paper/download/9571/9523" target="_blank" rel="noopener">Learning Entity and Relation Embeddings for Knowledge Graph Completion</a></p>
<h5 id="åµŒå…¥æ¨¡å‹ï¼šTransD"><a href="#åµŒå…¥æ¨¡å‹ï¼šTransD" class="headerlink" title="åµŒå…¥æ¨¡å‹ï¼šTransD"></a>åµŒå…¥æ¨¡å‹ï¼šTransD</h5><p>å‚è€ƒè®ºæ–‡</p>
<p><a href="https://www.aclweb.org/anthology/P15-1067" target="_blank" rel="noopener">Knowledge Graph Embedding via Dynamic Mapping Matrix</a></p>
<p>è¿˜æœ‰åµŒå…¥æ¨¡å‹å¦‚PTransEï¼Œè§„åˆ™å¢å¼ºï¼Œå¤šæ¨¡æ€çŸ¥è¯†å›¾è°±ï¼ŒåŸºäºå¼ºåŒ–å­¦ä¹ çš„DeepPathç­‰ç­‰å¾ˆå¤š</p>
<h2 id="çŸ¥è¯†å›¾è°±ä¸æ™ºèƒ½é—®ç­”"><a href="#çŸ¥è¯†å›¾è°±ä¸æ™ºèƒ½é—®ç­”" class="headerlink" title="çŸ¥è¯†å›¾è°±ä¸æ™ºèƒ½é—®ç­”"></a>çŸ¥è¯†å›¾è°±ä¸æ™ºèƒ½é—®ç­”</h2><p>åŸºæœ¬æ¦‚å¿µï¼šé—®é¢˜ç±»å‹</p>
<ul>
<li>äº‹å®æ€§é—®é¢˜<ul>
<li>è°“è¯å‹é—®é¢˜ï¼šWhere is Taj Mahal?</li>
<li>åˆ—è¡¨å‹é—®é¢˜ï¼šGive me all cities in Germany.</li>
<li>æœ€é«˜çº§å‹é—®é¢˜ï¼šWhat is the highest mountain?</li>
<li>å¯¹é”™å‹é—®é¢˜ï¼šWas Margaret Thatcher a Chemist?</li>
</ul>
</li>
<li>è§‚ç‚¹å‹é—®é¢˜ï¼šWhat do most Americans think of gun control?</li>
<li>å› æœå‹é—®é¢˜ï¼šWhat is the most frequent cause for lung cancer?</li>
<li>æ–¹æ³•å‹é—®é¢˜ï¼šHow do I make a cheese cake?</li>
<li>è§£é‡Šå‹é—®é¢˜ï¼šWhy did the revenue of IBM drop?</li>
<li>å…³è”å‹é—®é¢˜ï¼šWhat is the connection between Barack Obama and Indonesia?</li>
<li>æ¯”è¾ƒå‹é—®é¢˜ï¼šWhat is the difference between impressionism and expressionism?</li>
</ul>
<h3 id="çŸ¥è¯†å›¾è°±é—®ç­”çš„ä¸»è¦æ–¹æ³•"><a href="#çŸ¥è¯†å›¾è°±é—®ç­”çš„ä¸»è¦æ–¹æ³•" class="headerlink" title="çŸ¥è¯†å›¾è°±é—®ç­”çš„ä¸»è¦æ–¹æ³•"></a>çŸ¥è¯†å›¾è°±é—®ç­”çš„ä¸»è¦æ–¹æ³•</h3><h4 id="åŸºäºæ¨¡æ¿çš„æ–¹æ³•"><a href="#åŸºäºæ¨¡æ¿çš„æ–¹æ³•" class="headerlink" title="åŸºäºæ¨¡æ¿çš„æ–¹æ³•"></a>åŸºäºæ¨¡æ¿çš„æ–¹æ³•</h4><p>æ¨¡æ¿å®šä¹‰ï¼Œæ¨¡æ¿ç”Ÿæˆï¼Œæ¨¡æ¿åŒ¹é…</p>
<p>æ–¹æ³•çš„ä¸¤ä¸ªé‡è¦æ­¥éª¤ï¼Œä¸€æ˜¯æ¨¡æ¿ç”Ÿæˆï¼Œå³æ ¹æ®é—®é¢˜é€‰æ‹©ç›¸åº”çš„æ¨¡æ¿ï¼›äºŒæ˜¯æ¨¡æ¿å®ä¾‹åŒ–ã€‚</p>
<p>æ¨¡æ¿ç³»ç»ŸTBSLæ¶æ„ï¼š</p>
<p><img src="/images/blog/201905/TBSLæ¶æ„.PNG" alt></p>
<h4 id="åŸºäºè¯­ä¹‰è§£æçš„æ–¹æ³•"><a href="#åŸºäºè¯­ä¹‰è§£æçš„æ–¹æ³•" class="headerlink" title="åŸºäºè¯­ä¹‰è§£æçš„æ–¹æ³•"></a>åŸºäºè¯­ä¹‰è§£æçš„æ–¹æ³•</h4><p>ä¸¤ä¸ªå…³é”®é—®é¢˜ï¼šä¸€æ˜¯è·å¾—çŸ­è¯­åˆ°èµ„æºçš„æ˜ å°„ï¼Œå³èµ„æºæ˜ å°„ï¼›äºŒæ˜¯å¦‚ä½•è§£å†³æ–‡æœ¬çš„æ­§ä¹‰ï¼Œå³é€»è¾‘è¡¨è¾¾å¼ã€‚</p>
<p>èµ„æºæ˜ å°„ï¼šå°†è‡ªç„¶è¯­è¨€çŸ­è¯­æˆ–å•è¯èŠ‚ç‚¹æ˜ å°„åˆ°çŸ¥è¯†åº“çš„å®ä½“æˆ–å®ä½“å…³ç³»ã€‚å¯ä»¥é€šè¿‡æ„é€ ä¸€ä¸ªè¯æ±‡è¡¨æ¥å®Œæˆè¿™æ ·çš„æ˜ å°„ã€‚ç®€å•æ˜ å°„å¯ä»¥é€šè¿‡å­—ç¬¦ä¸²ç›¸ä¼¼åº¦åŒ¹é…ï¼›å¤æ‚æ˜ å°„å¯ä»¥é‡‡ç”¨ç»Ÿè®¡æ–¹æ³•ã€‚</p>
<h4 id="åŸºäºæ·±åº¦å­¦ä¹ çš„æ–¹æ³•"><a href="#åŸºäºæ·±åº¦å­¦ä¹ çš„æ–¹æ³•" class="headerlink" title="åŸºäºæ·±åº¦å­¦ä¹ çš„æ–¹æ³•"></a>åŸºäºæ·±åº¦å­¦ä¹ çš„æ–¹æ³•</h4><p>KBQAä¸æ·±åº¦å­¦ä¹ ç»“åˆï¼Œåˆ©ç”¨æ·±åº¦å­¦ä¹ å¯¹äºä¼ ç»Ÿé—®ç­”æ–¹æ³•è¿›è¡Œæ”¹è¿›ï¼ŒåŸºäºæ·±åº¦å­¦ä¹ çš„End2Endæ¨¡å‹ã€‚</p>
<p>ä¾‹å¦‚ï¼ŒBordes et al. 2014</p>
<p><img src="/images/blog/201905/ç«¯åˆ°ç«¯KBQA.PNG" alt></p>
<p>æ·±åº¦å­¦ä¹ ç›®å‰åªèƒ½å¤„ç†ç®€å•é—®é¢˜å’Œå•è¾¹å…³ç³»é—®é¢˜ã€‚</p>
<p>åŸºäºelasticsearchçš„KBQAå®è·µè¿˜ä¸é”™~</p>
]]></content>
      <categories>
        <category>Knowledge Graph</category>
      </categories>
      <tags>
        <tag>çŸ¥è¯†å›¾è°±</tag>
        <tag>å…³ç³»æŠ½å–</tag>
        <tag>ç¬”è®°</tag>
        <tag>KBQA</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ©ç”¨Kerasæ­å»ºå¤šè¾“å…¥CNN</title>
    <url>/2019/05/24/%E5%88%A9%E7%94%A8Keras%E6%90%AD%E5%BB%BA%E5%A4%9A%E8%BE%93%E5%85%A5CNN/</url>
    <content><![CDATA[<p>Kerasæ˜¯ä¸€ç§æ¯”è¾ƒé«˜é˜¶çš„å°è£…ï¼Œæ˜¯ä¸€ç§æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œå…¶å¯ä»¥æ¶æ„åœ¨Tensorflow, Theanoç­‰å¤šç§æ¡†æ¶ä¸Šï¼Œä¾¿äºå¿«é€Ÿçš„ä¸Šæ‰‹å’Œå¼€å‘ã€‚</p>
<p>åœ¨è¿™é‡Œï¼Œåˆ©ç”¨KerasåŠ¨æ‰‹æ­å»ºä¸€ä¸ªCNNæ¨¡å‹ï¼ŒKerasæ¨¡å‹å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ­å»ºï¼Œä¸€æ˜¯ç›´æ¥é‡‡ç”¨keras.model.sequentialæ­å»ºæ¨¡å‹ï¼Œè¿™æ ·ç®€å•æ¸…æ™°ï¼›äºŒæ˜¯åˆ©ç”¨å‡½æ•°å¼APIæ­å»ºï¼Œå‡½æ•°å¼APIä¸»è¦ç”¨äºæ­å»ºå¤æ‚æ¨¡å‹ï¼Œå…·æœ‰æ›´é«˜çš„çµæ´»æ€§ã€‚</p>
<p>åœ¨æˆ‘åšçš„å®éªŒä¸­ï¼Œæ˜¯è¦å®ç°ä¸€ä¸ªå…³ç³»æŠ½å–çš„æ¨¡å‹ï¼Œæœ‰ä¸¤ä¸ªè¾“å…¥ï¼Œä¸€ä¸ªä¸»è¾“å…¥ï¼Œä¸€ä¸ªè¾…è¾“å…¥ï¼Œå› æ­¤ä½¿ç”¨å‡½æ•°å¼APIè¿›è¡Œç¼–ç¨‹ã€‚</p>
<p>æ¨¡å‹çš„ç»“æ„å›¾ä¸ºï¼š</p>
<p><img src="/images/blog/201905/model.png" alt></p>
<a id="more"></a>
<p>å…¶å¯¹åº”çš„ä»£ç ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> Model</span><br><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> Conv1D, GlobalMaxPooling1D</span><br><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> Dense, Input, concatenate</span><br><span class="line"><span class="keyword">from</span> keras.utils <span class="keyword">import</span> plot_model</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cnn_model</span><span class="params">()</span>:</span></span><br><span class="line">	main_input = Input(shape=(<span class="literal">None</span>, <span class="number">300</span>))</span><br><span class="line">	</span><br><span class="line">	x = Conv1D(<span class="number">200</span>, kernel_size=<span class="number">3</span>)(main_input)  <span class="comment"># å·ç§¯å±‚</span></span><br><span class="line">	x = GlobalMaxPooling1D()(x)  </span><br><span class="line">	x = Dense(<span class="number">100</span>, activation=<span class="string">'tanh'</span>)(x)</span><br><span class="line">    </span><br><span class="line">	addt_input = Input(shape=(<span class="number">300</span>, ))  <span class="comment"># è¾…åŠ©è¾“å…¥</span></span><br><span class="line">	x = concatenate([addt_input, x])</span><br><span class="line">	output = Dense(<span class="number">19</span>, activation=<span class="string">'softmax'</span>)(x)</span><br><span class="line"></span><br><span class="line">	model = Model(inputs=[main_input, addt_input], outputs=[output])  <span class="comment"># å¤šè¾“å…¥å•è¾“å‡º</span></span><br><span class="line">	model.summary()  <span class="comment"># æ¨¡å‹æ¦‚è§ˆ</span></span><br><span class="line">	<span class="keyword">return</span> model</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">	model = cnn_model()</span><br><span class="line">	plot_model(model, <span class="string">'model.png'</span>)  <span class="comment"># ç»˜åˆ¶æ¨¡å‹ç»“æ„å›¾</span></span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆï¼Œè¾“å…¥çš„å¼ é‡å½¢å¼ä¸º(batchsize, None, 300)ï¼Œè¿™é‡ŒNoneè¡¨ç¤ºå¤§å°ä¸å®šï¼Œæ˜¯ä¸€ä¸ªå˜é‡ã€‚åœ¨æˆ‘åšçš„å…³ç³»æŠ½å–å®éªŒä¸­ï¼ŒNoneè¡¨ç¤ºå˜é•¿çš„å¥å­é•¿åº¦ã€‚</p>
<p>ç»è¿‡å·ç§¯æ“ä½œï¼Œå·ç§¯æ ¸ä¸ªæ•°ä¸º200ï¼Œå¼ é‡çš„å½¢å¼å˜ä¸º(batchsize, None - 2, 200)ï¼Œç”±äºå·ç§¯æ“ä½œçš„è¿›è¡Œï¼Œå¥å­çš„é•¿åº¦å˜ä¸ºNone - 3 + 1ï¼Œè€Œæ¯ä¸€ä¸ªå·ç§¯æ ¸ç”Ÿæˆäº†ä¸€ä¸ªç‰¹å¾å‘é‡ï¼Œå› æ­¤å…±200ä¸ªã€‚</p>
<p>ç„¶åå¯¹äºæ¯ä¸€ä¸ªå·ç§¯æ ¸ç”Ÿæˆçš„å‘é‡ï¼Œè¿›è¡Œå…¨å±€æœ€å¤§æ± åŒ–ï¼Œè¿™æ ·ï¼Œå¾—åˆ°çš„å¼ é‡å°±ä¸å†ä¸å¥å­é•¿åº¦æœ‰å…³ã€‚</p>
<p>â€¦â€¦</p>
<p>é€šè¿‡model.summary()ï¼Œå¯ä»¥ç›´æ¥çœ‹åˆ°æ¨¡å‹çš„æ¦‚è¿°ï¼Œå¦‚å›¾ï¼š</p>
<p><img src="/images/blog/201905/summary.png" alt></p>
<p>æ¯ä¸€å±‚çš„å¼ é‡å½¢å¼å‡å¾—åˆ°æ¸…æ™°åœ°æè¿°ï¼Œè€Œä¸”çœ‹åˆ°å…±éœ€è®­ç»ƒçš„å‚æ•°ä¸º207,919ä¸ªã€‚</p>
<p>è¿™ä¸ªCNNæ¨¡å‹æ˜¯å¯¹<a href="https://www.aclweb.org/anthology/C14-1220" target="_blank" rel="noopener">Relation Classification via Convolutional Deep Neural Network</a>çš„ä¸€ç§å®ç°ï¼Œåˆ©ç”¨è¿™ä¸ªæ¨¡å‹ï¼Œå¯ä»¥å®ç°å…³ç³»åˆ†ç±»ï¼Œè¿›è¡Œä¸€äº›å…³ç³»æŠ½å–ä»»åŠ¡ã€‚</p>
]]></content>
      <categories>
        <category>Neural Networks</category>
      </categories>
      <tags>
        <tag>ç¥ç»ç½‘ç»œ</tag>
        <tag>Keras</tag>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Must-read papers on NRE</title>
    <url>/2019/04/17/Must-read-papers-on-NRE/</url>
    <content><![CDATA[<p>NRE: Neural Relation Extractionï¼Œå³å…³ç³»æŠ½å–ï¼Œè¿™ç¯‡æ–‡ç« æ¥è‡ªäºï¼š<a href="https://github.com/thunlp/NREPapers" target="_blank" rel="noopener">THU_NLP</a></p>
<h2 id="Survey-Papers"><a href="#Survey-Papers" class="headerlink" title="Survey Papers"></a>Survey Papers</h2><ol>
<li><p><strong>A Survey of Deep Learning Methods for Relation Extraction.</strong></p>
<p><em>Shantanu Kumar.</em><br>2017.<br><a href="https://arxiv.org/pdf/1705.03645.pdf" target="_blank" rel="noopener">paper</a></p>
</li>
<li><p><strong>Relation Extraction : A Survey.</strong><br><em>Sachin Pawara,b, Girish K. Palshikara, Pushpak Bhattacharyyab.</em><br>2017.<br><a href="https://arxiv.org/pdf/1712.05191.pdf" target="_blank" rel="noopener">paper</a></p>
</li>
</ol>
<a id="more"></a>
<h2 id="Datasets"><a href="#Datasets" class="headerlink" title="Datasets"></a>Datasets</h2><h3 id="Supervised-Datasets"><a href="#Supervised-Datasets" class="headerlink" title="Supervised Datasets"></a>Supervised Datasets</h3><ol>
<li><strong>ACE 2005 Dataset</strong> <a href="https://catalog.ldc.upenn.edu/LDC2006T06" target="_blank" rel="noopener">link</a></li>
<li><strong>SemEval-2010 Task 8 Dataset</strong> <a href="http://semeval2.fbk.eu/semeval2.php?location=tasks#T11" target="_blank" rel="noopener">link</a></li>
</ol>
<h3 id="Distantly-Supervised-Datasets"><a href="#Distantly-Supervised-Datasets" class="headerlink" title="Distantly Supervised Datasets"></a>Distantly Supervised Datasets</h3><ol>
<li><strong>NYT Dataset</strong> <a href="http://iesl.cs.umass.edu/riedel/ecml/" target="_blank" rel="noopener">link</a></li>
</ol>
<h3 id="Few-shot-Datasets"><a href="#Few-shot-Datasets" class="headerlink" title="Few-shot Datasets"></a>Few-shot Datasets</h3><ol>
<li><p><strong>FewRel: A Large-Scale Supervised Few-Shot Relation Classification Dataset with State-of-the-Art Evaluation</strong><br><em>Xu Han, Hao Zhu, Pengfei Yu, Ziyun Wang, Yuan Yao, Zhiyuan Liu, Maosong Sun</em><br>EMNLP 2018.<br><a href="http://aclweb.org/anthology/D18-1514" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>We present a Few-Shot Relation Classification Dataset (FewRel), consisting of 70,000 sentences on 100 relations derived from Wikipedia and annotated by crowdworkers.</p>
</blockquote>
</li>
</ol>
<h2 id="Word-Vector-Tools"><a href="#Word-Vector-Tools" class="headerlink" title="Word Vector Tools"></a>Word Vector Tools</h2><ol>
<li><strong>Word2vec</strong> <a href="code.google.com/p/word2vec">link</a></li>
<li><strong>GloVe</strong> <a href="https://nlp.stanford.edu/projects/glove/" target="_blank" rel="noopener">link</a></li>
</ol>
<h2 id="Journal-and-Conference-papers"><a href="#Journal-and-Conference-papers" class="headerlink" title="Journal and Conference papers:"></a>Journal and Conference papers:</h2><h3 id="Supervised-Datasets-1"><a href="#Supervised-Datasets-1" class="headerlink" title="Supervised Datasets"></a>Supervised Datasets</h3><ol>
<li><p><strong>SemEval-2010 Task 8: Multi-Way Classification of Semantic Relations Between Pairs of Nominals.</strong><br><em>Iris Hendrickx , Su Nam Kim, Zornitsa Kozareva, Preslav Nakov, Diarmuid O Ì Se Ìaghdha, Sebastian Pado Ì, Marco Pennacchiotti, Lorenza Romano, Stan Szpakowicz.</em><br>Workshop on Semantic Evaluations, ACL 2009<br><a href="http://delivery.acm.org/10.1145/1630000/1621986/p94-hendrickx.pdf?ip=133.130.111.179&amp;id=1621986&amp;acc=OPEN&amp;key=4D4702B0C3E38B35%2E4D4702B0C3E38B35%2E4D4702B0C3E38B35%2E6D218144511F3437&amp;__acm__=1536636784_f0b60686e8866c0c08f63436f3ed81eb" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>This leads us to introduce a new task, which will be part of SemEval-2010: multi-way classification of mutually exclusive semantic relations between pairs of common nominals.</p>
</blockquote>
</li>
</ol>
<h3 id="Distantly-Supervised-Datasets-and-Training-Methods"><a href="#Distantly-Supervised-Datasets-and-Training-Methods" class="headerlink" title="Distantly Supervised Datasets and Training Methods"></a>Distantly Supervised Datasets and Training Methods</h3><ol>
<li><p><strong>Learning to Extract Relations from the Web using Minimal Supervision.</strong><br><em>Razvan C. Bunescu, Department of Computer Sciences.</em><br>ACL 2007.<br><a href="http://www.aclweb.org/anthology/P07-1073" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>We present a new approach to relation extraction that requires only a handful of training examples. Given a few pairs of named entities known to exhibit or not exhibit a particular relation, bags of sentences containing the pairs are extracted from the web.</p>
</blockquote>
</li>
<li><p><strong>Distant Supervision for Relation Extraction without Labeled Data.</strong><br><em>Mike Mintz, Steven Bills, Rion Snow, Dan Jurafsky.</em><br>ACL-IJCNLP 2009.<br><a href="https://www.aclweb.org/anthology/P09-1113" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>Our experiments use Freebase, a large semantic database of several thousand relations, to provide distant supervision.</p>
</blockquote>
</li>
<li><p><strong>Modeling Relations and Their Mentions without Labeled Text.</strong><br><em>Sebastian Riedel, Limin Yao, Andrew McCallum.</em><br>ECML 2010.<br><a href="https://link.springer.com/content/pdf/10.1007%2F978-3-642-15939-8_10.pdf" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>We present a novel approach to distant supervision that can alleviate this problem based on the following two ideas: First, we use a factor graph to explicitly model the decision whether two entities are related, and the decision whether this relation is mentioned in a given sentence; second, we apply constraint-driven semi-supervision to train this model without any knowledge about which sentences express the relations in our training KB.</p>
</blockquote>
</li>
<li><p><strong>Knowledge-Based Weak Supervision for Information Extraction of Overlapping Relations.</strong><br><em>Raphael Hoffmann, Congle Zhang, Xiao Ling, Luke Zettlemoyer, Daniel S. Weld.</em><br>ACL-HLT 2011.<br><a href="http://www.aclweb.org/anthology/P11-1055" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>This paper presents a novel approach for multi-instance learning with overlapping re- lations that combines a sentence-level extrac- tion model with a simple, corpus-level compo- nent for aggregating the individual facts.</p>
</blockquote>
</li>
</ol>
<h3 id="Embeddings"><a href="#Embeddings" class="headerlink" title="Embeddings"></a>Embeddings</h3><ol>
<li><p><strong>Distributed Representations of Words and Phrases and their Compositionality.</strong><br><em>Tomas Mikolov, Ilya Sutskever, Kai Chen, Greg Corrado, Jeffrey Dean.</em><br>NIPS 2013.<br><a href="https://papers.nips.cc/paper/5021-distributed-representations-of-words-and-phrases-and-their-compositionality.pdf" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>In this paper we present several extensions that improve both the quality of the vectors and the training speed. By subsampling of the frequent words we obtain significant speedup and also learn more regular word representations. We also describe a simple alternative to the hierarchical softmax called negative sampling.</p>
</blockquote>
</li>
<li><p><strong>GloVe: Global Vectors for Word Representation.</strong><br><em>Jeffrey Pennington, Richard Socher, Christopher D. Manning.</em><br>EMNLP 2014.<br><a href="http://www.aclweb.org/anthology/D14-1162" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>The result is a new global log-bilinear regression model that combines the advantages of the two major model families in the literature: global matrix factorization and local context window methods.    </p>
</blockquote>
</li>
</ol>
<h3 id="Neural-Encoders"><a href="#Neural-Encoders" class="headerlink" title="Neural Encoders"></a>Neural Encoders</h3><ol>
<li><p><strong>Semantic Compositionality through Recursive Matrix-Vector Spaces.</strong><br><em>Richard Socher, Brody Huval, Christopher D. Manning, Andrew Y. Ng.</em><br>EMNLP-CoNLL 2012.<br><a href="https://ai.stanford.edu/~ang/papers/emnlp12-SemanticCompositionalityRecursiveMatrixVectorSpaces.pdf" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>We introduce a recursive neural network (RNN) model that learns compositional vector representations for phrases and sentences of arbitrary syntactic type and length.</p>
</blockquote>
</li>
<li><p><strong>Convolution Neural Network for Relation Extraction</strong><br><em>Chunyang Liu, Wenbo Sun, Wenhan Chao, Wanxiang Che.</em><br>ADMA 2013<br><a href="https://link.springer.com/chapter/10.1007/978-3-642-53917-6_21" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>In this paper, we propose a novel convolution network, incorporating lexical features, applied to Relation Extraction. </p>
</blockquote>
</li>
<li><p><strong>Relation Classification via Convolutional Deep Neural Network.</strong><br><em>Daojian Zeng, Kang Liu, Siwei Lai, Guangyou Zhou, Jun Zhao.</em><br>COLING 2014.<br><a href="http://www.aclweb.org/anthology/C14-1220" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>We exploit a convolutional deep neural network (DNN) to extract lexical and sentence level features. Our method takes all of the word tokens as input without complicated pre-processing.</p>
</blockquote>
</li>
<li><p><strong>Classifying Relations by Ranking with Convolutional Neural Networks.</strong><br><em>CÂ´Ä±cero Nogueira dos Santos, Bing Xiang, Bowen Zhou.</em><br>ACL 2015.<br><a href="https://www.aclweb.org/anthology/P15-1061" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>In this work we tackle the relation classification task using a convolutional neural network that performs classification by ranking (CR-CNN).</p>
</blockquote>
</li>
<li><p><strong>Relation Extraction: Perspective from Convolutional Neural Networks.</strong><br><em>Thien Huu Nguyen, Ralph Grishman.</em><br>NAACL-HLT 2015<br><a href="http://www.aclweb.org/anthology/W15-1506" target="_blank" rel="noopener">paper</a>    </p>
<blockquote>
<p>Our model takes advantages of multiple window sizes for filters and pre-trained word embeddings as an initializer on a non-static architecture to improve the performance. We emphasize the relation extraction problem with an unbalanced corpus.        </p>
</blockquote>
</li>
<li><p><strong>End-to-End Relation Extraction using LSTMs on Sequences and Tree Structures.</strong><br><em>Makoto Miwa, Mohit Bansal.</em><br>ACL 2016.<br><a href="https://www.aclweb.org/anthology/P16-1105" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>Our recurrent neural network based model captures both word sequence and dependency tree substructure information by stacking bidirectional tree-structured LSTM-RNNs on bidirectional sequential LSTM-RNNsâ€¦ We further encourage detection of entities during training and use of entity information in relation extraction via entity pre-training and scheduled sampling.</p>
</blockquote>
</li>
<li><p><strong>A Walk-based Model on Entity Graphs for Relation Extraction.</strong><br><em>Fenia Christopoulou, Makoto Miwa, Sophia Ananiadou.</em><br>ACL 2018.<br><a href="http://aclweb.org/anthology/P18-2014#page=6&amp;zoom=100,0,313" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>We present a novel graph-based neural network model for relation extraction. Our model treats multiple pairs in a sentence simultaneously and considers interactions among them. All the entities in a sentence are placed as nodes in a fully-connected graph structure.</p>
</blockquote>
</li>
</ol>
<h3 id="Denoising-Methods"><a href="#Denoising-Methods" class="headerlink" title="Denoising Methods"></a>Denoising Methods</h3><ol>
<li><p><strong>Distant Supervision for Relation Extraction via Piecewise Convolutional Neural Networks.</strong><br><em>Daojian Zeng, Kang Liu, Yubo Chen, Jun Zhao.</em><br>EMNLP 2015.<br><a href="http://www.emnlp2015.org/proceedings/EMNLP/pdf/EMNLP203.pdf" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>We propose a novel model dubbed the Piecewise Convolutional Neural Networks (PCNNs) with multi-instance learning to address these two problems.</p>
</blockquote>
</li>
<li><p><strong>Neural Relation Extraction with Selective Attention over Instances.</strong><br><em>Yankai Lin, Shiqi Shen, Zhiyuan Liu, Huanbo Luan, Maosong Sun.</em><br>ACL 2016.<br><a href="http://www.aclweb.org/anthology/P16-1200" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>Distant supervision inevitably accompanies with the wrong labelling problem, and these noisy data will substantially hurt the performance of relation extraction. To alleviate this issue, we propose a sentence-level attention-based model for relation extraction.</p>
</blockquote>
</li>
<li><p><strong>Relation Extraction with Multi-instance Multi-label Convolutional Neural Networks.</strong><br><em>Xiaotian Jiang, Quan Wang, Peng Li, Bin Wang.</em><br>COLING 2016.<br><a href="http://www.aclweb.org/anthology/C16-1139" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>In this paper, we propose a multi-instance multi-label convolutional neural network for distantly supervised RE. It first relaxes the expressed-at-least-once assumption, and employs cross-sentence max-pooling so as to enable information sharing across different sentences.        </p>
</blockquote>
</li>
<li><p><strong>Adversarial Training for Relation Extraction.</strong><br><em>Yi Wu, David Bamman, Stuart Russell.</em><br>EMNLP 2017.<br><a href="http://www.aclweb.org/anthology/D17-1187" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>Adversarial training is a mean of regularizing classification algorithms by generating adversarial noise to the training data. We apply adversarial training in relation extraction within the multi-instance multi-label learning framework.</p>
</blockquote>
</li>
<li><p><strong>A Soft-label Method for Noise-tolerant Distantly Supervised Relation Extraction.</strong><br><em>Tianyu Liu, Kexiang Wang, Baobao Chang, Zhifang Sui.</em><br>EMNLP 2017.<br><a href="http://www.aclweb.org/anthology/D17-1189" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>We introduce an entity-pair level denoise method which exploits semantic information from correctly labeled entity pairs to correct wrong labels dynamically during training.</p>
</blockquote>
</li>
<li><p><strong>DSGAN: Generative Adversarial Training for Distant Supervision Relation Extraction.</strong><br><em>Pengda Qin, Weiran Xu, William Yang Wang.</em><br><a href="https://arxiv.org/pdf/1805.09929.pdf" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>We introduce an adversarial learning framework, which we named DSGAN, to learn a sentence-level true-positive generator. Inspired by Generative Adversarial Networks, we regard the positive samples generated by the generator as the negative samples to train the discriminator.</p>
</blockquote>
</li>
<li><p><strong>Reinforcement Learning for Relation Classification from Noisy Data.</strong><br><em>Jun Feng, Minlie Huang, Li Zhao, Yang Yang, Xiaoyan Zhu.</em><br>AAAI 2018.<br><a href="https://tianjun.me/static/essay_resources/RelationExtraction/Paper/AAAI2018Denoising.pdf" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>We propose a novel model for relation classification at the sentence level from noisy data. The model has two modules: an instance selector and a relation classifier. The instance selector chooses high-quality sentences with reinforcement learning and feeds the selected sentences into the relation classifier, and the relation classifier makes sentence-level prediction and provides rewards to the instance selector.</p>
</blockquote>
</li>
<li><p><strong>Robust Distant Supervision Relation Extraction via Deep Reinforcement Learning.</strong><br><em>Pengda Qin, Weiran Xu, William Yang Wang.</em><br>  2018.<br><a href="https://arxiv.org/pdf/1805.09927.pdf" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>We explore a deep reinforcement learning strategy to generate the false-positive indicator, where we automatically recognize false positives for each relation type without any supervised information.</p>
</blockquote>
</li>
</ol>
<h3 id="Extensions"><a href="#Extensions" class="headerlink" title="Extensions"></a>Extensions</h3><ol>
<li><p><strong>Neural Knowledge Acquisition via Mutual Attention between Knowledge Graph and Text</strong><br><em>Xu Han, Zhiyuan Liu, Maosong Sun.</em><br>AAAI 2018.<br><a href="http://nlp.csai.tsinghua.edu.cn/~lzy/publications/aaai2018_jointnre.pdf" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>We propose a general joint representation learning framework for knowledge acquisition (KA) on two tasks, knowledge graph completion (KGC) and relation extraction (RE) from text. We propose an effective mutual attention between KGs and text. The recip- rocal attention mechanism enables us to highlight important features and perform better KGC and RE.</p>
</blockquote>
</li>
<li><p><strong>Hierarchical Relation Extraction with Coarse-to-Fine Grained Attention</strong><br><em>Xu Han, Pengfei Yu, Zhiyuan Liu, Maosong Sun, Peng Li.</em><br>EMNLP 2018.<br><a href="http://www.aclweb.org/anthology/D18-1247" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>We aim to incorporate the hierarchical information of relations for distantly supervised relation extraction and propose a novel hierarchical attention scheme. The multiple layers of our hierarchical attention scheme provide coarse-to-fine granularity to better identify valid instances, which is especially effective for extracting those long-tail relations.</p>
</blockquote>
</li>
<li><p><strong>Incorporating Relation Paths in Neural Relation Extraction</strong><br><em>Wenyuan Zeng, Yankai Lin, Zhiyuan Liu, Maosong Sun.</em><br>EMNLP 2017.<br><a href="http://aclweb.org/anthology/D17-1186" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>We build inference chains between two target entities via intermediate entities, and propose a path-based neural relation extraction model to encode the relational semantics from both direct sentences and inference chains. </p>
</blockquote>
</li>
<li><p><strong>RESIDE: Improving Distantly-Supervised Neural Relation Extractionusing Side Information</strong><br><em>Shikhar Vashishth, Rishabh Joshi, Sai Suman Prayaga, Chiranjib Bhattacharyya, Partha Talukdar.</em><br>EMNLP 2018.<br><a href="https://aclweb.org/anthology/D18-1157" target="_blank" rel="noopener">paper</a></p>
<blockquote>
<p>In this paper, we propose RESIDE, a distantly-supervised neural relation extraction method which utilizes additional side  information from KBs for improved relation extraction. It uses entity type and relation alias information for imposing soft constraints  while predicting relations.</p>
</blockquote>
</li>
</ol>
]]></content>
      <categories>
        <category>Information Extraction</category>
        <category>Relation Extraction</category>
      </categories>
      <tags>
        <tag>NLP</tag>
        <tag>çŸ¥è¯†å›¾è°±</tag>
        <tag>å…³ç³»è¯†åˆ«</tag>
      </tags>
  </entry>
  <entry>
    <title>æ–°çš„èµ·ç‚¹</title>
    <url>/2019/04/14/%E6%96%B0%E7%9A%84%E8%B5%B7%E7%82%B9/</url>
    <content><![CDATA[<p>èŠ±äº†ä¸¤å¤©æ—¶é—´ï¼Œæ€»ç®—åŸºæœ¬ä¸Šåšæˆè¿™ä¸ªblogçš„é›å½¢äº†ï¼Œæ’’èŠ±ï¼</p>
<p>é¦–å…ˆå°è¯•äº†Materialä¸»é¢˜ï¼Œä½†ç°åœ¨æ²¡æœ‰å®˜æ–¹æ”¯æŒäº†â€¦æœ€åè¿˜æ˜¯é€‰æ‹©äº†NexTä¸»é¢˜ï¼Œç®€æ´å¤§æ–¹~</p>
<p>å°è¯•ä¸€ä¸‹ä»£ç åŠŸèƒ½ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello Blog"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>ä¸€äº›å›¾ç‰‡ï¼š</p>
<p><img src="/images/blog/balloon.png" alt></p>
<p><img src="/images/blog/xiamu.png" alt></p>
<h3 id="å¸Œæœ›è¿™ä¸ªblogå¯ä»¥è®°å½•æˆ‘å°†æ¥å­¦ä¹ ç ”ç©¶é“è·¯ä¸Šçš„ä¸€äº›æ”¶è·ï¼ŒåŠ æ²¹å§"><a href="#å¸Œæœ›è¿™ä¸ªblogå¯ä»¥è®°å½•æˆ‘å°†æ¥å­¦ä¹ ç ”ç©¶é“è·¯ä¸Šçš„ä¸€äº›æ”¶è·ï¼ŒåŠ æ²¹å§" class="headerlink" title="å¸Œæœ›è¿™ä¸ªblogå¯ä»¥è®°å½•æˆ‘å°†æ¥å­¦ä¹ ç ”ç©¶é“è·¯ä¸Šçš„ä¸€äº›æ”¶è·ï¼ŒåŠ æ²¹å§~"></a>å¸Œæœ›è¿™ä¸ªblogå¯ä»¥è®°å½•æˆ‘å°†æ¥å­¦ä¹ ç ”ç©¶é“è·¯ä¸Šçš„ä¸€äº›æ”¶è·ï¼ŒåŠ æ²¹å§~</h3>]]></content>
      <categories>
        <category>Others</category>
      </categories>
      <tags>
        <tag>æ„Ÿæ‚Ÿ</tag>
        <tag>ç”Ÿæ´»</tag>
      </tags>
  </entry>
</search>
